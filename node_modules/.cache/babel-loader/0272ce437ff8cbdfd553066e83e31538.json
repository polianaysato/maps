{"ast":null,"code":"/**\r\n * Paper class just like the white sheet of pressed fiber it draws its name\r\n * inspiration from is used as a starting point to start a drawing.\r\n *\r\n * Before we can start adding elements (drawing) we need to take out a new sheet\r\n * of paper, or in this instance create a blank SVG element.\r\n *\r\n * This class creates such element, as well as implements methods needed to\r\n * start adding elements to it.\r\n */\n\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\nimport { AMElement } from \"./AMElement\";\nimport { Group } from \"./Group\";\nimport { SVGContainer } from \"./SVGContainer\";\nimport * as $dom from \"../utils/DOM\";\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\n\n/**\r\n * Paper class which when instantiated will create an SVG element as well as\r\n * some of the sub-elements like `<desc>`, `<defs>`.\r\n *\r\n * Use its methods like `addGroup` and `append` to add elements to the paper.\r\n */\n\nvar Paper =\n/** @class */\nfunction () {\n  /**\r\n   * Creates main `<svg>` container and related elements.\r\n   *\r\n   * @param container A reference to HTML element to create `<svg>` in\r\n   */\n  function Paper(container, id) {\n    // Store container reference\n    this.container = container;\n    this.id = id; // Create SVG element\n\n    var svg = document.createElementNS($dom.SVGNS, \"svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    svg.setAttributeNS($dom.XMLNS, \"xmlns\", $dom.SVGNS);\n    svg.setAttributeNS($dom.XMLNS, \"xmlns:xlink\", $dom.XLINK);\n    svg.setAttribute(\"role\", \"group\");\n    this.container.appendChild(svg); // Add description\n    //let desc: SVGElement = <SVGElement>document.createElementNS($dom.SVGNS, \"desc\");\n    //desc.appendChild(document.createTextNode(\"JavaScript chart by amCharts\"));\n    //svg.appendChild(desc);\n    // Add defs\n\n    this.defs = document.createElementNS($dom.SVGNS, \"defs\");\n    svg.appendChild(this.defs); // Set width and height to fit container\n\n    svg.style.width = \"100%\";\n    svg.style.height = \"100%\";\n    svg.style.overflow = \"visible\"; // Store variable\n\n    this.svg = svg;\n  }\n  /**\r\n   * Creates and returns a new element. Does not attach it to Paper yet.\r\n   *\r\n   * @param elementName  Element name\r\n   * @return New element\r\n   */\n\n\n  Paper.prototype.add = function (elementName) {\n    return new AMElement(elementName);\n  };\n  /**\r\n   * Creates and returns a new Group element. Does not attach it to Paper.\r\n   *\r\n   * @param groupName  Element name\r\n   * @return New Group\r\n   */\n\n\n  Paper.prototype.addGroup = function (groupName) {\n    return new Group(groupName);\n  };\n  /**\r\n   * Appends an element to Paper.\r\n   *\r\n   * @param element Element to append\r\n   */\n\n\n  Paper.prototype.append = function (element) {\n    if (element) {\n      this.svg.appendChild(element.node);\n    }\n  };\n  /**\r\n   * Appends an element to `<defs>` block of the Paper.\r\n   *\r\n   * @param element  Element\r\n   */\n\n\n  Paper.prototype.appendDef = function (element) {\n    if (element) {\n      this.defs.appendChild(element.node);\n    }\n  };\n  /**\r\n   * Creates and returns new `<foreignObject>` element. Does not append it to\r\n   * Paper.\r\n   *\r\n   * @return A foreignObject element\r\n   */\n\n\n  Paper.prototype.foreignObject = function () {\n    var element = new AMElement(\"foreignObject\"); //this.append(element);\n\n    return element;\n  };\n  /**\r\n   * Checks if browser supports `<foreignObject>` elements.\r\n   *\r\n   * @return Supports `foreignObject`?\r\n   */\n\n\n  Paper.prototype.supportsForeignObject = function () {\n    return document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#Extensibility\", \"1.1\");\n  };\n\n  return Paper;\n}();\n\nexport { Paper };\nvar ghostPaper = null;\n/**\r\n * A [[Paper]] instance to create elements, that are not yet ready to be\r\n * placed in visible DOM.\r\n *\r\n * @ignore Exclude from docs\r\n */\n\nexport function getGhostPaper() {\n  if (ghostPaper === null) {\n    // ghost is used to draw elements while real paper is not yet created or Sprite doesn't know parent yet\n    var ghostDiv = document.createElement(\"div\");\n    ghostDiv.hidden = true;\n    ghostDiv.style.width = \"1px\";\n    ghostDiv.style.height = \"1px\";\n    ghostDiv.style.position = \"absolute\";\n    ghostDiv.style.zIndex = \"-1000000\";\n    document.body.appendChild(ghostDiv);\n    var ghostSvgContainer = new SVGContainer(ghostDiv, true);\n    ghostPaper = new Paper(ghostSvgContainer.SVGContainer, \"ghost\");\n  }\n\n  return ghostPaper;\n}","map":{"version":3,"mappings":"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","names":["AMElement","Group","SVGContainer","$dom","container","id","svg","document","createElementNS","SVGNS","setAttribute","setAttributeNS","XMLNS","XLINK","appendChild","defs","style","width","height","overflow","Paper","elementName","groupName","element","node","implementation","hasFeature","ghostPaper","getGhostPaper","ghostDiv","createElement","hidden","position","zIndex","body","ghostSvgContainer"],"sourceRoot":"","sources":["../../../../../src/.internal/core/rendering/Paper.ts"],"sourcesContent":["/**\r\n * Paper class just like the white sheet of pressed fiber it draws its name\r\n * inspiration from is used as a starting point to start a drawing.\r\n *\r\n * Before we can start adding elements (drawing) we need to take out a new sheet\r\n * of paper, or in this instance create a blank SVG element.\r\n *\r\n * This class creates such element, as well as implements methods needed to\r\n * start adding elements to it.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AMElement } from \"./AMElement\";\r\nimport { Group } from \"./Group\";\r\nimport { SVGContainer } from \"./SVGContainer\";\r\nimport * as $dom from \"../utils/DOM\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Represents available SVG elements that can be added to paper.\r\n *\r\n * @todo Review if we can remove commented out methods\r\n */\r\nexport type SVGElementNames = \"a\" | \"altGlyph\" | \"altGlyphDef\" | \"altGlyphItem\" | \"animate\" | \"animateColor\" | \"animateMotion\" | \"animateTransform\" | \"circle\" | \"clipPath\" | \"color-profile\" | \"cursor\" | \"defs\" | \"desc\" | \"ellipse\" | \"feBlend\" | \"feColorMatrix\" | \"feComponentTransfer\" | \"feComposite\" | \"feConvolveMatrix\" | \"feDiffuseLighting\" | \"feDisplacementMap\" | \"feDistantLight\" | \"feFlood\" | \"feFuncA\" | \"feFuncB\" | \"feFuncG\" | \"feFuncR\" | \"feGaussianBlur\" | \"feImage\" | \"feMerge\" | \"feMergeNode\" | \"feMorphology\" | \"feOffset\" | \"fePointLight\" | \"feSpecularLighting\" | \"feSpotLight\" | \"feTile\" | \"feTurbulence\" | \"feConvolveMatrix\" | \"filter\" | \"font\" | \"font-face\" | \"font-face-format\" | \"font-face-name\" | \"font-face-src\" | \"font-face-uri\" | \"foreignObject\" | \"g\" | \"glyph\" | \"glyphRef\" | \"hkern\" | \"image\" | \"line\" | \"linearGradient\" | \"marker\" | \"mask\" | \"metadata\" | \"missing-glyph\" | \"mpath\" | \"path\" | \"pattern\" | \"polygon\" | \"polyline\" | \"radialGradient\" | \"rect\" | \"script\" | \"set\" | \"stop\" | \"style\" | \"svg\" | \"switch\" | \"symbol\" | \"text\" | \"textPath\" | \"title\" | \"tref\" | \"tspan\" | \"use\" | \"view\" | \"vkern\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Paper class which when instantiated will create an SVG element as well as\r\n * some of the sub-elements like `<desc>`, `<defs>`.\r\n *\r\n * Use its methods like `addGroup` and `append` to add elements to the paper.\r\n */\r\nexport class Paper {\r\n\r\n\t/**\r\n\t * A reference `<svg>` element.\r\n\t */\r\n\tpublic svg: SVGSVGElement;\r\n\r\n\t/**\r\n\t * A reference to the HTML container the `<svg>` element is placed in.\r\n\t */\r\n\tpublic container: HTMLElement;\r\n\r\n\t/**\r\n\t * A reference to the `<defs>` element.\r\n\t */\r\n\tpublic defs: SVGDefsElement;\r\n\r\n\t/**\r\n\t * An id of the element.\r\n\t */\r\n\tpublic id: string;\r\n\r\n\t/**\r\n\t * Creates main `<svg>` container and related elements.\r\n\t *\r\n\t * @param container A reference to HTML element to create `<svg>` in\r\n\t */\r\n\tconstructor(container: HTMLElement, id: string) {\r\n\r\n\t\t// Store container reference\r\n\t\tthis.container = container;\r\n\t\tthis.id = id;\r\n\r\n\t\t// Create SVG element\r\n\t\tlet svg = <SVGSVGElement>document.createElementNS($dom.SVGNS, \"svg\");\r\n\t\tsvg.setAttribute(\"version\", \"1.1\");\r\n\t\tsvg.setAttributeNS($dom.XMLNS, \"xmlns\", $dom.SVGNS);\r\n\t\tsvg.setAttributeNS($dom.XMLNS, \"xmlns:xlink\", $dom.XLINK);\r\n\t\tsvg.setAttribute(\"role\", \"group\");\r\n\t\tthis.container.appendChild(svg);\r\n\r\n\t\t// Add description\r\n\t\t//let desc: SVGElement = <SVGElement>document.createElementNS($dom.SVGNS, \"desc\");\r\n\t\t//desc.appendChild(document.createTextNode(\"JavaScript chart by amCharts\"));\r\n\t\t//svg.appendChild(desc);\r\n\r\n\t\t// Add defs\r\n\t\tthis.defs = <SVGDefsElement>document.createElementNS($dom.SVGNS, \"defs\");\r\n\t\tsvg.appendChild(this.defs);\r\n\r\n\t\t// Set width and height to fit container\r\n\t\tsvg.style.width = \"100%\";\r\n\t\tsvg.style.height = \"100%\";\r\n\t\tsvg.style.overflow = \"visible\";\r\n\r\n\t\t// Store variable\r\n\t\tthis.svg = svg;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns a new element. Does not attach it to Paper yet.\r\n\t *\r\n\t * @param elementName  Element name\r\n\t * @return New element\r\n\t */\r\n\tpublic add(elementName: SVGElementNames): AMElement {\r\n\t\treturn new AMElement(elementName);\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns a new Group element. Does not attach it to Paper.\r\n\t *\r\n\t * @param groupName  Element name\r\n\t * @return New Group\r\n\t */\r\n\tpublic addGroup(groupName: SVGElementNames): Group {\r\n\t\treturn new Group(groupName);\r\n\t}\r\n\r\n\t/**\r\n\t * Appends an element to Paper.\r\n\t *\r\n\t * @param element Element to append\r\n\t */\r\n\tpublic append(element: AMElement): void {\r\n\t\tif (element) {\r\n\t\t\tthis.svg.appendChild(element.node);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Appends an element to `<defs>` block of the Paper.\r\n\t *\r\n\t * @param element  Element\r\n\t */\r\n\tpublic appendDef(element: AMElement): void {\r\n\t\tif (element) {\r\n\t\t\tthis.defs.appendChild(element.node);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns new `<foreignObject>` element. Does not append it to\r\n\t * Paper.\r\n\t *\r\n\t * @return A foreignObject element\r\n\t */\r\n\tpublic foreignObject(): AMElement {\r\n\t\tlet element = new AMElement(\"foreignObject\");\r\n\t\t//this.append(element);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if browser supports `<foreignObject>` elements.\r\n\t *\r\n\t * @return Supports `foreignObject`?\r\n\t */\r\n\tpublic supportsForeignObject(): boolean {\r\n\t\treturn document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#Extensibility\", \"1.1\");\r\n\t}\r\n\r\n}\r\n\r\n\r\nlet ghostPaper: Paper | null = null;\r\n\r\n/**\r\n * A [[Paper]] instance to create elements, that are not yet ready to be\r\n * placed in visible DOM.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport function getGhostPaper(): Paper {\r\n\tif (ghostPaper === null) {\r\n\t\t// ghost is used to draw elements while real paper is not yet created or Sprite doesn't know parent yet\r\n\t\tlet ghostDiv: HTMLDivElement = document.createElement(\"div\");\r\n\t\tghostDiv.hidden = true;\r\n\t\tghostDiv.style.width = \"1px\";\r\n\t\tghostDiv.style.height = \"1px\";\r\n\t\tghostDiv.style.position = \"absolute\";\r\n\t\tghostDiv.style.zIndex = \"-1000000\";\r\n\t\tdocument.body.appendChild(ghostDiv);\r\n\t\tlet ghostSvgContainer = new SVGContainer(ghostDiv, true);\r\n\t\tghostPaper = new Paper(ghostSvgContainer.SVGContainer, \"ghost\");\r\n\r\n\t}\r\n\r\n\treturn ghostPaper;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}