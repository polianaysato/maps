{"ast":null,"code":"/**\r\n * Module, defining Axis Renderer for vertical axes.\r\n */\nimport { __extends } from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\n\nimport { AxisRenderer } from \"./AxisRenderer\";\nimport { WavedLine } from \"../../core/elements/WavedLine\";\nimport { WavedRectangle } from \"../../core/elements/WavedRectangle\";\nimport { registry } from \"../../core/Registry\";\nimport { percent, Percent } from \"../../core/utils/Percent\";\nimport * as $math from \"../../core/utils/Math\";\nimport * as $path from \"../../core/rendering/Path\";\nimport * as $utils from \"../../core/utils/Utils\";\nimport * as $type from \"../../core/utils/Type\";\nimport { defaultRules, ResponsiveBreakpoints } from \"../../core/utils/Responsive\";\nimport { AxisBullet } from \"./AxisBullet\";\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\n\n/**\r\n * A renderer for vertical axis.\r\n *\r\n * @see {@link IAxisRendererYEvents} for a list of available events\r\n * @see {@link IAxisRendererYAdapters} for a list of available Adapters\r\n */\n\nvar AxisRendererY =\n/** @class */\nfunction (_super) {\n  __extends(AxisRendererY, _super);\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param axis Related axis\r\n   */\n\n\n  function AxisRendererY() {\n    var _this = _super.call(this) || this;\n\n    _this.className = \"AxisRendererY\";\n    _this.minGridDistance = 40;\n    _this.opposite = false;\n    _this.height = percent(100);\n    _this.labels.template.verticalCenter = \"middle\";\n\n    _this.applyTheme();\n\n    return _this;\n  }\n  /**\r\n  * @ignore\r\n  */\n\n\n  AxisRendererY.prototype.setAxis = function (axis) {\n    _super.prototype.setAxis.call(this, axis);\n\n    axis.layout = \"horizontal\";\n  };\n  /**\r\n   * @ignore\r\n   */\n\n\n  AxisRendererY.prototype.updateGridContainer = function () {\n    var axis = this.axis;\n\n    if (axis) {\n      var gridContainer = this.gridContainer;\n      gridContainer.y = axis.pixelY;\n      gridContainer.height = axis.axisLength;\n    }\n  };\n  /**\r\n   * @ignore\r\n   */\n\n\n  AxisRendererY.prototype.toAxisPosition = function (value) {\n    var axis = this.axis;\n\n    if (axis) {\n      var inversedPosition = 1 - value;\n      var relativePositionSprite = axis.relativePositionSprite;\n      var y = axis.pixelY;\n\n      if (relativePositionSprite) {\n        y = $utils.spritePointToSprite({\n          x: 0,\n          y: this.pixelY\n        }, this.parent, relativePositionSprite).y;\n      } else {\n        relativePositionSprite = axis.parent;\n      }\n\n      if (relativePositionSprite) {\n        var relativeY = y / relativePositionSprite.innerHeight;\n        var relativeHeight = axis.axisLength / relativePositionSprite.innerHeight;\n        return 1 - (inversedPosition - relativeY) / relativeHeight;\n      }\n    }\n\n    return value;\n  };\n  /**\r\n   * Called when rendered is attached to an Axis, as well as a property of\r\n   * Axis that might affect the appearance is updated.\r\n   *\r\n   * E.g. `axis.opposite`, `axis.inside`, etc.\r\n   *\r\n   * This method is called **before** draw, so that any related setting\r\n   * changed in this method can be changed.\r\n   *\r\n   * @todo Description (review)\r\n   * @ignore Exclude from docs\r\n   */\n\n\n  AxisRendererY.prototype.processRenderer = function () {\n    _super.prototype.processRenderer.call(this);\n\n    var axis = this.axis;\n\n    if (axis) {\n      var title = axis.title;\n      title.valign = \"middle\";\n\n      if (!(axis.height instanceof Percent)) {\n        axis.height = percent(100);\n      }\n\n      if (this.opposite) {\n        title.rotation = 90;\n        this.line.toBack();\n        title.toFront();\n      } else {\n        title.rotation = -90;\n        title.toBack();\n        this.line.toFront();\n      }\n    }\n  };\n  /**\r\n   * Updates some of the Axis tooltip's visual properties, related to\r\n   * rendering of the Axis.\r\n   *\r\n   * @todo Description (review)\r\n   * @ignore Exclude from docs\r\n   */\n\n\n  AxisRendererY.prototype.updateTooltip = function () {\n    var axis = this.axis;\n\n    if (axis) {\n      var bigNum = 2000;\n      var bbx = 0;\n      var bby = 0;\n      var bbw = bigNum;\n      var bbh = this.axisLength; // right\n\n      if (this.opposite) {\n        if (this.inside) {\n          bbx = -bigNum;\n          bbw = bigNum;\n        }\n      } // left\n      else {\n        if (!this.inside) {\n          bbx = -bigNum;\n          bbw = bigNum;\n        }\n      }\n\n      this.axis.updateTooltip(\"horizontal\", {\n        x: bbx,\n        y: bby,\n        width: bbw,\n        height: bbh\n      });\n    }\n  };\n\n  Object.defineProperty(AxisRendererY.prototype, \"axisLength\", {\n    /**\r\n     * Returns actual length of the Axis, in pixels.\r\n     *\r\n     * @return Length (px)\r\n     */\n    get: function get() {\n      var axis = this.axis;\n      return axis.measuredHeight - axis.pixelPaddingTop - axis.pixelPaddingBottom || 0;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Converts relative position on axis to point coordinates.\r\n   *\r\n   * @param position  Position (0-1)\r\n   * @param position2  Position (0-1) Position on the second axis\r\n   * @return Point\r\n   */\n\n  AxisRendererY.prototype.positionToPoint = function (position, position2) {\n    return {\n      x: 0,\n      y: this.positionToCoordinate(position)\n    };\n  };\n  /**\r\n   * Converts a point at specific coordinates to a relative position (0-1)\r\n   * on the axis.\r\n   *\r\n   * @param point  Point\r\n   * @return Position (0-1)\r\n   */\n\n\n  AxisRendererY.prototype.pointToPosition = function (point) {\n    return this.coordinateToPosition(point.y, point.x);\n  };\n  /**\r\n   * Converts a coordinate in pixels to a relative position. (0-1)\r\n   *\r\n   * @param coordinate  Coordinate (px)\r\n   * @param coordinate2  Coordinate of a second axis, only needed for complex axes systems, like timeline (px)\r\n   * @return Position (0-1)\r\n   */\n\n\n  AxisRendererY.prototype.coordinateToPosition = function (coordinate, coordinate2) {\n    var position;\n    var axis = this.axis;\n    var axisFullLength = axis.axisFullLength;\n\n    if (axis.renderer.inversed) {\n      position = 1 - axis.start - coordinate / axisFullLength;\n    } else {\n      position = coordinate / axisFullLength + (1 - axis.end);\n    }\n\n    return $math.round(position, 5);\n  };\n  /**\r\n   * [getPositionRangePath description]\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @todo Description\r\n   * @param startPosition  Starting position\r\n   * @param endPosition    End position\r\n   * @return SVG path\r\n   */\n\n\n  AxisRendererY.prototype.getPositionRangePath = function (startPosition, endPosition) {\n    var y1 = $math.fitToRange(this.positionToCoordinate(startPosition), 0, this.axisLength);\n    var y2 = $math.fitToRange(this.positionToCoordinate(endPosition), 0, this.axisLength);\n    var h = Math.abs(y2 - y1);\n    var w = this.getWidth();\n    var y = Math.min(y1, y2);\n    var x = 0;\n    return $path.rectToPath({\n      x: x,\n      y: y,\n      width: w,\n      height: h\n    }, true);\n  };\n  /**\r\n   * Updates and positions a grid element.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param grid         Grid element\r\n   * @param position     Starting position\r\n   * @param endPosition  End position\r\n   */\n\n\n  AxisRendererY.prototype.updateGridElement = function (grid, position, endPosition) {\n    position = position + (endPosition - position) * grid.location;\n    var point = this.positionToPoint(position); //\tpoint.y = $utils.spritePointToSprite({ x: 0, y: point.y }, this, this.gridContainer).y;\n\n    grid.path = $path.moveTo({\n      x: 0,\n      y: 0\n    }) + $path.lineTo({\n      x: this.getWidth(),\n      y: 0\n    });\n    this.positionItem(grid, point);\n    this.toggleVisibility(grid, position, 0, 1);\n  };\n  /**\r\n   * Updates and positions a tick element.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param tick         Tick element\r\n   * @param position     Starting position\r\n   * @param endPosition  End position\r\n   */\n\n\n  AxisRendererY.prototype.updateTickElement = function (tick, position, endPosition) {\n    position = position + (endPosition - position) * tick.location;\n    var point = this.positionToPoint(position);\n    var tickLength = tick.length;\n\n    try {\n      $utils.used(this.axis.title.measuredWidth);\n    } catch (_a) {// void\n    }\n\n    point.x = $utils.spritePointToSprite({\n      x: this.line.pixelX,\n      y: 0\n    }, this.line.parent, this.gridContainer).x;\n\n    if (!this.opposite) {\n      tickLength *= tick.inside ? 1 : -1;\n    } else {\n      tickLength *= tick.inside ? -1 : 1;\n    }\n\n    tick.path = $path.moveTo({\n      x: 0,\n      y: 0\n    }) + $path.lineTo({\n      x: tickLength,\n      y: 0\n    });\n    this.positionItem(tick, point);\n    this.toggleVisibility(tick, position, 0, 1);\n  };\n  /**\r\n   * Updates and positions the axis line element.\r\n   *\r\n   * @ignore Exclude from docs\r\n   */\n\n\n  AxisRendererY.prototype.updateAxisLine = function () {\n    this.line.path = $path.moveTo({\n      x: 0,\n      y: 0\n    }) + $path.lineTo({\n      x: 0,\n      y: this.axisLength\n    });\n  };\n  /**\r\n   * Updates and positions the base grid element.\r\n   *\r\n   * @ignore Exclude from docs\r\n   */\n\n\n  AxisRendererY.prototype.updateBaseGridElement = function () {\n    _super.prototype.updateBaseGridElement.call(this);\n\n    var axis = this.axis;\n    var w = this.getWidth();\n    var h = this.axisLength;\n    var y = axis.basePoint.y;\n    var baseGrid = this.baseGrid;\n\n    if (y < -0.2 || y > h + 0.2) {\n      baseGrid.hide(0);\n    } else {\n      var x = $utils.spritePointToSprite({\n        x: 0,\n        y: 0\n      }, this.gridContainer, baseGrid.parent).x;\n      baseGrid.path = $path.moveTo({\n        x: 0,\n        y: 0\n      }) + $path.lineTo({\n        x: w,\n        y: 0\n      });\n      baseGrid.moveTo({\n        x: x,\n        y: y\n      });\n      baseGrid.show(0);\n    }\n  };\n  /**\r\n   * Updates and positions a label element.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param label        Label element\r\n   * @param position     Starting position\r\n   * @param endPosition  Ending position\r\n   */\n\n\n  AxisRendererY.prototype.updateLabelElement = function (label, position, endPosition, location) {\n    if (!$type.hasValue(location)) {\n      location = label.location;\n    }\n\n    position = position + (endPosition - position) * location;\n    label.isMeasured = !label.inside;\n    var point = this.positionToPoint(position);\n    var horizontalCenter;\n    var deltaX = 0;\n    var maxWidth = this.gridContainer.maxWidth;\n\n    if (this.opposite) {\n      if (label.inside) {\n        horizontalCenter = \"right\";\n\n        if (label.align == \"left\") {\n          deltaX = -maxWidth;\n          horizontalCenter = \"left\";\n        }\n\n        if (label.align == \"center\") {\n          deltaX = -maxWidth / 2;\n          horizontalCenter = \"middle\";\n        }\n      } else {\n        horizontalCenter = \"left\";\n      }\n\n      point.x = 0 + deltaX;\n    } else {\n      if (label.inside) {\n        horizontalCenter = \"left\";\n\n        if (label.align == \"right\") {\n          deltaX = maxWidth;\n          horizontalCenter = \"right\";\n        }\n\n        if (label.align == \"center\") {\n          deltaX = maxWidth / 2;\n          horizontalCenter = \"middle\";\n        }\n      } else {\n        horizontalCenter = \"right\";\n      }\n\n      point.x = this.measuredWidth + deltaX;\n    }\n\n    if (label.rotation == 0) {\n      // Apply fuzzy logic to verticalCenter only if labels are not rotated\n      label.horizontalCenter = horizontalCenter;\n    }\n\n    this.positionItem(label, point);\n    this.toggleVisibility(label, position, this.minLabelPosition, this.maxLabelPosition);\n  };\n  /**\r\n   * Updates and positions an axis break element.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param axisBreak Break element\r\n   */\n\n\n  AxisRendererY.prototype.updateBreakElement = function (axisBreak) {\n    _super.prototype.updateBreakElement.call(this, axisBreak);\n\n    var startLine = axisBreak.startLine;\n    var endLine = axisBreak.endLine;\n    var fillShape = axisBreak.fillShape;\n    var startPoint = axisBreak.startPoint;\n    var endPoint = axisBreak.endPoint;\n    var x1 = axisBreak.pixelMarginLeft;\n    var x2 = this.getWidth() - axisBreak.pixelMarginLeft - axisBreak.pixelMarginRight;\n    startPoint.y = $math.fitToRange(startPoint.y, -1, this.axisLength + 1);\n    endPoint.y = $math.fitToRange(endPoint.y, -1, this.axisLength + 1);\n\n    if (startPoint.y == endPoint.y && (startPoint.y < 0 || startPoint.y > this.axisLength)) {\n      axisBreak.fillShape.__disabled = true;\n    } else {\n      axisBreak.fillShape.__disabled = false;\n    }\n\n    var w = Math.abs(x2 - x1);\n    startLine.x = x1;\n    startLine.height = 0;\n    startLine.width = w;\n    endLine.x = x1;\n    endLine.height = 0;\n    endLine.width = w;\n    fillShape.width = w;\n    fillShape.height = Math.abs(endPoint.y - startPoint.y);\n    fillShape.x = x1;\n    fillShape.y = endPoint.y;\n  };\n  /**\r\n   * Creates visual elements for and axis break.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param axisBreak Axis break\r\n   */\n\n\n  AxisRendererY.prototype.createBreakSprites = function (axisBreak) {\n    axisBreak.startLine = new WavedLine();\n    axisBreak.endLine = new WavedLine();\n    var wavedRectangle = new WavedRectangle();\n    wavedRectangle.setWavedSides(true, false, true, false);\n    axisBreak.fillShape = wavedRectangle;\n  };\n  /**\r\n   * Converts a position on the axis to a coordinate in pixels.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param position  Position (0-1)\r\n   * @return Coordinate (px)\r\n   */\n\n\n  AxisRendererY.prototype.positionToCoordinate = function (position) {\n    var coordinate;\n    var axis = this.axis;\n    var axisFullLength = axis.axisFullLength;\n\n    if (!axis.renderer.inversed) {\n      coordinate = (axis.end - position) * axisFullLength;\n    } else {\n      coordinate = (position - axis.start) * axisFullLength;\n    }\n\n    return coordinate;\n  };\n  /**\r\n   * Updates and positions axis bullets.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param bullet       AxisBullet element\r\n   * @param position     Starting position\r\n   * @param endPosition  End position\r\n   */\n\n\n  AxisRendererY.prototype.updateBullet = function (bullet, position, endPosition) {\n    var location = 0.5;\n\n    if (bullet instanceof AxisBullet) {\n      location = bullet.location;\n    }\n\n    position = position + (endPosition - position) * location;\n    var point = this.positionToPoint(position);\n    point.x = $utils.spritePointToSprite({\n      x: this.line.pixelX,\n      y: 0\n    }, this.line.parent, this.gridContainer).x;\n    this.positionItem(bullet, point);\n    this.toggleVisibility(bullet, position, 0, 1);\n  };\n\n  return AxisRendererY;\n}(AxisRenderer);\n\nexport { AxisRendererY };\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\n\nregistry.registeredClasses[\"AxisRendererY\"] = AxisRendererY;\n/**\r\n * Add default responsive rules\r\n */\n\n/**\r\n * Put labels inside plot area.\r\n * Disable first and last labels.\r\n */\n\ndefaultRules.push({\n  relevant: ResponsiveBreakpoints.widthS,\n  state: function state(target, stateId) {\n    if (target instanceof AxisRendererY) {\n      var state = target.states.create(stateId);\n      state.properties.inside = true;\n      state.properties.maxLabelPosition = 0.9;\n      state.properties.minLabelPosition = 0.1;\n      return state;\n    }\n\n    return null;\n  }\n});\n/**\r\n * Disable labels altogather on very small charts\r\n */\n\ndefaultRules.push({\n  relevant: ResponsiveBreakpoints.widthXS,\n  state: function state(target, stateId) {\n    if (target instanceof AxisRendererY) {\n      var state = target.states.create(stateId);\n      state.properties.disabled = true;\n      return state;\n    }\n\n    return null;\n  }\n});","map":{"version":3,"mappings":"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","names":["AxisRenderer","WavedLine","WavedRectangle","registry","percent","Percent","$math","$path","$utils","$type","defaultRules","ResponsiveBreakpoints","AxisBullet","__extends","_super","_this","className","minGridDistance","opposite","height","labels","template","verticalCenter","applyTheme","AxisRendererY","axis","setAxis","call","layout","gridContainer","y","pixelY","axisLength","value","inversedPosition","relativePositionSprite","spritePointToSprite","x","parent","relativeY","innerHeight","relativeHeight","processRenderer","title","valign","rotation","line","toBack","toFront","bigNum","bbx","bby","bbw","bbh","inside","updateTooltip","width","Object","measuredHeight","pixelPaddingTop","pixelPaddingBottom","position","position2","positionToCoordinate","point","coordinateToPosition","coordinate","coordinate2","axisFullLength","renderer","inversed","start","end","round","startPosition","endPosition","y1","fitToRange","y2","h","Math","abs","w","getWidth","min","rectToPath","grid","location","positionToPoint","path","moveTo","lineTo","positionItem","toggleVisibility","tick","tickLength","length","used","measuredWidth","pixelX","updateBaseGridElement","basePoint","baseGrid","hide","show","label","hasValue","isMeasured","horizontalCenter","deltaX","maxWidth","align","minLabelPosition","maxLabelPosition","axisBreak","updateBreakElement","startLine","endLine","fillShape","startPoint","endPoint","x1","pixelMarginLeft","x2","pixelMarginRight","__disabled","wavedRectangle","setWavedSides","bullet","registeredClasses","push","relevant","widthS","state","target","stateId","states","create","properties","widthXS","disabled"],"sourceRoot":"","sources":["../../../../../src/.internal/charts/axes/AxisRendererY.ts"],"sourcesContent":["/**\r\n * Module, defining Axis Renderer for vertical axes.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisRenderer, IAxisRendererProperties, IAxisRendererAdapters, IAxisRendererEvents } from \"./AxisRenderer\";\r\nimport { Sprite } from \"../../core/Sprite\";\r\nimport { IPoint } from \"../../core/defs/IPoint\";\r\nimport { Axis } from \"./Axis\";\r\nimport { HorizontalCenter } from \"../../core/defs/HorizontalCenter\";\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { Grid } from \"./Grid\";\r\nimport { AxisTick } from \"./AxisTick\";\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport { AxisBreak } from \"./AxisBreak\";\r\nimport { WavedLine } from \"../../core/elements/WavedLine\";\r\nimport { WavedRectangle } from \"../../core/elements/WavedRectangle\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent, Percent } from \"../../core/utils/Percent\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { defaultRules, ResponsiveBreakpoints } from \"../../core/utils/Responsive\";\r\nimport { AxisBullet } from \"./AxisBullet\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[AxisRendererY]].\r\n */\r\nexport interface IAxisRendererYProperties extends IAxisRendererProperties { }\r\n\r\n/**\r\n * Defines events for [[AxisRendererY]].\r\n */\r\nexport interface IAxisRendererYEvents extends IAxisRendererEvents { }\r\n\r\n/**\r\n * Defines adapters for [[AxisRenderer]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IAxisRendererYAdapters extends IAxisRendererAdapters, IAxisRendererYProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A renderer for vertical axis.\r\n *\r\n * @see {@link IAxisRendererYEvents} for a list of available events\r\n * @see {@link IAxisRendererYAdapters} for a list of available Adapters\r\n */\r\nexport class AxisRendererY extends AxisRenderer {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t */\r\n\tpublic _properties!: IAxisRendererYProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t */\r\n\tpublic _adapter!: IAxisRendererYAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t */\r\n\tpublic _events!: IAxisRendererYEvents;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param axis Related axis\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"AxisRendererY\";\r\n\t\tthis.minGridDistance = 40;\r\n\t\tthis.opposite = false;\r\n\t\tthis.height = percent(100);\r\n\t\tthis.labels.template.verticalCenter = \"middle\";\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t* @ignore\r\n\t*/\r\n\tpublic setAxis(axis: Axis) {\r\n\t\tsuper.setAxis(axis);\r\n\t\taxis.layout = \"horizontal\";\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic updateGridContainer() {\r\n\t\tlet axis = this.axis;\r\n\t\tif (axis) {\r\n\t\t\tlet gridContainer = this.gridContainer;\r\n\t\t\tgridContainer.y = axis.pixelY;\r\n\t\t\tgridContainer.height = axis.axisLength;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic toAxisPosition(value: number): number {\r\n\t\tlet axis = this.axis;\r\n\t\tif (axis) {\r\n\t\t\tlet inversedPosition = 1 - value;\r\n\t\t\tlet relativePositionSprite = axis.relativePositionSprite;\r\n\r\n\t\t\tlet y = axis.pixelY;\r\n\t\t\tif (relativePositionSprite) {\r\n\t\t\t\ty = $utils.spritePointToSprite({ x: 0, y: this.pixelY }, this.parent, relativePositionSprite).y;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\trelativePositionSprite = axis.parent;\r\n\t\t\t}\r\n\t\t\tif (relativePositionSprite) {\r\n\t\t\t\tlet relativeY = y / relativePositionSprite.innerHeight;\r\n\t\t\t\tlet relativeHeight = axis.axisLength / relativePositionSprite.innerHeight;\r\n\r\n\t\t\t\treturn 1 - (inversedPosition - relativeY) / relativeHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Called when rendered is attached to an Axis, as well as a property of\r\n\t * Axis that might affect the appearance is updated.\r\n\t *\r\n\t * E.g. `axis.opposite`, `axis.inside`, etc.\r\n\t *\r\n\t * This method is called **before** draw, so that any related setting\r\n\t * changed in this method can be changed.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic processRenderer(): void {\r\n\t\tsuper.processRenderer();\r\n\r\n\t\tlet axis = this.axis;\r\n\r\n\t\tif (axis) {\r\n\r\n\t\t\tlet title: Label = axis.title;\r\n\t\t\ttitle.valign = \"middle\";\r\n\r\n\t\t\tif (!(axis.height instanceof Percent)) {\r\n\t\t\t\taxis.height = percent(100);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.opposite) {\r\n\t\t\t\ttitle.rotation = 90;\r\n\t\t\t\tthis.line.toBack();\r\n\t\t\t\ttitle.toFront();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttitle.rotation = -90;\r\n\t\t\t\ttitle.toBack();\r\n\t\t\t\tthis.line.toFront();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates some of the Axis tooltip's visual properties, related to\r\n\t * rendering of the Axis.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateTooltip(): void {\r\n\t\tlet axis: Axis = this.axis;\r\n\t\tif (axis) {\r\n\r\n\t\t\tlet bigNum: number = 2000;\r\n\t\t\tlet bbx: number = 0;\r\n\t\t\tlet bby: number = 0;\r\n\t\t\tlet bbw: number = bigNum;\r\n\t\t\tlet bbh: number = this.axisLength;\r\n\r\n\t\t\t// right\r\n\t\t\tif (this.opposite) {\r\n\t\t\t\tif (this.inside) {\r\n\t\t\t\t\tbbx = - bigNum;\r\n\t\t\t\t\tbbw = bigNum;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// left\r\n\t\t\telse {\r\n\t\t\t\tif (!this.inside) {\r\n\t\t\t\t\tbbx = - bigNum;\r\n\t\t\t\t\tbbw = bigNum;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.axis.updateTooltip(\"horizontal\", { x: bbx, y: bby, width: bbw, height: bbh });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns actual length of the Axis, in pixels.\r\n\t *\r\n\t * @return Length (px)\r\n\t */\r\n\tpublic get axisLength(): number {\r\n\t\tlet axis = this.axis;\r\n\t\treturn (axis.measuredHeight - axis.pixelPaddingTop - axis.pixelPaddingBottom) || 0;\r\n\t}\r\n\t/**\r\n\t * Converts relative position on axis to point coordinates.\r\n\t *\r\n\t * @param position  Position (0-1)\r\n\t * @param position2  Position (0-1) Position on the second axis\r\n\t * @return Point\r\n\t */\r\n\tpublic positionToPoint(position: number, position2?: number): IPoint {\r\n\t\treturn { x: 0, y: this.positionToCoordinate(position) };\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a point at specific coordinates to a relative position (0-1)\r\n\t * on the axis.\r\n\t *\r\n\t * @param point  Point\r\n\t * @return Position (0-1)\r\n\t */\r\n\tpublic pointToPosition(point: IPoint) {\r\n\t\treturn this.coordinateToPosition(point.y, point.x);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a coordinate in pixels to a relative position. (0-1)\r\n\t *\r\n\t * @param coordinate  Coordinate (px)\r\n\t * @param coordinate2  Coordinate of a second axis, only needed for complex axes systems, like timeline (px)\r\n\t * @return Position (0-1)\r\n\t */\r\n\tpublic coordinateToPosition(coordinate: number, coordinate2?:number): number {\r\n\t\tlet position: number;\r\n\t\tlet axis: Axis = this.axis;\r\n\t\tlet axisFullLength = axis.axisFullLength;\r\n\r\n\t\tif (axis.renderer.inversed) {\r\n\t\t\tposition = (1 - axis.start) - coordinate / axisFullLength;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tposition = coordinate / axisFullLength + (1 - axis.end);\r\n\t\t}\r\n\t\treturn $math.round(position, 5);\r\n\t}\t\r\n\r\n\t/**\r\n\t * [getPositionRangePath description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param startPosition  Starting position\r\n\t * @param endPosition    End position\r\n\t * @return SVG path\r\n\t */\r\n\tpublic getPositionRangePath(startPosition: number, endPosition: number): string {\r\n\t\tlet y1: number = $math.fitToRange(this.positionToCoordinate(startPosition), 0, this.axisLength);\r\n\t\tlet y2: number = $math.fitToRange(this.positionToCoordinate(endPosition), 0, this.axisLength);\r\n\r\n\t\tlet h: number = Math.abs(y2 - y1);\r\n\t\tlet w: number = this.getWidth();\r\n\t\tlet y: number = Math.min(y1, y2);\r\n\t\tlet x: number = 0;\r\n\r\n\t\treturn $path.rectToPath({\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t\twidth: w,\r\n\t\t\theight: h\r\n\t\t}, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a grid element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param grid         Grid element\r\n\t * @param position     Starting position\r\n\t * @param endPosition  End position\r\n\t */\r\n\tpublic updateGridElement(grid: Grid, position: number, endPosition: number) {\r\n\t\tposition = position + (endPosition - position) * grid.location;\r\n\t\tlet point: IPoint = this.positionToPoint(position);\r\n\t\t//\tpoint.y = $utils.spritePointToSprite({ x: 0, y: point.y }, this, this.gridContainer).y;\r\n\r\n\t\tgrid.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: this.getWidth(), y: 0 });\r\n\r\n\t\tthis.positionItem(grid, point);\r\n\r\n\t\tthis.toggleVisibility(grid, position, 0, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a tick element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param tick         Tick element\r\n\t * @param position     Starting position\r\n\t * @param endPosition  End position\r\n\t */\r\n\tpublic updateTickElement(tick: AxisTick, position: number, endPosition: number) {\r\n\t\tposition = position + (endPosition - position) * tick.location;\r\n\r\n\t\tlet point: IPoint = this.positionToPoint(position);\r\n\r\n\t\tlet tickLength = tick.length;\r\n\r\n\t\ttry {\r\n\t\t\t$utils.used(this.axis.title.measuredWidth);\r\n\t\t} catch {\r\n\t\t\t// void\r\n\t\t}\r\n\r\n\t\tpoint.x = $utils.spritePointToSprite({ x: this.line.pixelX, y: 0 }, this.line.parent, this.gridContainer).x;\r\n\r\n\t\tif (!this.opposite) {\r\n\t\t\ttickLength *= (tick.inside ? 1 : -1);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttickLength *= (tick.inside ? -1 : 1);\r\n\t\t}\r\n\r\n\t\ttick.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: tickLength, y: 0 });\r\n\r\n\t\tthis.positionItem(tick, point);\r\n\r\n\t\tthis.toggleVisibility(tick, position, 0, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions the axis line element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateAxisLine() {\r\n\t\tthis.line.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: this.axisLength });\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions the base grid element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateBaseGridElement(): void {\r\n\t\tsuper.updateBaseGridElement();\r\n\r\n\t\tlet axis: Axis = this.axis;\r\n\r\n\t\tlet w: number = this.getWidth();\r\n\t\tlet h: number = this.axisLength;\r\n\t\tlet y: number = axis.basePoint.y;\r\n\r\n\t\tlet baseGrid: Sprite = this.baseGrid;\r\n\r\n\t\tif (y < - 0.2 || y > h + 0.2) {\r\n\t\t\tbaseGrid.hide(0);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet x = $utils.spritePointToSprite({ x: 0, y: 0 }, this.gridContainer, baseGrid.parent).x;\r\n\r\n\t\t\tbaseGrid.path = $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: w, y: 0 });\r\n\t\t\tbaseGrid.moveTo({ x: x, y: y });\r\n\t\t\tbaseGrid.show(0);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a label element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param label        Label element\r\n\t * @param position     Starting position\r\n\t * @param endPosition  Ending position\r\n\t */\r\n\tpublic updateLabelElement(label: AxisLabel, position: number, endPosition: number, location?: number) {\r\n\r\n\t\tif (!$type.hasValue(location)) {\r\n\t\t\tlocation = label.location;\r\n\t\t}\r\n\r\n\t\tposition = position + (endPosition - position) * location;\r\n\t\tlabel.isMeasured = !label.inside;\r\n\r\n\t\tlet point: IPoint = this.positionToPoint(position);\r\n\r\n\t\tlet horizontalCenter: HorizontalCenter;\r\n\t\tlet deltaX = 0;\r\n\t\tlet maxWidth = this.gridContainer.maxWidth;\r\n\r\n\t\tif (this.opposite) {\r\n\t\t\tif (label.inside) {\r\n\t\t\t\thorizontalCenter = \"right\";\r\n\t\t\t\tif (label.align == \"left\") {\r\n\t\t\t\t\tdeltaX = -maxWidth;\r\n\t\t\t\t\thorizontalCenter = \"left\";\r\n\t\t\t\t}\r\n\t\t\t\tif (label.align == \"center\") {\r\n\t\t\t\t\tdeltaX = -maxWidth / 2;\r\n\t\t\t\t\thorizontalCenter = \"middle\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\thorizontalCenter = \"left\";\r\n\t\t\t}\r\n\r\n\t\t\tpoint.x = 0 + deltaX;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (label.inside) {\r\n\t\t\t\thorizontalCenter = \"left\";\r\n\t\t\t\tif (label.align == \"right\") {\r\n\t\t\t\t\tdeltaX = maxWidth;\r\n\t\t\t\t\thorizontalCenter = \"right\";\r\n\t\t\t\t}\r\n\t\t\t\tif (label.align == \"center\") {\r\n\t\t\t\t\tdeltaX = maxWidth / 2;\r\n\t\t\t\t\thorizontalCenter = \"middle\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\thorizontalCenter = \"right\";\r\n\t\t\t}\r\n\r\n\t\t\tpoint.x = this.measuredWidth + deltaX;\r\n\t\t}\r\n\r\n\t\tif (label.rotation == 0) {\r\n\t\t\t// Apply fuzzy logic to verticalCenter only if labels are not rotated\r\n\t\t\tlabel.horizontalCenter = horizontalCenter;\r\n\t\t}\r\n\r\n\t\tthis.positionItem(label, point);\r\n\t\tthis.toggleVisibility(label, position, this.minLabelPosition, this.maxLabelPosition);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions an axis break element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param axisBreak Break element\r\n\t */\r\n\tpublic updateBreakElement(axisBreak: AxisBreak) {\r\n\t\tsuper.updateBreakElement(axisBreak);\r\n\r\n\t\tlet startLine = axisBreak.startLine;\r\n\t\tlet endLine = axisBreak.endLine;\r\n\t\tlet fillShape = axisBreak.fillShape;\r\n\r\n\t\tlet startPoint: IPoint = axisBreak.startPoint;\r\n\t\tlet endPoint: IPoint = axisBreak.endPoint;\r\n\r\n\t\tlet x1: number = axisBreak.pixelMarginLeft;\r\n\t\tlet x2: number = this.getWidth() - axisBreak.pixelMarginLeft - axisBreak.pixelMarginRight;\r\n\r\n\t\tstartPoint.y = $math.fitToRange(startPoint.y, -1, this.axisLength + 1);\r\n\t\tendPoint.y = $math.fitToRange(endPoint.y, -1, this.axisLength + 1);\r\n\r\n\t\tif (startPoint.y == endPoint.y && (startPoint.y < 0 || startPoint.y > this.axisLength)) {\r\n\t\t\taxisBreak.fillShape.__disabled = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\taxisBreak.fillShape.__disabled = false;\r\n\t\t}\r\n\r\n\t\tlet w = Math.abs(x2 - x1);\r\n\r\n\t\tstartLine.x = x1;\r\n\t\tstartLine.height = 0;\r\n\t\tstartLine.width = w;\r\n\r\n\t\tendLine.x = x1;\r\n\t\tendLine.height = 0;\r\n\t\tendLine.width = w;\r\n\r\n\t\tfillShape.width = w;\r\n\t\tfillShape.height = Math.abs(endPoint.y - startPoint.y);\r\n\t\tfillShape.x = x1;\r\n\t\tfillShape.y = endPoint.y;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates visual elements for and axis break.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param axisBreak Axis break\r\n\t */\r\n\tpublic createBreakSprites(axisBreak: AxisBreak) {\r\n\t\taxisBreak.startLine = new WavedLine();\r\n\t\taxisBreak.endLine = new WavedLine();\r\n\t\tlet wavedRectangle: WavedRectangle = new WavedRectangle();\r\n\t\twavedRectangle.setWavedSides(true, false, true, false);\r\n\t\taxisBreak.fillShape = wavedRectangle;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a position on the axis to a coordinate in pixels.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param position  Position (0-1)\r\n\t * @return Coordinate (px)\r\n\t */\r\n\tpublic positionToCoordinate(position: number): number {\r\n\t\tlet coordinate: number;\r\n\t\tlet axis: Axis = this.axis;\r\n\t\tlet axisFullLength = axis.axisFullLength;\r\n\r\n\t\tif (!axis.renderer.inversed) {\r\n\t\t\tcoordinate = (axis.end - position) * axisFullLength;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcoordinate = (position - axis.start) * axisFullLength;\r\n\t\t}\r\n\r\n\t\treturn coordinate\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Updates and positions axis bullets.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param bullet       AxisBullet element\r\n\t * @param position     Starting position\r\n\t * @param endPosition  End position\r\n\t */\r\n\tpublic updateBullet(bullet: Sprite, position: number, endPosition: number): void {\r\n\r\n\t\tlet location = 0.5;\r\n\t\tif (bullet instanceof AxisBullet) {\r\n\t\t\tlocation = bullet.location;\r\n\t\t}\r\n\r\n\t\tposition = position + (endPosition - position) * location;\r\n\t\tlet point: IPoint = this.positionToPoint(position);\r\n\r\n\t\tpoint.x = $utils.spritePointToSprite({ x: this.line.pixelX, y: 0 }, this.line.parent, this.gridContainer).x;\r\n\r\n\t\tthis.positionItem(bullet, point);\r\n\r\n\t\tthis.toggleVisibility(bullet, position, 0, 1);\r\n\t}\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisRendererY\"] = AxisRendererY;\r\n\r\n/**\r\n * Add default responsive rules\r\n */\r\n\r\n/**\r\n * Put labels inside plot area.\r\n * Disable first and last labels.\r\n */\r\ndefaultRules.push({\r\n\trelevant: ResponsiveBreakpoints.widthS,\r\n\tstate: function(target, stateId) {\r\n\t\tif (target instanceof AxisRendererY) {\r\n\t\t\tlet state = target.states.create(stateId);\r\n\t\t\tstate.properties.inside = true;\r\n\t\t\tstate.properties.maxLabelPosition = 0.9;\r\n\t\t\tstate.properties.minLabelPosition = 0.1;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n});\r\n\r\n/**\r\n * Disable labels altogather on very small charts\r\n */\r\ndefaultRules.push({\r\n\trelevant: ResponsiveBreakpoints.widthXS,\r\n\tstate: function(target, stateId) {\r\n\t\tif (target instanceof AxisRendererY) {\r\n\t\t\tlet state = target.states.create(stateId);\r\n\t\t\tstate.properties.disabled = true;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n});"]},"metadata":{},"sourceType":"module"}