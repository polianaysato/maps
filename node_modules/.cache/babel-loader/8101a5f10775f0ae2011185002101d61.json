{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\polia\\\\Desktop\\\\Overlay\\\\src\\\\pages\\\\Unclustered.tsx\",\n    _s = $RefreshSig$();\n\n// @ts-nocheck\nimport React, { useRef, useEffect, useContext } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\nimport SnotelSites from \"../data/POI.json\";\nimport clusterBlue from \"../assets/clusterBlue.svg\";\nimport unclusteredPoint from \"../assets/unclusteredPoint.svg\";\nimport \"../styles/App.css\";\nimport Legend from \"../components/Legend\";\nimport place from \"../assets/pin.svg\";\nimport metro from \"../data/us-metro1.json\";\nimport MapContext from \"../context/MapContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nam4core.useTheme(am4themes_animated); // Grab the access token from your Mapbox account\n// I typically like to store sensitive things like this\n// in a .env file\n\nmapboxgl.accessToken = \"pk.eyJ1IjoiZW5nbWFwYm94IiwiYSI6ImNqY3M1ZXA5czM2ZGYzM283ZmhscDltcGMifQ.Za7ut_7UThGzvjWhX4ACJQ\";\n\nfunction Unclustered() {\n  _s();\n\n  const {\n    state,\n    setState\n  } = useContext(MapContext);\n  const mapContainer = useRef();\n  useEffect(() => {\n    const newState = {\n      colorScheme: [\"#ffebee\", \"#ffcdd2\", \"#ff8a80\", \"#fe6e6e\", \"#ff5252\", \"#ff1744\", \"#ed0733\", \"#d50000\"],\n      steps: [0, 100, 200, 300, 1000, 2000, 3000, 4000],\n      poiColor6Miles: [\"#E1F5FE\", \"#80D8FF\", \"#00B0FF\", \"#2979FF\", \"#304FFE\", \"#6200EA\"],\n      poiViews6Miles: [200, 500, 1000, 1500, 2500, 3000],\n      poiColor12Miles: [\"#f2fde4\", \"#defabb\", \"#aaf255\", \"#75e900\", \"#61d800\", \"#41c300\"],\n      poiViews12Miles: [300, 1000, 2000, 3000, 4000, 4500],\n      poiViews18Miles: [500, 1500, 2500, 3500, 4500, 5000],\n      poiColor18Miles: [\"#F3E5F5\", \"#f3acfe\", \"#EA80FC\", \"#D500F9\", \"#AA00FF\", \"#8b04ce\"]\n    };\n    setState(newState);\n  }, []);\n  useEffect(() => {\n    const map = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/engmapbox/ckr6976ld15mj17m51dau1sa3\",\n      center: [-97, 36],\n      zoom: 3\n    }); // only want to work with the map after it has fully loaded\n    // if you try to add sources and layers before the map has loaded\n    // things will not work properly\n\n    map.on(\"load\", () => {\n      map.addSource(\"snotel-sites\", {\n        type: \"geojson\",\n        data: SnotelSites\n      });\n      map.addSource(\"metro\", {\n        type: \"geojson\",\n        data: metro\n      });\n      map.addLayer({\n        id: \"hover\",\n        type: \"fill\",\n        source: \"metro\",\n        paint: {\n          \"fill-color\": [\"interpolate\", [\"linear\"], [\"get\", \"views\"], 0, \"#ffebee\", 100, \"#ffcdd2\", 200, \"#ef9a9a\", 300, \"#e57373\", 1000, \"#ef5350\", 2000, \"#f44336\", 3000, \"#e53935\", 4000, \"#d32f2f\", 5000, \"#b71c1c\"],\n          \"fill-opacity\": 0.5,\n          \"fill-outline-color\": \"#000\"\n        }\n      }, 'state-label');\n      /*\n      map.addLayer({\n            id: 'cluster-count',\n            type: 'symbol',\n            source: 'snotel-sites',\n            filter: ['has', 'point_count'],\n            layout: {\n                'text-field': '{point_count_abbreviated}',\n                'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n                'text-size': 12\n            }\n        });\n      */\n\n      map.addLayer({\n        id: \"unclustered-point-1\",\n        type: \"circle\",\n        source: \"snotel-sites\",\n        filter: [\"!\", [\"has\", \"point_count\"]],\n        paint: {\n          \"circle-opacity\": 0,\n          \"circle-radius\": [\"interpolate\", [\"linear\"], [\"zoom\"], // zoom is 5 (or less) -> circle radius will be 1px\n          5, 4, // zoom is 10 (or greater) -> circle radius will be 5px\n          6, 23],\n          \"circle-stroke-width\": [\"interpolate\", [\"linear\"], [\"zoom\"], // zoom is 5 (or less) -> circle radius will be 1px\n          5, 1, // zoom is 10 (or greater) -> circle radius will be 5px\n          6, 11],\n          \"circle-stroke-color\": [\"case\", // Begin case expression\n          [\"<\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[0]], state.poiColor18Miles[0], [\"all\", [\">=\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[0]], [\"<\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[1]]], state.poiColor18Miles[1], [\"all\", [\">=\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[1]], [\"<\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[2]]], state.poiColor18Miles[2], [\"all\", [\">=\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[2]], [\"<\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[3]]], state.poiColor18Miles[3], [\"all\", [\">=\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[3]], [\"<\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[4]]], state.poiColor18Miles[4], [\">=\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[4]], state.poiColor18Miles[5], \"#00ab8e\"]\n        }\n      });\n      map.addLayer({\n        id: \"unclustered-point\",\n        type: \"circle\",\n        source: \"snotel-sites\",\n        filter: [\"!\", [\"has\", \"point_count\"]],\n        paint: {\n          \"circle-color\": [\"case\", // Begin case expression\n          [\"<\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[0]], state.poiColor6Miles[0], [\"all\", [\">=\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[0]], [\"<\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[1]]], state.poiColor6Miles[1], [\"all\", [\">=\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[1]], [\"<\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[2]]], state.poiColor6Miles[2], [\"all\", [\">=\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[2]], [\"<\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[3]]], state.poiColor6Miles[3], [\"all\", [\">=\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[3]], [\"<\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[4]]], state.poiColor6Miles[4], [\">=\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[4]], state.poiColor6Miles[5], \"#001814\"],\n          \"circle-radius\": [\"interpolate\", [\"linear\"], [\"zoom\"], // zoom is 5 (or less) -> circle radius will be 1px\n          5, 3, // zoom is 10 (or greater) -> circle radius will be 5px\n          6, 20],\n          \"circle-stroke-width\": [\"interpolate\", [\"linear\"], [\"zoom\"], // zoom is 5 (or less) -> circle radius will be 1px\n          5, 1, // zoom is 10 (or greater) -> circle radius will be 5px\n          6, 8],\n          \"circle-stroke-color\": [\"case\", // Begin case expression\n          [\"<\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[0]], state.poiColor12Miles[0], [\"all\", [\">=\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[0]], [\"<\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[1]]], state.poiColor12Miles[1], [\"all\", [\">=\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[1]], [\"<\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[2]]], state.poiColor12Miles[2], [\"all\", [\">=\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[2]], [\"<\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[3]]], state.poiColor12Miles[3], [\"all\", [\">=\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[3]], [\"<\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[4]]], state.poiColor12Miles[4], [\">=\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[4]], state.poiColor12Miles[5], \"#00c3a2\"]\n        }\n      });\n      map.on(\"click\", \"clusters\", function (e) {\n        var features = map.queryRenderedFeatures(e.point, {\n          layers: [\"clusters\"]\n        });\n        var clusterId = features[0].properties.cluster_id;\n        map.getSource(\"snotel-sites\").getClusterExpansionZoom(clusterId, function (err, zoom) {\n          if (err) return;\n          map.easeTo({\n            center: features[0].geometry.coordinates,\n            zoom: zoom\n          });\n        });\n      });\n      map.on(\"click\", \"unclustered-point\", function (e) {\n        var coordinates = e.features[0].geometry.coordinates.slice();\n        var zip = e.features[0].properties.Zip;\n        var label = e.features[0].properties.Label;\n        var labelList = label.split(\" \");\n        var state = labelList.pop();\n        var store = \"\";\n        var storeList = [];\n        var storeName = \"\";\n\n        for (let index = 0; index < labelList.length; index++) {\n          store = labelList[index].toLowerCase();\n          store = store.charAt(0).toUpperCase() + store.substring(1);\n          storeList.push(store);\n        }\n\n        for (let index = 0; index < storeList.length; index++) {\n          storeName += storeList[index] + \" \";\n        }\n        /*\n        var store = label.substring(0, label.length-2).toLowerCase()\n        store = store.charAt(0).toUpperCase() + store.substring(1)\n         var state = label.slice(-2)\n        */\n\n\n        var values = e.features[0].properties;\n        var data = [{\n          name: `${values[\"sixMilesViews\"]} views`,\n          value: values[\"sixMilesViews\"]\n        }, {\n          name: `${values[\"sixMilesClicks\"]} clicks`,\n          value: values[\"sixMilesClicks\"]\n        }, {\n          name: `${values[\"sixMilesConversions\"]} conversions`,\n          value: values[\"sixMilesConversions\"]\n        }, {\n          name: `${values[\"twelveMilesViews\"]} views`,\n          value: values[\"twelveMilesViews\"]\n        }, {\n          name: `${values[\"twelveMilesClicks\"]} clicks`,\n          value: values[\"twelveMilesClicks\"]\n        }, {\n          name: `${values[\"twelveMilesConversions\"]} conversions`,\n          value: values[\"twelveMilesConversions\"]\n        }, {\n          name: `${values[\"eighteenMilesViews\"]} views`,\n          value: values[\"eighteenMilesViews\"]\n        }, {\n          name: `${values[\"eighteenMilesClicks\"]} clicks`,\n          value: values[\"eighteenMilesClicks\"]\n        }, {\n          name: `${values[\"eighteenMilesConversions\"]} conversions`,\n          value: values[\"eighteenMilesConversions\"]\n        }];\n        var sixMilesConversion = (values[\"sixMilesConversions\"] / values[\"sixMilesViews\"] * 100).toFixed(2);\n        var twelveMilesConversion = (values[\"twelveMilesConversions\"] / values[\"twelveMilesViews\"] * 100).toFixed(2);\n        var eighteenMilesConversion = (values[\"eighteenMilesConversions\"] / values[\"eighteenMilesViews\"] * 100).toFixed(2);\n        var pieChartSixMiles = '<div><h5 class=\"pie-chart-header\">5 miles</h5><div id=\"chartdiv5\"></div></div>';\n        var pieChartTwelveMiles = '<div><h5 class=\"pie-chart-header\">10 miles</h5><div id=\"chartdiv10\"></div></div>';\n        var pieChartEighteenMiles = '<div><h5 class=\"pie-chart-header\">15 miles</h5><div id=\"chartdiv15\"></div></div>';\n        const popup = new mapboxgl.Popup().setLngLat(coordinates).setHTML(`<main class=\"popup-wrapper\"><div><div class=\"popup-header\"><img src=${place} className=\"svg\"/>${storeName} ${state}</div></div><div class=\"ui divider\"></div><nav><ul id=\"popup-ul\"><li><label class=\"label tab\" for=\"tab1\" ><a href=\"#section-1\" class=\"active-tab\"><input id=\"tab1\" type=\"radio\" name=\"tabs\">Distance</a></label></li><li><label class=\"label\" for=\"tab2\" ><a href=\"#section-2\" ><input id=\"tab2\" type=\"radio\" name=\"tabs\">Chart</a></label></li><li><label class=\"label\" for=\"tab3\" ><a href=\"#section-3\" ><input id=\"tab3\" type=\"radio\" name=\"tabs\">Chart</a></label></li><li id=\"line\"></li></ul></nav><section id=\"section-1\" class=\"pie-chart-div\">${pieChartSixMiles} ${pieChartTwelveMiles} ${pieChartEighteenMiles}</section><section id=\"section-2\" class=\"pie-chart-div\">CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT</section><section id=\"section-3\" class=\"pie-chart-div\">CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT</section></main>`).addTo(map);\n        var a = document.getElementsByTagName(\"input\").item(0).parentElement;\n        var tab = a.parentElement;\n        var a1 = document.getElementsByTagName(\"input\").item(1).parentElement;\n        var tab1 = a1.parentElement;\n        var a2 = document.getElementsByTagName(\"input\").item(2).parentElement;\n        var tab2 = a2.parentElement;\n        tab.onclick = showAlert;\n        tab1.onclick = showAlert1;\n        tab2.onclick = showAlert2;\n\n        function showAlert(event) {\n          tab.className = \"tab\";\n          tab1.className = \"label\";\n          tab2.className = \"label\";\n          a.className = \"active-tab\";\n          a1.className = \"\";\n          a2.className = \"\";\n        }\n\n        function showAlert1(event) {\n          tab.className = \"label\";\n          tab1.className = \"tab\";\n          tab2.className = \"label\";\n          a.className = \"\";\n          a1.className = \"active-tab\";\n          a2.className = \"\";\n        }\n\n        function showAlert2(event) {\n          tab.className = \"label\";\n          tab1.className = \"label\";\n          tab2.className = \"tab\";\n          a.className = \"\";\n          a1.className = \"\";\n          a2.className = \"active-tab\";\n        }\n\n        var chart5 = am4core.create(\"chartdiv5\", am4charts.PieChart);\n        var chart10 = am4core.create(\"chartdiv10\", am4charts.PieChart);\n        var chart15 = am4core.create(\"chartdiv15\", am4charts.PieChart);\n        chart5.data = [{\n          \"6 miles\": \"views\",\n          criteria: values[\"sixMilesViews\"],\n          color: am4core.color(\"#6200EA\"),\n          percent: (values[\"sixMilesViews\"] / values[\"sixMilesViews\"] * 100).toFixed(0)\n        }, {\n          \"6 miles\": \"clicks\",\n          criteria: values[\"sixMilesClicks\"],\n          color: am4core.color(\"#2979FF\"),\n          percent: (values[\"sixMilesClicks\"] / values[\"sixMilesViews\"] * 100).toFixed(0)\n        }, {\n          \"6 miles\": \"conversions\",\n          criteria: values[\"sixMilesConversions\"],\n          color: am4core.color(\"#00B0FF\"),\n          percent: (values[\"sixMilesConversions\"] / values[\"sixMilesViews\"] * 100).toFixed(0)\n        }];\n        chart10.data = [{\n          \"12 miles\": \"views\",\n          criteria: values[\"twelveMilesViews\"],\n          color: am4core.color(\"#369a04\"),\n          percent: (values[\"twelveMilesViews\"] / values[\"twelveMilesViews\"] * 100).toFixed(0)\n        }, {\n          \"12 miles\": \"clicks\",\n          criteria: values[\"twelveMilesClicks\"],\n          color: am4core.color(\"#61d800\"),\n          percent: (values[\"twelveMilesClicks\"] / values[\"twelveMilesViews\"] * 100).toFixed(0)\n        }, {\n          \"12 miles\": \"conversions\",\n          criteria: values[\"twelveMilesConversions\"],\n          color: am4core.color(\"#aaf255\"),\n          percent: (values[\"twelveMilesConversions\"] / values[\"twelveMilesViews\"] * 100).toFixed(0)\n        }];\n        chart15.data = [{\n          \"18 miles\": \"views\",\n          criteria: values[\"eighteenMilesViews\"],\n          color: am4core.color(\"#9204d9\"),\n          percent: (values[\"eighteenMilesViews\"] / values[\"eighteenMilesViews\"] * 100).toFixed(0)\n        }, {\n          \"18 miles\": \"clicks\",\n          criteria: values[\"eighteenMilesClicks\"],\n          color: am4core.color(\"#d500f9\"),\n          percent: (values[\"eighteenMilesClicks\"] / values[\"eighteenMilesViews\"] * 100).toFixed(0)\n        }, {\n          \"18 miles\": \"conversions\",\n          criteria: values[\"eighteenMilesConversions\"],\n          color: am4core.color(\"#ea80fc\"),\n          percent: (values[\"eighteenMilesConversions\"] / values[\"eighteenMilesViews\"] * 100).toFixed(0)\n        }]; // Add and configure Series\n\n        var pieSeries = chart5.series.push(new am4charts.PieSeries());\n        am4core.options.autoSetClassName = true;\n        pieSeries.dataFields.value = \"criteria\";\n        pieSeries.dataFields.category = \"6 miles\";\n        pieSeries.ticks.template.disabled = true;\n        pieSeries.alignLabels = false;\n        pieSeries.labels.template.text = \"{value} {category} \\n {percent}%\";\n        pieSeries.labels.template.radius = am4core.percent(-40);\n        pieSeries.labels.template.fill = am4core.color(\"white\");\n        pieSeries.slices.template.propertyFields.fill = \"color\";\n        var pieSeries = chart10.series.push(new am4charts.PieSeries());\n        pieSeries.dataFields.value = \"criteria\";\n        pieSeries.dataFields.category = \"12 miles\";\n        pieSeries.ticks.template.disabled = true;\n        pieSeries.alignLabels = false;\n        pieSeries.labels.template.text = \"{value} {category} \\n {percent}%\";\n        pieSeries.labels.template.radius = am4core.percent(-40);\n        pieSeries.labels.template.fill = am4core.color(\"white\");\n        pieSeries.slices.template.propertyFields.fill = \"color\";\n        var pieSeries = chart15.series.push(new am4charts.PieSeries());\n        pieSeries.dataFields.value = \"criteria\";\n        pieSeries.dataFields.category = \"18 miles\";\n        pieSeries.ticks.template.disabled = true;\n        pieSeries.alignLabels = false;\n        pieSeries.labels.template.text = \"{value} {category} \\n {percent}%\";\n        pieSeries.labels.template.radius = am4core.percent(-40);\n        pieSeries.labels.template.fill = am4core.color(\"white\");\n        pieSeries.slices.template.propertyFields.fill = \"color\";\n        pieSeries.slices.template.propertyFields.showTooltipOn = false;\n        var pieLabel;\n        let text;\n        let textList = [];\n        let conversions;\n        let clicks;\n        let h;\n        let h1;\n\n        const getSpan = () => {\n          pieLabel = document.getElementsByTagName(\"tspan\");\n        };\n\n        const findText = () => {\n          for (var item of pieLabel) {\n            item.parentElement.setAttribute(\"x\", 13);\n            text = item.innerHTML;\n            textList = text.split(\" \");\n\n            if (textList.includes(\"conversions\")) {\n              conversions = item.parentElement;\n            }\n\n            if (textList.includes(\"clicks\")) {\n              clicks = item.parentElement;\n              h = parseFloat(clicks.getAttribute(\"y\"));\n              h += 14;\n              clicks.setAttribute(\"y\", h);\n              let h2 = h + 12;\n              clicks.nextSibling.setAttribute(\"y\", h2);\n            }\n\n            if (conversions) {\n              h1 = h - 23;\n              let h3 = h1 + 12;\n              conversions.setAttribute(\"y\", h1);\n              conversions.nextSibling.setAttribute(\"y\", h3);\n            }\n          }\n        };\n\n        const editText = async (callBack1, callBack2) => {\n          await getSpan();\n          await setTimeout(() => {\n            findText();\n          }, 500);\n        };\n\n        editText();\n        let mainNavLinks = document.querySelectorAll(\"nav ul li a\");\n        let mainSections = document.querySelectorAll(\"main section\");\n        let lastId;\n        let cur = []; // This should probably be throttled.\n        // Especially because it triggers during smooth scrolling.\n        // https://lodash.com/docs/4.17.10#throttle\n        // You could do like...\n        // window.addEventListener(\"scroll\", () => {\n        //    _.throttle(doThatStuff, 100);\n        // });\n        // Only not doing it here to keep this Pen dependency-free.\n\n        window.addEventListener(\"scroll\", event => {\n          let fromTop = window.scrollY;\n          mainNavLinks.forEach(link => {\n            let section = document.querySelector(link.hash);\n\n            if (section.offsetTop <= fromTop && section.offsetTop + section.offsetHeight > fromTop) {\n              link.classList.add(\"current\");\n            } else {\n              link.classList.remove(\"current\");\n            }\n          });\n        });\n      });\n    }); // cleanup function to remove map on unmount\n\n    return () => map.remove();\n  }, [state.colorScheme, state.poiColor12Miles, state.poiColor18Miles, state.poiColor6Miles, state.poiViews12Miles, state.poiViews18Miles, state.poiViews6Miles, state.steps]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Legend, {\n      type: \"dots\",\n      clusters: \"Clusters\",\n      pointCount: \"Views\",\n      clusterImg: clusterBlue,\n      unclusteredImg: unclusteredPoint,\n      unclusteredPoint: \"Unclustered Points\",\n      colorScheme: state.colorScheme,\n      steps: state.steps,\n      poi: \"POI\",\n      views: \"Views\",\n      poiColor6Miles: state.poiColor6Miles,\n      poiViews6Miles: state.poiViews6Miles,\n      poiColor12Miles: state.poiColor12Miles,\n      poiViews12Miles: state.poiViews12Miles,\n      poiColor18Miles: state.poiColor18Miles,\n      poiViews18Miles: state.poiViews18Miles\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 703,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapContainer,\n      style: {\n        width: \"100%\",\n        height: \"100vh\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 721,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Unclustered, \"b5ZD5hw8jK6qeEqAiBlwLTRHBYo=\");\n\n_c = Unclustered;\nexport default Unclustered;\n\nvar _c;\n\n$RefreshReg$(_c, \"Unclustered\");","map":{"version":3,"sources":["C:/Users/polia/Desktop/Overlay/src/pages/Unclustered.tsx"],"names":["React","useRef","useEffect","useContext","mapboxgl","am4core","am4charts","am4themes_animated","SnotelSites","Legend","metro","MapContext","useTheme","accessToken","Unclustered","state","setState","mapContainer","newState","colorScheme","steps","poiColor6Miles","poiViews6Miles","poiColor12Miles","poiViews12Miles","poiViews18Miles","poiColor18Miles","map","Map","container","current","style","center","zoom","on","addSource","type","data","addLayer","id","source","paint","filter","e","features","queryRenderedFeatures","point","layers","clusterId","properties","cluster_id","getSource","getClusterExpansionZoom","err","easeTo","geometry","coordinates","slice","zip","Zip","label","Label","labelList","split","pop","store","storeList","storeName","index","length","toLowerCase","charAt","toUpperCase","substring","push","values","name","value","sixMilesConversion","toFixed","twelveMilesConversion","eighteenMilesConversion","pieChartSixMiles","pieChartTwelveMiles","pieChartEighteenMiles","popup","Popup","setLngLat","setHTML","place","addTo","a","document","getElementsByTagName","item","parentElement","tab","a1","tab1","a2","tab2","onclick","showAlert","showAlert1","showAlert2","event","className","chart5","create","PieChart","chart10","chart15","criteria","color","percent","pieSeries","series","PieSeries","options","autoSetClassName","dataFields","category","ticks","template","disabled","alignLabels","labels","text","radius","fill","slices","propertyFields","showTooltipOn","pieLabel","textList","conversions","clicks","h","h1","getSpan","findText","setAttribute","innerHTML","includes","parseFloat","getAttribute","h2","nextSibling","h3","editText","callBack1","callBack2","setTimeout","mainNavLinks","querySelectorAll","mainSections","lastId","cur","window","addEventListener","fromTop","scrollY","forEach","link","section","querySelector","hash","offsetTop","offsetHeight","classList","add","remove","clusterBlue","unclusteredPoint","width","height"],"mappings":"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","sourcesContent":["// @ts-nocheck\nimport React, { useRef, useEffect, ReactElement, useContext } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport $ from \"jquery\";\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\nimport SnotelSites from \"../data/POI.json\";\nimport clusterBlue from \"../assets/clusterBlue.svg\";\nimport unclusteredPoint from \"../assets/unclusteredPoint.svg\";\nimport \"../styles/App.css\";\nimport Legend from \"../components/Legend\";\nimport place from \"../assets/pin.svg\";\nimport metro from \"../data/us-metro1.json\";\nimport MapContext, { MapProvider } from \"../context/MapContext\";\n\n\nam4core.useTheme(am4themes_animated);\n\n// Grab the access token from your Mapbox account\n// I typically like to store sensitive things like this\n// in a .env file\nmapboxgl.accessToken =\n  \"pk.eyJ1IjoiZW5nbWFwYm94IiwiYSI6ImNqY3M1ZXA5czM2ZGYzM283ZmhscDltcGMifQ.Za7ut_7UThGzvjWhX4ACJQ\";\n\nfunction Unclustered(): ReactElement {\n  const { state, setState } = useContext(MapContext);\n\n  const mapContainer = useRef();\n\n  useEffect(() => {\n    const newState = {\n      colorScheme: [\n        \"#ffebee\",\n        \"#ffcdd2\",\n        \"#ff8a80\",\n        \"#fe6e6e\",\n        \"#ff5252\",\n        \"#ff1744\",\n        \"#ed0733\",\n        \"#d50000\",\n      ],\n      steps: [0, 100, 200, 300, 1000, 2000, 3000, 4000],\n      poiColor6Miles: [\n        \"#E1F5FE\",\n        \"#80D8FF\",\n        \"#00B0FF\",\n        \"#2979FF\",\n        \"#304FFE\",\n        \"#6200EA\",\n      ],\n      poiViews6Miles: [200, 500, 1000, 1500, 2500, 3000],\n\n      poiColor12Miles: [\n        \"#f2fde4\",\n        \"#defabb\",\n        \"#aaf255\",\n        \"#75e900\",\n        \"#61d800\",\n        \"#41c300\",\n      ],\n      poiViews12Miles: [300, 1000, 2000, 3000, 4000, 4500],\n      poiViews18Miles: [500, 1500, 2500, 3500, 4500, 5000],\n\n      poiColor18Miles: [\n        \"#F3E5F5\",\n        \"#f3acfe\",\n        \"#EA80FC\",\n        \"#D500F9\",\n        \"#AA00FF\",\n        \"#8b04ce\",\n      ],\n    };\n    setState(newState);\n  }, []);\n\n  useEffect(() => {\n    const map = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/engmapbox/ckr6976ld15mj17m51dau1sa3\",\n      center: [-97, 36],\n      zoom: 3,\n    });\n\n    // only want to work with the map after it has fully loaded\n    // if you try to add sources and layers before the map has loaded\n    // things will not work properly\n    map.on(\"load\", () => {\n      map.addSource(\"snotel-sites\", {\n        type: \"geojson\",\n        data: SnotelSites,\n      });\n\n      map.addSource(\"metro\", {\n        type: \"geojson\",\n        data: metro,\n      });\n\n      map.addLayer({\n        id: \"hover\",\n        type: \"fill\",\n        source: \"metro\",\n        paint: {\n          \"fill-color\": [\n            \"interpolate\",\n            [\"linear\"],\n            [\"get\", \"views\"],\n            0,\n            \"#ffebee\",\n            100,\n            \"#ffcdd2\",\n            200,\n            \"#ef9a9a\",\n            300,\n            \"#e57373\",\n            1000,\n            \"#ef5350\",\n            2000,\n            \"#f44336\",\n            3000,\n            \"#e53935\",\n            4000,\n            \"#d32f2f\",\n            5000,\n            \"#b71c1c\",\n          ],\n          \"fill-opacity\": 0.5,\n          \"fill-outline-color\": \"#000\",\n        },\n      }, 'state-label');\n\n      /*\n      map.addLayer({\n            id: 'cluster-count',\n            type: 'symbol',\n            source: 'snotel-sites',\n            filter: ['has', 'point_count'],\n            layout: {\n                'text-field': '{point_count_abbreviated}',\n                'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n                'text-size': 12\n            }\n        });\n      */\n\n      map.addLayer({\n        id: \"unclustered-point-1\",\n        type: \"circle\",\n        source: \"snotel-sites\",\n        filter: [\"!\", [\"has\", \"point_count\"]],\n        paint: {\n          \"circle-opacity\": 0,\n          \"circle-radius\": [\n            \"interpolate\",\n            [\"linear\"],\n            [\"zoom\"],\n\n            // zoom is 5 (or less) -> circle radius will be 1px\n            5,\n            4,\n            // zoom is 10 (or greater) -> circle radius will be 5px\n            6,\n            23,\n          ],\n          \"circle-stroke-width\": [\n            \"interpolate\",\n            [\"linear\"],\n            [\"zoom\"],\n            // zoom is 5 (or less) -> circle radius will be 1px\n            5,\n            1,\n            // zoom is 10 (or greater) -> circle radius will be 5px\n            6,\n            11,\n          ],\n          \"circle-stroke-color\": [\n            \"case\", // Begin case expression\n            [\"<\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[0]],\n            state.poiColor18Miles[0],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[0]],\n              [\"<\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[1]],\n            ],\n            state.poiColor18Miles[1],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[1]],\n              [\"<\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[2]],\n            ],\n            state.poiColor18Miles[2],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[2]],\n              [\"<\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[3]],\n            ],\n            state.poiColor18Miles[3],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[3]],\n              [\"<\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[4]],\n            ],\n            state.poiColor18Miles[4],\n            [\">=\", [\"get\", \"eighteenMilesViews\"], state.poiViews18Miles[4]],\n            state.poiColor18Miles[5],\n            \"#00ab8e\",\n          ],\n        },\n      });\n      map.addLayer({\n        id: \"unclustered-point\",\n        type: \"circle\",\n        source: \"snotel-sites\",\n        filter: [\"!\", [\"has\", \"point_count\"]],\n        paint: {\n          \"circle-color\": [\n            \"case\", // Begin case expression\n            [\"<\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[0]],\n            state.poiColor6Miles[0],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[0]],\n              [\"<\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[1]],\n            ],\n            state.poiColor6Miles[1],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[1]],\n              [\"<\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[2]],\n            ],\n            state.poiColor6Miles[2],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[2]],\n              [\"<\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[3]],\n            ],\n            state.poiColor6Miles[3],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[3]],\n              [\"<\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[4]],\n            ],\n            state.poiColor6Miles[4],\n            [\">=\", [\"get\", \"sixMilesViews\"], state.poiViews6Miles[4]],\n            state.poiColor6Miles[5],\n            \"#001814\",\n          ],\n          \"circle-radius\": [\n            \"interpolate\",\n            [\"linear\"],\n            [\"zoom\"],\n            // zoom is 5 (or less) -> circle radius will be 1px\n            5,\n            3,\n            // zoom is 10 (or greater) -> circle radius will be 5px\n            6,\n            20,\n          ],\n          \"circle-stroke-width\": [\n            \"interpolate\",\n            [\"linear\"],\n            [\"zoom\"],\n            // zoom is 5 (or less) -> circle radius will be 1px\n            5,\n            1,\n            // zoom is 10 (or greater) -> circle radius will be 5px\n            6,\n            8,\n          ],\n          \"circle-stroke-color\": [\n            \"case\", // Begin case expression\n            [\"<\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[0]],\n            state.poiColor12Miles[0],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[0]],\n              [\"<\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[1]],\n            ],\n            state.poiColor12Miles[1],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[1]],\n              [\"<\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[2]],\n            ],\n            state.poiColor12Miles[2],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[2]],\n              [\"<\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[3]],\n            ],\n            state.poiColor12Miles[3],\n            [\n              \"all\",\n              [\">=\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[3]],\n              [\"<\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[4]],\n            ],\n            state.poiColor12Miles[4],\n            [\">=\", [\"get\", \"twelveMilesViews\"], state.poiViews12Miles[4]],\n            state.poiColor12Miles[5],\n            \"#00c3a2\",\n          ],\n        },\n      });\n\n      map.on(\"click\", \"clusters\", function (e: any) {\n        var features = map.queryRenderedFeatures(e.point, {\n          layers: [\"clusters\"],\n        });\n        var clusterId = features[0].properties.cluster_id;\n        map\n          .getSource(\"snotel-sites\")\n          .getClusterExpansionZoom(\n            clusterId,\n            function (err: any, zoom: number) {\n              if (err) return;\n\n              map.easeTo({\n                center: features[0].geometry.coordinates,\n                zoom: zoom,\n              });\n            }\n          );\n      });\n\n      map.on(\"click\", \"unclustered-point\", function (e: any) {\n        var coordinates = e.features[0].geometry.coordinates.slice();\n        var zip = e.features[0].properties.Zip;\n\n        var label = e.features[0].properties.Label;\n\n        var labelList = label.split(\" \");\n        var state = labelList.pop();\n\n        var store = \"\";\n        var storeList = [];\n\n        var storeName = \"\";\n\n        for (let index = 0; index < labelList.length; index++) {\n          store = labelList[index].toLowerCase();\n          store = store.charAt(0).toUpperCase() + store.substring(1);\n          storeList.push(store);\n        }\n\n        for (let index = 0; index < storeList.length; index++) {\n          storeName += storeList[index] + \" \";\n        }\n\n        /*\n        var store = label.substring(0, label.length-2).toLowerCase()\n        store = store.charAt(0).toUpperCase() + store.substring(1)\n\n        var state = label.slice(-2)\n        */\n\n        var values = e.features[0].properties;\n        var data = [\n          {\n            name: `${values[\"sixMilesViews\"]} views`,\n            value: values[\"sixMilesViews\"],\n          },\n          {\n            name: `${values[\"sixMilesClicks\"]} clicks`,\n            value: values[\"sixMilesClicks\"],\n          },\n          {\n            name: `${values[\"sixMilesConversions\"]} conversions`,\n            value: values[\"sixMilesConversions\"],\n          },\n          {\n            name: `${values[\"twelveMilesViews\"]} views`,\n            value: values[\"twelveMilesViews\"],\n          },\n          {\n            name: `${values[\"twelveMilesClicks\"]} clicks`,\n            value: values[\"twelveMilesClicks\"],\n          },\n          {\n            name: `${values[\"twelveMilesConversions\"]} conversions`,\n            value: values[\"twelveMilesConversions\"],\n          },\n          {\n            name: `${values[\"eighteenMilesViews\"]} views`,\n            value: values[\"eighteenMilesViews\"],\n          },\n          {\n            name: `${values[\"eighteenMilesClicks\"]} clicks`,\n            value: values[\"eighteenMilesClicks\"],\n          },\n          {\n            name: `${values[\"eighteenMilesConversions\"]} conversions`,\n            value: values[\"eighteenMilesConversions\"],\n          },\n        ];\n\n        var sixMilesConversion = (\n          (values[\"sixMilesConversions\"] / values[\"sixMilesViews\"]) *\n          100\n        ).toFixed(2);\n        var twelveMilesConversion = (\n          (values[\"twelveMilesConversions\"] / values[\"twelveMilesViews\"]) *\n          100\n        ).toFixed(2);\n        var eighteenMilesConversion = (\n          (values[\"eighteenMilesConversions\"] / values[\"eighteenMilesViews\"]) *\n          100\n        ).toFixed(2);\n\n        var pieChartSixMiles =\n          '<div><h5 class=\"pie-chart-header\">5 miles</h5><div id=\"chartdiv5\"></div></div>';\n\n        var pieChartTwelveMiles =\n          '<div><h5 class=\"pie-chart-header\">10 miles</h5><div id=\"chartdiv10\"></div></div>';\n\n        var pieChartEighteenMiles =\n          '<div><h5 class=\"pie-chart-header\">15 miles</h5><div id=\"chartdiv15\"></div></div>';\n\n        const popup = new mapboxgl.Popup()\n          .setLngLat(coordinates)\n          .setHTML(\n            `<main class=\"popup-wrapper\"><div><div class=\"popup-header\"><img src=${place} className=\"svg\"/>${storeName} ${state}</div></div><div class=\"ui divider\"></div><nav><ul id=\"popup-ul\"><li><label class=\"label tab\" for=\"tab1\" ><a href=\"#section-1\" class=\"active-tab\"><input id=\"tab1\" type=\"radio\" name=\"tabs\">Distance</a></label></li><li><label class=\"label\" for=\"tab2\" ><a href=\"#section-2\" ><input id=\"tab2\" type=\"radio\" name=\"tabs\">Chart</a></label></li><li><label class=\"label\" for=\"tab3\" ><a href=\"#section-3\" ><input id=\"tab3\" type=\"radio\" name=\"tabs\">Chart</a></label></li><li id=\"line\"></li></ul></nav><section id=\"section-1\" class=\"pie-chart-div\">${pieChartSixMiles} ${pieChartTwelveMiles} ${pieChartEighteenMiles}</section><section id=\"section-2\" class=\"pie-chart-div\">CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT</section><section id=\"section-3\" class=\"pie-chart-div\">CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT CONTENT</section></main>`\n          )\n          .addTo(map);\n\n        var a = document.getElementsByTagName(\"input\").item(0).parentElement;\n\n        var tab = a.parentElement;\n\n        var a1 = document.getElementsByTagName(\"input\").item(1).parentElement;\n\n        var tab1 = a1.parentElement;\n\n        var a2 = document.getElementsByTagName(\"input\").item(2).parentElement;\n\n        var tab2 = a2.parentElement;\n\n        tab.onclick = showAlert;\n\n        tab1.onclick = showAlert1;\n\n        tab2.onclick = showAlert2;\n\n        function showAlert(event) {\n          tab.className = \"tab\";\n          tab1.className = \"label\";\n          tab2.className = \"label\";\n          a.className = \"active-tab\";\n          a1.className = \"\";\n          a2.className = \"\";\n        }\n\n        function showAlert1(event) {\n          tab.className = \"label\";\n          tab1.className = \"tab\";\n          tab2.className = \"label\";\n          a.className = \"\";\n          a1.className = \"active-tab\";\n          a2.className = \"\";\n        }\n\n        function showAlert2(event) {\n          tab.className = \"label\";\n          tab1.className = \"label\";\n          tab2.className = \"tab\";\n          a.className = \"\";\n          a1.className = \"\";\n          a2.className = \"active-tab\";\n        }\n\n        var chart5 = am4core.create(\"chartdiv5\", am4charts.PieChart);\n\n        var chart10 = am4core.create(\"chartdiv10\", am4charts.PieChart);\n\n        var chart15 = am4core.create(\"chartdiv15\", am4charts.PieChart);\n\n        chart5.data = [\n          {\n            \"6 miles\": \"views\",\n            criteria: values[\"sixMilesViews\"],\n            color: am4core.color(\"#6200EA\"),\n            percent: (\n              (values[\"sixMilesViews\"] / values[\"sixMilesViews\"]) *\n              100\n            ).toFixed(0),\n          },\n          {\n            \"6 miles\": \"clicks\",\n            criteria: values[\"sixMilesClicks\"],\n            color: am4core.color(\"#2979FF\"),\n            percent: (\n              (values[\"sixMilesClicks\"] / values[\"sixMilesViews\"]) *\n              100\n            ).toFixed(0),\n          },\n          {\n            \"6 miles\": \"conversions\",\n            criteria: values[\"sixMilesConversions\"],\n            color: am4core.color(\"#00B0FF\"),\n            percent: (\n              (values[\"sixMilesConversions\"] / values[\"sixMilesViews\"]) *\n              100\n            ).toFixed(0),\n          },\n        ];\n\n        chart10.data = [\n          {\n            \"12 miles\": \"views\",\n            criteria: values[\"twelveMilesViews\"],\n            color: am4core.color(\"#369a04\"),\n            percent: (\n              (values[\"twelveMilesViews\"] / values[\"twelveMilesViews\"]) *\n              100\n            ).toFixed(0),\n          },\n          {\n            \"12 miles\": \"clicks\",\n            criteria: values[\"twelveMilesClicks\"],\n            color: am4core.color(\"#61d800\"),\n            percent: (\n              (values[\"twelveMilesClicks\"] / values[\"twelveMilesViews\"]) *\n              100\n            ).toFixed(0),\n          },\n          {\n            \"12 miles\": \"conversions\",\n            criteria: values[\"twelveMilesConversions\"],\n            color: am4core.color(\"#aaf255\"),\n            percent: (\n              (values[\"twelveMilesConversions\"] / values[\"twelveMilesViews\"]) *\n              100\n            ).toFixed(0),\n          },\n        ];\n\n        chart15.data = [\n          {\n            \"18 miles\": \"views\",\n            criteria: values[\"eighteenMilesViews\"],\n            color: am4core.color(\"#9204d9\"),\n            percent: (\n              (values[\"eighteenMilesViews\"] / values[\"eighteenMilesViews\"]) *\n              100\n            ).toFixed(0),\n          },\n          {\n            \"18 miles\": \"clicks\",\n            criteria: values[\"eighteenMilesClicks\"],\n            color: am4core.color(\"#d500f9\"),\n            percent: (\n              (values[\"eighteenMilesClicks\"] / values[\"eighteenMilesViews\"]) *\n              100\n            ).toFixed(0),\n          },\n          {\n            \"18 miles\": \"conversions\",\n            criteria: values[\"eighteenMilesConversions\"],\n            color: am4core.color(\"#ea80fc\"),\n            percent: (\n              (values[\"eighteenMilesConversions\"] /\n                values[\"eighteenMilesViews\"]) *\n              100\n            ).toFixed(0),\n          },\n        ];\n\n        // Add and configure Series\n        var pieSeries = chart5.series.push(new am4charts.PieSeries());\n        am4core.options.autoSetClassName = true;\n        pieSeries.dataFields.value = \"criteria\";\n        pieSeries.dataFields.category = \"6 miles\";\n\n        pieSeries.ticks.template.disabled = true;\n        pieSeries.alignLabels = false;\n        pieSeries.labels.template.text = \"{value} {category} \\n {percent}%\";\n\n        pieSeries.labels.template.radius = am4core.percent(-40);\n        pieSeries.labels.template.fill = am4core.color(\"white\");\n\n        pieSeries.slices.template.propertyFields.fill = \"color\";\n\n        var pieSeries = chart10.series.push(new am4charts.PieSeries());\n        pieSeries.dataFields.value = \"criteria\";\n        pieSeries.dataFields.category = \"12 miles\";\n\n        pieSeries.ticks.template.disabled = true;\n        pieSeries.alignLabels = false;\n        pieSeries.labels.template.text = \"{value} {category} \\n {percent}%\";\n        pieSeries.labels.template.radius = am4core.percent(-40);\n        pieSeries.labels.template.fill = am4core.color(\"white\");\n\n        pieSeries.slices.template.propertyFields.fill = \"color\";\n\n        var pieSeries = chart15.series.push(new am4charts.PieSeries());\n        pieSeries.dataFields.value = \"criteria\";\n        pieSeries.dataFields.category = \"18 miles\";\n\n        pieSeries.ticks.template.disabled = true;\n        pieSeries.alignLabels = false;\n        pieSeries.labels.template.text = \"{value} {category} \\n {percent}%\";\n        pieSeries.labels.template.radius = am4core.percent(-40);\n        pieSeries.labels.template.fill = am4core.color(\"white\");\n\n        pieSeries.slices.template.propertyFields.fill = \"color\";\n        pieSeries.slices.template.propertyFields.showTooltipOn = false;\n\n        var pieLabel;\n        let text;\n        let textList = [];\n        let conversions;\n        let clicks;\n        let h;\n        let h1;\n\n        const getSpan = () => {\n          pieLabel = document.getElementsByTagName(\"tspan\");\n        };\n\n        const findText = () => {\n          for (var item of pieLabel) {\n            item.parentElement.setAttribute(\"x\", 13);\n            text = item.innerHTML;\n            textList = text.split(\" \");\n            if (textList.includes(\"conversions\")) {\n              conversions = item.parentElement;\n            }\n            if (textList.includes(\"clicks\")) {\n              clicks = item.parentElement;\n              h = parseFloat(clicks.getAttribute(\"y\"));\n              h += 14;\n              clicks.setAttribute(\"y\", h);\n              let h2 = h + 12;\n              clicks.nextSibling.setAttribute(\"y\", h2);\n            }\n            if (conversions) {\n              h1 = h - 23;\n              let h3 = h1 + 12;\n              conversions.setAttribute(\"y\", h1);\n              conversions.nextSibling.setAttribute(\"y\", h3);\n            }\n          }\n        };\n\n        const editText = async (callBack1: any, callBack2: any) => {\n          await getSpan();\n          await setTimeout(() => {\n            findText();\n          }, 500);\n        };\n\n        editText();\n\n        let mainNavLinks = document.querySelectorAll(\"nav ul li a\");\n        let mainSections = document.querySelectorAll(\"main section\");\n\n        let lastId;\n        let cur = [];\n\n        // This should probably be throttled.\n        // Especially because it triggers during smooth scrolling.\n        // https://lodash.com/docs/4.17.10#throttle\n        // You could do like...\n        // window.addEventListener(\"scroll\", () => {\n        //    _.throttle(doThatStuff, 100);\n        // });\n        // Only not doing it here to keep this Pen dependency-free.\n\n        window.addEventListener(\"scroll\", (event) => {\n          let fromTop = window.scrollY;\n\n          mainNavLinks.forEach((link) => {\n            let section = document.querySelector(link.hash);\n\n            if (\n              section.offsetTop <= fromTop &&\n              section.offsetTop + section.offsetHeight > fromTop\n            ) {\n              link.classList.add(\"current\");\n            } else {\n              link.classList.remove(\"current\");\n            }\n          });\n        });\n      });\n    });\n\n    // cleanup function to remove map on unmount\n    return () => map.remove();\n  }, [\n    state.colorScheme,\n    state.poiColor12Miles,\n    state.poiColor18Miles,\n    state.poiColor6Miles,\n    state.poiViews12Miles,\n    state.poiViews18Miles,\n    state.poiViews6Miles,\n    state.steps,\n  ]);\n\n  return (\n    <>\n      <Legend\n        type=\"dots\"\n        clusters=\"Clusters\"\n        pointCount=\"Views\"\n        clusterImg={clusterBlue}\n        unclusteredImg={unclusteredPoint}\n        unclusteredPoint=\"Unclustered Points\"\n        colorScheme={state.colorScheme}\n        steps={state.steps}\n        poi=\"POI\"\n        views=\"Views\"\n        poiColor6Miles={state.poiColor6Miles}\n        poiViews6Miles={state.poiViews6Miles}\n        poiColor12Miles={state.poiColor12Miles}\n        poiViews12Miles={state.poiViews12Miles}\n        poiColor18Miles={state.poiColor18Miles}\n        poiViews18Miles={state.poiViews18Miles}\n      />\n      <div ref={mapContainer} style={{ width: \"100%\", height: \"100vh\" }} />\n    </>\n  );\n}\n\nexport default Unclustered;\n"]},"metadata":{},"sourceType":"module"}