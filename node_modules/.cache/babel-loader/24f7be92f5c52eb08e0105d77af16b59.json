{"ast":null,"code":"/**\r\n * Functionality for drawing simple buttons.\r\n */\nimport { __extends } from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\n\nimport { Container } from \"../Container\";\nimport { Label } from \"./Label\";\nimport { RoundedRectangle } from \"../elements/RoundedRectangle\";\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\nimport { registry } from \"../Registry\";\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\n\n/**\r\n * Button class is capable of drawing a simple rectangular button with\r\n * optionally rounded corners and an icon in it.\r\n *\r\n * @see {@link IButtonEvents} for a list of available events\r\n * @see {@link IButtonAdapters} for a list of available Adapters\r\n */\n\nvar Button =\n/** @class */\nfunction (_super) {\n  __extends(Button, _super);\n  /**\r\n   * Constructor\r\n   */\n\n\n  function Button() {\n    var _this = // Init\n    _super.call(this) || this;\n\n    _this.className = \"Button\";\n    _this.tooltipY = 0; // Set defaults\n\n    _this.iconPosition = \"left\";\n    _this.layout = \"horizontal\";\n    _this.contentAlign = \"center\";\n    _this.contentValign = \"middle\";\n\n    _this.padding(8, 16, 8, 16);\n\n    _this.setStateOnChildren = true;\n    var interfaceColors = new InterfaceColorSet(); // Create background\n\n    var background = _this.background;\n    background.fill = interfaceColors.getFor(\"secondaryButton\");\n    background.stroke = interfaceColors.getFor(\"secondaryButtonStroke\");\n    background.fillOpacity = 1;\n    background.strokeOpacity = 1;\n    background.cornerRadius(3, 3, 3, 3); // Create the label element\n\n    _this.label = new Label();\n    _this.label.fill = interfaceColors.getFor(\"secondaryButtonText\");\n    ;\n    _this.label.shouldClone = false; // Create default states\n\n    var hoverState = background.states.create(\"hover\");\n    hoverState.properties.fillOpacity = 1;\n    hoverState.properties.fill = interfaceColors.getFor(\"secondaryButtonHover\");\n    var downState = background.states.create(\"down\");\n    downState.transitionDuration = 100;\n    downState.properties.fill = interfaceColors.getFor(\"secondaryButtonDown\");\n    downState.properties.fillOpacity = 1; // Set up accessibility\n    // A button should be always focusable\n\n    _this.role = \"button\";\n    _this.focusable = true; // Apply theme\n\n    _this.applyTheme();\n\n    return _this;\n  }\n\n  Object.defineProperty(Button.prototype, \"icon\", {\n    /**\r\n     * @return Icon Sprite\r\n     */\n    get: function () {\n      return this._icon;\n    },\n\n    /**\r\n     * A [[Sprite]] to be used as an icon on button.\r\n     *\r\n     * @param icon Icon Sprite\r\n     */\n    set: function (icon) {\n      var currentIcon = this._icon;\n\n      if (currentIcon) {\n        //this._icon.dispose();\n        //this.removeDispose(currentIcon);\n        currentIcon.parent = undefined;\n      }\n\n      if (icon) {\n        this._icon = icon;\n        icon.parent = this;\n        icon.interactionsEnabled = false;\n        icon.shouldClone = false;\n        this.iconPosition = this.iconPosition;\n\n        this._disposers.push(icon);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Button.prototype, \"iconPosition\", {\n    /**\r\n     * @return Icon position\r\n     */\n    get: function () {\n      return this.getPropertyValue(\"iconPosition\");\n    },\n\n    /**\r\n     * Icon position: \"left\" or \"right\".\r\n     *\r\n     * @default \"left\"\r\n     * @param position  Icon position\r\n     */\n    set: function (position) {\n      this.setPropertyValue(\"iconPosition\", position);\n\n      if (this.icon) {\n        if (position == \"left\") {\n          this.icon.toBack();\n        } else {\n          this.icon.toFront();\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Button.prototype, \"label\", {\n    /**\r\n     * @return Label element\r\n     */\n    get: function () {\n      return this._label;\n    },\n\n    /**\r\n     * [[Label]] element to be used for text.\r\n     *\r\n     * @param label element\r\n     */\n    set: function (label) {\n      if (this._label) {\n        //this._label.dispose();\n        this.removeDispose(this._label);\n      }\n\n      this._label = label;\n\n      if (label) {\n        label.parent = this;\n        label.interactionsEnabled = false;\n\n        this._disposers.push(this._label);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Creates a background element for the button.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @return Background element\r\n   */\n\n  Button.prototype.createBackground = function () {\n    return new RoundedRectangle();\n  };\n  /**\r\n   * Copies properties and other attributes.\r\n   *\r\n   * @param source  Source\r\n   */\n\n\n  Button.prototype.copyFrom = function (source) {\n    _super.prototype.copyFrom.call(this, source);\n\n    if (source.label) {\n      this.label.copyFrom(source.label);\n    }\n\n    if (source.icon) {\n      this.icon = source.icon.clone();\n    }\n  };\n\n  return Button;\n}(Container);\n\nexport { Button };\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\n\nregistry.registeredClasses[\"Button\"] = Button;","map":{"version":3,"mappings":"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","names":["Container","Label","RoundedRectangle","InterfaceColorSet","registry","__extends","_super","_this","className","tooltipY","iconPosition","layout","contentAlign","contentValign","padding","setStateOnChildren","interfaceColors","background","fill","getFor","stroke","fillOpacity","strokeOpacity","cornerRadius","label","shouldClone","hoverState","states","create","properties","downState","transitionDuration","role","focusable","applyTheme","Object","Button","_icon","icon","currentIcon","parent","undefined","interactionsEnabled","_disposers","push","getPropertyValue","position","setPropertyValue","toBack","toFront","_label","removeDispose","source","copyFrom","call","clone","registeredClasses"],"sourceRoot":"","sources":["../../../../../src/.internal/core/elements/Button.ts"],"sourcesContent":["/**\r\n * Functionality for drawing simple buttons.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../Container\";\r\nimport { Sprite } from \"../Sprite\";\r\nimport { Label } from \"./Label\";\r\nimport { RoundedRectangle } from \"../elements/RoundedRectangle\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Button]].\r\n */\r\nexport interface IButtonProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Icon (if available) position - left or right.\r\n\t */\r\n\ticonPosition?: \"left\" | \"right\";\r\n\r\n\t/**\r\n\t * Icon sprite\r\n\t */\r\n\ticon?: Sprite;\r\n}\r\n\r\n/**\r\n * Defines events for [[Button]].\r\n */\r\nexport interface IButtonEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Button]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IButtonAdapters extends IContainerAdapters, IButtonProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Button class is capable of drawing a simple rectangular button with\r\n * optionally rounded corners and an icon in it.\r\n *\r\n * @see {@link IButtonEvents} for a list of available events\r\n * @see {@link IButtonAdapters} for a list of available Adapters\r\n */\r\nexport class Button extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t */\r\n\tpublic _properties!: IButtonProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t */\r\n\tpublic _adapter!: IButtonAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t */\r\n\tpublic _events!: IButtonEvents;\r\n\r\n\t/**\r\n\t * Icon reference.\r\n\t */\r\n\tprotected _icon: Sprite;\r\n\r\n\t/**\r\n\t * [[Label]] element for button content.\r\n\t */\r\n\tprotected _label: $type.Optional<Label>;\r\n\r\n\t/**\r\n\t * A type for background.\r\n\t */\r\n\tpublic _background: RoundedRectangle;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Button\";\r\n\r\n\t\tthis.tooltipY = 0;\r\n\r\n\t\t// Set defaults\r\n\t\tthis.iconPosition = \"left\";\r\n\t\tthis.layout = \"horizontal\";\r\n\t\tthis.contentAlign = \"center\";\r\n\t\tthis.contentValign = \"middle\";\r\n\t\tthis.padding(8, 16, 8, 16);\r\n\t\tthis.setStateOnChildren = true;\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\t// Create background\r\n\t\tlet background = this.background;\r\n\t\tbackground.fill = interfaceColors.getFor(\"secondaryButton\");\r\n\t\tbackground.stroke = interfaceColors.getFor(\"secondaryButtonStroke\");\r\n\t\tbackground.fillOpacity = 1;\r\n\t\tbackground.strokeOpacity = 1;\r\n\t\tbackground.cornerRadius(3, 3, 3, 3);\r\n\r\n\t\t// Create the label element\r\n\t\tthis.label = new Label();\r\n\t\tthis.label.fill = interfaceColors.getFor(\"secondaryButtonText\");;\r\n\t\tthis.label.shouldClone = false;\r\n\r\n\t\t// Create default states\r\n\t\tlet hoverState = background.states.create(\"hover\");\r\n\t\thoverState.properties.fillOpacity = 1;\r\n\t\thoverState.properties.fill = interfaceColors.getFor(\"secondaryButtonHover\");\r\n\r\n\t\tlet downState = background.states.create(\"down\");\r\n\t\tdownState.transitionDuration = 100;\r\n\t\tdownState.properties.fill = interfaceColors.getFor(\"secondaryButtonDown\");\r\n\t\tdownState.properties.fillOpacity = 1;\r\n\t\t// Set up accessibility\r\n\t\t// A button should be always focusable\r\n\t\tthis.role = \"button\";\r\n\t\tthis.focusable = true;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Sprite]] to be used as an icon on button.\r\n\t *\r\n\t * @param icon Icon Sprite\r\n\t */\r\n\tpublic set icon(icon: Sprite) {\r\n\t\tlet currentIcon = this._icon;\r\n\t\tif (currentIcon) {\r\n\t\t\t//this._icon.dispose();\r\n\t\t\t//this.removeDispose(currentIcon);\r\n\t\t\tcurrentIcon.parent = undefined;\r\n\t\t}\r\n\t\tif (icon) {\r\n\t\t\tthis._icon = icon;\r\n\t\t\ticon.parent = this;\r\n\t\t\ticon.interactionsEnabled = false;\r\n\t\t\ticon.shouldClone = false;\r\n\t\t\tthis.iconPosition = this.iconPosition;\r\n\t\t\tthis._disposers.push(icon);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return Icon Sprite\r\n\t */\r\n\tpublic get icon(): Sprite {\r\n\t\treturn this._icon;\r\n\t}\r\n\r\n\t/**\r\n\t * Icon position: \"left\" or \"right\".\r\n\t *\r\n\t * @default \"left\"\r\n\t * @param position  Icon position\r\n\t */\r\n\tpublic set iconPosition(position: \"left\" | \"right\") {\r\n\t\tthis.setPropertyValue(\"iconPosition\", position);\r\n\r\n\t\tif (this.icon) {\r\n\t\t\tif (position == \"left\") {\r\n\t\t\t\tthis.icon.toBack();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.icon.toFront();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return Icon position\r\n\t */\r\n\tpublic get iconPosition(): \"left\" | \"right\" {\r\n\t\treturn this.getPropertyValue(\"iconPosition\");\r\n\t}\r\n\r\n\t/**\r\n\t * [[Label]] element to be used for text.\r\n\t *\r\n\t * @param label element\r\n\t */\r\n\tpublic set label(label: $type.Optional<Label>) {\r\n\t\tif (this._label) {\r\n\t\t\t//this._label.dispose();\r\n\t\t\tthis.removeDispose(this._label);\r\n\t\t}\r\n\t\tthis._label = label;\r\n\t\tif (label) {\r\n\t\t\tlabel.parent = this;\r\n\t\t\tlabel.interactionsEnabled = false;\r\n\t\t\tthis._disposers.push(this._label);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return Label element\r\n\t */\r\n\tpublic get label(): $type.Optional<Label> {\r\n\t\treturn this._label;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a background element for the button.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return Background element\r\n\t */\r\n\tpublic createBackground(): this[\"_background\"] {\r\n\t\treturn new RoundedRectangle();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Copies properties and other attributes.\r\n\t *\r\n\t * @param source  Source\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tsuper.copyFrom(source);\r\n\t\tif (source.label) {\r\n\t\t\tthis.label.copyFrom(source.label)\r\n\t\t}\r\n\t\tif (source.icon) {\r\n\t\t\tthis.icon = source.icon.clone();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Button\"] = Button;\r\n"]},"metadata":{},"sourceType":"module"}