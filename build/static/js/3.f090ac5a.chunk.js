/*! For license information please see 3.f090ac5a.chunk.js.LICENSE.txt */
(this.webpackJsonpmaps=this.webpackJsonpmaps||[]).push([[3],[function(e,t,i){"use strict";i.d(t,"g",(function(){return r})),i.d(t,"a",(function(){return o})),i.d(t,"k",(function(){return s})),i.d(t,"l",(function(){return l})),i.d(t,"n",(function(){return u})),i.d(t,"m",(function(){return c})),i.d(t,"d",(function(){return h})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return d})),i.d(t,"f",(function(){return f})),i.d(t,"j",(function(){return m})),i.d(t,"h",(function(){return y})),i.d(t,"i",(function(){return v})),i.d(t,"e",(function(){return g}));var n=i(9);function r(e){return Number(e)!==e}function a(e){return{}.toString.call(e)}function o(e){if("string"===typeof e)return e;if("number"===typeof e)return""+e;throw new Error("Expected a string or number but got "+a(e))}function s(e){return!!e}function l(e){if(h(e)&&!y(e)){var t=Number(e);return r(t)&&m(e)&&""!=e?l(e.replace(/[^0-9.\-]+/g,"")):t}return e}function u(e){if(h(e)&&!m(e)){if(y(e))return o(e);if(v(e))return e.toString()}return e}function c(e){return!h(e)||y(e)||Object(n.b)(e)?e:m(e)&&-1!=e.indexOf("%")?Object(n.c)(l(e)):l(e)}function h(e){return null!=e}function p(e){if(h(e))return e;throw new Error("Value doesn't exist")}function d(e,t){return h(e)?e:t}function f(e){return"[object Date]"===a(e)}function m(e){return"string"===typeof e}function y(e){return"number"===typeof e&&Number(e)==e}function v(e){return"object"===typeof e&&null!=e}function g(e){return Array.isArray(e)}},function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"a",(function(){return s})),i.d(t,"H",(function(){return l})),i.d(t,"E",(function(){return u})),i.d(t,"e",(function(){return c})),i.d(t,"i",(function(){return h})),i.d(t,"F",(function(){return p})),i.d(t,"G",(function(){return d})),i.d(t,"g",(function(){return f})),i.d(t,"B",(function(){return m})),i.d(t,"C",(function(){return y})),i.d(t,"f",(function(){return v})),i.d(t,"x",(function(){return g})),i.d(t,"z",(function(){return _})),i.d(t,"y",(function(){return b})),i.d(t,"q",(function(){return x})),i.d(t,"r",(function(){return w})),i.d(t,"w",(function(){return k})),i.d(t,"p",(function(){return P})),i.d(t,"v",(function(){return S})),i.d(t,"s",(function(){return T})),i.d(t,"j",(function(){return C})),i.d(t,"l",(function(){return O})),i.d(t,"m",(function(){return I})),i.d(t,"u",(function(){return E})),i.d(t,"t",(function(){return A})),i.d(t,"n",(function(){return M})),i.d(t,"o",(function(){return D})),i.d(t,"D",(function(){return F})),i.d(t,"h",(function(){return L})),i.d(t,"k",(function(){return R})),i.d(t,"A",(function(){return V}));var n=i(0),r=Math.PI,a=r/2,o=r/180,s=180/r;function l(e,t,i){return n.d(e)?h(e=n.l(e),t,i):e}function u(e,t,i){if(!n.h(t)||t<=0){var r=Math.round(e);return i&&r-e==.5&&r--,r}var a=Math.pow(10,t);return Math.round(e*a)/a}function c(e,t){if(!n.h(t)||t<=0)return Math.ceil(e);var i=Math.pow(10,t);return Math.ceil(e*i)/i}function h(e,t,i){if(n.h(t)){if(n.h(i)&&i<t){var r=i;i=t,t=r}e<t&&(e=t)}return n.h(i)&&e>i&&(e=i),e}function p(e){return u(Math.sin(o*e),10)}function d(e){return u(Math.tan(o*e),10)}function f(e){return u(Math.cos(o*e),10)}function m(e,t){return n.h(e)?n.h(t)&&t>e?t:e:n.h(t)?t:null}function y(e,t){return n.h(e)?n.h(t)&&t<e?t:e:n.h(t)?t:null}function v(e,t){return e.reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e}))}function g(e,t){var i=n.b(e.start),r=n.b(t.start),a=n.b(e.end),o=n.b(t.end);return Math.max(i,r)<=Math.min(a,o)}function _(e){var t=n.b(e.start);return{start:1-n.b(e.end),end:1-t}}function b(e,t){var i=n.b(e.start),r=n.b(t.start),a=n.b(e.end),o=n.b(t.end),s=Math.max(i,r),l=Math.min(a,o);return l<s?void 0:{start:s,end:l}}function x(e,t){return e?(t||(t={x:0,y:0}),Math.sqrt(Math.pow(Math.abs(e.x-t.x),2)+Math.pow(Math.abs(e.y-t.y),2))):0}function w(e,t){return e?(t||(t={x:0,y:0}),Math.abs(e.x-t.x)):0}function k(e,t){return e?(t||(t={x:0,y:0}),Math.abs(e.y-t.y)):0}function P(e,t,i,n,r){if(!e)return 0;t||(t={x:0,y:0});var a=0,o=e;if(r>0)for(var s=0;s<=r;s++){var l=A(e,t,i,n,s/r);a+=x(o,l),o=l}return a}function S(e,t,i,n){var r=x(t,n),a=x(e,i);return Math.abs(a/r)}function T(e,t,i){return n.h(i)||(i=.5),{x:e.x+(t.x-e.x)*i,y:e.y+(t.y-e.y)*i}}function C(e,t){t||(t={x:2*e.x,y:2*e.y});var i=t.x-e.x,n=t.y-e.y,r=Math.atan2(n,i)*s;return r<0&&(r+=360),F(r)}function O(e){if(e){var t=e.length;if(0!==t){for(var i,r=void 0,a=void 0,o=void 0,s=0;s<t;s++){var l=e[s];(!n.h(a)||l.x>a)&&(a=l.x),(!n.h(r)||l.x<r)&&(r=l.x),(!n.h(i)||l.y<i)&&(i=l.y),(!n.h(o)||l.y>o)&&(o=l.y)}return{x:r,y:i,width:a-r,height:o-i}}}return{x:0,y:0,width:0,height:0}}function I(e){var t=e.length;if(0!==t){for(var i=void 0,n=void 0,r=void 0,a=void 0,o=0;o<t;o++){var s=e[o];i=y(s.x,i),n=y(s.y,n),r=m(s.x+s.width,r),a=m(s.y+s.height,a)}return{x:i,y:n,width:r-i,height:a-n}}}function E(e,t,i,n){return{x:(1-n)*(1-n)*e.x+2*(1-n)*n*i.x+n*n*t.x,y:(1-n)*(1-n)*e.y+2*(1-n)*n*i.y+n*n*t.y}}function A(e,t,i,n,r){var a={x:0,y:0},o=1-r,s=o*o,l=s*o;return a.x=e.x*l+3*i.x*s*r+3*n.x*o*r*r+t.x*r*r*r,a.y=e.y*l+3*i.y*s*r+3*n.y*o*r*r+t.y*r*r*r,a}function M(e,t,i,n,r,a){return r=j(r),a=j(a),{x:(-e.x+t.x/r+i.x)*r,y:(-e.y+t.y/a+i.y)*a}}function D(e,t,i,n,r,a){return r=j(r),a=j(a),{x:(t.x+i.x/r-n.x)*r,y:(t.y+i.y/a-n.y)*a}}function j(e){return 1-e+1e-5}function F(e){return 360==e?360:e%360}function L(e,t,i){if(t>i){var n=t;t=i,i=n}e=F(e);var r=(t-F(t))/360;return e<t&&(e+=360*(r+1)),e>i&&(e-360>t?e-=360:e=e<t+(i-t)/2+180?i:t),e<t&&(e=e>t+(i-t)/2-180?t:i),e}function R(e,t,i){var r=Number.MAX_VALUE,a=Number.MAX_VALUE,o=-Number.MAX_VALUE,s=-Number.MAX_VALUE,l=[];n.h(i)||(i=1),l.push(z(i,e)),l.push(z(i,t));for(var u=Math.min(90*Math.floor(e/90),90*Math.floor(t/90)),c=Math.max(90*Math.ceil(e/90),90*Math.ceil(t/90)),h=u;h<=c;h+=90)h>=e&&h<=t&&l.push(z(i,h));for(var p=0;p<l.length;p++){var d=l[p];d.x<r&&(r=d.x),d.y<a&&(a=d.y),d.x>o&&(o=d.x),d.y>s&&(s=d.y)}return{x:r,y:a,width:o-r,height:s-a}}function z(e,t){return{x:e*f(t),y:e*p(t)}}function V(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}},function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"g",(function(){return l})),i.d(t,"e",(function(){return u})),i.d(t,"f",(function(){return c}));var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)};function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var a=function(){return a=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};function o(e,t,i,n){return new(i||(i=Promise))((function(r,a){function o(e){try{l(n.next(e))}catch(t){a(t)}}function s(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))}function s(e,t){var i,n,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}Object.create;function l(e){var t="function"===typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var i="function"===typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,a=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}Object.create},function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return c}));var n=i(48),r=i(24),a=i(76),o=i(0),s=i(70),l=i(7),u=new(function(){function e(){var e=this;this.events=new n.a,this.themes=[],this.loadedThemes={},this._uidCount=0,this.registeredClasses={},this._placeholders={},this.invalidSprites={},this.invalidDatas={},this.invalidRawDatas=[],this.invalidDataItems=[],this.invalidDataRange=[],this.invalidPositions={},this.invalidLayouts={},this.baseSprites=[],this.baseSpritesByUid={},this.queue=[],this.deferred=[],this.uid=this.getUniqueId(),this.invalidSprites.noBase=[],this.invalidDatas.noBase=[],this.invalidLayouts.noBase=[],this.invalidPositions.noBase=[],"undefined"!==typeof addEventListener&&(addEventListener("beforeprint",(function(){l.d(e.baseSprites,(function(e){var t=e.paper.svg;t.setAttribute("viewBox","0 0 "+t.clientWidth+" "+t.clientHeight)}))})),addEventListener("afterprint",(function(){l.d(e.baseSprites,(function(e){e.paper.svg.removeAttribute("viewBox")}))})))}return e.prototype.getUniqueId=function(){var e=this._uidCount;return this._uidCount+=1,"id-"+e},Object.defineProperty(e.prototype,"map",{get:function(){return this._map||(this._map=new r.a),this._map},enumerable:!0,configurable:!0}),e.prototype.setCache=function(e,t,i){a.a.set(this.uid,e,t,i)},e.prototype.getCache=function(e,t){return void 0===t&&(t=void 0),a.a.get(this.uid,e,t)},e.prototype.dispatch=function(e,t){this.events.isEnabled(e)&&(t?(t.type=e,t.target=t.target||this,this.events.dispatch(e,{type:e,target:this})):this.events.dispatch(e,{type:e,target:this}))},e.prototype.dispatchImmediately=function(e,t){this.events.isEnabled(e)&&(t?(t.type=e,t.target=t.target||this,this.events.dispatchImmediately(e,t)):this.events.dispatchImmediately(e,{type:e,target:this}))},e.prototype.getPlaceholder=function(e){return o.d(this._placeholders[e])||(this._placeholders[e]="__amcharts_"+e+"_"+s.b(8)+"__"),this._placeholders[e]},e.prototype.addToInvalidComponents=function(e){e.baseId?l.m(this.invalidDatas[e.baseId],e):l.m(this.invalidDatas.noBase,e)},e.prototype.removeFromInvalidComponents=function(e){e.baseId&&l.o(this.invalidDatas[e.baseId],e),l.o(this.invalidDatas.noBase,e)},e.prototype.addToInvalidSprites=function(e){e.baseId?l.a(this.invalidSprites[e.baseId],e):l.a(this.invalidSprites.noBase,e)},e.prototype.removeFromInvalidSprites=function(e){e.baseId&&l.o(this.invalidSprites[e.baseId],e),l.o(this.invalidSprites.noBase,e)},e.prototype.addToInvalidPositions=function(e){e.baseId?l.a(this.invalidPositions[e.baseId],e):l.a(this.invalidPositions.noBase,e)},e.prototype.removeFromInvalidPositions=function(e){e.baseId&&l.o(this.invalidPositions[e.baseId],e),l.o(this.invalidPositions.noBase,e)},e.prototype.addToInvalidLayouts=function(e){e.baseId?l.a(this.invalidLayouts[e.baseId],e):l.a(this.invalidLayouts.noBase,e)},e.prototype.removeFromInvalidLayouts=function(e){e.baseId&&l.o(this.invalidLayouts[e.baseId],e),l.o(this.invalidLayouts.noBase,e)},e}());function c(e,t){var i=u.registeredClasses[t];return null!=i&&e instanceof i}},function(e,t,i){"use strict";i.d(t,"h",(function(){return o})),i.d(t,"g",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"i",(function(){return u})),i.d(t,"e",(function(){return c})),i.d(t,"d",(function(){return h})),i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return d})),i.d(t,"c",(function(){return f})),i.d(t,"k",(function(){return m})),i.d(t,"j",(function(){return y}));var n=i(1),r=i(0),a=(i(58),i(23));function o(e){var t=l(e[0]),i={x:0,y:0},o=a.a.minPolylineStep;r.h(o)||(o=.5);for(var s=0,u=e.length;s<u;s++){var c=e[s];n.q(c,i)>o&&(t+=l(c),i=c)}return t}function s(e){return" M"+n.E(e.x,4)+","+n.E(e.y,4)+" "}function l(e){return" L"+n.E(e.x,4)+","+n.E(e.y,4)+" "}function u(e,t){return" Q"+n.E(t.x,4)+","+n.E(t.y,4)+" "+n.E(e.x,4)+","+n.E(e.y,4)}function c(e,t,i){return" C"+n.E(t.x,4)+","+n.E(t.y,4)+" "+n.E(i.x,4)+","+n.E(i.y,4)+" "+n.E(e.x,4)+","+n.E(e.y,4)}function h(){return" Z"}function p(e,t,i,a){if(0==t)return"";r.h(a)||(a=i);var o="",s=",",u=Math.ceil(Math.abs(t)/180),c=1;t<0&&(c=0);var h=0,p=0,d=-n.g(e)*i,f=-n.F(e)*a;if(t<.5&&i>3e3){var m=e+t;return l({x:v=n.E(n.g(m)*i,4),y:g=n.E(n.F(m)*a,4)})}for(var y=0;y<u;y++){var v,g;m=e+t/u*(y+1);o+=" a"+i+s+a+s+0+s+0+s+c+s+(v=n.E(n.g(m)*i+d-h,4))+s+(g=n.E(n.F(m)*a+f-p,4)),h=v,p=g}return o}function d(e,t,i,a,o,u,c){if(0==t)return"";if(r.h(a)||(a=0),0==i&&a<=0)return"";if(i<a){var h=i;i=a,a=h,r.h(o)&&(o=o/a*i)}360==(t=n.C(t,360))&&(u=0,c=0);var d=e+t,m=n.F(n.C(t,45)/2),y=(o=r.h(o)?o:i)/i*a,v=o/i*(u=u||0),g=o/i*(c=r.h(c)?c:u);u=n.i(u,0,(i-a)/2),v=n.i(v,0,(o-y)/2),c=n.i(c,0,(i-a)/2),g=n.i(g,0,(o-y)/2),u=n.E(n.i(u,0,i*m),4),v=n.E(n.i(v,0,o*m),4),c=n.E(n.i(c,0,a*m),4),g=n.E(n.i(g,0,y*m),4);var _=Math.asin(u/i/2)*n.a*2,b=Math.asin(v/o/2)*n.a*2;a<c&&(a=c),y<g&&(y=g);var x=Math.asin(c/a/2)*n.a*2,w=Math.asin(g/y/2)*n.a*2;r.h(x)||(x=0),r.h(w)||(w=0);var k=e+t/2,P={x:n.E(n.g(k)*a,4),y:n.F(k)*y},S={x:n.g(e)*(a+c),y:n.F(e)*(y+g)},T={x:n.g(e)*(i-u),y:n.F(e)*(o-v)},C={x:n.g(d)*(i-u),y:n.F(d)*(o-v)},O={x:n.g(d)*(a+c),y:n.F(d)*(y+g)},I={x:n.g(e+_)*i,y:n.F(e+b)*o},E={x:n.g(d-x)*a,y:n.F(d-w)*y};c+=c*n.F(x/2),g+=g*n.F(w/2),x>(d-e)/2&&(E=P);var A="";return 360==t?A=s(T):(A=s(S),A+=l(T),A+=f(I,u,v,!0)),A+=p(e+_,t-2*_,i,o),r.h(a)&&0!=a?(360==t&&0==u?A+=s(O):(A+=f(C,u,v,!0),A+=l(O),A+=f(E,c,g,!0)),A+=p(d-x,-(t-2*x),a,y),(t<360||u>0)&&(A+=f(S,c,g,!0)),A+=l(S)):(A+=f(C,u,v,!0),t<360&&(A+=l(S))),A}function f(e,t,i,r,a,o){if(0==t)return"";var s=",";return" A"+t+s+i+s+(o=o||0)+s+ +(a=Boolean(a))+s+ +(r=Boolean(r))+s+n.E(e.x,4)+s+n.E(e.y,4)}function m(e,t,i,n){return r.h(i)||(i=0),r.h(n)||(n=0),s({x:i,y:n})+l({x:i+e,y:n})+l({x:i+e,y:n+t})+l({x:i,y:n+t})+" Z"}function y(e,t){var i=",",n=" L";return t?"M"+e.x+i+e.y+n+e.x+i+(e.y+e.height)+n+(e.x+e.width)+i+(e.y+e.height)+n+(e.x+e.width)+i+e.y+n+e.x+i+e.y:"M"+e.x+i+e.y+n+(e.x+e.width)+i+e.y+n+(e.x+e.width)+i+(e.y+e.height)+n+e.x+i+(e.y+e.height)+n+e.x+i+e.y}},function(e,t,i){"use strict";e.exports=i(214)},function(e,t,i){"use strict";i.d(t,"R",(function(){return c})),i.d(t,"f",(function(){return h})),i.d(t,"n",(function(){return d})),i.d(t,"e",(function(){return f})),i.d(t,"x",(function(){return m})),i.d(t,"E",(function(){return y})),i.d(t,"D",(function(){return v})),i.d(t,"r",(function(){return g})),i.d(t,"c",(function(){return _})),i.d(t,"L",(function(){return b})),i.d(t,"j",(function(){return x})),i.d(t,"G",(function(){return w})),i.d(t,"Q",(function(){return k})),i.d(t,"P",(function(){return P})),i.d(t,"F",(function(){return S})),i.d(t,"z",(function(){return T})),i.d(t,"B",(function(){return O})),i.d(t,"p",(function(){return I})),i.d(t,"d",(function(){return E})),i.d(t,"M",(function(){return A})),i.d(t,"C",(function(){return M})),i.d(t,"A",(function(){return D})),i.d(t,"a",(function(){return j})),i.d(t,"b",(function(){return F})),i.d(t,"u",(function(){return L})),i.d(t,"t",(function(){return R})),i.d(t,"q",(function(){return z})),i.d(t,"o",(function(){return V})),i.d(t,"m",(function(){return B})),i.d(t,"s",(function(){return N})),i.d(t,"k",(function(){return U})),i.d(t,"l",(function(){return W})),i.d(t,"O",(function(){return G})),i.d(t,"J",(function(){return H})),i.d(t,"I",(function(){return X})),i.d(t,"K",(function(){return Y})),i.d(t,"i",(function(){return q})),i.d(t,"N",(function(){return Z})),i.d(t,"h",(function(){return K})),i.d(t,"H",(function(){return $})),i.d(t,"S",(function(){return J})),i.d(t,"v",(function(){return Q})),i.d(t,"g",(function(){return ee})),i.d(t,"y",(function(){return ae})),i.d(t,"w",(function(){return oe}));i(9);var n=i(149),r=i(1),a=i(0),o=i(70),s=i(28),l=i(11),u=i(7);function c(e){}function h(e,t){return l.d(e,(function(e,i){a.d(i)&&(t[e]=i)})),t}function p(e){return/^[^#]*/.exec(e)[0]}function d(){var e="#";if(Object(n.b)()){var t=document.baseURI;if(t){t=p(t);var i=p(location.href);t!==i&&(e=i+e)}}return e}function f(e,t){return l.d(e,(function(e,i){t[e]=i})),t}function m(e){return a.d(e)&&""!==e.toString()}function y(e,t){return a.h(e)?e:null!=e&&a.h(e.value)&&a.h(t)?t*e.value:0}function v(e,t,i){var n;return a.h(e)?(n=e)<0&&(n=i?t+n:t-n):null!=e&&a.h(e.value)&&(n=t*e.value),n}function g(){return window.devicePixelRatio||1}function _(e){var t=e.split("");return t[0]=t[0].toUpperCase(),t.join("")}function b(e){return JSON.stringify(e)}function x(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function w(e,t,i,n,r){if(e.length<=t)return[e];var a=[];if(i){for(var o=-1,l=e.replace(/([,;:!?\\\/\.]+|[\s])/g,s.d+"$1"+s.d).split(s.d),u=1;u<l.length;u++){"."!=(c=l[u])&&","!=c||!l[u-1].match(/[\w]+$/)||(l[u-1]+=c,l[u]="")}for(u=0;u<l.length;u++){var c,h=(c=l[u]).length;if(0!==h){if(h>t&&(!0!==i||0!=r)){if(n&&(c=C(c)),d=c.match(new RegExp(".{1,"+t+"}","g"))){if(n)for(var p=0;p<d.length;p++)d[p]=C(d[p]);a=a.concat(d)}}else-1===o&&(a.push(""),o=0),a[o].length+h+1>t&&""!==a[o]&&(a.push(""),o++),a[o]+=c;o=a.length-1}}}else{var d;if(d=e.match(new RegExp(".{1,"+t+"}","g"))){if(n)for(p=0;p<d.length;p++)d[p]=C(d[p]);a=d}}return 1==a.length&&i&&r&&a[0].length>t&&(a=[]),a}function k(e,t,i,n,r){return e.length<=t?e:((t-=i.length)<1&&(t=1),(w(e,t,n,r)[0]||"")+i)}function P(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function S(e){return e.replace(/[\s\uFEFF\xA0]+$/g,"")}function T(e){return e.replace(/^[\s\uFEFF\xA0]+/g,"")}function C(e){return e.split("").reverse().join("")}function O(e,t,i){return void 0===t&&(t=0),void 0===i&&(i="0"),"string"!==typeof e&&(e=e.toString()),t>e.length?Array(t-e.length+1).join(i)+e:e}function I(e){if("undefined"===typeof e)return s.f;var t=(e=(e=(e=e.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return t?t[1]:e===s.c?s.c:e===s.a?s.a:e===s.b?s.b:e.match(/[#0]/)?s.c:e.match(/[ymwdhnsqaxkzgtei]/)?s.a:s.f}function E(e){return e.replace(/\/(date|number|duration)$/i,"")}function A(e){return e?e.replace(/<[^>]*>/g,""):e}function M(e){return e?A((""+e).replace(/[\n\r]+/g,". ")):e}function D(e){if(a.g(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(0===e&&1/e===-1/0)return"-0";var t=e<0;e=Math.abs(e);var i,n=a.b(/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+e)),r=n[1],s=n[2]||"";if(null==n[3])i=""===s?r:r+"."+s;else{var l=+n[3];if(e<1){var u=l-1;i="0."+o.c("0",u)+r+s}else{i=0===(u=l-s.length)?r+s:u<0?r+s.slice(0,u)+"."+s.slice(u):r+s+o.c("0",u)}}return t?"-"+i:i}function j(e){if(a.f(e)){var t=new Date(e);return t.setMilliseconds(e.getMilliseconds()),t}if(a.h(e))return new Date(e);var i=Number(e);return a.h(i)?new Date(i):new Date(e)}function F(e){if(a.f(e))return e.getTime();if(a.h(e))return e;if(a.j(e)){var t=Number(e);return a.h(t)?t:void 0}}function L(e,t){void 0===t&&(t=!1);var i=new Date(e.getFullYear(),0,0),n=e.getTime()-i.getTime()+60*(i.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(n/864e5)}function R(e,t){void 0===t&&(t=!1);var i=L(e,t)-1,n=Math.floor((i-(e.getDay()||7)+10)/7);return 0===n?n=53:53===n&&(n=1),n}function z(e,t){void 0===t&&(t=!1);var i=R(new Date(e.getFullYear(),e.getMonth(),1),t),n=R(e,t);return 1==n&&(n=53),n-i+1}function V(e,t,i,n){void 0===i&&(i=1),void 0===n&&(n=!1);var r=new Date(t,0,4,0,0,0,0);return n&&r.setUTCFullYear(t),7*e+i-((r.getDay()||7)+3)}function B(e,t){return e>12?e-=12:0===e&&(e=12),a.d(t)?e+(t-1):e}function N(e,t,i,n){if(void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),n)return t?"Coordinated Universal Time":"UTC";var r=e.toLocaleString("UTC"),a=e.toLocaleString("UTC",{timeZoneName:t?"long":"short"}).substr(r.length);return!1===i&&(a=a.replace(/ (standard|daylight|summer|winter) /i," ")),a}function U(e,t,i){return e>i?i:e<t?t:e}function W(e,t,i){var n=i-t;return(e>i||e<t)&&(e=t+(e-n*Math.floor(e/n))),e}function G(e,t){var i=e.x,n=e.y,o=[];if(t){for(;a.d(t.parent);)o.push(t),t=t.parent;o.reverse();for(var s=0;s<o.length;s++){var l=o[s],u=l.rotation,c=i-l.pixelX-l.ex,h=n-l.pixelY-l.ey;l.dx&&(i-=l.dx),l.dy&&(n-=l.dy);var p=l.scale;l.group&&(p=l.group.scale),i=(r.g(-u)*c-r.F(-u)*h)/p-l.pixelPaddingLeft,n=(r.g(-u)*h+r.F(-u)*c)/p-l.pixelPaddingTop}}return{x:i,y:n}}function H(e,t){var i=e.x,n=e.y;if(t)for(;a.d(t.parent);){var o=t.rotation;i+=t.pixelPaddingLeft+t.ex,n+=t.pixelPaddingTop+t.ey;var s=t.scale;t.group&&(s=t.group.scale);var l=t.pixelX+(i*r.g(o)-n*r.F(o))*s,u=t.pixelY+(i*r.F(o)+n*r.g(o))*s;t.dx&&(l+=t.dx),t.dy&&(u+=t.dy),i=l,n=u,t=t.parent}return{x:i,y:n}}function X(e,t,i){return G(H(e,t),i)}function Y(e,t){var i=H(e,t),n=H({x:e.x+e.width,y:e.y+e.height},t);return{x:i.x,y:i.y,width:n.x-i.x,height:n.y-i.y}}function q(e,t,i){try{var n=t.getBoundingClientRect();return a.h(i)||(i=1),{x:(e.x-n.left)/i,y:(e.y-n.top)/i}}catch(r){return e}}function Z(e,t){try{var i=t.getBoundingClientRect();return{x:e.x+i.left,y:e.y+i.top}}catch(n){return e}}function K(e,t){return t&&t.htmlContainer?G(q(e,a.b(t.htmlContainer),t.svgContainer.cssScale),t):e}function $(e,t){return t&&t.htmlContainer?Z(H(e,t),a.b(t.htmlContainer)):e}function J(e){var t=getComputedStyle(e),i=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n=parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth);return e.clientWidth-i-n}function Q(e){var t=getComputedStyle(e),i=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),n=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth);return e.clientHeight-i-n}function ee(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}var te=/^([a-zA-Z][a-zA-Z0-9\+\.\-]*:)?(?:(\/\/)([^\@]+\@)?([^\/\?\#\:]*)(\:[0-9]+)?)?([^\?\#]*)(\?[^\#]*)?(\#.*)?$/;function ie(e){var t=te.exec(e);return{protocol:t&&t[1]||"",separator:t&&t[2]||"",authority:t&&t[3]||"",domain:t&&t[4]||"",port:t&&t[5]||"",path:t&&t[6]||"",query:t&&t[7]||"",hash:t&&t[8]||""}}function ne(e){return e.protocol+e.separator+e.authority+e.domain+e.port+e.path+e.query+e.hash}function re(e){return""===e.protocol&&""===e.separator&&""===e.authority&&""===e.domain&&""===e.port}function ae(e,t){var i=ie(e),n=ie(t);if(re(i))throw new Error("Left URL is not absolute");if(re(n)){if(""!==n.path)if("/"===n.path[0])i.path=n.path;else{var r=i.path.split(/\//),a=n.path.split(/\//);if(0===r.length?0!==a.length&&r.push(""):r.length>1&&r.pop(),u.n(r,a),i.path=r.join("/"),""!==i.path&&"/"!==i.path[0])throw new Error("URL path must start with /")}return i.query=n.query,i.hash=n.hash,ne(i)}return ne(n)}function oe(){return!!window.MSInputMethodContext&&!!document.documentMode}},function(e,t,i){"use strict";i.d(t,"i",(function(){return r})),i.d(t,"b",(function(){return a})),i.d(t,"l",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"e",(function(){return u})),i.d(t,"r",(function(){return c})),i.d(t,"n",(function(){return h})),i.d(t,"o",(function(){return p})),i.d(t,"m",(function(){return d})),i.d(t,"a",(function(){return f})),i.d(t,"q",(function(){return m})),i.d(t,"s",(function(){return y})),i.d(t,"c",(function(){return v})),i.d(t,"j",(function(){return g})),i.d(t,"p",(function(){return _})),i.d(t,"h",(function(){return b})),i.d(t,"g",(function(){return x})),i.d(t,"k",(function(){return w}));i(1);var n=i(0);function r(e,t){for(var i=e.length,n=0;n<i;++n)if(e[n]===t)return n;return-1}function a(e,t){for(var i=e.length,n=0;n<i;++n)if(t(e[n]))return!0;return!1}function o(e,t){for(var i=e.length,n=new Array(i),r=0;r<i;++r)n[r]=t(e[r],r);return n}function s(e,t){for(var i=e.length,n=0;n<i;++n)t(e[n],n)}function l(e,t){for(var i=e.length;i--;)t(e[i],i)}function u(e,t){for(var i=e.length,n=0;n<i&&t(e[n],n);++n);}function c(e,t){for(var i=e.length,n=t;n<i;++n)e[n-t]=e[n];e.length=i-t}function h(e,t){for(var i=t.length,n=0;n<i;++n)e.push(t[n])}function p(e,t){var i=!1,n=e.indexOf(t);if(-1!==n){i=!0,e.splice(n,1);for(var r=e.length;n<r;)e[n]===t?(e.splice(n,1),--r):++n}return i}function d(e,t,i){var n=r(e,t);-1!==n&&_(e,n),null==i?e.push(t):g(e,i,t)}function f(e,t,i){n.h(i)?0===i?e.unshift(t):e.splice(i,0,t):e.push(t)}function m(e,t,i){var r=e.indexOf(t);-1!==r&&e.splice(r,1),n.h(i)?e.splice(i,0,t):e.push(t)}function y(e){return Array.isArray(e)?e:[e]}function v(e){for(var t=e.length,i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function g(e,t,i){e.splice(t,0,i)}function _(e,t){e.splice(t,1)}function b(e,t,i){for(var n=0,r=e.length,a=!1;n<r;){var o=n+r>>1,s=t(i,e[o]);s<0?r=o:0===s?(a=!0,n=o+1):n=o+1}return{found:a,index:a?n-1:n}}function x(e,t){for(var i=e.length,n=0;n<i;++n)if(t(e[n],n))return n;return-1}function w(e,t){for(var i=e.length,n=0;n<i;)t(e[n])?++n:(e.splice(n,1),--i)}},function(e,t,i){"use strict";i.d(t,"h",(function(){return r})),i.d(t,"j",(function(){return a})),i.d(t,"m",(function(){return o})),i.d(t,"e",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"l",(function(){return u})),i.d(t,"k",(function(){return c})),i.d(t,"b",(function(){return h})),i.d(t,"g",(function(){return p})),i.d(t,"i",(function(){return d})),i.d(t,"f",(function(){return f})),i.d(t,"c",(function(){return m})),i.d(t,"a",(function(){return y}));var n=i(7);function r(e){return function(t){for(var i=e.length,n=0;n<i&&t(e[n]);++n);}}function a(e){var t=0;return e((function(e){return++t,!0})),t}function o(e){var t=[];return e((function(e){return t.push(e),!0})),t}function s(e,t){e(t)}function l(e,t){e((function(e){return t(e),!0}))}function u(e,t){return r(o(e).sort(t))}function c(e,t){return function(i){return e((function(e){return i(t(e))}))}}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){for(var i=!0,n=function(e){return i=t(e)},r=e.length,a=0;a<r&&(e[a](n),i);++a);}}function p(e){return function(t){var i=!0,n=function(e){return i=t(e)};e((function(e){return e(n),i}))}}function d(e){return function(t){var i=0;e((function(e){return t([i++,e])}))}}function f(e,t){var i;return e((function(e){return!t(e)||(i=e,!1)})),i}function m(e,t){var i=!1;return e((function(e){return!t(e)||(i=!0,!1)})),i}var y=function(){function e(e,t){this.createNewItems=!1,this.list=e,this._create=t,this.reset()}return e.prototype.reset=function(){this._listCopy=o(this.list.iterator())},e.prototype.clear=function(){this._listCopy.length=0},e.prototype.getFirst=function(){return this.returnItem(0)},e.prototype.getLast=function(){return this.returnItem(this._listCopy.length-1)},e.prototype.find=function(e){var t=n.g(this._listCopy,e);if(-1!==t){var i=this._listCopy[t];return n.o(this._listCopy,i),i}return this.getLast()},e.prototype.removeItem=function(e){return n.o(this._listCopy,e)},e.prototype.returnItem=function(e){if(e>=0&&e<this._listCopy.length){var t=this._listCopy[e];return n.o(this._listCopy,t),t}if(this.createNewItems)return this._create()},e.prototype.iterator=function(){return r(this._listCopy)},e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return a}));var n=function(){function e(e){this._value=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value/100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percent",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._value+"%"},e}();function r(e){return new n(e)}function a(e){return e instanceof n}},function(e,t,i){"use strict";function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},n.apply(this,arguments)}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"g",(function(){return a})),i.d(t,"i",(function(){return s})),i.d(t,"e",(function(){return l})),i.d(t,"d",(function(){return u})),i.d(t,"f",(function(){return c})),i.d(t,"j",(function(){return h})),i.d(t,"a",(function(){return p})),i.d(t,"c",(function(){return d})),i.d(t,"h",(function(){return f})),i.d(t,"b",(function(){return m}));var n=i(7),r=i(0);function a(e){return function(t){for(var i in e)if(s(e,i)&&!t([i,e[i]]))break}}function o(e){var t=[];for(var i in e)s(e,i)&&t.push(i);return t}function s(e,t){return{}.hasOwnProperty.call(e,t)}function l(e,t){for(var i in e)if(s(e,i)&&!t(i,e[i]))break}function u(e,t){l(e,(function(e,i){return t(e,i),!0}))}function c(e,t,i){n.d(function(e,t){return o(e).sort(t)}(e,i),(function(i){t(i,e[i])}))}function h(e,t){return Object.assign({},e,t)}function p(e){return JSON.parse(JSON.stringify(e))}function d(e,t,i){n.d(i,(function(i){r.d(e[i])&&(t[i]=e[i])}))}function f(e,t,i){n.d(i,(function(i){t[i]=e[i]}))}function m(e,t){d(e,t,o(e))}},function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return h})),i.d(t,"c",(function(){return p}));var n=i(2),r=i(15),a=i(48),o=i(7),s=i(8),l=function(){function e(e,t,i){this._array=e,this._start=t,this._end=i}return e.prototype.iterator=function(){var e=this;return function(t){if(e._start!==e._end)if(e._start<e._end)for(var i=e._start;i<e._end&&t(e._array[i]);++i);else for(i=e._start-1;i>=e._end&&t(e._array[i]);--i);}},e.prototype.backwards=function(){return new e(this._array,this._end,this._start)},e.prototype.range=function(t,i){if(t<=i){if(this._start===this._end)return this;if(this._start<this._end){var n=i-t;return t=Math.max(this._start+t,this._start),i=Math.min(t+n,this._end),new e(this._array,t,i)}n=i-t;return t=Math.max(this._start-t,this._end),i=Math.max(t-n,this._end),new e(this._array,t,i)}throw new Error("Start index must be lower than end index")},e}(),u=(function(e){function t(t,i,n){var r=e.call(this,[t.events.on("inserted",(function(e){var i=e.newValue,n=r._getKey(i),a=0;s.e(t.iterator(),(function(e){return e!==i&&(r._getKey(e)===n&&++a,!0)})),r._insert(i,n,a)}),void 0,!1),t.events.on("removed",(function(e){r._remove(e.oldValue)}),void 0,!1)])||this;return r._keys=[],r._groups={},r._getKey=i,r._sort=n,s.d(t.iterator(),(function(e){r._insert(e,i(e))})),r}Object(n.c)(t,e),t.prototype._insert=function(e,t,i){if(null==this._groups[t]){this._groups[t]=[];var n=o.h(this._keys,this._sort,t),r=n.found,a=n.index;if(r)throw new Error("Key already exists: "+t);o.j(this._keys,a,t)}null==i?this._groups[t].push(e):o.j(this._groups[t],i,e)},t.prototype._remove=function(e){var t=this._getKey(e),i=this._groups[t];if(null!=i&&(o.o(i,e),0===i.length)){delete this._groups[t];var n=o.h(this._keys,this._sort,t),r=n.found,a=n.index;if(!r)throw new Error("Key doesn't exist: "+t);o.p(this._keys,a)}},t.prototype.iterator=function(){var e=this;return s.g(s.k(s.h(this._keys),(function(t){return s.h(e._groups[t])})))}}(r.c),function(e){function t(t,i){void 0===i&&(i=!0);var n=this;if(i){var r=t.events.on("removed",(function(e){e.oldValue.dispose()}),void 0,!1);n=e.call(this,(function(){r.dispose(),s.d(t.iterator(),(function(e){e.dispose()}))}))||this}else n=e.call(this,(function(){s.d(t.iterator(),(function(e){e.dispose()}))}))||this;return n}return Object(n.c)(t,e),t}(r.b));function c(e,t){if(!(e>=0&&e<t))throw new Error("Index out of bounds: "+e)}var h=function(){function e(e){void 0===e&&(e=[]),this.events=new a.a,this._values=e}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),e.prototype.contains=function(e){return-1!==this._values.indexOf(e)},e.prototype.removeValue=function(e){for(var t=0,i=this._values.length;t<i;)this._values[t]===e?(this.removeIndex(t),--i):++t},e.prototype.indexOf=function(e){return o.i(this._values,e)},Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.hasIndex=function(e){return e>=0&&e<this._values.length},e.prototype.getIndex=function(e){return this._values[e]},e.prototype.setIndex=function(e,t){c(e,this._values.length);var i=this._values[e];return i!==t&&(this._values[e]=t,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:e,oldValue:i,newValue:t}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t})),i},e.prototype.insertIndex=function(e,t){c(e,this._values.length+1),o.j(this._values,e,t),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:t})},e.prototype._sortQuicksort=function(e,t,i){if(e<t){var n=this._sortPartition(e,t,i);this._sortQuicksort(e,n,i),this._sortQuicksort(n+1,t,i)}},e.prototype._sortPartition=function(e,t,i){for(var n=this._values,r=n[e],a=e-1,o=t+1;;){do{++a}while(i(n[a],r)<0);do{--o}while(i(n[o],r)>0);if(a>=o)return o;this.swap(a,o)}},e.prototype.sort=function(e){this._sortQuicksort(0,this._values.length-1,e)},e.prototype.swap=function(e,t){var i=this._values.length;if(c(e,i),c(t,i),e!==t){var n=this._values[e],r=this._values[t];this._values[e]=r,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:e,oldValue:n,newValue:r}),this._values[t]=n,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:t,oldValue:r,newValue:n})}},e.prototype.removeIndex=function(e){c(e,this._values.length);var t=this._values[e];return o.p(this._values,e),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:t}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:t}),t},e.prototype.moveValue=function(e,t){var i=this.indexOf(e);if(-1!==i){var n=this._values[i];o.p(this._values,i),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:i,oldValue:n})}null==t?(t=this._values.length,this._values.push(e)):o.j(this._values,t,e),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e}),-1===i&&this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e})},e.prototype.push=function(e){var t=this._values.push(e)-1;return this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:t,newValue:e}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:e}),e},e.prototype.unshift=function(e){this.insertIndex(0,e)},e.prototype.pushAll=function(e){var t=this;o.d(e,(function(e){t.push(e)}))},e.prototype.copyFrom=function(e){this.pushAll(e._values)},e.prototype.pop=function(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)},e.prototype.shift=function(){return this._values.length?this.removeIndex(0):void 0},e.prototype.setAll=function(e){var t=this,i=o.c(this._values);this._values.length=0,o.d(e,(function(e){t._values.push(e)})),this.events.isEnabled("setAll")&&this.events.dispatchImmediately("setAll",{type:"setAll",target:this,oldArray:i,newArray:this._values}),this.events.isEnabled("removed")&&o.d(i,(function(e){t.events.dispatchImmediately("removed",{type:"removed",target:t,oldValue:e})})),this.events.isEnabled("inserted")&&o.d(this._values,(function(e){t.events.dispatchImmediately("inserted",{type:"inserted",target:t,newValue:e})}))},e.prototype.clear=function(){this.setAll([])},e.prototype.iterator=function(){return s.h(this._values)},e.prototype[Symbol.iterator]=function(){var e,t;return Object(n.d)(this,(function(i){switch(i.label){case 0:e=this._values.length,t=0,i.label=1;case 1:return t<e?[4,this._values[t]]:[3,4];case 2:i.sent(),i.label=3;case 3:return++t,[3,1];case 4:return[2]}}))},e.prototype.each=function(e){o.d(this._values,e)},e.prototype.range=function(e,t){if(e<=t){var i=t-e;return e=Math.max(e,0),t=Math.min(e+i,this._values.length),new l(this._values,e,t)}throw new Error("Start index must be lower than end index")},e.prototype.backwards=function(){return new l(this._values,this._values.length,0)},e}(),p=function(e){function t(t){var i=e.call(this)||this;return i.template=t,i}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var t=this;s.d(e.iterator(),(function(e){t.push(e.clone())}))},t.prototype.create=function(e){var t=null!=e?new e:this.template.clone();return this.push(t),t},t.prototype.clone=function(){for(var e=new t(this.template),i=this.values,n=i.length,r=0;r<n;++r)e.push(i[r].clone());return e},t}(h)},function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return l}));var n=i(3),r=i(42),a=i(0),o=function(){function e(e){this._value=e}return Object.defineProperty(e.prototype,"rgb",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hex",{get:function(){return this._value?r.g(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rgba",{get:function(){return this._value?r.i(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return null!=this._value&&null!=this._value.a?this._value.a:1},set:function(e){this._value&&(this._value.a=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightColor",{get:function(){return this._lightColor||(this._lightColor=new e({r:255,g:255,b:255})),this._lightColor},set:function(e){this._lightColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"darkColor",{get:function(){return this._darkColor||(this._darkColor=new e({r:0,g:0,b:0})),this._darkColor},set:function(e){this._darkColor=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.alpha<1?this.rgba:this.hex},e.prototype.lighten=function(t){return new e(r.e(this.rgb,t))},e.prototype.brighten=function(t){return new e(r.a(this.rgb,t))},e.prototype.saturate=function(t){return new e(r.j(this.rgb,t))},Object.defineProperty(e.prototype,"alternative",{get:function(){if(null!=this.rgb)return r.d(this.rgb)?this.darkColor:this.lightColor;throw new Error("Color does not exist")},enumerable:!0,configurable:!0}),e}();function s(e,t){if(!a.d(e))return new o(void 0);if("string"==typeof e){var i="_color_"+e+"_"+(t||"1"),s=n.b.getCache(i);if(s)return new o({r:s.r,g:s.g,b:s.b,a:s.a});var l=r.f(e,t);return n.b.setCache(i,l),new o(l)}return e instanceof o?(a.d(t)&&(e.alpha=t),e):new o(e)}function l(e){return a.d(e)&&!function(e){return e instanceof o}(e)?function(e){return s(e)}(e):e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"d",(function(){return p})),i.d(t,"c",(function(){return d})),i.d(t,"f",(function(){return f})),i.d(t,"n",(function(){return m})),i.d(t,"e",(function(){return y})),i.d(t,"s",(function(){return v})),i.d(t,"t",(function(){return g})),i.d(t,"m",(function(){return _})),i.d(t,"g",(function(){return b})),i.d(t,"h",(function(){return x})),i.d(t,"p",(function(){return w})),i.d(t,"o",(function(){return k})),i.d(t,"i",(function(){return P})),i.d(t,"l",(function(){return S})),i.d(t,"b",(function(){return T})),i.d(t,"r",(function(){return O})),i.d(t,"j",(function(){return I})),i.d(t,"k",(function(){return E})),i.d(t,"q",(function(){return A}));var n,r=i(2),a=i(15),o=i(47),s=i(23),l=i(11),u=i(7),c=i(0),h="http://www.w3.org/2000/svg",p="http://www.w3.org/2000/xmlns/",d="http://www.w3.org/1999/xlink";function f(e,t,i,n){return e.addEventListener(t,i,n||!1),new a.b((function(){e.removeEventListener(t,i,n||!1)}))}function m(e){if(c.j(e)){var t=document.getElementById(e);if(null==t&&(t=document.getElementsByClassName(e)[0]),t instanceof HTMLElement)return t}else if(e instanceof HTMLElement)return e}function y(e,t){if(e)if(e.classList){var i=t.split(" ");u.d(i,(function(t){e.classList.add(t)}))}else{var n=e.getAttribute("class");n?e.setAttribute("class",n.split(" ").filter((function(e){return e!==t})).join(" ")+" "+t):e.setAttribute("class",t)}}function v(e,t){if(e)if(e.classList)e.classList.remove(t);else{var i=e.getAttribute("class");i&&e.setAttribute("class",i.split(" ").filter((function(e){return e!==t})).join(" "))}}function g(e,t,i){e.style[t]=i}function _(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)}function b(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{var e=document.createElement("button");e.style.position="fixed",e.style.top="0px",e.style.left="-10000px",document.body.appendChild(e),e.focus(),e.blur(),document.body.removeChild(e)}}function x(e,t){for(var i=t;;){if(e===i)return!0;if(null==i.parentNode){if(null==i.host)return!1;i=i.host}else i=i.parentNode}}function w(e){for(var t=e;;){if(null==t.parentNode)return null!=t.host?t:null;t=t.parentNode}}function k(e){for(var t=e.ownerDocument,i=e;;){if(null==i.parentNode)return i===t||null!=i.host?i:null;i=i.parentNode}}function P(e){return"function"===typeof e.composedPath?e.composedPath()[0]:e.target}function S(e){Object(o.c)((function(){try{var t=e.getBoundingClientRect(),i=t.left-Math.round(t.left),n=t.top-Math.round(t.top);0!==i&&Object(o.f)((function(){e.style.left=i+"px"})),0!==n&&Object(o.f)((function(){e.style.top=n+"px"}))}catch(r){}}))}var T=function(e){function t(t,i,r){var a=this,o=function(e){if(null==e)return c.d(n)||((t=document.createElement("style")).type="text/css",""!=s.a.nonce&&t.setAttribute("nonce",s.a.nonce),document.head.appendChild(t),n=t.sheet),n;var t;return(t=document.createElement("style")).type="text/css",""!=s.a.nonce&&t.setAttribute("nonce",s.a.nonce),e.appendChild(t),t.sheet}(t);return(a=e.call(this,(function(){var e=u.i(o.cssRules,a._rule);if(-1===e)throw new Error("Could not dispose StyleRule");o.deleteRule(e)}))||this)._rule=function(e,t){var i=e.cssRules.length;return e.insertRule(t+"{}",i),e.cssRules[i]}(o,i),l.d(r,(function(e,t){a.setStyle(e,t)})),a}return Object(r.c)(t,e),Object.defineProperty(t.prototype,"selector",{get:function(){return this._rule.selectorText},set:function(e){this._rule.selectorText=e},enumerable:!0,configurable:!0}),t.prototype._setVendorPrefixName=function(e,t){var i=this._rule.style;i.setProperty("-webkit-"+e,t,""),i.setProperty("-moz-"+e,t,""),i.setProperty("-ms-"+e,t,""),i.setProperty("-o-"+e,t,""),i.setProperty(e,t,"")},t.prototype.setStyle=function(e,t){"transition"===e?this._setVendorPrefixName(e,t):this._rule.style.setProperty(e,t,"")},t}(a.b),C=0;!function(e){function t(t,i,n){var r=this,a=c.d(n)?n:"__style_"+ ++C+"__";return(r=e.call(this,t,"."+a,i)||this)._className=a,r}Object(r.c)(t,e),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},set:function(e){this._className=e,this.selector="."+e},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this._className}}(T);function O(e){if("loading"!==document.readyState)e();else{document.addEventListener("readystatechange",(function t(){"loading"!==document.readyState&&(document.removeEventListener("readystatechange",t),e())}))}}function I(e){var t=_(e,"font-family");if(t)return t;var i=e.parentElement||e.parentNode;return i?I(i):void 0}function E(e){var t=_(e,"font-size");if(t)return t;var i=e.parentElement||e.parentNode;return i?E(i):void 0}function A(e,t){var i=e.getBoundingClientRect(),n=c.e(t)?t:t?[t]:[];if(n.length){for(var r=0;r<n.length;r++){var a=n[r];if(!A(a))return!1;var o=a.getBoundingClientRect();if(i.top>=0&&i.left>=0&&i.top<=o.top+o.height&&i.left<=o.left+o.width)return!0}return!1}return i.top>=0&&i.left>=0&&i.top<=(window.innerHeight||document.documentElement.clientHeight)&&i.left<=(window.innerWidth||document.documentElement.clientWidth)}},function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"a",(function(){return u}));var n=i(2),r=i(7),a=i(0),o=function(){function e(e){this._disposed=!1,this._dispose=e}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._dispose())},e}(),s=function(e){function t(t){return e.call(this,(function(){r.d(t,(function(e){e.dispose()}))}))||this}return Object(n.c)(t,e),t}(o),l=function(e){function t(){var t=e.call(this,(function(){a.d(t._disposer)&&(t._disposer.dispose(),t._disposer=void 0)}))||this;return t}return Object(n.c)(t,e),t.prototype.get=function(){return this._value},t.prototype.set=function(e,t){a.d(this._disposer)&&this._disposer.dispose(),this._disposer=t,this._value=e},t.prototype.reset=function(){this.set(void 0,void 0)},t}(o),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._counter=0,t}return Object(n.c)(t,e),t.prototype.increment=function(){var e=this;return++this._counter,new o((function(){--e._counter,0===e._counter&&e.dispose()}))},t}(o)},function(e,t,i){"use strict";i.d(t,"b",(function(){return R})),i.d(t,"a",(function(){return z}));var n=i(2),r=i(95),a=i(114),o=i(26),s=i(32),l=i(24),u=i(12),c=i(15),h=i(37),p=i(58),d=i(18),f=i(73),m=i(44),y=i(66),v=i(13),g=i(22),_=i(36),b=i(23),x=i(3),w=i(102),k=i(74),P=i(103),S=i(54),T=i(53),C=i(134),O=i(6),I=i(1),E=i(28),A=i(7),M=i(11),D=i(0),j=i(8),F=i(25),L=i(9),R=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin"],z=function(e){function t(){var t=e.call(this)||this;return t.properties={},t._eventDispatcher=new a.a(t),t._bindings={},t._isTemplate=!1,t._isPath=!1,t._inited=!1,t._ready=!1,t.isHiding=!1,t._isHidden=!1,t.isShowing=!1,t.isStandaloneInstance=!1,t._isActive=!1,t._mask=new c.d,t._positionPrecision=3,t._language=new c.d,t._exporting=new c.d,t._exportable=!0,t._bbox={x:0,y:0,width:0,height:0},t.invalid=!1,t.positionInvalid=!1,t.propertyFields={},t.applyOnClones=!1,t._measuredWidthSelf=0,t._measuredHeightSelf=0,t.maxLeft=0,t.maxRight=0,t.maxTop=0,t.maxBottom=0,t.maxLeftSelf=0,t.maxRightSelf=0,t.maxTopSelf=0,t.maxBottomSelf=0,t._isDragged=!1,t._isResized=!1,t._disabled=!1,t._internalDisabled=!1,t._updateDisabled=!1,t._internalDefaultsApplied=!1,t.rollOutDelay=0,t.isBaseSprite=!1,t.shouldClone=!0,t.appeared=!1,t.ex=0,t.ey=0,t.dragWhileResize=!1,t.measureFailed=!1,t.preventShow=!1,t.cloneTooltip=!0,t.className="Sprite",t._disposers.push(t._eventDispatcher),O.R(t.uid),t.group=t.paper.addGroup("g"),t.setPropertyValue("scale",1),t.setPropertyValue("rotation",0),t.setPropertyValue("align","none"),t.setPropertyValue("valign","none"),t.setPropertyValue("pixelPerfect",!1),t.setPropertyValue("visible",!0),t.setPropertyValue("tooltipPosition","fixed"),t.setPropertyValue("verticalCenter","none"),t.setPropertyValue("horizontalCenter","none"),t.setPropertyValue("tooltipX",Object(L.c)(50)),t.setPropertyValue("tooltipX",Object(L.c)(50)),t.setPropertyValue("marginTop",0),t.setPropertyValue("marginBottom",0),t.setPropertyValue("marginLeft",0),t.setPropertyValue("marginRight",0),t.setPropertyValue("dx",0),t.setPropertyValue("dy",0),t.setPropertyValue("paddingTop",0),t.setPropertyValue("paddingBottom",0),t.setPropertyValue("paddingRight",0),t.setPropertyValue("paddingLeft",0),t.setPropertyValue("togglable",!1),t.setPropertyValue("hidden",!1),t.setPropertyValue("urlTarget","_self"),t.setPropertyValue("alwaysShowTooltip",!1),t.setPropertyValue("showTooltipOn","hover"),t._prevMeasuredWidth=0,t._prevMeasuredHeight=0,t._measuredWidth=0,t._measuredHeight=0,t._isMeasured=!0,t.invalidate(),t.applyTheme(),t._disposers.push(t.events),t._disposers.push(t.group),t._disposers.push(t._mask),t._disposers.push(t._language),t._disposers.push(t._exporting),t._disposers.push(new c.b((function(){M.d(t._bindings,(function(e,t){t.dispose()}))}))),t.setPropertyValue("interactionsEnabled",!0),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new s.a(this)),this._adapterO},enumerable:!0,configurable:!0}),t.prototype.applyTheme=function(){e.prototype.applyTheme.call(this),b.a.autoSetClassName&&this.setClassName()},t.prototype.getCurrentThemes=function(){var e=this._themes;if(e)return e;var t=this._parent;return t?t.getCurrentThemes():x.b.themes},t.prototype.applyInternalDefaults=function(){this._internalDefaultsApplied=!0},t.prototype.invalidate=function(){this.disabled||this._isTemplate||this.__disabled||this.invalid||(this.invalid=!0,x.b.addToInvalidSprites(this),F.a.requestFrame())},t.prototype.validate=function(){this.dispatchImmediately("beforevalidated"),this._internalDefaultsApplied||this.applyInternalDefaults(),this.beforeDraw(),this.draw(),this.invalid=!1,x.b.removeFromInvalidSprites(this),this.afterDraw()},t.prototype.invalidatePosition=function(){this.disabled||this._isTemplate||this.positionInvalid||(this.positionInvalid=!0,x.b.addToInvalidPositions(this),F.a.requestFrame())},t.prototype.validatePosition=function(){var e=this.pixelX,t=this.pixelY,i=this.dx,n=this.dy,r=e+i,a=t+n;this._updateDisabled&&(this._internalDisabled?this.group.attr({display:"none"}):this.disabled||this.removeSVGAttribute("display"),this._updateDisabled=!1);var o=this.measure(),s=this.group.transformString;this.group.moveTo({x:r,y:a}),this.group.rotation=this.rotation,this.nonScaling?this.group.scale=this.scale/this.globalScale:this.group.scale=this.scale,(s!=this.group.transformString||o)&&(null==s?this.dispatch("transformed"):this.dispatchImmediately("transformed"),this.dispatch("positionchanged"),"hit"!=this.showTooltipOn&&"always"!=this.showTooltipOn||this.updateTooltipPosition()),e+i==r&&t+n==a&&(x.b.removeFromInvalidPositions(this),this.positionInvalid=!1);var l=this._maskRectangle;l&&this._clipElement.moveTo({x:l.x-e,y:l.y-t})},t.prototype.beforeDraw=function(){},t.prototype.draw=function(){},t.prototype.afterDraw=function(){var e,t;if((this.isMeasured||"none"!==this.horizontalCenter||"none"!==this.verticalCenter)&&this.measureElement(),this._inited)this.dispatch("validated");else{if(this._adapterO)try{for(var i=Object(n.g)(this._adapterO.keys()),r=i.next();!r.done;r=i.next()){var a=r.value;switch(a){case"mask":case"fill":case"opacity":case"fillOpacity":case"stroke":case"strokeOpacity":case"strokeWidth":case"shapeRendering":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"textDecoration":case"fontSize":case"fontFamily":case"fontWeight":this[a]=this[a]}}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this.applyFilters(),this.visible=this.visible,this.interactionsEnabled=this.getPropertyValue("interactionsEnabled"),this._inited=!0,this.showOnInit||(this.appeared=!0),this.hidden&&this.hide(0),this.applyMask(),this.dispatch("validated"),this.dispatch("inited"),this.dispatchReady()}"always"==this.showTooltipOn&&(!this.visible||this.disabled||this.__disabled?this.hideTooltip(0):this.showTooltip())},t.prototype.dispatchReady=function(){this.isReady()||(this._ready=!0,this.dispatch("ready"))},t.prototype.reinit=function(){this._inited=!1,this.setState(this.defaultState),this.invalidate()},t.prototype.handleGlobalScale=function(){this.dispatch("globalscalechanged"),this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth),this.nonScaling&&this.validatePosition(),this.updateFilterScale()},t.prototype.updateFilterScale=function(){var e=this;j.d(this.filters.iterator(),(function(t){t.scale=e.globalScale}))},t.prototype.removeFromInvalids=function(){x.b.removeFromInvalidSprites(this),x.b.removeFromInvalidPositions(this)},t.prototype.copyFrom=function(t){var i=this;e.prototype.copyFrom.call(this,t),this.isMeasured=t.isMeasured,this.states.copyFrom(t.states),t.filters.length>0&&t.filters.each((function(e){i.filters.push(e.clone())})),t._adapterO&&this.adapter.copyFrom(t._adapterO),t._interaction&&this.interactions.copyFrom(t.interactions),t._plugins&&this.plugins.copyFrom(t.plugins),this.configField=t.configField,this.applyOnClones=t.applyOnClones,this.disabled=t.disabled,this.virtualParent=t.virtualParent,this.exportable=t.exportable,t._tooltip&&(this._tooltip?this._tooltip.copyFrom(t.tooltip):t.cloneTooltip?this.tooltip=t.tooltip.clone():this._tooltip=t.tooltip),this._showSystemTooltip=t.showSystemTooltip,O.f(t.propertyFields,this.propertyFields),O.f(t.properties,this),t.fillModifier&&(this.fillModifier=t.fillModifier.clone()),t.strokeModifier&&(this.strokeModifier=t.strokeModifier.clone())},t.prototype.dispose=function(){if(!this.isDisposed()){if("always"==this.showTooltipOn&&this.tooltip&&this.tooltip.hide(),this.dispatchImmediately("beforedisposed"),this.isBaseSprite){if(this.htmlContainer)for(;this.htmlContainer.childNodes.length>0;)this.htmlContainer.removeChild(this.htmlContainer.firstChild);this.isBaseSprite=!1}if(e.prototype.dispose.call(this),this._adapterO&&this._adapterO.clear(),this.applyOnClones&&this._clones)for(var t=this._clones.length-1;t>=0;t--){this._clones.getIndex(t).dispose()}this._svgContainer&&this._svgContainer.dispose(),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0),this._urlDisposer&&this._urlDisposer.dispose(),this.removeFromInvalids(),this.element&&this.element.dispose(),this.group&&this.group.dispose(),this._numberFormatter&&this._numberFormatter.dispose(),this._focusFilter&&this._focusFilter.dispose();var i=this.stroke;!i||i instanceof v.a||!i.dispose||this.clonedFrom&&this.clonedFrom.stroke==i||i.dispose();var n=this.fill;if(!n||n instanceof v.a||!n.dispose||this.clonedFrom&&this.clonedFrom.fill==n||n.dispose(),D.d(this.id)&&this.map.removeKey(this.id),this.parent=void 0,this._filters)for(;this._filters.length>0;){var r=this._filters.getIndex(0);r.dispose(),this._filters.removeValue(r)}this._alwaysShowDisposers=void 0}},Object.defineProperty(t.prototype,"isTemplate",{get:function(){return this._isTemplate},set:function(e){e=D.k(e),this._isTemplate!=e&&(this._isTemplate=e,this instanceof d.a&&j.d(this.children.iterator(),(function(t){t.isTemplate=e})),e?(this.parent=this._parent,this.removeFromInvalids()):this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showSystemTooltip",{get:function(){return D.d(this._showSystemTooltip)?this._showSystemTooltip:this.virtualParent?this.virtualParent.showSystemTooltip:!!this._parent&&this._parent.showSystemTooltip},set:function(e){e=D.k(e),this._showSystemTooltip!=e&&(this._showSystemTooltip=e,this.applyAccessibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topParent",{get:function(){return this._topParent?this._topParent:this._parent?this._parent.topParent:void 0},set:function(e){this._topParent=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(e){if(!this._isTemplate){O.R(this.paper);var t=this._parent;t!=e&&(t&&t.children.removeValue(this),this._parent=e,e?(this.topParent=e.topParent,e.isTemplate&&(this.isTemplate=!0),this.baseId=e.baseId,e.children.push(this),this._tooltip&&!this._tooltipContainer&&(this._tooltip.parent=e.tooltipContainer),this._dataItem||(this.dataItem=e.dataItem),this.handleAlwaysShowTooltip(),this.dataItem&&this.applyAccessibility(),this.dispatchImmediately("parentset")):this.topParent=void 0)}},enumerable:!0,configurable:!0}),t.prototype.handleAlwaysShow=function(){this.showTooltip()},t.prototype.handleAlwaysShowTooltip=function(){var e=this,t=this._alwaysShowDisposers;if(t&&A.d(t,(function(e){e.dispose()})),this._alwaysShowDisposers=[],"always"==this.showTooltipOn)for(;void 0!=e;){var i=e.events.on("visibilitychanged",this.handleAlwaysShow,this,!1);this.addDisposer(i),this._alwaysShowDisposers.push(i),e=e.parent}},Object.defineProperty(t.prototype,"virtualParent",{get:function(){return this._virtualParent},set:function(e){this._virtualParent=e,this.dataItem&&this.applyAccessibility()},enumerable:!0,configurable:!0}),t.prototype.appendDefs=function(){this.filterElement&&this.paper.appendDef(this.filterElement);var e=this.fill;e&&e.element&&this.paper.appendDef(e.element);var t=this.stroke;if(t&&t.element&&this.paper.appendDef(t.element),this.fillModifier&&this.fill instanceof v.a){var i=this.fillModifier.modify(this.fill);i&&i.element&&this.paper.appendDef(i.element)}if(this.strokeModifier&&this.stroke instanceof v.a){var n=this.strokeModifier.modify(this.stroke);n&&n.element&&this.paper.appendDef(n.element)}this._clipPath&&this.paper.appendDef(this._clipPath),!1===this._exportable&&(this.exportable=!1)},Object.defineProperty(t.prototype,"map",{get:function(){var e=this.topParent;return e?e.map:(this._map||(this._map=new l.a),this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delayedMap",{get:function(){var e=this.topParent;return e?e.delayedMap:(this._delayedMap||(this._delayedMap=new l.a),this._delayedMap)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){if(this._id!=e){if(this._id=e,this.map.hasKey(e))throw Error("Duplicate id ("+e+") used on multiple objects.");this.map.setKey(e,this),b.a.autoSetClassName&&this.setClassName()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dom",{get:function(){return this.group.node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paper",{get:function(){if(this._paper)return this._paper;var e=this._parent;return e?e.paper:Object(p.b)()},set:function(e){this.setPaper(e)},enumerable:!0,configurable:!0}),t.prototype.setPaper=function(e){return this._paper!=e&&(this._paper=e,this.appendDefs(),!0)},Object.defineProperty(t.prototype,"htmlContainer",{get:function(){if(this._htmlContainer)return this._htmlContainer;var e=this._parent;return e?e.htmlContainer:void 0},set:function(e){this._htmlContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleElement",{get:function(){return this._titleElement||(this._titleElement=this.paper.add("title"),this.group.add(this._titleElement)),this._titleElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptionElement",{get:function(){return this._descriptionElement||(this._descriptionElement=this.paper.add("desc"),this.group.add(this._descriptionElement)),this._descriptionElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters||(this._filters=new u.a,this._disposers.push(this._filters.events.onAll(this.applyFilters,this)),this._disposers.push(new u.b(this._filters))),this._filters},enumerable:!0,configurable:!0}),t.prototype.setSVGAttributes=function(){this.fill=this.fill,this.opacity=this.opacity,this.fillOpacity=this.fillOpacity,this.stroke=this.stroke,this.strokeOpacity=this.strokeOpacity,this.shapeRendering=this.shapeRendering,this.strokeDasharray=this.strokeDasharray,this.strokeDashoffset=this.strokeDashoffset,this.strokeLinecap=this.strokeLinecap,this.strokeLinejoin=this.strokeLinejoin,this.focusable=this.focusable,this.tabindex=this.tabindex,this.role=this.role},t.prototype.setSVGAttribute=function(e){this.group.attr(e)},t.prototype.removeSVGAttribute=function(e){this.group.removeAttr(e)},t.prototype.setClassName=function(){var e=this.className,t=b.a.classNamePrefix;this.element&&this.element.addClass(t+e),this.group.addClass(t+e+"-group"),D.d(this.id)&&this.group.addClass(t+this.id),this.userClassName&&this.group.addClass(this.userClassName)},t.prototype.uidAttr=function(){return this.setSVGAttribute({id:this.uid}),this.uid},t.prototype.updateClipPath=function(){var e=this._clipElement;e&&e.moveTo({x:this.mask.pixelX,y:this.mask.pixelY})},t.prototype.createClipPath=function(){if(!this._clipPath){this._clipPath=this.paper.addGroup("clipPath"),this.paper.appendDef(this._clipPath),this._disposers.push(this._clipPath);var e=x.b.getUniqueId();this._clipPath.attr({id:e}),this.group.attr({"clip-path":'url("'+O.n()+e+'")'})}},t.prototype.applyMask=function(){var e=this.mask;if(this._clipPath&&e)if(e instanceof d.a){this._clipElement.attr({width:I.B(0,e.pixelWidth),height:I.B(0,e.pixelHeight)});var t=O.I({x:e.pixelX,y:e.pixelY},e.parent,this);this._clipPath.x=t.x,this._clipPath.y=t.y}else e.element&&e.element!=this._clipElement&&(this._clipElement=e.element,this._clipPath.add(this._clipElement)),this._clipPath.scale=e.scale,this._clipPath.x=e.pixelX,this._clipPath.y=e.pixelY,this._clipPath.rotation=e.rotation},t.prototype.applyFilters=function(){var e=this;if(this._filters&&this._filters.length>0){var t=100,i=100;this.filterElement?this.filterElement.removeChildNodes():(this.filterElement=this.paper.addGroup("filter"),this._disposers.push(this.filterElement)),this.paper.appendDef(this.filterElement);var n="filter-"+this.uid;this.filterElement.attr({id:n}),j.d(this.filters.iterator(),(function(n){n.sprite=e,n.paper=e.paper,e.filterElement.attr({filterUnits:n.filterUnits}),n.appendPrimitives(e.filterElement),n.width>t&&(t=n.width),n.height>i&&(i=n.height),n.scale=e.globalScale}));var r=t+"%",a=i+"%";this.filterElement.attr({width:r,height:a,x:-(t-100)/2+"%",y:-(i-100)/2+"%"}),this.group.attr({filter:'url("'+O.n()+n+'")'})}else this.filterElement&&(this.group.removeAttr("filter"),this.filterElement.removeChildNodes())},t.prototype.removeClipPath=function(){this._clipPath&&(this.removeDispose(this._clipPath),this._clipPath=void 0)},t.prototype.setElement=function(e){this.element=e,this.setSVGAttributes(),this.applyAccessibility()},Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(e){this.removeElement(),this._element=e,this.group.add(e),e.node instanceof SVGPathElement&&(this._isPath=!0),this.invalid||this.validate(),b.a.autoSetClassName&&this.setClassName()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"svgContainer",{get:function(){return this._svgContainer?this._svgContainer:this._parent?this._parent.svgContainer:void 0},set:function(e){this._svgContainer=e},enumerable:!0,configurable:!0}),t.prototype.measureElement=function(){if(this.element)if(this.definedBBox)this._bbox=this.definedBBox;else{var e=this.element.getBBox();this._bbox={x:e.x,y:e.y,width:e.width,height:e.height}}},t.prototype.updateCenter=function(){if(this.element){var e=this.element.transformString,t=this.bbox,i=0,n=0,r=t.x,a=t.y,o=t.width,s=t.height,l=this.pixelPaddingLeft,u=this.pixelPaddingRight,c=this.pixelPaddingTop,h=this.pixelPaddingBottom,p=I.B(o+l+u,this.pixelWidth),d=I.B(s+c+h,this.pixelHeight),f=t.x,m=t.x+p,y=t.y,v=t.y+d,g=this.horizontalCenter,_=this.verticalCenter;switch(g){case"none":i=r+l;break;case"left":i=l;break;case"middle":i=l-(o+u+l)/2;break;case"right":i=-u-o}switch(_){case"none":n=a+c;break;case"top":n=c;break;case"middle":n=c-(s+h+c)/2;break;case"bottom":n=-h-s}this._measuredHeight=d,this._measuredWidth=p;var x=I.E(i-r,this._positionPrecision,!0),w=I.E(n-a,this._positionPrecision,!0);this.ex=x-l,this.ey=w-c,this.maxLeft=f+x-l,this.maxRight=m+x-l,this.maxTop=y+w-c,this.maxBottom=v+w-c,this.pixelPerfect&&0==b.a.pixelPerfectPrecision&&(x-=.5,w-=.5),this.element.moveTo({x:x,y:w}),e!=this.element.transformString&&this.dispatchImmediately("transformed")}},t.prototype.measure=function(){this.updateCenter();var e=this._measuredWidth,t=this._measuredHeight,i=this.maxLeft,n=this.maxRight,r=this.maxTop,a=this.maxBottom;this._measuredWidthSelf=e,this._measuredHeightSelf=t;var o=this._positionPrecision;if(this.maxLeftSelf=this.maxLeft,this.maxRightSelf=this.maxRight,this.maxTopSelf=this.maxTop,this.maxBottomSelf=this.maxBottom,0!==this.rotation||1!==this.scale||this.nonScaling){this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth);var s=this.paper.svg,l=s.createSVGMatrix(),u=this.rotation,c=this.scale;this.nonScaling&&(c=this.scale/this.globalScale),l.a=I.g(u)*c,l.c=-I.F(u)*c,l.e=0,l.b=I.F(u)*c,l.d=I.g(u)*c,l.f=0;var h=s.createSVGPoint();h.x=i,h.y=r;var p=s.createSVGPoint();p.x=n,p.y=r;var d=s.createSVGPoint();d.x=n,d.y=a;var f=s.createSVGPoint();f.x=i,f.y=a;var m=h.matrixTransform(l),y=p.matrixTransform(l),v=d.matrixTransform(l),g=f.matrixTransform(l);i=Math.min(m.x,y.x,v.x,g.x),n=Math.max(m.x,y.x,v.x,g.x),r=Math.min(m.y,y.y,v.y,g.y),e=n-i,t=(a=Math.max(m.y,y.y,v.y,g.y))-r,this.maxLeft=I.E(i,o,!0),this.maxRight=I.E(n,o,!0),this.maxTop=I.E(r,o,!0),this.maxBottom=I.E(a,o,!0)}return this._measuredWidth=I.E(e,o,!0),this._measuredHeight=I.E(t,o,!0),(this._measuredWidth!=this._prevMeasuredWidth||this._measuredHeight!=this._prevMeasuredHeight)&&(this._prevMeasuredHeight=this._measuredHeight,this._prevMeasuredWidth=this._measuredWidth,this.dispatch("sizechanged"),(this.isHover||"hit"==this.showTooltipOn||"always"==this.showTooltipOn)&&this.tooltip&&this.tooltip.visible&&(D.d(this.tooltipText)||D.d(this.tooltipHTML))&&this.updateTooltipPosition(),!0)},t.prototype.insertBefore=function(e){var t=this._parent;if(t){var i=t.children.indexOf(e);-1!==i&&(t.children.moveValue(this,i),t.sortChildren())}return this},t.prototype.insertAfter=function(e){var t=this._parent;if(t){var i=t.children.indexOf(e);-1!==i&&(t.children.moveValue(this,i+1),t.sortChildren())}return this},t.prototype.removeElement=function(){this._element&&(this.removeDispose(this._element),this._element=void 0)},t.prototype.getRelativeX=function(e){return e instanceof L.a?e.value:this._parent?e/this._parent.innerWidth:0},t.prototype.getRelativeY=function(e){return e instanceof L.a?e.value:this._parent?e/this._parent.innerHeight:0},t.prototype.getPixelX=function(e){var t=0;if(D.h(e))t=e;else if(e instanceof L.a){var i=e.value;this._parent&&(t=I.E(this._parent.innerWidth*i,this._positionPrecision,!0))}return t},t.prototype.getPixelY=function(e){var t=0;if(D.h(e))t=e;else if(e instanceof L.a){var i=e.value;this._parent&&(t=I.E(this._parent.innerHeight*i,this._positionPrecision,!0))}return t},t.prototype.moveTo=function(e,t,i,n){this.isDragged&&!n||(e&&(D.h(e.x)&&this.setPropertyValue("x",I.E(e.x,this._positionPrecision,!0)),D.h(e.y)&&this.setPropertyValue("y",I.E(e.y,this._positionPrecision,!0))),D.h(t)&&(this.rotation=t),D.h(i)&&(this.scale=i),this.invalidatePosition())},Object.defineProperty(t.prototype,"mask",{get:function(){return this._adapterO?this._adapterO.apply("mask",this._mask.get()):this._mask.get()},set:function(e){var t=this;this._mask.get()!==e&&(e?(this.createClipPath(),e instanceof d.a?this._clipElement=this.paper.add("rect"):(e.isMeasured=!1,e.element&&(this._clipElement=e.element)),this._clipElement&&this._clipPath.add(this._clipElement),this._mask.set(e,new c.c([e.events.on("maxsizechanged",(function(){t.inited&&t.applyMask()}),void 0,!1),e.events.on("validated",this.applyMask,this,!1),e.events.on("positionchanged",this.applyMask,this,!1)])),this.applyMask()):(this._mask.reset(),this.group.removeAttr("clip-path"),this.removeClipPath()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskRectangle",{get:function(){return this._maskRectangle},set:function(e){e?(this.createClipPath(),this._clipElement||(this._clipElement=this.paper.add("rect"),this._clipPath.add(this._clipElement)),this._clipElement.attr({width:e.width,height:e.height})):(this.removeClipPath(),this._clipElement=void 0),this._maskRectangle=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMeasured",{get:function(){return this._isMeasured},set:function(e){(e=D.k(e))||(this._measuredWidth=0,this._measuredHeight=0),this._isMeasured!=e&&(this._isMeasured=e,this.invalidatePosition())},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(e){this.invalid&&this.validate(),e.invalid&&e.validate();var t=this.pixelX+this.maxLeft,i=this.pixelY+this.maxTop,n=t+this.maxRight,r=i+this.maxBottom,a=e.pixelX+e.maxLeft,o=e.pixelY+e.maxTop,s=a+e.maxRight,l=o+e.maxBottom;return!(a>n||s<t||o>r||l<i)},Object.defineProperty(t.prototype,"inited",{get:function(){return this._inited},enumerable:!0,configurable:!0}),t.prototype.isReady=function(){return this._ready},Object.defineProperty(t.prototype,"states",{get:function(){if(!this._states){var e=new r.a;this._states=new l.c(e),this._disposers.push(this._states.events.on("insertKey",this.processState,this,!1)),this._disposers.push(this._states.events.on("setKey",this.processState,this,!1)),this._disposers.push(new l.b(this._states)),this._disposers.push(e)}return this._states},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hiddenState",{get:function(){if(!this.states.getKey("hidden")){var e=this.states.create("hidden");e.properties.opacity=0,e.properties.visible=!1}return this.states.getKey("hidden")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultState",{get:function(){this.states.getKey("default")||(this.states.create("default").properties.opacity=1);return this.states.getKey("default")},enumerable:!0,configurable:!0}),t.prototype.processState=function(e){var t=e.newValue;if(t.sprite=this,t.name=e.key,(this.states.hasKey("hover")||"hover"==this.showTooltipOn&&(D.d(this.tooltipHTML)||D.d(this.tooltipText)))&&(this.hoverable=!0),(this.states.hasKey("down")||"hover"==this.showTooltipOn&&(D.d(this.tooltipHTML)||D.d(this.tooltipText)))&&(this.clickable=!0),this.states.hasKey("focus")&&(this.focusable=!0),this.applyOnClones)for(var i=this.clones.values,n=i.length,r=0;r<n;++r){var a=i[r];a.isDisposed()||a.states.setKey(t.name,t)}},Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new h.b(this._animations))),this._animations},enumerable:!0,configurable:!0}),t.prototype.getSvgPoint=function(e){try{var t=this.htmlContainer.getBoundingClientRect();return{x:e.x-t.left,y:e.y-t.top}}catch(i){return e}},t.prototype.animate=function(e,t,i){return new h.a(this,e,t,i).start()},t.prototype.setState=function(e,t,i){var n;if(e instanceof r.a)this.states.setKey(e.name,e),n=e;else if(!(n=this.states.getKey(e)))return;if("hover"==n.name){if(this.isHidden)return;this.isHover=!0}return"hidden"==n.name?this.isHiding=!0:this.visible||this.setVisibility(n.properties.visible||this.defaultState.properties.visible),"active"==n.name&&(this.isActive=!0),D.h(t)||(t=n.transitionDuration),D.d(i)||(i=n.transitionEasing),this.transitTo(n,t,i)},t.prototype.applyCurrentState=function(e){var t=this.setState(this.defaultState,e);return this.isHover&&(t=this.setState("hover",e)),this.isDown&&this.interactions.downPointers.length&&(t=this.setState("down",e)),this.isFocused=this.isFocused,this.isActive&&(t=this.setState("active",e),this.isHover&&this.states.hasKey("hoverActive")&&(t=this.setState("hoverActive",e))),t},t.prototype.transitTo=function(e,t,i){var n,r=this,a=[],o=e.allValues;if(M.d(o,(function(e,t){var i=r[e];if(t!=i&&void 0==r.defaultState.properties[e]&&(r.defaultState.properties[e]=i),"__unset"!=t){var n={from:i,to:t,property:e};a.push(n)}})),a.length>0&&((n=this.animate(a,t,i))&&!n.isFinished()?this._disposers.push(n.events.on("animationended",(function(){r.dispatchImmediately("transitionended")}))):this.dispatchImmediately("transitionended")),e.filters.length>0){var s=[];j.d(e.filters.iterator(),(function(e){var n=e.clone();s.push(n);var a=[];j.d(r.filters.iterator(),(function(e){e.className==n.className&&(j.c(r.defaultState.filters.iterator(),(function(e){return e.className===n.className}))||r.defaultState.filters.push(e),M.d(n.properties,(function(t,i){var n=e.properties[t];n!=i&&a.push({property:t,from:n,to:i})})))})),n.animate(a,t,i)})),this.filters.clear(),this.filters.pushAll(s)}return n},t.prototype.isInTransition=function(){return this.animations.length>0},Object.defineProperty(t.prototype,"isHover",{get:function(){return!!this.isInteractive()&&this.interactions.isHover},set:function(e){(e=D.k(e))!==this.isHover&&this.isInteractive()&&(this.interactions.isHover=e,e?this.handleOver():(this.interactions.isRealHover=!1,this.handleOut()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDragged",{get:function(){return this._isDragged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isResized",{get:function(){return this._isResized},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDown",{get:function(){return!!this.isInteractive()&&this.interactions.isDown},set:function(e){e=D.k(e),this.isInteractive()&&this.isDown!=e&&(this.interactions.isDown=e,e?this.handleDown():this.handleUp())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFocused",{get:function(){return!!this.isInteractive()&&this.interactions.isFocused},set:function(e){e=D.k(e),this.focusable&&this.isFocused!=e&&this.isInteractive()&&(this.interactions.isFocused=e,!0===e?this.handleFocus():this.handleBlur())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this.setActive(e)},enumerable:!0,configurable:!0}),t.prototype.setActive=function(e){e=D.k(e),this._isActive!==e&&(this._isActive=e,e&&this.states.hasKey("active")?(this.setState("active"),this.isHover&&this.states.hasKey("hoverActive")&&this.setState("hoverActive")):this.applyCurrentState(),this.dispatchImmediately("toggled"))},Object.defineProperty(t.prototype,"disabled",{get:function(){var e=this.getPropertyValue("disabled");return D.d(e)?e:this.virtualParent?this.virtualParent.disabled:!!this._parent&&this._parent.disabled},set:function(e){this.setDisabled(e)},enumerable:!0,configurable:!0}),t.prototype.setDisabled=function(e){if(e=D.k(e),this.getPropertyValue("disabled")!=e){if(this.setPropertyValue("disabled",e,!0),e)this.parent=this._parent,this.removeFromInvalids(),this.group.attr({display:"none"}),this.dispatch("disabled");else{if(this._parent){var t=this._parent.element;t.hasChild(this.group)||t.add(this.group)}this instanceof d.a?(this.deepInvalidate(),this._background&&this._background.invalidate()):this.invalidate(),this.__disabled||this.removeSVGAttribute("display"),this.dispatch("enabled")}return this.dispatch("transformed"),F.a.requestFrame(),!0}return!1},Object.defineProperty(t.prototype,"__disabled",{get:function(){return this._internalDisabled},set:function(e){this._internalDisabled!=e&&(this._internalDisabled=e,this._updateDisabled=!0,this.invalidatePosition(),e||this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numberFormatter",{get:function(){return this._numberFormatter?this._numberFormatter:this.virtualParent?this.virtualParent.numberFormatter:this._parent?this._parent.numberFormatter:(this._numberFormatter=new w.a,this._numberFormatter.language=this.language,this.numberFormatter)},set:function(e){this._numberFormatter=e,this._numberFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.virtualParent?this.virtualParent.dateFormatter:this._parent?this._parent.dateFormatter:(this._dateFormatter=new k.a,this._dateFormatter.language=this.language,this.dateFormatter)},set:function(e){this._dateFormatter=e,this._dateFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationFormatter",{get:function(){return this._durationFormatter?this._durationFormatter:this.virtualParent?this.virtualParent.durationFormatter:this._parent?this._parent.durationFormatter:(this._durationFormatter=new P.a,this._durationFormatter.language=this.language,this.durationFormatter)},set:function(e){this._durationFormatter=e,this._durationFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){var e=this._language.get();return e||(this.virtualParent?this.virtualParent.language:this._parent?this._parent.language:(e=new T.a,this.language=e,e))},set:function(e){var t=this;this._language.get()!==e&&this._language.set(e,e.events.on("localechanged",(function(e){if(t._numberFormatter&&(t._numberFormatter.language=t.language),t._dateFormatter&&(t._dateFormatter.language=t.language),t._durationFormatter&&(t._durationFormatter.language=t.language),t._exporting.get()){var i=t._exporting.get();i.numberFormatter.language=t.language,i.dateFormatter.language=t.language,i.durationFormatter.language=t.language,i.language=t.language}t instanceof d.a&&t.deepInvalidate()})))},enumerable:!0,configurable:!0}),t.prototype.populateString=function(e,t){if(D.d(e)){e=D.a(e);var i=(e=Object(S.a)().escape(e)).match(/\{([^}]+)\}/g),n=void 0;if(i)for(n=0;n<i.length;n++){var r=i[n].replace(/\{([^}]+)\}/,"$1"),a=this.getTagValue(r,"",t);D.d(a)||(a=""),e=e.split(i[n]).join(a)}e=Object(S.a)().unescape(e)}else e="";return this._adapterO?this._adapterO.apply("populateString",e):e},t.prototype.getTagValue=function(e,t,i){var n;D.d(i)||(i=this.dataItem);for(var r,a=[],o=/([^.]+)\(([^)]*)\)|([^.]+)/g;null!==(r=o.exec(e));)if(r[3])a.push({prop:r[3]});else{var s=[];if(""!=O.P(r[2]))for(var l=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,u=void 0;null!==(u=l.exec(r[2]));)s.push(u[1]||u[2]||u[3]);a.push({method:r[1],params:s})}if(i){n=this.getTagValueFromObject(a,i.values),D.d(n)&&!D.i(n)||(n=this.getTagValueFromObject(a,i));var c=i.dataContext;!D.d(n)&&c&&(n=this.getTagValueFromObject(a,i.dataContext),D.d(n)||(n=this.getTagValueFromObject([{prop:e}],c)),!D.d(n)&&c.dataContext&&(n=this.getTagValueFromObject(a,c.dataContext))),!D.d(n)&&i.component&&i.component.dataItem!==i&&(n=i.component.getTagValue(e,t))}return D.d(n)||(n=this.getTagValueFromObject(a,this.populateStringFrom||this)),!D.d(n)&&this._parent&&(n=this._parent.getTagValue(e,t)),n},t.prototype.getTagValueFromObject=function(e,t,i){for(var n=t,r=!1,a=0,o=e.length;a<o;a++){var s=e[a];if(s.prop){if(n=n[s.prop],!D.d(n))return}else switch(s.method){case"formatNumber":var l=O.b(n);D.d(l)&&(n=this.numberFormatter.format(l,i||s.params[0]||void 0),r=!0);break;case"formatDate":var u=void 0;if(u=D.j(n)?this.dateFormatter.parse(n):O.a(n),!D.f(u)||D.g(u.getTime()))return;D.d(u)&&(n=this.dateFormatter.format(u,i||s.params[0]||void 0),r=!0);break;case"formatDuration":var c=O.b(n);D.d(c)&&(n=this.durationFormatter.format(c,i||s.params[0]||void 0,s.params[1]||void 0),r=!0);break;case"urlEncode":case"encodeURIComponent":n=encodeURIComponent(n);break;default:n[s.method]&&n[s.method].apply(this,s.params)}}if(!r){var h=[{method:"",params:i}];if(D.d(i)){var p=O.p(i);p===E.c?h[0].method="formatNumber":p===E.a?h[0].method="formatDate":p===E.b&&(h[0].method="formatDuration")}else D.h(n)?(h[0].method="formatNumber",h[0].params=""):D.f(n)&&(h[0].method="formatDate",h[0].params="");h[0].method&&(n=this.getTagValueFromObject(h,n))}return n},Object.defineProperty(t.prototype,"dataItem",{get:function(){if(!this._dataItem){if(this.virtualParent)return this.virtualParent.dataItem;if(this._parent)return this._parent.dataItem}return this._dataItem},set:function(e){this.setDataItem(e)},enumerable:!0,configurable:!0}),t.prototype.setDataItem=function(e){var t=this;if(this._dataItem!=e){if(this._dataItem=e,e){if(this.configField){var i=e.dataContext;i&&(this.config=i[this.configField],!this.config&&i.dataContext&&(this.config=i.dataContext[this.configField]))}var n=e.dataContext;if(n){var r=n.dataContext;M.d(this.propertyFields,(function(e,i){if(D.d(n[i]))t[e]=n[i];else if(r){var a=r[i];if(D.d(a))t[e]=a}}))}}this.invalidate()}},t.prototype.getPropertyValue=function(e){var t=this.properties[e];return this._isTemplate||(this._adapterO&&(t=this._adapterO.apply(e,t)),t=s.b.applyAll(this,e,t)),t},t.prototype.setColorProperty=function(e,t,i){var n=this.properties[e];return!(t instanceof v.a&&n instanceof v.a&&t.toString()==n.toString())&&this.setPropertyValue(e,t,i)},t.prototype.setPercentProperty=function(e,t,i,n,r,a){if(t=D.m(t),D.h(t))return D.h(r)&&(t=I.E(t,r,a)),this.setPropertyValue(e,t,i,n);var o=this.properties[e];return!(t instanceof L.a&&o instanceof L.a&&t.value==o.value)&&this.setPropertyValue(e,t,i,n)},t.prototype.setPropertyValue=function(e,t,i,n){if(this.properties[e]!==t&&!this.isDisposed()){if(this.properties[e]=t,this.events.isEnabled("propertychanged")){var r={type:"propertychanged",target:this,property:e};this.events.dispatchImmediately("propertychanged",r)}if(i&&this.invalidate(),n&&this.invalidatePosition(),this.applyOnClones)for(var a=this.clones.values,o=a.length,s=0;s<o;++s){var l=a[s];l.isDisposed()||(l[e]=t)}return!0}return!1},t.prototype.bind=function(e,t,i,n){var r=this;void 0===i&&(i=e),D.d(this._bindings[e])&&this._bindings[e].dispose(),this[e]=t[i],this._bindings[e]=t.events.on("propertychanged",(function(a){if(a.property===i){var o=t[i];n&&(o=n(o)),r[e]=o}}))},t.prototype.observe=function(e,t,i,n){var r=this;return new c.c(A.l(A.s(e),(function(e){return r.events.on("propertychanged",(function(n){n.property===e&&t.call(i,n)}),i,n)})))},t.prototype.applyAccessibility=function(){var e=this.readerTitle,t=this.readerDescription,i=this.role,n=this.readerHidden,r=this.readerChecked,a=this.readerControls,o=this.readerLive,s=this.readerOrientation,l=this.readerValueNow,u=this.readerValueText,c=[],h=[],p=this.readerLabelledBy;p&&c.push(p);var d=this.readerDescribedBy;if(d&&h.push(d),e)if(c.length||this.showSystemTooltip){var f=this.titleElement,m=this.uid+"-title";f.node.textContent!=e&&(f.node.textContent=e,f.attr({id:m})),c.push(m)}else this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0),this.setSVGAttribute({"aria-label":e});else this.removeSVGAttribute("aria-label"),this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0);if(t){var y=this.descriptionElement,v=this.uid+"-description";y.node.textContent!=t&&(y.node.textContent=t,y.attr({id:v})),h.push(v)}else this._descriptionElement&&(this.group.removeElement(this._descriptionElement),this._descriptionElement=void 0);c.length?this.setSVGAttribute({"aria-labelledby":c.join(" ")}):this.removeSVGAttribute("aria-labelledby"),h.length?this.setSVGAttribute({"aria-describedby":h.join(" ")}):this.removeSVGAttribute("aria-describedby"),i?this.setSVGAttribute({role:i}):this.removeSVGAttribute("role"),n?this.setSVGAttribute({"aria-hidden":"true"}):this.removeSVGAttribute("aria-hidden"),r?this.setSVGAttribute({"aria-checked":"true"}):!1===r?this.setSVGAttribute({"aria-checked":"false"}):this.removeSVGAttribute("aria-checked"),a?this.setSVGAttribute({"aria-controls":a}):this.removeSVGAttribute("aria-controls"),o?this.setSVGAttribute({"aria-live":o}):this.removeSVGAttribute("aria-live"),s?this.setSVGAttribute({"aria-orientation":s}):this.removeSVGAttribute("aria-orientation"),l?this.setSVGAttribute({"aria-valuenow":l}):this.removeSVGAttribute("aria-valuenow"),u?this.setSVGAttribute({"aria-valuetext":u}):this.removeSVGAttribute("aria-valuetext")},Object.defineProperty(t.prototype,"readerTitle",{get:function(){var e=this.getPropertyValue("readerTitle");return D.d(e)&&this.dataItem?this.populateString(e):e},set:function(e){e=D.n(e),this.setPropertyValue("readerTitle",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerDescription",{get:function(){var e=this.getPropertyValue("readerDescription");return D.d(e)&&this.dataItem?this.populateString(e):this.getPropertyValue("readerDescription")},set:function(e){e=D.n(e),this.setPropertyValue("readerDescription",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"role",{get:function(){return this.getPropertyValue("role")},set:function(e){e=D.n(e),this.setPropertyValue("role",e)&&(this.applyAccessibility(),"slider"==e&&(this.setSVGAttribute({"aria-valuemin":"0"}),this.setSVGAttribute({"aria-valuemax":"100"})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerHidden",{get:function(){return this.getPropertyValue("readerHidden")},set:function(e){e=D.k(e),this.setPropertyValue("readerHidden",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerChecked",{get:function(){return this.getPropertyValue("readerChecked")},set:function(e){e=D.k(e),this.setPropertyValue("readerChecked",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerControls",{get:function(){return this.getPropertyValue("readerControls")},set:function(e){e=D.n(e),this.setPropertyValue("readerControls",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerLive",{get:function(){return this.getPropertyValue("readerLive")},set:function(e){e=D.n(e),this.setPropertyValue("readerLive",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerLabelledBy",{get:function(){return this.getPropertyValue("readerLabelledBy")},set:function(e){e=D.n(e),this.setPropertyValue("readerLabelledBy",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerDescribedBy",{get:function(){return this.getPropertyValue("readerDescribedBy")},set:function(e){e=D.n(e),this.setPropertyValue("readerDescribedBy",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerOrientation",{get:function(){return this.getPropertyValue("readerOrientation")},set:function(e){e=D.n(e),this.setPropertyValue("readerOrientation",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerValueNow",{get:function(){return this.getPropertyValue("readerValueNow")},set:function(e){e=D.n(e),this.setPropertyValue("readerValueNow",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerValueText",{get:function(){return this.getPropertyValue("readerValueText")},set:function(e){e=D.n(e),this.setPropertyValue("readerValueText",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyboardOptions",{get:function(){if(!this.interactions.keyboardOptions){if(this.virtualParent)return this.virtualParent.keyboardOptions;if(this._parent)return this._parent.keyboardOptions}return this.interactions.keyboardOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseOptions",{get:function(){if(!this.interactions.mouseOptions){if(this.virtualParent)return this.virtualParent.mouseOptions;if(this._parent)return this._parent.mouseOptions}return this.interactions.mouseOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interactions",{get:function(){if(!this._interaction){var e=Object(g.a)().getInteraction(this.dom);this._interaction=e,this._interaction.clickable=this.clickable,this._interaction.hoverable=this.hoverable,this._interaction.trackable=this.trackable,this._interaction.draggable=this.draggable,this._interaction.swipeable=this.swipeable,this._interaction.resizable=this.resizable,this._interaction.wheelable=this.wheelable,this._interaction.contextMenuDisabled=this.contextMenuDisabled,this._interaction.inert=this.inert,this._interaction.sprite=this,this._disposers.push(this._interaction)}return this._interaction},enumerable:!0,configurable:!0}),t.prototype.isInteractive=function(){return!!this._interaction},Object.defineProperty(t.prototype,"focusable",{get:function(){return this.getPropertyValue("focusable")},set:function(e){var t=this;e=D.k(e),this.setPropertyValue("focusable",e)&&(e||this.isInteractive())&&(this.interactions.focusable=e,e?(this.setSVGAttribute({focusable:e}),this._tabindex||(this.tabindex=0)):(this.removeSVGAttribute("focusable"),this.tabindex=void 0),this.interactions.setEventDisposer("sprite-focusable",e,(function(){return new c.c([t.events.on("blur",t.handleBlur,t,!1),t.events.on("focus",t.handleFocus,t,!1)])})))},enumerable:!0,configurable:!0}),t.prototype.handleFocus=function(e){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!0,this.topParent.focusedElement=this),this.focusFilter&&this.filters.push(this.focusFilter),this.hoverOnFocus&&(this.isHover=!0,this.handleOver()))},t.prototype.handleBlur=function(e){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!1,this.topParent.focusedElement=void 0),this.focusFilter&&this.filters.removeValue(this.focusFilter),this.hoverOnFocus&&(this.isHover=!1,this.handleOut()))},Object.defineProperty(t.prototype,"focusFilter",{get:function(){var e=this._focusFilter;return e||(this.virtualParent?this.virtualParent.focusFilter:this._parent?this._parent.focusFilter:void 0)},set:function(e){this._focusFilter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverOnFocus",{get:function(){return this.getPropertyValue("hoverOnFocus")},set:function(e){e!==this.hoverOnFocus&&this.setPropertyValue("hoverOnFocus",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabindex",{get:function(){var e=this._tabindex;return null!=e?e:this.virtualParent?this.virtualParent.tabindex:this._parent?this._parent.tabindex:void 0},set:function(e){e=D.l(e),this.setPropertyValue("tabindex",e)&&D.h(e)&&(this.interactions.tabindex=e,this.setSVGAttribute({tabindex:e}),this._tabindex=e,this.focusable=e>-1||void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inertiaOptions",{get:function(){return!this.interactions.inertiaOptions&&this._parent?this._parent.inertiaOptions:this.interactions.inertiaOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"draggable",{get:function(){return this.getPropertyValue("draggable")},set:function(e){var t=this;e=D.k(e),this.setPropertyValue("draggable",e)&&(e||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.draggable=e,this.interactions.setEventDisposer("sprite-draggable",e,(function(){return new c.c([t.events.on("down",t.handleDown,t,!1),t.events.on("dragstart",t.handleDragStart,t,!1),t.events.on("drag",t.handleDragMove,t,!1),t.events.on("dragstop",t.handleDragStop,t,!1)])})))},enumerable:!0,configurable:!0}),t.prototype.handleDragStart=function(e){this.interactions.isTouchProtected&&e.touch||(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this._isDragged=!0,this.hideTooltip(0))},t.prototype.dragStart=function(e){this._isDragged=!0,Object(g.a)().dragStart(this.interactions,e)},t.prototype.handleDragStop=function(e){this.interactions.isTouchProtected&&e.touch||(this._isDragged=!1,this.showTooltip(),this.interactions.originalPosition=void 0)},t.prototype.dragStop=function(e,t){this._isDragged=!1,Object(g.a)().dragStop(this.interactions,e,t)},t.prototype.handleDragMove=function(e){if(!this.interactions.isTouchProtected||!e.touch){var t=this.interactions.originalPosition;if(t&&this._isDragged){var i=this._parent.globalScale*this.svgContainer.cssScale;this.moveTo({x:t.x+e.shift.x/i,y:t.y+e.shift.y/i},void 0,void 0,!0)}this.dispatchImmediately("dragged",e)}},Object.defineProperty(t.prototype,"inert",{get:function(){return this.getPropertyValue("inert")},set:function(e){e=D.k(e),this.setPropertyValue("inert",e)&&(e||this.isInteractive())&&(this.interactions.inert=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverOptions",{get:function(){if(!this.interactions.hoverOptions){if(this.virtualParent)return this.virtualParent.hoverOptions;if(this._parent)return this._parent.hoverOptions}return this.interactions.hoverOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverable",{get:function(){return this.getPropertyValue("hoverable")},set:function(e){var t=this;e=D.k(e),this.setPropertyValue("hoverable",e)&&(e||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.hoverable=e,this.interactions.setEventDisposer("sprite-hoverable",e,(function(){return new c.c([t.events.on("over",t.handleOver,t,!1),t.events.on("out",t.handleOut,t,!1)])})))},enumerable:!0,configurable:!0}),t.prototype.handleOver=function(e){if(this._outTimeout&&this._outTimeout.dispose(),this.isHover){this.states.hasKey("hover")&&(this.isHidden||this.applyCurrentState());var t=void 0;e&&e.pointer&&(t=O.i(e.pointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale)),"hover"==this.showTooltipOn&&this.showTooltip(t)}else"hover"==this.showTooltipOn&&this.hideTooltip(),!this.isHidden&&this.states.hasKey("hover")&&this.applyCurrentState()},t.prototype.handleOut=function(e){var t=this;this.tooltip&&this.tooltip.targetSprite==this&&this.tooltip.keepTargetHover?this._outTimeout=this.setTimeout((function(){t.tooltip.isHover||(t.tooltip.targetSprite==t&&t.hideTooltip(),t._outTimeout=t.setTimeout(t.handleOutReal.bind(t),t.rollOutDelay))}),10):("hover"==this.showTooltipOn&&this.hideTooltip(),this._outTimeout=this.setTimeout(this.handleOutReal.bind(this),this.rollOutDelay))},t.prototype.handleOutReal=function(){this.isHidden||this.isHiding||!this.states.hasKey("hover")||this.applyCurrentState()},Object.defineProperty(t.prototype,"hitOptions",{get:function(){if(!this.interactions.hitOptions){if(this.virtualParent)return this.virtualParent.hitOptions;if(this._parent)return this._parent.hitOptions}return this.interactions.hitOptions},enumerable:!0,configurable:!0}),t.prototype.handleDown=function(e){1===this.interactions.downPointers.length&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this.interactions.originalAngle=this.rotation,this.interactions.originalScale=this.scale,this.states.hasKey("down")&&this.setState("down"))},t.prototype.handleUp=function(e){var t=this;this._isResized=!1,this.states.hasKey("down")&&this.applyCurrentState(),"hit"==this.showTooltipOn&&(this.updateTooltipPosition(e.pointer?e.pointer.point:void 0),this._disposers.push(x.b.events.once("exitframe",(function(){t.showTooltip()}))),this._disposers.push(Object(g.a)().body.events.once("down",(function(e){t.hideTooltip()}))))},Object.defineProperty(t.prototype,"clickable",{get:function(){return this.getPropertyValue("clickable")},set:function(e){var t=this;e=D.k(e),this.setPropertyValue("clickable",e)&&(e||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.clickable=e,this.interactions.setEventDisposer("sprite-clickable",e,(function(){return new c.c([t.events.on("down",t.handleDown,t,!1),t.events.on("up",t.handleUp,t,!1)])})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"togglable",{get:function(){return this.getPropertyValue("togglable")},set:function(e){var t=this;e=D.k(e),this.setPropertyValue("togglable",e)&&(e||this.isInteractive())&&this.interactions.setEventDisposer("sprite-togglable",e,(function(){return t.events.on("hit",t.handleToggle,t,!1)}))},enumerable:!0,configurable:!0}),t.prototype.handleToggle=function(e){this.isActive=!this.isActive},Object.defineProperty(t.prototype,"contextMenuDisabled",{get:function(){return this.getPropertyValue("contextMenuDisabled")},set:function(e){e=D.k(e),this.setPropertyValue("contextMenuDisabled",e)&&(this.interactions.contextMenuDisabled=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.getPropertyValue("url")},set:function(e){this.setPropertyValue("url",e)&&(this._urlDisposer&&this._urlDisposer.dispose(),O.x(e)&&(this._urlDisposer=this.events.on("hit",this.urlHandler,this,!1),this.clickable=!0,this.cursorOverStyle=_.a.pointer))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseId",{get:function(){return!this._baseId&&this._parent&&(this.baseId=this._parent.baseId),this._baseId},set:function(e){this.setBaseId(e)},enumerable:!0,configurable:!0}),t.prototype.setBaseId=function(e){e!=this._baseId&&(this.invalid&&(this.invalid=!1,x.b.removeFromInvalidSprites(this),this.invalidate()),this._baseId=e)},Object.defineProperty(t.prototype,"baseSprite",{get:function(){return this.isBaseSprite?this:this._parent?this._parent.baseSprite:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"urlTarget",{get:function(){return this.getPropertyValue("urlTarget")},set:function(e){this.setPropertyValue("urlTarget",e)},enumerable:!0,configurable:!0}),t.prototype.urlHandler=function(e){if(O.x(this.url)){var t=this.populateString(this.url);"_self"===this.urlTarget?window.location.href=t:window.open(t,this.urlTarget)}},Object.defineProperty(t.prototype,"swipeOptions",{get:function(){if(!this.interactions.swipeOptions){if(this.virtualParent)return this.virtualParent.swipeOptions;if(this._parent)return this._parent.swipeOptions}return this.interactions.swipeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swipeable",{get:function(){return this.getPropertyValue("swipeable")},set:function(e){e=D.k(e),this.setPropertyValue("swipeable",e)&&(this.applyCursorStyle(),(e||this.isInteractive())&&(this.interactions.swipeable=e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackable",{get:function(){return this.getPropertyValue("trackable")},set:function(e){e=D.k(e),this.setPropertyValue("trackable",e)&&(e||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.trackable=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wheelable",{get:function(){return this.getPropertyValue("wheelable")},set:function(e){this.setPropertyValue("wheelable",e)&&(e||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.wheelable=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizable",{get:function(){return this.getPropertyValue("resizable")},set:function(e){var t=this;e=D.k(e),this.setPropertyValue("resizable",e)&&(e||this.isInteractive())&&(this.applyCursorStyle(),this.interactions.resizable=e,this.interactions.setEventDisposer("sprite-resizable",e,(function(){return new c.c([t.events.on("down",t.handleDown,t,!1),t.events.on("resize",t.handleResize,t,!1)])})))},enumerable:!0,configurable:!0}),t.prototype.handleResize=function(e){if((!this.interactions.isTouchProtected||!e.touch)&&(this._isResized=!0,this.scale=this.interactions.originalScale*e.scale,this.validatePosition(),this.draggable||this.dragWhileResize)){this._isDragged=!1;var t=O.i(e.point1,this.htmlContainer,this.svgContainer.cssScale),i=O.i(e.point2,this.htmlContainer,this.svgContainer.cssScale),n=I.s(t,i),r=O.h(e.startPoint1,this._parent),a=O.h(e.startPoint2,this._parent),o=this.interactions.originalPosition,s=this.interactions.originalScale;if(o){var l={x:(r.x-o.x)/s,y:(r.y-o.y)/s},u={x:(a.x-o.x)/s,y:(a.y-o.y)/s},c=I.s(l,u),h=O.O(n,this._parent);this.moveTo({x:h.x-c.x*this.scale,y:h.y-c.y*this.scale},void 0,void 0,!0)}}},Object.defineProperty(t.prototype,"cursorOptions",{get:function(){if(!this.interactions.cursorOptions){if(this.virtualParent)return this.virtualParent.cursorOptions;if(this._parent)return this._parent.cursorOptions}return this.interactions.cursorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursorOverStyle",{set:function(e){this.cursorOptions.overStyle||(this.interactions.cursorOptions={defaultStyle:this.cursorOptions.defaultStyle}),this.cursorOptions.overStyle=e,Object(g.a)().applyCursorOverStyle(this.interactions)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursorDownStyle",{set:function(e){this.cursorOptions.downStyle=e},enumerable:!0,configurable:!0}),t.prototype.applyCursorStyle=function(){},Object.defineProperty(t.prototype,"interactionsEnabled",{get:function(){return!1!==this.getPropertyValue("interactionsEnabled")&&(this.virtualParent?this.virtualParent.interactionsEnabled:!this._parent||this._parent.interactionsEnabled)},set:function(e){if(e=D.k(e),this.setPropertyValue("interactionsEnabled",e)){var t=null;e?this.group.node.style.pointerEvents="":t="none",this.group.node.style.pointerEvents=t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exporting",{get:function(){return this.getExporting()},set:function(e){this._exporting.set(e,e)},enumerable:!0,configurable:!0}),t.prototype.getExporting=function(){var e=this._exporting.get();return e||(!this.isStandaloneInstance&&this._parent?this._parent.exporting:((e=new C.a(this.svgContainer.SVGContainer)).sprite=this,e.language=this.language,e.numberFormatter=this.numberFormatter,e.dateFormatter=this.dateFormatter,e.durationFormatter=this.durationFormatter,this._exporting.set(e,e),e))},Object.defineProperty(t.prototype,"exportable",{get:function(){return this._exportable},set:function(e){var t=this.svgContainer;this._exportable=e,t&&(e?A.o(t.nonExportableSprites,this):-1==A.i(t.nonExportableSprites,this)&&t.nonExportableSprites.push(this))},enumerable:!0,configurable:!0}),t.prototype.modalPrefix=function(e){return e=b.a.classNamePrefix+e},Object.defineProperty(t.prototype,"modal",{get:function(){var e=this.svgContainer;if(e){var t=e.modal;return t.adapter.has("classPrefix",this.modalPrefix)||t.adapter.add("classPrefix",this.modalPrefix),t}},enumerable:!0,configurable:!0}),t.prototype.openModal=function(e,t){var i=this.svgContainer;if(i)return i.openModal(e,t)},t.prototype.closeModal=function(){var e=this.svgContainer;e&&e.closeModal()},Object.defineProperty(t.prototype,"popups",{get:function(){var e=this.svgContainer;if(e){var t=e.popups;return t.template.sprite=this,t.template.adapter.has("classPrefix",this.modalPrefix)||t.template.adapter.add("classPrefix",this.modalPrefix),t}},enumerable:!0,configurable:!0}),t.prototype.openPopup=function(e,t){var i=this.svgContainer;if(i)return i.openPopup(e,t)},t.prototype.closeAllPopups=function(){var e=this.svgContainer;e&&e.closeAllPopups()},Object.defineProperty(t.prototype,"x",{get:function(){return this.getPropertyValue("x")},set:function(e){this.isDragged||this.setPercentProperty("x",e,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelX",{get:function(){var e=I.i(this.getPixelX(this.x),this.minX,this.maxX);return this._adapterO?this._adapterO.apply("pixelX",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeX",{get:function(){return this._adapterO?this._adapterO.apply("relativeX",this.getRelativeX(this.x)):this.getRelativeX(this.x)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minX",{get:function(){return this.getPropertyValue("minX")},set:function(e){D.h(e)&&(e=I.E(e,this._positionPrecision,!0),this.setPropertyValue("minX",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxX",{get:function(){return this.getPropertyValue("maxX")},set:function(e){D.h(e)&&(e=I.E(e,this._positionPrecision,!0),this.setPropertyValue("maxX",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.getPropertyValue("y")},set:function(e){this.isDragged||this.setPercentProperty("y",e,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelY",{get:function(){var e=I.i(this.getPixelY(this.y),this.minY,this.maxY);return this._adapterO?this._adapterO.apply("pixelY",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeY",{get:function(){return this._adapterO?this._adapterO.apply("relativeY",this.getRelativeX(this.y)):this.getRelativeX(this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minY",{get:function(){return this.getPropertyValue("minY")},set:function(e){D.h(e)&&(e=I.E(e,this._positionPrecision,!0),this.setPropertyValue("minY",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxY",{get:function(){return this.getPropertyValue("maxY")},set:function(e){D.h(e)&&(e=I.E(e,this._positionPrecision,!0),this.setPropertyValue("maxY",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dx",{get:function(){return this.getPropertyValue("dx")},set:function(e){D.h(e)&&(e=I.E(e,this._positionPrecision,!0),this.setPropertyValue("dx",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dy",{get:function(){return this.getPropertyValue("dy")},set:function(e){D.h(e)&&(e=I.E(e,this._positionPrecision,!0),this.setPropertyValue("dy",e,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.getPropertyValue("rotation")},set:function(e){e=D.l(e),D.h(e)||(e=0),this.setPropertyValue("rotation",e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.getPropertyValue("align")},set:function(e){e=D.n(e),this.setPropertyValue("align",e)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valign",{get:function(){return this.getPropertyValue("valign")},set:function(e){e=D.n(e),this.setPropertyValue("valign",e)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalCenter",{get:function(){return this.getPropertyValue("horizontalCenter")},set:function(e){e=D.n(e),this.setPropertyValue("horizontalCenter",e)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalCenter",{get:function(){return this.getPropertyValue("verticalCenter")},set:function(e){e=D.n(e),this.setPropertyValue("verticalCenter",e)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){var e=this.getPropertyValue("maxWidth");if(!D.h(e)&&this._parent){var t=this._parent.maxWidth;return"absolute"!=this._parent.layout&&"none"!=this.align&&void 0!=this.align&&(t=t-this.pixelMarginLeft-this.pixelMarginRight),t}return e},set:function(e){this.setMaxWidth(e)},enumerable:!0,configurable:!0}),t.prototype.setMaxWidth=function(e){var t=this.maxWidth,i=this.maxHeight;if(this.setPropertyValue("maxWidth",e)){D.h(this.relativeWidth)&&this.invalidate();var n={type:"maxsizechanged",target:this,previousWidth:t,previousHeight:i};this.dispatchImmediately("maxsizechanged",n)}},Object.defineProperty(t.prototype,"maxHeight",{get:function(){var e=this.getPropertyValue("maxHeight");if(!D.h(e)&&this._parent){var t=this._parent.maxHeight;return"absolute"!=this._parent.layout&&"none"!=this.valign&&void 0!=this.valign&&(t=t-this.pixelMarginTop-this.pixelMarginBottom),t}return e},set:function(e){this.setMaxHeight(e)},enumerable:!0,configurable:!0}),t.prototype.setMaxHeight=function(e){var t=this.maxWidth,i=this.maxHeight;if(this.setPropertyValue("maxHeight",e)){D.h(this.relativeHeight)&&this.invalidate();var n={type:"maxsizechanged",target:this,previousWidth:t,previousHeight:i};this.dispatchImmediately("maxsizechanged",n)}},Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(e){this.setPropertyValue("minWidth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(e){this.setPropertyValue("minHeight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(e){this.setPercentProperty("width",e,!0,!1,this._positionPrecision,!0)&&(this.percentWidth=void 0,this.relativeWidth=void 0,e instanceof L.a?(this.percentWidth=e.percent,D.h(this._pixelWidth)&&(this.maxWidth=void 0),this._pixelWidth=void 0):(this._pixelWidth=Number(e),this.maxWidth=this._pixelWidth),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(e){this.setPercentProperty("height",e,!0,!1,this._positionPrecision,!0)&&(this.percentHeight=void 0,this._relativeHeight=void 0,e instanceof L.a?(this.percentHeight=e.percent,D.h(this._pixelHeight)&&(this.maxHeight=void 0),this._pixelHeight=void 0):(this._pixelHeight=Number(e),this.maxHeight=this._pixelHeight),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelWidth",{get:function(){var e;e=D.h(this.percentWidth)?this.maxWidth:D.h(this._pixelWidth)?this._pixelWidth:0;var t=this.minWidth;null!=t&&e<t&&(e=t);var i=I.E(e,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelWidth",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelHeight",{get:function(){var e;e=D.h(this.percentHeight)?this.maxHeight:D.h(this._pixelHeight)?this._pixelHeight:0;var t=this.minHeight;null!=t&&e<t&&(e=t);var i=I.E(e,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelHeight",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeWidth",{get:function(){var e=this._relativeWidth;if(D.h(e))return this._adapterO?this._adapterO.apply("relativeWidth",e):e},set:function(e){this._relativeWidth!=e&&(this._relativeWidth=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeHeight",{get:function(){var e=this._relativeHeight;if(D.h(e))return this._adapterO?this._adapterO.apply("relativeHeight",e):e},set:function(e){this._relativeHeight!=e&&(this._relativeHeight=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"measuredWidth",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredWidth",this._measuredWidth):this._measuredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"measuredHeight",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredHeight",this._measuredHeight):this._measuredHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outerWidth",{get:function(){var e=this.pixelWidth+this.pixelMarginRight+this.pixelMarginLeft;return this._adapterO?this._adapterO.apply("outerWidth",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outerHeight",{get:function(){var e=this.pixelHeight+this.pixelMarginTop+this.pixelMarginBottom;return this._adapterO?this._adapterO.apply("outerHeight",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerWidth",{get:function(){var e=Math.max(0,this.pixelWidth-this.pixelPaddingRight-this.pixelPaddingLeft);return this._adapterO?this._adapterO.apply("innerWidth",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerHeight",{get:function(){var e=Math.max(0,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom);return this._adapterO?this._adapterO.apply("innerHeight",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalScale",{get:function(){var e=this.scale;return this._parent&&(e*=this._parent.globalScale),this._adapterO?this._adapterO.apply("globalScale",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.getPropertyValue("scale")},set:function(e){(e=D.l(e))<0&&(e=0),e!=this.getPropertyValue("scale")&&(this.setPropertyValue("scale",e,!1,!0),this.handleGlobalScale())},enumerable:!0,configurable:!0}),t.prototype.margin=function(e,t,i,n){return this.marginTop=e,this.marginRight=t,this.marginBottom=i,this.marginLeft=n,this},Object.defineProperty(t.prototype,"marginLeft",{get:function(){return this.getPropertyValue("marginLeft")},set:function(e){this.setPercentProperty("marginLeft",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marginRight",{get:function(){return this.getPropertyValue("marginRight")},set:function(e){this.setPercentProperty("marginRight",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marginTop",{get:function(){return this.getPropertyValue("marginTop")},set:function(e){this.setPercentProperty("marginTop",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marginBottom",{get:function(){return this.getPropertyValue("marginBottom")},set:function(e){this.setPercentProperty("marginBottom",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelMarginRight",{get:function(){var e=this.getPixelX(this.marginRight);return this._adapterO?this._adapterO.apply("pixelMarginRight",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeMarginRight",{get:function(){var e=this.getRelativeX(this.marginRight);return this._adapterO?this._adapterO.apply("relativeMarginRight",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelMarginLeft",{get:function(){var e=this.getPixelX(this.marginLeft);return this._adapterO?this._adapterO.apply("pixelMarginLeft",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeMarginLeft",{get:function(){var e=this.getRelativeX(this.marginLeft);return this._adapterO?this._adapterO.apply("relativeMarginLeft",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelMarginTop",{get:function(){var e=this.getPixelY(this.marginTop);return this._adapterO?this._adapterO.apply("pixelMarginTop",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeMarginTop",{get:function(){var e=this.getRelativeY(this.marginTop);return this._adapterO?this._adapterO.apply("relativeMarginTop",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelMarginBottom",{get:function(){var e=this.getPixelY(this.marginBottom);return this._adapterO?this._adapterO.apply("pixelMarginBottom",e):e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeMarginBottom",{get:function(){var e=this.getRelativeY(this.marginBottom);return this._adapterO?this._adapterO.apply("relativeMarginBottom",e):e},enumerable:!0,configurable:!0}),t.prototype.padding=function(e,t,i,n){return this.paddingTop=e,this.paddingRight=t,this.paddingBottom=i,this.paddingLeft=n,this},Object.defineProperty(t.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft")},set:function(e){this.setPercentProperty("paddingLeft",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight")},set:function(e){this.setPercentProperty("paddingRight",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingTop",{get:function(){return this.getPropertyValue("paddingTop")},set:function(e){this.setPercentProperty("paddingTop",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingBottom",{get:function(){return this.getPropertyValue("paddingBottom")},set:function(e){this.setPercentProperty("paddingBottom",e,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelPaddingRight",{get:function(){return this.getPixelX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePaddingRight",{get:function(){return this.getRelativeX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelPaddingLeft",{get:function(){return this.getPixelX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePaddingLeft",{get:function(){return this.getRelativeX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelPaddingTop",{get:function(){return this.getPixelY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePaddingTop",{get:function(){return this.getRelativeY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelPaddingBottom",{get:function(){return this.getPixelY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePaddingBottom",{get:function(){return this.getRelativeY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(e){this.setPath(e)},enumerable:!0,configurable:!0}),t.prototype.setPath=function(e){return!!this.setPropertyValue("path",e)&&(this._adapterO&&(e=this._adapterO.apply("path",e)),this._isPath||(this.element&&(!this.element.node||this.element.node instanceof SVGPathElement)||(this.element=this.paper.add("path")),this._isPath=!0),D.d(e)?this.element.attr({d:e}):this.element.removeAttr("d"),this.invalidatePosition(),this.inited||this.events.once("inited",this.validatePosition,this,!1),!0)},Object.defineProperty(t.prototype,"fillModifier",{get:function(){return this.getPropertyValue("fillModifier")},set:function(e){this.setPropertyValue("fillModifier",e)&&this.setFill(this.fill)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeModifier",{get:function(){return this.getPropertyValue("strokeModifier")},set:function(e){this.setPropertyValue("strokeModifier",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this.getPropertyValue("fillOpacity")},set:function(e){e=I.H(e,0,1),this.setPropertyValue("fillOpacity",e)&&this.setSVGAttribute({"fill-opacity":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this.getPropertyValue("fill")},set:function(e){this.setFill(e)},enumerable:!0,configurable:!0}),t.prototype.setFill=function(e){if(D.i(e)&&!("r"in e)||(e=Object(v.c)(e)),this.setColorProperty("fill",e)||this.fillModifier)if(e instanceof v.a&&this.fillModifier&&(e=this.fillModifier.modify(e)),this.realFill=e,e instanceof v.a)this.setSVGAttribute({fill:e.toString()});else if(D.d(e)){if(e instanceof f.a||e instanceof m.a||e instanceof y.a){var t=e;t.paper=this.paper,this.setSVGAttribute({fill:'url("'+O.n()+t.id+'")'})}}else this.removeSVGAttribute("fill")},Object.defineProperty(t.prototype,"opacity",{get:function(){return this.getPropertyValue("opacity")},set:function(e){e=I.H(e,0,1),this.setPropertyValue("opacity",e)&&this.setSVGAttribute({opacity:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.getPropertyValue("stroke")},set:function(e){this.setStroke(e)},enumerable:!0,configurable:!0}),t.prototype.setStroke=function(e){if(D.i(e)&&!("r"in e)||(e=Object(v.c)(e)),this.setColorProperty("stroke",e)||this.strokeModifier)if(e instanceof v.a&&this.strokeModifier&&(e=this.strokeModifier.modify(e)),this.realStroke=e,e instanceof v.a)"none"==e.hex?this.removeSVGAttribute("stroke"):this.setSVGAttribute({stroke:e.toString()});else if(D.d(e)){if(e instanceof f.a||e instanceof m.a||e instanceof y.a){var t=e;t.paper=this.paper,this.setSVGAttribute({stroke:'url("'+O.n()+t.id+'")'})}}else this.removeSVGAttribute("stroke")},Object.defineProperty(t.prototype,"strokeOpacity",{get:function(){return this.getPropertyValue("strokeOpacity")},set:function(e){e=I.H(e,0,1),this.setPropertyValue("strokeOpacity",e)&&this.setSVGAttribute({"stroke-opacity":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonScalingStroke",{get:function(){return this.getPropertyValue("nonScalingStroke")},set:function(e){e=D.k(e),this.setPropertyValue("nonScalingStroke",e)&&(this.strokeWidth=this.strokeWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonScaling",{get:function(){return this.getPropertyValue("nonScaling")},set:function(e){e=D.k(e),this.setPropertyValue("nonScaling",e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.getPropertyValue("strokeWidth")},set:function(e){e=D.l(e),this.setPropertyValue("strokeWidth",e,!0),this.nonScalingStroke&&(D.h(e)||(e=1),e/=this.globalScale),this.setSVGAttribute({"stroke-width":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeDasharray",{get:function(){return this.getPropertyValue("strokeDasharray")},set:function(e){e=D.n(e),this.setPropertyValue("strokeDasharray",e)&&this.setSVGAttribute({"stroke-dasharray":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeDashoffset",{get:function(){return this.getPropertyValue("strokeDashoffset")},set:function(e){e=D.l(e),this.setPropertyValue("strokeDashoffset",e)&&this.setSVGAttribute({"stroke-dashoffset":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeLinecap",{get:function(){return this.getPropertyValue("strokeLinecap")},set:function(e){this.setPropertyValue("strokeLinecap",e)&&this.setSVGAttribute({"stroke-linecap":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeLinejoin",{get:function(){return this.getPropertyValue("strokeLinejoin")},set:function(e){this.setPropertyValue("strokeLinejoin",e)&&this.setSVGAttribute({"stroke-linejoin":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shapeRendering",{get:function(){return this.getPropertyValue("shapeRendering")},set:function(e){e=D.n(e),this.setPropertyValue("shapeRendering",e)&&this.setSVGAttribute({"shape-rendering":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelPerfect",{get:function(){return this.getPropertyValue("pixelPerfect")},set:function(e){e=D.k(e),this._positionPrecision=e?b.a.pixelPerfectPrecision:3,this.setPropertyValue("pixelPerfect",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rtl",{get:function(){return D.d(this._rtl)?this._rtl:!!this._topParent&&this._topParent.rtl},set:function(e){e=D.k(e),this.isBaseSprite&&(this.topParent.rtl=e),this._rtl=e},enumerable:!0,configurable:!0}),t.prototype.show=function(e){return this.showReal(e)},t.prototype.showReal=function(e){var t=this;if(!this.preventShow){var i,n=this.defaultState.properties;if(!this.disabled&&(this.isHidden||!this.visible||this.isHiding||null!=n.opacity&&this.opacity<n.opacity&&!this.isShowing)&&!this.isDisposed()){this.invalid&&this.validate(),this.positionInvalid&&this.validatePosition(),D.h(e)||(e=this.defaultState.transitionDuration),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this._showHideDisposer&&this.removeDispose(this._showHideDisposer),this._isHidden=!1,this.isHiding=!1,this.isShowing=!0,(i=this.applyCurrentState(e))&&!i.isFinished()?(this._showHideDisposer=i.events.on("animationended",(function(){t.isShowing=!1})),this._disposers.push(this._showHideDisposer)):this.isShowing=!1;var r=this.defaultState.properties.visible;D.d(r)||(r=!0),this.visible=r,this.readerHidden=!1,this.dispatchImmediately("shown")}return i}},t.prototype.hide=function(e){return this.hideReal(e)},t.prototype.hideReal=function(e){var t,i=this;if(!this.isHiding&&this.visible&&!this.isDisposed()){this.tooltip&&this.tooltip.currentSprite==this&&this.hideTooltip(0),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this.isShowing=!1,this._showHideDisposer&&this.removeDispose(this._showHideDisposer);var n=this.hiddenState;n?(t=this.setState(n,e,void 0))&&!t.isFinished()?(this._hideAnimation=t,this._showHideDisposer=t.events.on("animationended",(function(){i.isHiding=!1,i._isHidden=!0,0==n.properties.visible&&(i.visible=!1)}),this),this._disposers.push(this._showHideDisposer),this._disposers.push(t)):(this.isHiding=!1,this._isHidden=!0):(this.visible=!1,this.isHiding=!1,this._isHidden=!0),this.readerHidden=!0,this.dispatchImmediately("hidden"),this.invalidate()}return D.h(e)||(e=this.hiddenState.transitionDuration),t},Object.defineProperty(t.prototype,"visible",{get:function(){return this.getVisibility()},set:function(e){e=D.k(e),this.setVisibility(e)},enumerable:!0,configurable:!0}),t.prototype.getVisibility=function(){var e=this.getPropertyValue("visible");return D.d(e)||(e=!0),e},t.prototype.setVisibility=function(e){if(this.setPropertyValue("visible",e)&&(e?this.group.removeAttr("visibility"):this.group.attr({visibility:"hidden"}),this.events.isEnabled("visibilitychanged"))){var t={type:"visibilitychanged",target:this,visible:e};this.events.dispatchImmediately("visibilitychanged",t)}},Object.defineProperty(t.prototype,"zIndex",{get:function(){return this.getPropertyValue("zIndex")},set:function(e){e=D.l(e),this.setPropertyValue("zIndex",e)&&this.dispatch("zIndexChanged")},enumerable:!0,configurable:!0}),t.prototype.toFront=function(){var e=this._parent;e&&e.children.indexOf(this)!=e.children.length-1&&(e.children.moveValue(this,e.children.length-1),this.dispatch("zIndexChanged"))},t.prototype.toBack=function(){var e=this._parent;e&&0!=e.children.indexOf(this)&&(e.children.moveValue(this,0),this.dispatch("zIndexChanged"))},Object.defineProperty(t.prototype,"userClassName",{get:function(){return this.getPropertyValue("userClassName")},set:function(e){this.setPropertyValue("userClassName",e)&&(!e&&this.userClassName&&this.group.removeClass(this.userClassName),this.setClassName())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._tooltip?this._tooltip:this.virtualParent?this.virtualParent.tooltip:this._parent?this._parent.tooltip:void 0},set:function(e){this._tooltip&&this.removeDispose(this._tooltip),this._tooltip=e,e&&(e.parent=this.tooltipContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipDataItem",{get:function(){var e=this._tooltipDataItem;return e||this.dataItem},set:function(e){this._tooltipDataItem=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipColorSource",{get:function(){return this._tooltipColorSource},set:function(e){this._tooltipColorSource=e},enumerable:!0,configurable:!0}),t.prototype.showTooltip=function(e){"always"==this.showTooltipOn&&!this._tooltip&&this.tooltip&&(this._tooltip=this.tooltip.clone()),!e&&"pointer"==this.tooltipPosition&&this.isHover&&(e=O.i(Object(g.a)().lastPointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale));for(var t=this;void 0!=t;){if(!t.visible||t.disabled||t.__disabled)return void(this._tooltip&&this._tooltip.visible&&this._tooltip.hide(0));t=t.parent}if(D.d(this.tooltipText)||D.d(this.tooltipHTML)){var i=this.tooltip,n=this.tooltipDataItem;if(i){i.targetSprite=this;var r=this,a=this.tooltipColorSource;if((i.getStrokeFromObject||i.getFillFromObject)&&a&&(a.isTemplate?n&&A.e(n.sprites,(function(e){return e.clonedFrom!=a||(r=e,!1)})):r=a),i.getStrokeFromObject){for(var o=this.stroke,s=r;void 0!=s.parent&&(void 0==(o=s.stroke)&&(s=s.parent),void 0==o););o instanceof v.a?i.background.animate({property:"stroke",to:o},i.animationDuration):i.background.stroke=o}if(i.dataItem=n,i.label.populateStringFrom=this,i.getFillFromObject){var l=this.fill;for(s=r;void 0!=s.parent;)if(void 0==(l=s.fill)||l instanceof v.a&&void 0==l.rgb)s=s.parent;else if(void 0!=l)break;void 0==l&&(l=Object(v.b)("#000000")),l instanceof v.a&&i.visible?i.background.animate({property:"fill",to:l},i.animationDuration):i.background.fill=l,i.autoTextColor&&l instanceof v.a&&(i.label.fill=l.alternative)}var u="";if(this.tooltipHTML&&(i.html=this.tooltipHTML,u=this.tooltipHTML),this.tooltipText&&(i.text=this.tooltipText,u=this.tooltipText),this.updateTooltipPosition(e)){if(i.readerDescribedBy=this.uidAttr(),i.label.invalid&&i.label.validate(),void 0!=u&&""!=u&&""!=i.label.currentText){i&&!i.parent&&(i.parent=this.tooltipContainer);var c=i.defaultState.transitionDuration;return c<=0&&(c=1),i.show(c),i.currentSprite=this,!0}this.hideTooltip(0)}else this.hideTooltip(0)}}return!1},t.prototype.updateTooltipPosition=function(e){var t=this;if("pointer"!=this.tooltipPosition){var i=O.J({x:this.getTooltipX(),y:this.getTooltipY()},this);return this.pointTooltipTo(i)}if(this._interactionDisposer&&this._interactionDisposer.dispose(),this._interactionDisposer=Object(g.a)().body.events.on("track",(function(e){return t.pointTooltipTo(O.i(e.point,t.svgContainer.SVGContainer,t.svgContainer.cssScale),!0)})),e)return this.pointTooltipTo(e,!0)},t.prototype.pointTooltipTo=function(e,t){var i=this.tooltip;if(i&&this.topParent){if(i.showInViewport)return i.pointTo(e,t),!0;if(I.A(e,{x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight}))return i.pointTo(e,t),!0}return!1},t.prototype.hideTooltip=function(e){if("always"!=this.showTooltipOn){var t=this.tooltip;t&&(t.targetSprite==this&&(t.targetSprite=void 0),t.hide(e),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0))}},Object.defineProperty(t.prototype,"tooltipHTML",{get:function(){return this.getPropertyValue("tooltipHTML")},set:function(e){e=D.n(e),this.hoverable=!0,this.setPropertyValue("tooltipHTML",e)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipText",{get:function(){return this.getPropertyValue("tooltipText")},set:function(e){(e=D.n(e))&&(this.hoverable=!0),this.setPropertyValue("tooltipText",e)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipContainer",{get:function(){return this._tooltipContainer?this._tooltipContainer:this._parent?this._parent.tooltipContainer:void 0},set:function(e){this._tooltipContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipX",{get:function(){return this.getTooltipX()},set:function(e){this.setPercentProperty("tooltipX",e)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alwaysShowTooltip",{get:function(){return"always"==this.getPropertyValue("showTooltipOn")},set:function(e){(e=D.k(e))&&(this.showTooltipOn="always")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showTooltipOn",{get:function(){return this.getPropertyValue("showTooltipOn")},set:function(e){this.setPropertyValue("showTooltipOn",e)&&("hit"==e&&(this.clickable=!0),this.tooltip&&("always"==e?this.showTooltip():this.handleAlwaysShowTooltip()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipPosition",{get:function(){return this.getPropertyValue("tooltipPosition")},set:function(e){this.setPropertyValue("tooltipPosition",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipY",{get:function(){return this.getTooltipY()},set:function(e){this.setPercentProperty("tooltipY",e)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),t.prototype.getTooltipX=function(){var e,t=this.getPropertyValue("tooltipX");return D.d(t)||(t=Object(L.c)(50)),D.h(t)&&(e=t),t instanceof L.a&&(e=this.maxLeftSelf+this._measuredWidthSelf*t.value-this.pixelPaddingLeft-this.ex),D.h(e)||(e=0),e},t.prototype.getTooltipY=function(){var e,t=this.getPropertyValue("tooltipY");return D.d(t)||(t=Object(L.c)(50)),D.h(t)&&(e=t),t instanceof L.a&&(e=this.maxTopSelf+this._measuredHeightSelf*t.value-this.pixelPaddingTop-this.ey),D.h(e)||(e=0),e},t.prototype.raiseCriticalError=function(e,t){this.svgContainer&&(this._adapterO?this.modal.content=this._adapterO.apply("criticalError",e).message:this.modal.content=e.message,t?this.modal.closable=!0:this.disabled=!0,b.a.suppressErrors||this.modal.open()),b.a.verbose&&console.log(e)},t.prototype.processConfig=function(t){t&&(D.d(t.tooltipColorSource)&&D.j(t.tooltipColorSource)&&this.map.hasKey(t.tooltipColorSource)&&(t.tooltipColorSource=this.map.getKey(t.tooltipColorSource)),D.d(t.cursorOverStyle)&&D.j(t.cursorOverStyle)&&(t.cursorOverStyle=this.getCursorStyle(t.cursorOverStyle)),D.d(t.cursorDowntyle)&&D.j(t.cursorDowntyle)&&(t.cursorDowntyle=this.getCursorStyle(t.cursorDowntyle)),D.d(t.cursorOptions)&&(D.d(t.cursorOptions.overStyle)&&D.j(t.cursorOptions.overStyle)&&(t.cursorOptions.overStyle=this.getCursorStyle(t.cursorOptions.overStyle)),D.d(t.cursorOptions.downStyle)&&D.j(t.cursorOptions.downStyle)&&(t.cursorOptions.downStyle=this.getCursorStyle(t.cursorOptions.downStyle)))),e.prototype.processConfig.call(this,t),this.processDelayedMap()},t.prototype.getCursorStyle=function(e){switch(e){case"grab":return _.a.grab;case"grabbing":return _.a.grabbing;case"pointer":return _.a.pointer;case"horizontalResize":return _.a.horizontalResize;case"verticalResize":return _.a.verticalResize;default:return _.a.default}},t.prototype.configOrder=function(t,i){return t==i?0:"tooltipColorSource"==t?1:"tooltipColorSource"==i?-1:e.prototype.configOrder.call(this,t,i)},Object.defineProperty(t.prototype,"isHidden",{get:function(){return this._isHidden?this._isHidden:!!this._parent&&this._parent.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showOnInit",{get:function(){return this.getPropertyValue("showOnInit")},set:function(e){e=D.k(e),this.setShowOnInit(e)},enumerable:!0,configurable:!0}),t.prototype.setShowOnInit=function(e){this.setPropertyValue("showOnInit",e)&&(this.isTemplate||(!e||this.inited||this.hidden?this._showOnInitDisposer&&this._showOnInitDisposer.dispose():(this._showOnInitDisposer=new c.c([x.b.events.once("enterframe",this.hideInitially,this),this.events.once("beforevalidated",this.hideInitially,this,!1),this.events.on("inited",this.appear,this,!1)]),this._disposers.push(this._showOnInitDisposer))))},t.prototype.hideInitially=function(){this.isDisposed()||(this.appeared=!1,this.inited||this.hide(0))},t.prototype.appear=function(){var e=this;if(this.appeared=!1,this.hidden||this.isHidden||this.hide(0),this.hidden)this.appeared=!0,this.dispatch("appeared");else{var t=this.show();t&&!t.isFinished()?this.addDisposer(t.events.on("animationended",(function(){e.appeared=!0,e.dispatch("appeared")}))):(this.appeared=!0,this.dispatch("appeared"))}},Object.defineProperty(t.prototype,"hidden",{get:function(){return this.getPropertyValue("hidden")},set:function(e){e=D.k(e),this.setPropertyValue("hidden",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this._bbox},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plugins",{get:function(){var e=this;return this._plugins||(this._plugins=new u.a,this._disposers.push(this._plugins.events.on("inserted",(function(t){t.newValue.target=e,t.newValue.init()}))),this._disposers.push(new u.b(this._plugins))),this._plugins},enumerable:!0,configurable:!0}),t.prototype._systemUpdate=function(e){this.validate()},t.prototype._systemCheckIfValidate=function(){return!0},t.prototype._systemValidatePositions=function(){this.validatePosition()},t.prototype._systemValidateLayouts=function(){},t}(o.b);x.b.registeredClasses.Sprite=z},function(e,t,i){"use strict";e.exports=i(220)},function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i(2),r=i(16),a=i(95),o=i(12),s=i(15),l=i(24),u=i(22),c=i(86),h=i(9),p=i(3),d=i(20),f=i(8),m=i(7),y=i(1),v=i(0),g=i(14),_=i(25),b=i(23),x=function(e){function t(){var t=e.call(this)||this;return t._childrenByLayout=[],t._childrenDisposers=new l.a,t.hasFocused=!1,t.setStateOnSprites=[],t.layoutInvalid=!1,t._absoluteWidth=0,t._absoluteHeight=0,t._shouldBeReady=[],t._tapToActivate=!1,t.tapTimeout=3e3,t.className="Container",t._element=t.paper.addGroup("g"),t.group.add(t.element),t.setPropertyValue("pixelPerfect",!1),t.setPropertyValue("layout","absolute"),t.setPropertyValue("fixedWidthGrid",!1),t.setPropertyValue("verticalCenter","none"),t.setPropertyValue("horizontalCenter","none"),t._positionPrecision=4,t._disposers.push(new l.b(t._childrenDisposers)),t.children.events.on("inserted",t.handleChildAdded,t),t.children.events.on("removed",t.handleChildRemoved,t),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.handleChildAdded=function(e){this.processChild(e.newValue)},t.prototype.processChild=function(e){try{this._childrenDisposers.insertKey(e.uid,new s.c([e.events.on("transformed",this.handleChildTransform,this),e.events.on("zIndexChanged",this.sortAndAdd,this)]))}catch(t){}this.element&&this.element.add(e.group);e.parent=this,e.paper=this.paper,this.dispatchImmediately("childadded",{type:"childadded",newValue:e}),this.invalidate()},t.prototype.sortAndAdd=function(){this.sortChildren(),this.addChildren()},t.prototype.handleChildRemoved=function(e){var t=e.oldValue;(this._childrenDisposers.removeKey(t.uid),this.element)&&this.element.removeElement(t.group);t.isMeasured&&this.invalidateLayout(),this.dispatchImmediately("childremoved",{type:"childremoved",oldValue:t})},t.prototype.handleChildTransform=function(e){e.target.isMeasured&&this.invalidateLayout()},t.prototype.invalidateLayout=function(){this.layoutInvalid||this.disabled||this.isTemplate||"none"==this.layout||this.__disabled||(this.layoutInvalid=!0,p.b.addToInvalidLayouts(this),_.a.requestFrame())},t.prototype.invalidate=function(){e.prototype.invalidate.call(this),this.invalidateLayout()},t.prototype.deepInvalidate=function(){e.prototype.invalidate.call(this),m.d(this._childrenByLayout,(function(e){e instanceof t?e.deepInvalidate():e.invalidate()})),this.invalidateLayout()},Object.defineProperty(t.prototype,"children",{get:function(){return this._children||(this._children=new o.a),this._children},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(e){this.setPropertyValue("minWidth",e)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(e){this.setPropertyValue("minHeight",e)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),t.prototype.removeElement=function(){},t.prototype.sortChildren=function(){var e=this;if(this._childrenByLayout=[],"none"!=this.layout&&"absolute"!=this.layout&&this.layout){var t=[],i=[];f.d(this.children.iterator(),(function(n){"horizontal"==e.layout||"grid"==e.layout?v.h(n.percentWidth)?i.push(n):t.push(n):"vertical"==e.layout&&v.h(n.percentHeight)?i.push(n):t.push(n)})),this._childrenByLayout=t.concat(i)}else this._childrenByLayout=this.children.values;this.calculateRelativeSize()},t.prototype.calculateRelativeSize=function(){var e=this,t=0,i=0;m.d(this._childrenByLayout,(function(e){e.isMeasured&&(v.h(e.percentWidth)&&(t+=e.percentWidth),v.h(e.percentHeight)&&(i+=e.percentHeight))})),m.d(this._childrenByLayout,(function(n){n.isMeasured&&("horizontal"==e.layout&&(v.h(n.percentWidth)&&(n.relativeWidth=n.percentWidth/t),v.h(n.percentHeight)&&(n.relativeHeight=n.percentHeight/100)),"vertical"==e.layout&&(v.h(n.percentHeight)&&(n.relativeHeight=n.percentHeight/i),v.h(n.percentWidth)&&(n.relativeWidth=n.percentWidth/100)),"grid"==e.layout&&(v.h(n.percentHeight)&&(n.relativeHeight=n.percentHeight/100),v.h(n.percentWidth)&&(n.relativeWidth=n.percentWidth/100))),"absolute"!=e.layout&&n.isMeasured||(v.h(n.percentWidth)&&(n.relativeWidth=n.percentWidth/100),v.h(n.percentHeight)&&(n.relativeHeight=n.percentHeight/100))}))},t.prototype.addChildren=function(){if(this.element){var e=m.c(this.children.values),t=e.map((function(e,t){return{idx:t,data:e}}));t.sort((function(e,t){var i=e.data.zIndex||0,n=t.data.zIndex||0;return i<n?-1:i>n?1:e.idx-t.idx})),e=t.map((function(e){return e.data}));var i=this.element,n=!0;if(i.node&&i.node.childNodes)for(var r=0,a=i.node.childNodes.length;r<a;r++)if(i.node.childNodes[r]!=e[r].group.node){n=!1;break}n||(m.d(e,(function(e){e.group&&i.add(e.group)})),this._background&&this.group.addToBack(this._background.group),this.invalidateLayout())}},t.prototype.createChild=function(e){var t=new e;return t.parent=this,t},t.prototype.removeChildren=function(){for(;this.children.length>0;){var e=this.children.getIndex(0);e.parent=void 0,this.children.removeValue(e)}},t.prototype.disposeChildren=function(){for(;this.children.length>0;){var e=this.children.getIndex(0);e.dispose(),this.children.removeValue(e)}},Object.defineProperty(t.prototype,"background",{get:function(){return this._background||(this._background=this.createBackground(),this.processBackground()),this._background},set:function(e){this._background&&this.background!=e&&this.removeDispose(this._background),e&&(this._background=e,this._disposers.push(e),this.processBackground())},enumerable:!0,configurable:!0}),t.prototype.handleGlobalScale=function(){e.prototype.handleGlobalScale.call(this),this.children.each((function(e){e.handleGlobalScale()}))},t.prototype.createBackground=function(){return new c.a},t.prototype.processBackground=function(){var e=this._background;e&&(e.isMeasured=!1,this._background.fill=(new d.a).getFor("background"),e.parent=this,e.isMeasured=!1,this.children.removeValue(e),this._disposers.push(e),this.group.addToBack(this._background.group))},t.prototype.validateLayout=function(){var e=this;p.b.removeFromInvalidLayouts(this),this.layoutInvalid=!1,this._availableWidth=this.innerWidth,this._availableHeight=this.innerHeight;var t=0,i=0,n=!0;this.children&&(this.sortChildren(),m.d(this._childrenByLayout,(function(r){var a,o;if(v.h(r.relativeWidth)?(a=y.E(e._availableWidth*r.relativeWidth,2),"horizontal"==e.layout&&(a-=r.pixelMarginRight+r.pixelMarginLeft)):"horizontal"==e.layout&&r.invalid&&r.validate(),v.h(r.relativeHeight)?(o=y.E(e._availableHeight*r.relativeHeight,2),"vertical"==e.layout&&(o-=r.pixelMarginTop+r.pixelMarginBottom)):"vertical"==e.layout&&r.invalid&&r.validate(),0==r.invalid){if(v.h(r.relativeWidth)&&(r.maxWidth=a),v.h(r.relativeHeight)&&(r.maxHeight=o),r.isMeasured){"horizontal"==e.layout&&(v.h(r.percentWidth)||r.measuredWidth>0&&(e._availableWidth-=r.measuredWidth+r.pixelMarginLeft+r.pixelMarginRight)),"vertical"==e.layout&&(v.h(r.percentHeight)||r.measuredHeight>0&&(e._availableHeight-=r.measuredHeight+r.pixelMarginTop+r.pixelMarginBottom));var s=r.measuredWidth,l=r.measuredHeight;"none"!=r.align&&(s+=r.pixelMarginLeft+r.pixelMarginRight),"none"!=r.valign&&(l+=r.pixelMarginTop+r.pixelMarginBottom),t=Math.max(t,s),i=Math.max(i,l)}}else r.isMeasured&&(v.h(r.relativeWidth)&&r.maxWidth!=a&&(r.maxWidth=a,n=!1),v.h(r.relativeHeight)&&r.maxHeight!=o&&(r.maxHeight=o,n=!1))}))),this._absoluteWidth=t,this._absoluteHeight=i,n&&this.arrange()},t.prototype.arrange=function(){var e,t,i,n,r,a,o,s,l,u,c,p=this,d=this.children,g=0,_=0,b=y.B(this.innerWidth,this._absoluteWidth),x=y.B(this.innerHeight,this._absoluteHeight),w=this.pixelPaddingLeft,k=this.pixelPaddingRight,P=this.pixelPaddingTop,S=this.pixelPaddingBottom,T=0,C=0,O=0,I=0,E=[],A=[],M=this.maxWidth,D=this.maxHeight,j=this.minWidth,F=this.minHeight,L=m.c(d.values);if(this.reverseOrder&&L.reverse(),"grid"==this.layout){a=M,r=1;for(var R=0,z=L.length;R<z;R++){if((B=L[R]).isMeasured&&!B.disabled&&!B.__disabled){var V=B.measuredWidth;V<a&&(a=V),V>r&&(r=V)}}a=y.i(a,1,M),r=y.i(r,1,M),o=this.fixedWidthGrid?M/r:M/a,o=y.B(1,Math.floor(o)),o=y.C(this.maxColumns,o),E=this.getColumnWidth(L,o,r)}for(R=0,z=L.length;R<z;R++){var B;if(!(B=L[R]).isMeasured||B.disabled||B.__disabled)B.validatePosition();else{var N=void 0,U=void 0,W=B.pixelMarginLeft,G=B.pixelMarginRight,H=B.pixelMarginTop,X=B.pixelMarginBottom,Y=B.measuredWidth,q=B.measuredHeight,Z=void 0,K=void 0,$=void 0,J=void 0;switch(this.layout){case"none":break;case"absolute":switch(B.align){case"left":N=W-B.maxLeft;break;case"center":N=(b-Y)/2-B.maxLeft;break;case"right":N=b-G-B.maxRight;break;default:B.x instanceof h.a||(N=B.pixelX)}switch(B.valign){case"top":U=H-B.maxTop;break;case"middle":U=(x-q)/2-B.maxTop;break;case"bottom":U=x-X-B.maxBottom;break;default:B.y instanceof h.a||(U=B.pixelY)}break;case"vertical":switch(B.align){case"left":N=W-B.maxLeft;break;case"center":N=(b-Y)/2-B.maxLeft;break;case"right":N=b-G-B.maxRight;break;default:N=B.pixelX}C=(U=C+H-B.maxTop)+B.maxBottom+X;break;case"horizontal":switch(B.valign){case"top":U=H-B.maxTop;break;case"middle":U=(x-q)/2-B.maxTop;break;case"bottom":U=x-X-B.maxBottom;break;default:U=B.pixelY}T=(N=T+W-B.maxLeft)+B.maxRight+G;break;case"grid":switch(N=T+W-B.maxLeft,B.valign){case"top":U=C+H-B.maxTop;break;case"middle":U=C+(x-q)/2-B.maxTop;break;case"bottom":U=C+x-X-B.maxBottom;break;default:U=C-B.maxTop}T+=E[I],A[O]=y.B(A[O],q);var Q=E[++I];if(v.h(Q)||(Q=r),T>y.C(this.innerWidth,M)-Q+1&&I<o){o=I,T=0,C=0,O=0,I=0,E=this.getColumnWidth(L,o,r),A=[],R=-1;continue}I>=o&&(I=0,C+=A[O],O++,T=0)}"none"!==this.layout&&(B.moveTo({x:N,y:U}),Z=N+B.maxLeft-W,K=N+B.maxRight+G,$=U+B.maxTop-H,J=U+B.maxBottom+X,(K>t||!v.h(t))&&(t=K),(Z<e||!v.h(e))&&(e=Z),($<i||!v.h(i))&&(i=$),(J>n||!v.h(n))&&(n=J),(K>l||!v.h(l))&&(l=K),(Z<s||!v.h(s))&&(s=Z),($<u||!v.h(u))&&(u=$),(J>c||!v.h(c))&&(c=c))}}if("none"==this.layout){var ee=this.bbox;e=ee.x,t=ee.x+ee.width,i=ee.y,n=ee.y+ee.height}v.h(e)||(e=0,s=0),v.h(t)||(l=t=this._availableWidth),v.h(i)||(i=0,u=0),v.h(n)||(c=n=this._availableHeight),v.h(u)||(u=0),v.h(c)||(c=u),v.h(s)||(s=0),v.h(l)||(l=s),g=t-e,_=n-i,v.h(this.relativeWidth)&&(e=0,t=g=M-w-k),v.h(this.relativeHeight)&&(i=0,n=_=D-P-S),v.h(this._pixelWidth)&&(e=0,g=this._pixelWidth-w-k),v.h(j)&&g<j&&(e=0,g=this.minWidth-w-k),v.h(this._pixelHeight)&&(i=0,_=this._pixelHeight-P-S),v.h(F)&&_<F&&(i=0,_=F-P-S);var te=l-s,ie=c-u;if("none"!=this.layout&&(this.contentAlign||this.contentValign)&&d.length>0){var ne,re,ae=g,oe=_;ae<te&&(ae=te),oe<ie&&(oe=ie),"center"==this.contentAlign&&(ne=(ae-te)/2),"right"==this.contentAlign&&(ne=ae-te),"middle"==this.contentValign&&(re=(oe-ie)/2),"bottom"==this.contentValign&&(re=oe-ie),v.h(ne)&&f.d(d.iterator(),(function(e){var t=e.maxLeft,i=ne;"horizontal"==p.layout&&(e.x=e.pixelX+i),"grid"==p.layout&&(e.x=e.pixelX+i),"vertical"==p.layout&&(i+=e.pixelMarginLeft,"none"==e.align&&(e.x=i-t)),"absolute"==p.layout&&(i+=e.pixelMarginLeft,"none"==e.align&&(e.x=i-t))})),v.h(re)&&f.d(d.iterator(),(function(e){var t=e.maxTop,i=re;"horizontal"==p.layout&&(i+=e.pixelMarginTop,"none"==e.valign&&(e.y=i-t)),"grid"==p.layout&&(i+=e.pixelMarginTop,e.y=i-t),"vertical"==p.layout&&(e.y=e.pixelY+i),"absolute"==p.layout&&(i+=e.pixelMarginTop,"none"==e.valign&&(e.y=i-t))}))}var se=this.bbox;g=y.B(g,j),_=y.B(_,F),this.contentWidth=g,this.contentHeight=_,g=y.C(g,M),_=y.C(_,D),this._bbox={x:e,y:i,width:g,height:_};var le=this.maxLeft,ue=this.maxTop,ce=this.maxBottom,he=this.maxRight;if(this.measure(),(le!=this.maxLeft||he!=this.maxRight||ue!=this.maxTop||ce!=this.maxBottom)&&this.events.isEnabled("transformed")){var pe={type:"transformed",target:this};se&&(pe.dummyData=se.width+" "+g+"  "+se.height+" "+_),this.events.dispatchImmediately("transformed",pe)}this.dispatchImmediately("layoutvalidated")},t.prototype.updateCenter=function(){e.prototype.updateCenter.call(this),this.updateBackground()},t.prototype.updateBackground=function(){var e=this._background;e&&(e.x=this.maxLeft,e.y=this.maxTop,e.width=this.maxRight-this.maxLeft,e.height=this.maxBottom-this.maxTop)},t.prototype.getColumnWidth=function(e,t,i){var n=this,r=[],a=0;return m.d(e,(function(e){!e.isMeasured||e.disabled||e.__disabled||(n.fixedWidthGrid?r[a]=i:r[a]=y.B(r[a],e.measuredWidth+e.pixelMarginRight+e.pixelMarginLeft),++a==t&&(a=0))})),r},Object.defineProperty(t.prototype,"layout",{get:function(){return this.getPropertyValue("layout")},set:function(e){this.setPropertyValue("layout",e)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentValign",{get:function(){return this.getPropertyValue("contentValign")},set:function(e){this.setPropertyValue("contentValign",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentAlign",{get:function(){return this.getPropertyValue("contentAlign")},set:function(e){this.setPropertyValue("contentAlign",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedWidthGrid",{get:function(){return this.getPropertyValue("fixedWidthGrid")},set:function(e){this.setPropertyValue("fixedWidthGrid",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxColumns",{get:function(){return this.getPropertyValue("maxColumns")},set:function(e){this.setPropertyValue("maxColumns",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reverseOrder",{get:function(){return this.getPropertyValue("reverseOrder")},set:function(e){this.setPropertyValue("reverseOrder",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"setStateOnChildren",{get:function(){return this.getPropertyValue("setStateOnChildren")},set:function(e){this.setPropertyValue("setStateOnChildren",e,!0)},enumerable:!0,configurable:!0}),t.prototype.fitsToBounds=function(e){var t=e.x,i=e.y,n=.5;return t>=-.5&&t<=this.pixelWidth+n&&i>=-.5&&i<=this.pixelHeight+n},t.prototype.copyFrom=function(t){var i=this;e.prototype.copyFrom.call(this,t),this.layout=t.layout,this.setStateOnChildren=t.setStateOnChildren,t._background&&(this.background=t._background.clone(),this.background.copyFrom(t._background)),f.d(t.children.iterator(),(function(e){e.shouldClone&&(e.clone().parent=i)}))},Object.defineProperty(t.prototype,"preloader",{get:function(){var e=this._preloader;return e||(this.parent?this.parent.preloader:void 0)},set:function(e){this._preloader&&this.removeDispose(this._preloader),this._preloader=e,e&&(e.parent=this.tooltipContainer,this._disposers.push(e))},enumerable:!0,configurable:!0}),t.prototype.setPaper=function(t){var i=this,n=e.prototype.setPaper.call(this,t);return n&&(this._background&&(this._background.paper=t,this._background.topParent=this.topParent),this.children.each((function(e){e.setPaper(t),e.topParent=i.topParent}))),n},t.prototype.removeFromInvalids=function(){e.prototype.removeFromInvalids.call(this),p.b.removeFromInvalidLayouts(this)},t.prototype.setDataItem=function(t){this._dataItem!=t&&(f.d(this.children.iterator(),(function(e){e.dataItem=t})),this._background&&(this._background.dataItem=t)),e.prototype.setDataItem.call(this,t)},t.prototype.measureElement=function(){this.disabled||this.isTemplate||"none"==this.layout||this.__disabled||this.validateLayout()},Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this.getPropertyValue("fontFamily")},set:function(e){this.setPropertyValue("fontFamily",e,!0)&&(this.setSVGAttribute({"font-family":e}),this.invalidateLabels())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.getPropertyValue("fontSize")},set:function(e){this.setPropertyValue("fontSize",e,!0)&&(this.setSVGAttribute({"font-size":e}),this.invalidateLabels())},enumerable:!0,configurable:!0}),t.prototype.invalidateLabels=function(){this.children.each((function(e){e.hardInvalidate?(e.hardInvalidate(),e.events.once("validated",e.handleValidate,e,!1)):e instanceof t&&e.invalidateLabels()}))},Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this.getPropertyValue("fontWeight")},set:function(e){this.setPropertyValue("fontWeight",e),this.setSVGAttribute({"font-weight":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textDecoration",{get:function(){return this.getPropertyValue("textDecoration")},set:function(e){this.setPropertyValue("textDecoration",e),this.setSVGAttribute({"text-decoration":e})},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._background&&this._background.dispose(),this._shouldBeReady=[],this.disposeChildren(),e.prototype.dispose.call(this)},t.prototype.setState=function(t,i,n){var r=t;return t instanceof a.a&&(r=t.name),this.setStateOnChildren&&f.d(this.children.iterator(),(function(e){e.setState(r,i,n),"active"!=r&&(e.isActive=!1)})),this._background&&this._background.setState(r),this.setStateOnSprites.length&&m.d(this.setStateOnSprites,(function(e){e.setState(r,i,n)})),e.prototype.setState.call(this,t,i,n)},t.prototype.setActive=function(t){e.prototype.setActive.call(this,t),this._background&&(this._background.isActive=t)},t.prototype.dispatchReady=function(){var t=this;if(!this.isReady()&&!this.isDisposed()){var i=!0;f.e(this.children.iterator(),(function(e){return!!(e.__disabled||e.disabled||e.isReady())||(i=!1,!1)})),m.e(this._shouldBeReady,(function(e){return!!(e.__disabled||e.disabled||e.isReady())||(i=!1,!1)})),i?e.prototype.dispatchReady.call(this):p.b.events.once("exitframe",(function(){t.dispatchReady(),_.a.requestFrame()}),void 0,!1)}},t.prototype._systemUpdate=function(t){this.children.each((function(e){e.invalid&&(e._systemCheckIfValidate()?e.dataItem&&e.dataItem.component&&e.dataItem.component.dataInvalid?t.push(e):e.validate():t.push(e))})),e.prototype._systemUpdate.call(this,t)},t.prototype._systemValidatePositions=function(){this.children.each((function(e){e.positionInvalid&&e.validatePosition()})),e.prototype._systemValidatePositions.call(this)},t.prototype._systemValidateLayouts=function(){this.layoutInvalid&&!this.isDisposed()&&this.validateLayout()},Object.defineProperty(t.prototype,"tapToActivate",{get:function(){return this._tapToActivate},set:function(e){this._tapToActivate!=e&&this.setTapToActivate(e)},enumerable:!0,configurable:!0}),t.prototype.setTapToActivate=function(e){var t=this;this._tapToActivate=e,this.interactions.isTouchProtected=e,e&&this.interactions.setEventDisposer("container-tapToActivate",e,(function(){return new s.c([t.events.on("hit",t.handleTapToActivate,t,!1),t.events.on("down",t.initTapTimeout,t,!1),t.events.on("track",t.initTapTimeout,t,!1),Object(u.a)().body.events.on("down",(function(e){Object(u.a)().isLocalElement(e.pointer,t.paper.svg,t.uid)||t.handleTapToActivateDeactivation()}),t,!1)])})),Object(u.a)()},t.prototype.handleTapToActivate=function(){this.interactions.isTouchProtected=!1,this.initTapTimeout()},t.prototype.handleTapToActivateDeactivation=function(){this.interactions.isTouchProtected=!0},t.prototype.initTapTimeout=function(){var e=this;this._tapToActivateTimeout&&this._tapToActivateTimeout.dispose(),this.tapToActivate&&!this.interactions.isTouchProtected&&this.tapTimeout&&(this._tapToActivateTimeout=this.setTimeout((function(){e.handleTapToActivateDeactivation()}),this.tapTimeout))},t.prototype.moveHtmlContainer=function(e){var t=g.n(e);if(t){this.htmlContainer=t;var i=this.svgContainer;i.htmlElement=t,i.htmlElement.appendChild(i.SVGContainer),i.initSensor(),i.measure()}else v.j(e)&&""!=e&&_.a.log("html container '"+e+"' not found")},t.prototype.hasLicense=function(){if(b.a.commercialLicense)return!0;for(var e=0;e<b.a.licenses.length;e++)if(b.a.licenses[e].match(/^CH.{5,}/i))return!0;return!1},t}(r.a);p.b.registeredClasses.Container=x},function(e,t,i){"use strict";i.d(t,"e",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"f",(function(){return s})),i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return c})),i.d(t,"h",(function(){return h})),i.d(t,"i",(function(){return p})),i.d(t,"g",(function(){return d}));var n=i(0),r={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6};function a(e){switch(e){case"year":return;case"month":return"year";case"week":case"day":return"month";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second"}}function o(e,t){return n.d(t)||(t=1),r[e]*t}function s(){return(new Date).getTime()}function l(e){return new Date(e.getTime())}function u(e,t,i,n){e=new Date(e.getTime()),t=new Date(t.getTime());var r=0,o=0;n||"millisecond"==i||(r=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-r),o=t.getTimezoneOffset(),t.setUTCMinutes(t.getUTCMinutes()-o));var s=!1;switch(i){case"year":e.getUTCFullYear()!=t.getUTCFullYear()&&(s=!0);break;case"month":(e.getUTCFullYear()!=t.getUTCFullYear()||e.getUTCMonth()!=t.getUTCMonth())&&(s=!0);break;case"day":(e.getUTCMonth()!=t.getUTCMonth()||e.getUTCDate()!=t.getUTCDate())&&(s=!0);break;case"hour":e.getUTCHours()!=t.getUTCHours()&&(s=!0);break;case"minute":e.getUTCMinutes()!=t.getUTCMinutes()&&(s=!0);break;case"second":e.getUTCSeconds()!=t.getUTCSeconds()&&(s=!0);break;case"millisecond":e.getTime()!=t.getTime()&&(s=!0)}if(s)return!0;var l=a(i);return!!l&&(e.setUTCMinutes(e.getUTCMinutes()+r),t.setUTCMinutes(t.getUTCMinutes()+o),u(e,t,l,n))}function c(e,t,i,n){var r=0;switch(n||"millisecond"==t||(r=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-r)),t){case"day":var a=e.getUTCDate();e.setUTCDate(a+i);break;case"second":var o=e.getUTCSeconds();e.setUTCSeconds(o+i);break;case"millisecond":var s=e.getUTCMilliseconds();e.setUTCMilliseconds(s+i);break;case"hour":var l=e.getUTCHours();e.setUTCHours(l+i);break;case"minute":var u=e.getUTCMinutes();e.setUTCMinutes(u+i);break;case"year":var c=e.getUTCFullYear();e.setUTCFullYear(c+i);break;case"month":var h=e.getUTCMonth();e.setUTCMonth(h+i);break;case"week":var p=e.getUTCDate();e.setUTCDate(p+7*i)}if(!n&&"millisecond"!=t&&(e.setUTCMinutes(e.getUTCMinutes()+r),"day"==t||"week"==t||"month"==t||"year"==t)){var d=e.getTimezoneOffset();if(d!=r){var f=d-r;e.setUTCMinutes(e.getUTCMinutes()+f),e.getTimezoneOffset()!=d&&e.setUTCMinutes(e.getUTCMinutes()-f)}}return e}function h(e,t,i,r,a,s,l,u){void 0===l&&(l=0),n.h(i)||(i=1);var c=0;switch(u&&-1!=["day","month","week","year"].indexOf(t)&&(e=p(e,u)),a||"millisecond"==t||(c=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-c)),t){case"day":var d=e.getUTCDate();if(i>1){if(s){s=h(s,"day",1);var f=e.getTime()-s.getTime(),m=Math.floor(f/o("day")/i),y=o("day",m*i);e.setTime(s.getTime()+y-c*o("minute"))}}else e.setUTCDate(d);e.setUTCHours(0,0,0,0);break;case"second":var v=e.getUTCSeconds();i>1&&(v=Math.floor(v/i)*i),e.setUTCSeconds(v,0);break;case"millisecond":if(1==i)return e;var g=e.getUTCMilliseconds();g=Math.floor(g/i)*i,e.setUTCMilliseconds(g);break;case"hour":var _=e.getUTCHours();i>1&&(_=Math.floor(_/i)*i),e.setUTCHours(_,l,0,0);break;case"minute":var b=e.getUTCMinutes();g=e.getUTCMilliseconds(),i>1&&(b=Math.floor(b/i)*i),e.setUTCMinutes(b,0,0);break;case"month":var x=e.getUTCMonth();i>1&&(x=Math.floor(x/i)*i),e.setUTCMonth(x,1),e.setUTCHours(0,l,0,0);break;case"year":var w=e.getUTCFullYear();i>1&&(w=Math.floor(w/i)*i),e.setUTCFullYear(w,0,1),e.setUTCHours(0,l,0,0);break;case"week":var k=e.getUTCDate(),P=e.getUTCDay();n.h(r)||(r=1),k=P>=r?k-P+r:k-(7+P)+r,e.setUTCDate(k),e.setUTCHours(0,l,0,0)}if(!a&&"millisecond"!=t&&(e.setUTCMinutes(e.getUTCMinutes()+c),"day"==t||"week"==t||"month"==t||"year"==t)){var S=e.getTimezoneOffset();if(S!=c){var T=S-c;e.setUTCMinutes(e.getUTCMinutes()+T)}}return e}function p(e,t){return new Date(e.toLocaleString("en-US",{timeZone:t}))}function d(e){var t=new Date;return t.setHours(0,0,0,0),p(t,e).getMinutes()}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(2),r=i(26),a=i(3),o=i(13),s=function(e){function t(){var t=e.call(this)||this;return t._purposes={stroke:Object(o.b)("#e5e5e5"),fill:Object(o.b)("#f3f3f3"),primaryButton:Object(o.b)("#6794dc"),primaryButtonHover:Object(o.b)("#6771dc"),primaryButtonDown:Object(o.b)("#68dc75"),primaryButtonActive:Object(o.b)("#68dc75"),primaryButtonText:Object(o.b)("#FFFFFF"),primaryButtonStroke:Object(o.b)("#FFFFFF"),secondaryButton:Object(o.b)("#d9d9d9"),secondaryButtonHover:Object(o.b)("#d9d9d9").brighten(-.25),secondaryButtonDown:Object(o.b)("#d9d9d9").brighten(-.35),secondaryButtonActive:Object(o.b)("#d9d9d9").brighten(.35),secondaryButtonText:Object(o.b)("#000000"),secondaryButtonStroke:Object(o.b)("#FFFFFF"),grid:Object(o.b)("#000000"),background:Object(o.b)("#ffffff"),alternativeBackground:Object(o.b)("#000000"),text:Object(o.b)("#000000"),alternativeText:Object(o.b)("#FFFFFF"),disabledBackground:Object(o.b)("#999999"),positive:Object(o.b)("#67dc75"),negative:Object(o.b)("#dc6788")},t.className="InterfaceColorSet",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.debug=function(){},t.prototype.getFor=function(e){return this._purposes[e]},t.prototype.setFor=function(e,t){this._purposes[e]=t},t}(r.a);a.b.registeredClasses.InterfaceColorSet=s},function(e,t,i){"use strict";i.d(t,"b",(function(){return o}));var n=i(33),r=i(253),a=i(56);function o(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}function s(e,t,i){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;return n="function"===typeof e?e(i):Array.isArray(e)?e[i]||r:o(e,i)||r,t&&(n=t(n)),n}t.a=function(e){var t=e.prop,i=e.cssProperty,l=void 0===i?e.prop:i,u=e.themeKey,c=e.transform,h=function(e){if(null==e[t])return null;var i=e[t],h=o(e.theme,u)||{};return Object(a.b)(e,i,(function(e){var i=s(h,c,e);return e===i&&"string"===typeof e&&(i=s(h,c,"".concat(t).concat("default"===e?"":Object(r.a)(e)),e)),!1===l?i:Object(n.a)({},l,i)}))};return h.propTypes={},h.filterProps=[t],h}},function(e,t,i){"use strict";i.d(t,"a",(function(){return P}));var n=i(2),r=i(26),a=i(12),o=i(37),s=i(15),l=i(131),u=i(132),c=i(24),h=i(133),p=i(14),d=i(50),f=i(25),m=i(23),y=i(41),v=i(1),g=i(7),_=i(8),b=i(0),x=i(19),w=function(e){function t(){var i=e.call(this)||this;return i._globalEventsAdded=!1,i._pointerEvents={pointerdown:"mousedown",pointerup:"mouseup",pointermove:"mousemove",pointercancel:"mouseup",pointerover:"mouseover",pointerout:"mouseout",wheel:"wheel"},i._usePointerEventsOnly=!1,i._useTouchEventsOnly=!1,i._addHoverEvents=!0,i._passiveSupported=!1,i._delayedEvents={out:[]},i.overObjects=new a.a,i.downObjects=new a.a,i.trackedObjects=new a.a,i.transformedObjects=new a.a,i.pointers=new c.a,i.inertiaOptions=new c.a,i.hitOptions={doubleHitTime:300,hitTolerance:10,noFocus:!0},i.hoverOptions={touchOutBehavior:"leave",touchOutDelay:1e3},i.swipeOptions={time:500,verticalThreshold:75,horizontalThreshold:30},i.keyboardOptions={speed:.1,accelleration:1.2,accellerationDelay:2e3},i.mouseOptions={sensitivity:1},i.className="Interaction",i.body=i.getInteraction(document.body),i._disposers.push(i.body),window.hasOwnProperty("PointerEvent")?(i._pointerEvents.pointerdown="pointerdown",i._pointerEvents.pointerup="pointerup",i._pointerEvents.pointermove="pointermove",i._pointerEvents.pointercancel="pointercancel",i._pointerEvents.pointerover="pointerover",i._pointerEvents.pointerout="pointerout"):window.hasOwnProperty("MSPointerEvent")?(i._pointerEvents.pointerdown="MSPointerDown",i._pointerEvents.pointerup="MSPointerUp",i._pointerEvents.pointermove="MSPointerMove",i._pointerEvents.pointercancel="MSPointerUp",i._pointerEvents.pointerover="MSPointerOver",i._pointerEvents.pointerout="MSPointerOut"):"undefined"!==typeof matchMedia&&matchMedia("(pointer:fine)").matches?"ontouchstart"in window&&(i._addHoverEvents=!1,i._useTouchEventsOnly=!0):window.navigator.userAgent.match(/MSIE /)||i.fullFF()?i._usePointerEventsOnly=!0:i._useTouchEventsOnly=!0,"onwheel"in document.createElement("div")?i._pointerEvents.wheel="wheel":b.d(document.onmousewheel)&&(i._pointerEvents.wheel="mousewheel"),i.inertiaOptions.setKey("move",{time:100,duration:500,factor:1,easing:y.d}),i.inertiaOptions.setKey("resize",{time:100,duration:500,factor:1,easing:y.d}),i._passiveSupported=t.passiveSupported,i.applyTheme(),i}return Object(n.c)(t,e),t.prototype.fullFF=function(){return window.navigator.userAgent.match(/Firefox/)&&!window.navigator.userAgent.match(/Android/)},t.prototype.debug=function(){},t.prototype.addGlobalEvents=function(){var e=this;this._globalEventsAdded||(this._useTouchEventsOnly||(this._disposers.push(Object(p.f)(document,this._pointerEvents.pointerdown,(function(t){e.handleGlobalPointerDown(t)}))),this._disposers.push(Object(p.f)(document,this._pointerEvents.pointermove,(function(t){e.handleGlobalPointerMove(t)}))),this._disposers.push(Object(p.f)(document,this._pointerEvents.pointerup,(function(t){e.handleGlobalPointerUp(t)}))),this._disposers.push(Object(p.f)(document,this._pointerEvents.pointercancel,(function(t){e.handleGlobalPointerUp(t,!0)}))),this._disposers.push(Object(p.f)(document,"mouseenter",(function(t){b.d(t.relatedTarget)||0!=t.buttons&&0!=t.which||e.handleDocumentLeave(t)})))),this._usePointerEventsOnly||(this._disposers.push(Object(p.f)(document,"touchstart",(function(t){e.handleGlobalTouchStart(t)}))),this._disposers.push(Object(p.f)(document,"touchmove",(function(t){e.handleGlobalTouchMove(t)}))),this._disposers.push(Object(p.f)(document,"touchend",(function(t){e.handleGlobalTouchEnd(t)})))),this._disposers.push(Object(p.f)(document,"keydown",(function(t){e.handleGlobalKeyDown(t)}))),this._disposers.push(Object(p.f)(document,"keyup",(function(t){e.handleGlobalKeyUp(t)}))),this._globalEventsAdded=!0)},t.prototype.processClickable=function(e){this.processTouchable(e)},t.prototype.processContextMenu=function(e){e.contextMenuDisabled?e.eventDisposers.hasKey("contextMenuDisabled")||e.eventDisposers.setKey("contextMenuDisabled",Object(p.f)(e.element,"contextmenu",(function(e){e.preventDefault()}))):e.eventDisposers.hasKey("contextMenuDisabled")&&e.eventDisposers.getKey("contextMenuDisabled").dispose()},t.prototype.processHoverable=function(e){var t=this;if(e.hoverable||e.trackable)this.addGlobalEvents(),this.applyCursorOverStyle(e),!e.eventDisposers.hasKey("hoverable")&&this._addHoverEvents&&e.eventDisposers.setKey("hoverable",new s.c([Object(p.f)(e.element,this._pointerEvents.pointerout,(function(i){return t.handlePointerOut(e,i)})),Object(p.f)(e.element,this._pointerEvents.pointerover,(function(i){return t.handlePointerOver(e,i)}))])),e.trackable;else{var i=e.eventDisposers.getKey("hoverable");null!=i&&(i.dispose(),e.eventDisposers.removeKey("hoverable"))}this.processTouchable(e)},t.prototype.processMovable=function(e){(e.draggable||e.swipeable||e.trackable||e.resizable)&&(this.isGlobalElement(e)||e.isTouchProtected||this.prepElement(e),this.applyCursorOverStyle(e)),this.processTouchable(e)},t.prototype.processTrackable=function(e){this.processHoverable(e),this.processMovable(e),e.trackable?this.trackedObjects.moveValue(e):this.trackedObjects.removeValue(e)},t.prototype.processDraggable=function(e){this.processMovable(e)},t.prototype.processSwipeable=function(e){this.processMovable(e)},t.prototype.processResizable=function(e){this.processMovable(e)},t.prototype.processWheelable=function(e){var t=this;if(e.wheelable)e.eventDisposers.hasKey("wheelable")||e.eventDisposers.setKey("wheelable",new s.c([Object(p.f)(e.element,this._pointerEvents.wheel,(function(i){return t.handleMouseWheel(e,i)}),!!this._passiveSupported&&{passive:!1}),e.events.on("out",(function(i){e.wheelable&&t.unlockWheel()})),e.events.on("over",(function(i){e.wheelable&&t.lockWheel()}))]));else{var i=e.eventDisposers.getKey("wheelable");null!=i&&(i.dispose(),e.eventDisposers.removeKey("wheelable"))}},t.prototype.processFocusable=function(e){var t=this;if(!0===e.focusable&&e.tabindex>-1&&!this._useTouchEventsOnly)e.eventDisposers.hasKey("focusable")||e.eventDisposers.setKey("focusable",new s.c([Object(p.f)(e.element,"focus",(function(i){return t.handleFocus(e,i)})),Object(p.f)(e.element,"blur",(function(i){return t.handleBlur(e,i)})),Object(p.f)(e.element,this._pointerEvents.pointerdown,(function(i){return t.handleFocusBlur(e,i)})),Object(p.f)(e.element,"touchstart",(function(i){return t.handleFocusBlur(e,i)}),!!this._passiveSupported&&{passive:!1})]));else{var i=e.eventDisposers.getKey("focusable");null!=i&&(i.dispose(),e.eventDisposers.removeKey("focusable"))}},t.prototype.processTouchable=function(e){var t=this;if(e.clickable||e.hoverable||e.trackable||e.draggable||e.swipeable||e.resizable)this.addGlobalEvents(),e.eventDisposers.hasKey("touchable")||(this._useTouchEventsOnly||this._usePointerEventsOnly?this._useTouchEventsOnly?this._usePointerEventsOnly||e.eventDisposers.setKey("touchable",Object(p.f)(e.element,"touchstart",(function(i){return t.handleTouchDown(e,i)}),!!this._passiveSupported&&{passive:!1})):e.eventDisposers.setKey("touchable",Object(p.f)(e.element,this._pointerEvents.pointerdown,(function(i){return t.handlePointerDown(e,i)}))):e.eventDisposers.setKey("touchable",new s.c([Object(p.f)(e.element,this._pointerEvents.pointerdown,(function(i){return t.handlePointerDown(e,i)})),Object(p.f)(e.element,"touchstart",(function(i){return t.handleTouchDown(e,i)}),!!this._passiveSupported&&{passive:!1})])));else{var i=e.eventDisposers.getKey("touchable");null!=i&&(i.dispose(),e.eventDisposers.removeKey("touchable"))}},t.prototype.handleFocus=function(e,t){if(e.focusable){if(e.isFocused=!0,e.events.isEnabled("focus")&&!f.a.isPaused){var i={type:"focus",target:e,event:t};e.events.dispatchImmediately("focus",i)}}else t.preventDefault()},t.prototype.handleFocusBlur=function(e,t){!1!==e.focusable&&this.getHitOption(e,"noFocus")&&e.events.once("focus",(function(){e.events.disableType("blur"),p.g(),e.sprite&&e.sprite.handleBlur(),e.events.enableType("blur")}))},t.prototype.handleBlur=function(e,t){if(e.focusable){if(e.isFocused=!1,e.events.isEnabled("blur")&&!f.a.isPaused){var i={type:"blur",target:e,event:t};e.events.dispatchImmediately("blur",i)}}else t.preventDefault()},t.prototype.handleGlobalKeyDown=function(e){if(this.focusedObject)if(d.a.isKey(e,"esc"))p.g();else if(this.focusedObject.draggable&&d.a.isKey(e,["up","down","left","right"])){e.preventDefault();var t=this.focusedObject,i="interactionKeyboardObject";if(t.eventDisposers.hasKey(i))return;var n=new u.a(t,e);switch(t.eventDisposers.setKey(i,n),d.a.getEventKey(e)){case"up":n.directionY=-1;break;case"down":n.directionY=1;break;case"left":n.directionX=-1;break;case"right":n.directionX=1}}},t.prototype.handleGlobalKeyUp=function(e){var t="interactionKeyboardObject";if(this.focusedObject){var i=this.focusedObject.eventDisposers.getKey(t);null!=i&&(e.preventDefault(),i.dispose(),this.focusedObject.eventDisposers.removeKey(t)),d.a.isKey(e,"enter")&&this.focusedObject.sprite&&!this.focusedObject.sprite.events.isEnabled("toggled")&&(this.focusedObject.sprite.events.isEnabled("hit")?this.focusedObject.dispatchImmediately("hit"):"hit"==this.focusedObject.sprite.showTooltipOn&&this.focusedObject.dispatchImmediately("up"))}},t.prototype.handleGlobalPointerMove=function(e){var t=this.getPointer(e);if(t.point=this.getPointerPoint(e),this.events.isEnabled("track")&&!f.a.isPaused){var i={type:"track",target:this,event:e,pointer:t,touch:t.touch};this.events.dispatchImmediately("track",i)}this.addBreadCrumb(t,t.point),this.handleGlobalMove(t,e)},t.prototype.handleGlobalPointerDown=function(e){this.processDelayed();var t=this.getPointer(e);if(this.events.isEnabled("down")&&!f.a.isPaused){var i={type:"down",target:this,event:e,pointer:t,touch:t.touch};this.events.dispatchImmediately("down",i)}},t.prototype.preventTouchAction=function(e){e.defaultPrevented||e.preventDefault()},t.prototype.handleGlobalPointerUp=function(e,t){void 0===t&&(t=!1);var i=this.getPointer(e);if(this.events.isEnabled("up")&&!f.a.isPaused){var n={type:"up",target:this,event:e,pointer:i,touch:i.touch};this.events.dispatchImmediately("up",n)}this.handleGlobalUp(i,e,t)},t.prototype.handleGlobalTouchMove=function(e){for(var t=0;t<e.changedTouches.length;t++){var i=this.getPointer(e.changedTouches[t]);if(i.point=this.getPointerPoint(e.changedTouches[t]),this.events.isEnabled("track")&&!f.a.isPaused){var n={type:"track",target:this,event:e,pointer:i,touch:i.touch};this.events.dispatchImmediately("track",n)}this.addBreadCrumb(i,i.point),this.handleGlobalMove(i,e)}},t.prototype.handleGlobalTouchStart=function(e){this.processDelayed();for(var t=0;t<e.changedTouches.length;t++){var i=this.getPointer(e.changedTouches[t]);if(!this._usePointerEventsOnly&&this.events.isEnabled("down")&&!f.a.isPaused){var n={type:"down",target:this,event:e,pointer:i,touch:i.touch};this.events.dispatchImmediately("down",n)}}},t.prototype.handleGlobalTouchEnd=function(e){for(var t=0;t<e.changedTouches.length;t++){var i=this.getPointer(e.changedTouches[t]);if(this.events.isEnabled("up")&&!f.a.isPaused){var n={type:"up",target:this,event:e,pointer:i,touch:i.touch};this.events.dispatchImmediately("up",n)}this.handleGlobalUp(i,e)}},t.prototype.handlePointerDown=function(e,t){var i=this.getPointer(t);(i.touch||1==t.which||3==t.which)&&(i.button=t.which,this.resetPointer(i,t),this.handleDown(e,i,t))},t.prototype.handlePointerOver=function(e,t){var i=this.getPointer(t);this.handleOver(e,i,t)},t.prototype.handlePointerOut=function(e,t){var i=this.getPointer(t);this.handleOut(e,i,t)},t.prototype.handleMouseWheel=function(e,t){var i=this.getPointer(t);i.point=this.getPointerPoint(t);var n=0,r=0,a=1;if(1==t.deltaMode&&(a=50),a*=this.getMouseOption(e,"sensitivity"),!(t instanceof WheelEvent))throw new Error("Invalid event type");n=Math.round(-1*t.wheelDeltaX||t.deltaX*a),r=Math.round(-1*t.wheelDeltaY||t.deltaY*a),this.handleWheel(e,i,n,r,t)},t.prototype.handleTouchDown=function(e,t){for(var i=0;i<t.changedTouches.length;i++){var n=this.getPointer(t.changedTouches[i]);this.maybePreventDefault(e,t,n),this.resetPointer(n,t.changedTouches[i]),this.handleDown(e,n,t)}},t.prototype.handleHit=function(e,t,i){var n=x.f();if(e.lastHit&&e.lastHit>=n-this.getHitOption(e,"doubleHitTime")){if(n-e.lastHit<100)return;if(e.lastHit=void 0,e.lastHitPointer=void 0,e.events.isEnabled("doublehit")&&!f.a.isPaused){var r={type:"doublehit",target:e,point:t.point,event:i,touch:t.touch};e.events.dispatchImmediately("doublehit",r)}}else if(e.lastHit=n,e.lastHitPointer=t,3===t.button){if(e.events.isEnabled("rightclick")&&!f.a.isPaused){r={type:"rightclick",target:e,event:i};e.events.dispatchImmediately("rightclick",r)}}else if(e.events.isEnabled("hit")&&!f.a.isPaused){r={type:"hit",target:e,event:i,point:t.point,touch:t.touch};e.events.dispatchImmediately("hit",r)}},t.prototype.handleOver=function(e,t,i,n){if(void 0===n&&(n=!1),e.hoverable){var r=!1;if(this.shouldCancelHovers(t)&&this.areTransformed()&&this.moved(t,this.getHitOption(e,"hitTolerance"))&&(r=!0,this.cancelAllHovers(i)),this.processDelayed(),e.overPointers.moveValue(t),!e.isRealHover&&(r||(e.isHover=!0,e.isRealHover=!0,this.overObjects.moveValue(e)),this.handleTrack(this.body,t,i,!0),e.events.isEnabled("over")&&!f.a.isPaused&&!r)){var a={type:"over",target:e,event:i,pointer:t,touch:t.touch};e.events.dispatchImmediately("over",a)}}},t.prototype.handleOut=function(e,t,i,n,r){var a=this;if(void 0===n&&(n=!1),void 0===r&&(r=!1),e.hoverable&&(e.overPointers.removeValue(t),e.isHover&&(!e.hasDelayedOut||r))){if(n&&e.overPointers.length)return;if(t&&t.touch&&!r&&!this.old(t)){var o=this.getHoverOption(e,"touchOutBehavior");if("leave"==o)return this._delayedEvents.out.push({type:"out",io:e,pointer:t,event:i,keepUntil:x.f()+500}),void(e.hasDelayedOut=!0);if("delay"==o&&this.getHoverOption(e,"touchOutDelay"))return void this._delayedEvents.out.push({type:"out",io:e,pointer:t,event:i,keepUntil:x.f()+500,timeout:this.setTimeout((function(){a.handleOut(e,t,i,!0)}),this.getHoverOption(e,"touchOutDelay"))})}if(e.isHover=!1,this.overObjects.removeValue(e),!e.isDisposed()&&e.events.isEnabled("out")&&!f.a.isPaused){var s={type:"out",target:e,event:i,pointer:t,touch:t.touch};e.events.dispatchImmediately("out",s)}e.overPointers.clear(),e.hasDelayedOut=!1}},t.prototype.processDelayed=function(){for(var e;e=this._delayedEvents.out.pop();)e.timeout&&e.timeout.dispose(),this.handleOut(e.io,e.pointer,e.event,!1,!0)},t.prototype.handleDown=function(e,t,i){if(this.maybePreventDefault(e,i,t),e.inert&&this.stopInertia(e),this.handleOver(e,t,i,!0),e.downPointers.moveValue(t),this.applyCursorDownStyle(e,t),e.isDown||(!1!==e.focusable&&this.getHitOption(e,"noFocus")&&this.focusedObject&&p.g(),e.isDown=!0,this.downObjects.moveValue(e),e.draggable&&this.processDragStart(e,t,i),e.resizable&&this.processResizeStart(e,t,i)),e.events.isEnabled("down")&&!f.a.isPaused){var n={type:"down",target:e,event:i,pointer:t,touch:t.touch};e.events.dispatchImmediately("down",n)}},t.prototype.handleGlobalUp=function(e,t,i){var n=this;void 0===i&&(i=!1);var r=this.downObjects.values.slice();r.sort((function(e,t){if(e&&t){var i=e.element.compareDocumentPosition(t.element);return i&Node.DOCUMENT_POSITION_CONTAINED_BY?1:i&Node.DOCUMENT_POSITION_CONTAINS?-1:0}return 0})),g.d(r,(function(r){r&&r.downPointers.contains(e)&&n.handleUp(r,e,t,i)}))},t.prototype.handleDocumentLeave=function(e){var t=this;_.d(this.downObjects.backwards().iterator(),(function(i){i.downPointers.each((function(n){t.handleUp(i,n,e)}))}))},t.prototype.handleUp=function(e,t,i,n){if(void 0===n&&(n=!1),this.restoreCursorDownStyle(e,t),e.downPointers.removeValue(t),(t.touch||this._useTouchEventsOnly)&&this.handleOut(e,t,i,!0),e.isDown){if(0==e.downPointers.length&&(e.isDown=!1,this.downObjects.removeValue(e)),e.events.isEnabled("up")&&!f.a.isPaused){var r={type:"up",target:e,event:i,pointer:t,touch:t.touch};e.events.dispatchImmediately("up",r)}n||(e.swipeable&&this.swiped(e,t)?this.handleSwipe(e,t,i):(e.clickable&&!this.moved(t,this.getHitOption(e,"hitTolerance"))&&this.handleHit(e,t,i),e.inert&&this.moved(t,this.getHitOption(e,"hitTolerance"))?this.handleInertia(e,t):e.draggable&&this.processDragStop(e,t,i),e.resizable&&this.processResizeStop(e,t,i)))}},t.prototype.maybePreventDefault=function(e,t,i){!b.d(t)||!(e.draggable||e.swipeable||e.trackable||e.resizable)||this.isGlobalElement(e)||!1===t.cancelable||e.isTouchProtected&&i&&i.touch||t.preventDefault()},t.prototype.cancelAllHovers=function(e){var t=this;_.d(this.overObjects.backwards().iterator(),(function(i){if(i){var n=i.overPointers.getIndex(0);t.handleOut(i,n,e,!0,!0)}}))},t.prototype.shouldCancelHovers=function(e){return"always"==m.a.disableHoverOnTransform||"touch"==m.a.disableHoverOnTransform&&e.touch},t.prototype.handleGlobalMove=function(e,t){var i=this;if(!e.touch){var n=p.i(e.lastEvent);_.d(this.overObjects.backwards().iterator(),(function(r){if(r&&r.overPointers.contains(e)&&r.hoverable){var a=!1;r.element&&e.lastEvent&&p.h(r.element,n)||(a=!0),a&&i.handleOut(r,e,t,!0)}}))}_.d(this.transformedObjects.backwards().iterator(),(function(n){!n.downPointers.contains(e)||n.swipeable&&i.swiping(n,e)||!n.draggable&&!n.resizable||i.handleTransform(n,t)})),_.d(this.trackedObjects.backwards().iterator(),(function(n){n.overPointers.contains(e)||i.handleTrack(n,e,t)}))},t.prototype.handleTrack=function(e,t,i,n){if(void 0===n&&(n=!1),(n||this.moved(t,0))&&e.events.isEnabled("track")&&!f.a.isPaused){var r={type:"track",target:e,event:i,point:t.point,pointer:t,touch:t.touch};e.events.dispatchImmediately("track",r)}},t.prototype.handleSwipe=function(e,t,i){if(e.events.isEnabled("swipe")&&!f.a.isPaused){var n={type:"swipe",target:e,event:i,touch:t.touch};e.events.dispatchImmediately("swipe",n)}if(t.startPoint.x<t.point.x){if(e.events.isEnabled("swiperight")&&!f.a.isPaused){n={type:"swiperight",target:e,event:i,touch:t.touch};e.events.dispatchImmediately("swiperight",n)}}else if(e.events.isEnabled("swipeleft")&&!f.a.isPaused){n={type:"swipeleft",target:e,event:i,touch:t.touch};e.events.dispatchImmediately("swipeleft",n)}},t.prototype.handleWheel=function(e,t,i,n,r){var a={x:i,y:n};e.events.isEnabled("wheel")&&!f.a.isPaused&&e.events.dispatchImmediately("wheel",{type:"wheel",target:e,event:r,point:t.point,shift:a}),i<0?e.events.isEnabled("wheelleft")&&!f.a.isPaused&&e.events.dispatchImmediately("wheelleft",{type:"wheelleft",target:e,event:r,point:t.point,shift:a}):i>0?e.events.isEnabled("swiperight")&&!f.a.isPaused&&e.events.dispatchImmediately("wheelright",{type:"wheelright",target:e,event:r,point:t.point,shift:a}):n<0?e.events.isEnabled("wheelup")&&!f.a.isPaused&&e.events.dispatchImmediately("wheelup",{type:"wheelup",target:e,event:r,point:t.point,shift:a}):n>0&&e.events.isEnabled("wheeldown")&&!f.a.isPaused&&e.events.dispatchImmediately("wheeldown",{type:"wheeldown",target:e,event:r,point:t.point,shift:a})},t.prototype.handleInertia=function(e,t){e.draggable&&0===e.downPointers.length&&this.handleMoveInertia(e,t),e.resizable&&e.downPointers.length>1&&this.handleResizeInertia(e,t)},t.prototype.handleMoveInertia=function(e,t){var i=e,n={x:t.point.x,y:t.point.y},r={x:t.startPoint.x,y:t.startPoint.y},a=new h.a(i,"move",n,r),s=this.getTrailPoint(t,x.f()-this.getInertiaOption(e,"move","time"));if("undefined"!==typeof s){var l=this.getInertiaOption(e,"move","factor"),u=[{to:t.point.x+(t.point.x-s.point.x)*l,property:"x"},{to:t.point.y+(t.point.y-s.point.y)*l,property:"y"}],c=new o.a(a,u,this.getInertiaOption(e,"move","duration"),this.getInertiaOption(e,"move","easing")).start();this._disposers.push(c.events.on("animationended",(function(e){a.done()}))),e.inertias.setKey("move",a)}else this.processDragStop(e,t,t.lastUpEvent)},t.prototype.handleResizeInertia=function(e,t){},t.prototype.handleTransform=function(e,t){var i,n,r,a=e.downPointers.getIndex(0),o=null,s=null;a&&(o=a.point,s=a.startPoint),r=n={x:e.originalPosition.x,y:e.originalPosition.y};for(var l=!0,u=1;u<e.downPointers.length;u++){var c=e.downPointers.getIndex(u);if(s.x!=c.startPoint.x&&s.y!=c.startPoint.y){l=!1,n=(i=c).point,r=i.startPoint;break}}var h=a&&this.moved(a,0);if(e.draggable&&a&&a.dragStartEvents&&a.dragStartEvents.length&&h&&e.events.isEnabled("dragstart")&&!f.a.isPaused&&e.events.dispatchImmediately("dragstart",a.dragStartEvents.shift()),l&&e.draggable)this.handleTransformMove(e,o,s,t,h,a.touch),this.shouldCancelHovers(a)&&this.moved(a,this.getHitOption(e,"hitTolerance"))&&this.cancelAllHovers(t);else{var p=i&&this.moved(i,0);(this.shouldCancelHovers(a)&&this.moved(a,this.getHitOption(e,"hitTolerance"))||this.shouldCancelHovers(i)&&this.moved(i,this.getHitOption(e,"hitTolerance")))&&this.cancelAllHovers(t),e.draggable&&e.resizable?(this.handleTransformMove(e,o,s,t,h&&p,a.touch),this.handleTransformResize(e,o,s,n,r,t,h&&p,a.touch)):(e.draggable&&this.handleTransformMove(e,o,s,t,h,a.touch),!e.resizable||l&&!t.ctrlKey||this.handleTransformResize(e,o,s,n,r,t,h&&p,a.touch))}},t.prototype.handleTransformMove=function(e,t,i,n,r,a){if(r&&e.events.isEnabled("drag")&&!f.a.isPaused&&(!e.isTouchProtected||!a)){var o={type:"drag",target:e,event:n,shift:{x:t.x-i.x,y:t.y-i.y},startPoint:i,point:t,touch:a};e.events.dispatchImmediately("drag",o)}},t.prototype.handleTransformResize=function(e,t,i,n,r,a,o,s){if(e.events.isEnabled("resize")&&!f.a.isPaused&&(!e.isTouchProtected||!s)){var l={type:"resize",target:e,event:a,scale:v.v(t,i,n,r),startPoint1:i,point1:t,startPoint2:r,point2:n,touch:s};e.events.dispatchImmediately("resize",l)}},t.prototype.processDragStart=function(e,t,i){this.transformedObjects.moveValue(e),this.shouldCancelHovers(t)&&this.cancelAllHovers(i);var n={type:"dragstart",target:e,event:i,touch:!!t&&t.touch};t&&(t.dragTarget=e),t&&t.dragStartEvents?t.dragStartEvents.push(n):f.a.isPaused||e.dispatchImmediately("dragstart",n)},t.prototype.processDragStop=function(e,t,i){if(t||(t=this.getDragPointer(e)),t&&(t.dragTarget=void 0),this.transformedObjects.removeValue(e),(!t||this.moved(t,0))&&e.events.isEnabled("dragstop")&&!f.a.isPaused){var n={type:"dragstop",target:e,touch:!!t&&t.touch};e.events.dispatchImmediately("dragstop",n)}},t.prototype.processResizeStart=function(e,t,i){this.transformedObjects.moveValue(e)},t.prototype.processResizeStop=function(e,t,i){this.transformedObjects.removeValue(e)},t.prototype.dragStart=function(e,t){t||(t=this.getDragPointer(e)),t&&this.handleDown(e,t,t.lastDownEvent)},t.prototype.dragStop=function(e,t,i){t||(t=this.getDragPointer(e)),t&&!i&&this.handleGlobalUp(t,t.lastUpEvent,i)},t.prototype.getDragPointer=function(e){return e?e.downPointers.getIndex(0):this.transformedObjects.length?this.getDragPointer(this.transformedObjects.getIndex(0)):void 0},t.prototype.getPointerId=function(e){return(b.d(e.identifier)?""+e.identifier:b.d(e.pointerId)?""+e.pointerId:"m").replace("-","")},t.prototype.getPointerPoint=function(e){return{x:e.clientX,y:e.clientY}},t.prototype.getPointer=function(e){var t,i=this.getPointerId(e),n=this.getPointerPoint(e);return this.pointers.hasKey(i)?(t=this.pointers.getKey(i)).touch=this.isPointerTouch(e):(t={id:i,touch:this.isPointerTouch(e),startPoint:n,startTime:x.f(),point:n,track:[],swipeCanceled:!1,dragStartEvents:[]},this.addBreadCrumb(t,n),this.pointers.setKey(i,t)),t.lastEvent=e,this.lastPointer=t,t},t.prototype.isPointerTouch=function(e){if("undefined"!==typeof Touch&&e instanceof Touch)return!0;if("undefined"!==typeof PointerEvent&&e instanceof PointerEvent&&b.d(e.pointerType))switch(e.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(e instanceof MouseEvent)}else if(b.d(e.type)&&e.type.match(/^mouse/))return!1;return!0},t.prototype.resetPointer=function(e,t){var i=this.getPointerPoint(t);e.startTime=x.f(),e.startPoint={x:i.x,y:i.y},e.point={x:i.x,y:i.y},e.track=[],e.swipeCanceled=!1},t.prototype.addBreadCrumb=function(e,t){e.track.push({timestamp:x.f(),point:t})},t.prototype.lockDocument=function(){this.prepElement(this.body)},t.prototype.unlockDocument=function(){0==this.transformedObjects.length&&this.restoreAllStyles(this.body)},t.prototype.lockElement=function(e){this.prepElement(e)},t.prototype.unlockElement=function(e){this.restoreAllStyles(e)},t.prototype.lockWheel=function(){window.addEventListener(this._pointerEvents.wheel,this.wheelLockEvent,!!this._passiveSupported&&{passive:!1})},t.prototype.unlockWheel=function(){window.removeEventListener(this._pointerEvents.wheel,this.wheelLockEvent)},t.prototype.isLocalElement=function(e,t,i){var n=this.getCache("local_pointer_"+e.id);if(b.d(n))return n;var r=p.o(t)||document;if(r.elementFromPoint){var a=r.elementFromPoint(e.point.x,e.point.y),o=a&&p.h(t,a);return this.setCache("local_pointer_"+e.id+"_"+i,o,100),o}return!1},t.prototype.wheelLockEvent=function(e){return e.preventDefault(),!1},t.prototype.prepElement=function(e){var t=e.element;if(t){for(var i=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],n=0;n<i.length;n++)i[n]in t.style&&this.setTemporaryStyle(e,i[n],"none");this.setTemporaryStyle(e,"tapHighlightColor","rgba(0, 0, 0, 0)")}},t.prototype.unprepElement=function(e){var t=e.element;if(t){for(var i=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],n=0;n<i.length;n++)i[n]in t.style&&this.restoreStyle(e,i[n]);this.restoreStyle(e,"tapHighlightColor")}},t.prototype.getHitOption=function(e,t){var i=e.hitOptions[t];return"undefined"===typeof i&&(i=this.hitOptions[t]),i},t.prototype.getHoverOption=function(e,t){var i=e.hoverOptions[t];return"undefined"===typeof i&&(i=this.hoverOptions[t]),i},t.prototype.getSwipeOption=function(e,t){var i=e.swipeOptions[t];return"undefined"===typeof i&&(i=this.swipeOptions[t]),i},t.prototype.getKeyboardOption=function(e,t){var i=e.keyboardOptions[t];return"undefined"===typeof i&&(i=this.keyboardOptions[t]),i},t.prototype.getMouseOption=function(e,t){var i=e.mouseOptions[t];return"undefined"===typeof i&&(i=this.mouseOptions[t]),i},t.prototype.getInertiaOption=function(e,t,i){var n=e.inertiaOptions.getKey(t);return n&&b.d(n[i])?n[i]:this.inertiaOptions.getKey(t)[i]},t.prototype.stopInertia=function(e){for(var t,i=["move","resize"],n=0;n<i.length;n++)if(t=i[n],e.inertias.hasKey(t)){var r=e.inertias.getKey(t);if(r){r.dispose();continue}}},t.prototype.swiping=function(e,t){var i=x.f();return!(t.swipeCanceled||!e.swipeable)&&(Math.abs(t.startPoint.y-t.point.y)<this.getSwipeOption(e,"verticalThreshold")&&t.startTime>i-this.getSwipeOption(e,"time"))},t.prototype.swiped=function(e,t){var i=x.f();return!t.swipeCanceled&&(Math.abs(t.startPoint.x-t.point.x)>this.getSwipeOption(e,"horizontalThreshold")&&Math.abs(t.startPoint.y-t.point.y)<this.getSwipeOption(e,"verticalThreshold")&&t.startTime>i-this.getSwipeOption(e,"time"))},t.prototype.applyCursorOverStyle=function(e){var t=e.cursorOptions;if(b.d(t.overStyle))for(var i=0;i<t.overStyle.length;i++)p.t(e.element,t.overStyle[i].property,t.overStyle[i].value)},t.prototype.applyCursorDownStyle=function(e,t){if(!t||!t.touch){var i=e.cursorOptions.downStyle;if(e.downPointers.contains(t)&&b.d(i))for(var n=0;n<i.length;n++)this.setTemporaryStyle(this.body,i[n].property,i[n].value),this.setTemporaryStyle(e,i[n].property,i[n].value)}},t.prototype.restoreCursorDownStyle=function(e,t){if(!t||!t.touch){var i=e.cursorOptions.downStyle;if(e.downPointers.contains(t)&&b.d(i))for(var n=0;n<i.length;n++)this.restoreStyle(this.body,i[n].property),this.restoreStyle(e,i[n].property)}},t.prototype.setGlobalStyle=function(e){for(var t=P().body,i=b.e(e)?e:[e],n=0;n<i.length;n++)this.setTemporaryStyle(t,i[n].property,i[n].value)},t.prototype.restoreGlobalStyle=function(e){for(var t=P().body,i=b.e(e)?e:[e],n=0;n<i.length;n++)this.restoreStyle(t,i[n].property)},t.prototype.isGlobalElement=function(e){return document.body===e.element},t.prototype.moved=function(e,t,i){void 0===i&&(i=300);var n=this.getShift(e);return Math.abs(n.x)>t||Math.abs(n.y)>t},t.prototype.old=function(e,t){return void 0===t&&(t=300),x.f()-e.startTime>t},t.prototype.getShift=function(e){return{x:e.startPoint.x-e.point.x,y:e.startPoint.y-e.point.y}},t.prototype.getTrailPoint=function(e,t){for(var i,n=0;n<e.track.length;n++)if(e.track[n].timestamp>=t){i=e.track[n];break}return i},t.prototype.pointerExists=function(e,t){var i=!1;return e.each((function(e){e!=t&&(i=e.point.x==t.point.x&&e.point.y==t.point.y)})),i},t.prototype.getInteraction=function(e){return new l.a(e)},t.prototype.setTemporaryStyle=function(e,t,i){var n=e.element;b.d(n.style[t])&&!e.replacedStyles.hasKey(t)&&e.replacedStyles.setKey(t,n.style[t]),p.t(n,t,i)},t.prototype.restoreStyle=function(e,t){e.replacedStyles.hasKey(t)?(e.element.style[t]=e.replacedStyles.getKey(t),e.replacedStyles.removeKey(t)):delete e.element.style[t]},t.prototype.restoreAllStyles=function(e){_.d(e.replacedStyles.iterator(),(function(t){var i=t[0],n=t[1];e.element.style[i]=n,e.replacedStyles.removeKey(i)}))},t.prototype.dispose=function(){this.isDisposed()||(e.prototype.dispose.call(this),this.restoreAllStyles(this.body),this.unlockWheel())},t.prototype.log=function(e,t,i){if(t.changedTouches)for(var n=0;n<t.changedTouches.length;n++)this.logTouch(e,t.type,t.changedTouches[n]);else{var r="";if(t.pointerType)switch(t.pointerType){case 2:r="touch";break;case 4:r="mouse";break;default:r=t.pointerType}else r="undefined"!=typeof TouchEvent&&t instanceof TouchEvent?"touch":t.type.match(/^mouse/)?"mouse":"???";var a="";a=b.d(t.identifier)?t.identifier:b.d(t.pointerId)?t.pointerId:"???",i?console.log(e+" ("+i.uid+")  "+t.type+"  "+r+"  "+a):console.log(e+"  "+t.type+"  "+r+"  "+a)}},t.prototype.areTransformed=function(e){var t=this.transformedObjects.length;if(e)for(var i=b.e(e)?e:[e],n=0;n<i.length;n++)this.transformedObjects.contains(i[n])&&t--;return t>0},t.prototype.logTouch=function(e,t,i){console.log(e+"  "+t+"  touch  "+i.identifier)},Object.defineProperty(t,"passiveSupported",{get:function(){var e=this;if(null==this._passiveSupported)try{var t=Object.defineProperty({},"passive",{get:function(){e._passiveSupported=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(i){this._passiveSupported=!1}return this._passiveSupported},enumerable:!0,configurable:!0}),t}(r.b),k=null;function P(){return null==k&&(k=new w),k}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={verbose:!0,commercialLicense:!1,classNamePrefix:"amcharts-",autoSetClassName:!1,minPolylineStep:.5,onlyShowOnViewport:!1,queue:!1,autoDispose:!1,licenses:[],suppressErrors:!1,suppressWarnings:!1,animationsEnabled:!0,nonce:"",deferredDelay:100,disableHoverOnTransform:"never",pixelPerfectPrecision:0}},function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return c})),i.d(t,"c",(function(){return h}));var n=i(2),r=i(15),a=i(48),o=i(11),s=i(8),l=i(70),u=function(e){function t(t){var i=t.events.on("removed",(function(e){e.oldValue.dispose()}),void 0,!1);return e.call(this,(function(){i.dispose(),s.d(t.iterator(),(function(e){e[1].dispose()}))}))||this}return Object(n.c)(t,e),t}(r.b),c=function(){function e(){this.events=new a.a,this._dictionary={}}return e.prototype.hasKey=function(e){return o.i(this._dictionary,e)},e.prototype.getKey=function(e){return this._dictionary[e]},e.prototype.insertKey=function(e,t){if(o.i(this._dictionary,e))throw new Error("Key "+e+" already exists in dictionary");this._dictionary[e]=t,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:e,newValue:t})},e.prototype.setKey=function(e,t){if(o.i(this._dictionary,e)){var i=this._dictionary[e];i!==t&&(this._dictionary[e]=t,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:e,oldValue:i,newValue:t}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}))}else this._dictionary[e]=t,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:e,newValue:t})},e.prototype.updateKey=function(e,t){if(!o.i(this._dictionary,e))throw new Error("Key "+e+" doesn't exist in dictionary");var i=this._dictionary[e],n=t(i);i!==n&&(this._dictionary[e]=n,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:e,oldValue:i,newValue:n}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}))},e.prototype.removeKey=function(e){if(o.i(this._dictionary,e)){var t=this._dictionary[e];delete this._dictionary[e],this.events.isEnabled("removeKey")&&this.events.dispatchImmediately("removeKey",{type:"removeKey",target:this,key:e,oldValue:t}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:t})}},e.prototype.insertKeyIfEmpty=function(e,t){return this.hasKey(e)||this.insertKey(e,t()),this.getKey(e)},e.prototype.clear=function(){var e=this;this.events.isEnabled("removed")&&o.d(this._dictionary,(function(t,i){e.events.dispatchImmediately("removed",{type:"removed",target:e,oldValue:i})})),this._dictionary={},this.events.isEnabled("cleared")&&this.events.dispatchImmediately("cleared",{type:"cleared",target:this})},e.prototype.copyFrom=function(e){var t=this;s.d(e.iterator(),(function(e){t.setKey(e[0],e[1])}))},e.prototype.iterator=function(){return o.g(this._dictionary)},e.prototype[Symbol.iterator]=function(){var e,t,i,r;return Object(n.d)(this,(function(n){switch(n.label){case 0:for(t in e=[],this._dictionary)e.push(t);i=0,n.label=1;case 1:return i<e.length?(r=e[i],o.i(this._dictionary,r)?[4,[r,this._dictionary[r]]]:[3,3]):[3,4];case 2:n.sent(),n.label=3;case 3:return i++,[3,1];case 4:return[2]}}))},e.prototype.each=function(e){s.d(this.iterator(),(function(t){var i=Object(n.e)(t,2),r=i[0],a=i[1];return e(r,a)}))},e.prototype.sortedIterator=function(){return s.l(this.iterator(),(function(e,t){return l.a(e[0],t[0])}))},e}(),h=function(e){function t(t){var i=e.call(this)||this;return i.template=t,i}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var t=this;s.d(e.iterator(),(function(e){t.setKey(e[0],e[1].clone())}))},t.prototype.create=function(e){var t=this;return this.insertKeyIfEmpty(e,(function(){return t.template.clone()}))},t}(c)},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(3),r=i(18),a=i(47),o=i(7),s=i(11),l=i(91),u=new(function(){function e(){this._isPaused=!1,this.animations=[],this.uid=n.b.getUniqueId(),this.dummyCounter=0,this._frameRequested=!1,this.updateStepDuration=45,this.time=Date.now()}return e.prototype.reportTime=function(e,t){this.dummyCounter,t&&(this.time=Date.now())},e.prototype.update=function(){var e=this;if(!this._isPaused){this._frameRequested=!1;var t=Date.now();n.b.dispatchImmediately("enterframe");for(var i in n.b.invalidDatas)if(s.i(n.b.invalidDatas,i)){for(var r=n.b.invalidDatas[i];r.length>0;){var l=(u=r[0]).dataProvider;if(u.isDisposed())o.o(r,u);else if(l&&l.dataInvalid)try{if(l.validateData(),l.dataValidationProgress<1)break}catch(d){o.o(r,l),l.raiseCriticalError(d)}else try{if(u.validateData(),u.dataValidationProgress<1)break}catch(d){o.o(r,u),u.raiseCriticalError(d)}}if(Date.now()-t>this.updateStepDuration)break}for(;n.b.invalidRawDatas.length>0;){if((u=n.b.invalidRawDatas[0]).isDisposed())o.o(n.b.invalidRawDatas,u);else try{u.validateRawData()}catch(d){o.o(n.b.invalidRawDatas,u),u.raiseCriticalError(d)}}for(;n.b.invalidDataItems.length>0;){l=(u=n.b.invalidDataItems[0]).dataProvider;if(u.isDisposed()||u.dataInvalid||l&&l.dataInvalid);else try{u.validateDataItems()}catch(d){o.o(n.b.invalidDataItems,u),u.raiseCriticalError(d)}o.o(n.b.invalidDataItems,u)}for(;n.b.invalidDataRange.length>0;){var u;l=(u=n.b.invalidDataRange[0]).dataProvider;if(u.isDisposed()||u.dataInvalid||l&&l.dataInvalid);else try{u.validateDataRange(),u.skipRangeEvent||u.dispatchImmediately("datarangechanged"),u.skipRangeEvent=!1}catch(d){o.o(n.b.invalidDataRange,u),u.raiseCriticalError(d)}o.o(n.b.invalidDataRange,u)}var c=[];s.d(n.b.invalidLayouts,(function(t){e.validateLayouts(t)})),s.d(n.b.invalidPositions,(function(t){e.validatePositions(t)}));var h=!1;if(t=Date.now(),s.d(n.b.invalidSprites,(function(i,r){for(var a=0;r.length>0;){if(e.validateLayouts(i),e.validatePositions(i),5==++a){if(Date.now()-t>e.updateStepDuration)break;a=0}var s=r[r.length-1];if(s&&!s.isDisposed()){if(s._systemCheckIfValidate())if(e.checkIfValidate2(s))try{s._systemUpdate(c)}catch(d){s.invalid=!1,o.o(r,s),s.raiseCriticalError(d)}else c.push(s);else c.push(s);s.invalid=!1}o.o(r,s)}n.b.invalidSprites[i]=n.b.invalidSprites[i].concat(c)})),s.d(n.b.invalidSprites,(function(e,t){t.length>0&&(h=!0)})),s.d(n.b.invalidDatas,(function(e,t){t.length>0&&(h=!0)})),o.d(o.c(this.animations),(function(e){e.update()})),s.d(n.b.invalidLayouts,(function(t){e.validateLayouts(t)})),s.d(n.b.invalidPositions,(function(t){e.validatePositions(t)})),Object(a.d)(),s.d(n.b.invalidLayouts,(function(t){e.validateLayouts(t)})),s.d(n.b.invalidPositions,(function(t){e.validatePositions(t)})),n.b.dispatchImmediately("exitframe"),(h||this.animations.length>0||[].length>0)&&this.requestFrame(),this.updateStepDuration<200){var p=!0;s.d(n.b.invalidDatas,(function(e,t){t.length>0&&(p=!1)})),s.d(n.b.invalidSprites,(function(e,t){t.length>0&&(p=!1)})),p&&(this.updateStepDuration=200)}}},e.prototype.checkIfValidate2=function(e){return!(e.dataItem&&e.dataItem.component&&e.dataItem.component.dataInvalid&&!e.dataItem.component.isTemplate)},e.prototype.requestFrame=function(){var e=this;this._frameRequested||(Object(a.b)((function(){e.update()})),this._frameRequested=!0)},e.prototype.softInvalidate=function(e){var t=this;e.children.each((function(e){e instanceof r.a&&t.softInvalidate(e),e.measureFailed&&(Object(n.a)(e,"Label")?e.hardInvalidate():e.invalidate(),e.measureFailed=!1)}))},e.prototype.validatePositions=function(e){for(var t=n.b.invalidPositions[e];t.length>0;){var i=t[t.length-1];if(i.isDisposed())o.o(t,i);else try{i._systemValidatePositions()}catch(r){i.positionInvalid=!1,o.o(t,i),i.raiseCriticalError(r)}}},e.prototype.validateLayouts=function(e){for(var t=n.b.invalidLayouts[e];t.length>0;){var i=t[t.length-1];if(i.isDisposed())o.o(t,i);else try{i.children.each((function(e){e._systemValidateLayouts()})),i.validateLayout()}catch(r){i.layoutInvalid=!1,o.o(t,i),i.raiseCriticalError(r)}}},e.prototype.log=function(e){l.a(e)},Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},set:function(e){this._isPaused=e,e||(this._frameRequested=!1,this.requestFrame())},enumerable:!0,configurable:!0}),e.VERSION="4.10.23",e}())},function(e,t,i){"use strict";i.d(t,"a",(function(){return v})),i.d(t,"b",(function(){return g}));var n=i(2),r=i(12),a=i(49),o=i(24),s=i(15),l=i(48),u=i(32),c=i(13),h=i(9),p=i(3),d=i(76),f=i(7),m=i(11),y=i(0),v=function(){function e(){this._disposed=!1,this._disposers=[],this.className="BaseObject"}return e.prototype.debug=function(){},Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid||(this._uid=p.b.getUniqueId(),p.b.map.setKey(this._uid,this)),this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this._map||(this._map=new o.a),this._map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delayedMap",{get:function(){return this._delayedMap||(this._delayedMap=new o.a),this._delayedMap},enumerable:!0,configurable:!0}),e.prototype.addDelayedMap=function(e,t){var i=this.delayedMap;i.hasKey(t)||i.setKey(t,[]),i.getKey(t).push({property:e,target:this})},e.prototype.processDelayedMap=function(){var e=this;this.delayedMap.each((function(t,i){if(e.map.hasKey(t)){var n=e.map.getKey(t);f.d(i,(function(e){e.target[e.property]=n})),e.delayedMap.removeKey(t)}}))},e.prototype.applyTheme=function(){var e=this;if(p.b){var t=this.getCurrentThemes();t&&f.d(t,(function(t,i){t(e)}))}},Object.defineProperty(e.prototype,"themes",{get:function(){return this._themes},set:function(e){this._themes=e},enumerable:!0,configurable:!0}),e.prototype.getCurrentThemes=function(){return this.themes||p.b.themes},e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var e=this._disposers;for(this._disposers=null;0!==e.length;){e.shift().dispose()}this.clearCache(),this.clonedFrom&&this.clonedFrom.clones.removeValue(this);var t=this._uid;null!=t&&p.b.map.removeKey(t)}},e.prototype.addDisposer=function(e){this._disposers.push(e)},e.prototype.removeDispose=function(e){if(!this._disposed){var t=f.i(this._disposers,e);t>-1&&this._disposers.splice(t,1)}e.dispose()},e.prototype.clone=function(e){e||(e="clone-"+p.b.getUniqueId());var t=new this.constructor;return t.cloneId=e,t.copyFrom(this),t},Object.defineProperty(e.prototype,"clones",{get:function(){return this._clones||(this._clones=new r.a),this._clones},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){e.clones.push(this),this.clonedFrom=e},Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(e){this._className=e},enumerable:!0,configurable:!0}),e.prototype.setCache=function(e,t,i){d.a.set(this.uid,e,t,i)},e.prototype.getCache=function(e,t){return void 0===t&&(t=void 0),d.a.get(this.uid,e,t)},e.prototype.clearCache=function(){d.a.clear(this.uid)},e.prototype.setTimeout=function(e,t){var i=this,n=setTimeout((function(){i.removeDispose(r),e()}),t),r=new s.b((function(){clearTimeout(n)}));return this._disposers.push(r),r},e.prototype.setInterval=function(e,t){var i=this,n=setInterval((function(){i.removeDispose(r),e()}),t),r=new s.b((function(){clearTimeout(n)}));return this._disposers.push(r),r},Object.defineProperty(e.prototype,"config",{set:function(e){try{this.processConfig(e)}catch(t){this.raiseCriticalError(t)}},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(t){var i=this;if(t){var n=this;if(m.f(t,(function(t,s){var d,f=s;if("callback"==t&&"function"==typeof s&&s.call(n),i.hasProperty(t))if(!y.i(f)||!y.d(f.type)||y.i(n[t])&&y.d(n[t].className)&&!f.forceCreate&&n[t].className==f.type||i.asIs(t)?d=n[t]:(d=i.createClassInstance(f.type))?n[t]=d:d=n[t],d instanceof u.a)i.processAdapters(d,f);else if(d instanceof l.a)i.processEvents(d,f);else if("locale"==t&&y.j(f))window["am4lang_"+f]&&(n[t]=window["am4lang_"+f]);else if("parent"==t&&y.j(f)){var v=i.map.getKey(f);v?n[t]=v:i.addDelayedMap("parent",f)}else if(i.asIs(t))n[t]=f;else if(i.asFunction(t)&&y.j(f)){if(!y.d(p.b.registeredClasses[f]))throw Error("Invalid easing function: "+f);n[t]=p.b.registeredClasses[f]}else if(f instanceof e)n[t]=f;else if(d instanceof e)d.config=f;else if(d instanceof r.c||d instanceof a.a||d instanceof a.c){if(y.e(f))d instanceof r.c?i.processListTemplate(f,d):i.processOrderedTemplate(f,d);else if(y.i(f))if(f instanceof e)d.template=f;else{var g=void 0;g=y.d(f.template)?f.template:f,d.template instanceof e?d.template.config=g:m.d(g,(function(t,n){var a=d.template[t];a instanceof u.a?i.processAdapters(a,n):a instanceof l.a?i.processEvents(a,n):a instanceof o.c?i.processDictionaryTemplate(a,n):d.template[t]instanceof e?d.template[t].config=n:y.i(n)&&y.d(n.type)?(a=i.createClassInstance(n.type))?(a instanceof e&&(a.config=n),d.template[t]=a):d.template[t]=n:a instanceof r.a?i.processList(n,a):d.template[t]=i.maybeColorOrPercent(n)})),y.d(f.values)&&(d instanceof r.c?i.processListTemplate(f.values,d):i.processOrderedTemplate(f.values,d))}}else d instanceof r.a?"children"==t?i.processList(f,d,i):i.processList(f,d):d instanceof o.c?i.processDictionaryTemplate(d,f):d instanceof o.a?i.processDictionary(d,f):d instanceof c.a||d instanceof h.a?n[t]=i.maybeColorOrPercent(f):y.i(d)&&y.i(f)?m.b(f,d):(f=i.maybeColorOrPercent(f),n[t]=f);else i.isReserved(t)||(n[t]=f)}),this.configOrder),this.processingErrors.length){var s=this.processingErrors.join("\n");throw this._processingErrors=[],Error(s)}}},e.prototype.maybeColorOrPercent=function(e){if(y.j(e)){if(e.match(/^[\-]?[0-9.]+\%$/))return Object(h.c)(y.l(e));if(e.match(/^\#[0-9abcdef]{3,}$/i))return Object(c.b)(e)}return e},e.prototype.processAdapters=function(e,t){var i=this;y.e(t)?f.d(t,(function(t,n){e.add(t.key,t.callback,t.priority||0,i)})):y.i(t)&&m.d(t,(function(t,i){e.has(t,i)||e.add(t,i)}))},e.prototype.processEvents=function(e,t){var i=this;y.e(t)?f.d(t,(function(t,n){e.on(t.type,t.callback,i)})):y.i(t)&&m.d(t,(function(t,i){e.has(t,i)||e.on(t,i)}))},e.prototype.processDictionaryTemplate=function(t,i){y.i(i)&&m.d(i,(function(i,n){var r;(r="template"==i?t.template:t.hasKey(i)?t.getKey(i):t.create(i))instanceof e?r.config=n:y.i(r)&&y.i(n)?m.b(n,r):r.setKey(i,n)}))},e.prototype.processDictionary=function(e,t){y.i(t)&&m.d(t,(function(t,i){e.setKey(t,i)}))},e.prototype.processListTemplate=function(t,i){var n=this;for(f.d(t,(function(t,r){var a,o=n.getConfigEntryType(t);if(i.hasIndex(r)&&!t.forceCreate)a=i.getIndex(r);else{if(t instanceof e)return void i.push(t);a=o?i.create(o):i.create()}t===a||y.i(t)&&(a instanceof e?a.config=t:y.i(a)&&y.i(t)?m.b(t,a):i.setIndex(i.indexOf(a),t))}));t.length>i.length;)i.pop()},e.prototype.processOrderedTemplate=function(t,i){var n=this;f.d(t,(function(t,r){var a,o=n.getConfigEntryType(t);a=o?i.create(o):i.create(),y.i(t)&&(a instanceof e?a.config=t:y.i(a)&&y.i(t)?m.b(t,a):i.insert(t))}))},e.prototype.processList=function(t,i,n){var r=this;y.e(t)||(t=[t]);var a=i.length,o=0;for(f.d(t,(function(t,s){if(y.i(t)){var l=void 0;if(s<a&&!t.forceCreate)l=i.getIndex(s);else{if(t instanceof e)return void i.push(t);o++,l=r.createEntryInstance(t),n?l.parent=n:i.push(l)}l instanceof e?l.config=t:y.i(l)&&y.i(t)&&m.b(t,l)}else i.hasIndex(s)?i.setIndex(s,t):i.push(t)}));!n&&t.length+o<i.length;)i.pop()},e.prototype.configOrder=function(e,t){return e==t?0:"language"==e?-1:"language"==t?1:0},e.prototype.asIs=function(e){return-1!=f.i(["locale"],e)},e.prototype.asFunction=function(e){return!1},e.prototype.createClassInstance=function(e){if(y.d(p.b.registeredClasses[e]))return new p.b.registeredClasses[e];throw Error('Invalid type: "'+e+'".')},e.prototype.createEntryInstance=function(e){var t;return y.d(e.type)&&(t=this.createClassInstance(e.type)),t||e},e.prototype.getConfigEntryType=function(e){if(y.d(e.type)){if(y.d(p.b.registeredClasses[e.type]))return p.b.registeredClasses[e.type];throw Error('Invalid type: "'+e.type+'".')}},e.prototype.hasProperty=function(e){return e in this},e.prototype.isReserved=function(e){return-1!==["type","forceCreate"].indexOf(e)},Object.defineProperty(e.prototype,"processingErrors",{get:function(){return this._processingErrors||(this._processingErrors=[]),this._processingErrors},enumerable:!0,configurable:!0}),e}(),g=function(e){function t(){var t=e.call(this)||this;return t.className="BaseObjectEvents",t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"events",{get:function(){return this._eventDispatcher||(this._eventDispatcher=new l.a,this._disposers.push(this._eventDispatcher)),this._eventDispatcher},enumerable:!0,configurable:!0}),t.prototype.dispatch=function(e,t){this._eventDispatcher&&this.events.isEnabled(e)&&(t?(t.type=e,t.target=t.target||this,this.events.dispatch(e,{type:e,target:this})):this.events.dispatch(e,{type:e,target:this}))},t.prototype.dispatchImmediately=function(e,t){this._eventDispatcher&&this.events.isEnabled(e)&&(t?(t.type=e,t.target=t.target||this,this.events.dispatchImmediately(e,t)):this.events.dispatchImmediately(e,{type:e,target:this}))},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),t._eventDispatcher&&this.events.copyFrom(t._eventDispatcher)},t}(v)},function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"c",(function(){return d})),i.d(t,"b",(function(){return f}));var n=i(2),r=i(26),a=i(12),o=i(32),s=i(3),l=i(8),u=i(7),c=i(0),h=i(11),p=function(e){function t(){var t=e.call(this)||this;return t._rules=new a.a,t._appliedRules={},t._appliedTargets=[],t._useDefault=!0,t.adapter=new o.a(t),t._enabled=!1,t._responsiveDisposers=[],t._noStates=[],t.className="Responsive",t.rules.events.on("inserted",(function(){t.checkRules()}),!0),t.rules.events.on("removed",(function(){t.checkRules()}),!0),t._disposers.push(t.rules.events),t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"component",{get:function(){return this._component},set:function(e){var t=this;e!=this._component&&(this.disposeResponsiveHandlers(),this._component=e,this._responsiveDisposers.push(c.b(this.component).events.on("sizechanged",(function(){t.checkRules()}),this)),this._responsiveDisposers.push(c.b(this.component).events.on("datavalidated",(function(){t._component.isReady()&&t.checkRules(!0)}),this)),this.enabled=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.adapter.apply("enabled",this._enabled)},set:function(e){this._enabled!=e&&(this._enabled=e,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useDefault",{get:function(){return this.adapter.apply("useDefault",this._useDefault)},set:function(e){this._useDefault!=e&&(this._useDefault=e,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rules",{get:function(){return this.adapter.apply("rules",this._rules)},set:function(e){this._rules=e,this._enabled=!0,this.applyRules()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultRules",{get:function(){return this.adapter.apply("defaultRules",d)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allRules",{get:function(){var e=new a.a;return this.useDefault&&e.copyFrom(this.defaultRules),e.copyFrom(this.rules),this.adapter.apply("allRules",e)},enumerable:!0,configurable:!0}),t.prototype.isApplied=function(e){var t=this._appliedRules[e];return!!c.d(t)&&t},t.prototype.checkRules=function(e){var t=this;void 0===e&&(e=!1);var i=this.allRules;if(i&&0!=i.length){var n=!1,r=c.b(this.component);if(l.d(i.iterator(),(function(e){e.id||(e.id=s.b.getUniqueId());var i=e.relevant(r);(i&&!t.isApplied(e.id)||!i&&t.isApplied(e.id))&&(n=!0),t._appliedRules[e.id]=i})),e&&(n=!0),n){if(!this.component.isReady())return r.hidden=!0,void r.events.once("ready",(function(e){e.target.show(0),t.applyRules()}));this.dispatchImmediately("ruleschanged"),this.applyRules()}}},t.prototype.applyRules=function(e){var t=this,i=c.d(e)?e:c.b(this.component),n=!1;if(this.enabled){var r=!1;l.d(this.allRules.iterator(),(function(e){var a=t.getState(e,i);a&&(n||(-1!==u.i(t._appliedTargets,i.uid)&&i.setState(t.getDefaultState(i),0),n=!0),t.isApplied(c.b(e.id))&&(a.transitionDuration=0,t.setTargetState(i,a),t.dispatchImmediately("ruleapplied",{rule:e}),r=!0))})),r?u.q(this._appliedTargets,i.uid):u.o(this._appliedTargets,i.uid)}i.children&&l.d(i.children.iterator(),(function(e){t.applyRules(e)}))},t.prototype.getState=function(e,t){var i="responsive-"+e.id,n=t.uid+"_"+i;if(-1===u.i(this._noStates,n)){if(t.states.hasKey(i))return t.states.getKey(i);var r=e.state(t,i);return r||this._noStates.push(n),r}},t.prototype.getDefaultState=function(e){return e.states.hasKey("responsive-default")?e.states.getKey("responsive-default"):e.states.create("responsive-default")},t.prototype.setTargetState=function(e,t){var i=this,n=this.getDefaultState(e);h.d(t.properties,(function(t,r){c.d(n.properties[t])||(n.properties[t]=i.getValue(e,t))})),e.setState(t)},t.prototype.getValue=function(e,t){var i=e.getPropertyValue(t);return!c.d(i)&&c.d(e[t])&&(i=e[t]),i},t.prototype.dispose=function(){this.disposeResponsiveHandlers(),e.prototype.dispose.call(this)},t.prototype.disposeResponsiveHandlers=function(){for(var e=this._responsiveDisposers.pop();e;)e.dispose(),e=this._responsiveDisposers.pop()},t}(r.b),d=new a.a;d.events.on("inserted",(function(e){e.newValue.id=s.b.getUniqueId()}));var f=function(){function e(){}return e.widthXXS=function(t){return t.pixelWidth<=e.XXS},e.widthXS=function(t){return t.pixelWidth<=e.XS},e.widthS=function(t){return t.pixelWidth<=e.S},e.widthM=function(t){return t.pixelWidth<=e.M},e.widthL=function(t){return t.pixelWidth<=e.L},e.widthXL=function(t){return t.pixelWidth<=e.XL},e.widthXXL=function(t){return t.pixelWidth<=e.XXL},e.heightXXS=function(t){return t.pixelHeight<=e.XXS},e.heightXS=function(t){return t.pixelHeight<=e.XS},e.heightS=function(t){return t.pixelHeight<=e.S},e.heightM=function(t){return t.pixelHeight<=e.M},e.heightL=function(t){return t.pixelHeight<=e.L},e.heightXL=function(t){return t.pixelHeight<=e.XL},e.heightXXL=function(t){return t.pixelHeight<=e.XXL},e.isXXS=function(t){return t.pixelWidth<=e.XXS&&t.pixelHeight<=e.XXS},e.isXS=function(t){return t.pixelWidth<=e.XS&&t.pixelHeight<=e.XS},e.isS=function(t){return t.pixelWidth<=e.S&&t.pixelHeight<=e.S},e.isM=function(t){return t.pixelWidth<=e.M&&t.pixelHeight<=e.M},e.isL=function(t){return t.pixelWidth<=e.L&&t.pixelHeight<=e.L},e.isXL=function(t){return t.pixelWidth<=e.XL&&t.pixelHeight<=e.XL},e.isXXL=function(t){return t.pixelWidth<=e.XXL&&t.pixelHeight<=e.XXL},e.maybeXXS=function(t){return t.pixelWidth<=e.XXS||t.pixelHeight<=e.XXS},e.maybeXS=function(t){return t.pixelWidth<=e.XS||t.pixelHeight<=e.XS},e.maybeS=function(t){return t.pixelWidth<=e.S||t.pixelHeight<=e.S},e.maybeM=function(t){return t.pixelWidth<=e.M||t.pixelHeight<=e.M},e.maybeL=function(t){return t.pixelWidth<=e.L||t.pixelHeight<=e.L},e.maybeXL=function(t){return t.pixelWidth<=e.XL||t.pixelHeight<=e.XL},e.maybeXXL=function(t){return t.pixelWidth<=e.XXL||t.pixelHeight<=e.XXL},e.XXS=100,e.XS=200,e.S=300,e.M=400,e.L=600,e.XL=800,e.XXL=1e3,e}()},function(e,t,i){"use strict";i.d(t,"f",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"e",(function(){return l}));var n="string",r="number",a="date",o="duration",s="__\xa7\xa7\xa7__",l="__\xa7\xa7\xa7\xa7__"},function(e,t,i){"use strict";function n(e,t){if(null==e)return{};var i,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(29);function r(e,t){if(null==e)return{};var i,r,a=Object(n.a)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}},function(e,t,i){"use strict";function n(e){var t,i,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(i=n(e[t]))&&(r&&(r+=" "),r+=i);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}t.a=function(){for(var e,t,i=0,r="";i<arguments.length;)(e=arguments[i++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}},function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return h}));var n=i(49),r=i(55),a=i(72),o=i(8),s=i(7),l=i(0),u=i(11),c=new(function(){function e(){this._callbackId=0,this._callbacks=new n.b((function(e,t){return a.a(r.a(e.priority,t.priority),r.a(e.id,t.id))}))}return e.prototype.addAll=function(e,t,i,n,r){void 0===n&&(n=0),this._callbacks.insert({id:++this._callbackId,key:t,callback:i,priority:n,scope:r,type:e})},e.prototype.isEnabled=function(e,t){return s.b(this._callbacks.values,(function(i){return i.key===t&&e instanceof i.type}))},e.prototype.applyAll=function(e,t,i){var n=this._callbacks.values,r=n.length;if(0==r)return i;for(var a=0;a<r;++a){var o=n[a];o.key===t&&e instanceof o.type&&(i=o.callback.call(o.scope,i,e,t))}return i},e}()),h=function(){function e(e){this._callbackId=0,this._callbacks=new n.b((function(e,t){return a.a(r.a(e.priority,t.priority),r.a(e.id,t.id))})),this._disabled={},this.object=e,this.events=this._callbacks.events}return e.prototype.add=function(e,t,i,n){void 0===i&&(i=0),this._callbacks.insert({id:++this._callbackId,key:e,callback:t,priority:i,scope:n})},e.prototype.has=function(e,t,i,n){return void 0===i&&(i=0),o.c(this._callbacks.iterator(),(function(r){return r.key===e&&r.callback===t&&r.priority===i&&r.scope===n}))},e.prototype.remove=function(e,t){var i=this;s.d(o.m(this._callbacks.iterator()),(function(n){n.key!==e||l.h(t)&&t!==n.priority||i._callbacks.remove(n)}))},e.prototype.enableKey=function(e){delete this._disabled[e]},e.prototype.disableKey=function(e,t){void 0===t&&(t=1/0),this._disabled[e]=t},e.prototype._hasListenersByType=function(e){return s.b(this._callbacks.values,(function(t){return t.key===e}))},e.prototype.isEnabled=function(e){return null==this._disabled[e]&&(this._hasListenersByType(e)||c.isEnabled(this.object,e))},e.prototype._shouldDispatch=function(e){var t=this._disabled[e];return!l.h(t)||(t<=1?delete this._disabled[e]:--this._disabled[e],!1)},e.prototype.apply=function(e,t){if(this._shouldDispatch(e)){var i=this._callbacks.values,n=i.length;if(n>0)for(var r=0;r<n;++r){var a=i[r];a.key===e&&(t=a.callback.call(a.scope,t,this.object,e))}return t=c.applyAll(this.object,e,t)}return t},e.prototype.keys=function(){return o.m(o.k(this._callbacks.iterator(),(function(e){return e.key})))},e.prototype.copyFrom=function(e){var t=this;o.d(e._callbacks.iterator(),(function(e){t.add(e.key,e.callback,e.priority,e.scope)})),u.d(e._disabled,(function(e,i){t._disabled[e]=i}))},e.prototype.clear=function(){this._callbacks.clear()},e}()},function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return n}))},,function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(177);var r=i(146),a=i(178);function o(e,t){return Object(n.a)(e)||function(e,t){var i=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}}(e,t)||Object(r.a)(e,t)||Object(a.a)()}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(){function e(){}return e.grab=[{property:"cursor",value:"move"},{property:"cursor",value:"grab"},{property:"cursor",value:"-webkit-grab"}],e.grabbing=[{property:"cursor",value:"move"},{property:"cursor",value:"grabbing"},{property:"cursor",value:"-webkit-grabbing"}],e.pointer=[{property:"cursor",value:"pointer"}],e.default=[{property:"cursor",value:"default"}],e.horizontalResize=[{property:"cursor",value:"ew-resize"}],e.verticalResize=[{property:"cursor",value:"ns-resize"}],e.notAllowed=[{property:"cursor",value:"not-allowed"}],e.text=[{property:"cursor",value:"text"}],e}()},function(e,t,i){"use strict";i.d(t,"b",(function(){return b})),i.d(t,"a",(function(){return x}));var n=i(2),r=i(26),a=i(129),o=i(15),s=i(13),l=i(9),u=(i(47),i(41)),c=i(42),h=i(1),p=i(7),d=i(0),f=i(25),m=i(23);function y(e,t,i){return t+(i-t)*e}function v(e,t,i){return new l.a(y(e,t.percent,i.percent))}function g(e,t,i){var n=new s.a(c.c(t.rgb,i.rgb,e));return t.alpha!=i.alpha&&(n.alpha=t.alpha+(i.alpha-t.alpha)*e),n}function _(e,t){return t+e.charAt(0).toUpperCase()+e.substr(1)}var b=function(){function e(e){this._disposer=new o.b((function(){for(;0!==e.length;)e[0].dispose()}))}return e.prototype.isDisposed=function(){return this._disposer.isDisposed()},e.prototype.dispose=function(){this._disposer.dispose()},e}(),x=function(e){function t(t,i,n,r){var a=e.call(this)||this;return a.duration=0,a.easing=u.c,a.progress=0,a._loop=0,a._pause=!1,a._delayTimeout=null,a._time=0,a._isFinished=!1,a.className="Animation",!1===m.a.animationsEnabled&&(n=0),a.object=t,a.animationOptions=p.s(i),a.duration=n,r&&(a.easing=r),a.applyTheme(),a}return Object(n.c)(t,e),t.prototype.debug=function(){},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.pause()},t.prototype.delay=function(e){var t=this;if(e>0){this.pause(),p.m(this.object.animations,this);var i=setTimeout((function(){t._delayTimeout=null,t.start()}),e);this._delayTimeout=new o.b((function(){clearTimeout(i)}))}return this},t.prototype._start=function(){this._isFinished=!1,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),this.stopSameAnimations(),this._pause=!1,p.m(f.a.animations,this),p.m(this.object.animations,this),f.a.requestFrame()},t.prototype.start=function(){this._start(),this._startTime=Date.now(),this._time=0,this.staticOptions=[];for(var e=this.animationOptions.length-1;e>=0;e--){var t=this.animationOptions[e];if(d.d(t.from)||(t.childObject?t.from=t.childObject[t.property]:(t.from=this.object[t.property],d.d(t.from)||(t.from=a.a[t.property]))),t.from==t.to)p.o(this.animationOptions,t);else if(!d.d(t.from)||!(t.from instanceof l.a)&&t.to instanceof l.a||t.from instanceof l.a&&!(t.to instanceof l.a))this.staticOptions.push(t),p.o(this.animationOptions,t);else if(d.h(t.to))if(t.updateMethod=y,t.from instanceof l.a){var i=this.object[_(t.property,"pixel")];isNaN(i)?(this.staticOptions.push(t),p.o(this.animationOptions,t)):t.from=i}else isNaN(t.from)&&(this.staticOptions.push(t),p.o(this.animationOptions,t));else if(t.to instanceof s.a)t.from?t.updateMethod=g:(this.staticOptions.push(t),p.o(this.animationOptions,t));else if(t.to instanceof l.a){if(t.updateMethod=v,!isNaN(t.from)){i=this.object[_(t.property,"relative")];isNaN(i)||(t.from=Object(l.c)(100*i))}}else this.staticOptions.push(t),p.o(this.animationOptions,t)}if(this.applyStaticOptions(),this.events.isEnabled("animationstarted")){var n={type:"animationstarted",target:this,progress:this.progress};this.events.dispatchImmediately("animationstarted",n)}return this.update(),0===this.duration&&this.end(),this},t.prototype.loop=function(e){return d.h(e)||(e=1/0),this._loop=e,this},t.prototype.pause=function(){return this._pause=!0,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),p.o(f.a.animations,this),p.o(this.object.animations,this),this},t.prototype.resume=function(){return this._start(),this._startTime=Date.now()-this._time,this},t.prototype.end=function(){if(0==this._loop&&this.pause(),this.setProgress(1),this.applyStaticOptions(),this.events.isEnabled("animationended")){var e={type:"animationended",target:this,progress:this.progress};this.events.dispatchImmediately("animationended",e)}return this._loop>0?(this._loop--,this.start()):(this.stop(),this._isFinished=!0),this},t.prototype.kill=function(){this.pause(),this._isFinished=!0},t.prototype.isFinished=function(){return this._isFinished},t.prototype.applyStaticOptions=function(){var e=this;p.d(this.staticOptions,(function(t){t.childObject?t.childObject[t.property]=1==e.progress?t.to:t.from:e.object[t.property]=1==e.progress?t.to:t.from}))},t.prototype.stop=function(e){if(this.pause(),!e&&this.events.isEnabled("animationstopped")){var t={type:"animationstopped",target:this,progress:this.progress};this.events.dispatchImmediately("animationstopped",t)}return this},t.prototype.setProgress=function(e){var t=this;if(this._time=this.duration*e,p.d(this.animationOptions,(function(i){if(i.updateMethod&&d.d(i.from)){var n=i.updateMethod(e,i.from,i.to);i.childObject?i.childObject[i.property]=n:t.object[i.property]=n}})),this.progress=e,this.events.isEnabled("animationprogress")){var i={type:"animationprogress",target:this,progress:this.progress};this.events.dispatchImmediately("animationprogress",i)}f.a.requestFrame()},t.prototype.update=function(){if(!this._pause){var e=void 0;this._time=h.i(Date.now()-this._startTime,0,this.duration);var t=this._time/this.duration;e=this.easing(t),(0==this.duration||!d.h(e)||t>=1)&&(e=1),this.setProgress(e),1==h.E(this._time/this.duration,6)&&this.end()}return this},Object.defineProperty(t.prototype,"delayed",{get:function(){return!!this._delayTimeout},enumerable:!0,configurable:!0}),t.prototype.stopSameAnimations=function(){var e=this;p.d(p.c(this.object.animations),(function(t){if(t!==e&&!t.delayed){var i=[];p.d(e.animationOptions,(function(e){p.d(t.animationOptions,(function(n){e.property==n.property&&e.childObject==n.childObject&&(i.push(n),0==t.animationOptions.length&&t.kill())}))})),p.d(i,(function(e){p.o(t.animationOptions,e)}))}}))},t.prototype.asFunction=function(t){return"easing"==t||e.prototype.asIs.call(this,t)},t}(r.b)},function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i(2),r=i(18),a=i(3),o=i(54),s=i(15),l=i(20),u=i(1),c=i(6),h=i(0),p=i(14),d=i(27),f=i(23),m=function(e){function t(){var t=e.call(this)||this;return t.isOversized=!1,t.className="Label",t.fill=(new l.a).getFor("text"),t.wrap=!1,t.truncate=!1,t.fullWords=!0,t.ellipsis="\u2026",t.textAlign="start",t.textValign="top",t.layout="absolute",t.baseLineRatio=-.27,t._positionPrecision=1,t.events.on("maxsizechanged",(function(){t.inited&&t.handleMaxSize()}),t,!1),t.events.once("validated",t.handleValidate,t,!1),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.afterDraw=function(){e.prototype.afterDraw.call(this),this.validatePosition()},t.prototype.setPaper=function(t){var i=e.prototype.setPaper.call(this,t);return i&&this.hardInvalidate(),i},t.prototype.handleValidate=function(){!this.currentText&&!this.text||0!=this.bbox.width&&0!=this.bbox.height||a.b.events.once("exitframe",this.hardInvalidate,this)},t.prototype.handleMaxSize=function(){(this.bbox.width>this.availableWidth||this.bbox.width<this.availableWidth&&(this.isOversized||this.truncate)||this.bbox.height>this.availableHeight||this.bbox.height<this.availableHeight&&this.isOversized)&&this.invalidate()},t.prototype.arrange=function(){},t.prototype.updateCurrentText=function(){var e,t;c.x(this.html)&&this.paper.supportsForeignObject()?(e="html",t=this.html):(e="svg",t=this.text),h.i(t)&&(t=t.toString()),h.d(t)&&""!==t&&(t=this.populateString(t,this.dataItem)),"html"==e?this._adapterO&&(t=this._adapterO.apply("htmlOutput",t)):this._adapterO&&(t=this._adapterO.apply("textOutput",t));var i=t!=this.currentText||e!=this._currentFormat;return this.currentText=t,this._currentFormat=e,i},t.prototype.hardInvalidate=function(){this._prevStatus="",this.invalidate()},t.prototype.getLineBBox=function(e){var t=e&&e.element,i=t&&t.node;i&&i.parentNode&&(e.bbox=t.getBBox())},t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.bbox.width,i=this.bbox.height,n=this.topParent;if(!n||n.maxWidth&&n.maxHeight){var r=u.B(this.availableWidth-this.pixelPaddingLeft-this.pixelPaddingRight,0),a=u.B(this.availableHeight-this.pixelPaddingTop-this.pixelPaddingBottom,0),s=a+","+r+this.wrap+this.truncate+this.fullWords+this.rtl+this.ellipsis;if(this.updateCurrentText()||!this.inited||this._prevStatus!=s){this._measuredWidth=0,this._measuredHeight=0,this.isOversized=!1;var l=this._currentFormat,p=this.currentText;if(h.d(p)&&""!=p){var d=p.split("\n");this._prevStatus=s,this.textAlign=this.textAlign;var f=this.group.getAttr("display");if("none"==f&&this.group.removeAttr("display"),this.textPathElement&&this.textPathElement.removeChildren(),"svg"===l){this.element.removeAttr("display");var m=this.element;this.resetBBox();for(var y=0,v="",g=0;g<d.length;g++){var _=d[g];if(""!=_){var b=Object(o.a)().chunk(_,null,this.ignoreFormatting),x=0,w=!0,k=!1,P=this.getLineInfo(g);P?(P.text="",P.element.textContent=""):(P={text:"",element:this.getSVGLineElement("",0),complex:!1},m.add(P.element)),P.element.removeAttr("display"),P.element.removeChildren(),this.textPathElement&&P.element.add(this.textPathElement);for(var S=0;S<b.length;S++){S&&(P.complex=!0);var T=b[S];if("format"===T.type)v=T.text;else{if(k)continue;if(P.text=T.text,P.style=Object(o.a)().translateStyleShortcuts(v),this.textPathElement?this.getSvgElement(P.text,P.style,this.textPathElement):this.getSvgElement(P.text,P.style,P.element),this.getLineBBox(P),P.bbox.width=Math.ceil(P.bbox.width),x<P.bbox.height&&(x=P.bbox.height),(this.wrap||this.truncate)&&P.bbox.width>r){this.isOversized=!0;var C=P.element.textContent,O=P.bbox.width/C.length,I=u.C(Math.ceil((P.bbox.width-r)/O),C.length);if(this.truncate){var E=!1,A=P.element.node;if(A&&A.childNodes)for(var M=P.element.node.childNodes.length-1;M>=0;M--){var D=P.element.node.childNodes[M];if(E&&P.bbox.width<=r&&(D.textContent+=" "+this.ellipsis,P.bbox=P.element.getBBox(),P.bbox.width=Math.floor(P.bbox.width),P.bbox.width<=r))break;E=!1;var j=D.textContent;for(C=P.element.textContent,I=u.C(Math.ceil((P.bbox.width-r)/O),C.length);P.bbox.width>r&&I<=C.length&&I>0;){(R=u.B(C.length-I-this.ellipsis.length,1))<=1&&(I=0,M>0&&(E=!0,P.element.node.removeChild(D))),(j=c.Q(j,R,this.ellipsis,this.fullWords,this.rtl)).length>R&&this.fullWords&&(j=c.Q(j,R,this.ellipsis,!1,this.rtl)),D.textContent=j,P.bbox=P.element.getBBox(),P.bbox.width=Math.floor(P.bbox.width),I=Math.ceil(1.1*I)}k=!0}}else{if(P.element.node){for(var F=P.element.node.lastChild,L=void 0;P.bbox.width>r&&I<=C.length&&I>0;){var R=u.B(T.text.length-I,1);if(w?L=c.G(T.text,R,!0,this.rtl):((L=c.G(T.text,R,!0,this.rtl,!1))[0].length>R||1===R)&&(P.element.node.removeChild(F),I=0),I>0){var z=L.shift();w&&(z=c.P(z)),F.textContent=Object(o.a)().cleanUp(z)}P.bbox=P.element.getBBox(),P.bbox.width=Math.floor(P.bbox.width),I++}if(L.length>0){var V="";h.d(L)&&(this.rtl?V+=L.join("")+v:V+=v+L.join("").replace(/([\[\]]{1})/g,"$1$1"));for(var B=S+1;B<b.length;B++)"value"==b[B].type?V+=b[B].text.replace(/([\[\]]{1})/g,"$1$1"):V+=b[B].text;d.splice(g+1,0,V)}k=!0}}}this.bbox.width<P.bbox.width&&(this.bbox.width=P.bbox.width),this.bbox.height=y+x,this.textPathElement?P.element.attr({dy:-this.paddingBottom.toString()}):P.element.attr({x:"0",y:y+x,dy:u.E(this.baseLineRatio*x,3).toString()}),w=!1}}var N=P.element.node;if(N)(F=N.lastChild)&&(F.textContent=this.rtl?c.z(F.textContent):c.F(F.textContent));y+=x,this.addLineInfo(P,g)}else{var U=this.getSVGLineElement("",0);U.add(this.getSvgElement(".",Object(o.a)().translateStyleShortcuts(v))),m.add(U);var W=Math.ceil(U.getBBox().height);W>0&&(y+=W),m.removeElement(U);var G=this.getLineInfo(g);G&&(G.text="",G.element.textContent="")}}this.maybeHideOversized(),this.measureFailed=!1,0!=this.bbox.width&&0!=this.bbox.height||(this.measureFailed=!0),this._measuredWidth=u.E(u.B(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight)),this._measuredHeight=u.E(u.B(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom)),this.alignSVGText(),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,i==this._measuredHeight&&t==this._measuredWidth||this.dispatch("transformed"),this.hideUnused(d.length)}else{this.element.removeAttr("display"),this.resetBBox(),(m=this.element).removeChildren();var H=this.paper.foreignObject();m.add(H),this.maxWidth&&H.attr({width:this.maxWidth-this.pixelPaddingLeft-this.pixelPaddingRight}),this.maxHeight&&H.attr({height:this.maxHeight-this.pixelPaddingTop-this.pixelPaddingBottom});var X=this.getHTMLLineElement(p);H.node.appendChild(X),X.style.display="inline-block";var Y=X.clientWidth,q=X.clientHeight;X.style.display="block",this._bbox={x:0,y:0,width:Y,height:q},H.attr({width:Y+1,height:q}),this.maybeHideOversized(),this._measuredWidth=u.B(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight),this._measuredHeight=u.B(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,this.truncate&&(X.style.overflow="hidden"),(Y>r||q>a)&&(this.isOversized=!0)}this.setStyles(),this.updateCenter(),this.updateBackground(),"none"==f&&this.group.attr({display:"none"}),this.pathElement&&this.paper.appendDef(this.pathElement)}else this.element.attr({display:"none"})}}else n.events.once("maxsizechanged",this.hardInvalidate,this,!1)},t.prototype.maybeHideOversized=function(){this.hideOversized&&(this.availableWidth<this.bbox.width||this.availableHeight<this.bbox.height?(this.element.attr({display:"none"}),this.isOversized=!0):(this.element.removeAttr("display"),this.isOversized=!1))},t.prototype.alignSVGText=function(){var e=this.element,t=e.node.children||e.node.childNodes;if(t&&(!t||0!=t.length)){var i=this._measuredWidth,n=this._measuredHeight;c.R(this.pixelPaddingLeft),c.R(this.pixelPaddingRight),c.R(this.pixelPaddingTop),c.R(this.pixelPaddingBottom),this.rtl?e.attr({direction:"rtl"}):e.removeAttr("direction");for(var r=t.length-1;r>=0;r--){var a=t[r];if(a.setAttribute("text-anchor",this.textAlign),this.textPathElement)a.removeAttribute("x"),a.removeAttribute("y");else{switch(this.textAlign){case"middle":a.setAttribute("x",(i/2).toString()+"px");break;case"end":this.rtl||a.setAttribute("x",i.toString());break;default:this.rtl?a.setAttribute("x",i.toString()):a.removeAttribute("text-anchor")}var o=h.l(a.getAttribute("y"));switch(this.textValign){case"middle":a.setAttribute("y",((o||0)+(n-this.bbox.height)/2).toString());break;case"bottom":a.setAttribute("y",((o||0)+n-this.bbox.height).toString());break;default:a.setAttribute("y",(o||0).toString())}}}}},t.prototype.getSVGLineElement=function(e,t){var i=this.paper.addGroup("text");return i.textContent=e,i.attr({x:"0"}),h.d(t)&&i.attr({y:t.toString()}),(this.truncate||this.wrap)&&i.attr({overflow:"hidden"}),i},Object.defineProperty(t.prototype,"rtl",{get:function(){return h.d(this._rtl)?this._rtl:!!this._topParent&&this._topParent.rtl},set:function(e){e=h.k(e),this._rtl=e,this.element&&this.alignSVGText()},enumerable:!0,configurable:!0}),t.prototype.resetBBox=function(){this._bbox={x:0,y:0,width:0,height:0}},t.prototype.getHTMLLineElement=function(e){var t=document.createElement("div");switch(t.innerHTML=e,this.textAlign){case"middle":t.style.textAlign="center";break;case"end":t.style.textAlign="right"}return this.wrap?t.style.wordWrap="break-word":t.style.whiteSpace="nowrap",this.rtl&&(t.style.direction="rtl"),h.d(this.fill)&&(t.style.color=this.fill.toString()),t},t.prototype.setStyles=function(){var e=this.element;!this.selectable||this.draggable||this.resizable||this.swipeable?e.addStyle({webkitUserSelect:"none",msUserSelect:"none"}):this.selectable&&(e.removeStyle("webkitUserSelect"),e.removeStyle("msUserSelect"))},t.prototype.hideUnused=function(e){this.initLineCache();var t=this.getCache("lineInfo");if(t.length>=e)for(var i=e;i<t.length;i++){var n=t[i];n&&n.element&&n.element.attr({display:"none"})}},Object.defineProperty(t.prototype,"text",{get:function(){return this.getPropertyValue("text")},set:function(e){this.setPropertyValue("text",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(e){this.setPropertyValue("path",e,!0)&&(this.pathElement&&this.pathElement.dispose(),this.textPathElement&&this.textPathElement.dispose(),this.pathElement=this.paper.add("path"),this.pathElement.attr({d:e}),this.pathElement.attr({id:"text-path-"+this.uid}),this._disposers.push(this.pathElement),this.textPathElement=this.paper.addGroup("textPath"),this.textPathElement.attrNS(p.c,"xlink:href","#text-path-"+this.uid),this.textPathElement.attr({path:e}),this._disposers.push(this.textPathElement),this.hardInvalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationOnPath",{get:function(){return this.getPropertyValue("locationOnPath")},set:function(e){this.setPropertyValue("locationOnPath",e),this.textPathElement&&this.textPathElement.attr({startOffset:100*e+"%"})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseLineRatio",{get:function(){return this.getPropertyValue("baseLineRatio")},set:function(e){this.setPropertyValue("baseLineRatio",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrap",{get:function(){return this.getPropertyValue("wrap")},set:function(e){this.resetBBox(),this.setPropertyValue("wrap",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"truncate",{get:function(){return this.getPropertyValue("truncate")},set:function(e){this.resetBBox(),this.setPropertyValue("truncate",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullWords",{get:function(){return this.getPropertyValue("fullWords")},set:function(e){this.setPropertyValue("fullWords",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ellipsis",{get:function(){return this.getPropertyValue("ellipsis")},set:function(e){this.setPropertyValue("ellipsis",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectable",{get:function(){return this.getPropertyValue("selectable")},set:function(e){this.setPropertyValue("selectable",e,!0),this.setStyles()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAlign",{get:function(){return this.getPropertyValue("textAlign")},set:function(e){this.setPropertyValue("textAlign",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textValign",{get:function(){return this.getPropertyValue("textValign")},set:function(e){this.setPropertyValue("textValign",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"html",{get:function(){return this.getPropertyValue("html")},set:function(e){this.setPropertyValue("html",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideOversized",{get:function(){return this.getPropertyValue("hideOversized")},set:function(e){this.setPropertyValue("hideOversized",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ignoreFormatting",{get:function(){return this.getPropertyValue("ignoreFormatting")},set:function(e){this.setPropertyValue("ignoreFormatting",e,!0)},enumerable:!0,configurable:!0}),t.prototype.measureElement=function(){},t.prototype.getLineInfo=function(e){this.initLineCache();var t=this.getCache("lineInfo");return t.length>e?t[e]:void 0},t.prototype.addLineInfo=function(e,t){this.initLineCache(),this.getCache("lineInfo")[t]=e},t.prototype.initLineCache=function(){h.d(this.getCache("lineInfo"))||this.setCache("lineInfo",[],0)},t.prototype.setDataItem=function(t){this._sourceDataItemEvents&&this._sourceDataItemEvents.dispose(),t&&(this._sourceDataItemEvents=new s.c([t.events.on("valuechanged",this.invalidate,this,!1),t.events.on("workingvaluechanged",this.invalidate,this,!1),t.events.on("calculatedvaluechanged",this.invalidate,this,!1),t.events.on("propertychanged",this.invalidate,this,!1)])),e.prototype.setDataItem.call(this,t)},Object.defineProperty(t.prototype,"availableWidth",{get:function(){return h.d(this.maxWidth)?this.maxWidth:this.pixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"availableHeight",{get:function(){return h.d(this.maxHeight)?this.maxHeight:this.pixelHeight},enumerable:!0,configurable:!0}),t.prototype.getSvgElement=function(e,t,i){var n=this.paper.add("tspan");if(n.textContent=e,t)if(f.a.nonce&&i){var r="amcharts_element_style_"+btoa(t).replace(/[^\w]*/g,"");n.node.setAttribute("class",r);var a=document.createElementNS(p.a,"defs");i.node.appendChild(a);var o=document.createElement("style");o.type="text/css",o.innerHTML="."+r+" { "+t+"}",o.setAttribute("nonce",f.a.nonce),a.appendChild(o)}else n.node.setAttribute("style",t);return i&&i.add(n),n},t.prototype.deepInvalidate=function(){e.prototype.deepInvalidate.call(this),this.hardInvalidate()},Object.defineProperty(t.prototype,"readerTitle",{get:function(){var e=this.getPropertyValue("readerTitle");return e?this.dataItem&&(e=this.populateString(e)):e=this.populateString(c.C(c.x(this.html)?this.html:this.text)),e},set:function(e){e=h.n(e),this.setPropertyValue("readerTitle",e)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),t}(r.a);a.b.registeredClasses.Label=m,d.c.push({relevant:d.b.heightXS,state:function(e,t){if(e instanceof m&&e.parent&&e.parent.isBaseSprite){var i=e.states.create(t);return i.properties.disabled=!0,i}return null}})},function(e,t,i){e.exports=i(226)()},function(e,t,i){"use strict";i.d(t,"c",(function(){return u})),i.d(t,"d",(function(){return c})),i.d(t,"a",(function(){return m})),i.d(t,"b",(function(){return y}));var n=i(2),r=i(3),a=i(4),o=i(7),s=i(6),l=i(1),u=function(){function e(e,t){this._tensionX=e,this._tensionY=t}return e.prototype.smooth=function(e){for(var t=e.length-1;t>0;t--){var i=e[t],n=e[t-1];Math.abs(i.x-n.x)<.1&&Math.abs(i.y-n.y)<.1&&e.splice(t-1,1)}var r=this._tensionX,o=this._tensionY;if(e.length<3||r>=1&&o>=1)return a.h(e);var s=e[0],u=e[e.length-1],c=!1;l.E(s.x,3)==l.E(u.x)&&l.E(s.y)==l.E(u.y)&&(c=!0);for(var h="",p=(t=0,e.length-1);t<p;t++){i=e[t-1],n=e[t];var d=e[t+1],f=e[t+2];0===t?i=c?e[e.length-2]:e[t]:t==e.length-2&&(f=c?e[1]:e[t+1]);var m=l.n(i,n,d,f,r,o),y=l.o(i,n,d,f,r,o);h+=a.e(d,m,y)}return h},e}();function c(e,t,i,n,o,c){var h=e.x,p=e.y,d=t.x,f=t.y,m=l.q(e,t);c&&(i=m/Math.round(m/i));var y=r.b.getCache(s.L(["wavedLine",e.x,t.x,e.y,t.y,i,n]));if(!y){if(m>0){var v=Math.atan2(f-p,d-h),g=Math.cos(v),_=Math.sin(v),b=i*g,x=i*_;if(i<=1||n<=1)y=a.f(t);else{var w=Math.round(2*m/i),k=[],P=1;d<h&&(P*=-1),f<p&&(P*=-1);for(var S=0;S<=w;S++){var T=h+S*b/2+(P*=-1)*n/2*_,C=p+S*x/2-P*n/2*g;k.push({x:T,y:C})}y=new u(o,o).smooth(k)}}else y="";r.b.setCache(s.L(["wavedLine",e.x,t.x,e.y,t.y,i,n]),y)}return y}var h=function(){function e(e,t){this._reversed=e,this._closed=t.closed}return e.prototype._curve=function(e,t,i,n,r,o){var s=(t-e)/3;return this._reversed?a.e({x:n,y:t},{x:i+s*r,y:e+s},{x:n-s*o,y:t-s}):a.e({x:t,y:n},{x:e+s,y:i+s*r},{x:t-s,y:n-s*o})},e.prototype.smooth=function(e){var t=this,i=NaN,n=NaN,r=NaN,s=NaN,l=NaN,u=0,c="";switch(o.d(e,(function(e){var o=e.x,h=e.y;if(t._reversed){var p=o;o=h,h=p}var m=NaN;if(o!==n||h!==s){switch(u){case 0:u=1,t._reversed?c+=a.f({x:h,y:o}):c+=a.f({x:o,y:h});break;case 1:u=2;break;case 2:u=3,c+=t._curve(i,n,r,s,d(i,n,r,s,m=f(i,n,r,s,o,h)),m);break;default:c+=t._curve(i,n,r,s,l,m=f(i,n,r,s,o,h))}i=n,n=o,r=s,s=h,l=m}})),u){case 2:this._reversed?c+=a.f({x:s,y:n}):c+=a.f({x:n,y:s});break;case 3:c+=this._curve(i,n,r,s,l,d(i,n,r,s,l))}return this._closed&&(c+=a.d()),c},e}();function p(e){return e<0?-1:1}function d(e,t,i,n,r){var a=t-e;return a?(3*(n-i)/a-r)/2:r}function f(e,t,i,n,r,a){var o=t-e,s=r-t,l=(n-i)/(o||s<0&&-0),u=(a-n)/(s||o<0&&-0),c=(l*s+u*o)/(o+s);return(p(l)+p(u))*Math.min(Math.abs(l),Math.abs(u),.5*Math.abs(c))||0}var m=function(e){function t(t){return e.call(this,!1,t)||this}return Object(n.c)(t,e),t}(h),y=function(e){function t(t){return e.call(this,!0,t)||this}return Object(n.c)(t,e),t}(h);!function(){function e(e){this._closed=e.closed}e.prototype.smooth=function(e){var t=this,i=NaN,n=NaN,r=NaN,s=NaN,l=NaN,u=NaN,c=NaN,h=NaN,p=NaN,d=NaN,f=0,m="",y=function(e,t){m+=a.e({x:(i+4*n+e)/6,y:(u+4*c+t)/6},{x:(2*i+n)/3,y:(2*u+c)/3},{x:(i+2*n)/3,y:(u+2*c)/3})},v=function(e){var o=e.x,v=e.y;switch(f){case 0:f=1,t._closed?(r=o,h=v):m+=a.f({x:o,y:v});break;case 1:f=2,t._closed&&(s=o,p=v);break;case 2:if(f=3,t._closed){l=o,d=v,m+=a.g({x:(i+4*n+o)/6,y:(u+4*c+v)/6});break}m+=a.f({x:(5*i+n)/6,y:(5*u+c)/6});default:y(o,v)}i=n,n=o,u=c,c=v};if(o.d(e,v),this._closed)switch(f){case 1:m+=a.g({x:r,y:h}),m+=a.d();break;case 2:m+=a.g({x:(r+2*s)/3,y:(h+2*p)/3}),m+=a.f({x:(s+2*r)/3,y:(p+2*h)/3}),m+=a.d();break;case 3:v({x:r,y:h}),v({x:s,y:p}),v({x:l,y:d})}else{switch(f){case 3:y(n,c);case 2:m+=a.f({x:n,y:c})}m+=a.d()}return m}}()},function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return u})),i.d(t,"e",(function(){return c})),i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return p}));var n=i(1),r=i(3);function a(e){return+e}function o(e,t){return Math.pow(e,t)}function s(e,t){return 1-Math.pow(1-e,t)}function l(e,t){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}function u(e){return s(e,3)}function c(e){return Math.sin(e*n.b)}function h(e){return e*e*e}function p(e){return--e*e*e+1}r.b.registeredClasses["ease.linear"]=a,r.b.registeredClasses["ease.quadIn"]=function(e){return e*e},r.b.registeredClasses["ease.quadOut"]=function(e){return e*(2-e)},r.b.registeredClasses["ease.quadInOut"]=function(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2},r.b.registeredClasses["ease.polyIn"]=o,r.b.registeredClasses["ease.polyOut"]=s,r.b.registeredClasses["ease.polyInOut"]=l,r.b.registeredClasses["ease.polyIn3"]=function(e){return o(e,3)},r.b.registeredClasses["ease.polyOut3"]=u,r.b.registeredClasses["ease.polyInOut3"]=function(e){return l(e,3)},r.b.registeredClasses["ease.expIn"]=function(e){return Math.pow(2,10*e-10)},r.b.registeredClasses["ease.expOut"]=function(e){return 1-Math.pow(2,-10*e)},r.b.registeredClasses["ease.expInOut"]=function(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2},r.b.registeredClasses["ease.sinIn"]=function(e){return 1-Math.cos(e*n.b)},r.b.registeredClasses["ease.sinOut"]=c,r.b.registeredClasses["ease.sinInOut"]=function(e){return(1-Math.cos(n.c*e))/2},r.b.registeredClasses["ease.cubicIn"]=h,r.b.registeredClasses["ease.cubicOut"]=p,r.b.registeredClasses["ease.cubicInOut"]=function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2},r.b.registeredClasses["ease.circleIn"]=function(e){return 1-Math.sqrt(1-e*e)},r.b.registeredClasses["ease.circleOut"]=function(e){return Math.sqrt(1- --e*e)},r.b.registeredClasses["ease.circleInOut"]=function(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2};var d=4/11,f=7.5625;function m(e){return(e=+e)<d?f*e*e:e<.7272727272727273?f*(e-=.5454545454545454)*e+.75:e<.9090909090909091?f*(e-=.8181818181818182)*e+.9375:f*(e-=.9545454545454546)*e+.984375}r.b.registeredClasses["ease.bounceIn"]=function(e){return 1-m(1-e)},r.b.registeredClasses["ease.bounceOut"]=m,r.b.registeredClasses["ease.bounceInOut"]=function(e){return((e*=2)<=1?1-m(1-e):m(e-1)+1)/2};var y=2*Math.PI,v=.3/y,g=Math.asin(1)*v;r.b.registeredClasses["ease.elasticIn"]=function(e){return 1*Math.pow(2,10*--e)*Math.sin((g-e)/v)},r.b.registeredClasses["ease.elasticOut"]=function(e){return 1-1*Math.pow(2,-10*(e=+e))*Math.sin((e+g)/v)},r.b.registeredClasses["ease.elasticInOut"]=function(e){return((e=2*e-1)<0?1*Math.pow(2,10*e)*Math.sin((g-e)/v):2-1*Math.pow(2,-10*e)*Math.sin((g+e)/v))/2}},function(e,t,i){"use strict";i.d(t,"f",(function(){return o})),i.d(t,"g",(function(){return s})),i.d(t,"i",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"e",(function(){return h})),i.d(t,"a",(function(){return d})),i.d(t,"j",(function(){return f})),i.d(t,"b",(function(){return m})),i.d(t,"h",(function(){return y})),i.d(t,"d",(function(){return v}));var n=i(1),r=i(0),a={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};function o(e,t){var i;return a[e]?i=a[e]:"#"===e.charAt(0)?i=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(function(e,t,i,n){return t+t+i+i+n+n}));var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(function(e,t,i,n,r){return t+t+i+i+n+n+r+r}));var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16),a:parseInt(i[4],16)/256}:void 0}(e)}(e):e.match(/^rgba?\(/)&&(i=function(e){var t=(e=e.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(t)t.push("1");else if(!(t=e.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i)))return;return{r:parseInt(t[1]),g:parseInt(t[2]),b:parseInt(t[3]),a:parseFloat(t[4])}}(e)),i||(i={r:0,g:0,b:0,a:1}),r.d(t)&&(i.a=t),i}function s(e){return"#"+u(e.r.toString(16))+u(e.g.toString(16))+u(e.b.toString(16))}function l(e){return r.d(e.a)&&1!==e.a?"rgba("+e.r+","+e.g+","+e.b+","+e.a+")":"rgb("+e.r+","+e.g+","+e.b+")"}function u(e){return 1==e.length?"0"+e:""+e}function c(e,t,i){return i=n.i(i,0,1),e?t?{r:e.r+Math.round((t.r-e.r)*i),g:e.g+Math.round((t.g-e.g)*i),b:e.b+Math.round((t.b-e.b)*i),a:(e.a||1)+Math.round(((t.a||1)-(e.a||1))*i)}:e:t||e}function h(e,t){return e?{r:Math.max(0,Math.min(255,e.r+p(e.r,t))),g:Math.max(0,Math.min(255,e.g+p(e.g,t))),b:Math.max(0,Math.min(255,e.b+p(e.b,t))),a:e.a}:e}function p(e,t){var i=t>0?255-e:e;return Math.round(i*t)}function d(e,t){if(e){var i=p(Math.min(Math.max(e.r,e.g,e.b),230),t);return{r:Math.max(0,Math.min(255,Math.round(e.r+i))),g:Math.max(0,Math.min(255,Math.round(e.g+i))),b:Math.max(0,Math.min(255,Math.round(e.b+i))),a:e.a}}return e}function f(e,t){if(null==e||1==t)return e;var i=y(e);return i.s=t,m(i)}function m(e){var t,i,n,r=e.h,a=e.s,o=e.l;if(0==a)t=i=n=o;else{var s=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e},l=o<.5?o*(1+a):o+a-o*a,u=2*o-l;t=s(u,l,r+1/3),i=s(u,l,r),n=s(u,l,r-1/3)}return{r:Math.round(255*t),g:Math.round(255*i),b:Math.round(255*n)}}function y(e){var t=e.r/255,i=e.g/255,n=e.b/255,r=Math.max(t,i,n),a=Math.min(t,i,n),o=0,s=0,l=(r+a)/2;if(r===a)o=s=0;else{var u=r-a;switch(s=l>.5?u/(2-r-a):u/(r+a),r){case t:o=(i-n)/u+(i<n?6:0);break;case i:o=(n-t)/u+2;break;case n:o=(t-i)/u+4}o/=6}return{h:o,s:s,l:l}}function v(e){return(299*e.r+587*e.g+114*e.b)/1e3>=128}},function(e,t,i){"use strict";i.d(t,"a",(function(){return b})),i.d(t,"b",(function(){return y})),i.d(t,"c",(function(){return T})),i.d(t,"d",(function(){return m})),i.d(t,"e",(function(){return _}));var n=i(52),r=i(5),a=i.n(r),o=i(67),s=i(185),l=i(69),u=i(10),c=i(162),h=i.n(c),p=(i(229),i(29)),d=(i(90),function(e){var t=Object(s.a)();return t.displayName=e,t}),f=d("Router-History"),m=d("Router"),y=function(e){function t(t){var i;return(i=e.call(this,t)||this).state={location:t.history.location},i._isMounted=!1,i._pendingLocation=null,t.staticContext||(i.unlisten=t.history.listen((function(e){i._isMounted?i.setState({location:e}):i._pendingLocation=e}))),i}Object(n.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var i=t.prototype;return i.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},i.render=function(){return a.a.createElement(m.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},a.a.createElement(f.Provider,{children:this.props.children||null,value:this.props.history}))},t}(a.a.Component);a.a.Component;a.a.Component;var v={},g=0;function _(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var i=t,n=i.path,r=i.exact,a=void 0!==r&&r,o=i.strict,s=void 0!==o&&o,l=i.sensitive,u=void 0!==l&&l;return[].concat(n).reduce((function(t,i){if(!i&&""!==i)return null;if(t)return t;var n=function(e,t){var i=""+t.end+t.strict+t.sensitive,n=v[i]||(v[i]={});if(n[e])return n[e];var r=[],a={regexp:h()(e,r,t),keys:r};return g<1e4&&(n[e]=a,g++),a}(i,{end:a,strict:s,sensitive:u}),r=n.regexp,o=n.keys,l=r.exec(e);if(!l)return null;var c=l[0],p=l.slice(1),d=e===c;return a&&!d?null:{path:i,url:"/"===i&&""===c?"/":c,isExact:d,params:o.reduce((function(e,t,i){return e[t.name]=p[i],e}),{})}}),null)}var b=function(e){function t(){return e.apply(this,arguments)||this}return Object(n.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(m.Consumer,null,(function(t){t||Object(l.a)(!1);var i=e.props.location||t.location,n=e.props.computedMatch?e.props.computedMatch:e.props.path?_(i.pathname,e.props):t.match,r=Object(u.a)({},t,{location:i,match:n}),o=e.props,s=o.children,c=o.component,h=o.render;return Array.isArray(s)&&function(e){return 0===a.a.Children.count(e)}(s)&&(s=null),a.a.createElement(m.Provider,{value:r},r.match?s?"function"===typeof s?s(r):s:c?a.a.createElement(c,r):h?h(r):null:"function"===typeof s?s(r):null)}))},t}(a.a.Component);function x(e){return"/"===e.charAt(0)?e:"/"+e}function w(e,t){if(!e)return t;var i=x(e);return 0!==t.pathname.indexOf(i)?t:Object(u.a)({},t,{pathname:t.pathname.substr(i.length)})}function k(e){return"string"===typeof e?e:Object(o.e)(e)}function P(e){return function(){Object(l.a)(!1)}}function S(){}a.a.Component;var T=function(e){function t(){return e.apply(this,arguments)||this}return Object(n.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(m.Consumer,null,(function(t){t||Object(l.a)(!1);var i,n,r=e.props.location||t.location;return a.a.Children.forEach(e.props.children,(function(e){if(null==n&&a.a.isValidElement(e)){i=e;var o=e.props.path||e.props.from;n=o?_(r.pathname,Object(u.a)({},e.props,{path:o})):t.match}})),n?a.a.cloneElement(i,{location:r,computedMatch:n}):null}))},t}(a.a.Component);a.a.useContext},function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i(2),r=i(26),a=i(12),o=i(58),s=i(3),l=i(8),u=i(1),c=i(0),h=function(e){function t(){var t=e.call(this)||this;return t._stops=new a.a,t._rotation=0,t.className="LinearGradient",t._stops.events.on("setIndex",t.validate,t),t._stops.events.on("inserted",t.validate,t),t.element=t.paper.addGroup("linearGradient"),t.id="gradient-"+s.b.getUniqueId(),t.element.attr({id:t.id}),t._disposers.push(t.element),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.validate=function(){var e=this,t=(this._rotation+90)*u.d,i=Math.round(50+50*Math.sin(t+Math.PI))+"%",n=Math.round(50+50*Math.cos(t))+"%",r=Math.round(50+50*Math.sin(t))+"%",a=Math.round(50+50*Math.cos(t+Math.PI))+"%",o=this.element;o.removeChildNodes(),o.attr({x1:i,x2:r,y1:n,y2:a}),l.d(l.i(this._stops.iterator()),(function(t){var i=t[0],n=t[1],r=n.offset;c.h(r)||(r=i/(e._stops.length-1));var a=e.paper.add("stop");c.d(n.color)&&a.attr({"stop-color":n.color.toString()}),c.h(n.opacity)&&a.attr({"stop-opacity":n.opacity}),c.h(r)&&a.attr({offset:r}),o.add(a)}))},t.prototype.clear=function(){this._stops.clear()},t.prototype.addColor=function(e,t,i){this._stops.push({color:e,opacity:t,offset:i})},Object.defineProperty(t.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paper",{get:function(){return this._paper?this._paper:Object(o.b)()},set:function(e){this._paper!=e&&(this._paper=e,this.validate(),e.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e,this.validate()},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.stops.copyFrom(t.stops),this._rotation=t.rotation},Object.defineProperty(t.prototype,"gradientUnits",{set:function(e){this.element.attr({gradientUnits:e})},enumerable:!0,configurable:!0}),t}(r.a);s.b.registeredClasses.LinearGradient=h},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(2),r=i(16),a=i(3),o=i(1),s=i(0),l=i(6),u=function(e){function t(){var t=e.call(this)||this;return t.className="RoundedRectangle",t.element=t.paper.add("path"),t.cornerRadius(3,3,3,3),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.innerWidth,i=this.innerHeight;if(s.h(t)&&s.h(i)){var n=o.C(t,i)/2,r=l.E(this.cornerRadiusTopLeft,n),a=l.E(this.cornerRadiusTopRight,n),u=l.E(this.cornerRadiusBottomRight,n),c=l.E(this.cornerRadiusBottomLeft,n),h=o.C(Math.abs(t/2),Math.abs(i/2)),p=o.i(r,0,h),d=o.i(a,0,h),f=o.i(u,0,h),m=o.i(c,0,h),y="M"+p+",0 L"+(t-d)+",0"+(" a"+d+","+d+" 0 0 1 "+d+","+d)+(" L"+t+","+(i-f))+(" a"+f+","+f+" 0 0 1 -"+f+","+f)+(" L"+m+","+i)+(" a"+m+","+m+" 0 0 1 -"+m+",-"+m)+(" L0,"+p)+(" a"+p+","+p+" 0 0 1 "+p+",-"+p)+" Z";this.path=y}},t.prototype.cornerRadius=function(e,t,i,n){this.cornerRadiusTopLeft=e,this.cornerRadiusTopRight=t,this.cornerRadiusBottomLeft=i,this.cornerRadiusBottomRight=n},Object.defineProperty(t.prototype,"cornerRadiusTopLeft",{get:function(){return this.getPropertyValue("cornerRadiusTopLeft")},set:function(e){this.setPercentProperty("cornerRadiusTopLeft",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadiusTopRight",{get:function(){return this.getPropertyValue("cornerRadiusTopRight")},set:function(e){this.setPercentProperty("cornerRadiusTopRight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadiusBottomRight",{get:function(){return this.getPropertyValue("cornerRadiusBottomRight")},set:function(e){this.setPercentProperty("cornerRadiusBottomRight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadiusBottomLeft",{get:function(){return this.getPropertyValue("cornerRadiusBottomLeft")},set:function(e){this.setPercentProperty("cornerRadiusBottomLeft",e,!0)},enumerable:!0,configurable:!0}),t.prototype.measureElement=function(){},Object.defineProperty(t.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),t}(r.a);a.b.registeredClasses.RoundedRectangle=u},function(e,t,i){"use strict";var n=i(10),r=i(30),a=i(5),o=i.n(a),s=i(90),l=i.n(s),u=i(255);function c(e){var t=e.theme,i=e.name,n=e.props;if(!t||!t.props||!t.props[i])return n;var r,a=t.props[i];for(r in a)void 0===n[r]&&(n[r]=a[r]);return n}var h=i(302),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(i){var a=t.defaultTheme,s=t.withTheme,p=void 0!==s&&s,d=t.name,f=Object(r.a)(t,["defaultTheme","withTheme","name"]);var m=d,y=Object(u.a)(e,Object(n.a)({defaultTheme:a,Component:i,name:d||i.displayName,classNamePrefix:m},f)),v=o.a.forwardRef((function(e,t){e.classes;var s,l=e.innerRef,u=Object(r.a)(e,["classes","innerRef"]),f=y(Object(n.a)({},i.defaultProps,e)),m=u;return("string"===typeof d||p)&&(s=Object(h.a)()||a,d&&(m=c({theme:s,name:d,props:u})),p&&!m.theme&&(m.theme=s)),o.a.createElement(i,Object(n.a)({ref:l||t,classes:f},m))}));return l()(v,i),v}},d=i(112);t.a=function(e,t){return p(e,Object(n.a)({defaultTheme:d.a},t))}},function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return p})),i.d(t,"c",(function(){return d})),i.d(t,"f",(function(){return f})),i.d(t,"e",(function(){return m})),i.d(t,"d",(function(){return y}));var n=i(7),r=!1,a=[],o=[],s=[],l=[],u="function"===typeof requestAnimationFrame?function(e){requestAnimationFrame(e)}:function(e){setTimeout(e,16.666666666666668)};function c(){for(var e=Date.now(),t=a.length,i=0;i<t;++i)a[i](e);n.r(a,t);for(i=0;i<o.length;++i)o[i](e);o.length=0;for(i=0;i<s.length;++i)s[i](e);s.length=0,0===a.length&&0===o.length?r=!1:u(c)}function h(){r||(r=!0,u(c))}function p(e){a.push(e),h()}function d(e){o.push(e),h()}function f(e){s.push(e),h()}function m(e){l.push(e)}function y(){for(var e=Date.now(),t=l.length,i=0;i<t;++i)l.shift()(e)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return u}));var n=i(2),r=i(15),a=i(7),o=i(47),s=i(0),l=function(){function e(){this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{a.d(e,(function(e){e.disposer.dispose()}))}finally{this._killed=null,this._iterating=null}}},e.prototype.hasListeners=function(){return 0!==this._listeners.length},e.prototype.hasListenersByType=function(e){return a.b(this._listeners,(function(t){return(null===t.type||t.type===e)&&!t.killed}))},e.prototype.enable=function(){this._enabled=!0},e.prototype.disable=function(){this._enabled=!1},e.prototype.enableType=function(e){delete this._disabled[e]},e.prototype.disableType=function(e,t){void 0===t&&(t=1/0),this._disabled[e]=t},e.prototype._removeListener=function(e){if(0===this._iterating){var t=this._listeners.indexOf(e);if(-1===t)throw new Error("Invalid state: could not remove listener");this._listeners.splice(t,1)}else this._killed.push(e)},e.prototype._removeExistingListener=function(e,t,i,n){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((function(r){r.once!==e||r.type!==t||null!=i&&r.callback!==i||r.context!==n||r.disposer.dispose()}))},e.prototype.isEnabled=function(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&null==this._disabled[e]},e.prototype.has=function(e,t,i){return-1!==a.g(this._listeners,(function(n){return!0!==n.once&&n.type===e&&(null==t||n.callback===t)&&n.context===i}))},e.prototype._shouldDispatch=function(e){if(this._disposed)throw new Error("EventDispatcher is disposed");var t=this._disabled[e];return s.h(t)?(t<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled},e.prototype._eachListener=function(e){var t=this;++this._iterating;try{a.d(this._listeners,e)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(a.d(this._killed,(function(e){t._removeListener(e)})),this._killed.length=0)}},e.prototype.dispatchImmediately=function(e,t){this._shouldDispatch(e)&&this._eachListener((function(i){i.killed||null!==i.type&&i.type!==e||i.dispatch(e,t)}))},e.prototype.dispatch=function(e,t){this._shouldDispatch(e)&&this._eachListener((function(i){i.killed||null!==i.type&&i.type!==e||o.e((function(){i.killed||i.dispatch(e,t)}))}))},e.prototype._on=function(e,t,i,n,a,o){var s=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,t,i,n);var l={type:t,callback:i,context:n,shouldClone:a,dispatch:o,killed:!1,once:e,disposer:new r.b((function(){l.killed=!0,s._removeListener(l)}))};return this._listeners.push(l),l},e.prototype.onAll=function(e,t,i){return void 0===i&&(i=!0),this._on(!1,null,e,t,i,(function(i,n){return e.call(t,i,n)})).disposer},e.prototype.on=function(e,t,i,n){return void 0===n&&(n=!0),this._on(!1,e,t,i,n,(function(e,n){return t.call(i,n)})).disposer},e.prototype.once=function(e,t,i,n){void 0===n&&(n=!0);var r=this._on(!0,e,t,i,n,(function(e,n){r.disposer.dispose(),t.call(i,n)}));return r.disposer},e.prototype.off=function(e,t,i){this._removeExistingListener(!1,e,t,i)},e.prototype.copyFrom=function(e){var t=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");a.d(e._listeners,(function(e){!e.killed&&e.shouldClone&&(null===e.type?t.onAll(e.callback,e.context):e.once?t.once(e.type,e.callback,e.context):t.on(e.type,e.callback,e.context))}))},e}(),u=function(e){function t(t){var i=e.call(this)||this;return i.target=t,i}return Object(n.c)(t,e),t.prototype.copyFrom=function(e){var t=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");a.d(e._listeners,(function(i){i.context!==e.target&&!i.killed&&i.shouldClone&&(null===i.type?t.onAll(i.callback,i.context):i.once?t.once(i.type,i.callback,i.context):t.on(i.type,i.callback,i.context))}))},t}(l)},function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return c})),i.d(t,"c",(function(){return h}));var n=i(2),r=i(48),a=i(7),o=i(8),s=i(0),l=function(){function e(e){this._values=[],this.events=new r.a,null!=e&&this.setAll(e)}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),e.prototype._insert=function(e){return this._values.push(e),this._values.length-1},Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return a.i(this._values,e)},e.prototype.contains=function(e){return-1!==this.indexOf(e)},e.prototype.getIndex=function(e){return this._values[e]},Object.defineProperty(e.prototype,"first",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._values[this._values.length-1]},enumerable:!0,configurable:!0}),e.prototype.insert=function(e){var t=this._insert(e);this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,index:t,newValue:e})},e.prototype.remove=function(e){var t=this.indexOf(e);if(-1!==t){var i=this._values[t];a.p(this._values,t),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,index:t,oldValue:i})}},e.prototype.setAll=function(e){var t=this;a.f(this._values,(function(e,i){t._values.pop(),t.events.isEnabled("removed")&&t.events.dispatchImmediately("removed",{type:"removed",target:t,index:i,oldValue:e})})),a.d(e,(function(e){t.insert(e)}))},e.prototype.clear=function(){this.setAll([])},e.prototype.slice=function(t,i){var n=new e;return n._values=this._values.slice(t,i),n},e.prototype.findClosestIndex=function(e,t,i){void 0===i&&(i="any");var n,r,a=-1,l=0;return o.e(this.iterator(),(function(o){var u=t(o);if("any"===i){if(u===e)return a=l,!1;var c=Math.abs(e-u);(!s.d(r)||r>c)&&(a=l,n=u,r=c)}else"left"===i&&u<e?(!s.d(n)||n<u)&&(a=l,n=u):"right"===i&&u>=e&&(!s.d(n)||n>=u)&&(a=l,n=u);return++l,!0})),-1===a&&("left"===i?a=0:"right"===i&&(a=this.length-1)),a},e.prototype.iterator=function(){return o.h(this._values)},e.prototype[Symbol.iterator]=function(){var e,t;return Object(n.d)(this,(function(i){switch(i.label){case 0:e=this._values.length,t=0,i.label=1;case 1:return t<e?[4,this._values[t]]:[3,4];case 2:i.sent(),i.label=3;case 3:return++t,[3,1];case 4:return[2]}}))},e.prototype.each=function(e){a.d(this._values,e)},e}(),u=function(e){function t(t){var i=e.call(this)||this;return i._ordering=t,i}return Object(n.c)(t,e),t.prototype._insert=function(e){var t=a.h(this._values,this._ordering,e).index;return a.j(this._values,t,e),t},t.prototype.indexOf=function(e){var t=a.h(this._values,this._ordering,e),i=t.found,n=t.index;return i?n:-1},t.prototype.update=function(e){var t=a.i(this._values,e);if(-1!==t){var i=this._values.length-1;(0===t||this._ordering(this._values[t-1],e)<0)&&(t===i||this._ordering(e,this._values[t+1])<0)||(a.p(this._values,t),this._insert(e))}},t}(l),c=function(e){function t(t){var i=e.call(this)||this;return i.template=t,i}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var t=this;o.d(e.iterator(),(function(e){t.insert(e.clone())}))},t.prototype.slice=function(e,i){var n=new t(this.template);return n._values=this._values.slice(e,i),n},t.prototype.create=function(e){var t=null!=e?new e:this.template.clone();return this.insert(t),t},t}(l),h=function(e){function t(t,i){var n=e.call(this,i)||this;return n.template=t,n}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(e){e.isTemplate=!0,this._template=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(e){var t=this;o.d(e.iterator(),(function(e){t.insert(e.clone())}))},t.prototype.create=function(e){var t=null!=e?new e:this.template.clone();return this.insert(t),t},t}(u)},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(0),r=new(function(){function e(){}return e.prototype.getEventKey=function(e){var t;switch(e.keyCode||e.which){case 38:t="up";break;case 40:t="down";break;case 37:t="left";break;case 39:t="right";break;case 13:t="enter";break;case 27:t="esc";break;case 36:case 36:t="home";break;case 35:case 35:t="end";break;case 9:t="tab";break;case 17:t="ctrl";break;case 18:t="alt";break;case 16:t="shift";break;case 32:t="space";break;case 33:t="pgup";break;case 34:t="pgdn";break;case 45:t="ins";break;case 46:t="del";break;case 107:t="plus";break;case 109:t="minus";break;default:t="other"}return t},e.prototype.isKey=function(e,t){var i=this.getEventKey(e);return n.j(t)&&(t=[t]),-1!==t.indexOf(i)},e.prototype.shiftKey=function(e){return e.shiftKey},e.prototype.ctrlKey=function(e){return e.ctrlKey},e.prototype.altKey=function(e){return e.altKey},e.prototype.metaKey=function(e){return e.metaKey},e}())},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(2),r=i(16),a=i(13),o=i(44),s=i(3),l=i(0),u=i(1),c=function(e){function t(){var t=e.call(this)||this;return t.className="Line",t.element=t.paper.add("line"),t.fill=Object(a.b)(),t.x1=0,t.y1=0,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),this.x1==this.x2||this.y1==this.y2?this.pixelPerfect=!0:this.pixelPerfect=!1,this.x1=this.x1,this.x2=this.x2,this.y1=this.y1,this.y2=this.y2},Object.defineProperty(t.prototype,"x1",{get:function(){return this.getPropertyValue("x1")},set:function(e){l.h(e)||(e=0);var t=0;this.pixelPerfect&&this.stroke instanceof o.a&&(t=1e-5),this.setPropertyValue("x1",e,!0),this.element.attr({x1:e+t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x2",{get:function(){var e=this.getPropertyValue("x2");return l.h(e)||(e=this.pixelWidth),e},set:function(e){l.h(e)||(e=0),this.setPropertyValue("x2",e,!0),this.element.attr({x2:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this.getPropertyValue("y1")},set:function(e){l.h(e)||(e=0);var t=0;this.pixelPerfect&&this.stroke instanceof o.a&&(t=1e-5),this.setPropertyValue("y1",e,!0),this.element.attr({y1:e+t})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y2",{get:function(){var e=this.getPropertyValue("y2");return l.h(e)||(e=this.pixelHeight),e},set:function(e){l.h(e)||(e=0),this.setPropertyValue("y2",e,!0),this.element.attr({y2:e})},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e){var t={x:this.x1,y:this.y1},i={x:this.x2,y:this.y2},n=u.s(t,i,e),r=u.j(t,i);return{x:n.x,y:n.y,angle:r}},t}(r.a);s.b.registeredClasses.Line=c},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(184);function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Object(n.a)(e,t)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(2),r=i(26),a=i(32),o=i(7),s=i(0),l={_decimalSeparator:".",_thousandSeparator:",",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_second:"HH:mm:ss",_date_minute:"HH:mm",_date_hour:"HH:mm",_date_day:"MMM dd",_date_week:"ww",_date_month:"MMM",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(e){var t="th";if(e<11||e>13)switch(e%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd"}return t},"Zoom Out":"",Play:"",Stop:"",Legend:"","Click, tap or press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Click, tap or press ENTER to open":"","Click, tap or press ENTER to print.":"","Click, tap or press ENTER to export as %1.":"",'To save the image, right-click this link and choose "Save picture as..."':"",'To save the image, right-click thumbnail on the left and choose "Save picture as..."':"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""},u=i(23),c=function(e){function t(){var t=e.call(this)||this;return t.adapter=new a.a(t),t._locale=l,t._defaultLocale=l,t.className="Language",s.d(u.a.defaultLocale)&&(t.locale=u.a.defaultLocale),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.getLocale=function(e){return null==e&&(e=this._locale),this.adapter.apply("locale",{locale:e}).locale},t.prototype.translate=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];t=this.getLocale(t);var a=e,o=this.getTranslations(t),l=o[e];if(null===l)l="";else if(s.d(l))l&&(a=l);else if(t!==this._defaultLocale)return this.translate.apply(this,Object(n.f)([e,this._defaultLocale],i));if(i.length)for(var u=i.length,c=0;c<u;++c)a=a.split("%"+(c+1)).join(i[c]);return this.adapter.apply("translate",{translation:a,locale:t}).translation},t.prototype.translateAny=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return this.translate.apply(this,Object(n.f)([e,t],i))},t.prototype.setTranslationAny=function(e,t,i){(i||this.locale)[e]=t},t.prototype.translateEmpty=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var a=this.translate.apply(this,Object(n.f)([e,t],i));return a==e?"":a},t.prototype.translateFunc=function(e,t){t=this.getLocale(t);var i=this.getTranslations(t)[e];return null!=i?i:t!==this._defaultLocale?this.translateFunc(e,this._defaultLocale):function(){return""}},t.prototype.translateAll=function(e,t){var i=this;return this.isDefault()?e:o.l(e,(function(e){return i.translate(e,t)}))},t.prototype.isDefault=function(){return this._defaultLocale===this._locale},Object.defineProperty(t.prototype,"locale",{get:function(){return this._locale},set:function(e){if(this._locale!=e&&(this._locale=e,this.events.isEnabled("localechanged"))){var t={type:"localechanged",locale:e,target:this};this.events.dispatchImmediately("localechanged",t)}},enumerable:!0,configurable:!0}),t.prototype.getTranslations=function(e){return this.adapter.apply("translations",{translations:e,locale:e}).translations},t}(r.b)},function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n,r=i(2),a=i(26),o=i(82),s=i(32),l=i(3),u=i(28),c=i(0),h=function(e){function t(){var t=e.call(this)||this;return t.adapter=new s.a(t),t.className="TextFormatter",t.applyTheme(),t}return Object(r.c)(t,e),t.prototype.debug=function(){},t.prototype.format=function(e,t){c.d(t)||(t="svg");var i="",n=(e=this.escape(e)).match(/\[([^\]]*?)\]/gm);if(!n)return this.wrap(e,"",t);for(var r=e.split(/\[[^\[\]]*\]/),a=0,o=r.length;a<o;a++){var s=r[a];if(""!==s){s=this.adapter.apply("chunk",s);var l="";a>0&&(l=n[a-1].replace("[","").replace("]","")),i+=this.wrap(s,l,t)}}return i=this.unescape(i),this.cleanUp(i)},t.prototype.escape=function(e){return e.replace(/\[\[/g,l.b.getPlaceholder("1")).replace(/([^\/]{1})\]\]/g,"$1"+l.b.getPlaceholder("2")).replace(/\]\]/g,l.b.getPlaceholder("2")).replace(/\{\{/g,l.b.getPlaceholder("3")).replace(/\}\}/g,l.b.getPlaceholder("4")).replace(/\'\'/g,l.b.getPlaceholder("5"))},t.prototype.unescape=function(e){return e.replace(new RegExp(l.b.getPlaceholder("1"),"g"),"[[").replace(new RegExp(l.b.getPlaceholder("2"),"g"),"]]").replace(new RegExp(l.b.getPlaceholder("3"),"g"),"{{").replace(new RegExp(l.b.getPlaceholder("4"),"g"),"}}").replace(new RegExp(l.b.getPlaceholder("5"),"g"),"'")},t.prototype.cleanUp=function(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")},t.prototype.wrap=function(e,t,i){return""!==t&&"/"!==t||(t=""),"html"===i?this.wrapHtml(e,this.translateStyleShortcuts(t)):this.wrapSvg(e,this.translateStyleShortcuts(t))},t.prototype.wrapSvg=function(e,t){return""===t?"<tspan>"+e+"</tspan>":"<tspan style='"+t+"'>"+e+"</tspan>"},t.prototype.getSvgElement=function(e,t){var i=new o.a("tspan");return i.textContent=e,t&&i.node.setAttribute("style",t),i},t.prototype.wrapHtml=function(e,t){return""===t?"<span>"+e+"</span>":"<span style='"+this.styleSvgToHtml(t)+"'>"+e+"</span>"},t.prototype.getHtmlElement=function(e,t){var i=document.createElement("span");return i.innerHTML=e,t&&i.setAttribute("style",t),i},t.prototype.styleSvgToHtml=function(e){return e=e.replace(/fill:/,"color:")},t.prototype.translateStyleShortcuts=function(e){if(""==e||"[ ]"==e)return"";var t=l.b.getCache("translateStyleShortcuts_"+e);if(t)return t;var i=e.match(/('[^']*')|("[^"]*")/gi);if(i)for(var n=0;n<i.length;n++)e=e.replace(i[n],i[n].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var r=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w]+)|(\/)/gi);if(!r)return e;for(n=0;n<r.length;n++)r[n].match(/^bold$/i)?r[n]="font-weight:"+r[n]:"/"==r[n]?r[n]="":r[n].match(/:/)?r[n]=r[n].replace(/\+/g," "):r[n]="fill:"+r[n];var a=r.join(";");return l.b.setCache("translateStyleShortcuts_"+e,a),a},t.prototype.chunk=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n=[];e=this.escape(e);for(var r=t?e.split("'"):[e],a=0;a<r.length;a++){var o=r[a];if(""!==o)if(a%2===0)for(var s=(o=(o=o.replace(/\]\[/g,"]"+u.d+"[")).replace(/\[\]/g,"[ ]")).split(/[\[\]]+/),l=0;l<s.length;l++){(c=this.cleanUp(this.unescape(s[l])))!==u.d&&(""!==c&&(l%2===0?n.push({type:"value",text:this.adapter.apply("chunk",c)}):n.push({type:i?"value":"format",text:"["+c+"]"})))}else for(s=o.split(/[\[\]]+/),l=0;l<s.length;l++){var c;""!==(c=this.cleanUp(this.unescape(s[l])))&&(l%2===0?n.push({type:"text",text:c}):this.isImage(c)?n.push({type:"image",text:"["+c+"]"}):n.push({type:"format",text:"["+c+"]"}))}}return n},t.prototype.isImage=function(e){return!!e.match(/img[ ]?:/)},t}(a.a);function p(){return null==n&&(n=new h),n}l.b.registeredClasses.TextFormatter=h},function(e,t,i){"use strict";function n(e,t){return e===t?0:e<t?-1:1}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o})),i.d(t,"c",(function(){return s}));i(60),i(10),i(193),i(77);var n={xs:0,sm:600,md:900,lg:1200,xl:1536},r={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(n[e],"px)")}};function a(e,t,i){var a=e.theme||{};if(Array.isArray(t)){var o=a.breakpoints||r;return t.reduce((function(e,n,r){return e[o.up(o.keys[r])]=i(t[r]),e}),{})}if("object"===typeof t){var s=a.breakpoints||r;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(s.values||n).indexOf(r)){e[s.up(r)]=i(t[r],r)}else{var a=r;e[a]=t[a]}return e}),{})}return i(t)}function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=null==t||null==(e=t.keys)?void 0:e.reduce((function(e,i){return e[t.up(i)]={},e}),{});return i||{}}function s(e,t){return e.reduce((function(e,t){var i=e[t];return(!i||0===Object.keys(i).length)&&delete e[t],e}),t)}},,function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return u}));var n=i(82),r=i(130),a=i(100),o=i(14),s=function(){function e(e,t){this.container=e,this.id=t;var i=document.createElementNS(o.a,"svg");i.setAttribute("version","1.1"),i.setAttributeNS(o.d,"xmlns",o.a),i.setAttributeNS(o.d,"xmlns:xlink",o.c),i.setAttribute("role","group"),this.container.appendChild(i),this.defs=document.createElementNS(o.a,"defs"),i.appendChild(this.defs),i.style.width="100%",i.style.height="100%",i.style.overflow="visible",this.svg=i}return e.prototype.add=function(e){return new n.a(e)},e.prototype.addGroup=function(e){return new r.a(e)},e.prototype.append=function(e){e&&this.svg.appendChild(e.node)},e.prototype.appendDef=function(e){e&&this.defs.appendChild(e.node)},e.prototype.foreignObject=function(){return new n.a("foreignObject")},e.prototype.supportsForeignObject=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")},e}(),l=null;function u(){if(null===l){var e=document.createElement("div");e.hidden=!0,e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.zIndex="-1000000",document.body.appendChild(e);var t=new a.a(e,!0);l=new s(t.SVGContainer,"ghost")}return l}},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(2),r=i(18),a=i(38),o=i(45),s=i(20),l=i(3),u=function(e){function t(){var t=e.call(this)||this;t.className="Button",t.tooltipY=0,t.iconPosition="left",t.layout="horizontal",t.contentAlign="center",t.contentValign="middle",t.padding(8,16,8,16),t.setStateOnChildren=!0;var i=new s.a,n=t.background;n.fill=i.getFor("secondaryButton"),n.stroke=i.getFor("secondaryButtonStroke"),n.fillOpacity=1,n.strokeOpacity=1,n.cornerRadius(3,3,3,3),t.label=new a.a,t.label.fill=i.getFor("secondaryButtonText"),t.label.shouldClone=!1;var r=n.states.create("hover");r.properties.fillOpacity=1,r.properties.fill=i.getFor("secondaryButtonHover");var o=n.states.create("down");return o.transitionDuration=100,o.properties.fill=i.getFor("secondaryButtonDown"),o.properties.fillOpacity=1,t.role="button",t.focusable=!0,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},set:function(e){var t=this._icon;t&&(t.parent=void 0),e&&(this._icon=e,e.parent=this,e.interactionsEnabled=!1,e.shouldClone=!1,this.iconPosition=this.iconPosition,this._disposers.push(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconPosition",{get:function(){return this.getPropertyValue("iconPosition")},set:function(e){this.setPropertyValue("iconPosition",e),this.icon&&("left"==e?this.icon.toBack():this.icon.toFront())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(e){this._label&&this.removeDispose(this._label),this._label=e,e&&(e.parent=this,e.interactionsEnabled=!1,this._disposers.push(this._label))},enumerable:!0,configurable:!0}),t.prototype.createBackground=function(){return new o.a},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),t.label&&this.label.copyFrom(t.label),t.icon&&(this.icon=t.icon.clone())},t}(r.a);l.b.registeredClasses.Button=u},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(120);var r=i(176),a=i(146);function o(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||Object(r.a)(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(2),r=i(26),a=i(32),o=i(37),s=i(6),l=i(7),u=i(0),c=function(e){function t(){var t=e.call(this)||this;return t._disabled=!1,t.hasProperties=!1,t.values={},t.categories={},t.dates={},t.locations={},t.workingLocations={},t.properties={},t.sprites=[],t.isTemplate=!1,t._index=null,t._visible=!0,t._hidden=!1,t._ignoreMinMax=!1,t.hasChildren={},t.isHiding=!1,t._valueAnimations={},t._locationAnimations={},t.className="DataItem",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new a.a(this)),this._adapterO},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.component&&null!=this._index?this._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new o.b(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!this._hidden&&this._visible},set:function(e){e&&(this.hidden=!1),this._visible!=e&&this.setVisibility(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this._hidden},set:function(e){this._hidden!=e&&(this._hidden=e,e?this.setVisibility(!1):this.setVisibility(!0,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"__disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e,l.d(this.sprites,(function(t){t.__disabled=e}))},enumerable:!0,configurable:!0}),t.prototype.setVisibility=function(e,t){if(l.d(this.sprites,(function(t){e?t.visible=t.defaultState.properties.visible:t.hiddenState?t.visible=t.hiddenState.properties.visible:t.visible=!1})),this._visible=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("visibilitychanged")){var i={type:"visibilitychanged",target:this,visible:e};this.events.dispatchImmediately("visibilitychanged",i)}},t.prototype.show=function(e,t,i){var n,r=this;if(!this.hidden)return this.setVisibility(!0,!0),this.isHiding=!1,this._hideDisposer&&this.removeDispose(this._hideDisposer),i&&l.d(i,(function(i){n=r.setWorkingValue(i,r.values[i].value,e,t)})),l.d(this.sprites,(function(i){var n=i.show(e);null==n||n.isFinished()||(r._disposers.push(n),null!=t&&t>0&&n.delay(t))})),n},t.prototype.dispose=function(){e.prototype.dispose.call(this),l.d(this.sprites,(function(e){e.dispose()})),this.sprites=[]},t.prototype.hide=function(e,t,i,n){var r=this;if(this.isHiding=!0,l.d(this.sprites,(function(i){var n=i.hide(e);null==n||n.isFinished()||(r._disposers.push(n),null!=t&&t>0&&n.delay(t))})),u.h(i)&&n){var a;if(l.d(n,(function(n){var o=r.setWorkingValue(n,i,e,t);o&&(a=o)})),a&&!a.isFinished())return this._hideDisposer=a.events.on("animationended",(function(){r.setVisibility(!1,!0),r.isHiding=!1})),this._disposers.push(this._hideDisposer),a;this.isHiding=!1,this.setVisibility(!1,!0)}else this.isHiding=!1,this.setVisibility(!1)},t.prototype.getDuration=function(e){if(!u.h(e)){var t=this.component;t&&(e=t.interpolationDuration)}if(null!=e)return this._adapterO?this._adapterO.apply("duration",e):e},t.prototype.getValue=function(e,t){if(e&&this.component){t||(t=this.component.dataFields[e+"Show"])||(t="value");var i=this.values[e][t];return this._adapterO&&this._adapterO.isEnabled("value")?this._adapterO.apply("value",{value:i,field:e}).value:i}},t.prototype.getWorkingValue=function(e){if(e&&this.component){var t=this.component.dataFields[e+"Show"];return t||(t="workingValue"),this._adapterO?this._adapterO.apply("workingValue",{workingValue:this.values[e][t],field:e}).workingValue:this.values[e][t]}},t.prototype.getActualWorkingValue=function(e){return this.values[e].workingValue},t.prototype.setValue=function(e,t,i,n){var r=this.values[e].value,a=this.getDuration(i);if(r!==(t=u.l(t))){if(this.values[e].value=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("valuechanged")){var o={type:"valuechanged",target:this,property:e};this.events.dispatchImmediately("valuechanged",o)}this.component&&this.component.handleDataItemValueChange(this,e)}this.setWorkingValue(e,t,a,n)},t.prototype.setCalculatedValue=function(e,t,i){if(this.values[e][i]!==t&&u.h(t)){if(this.values[e][i]=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("calculatedvaluechanged")){var n={type:"calculatedvaluechanged",target:this,property:e};this.events.dispatchImmediately("calculatedvaluechanged",n)}this.component&&this.component.handleDataItemCalculatedValueChange(this,e)}},t.prototype.setWorkingValue=function(e,t,i,n){if(u.h(this.values[e].value)){var r=this.getDuration(i),a=this.values[e].workingValue;if(null!=r&&r>0&&u.h(a)&&this.component){if(a!=t){var o=this.animate({childObject:this.values[e],property:"workingValue",from:a,to:t,dummyData:e},r,this.component.interpolationEasing);return null!=n&&o.delay(n),o.events.on("animationstarted",this.handleInterpolationProgress,this),o.events.on("animationprogress",this.handleInterpolationProgress,this),o.events.on("animationended",this.handleInterpolationProgress,this),this._valueAnimations[e]=o,o}(s=this._valueAnimations[e])&&s.stop(),this.values[e].workingValue=t}else{var s;if((s=this._valueAnimations[e])&&s.stop(),this.values[e].workingValue=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var l={type:"workingvaluechanged",target:this,property:e};this.events.dispatchImmediately("workingvaluechanged",l)}this.component&&this.component.handleDataItemWorkingValueChange(this,e)}}},t.prototype.setLocation=function(e,t,i,n){if(this.locations[e]!==t){if(this.locations[e]=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("locationchanged")){var r={type:"locationchanged",target:this,property:e};this.events.dispatchImmediately("locationchanged",r)}this.component&&this.component.handleDataItemValueChange(this,e),this.setWorkingLocation(e,t,i,n)}},t.prototype.setWorkingLocation=function(e,t,i,n){var r=this.getDuration(i),a=this.workingLocations[e];if(null!=r&&r>0&&u.h(a)&&this.component){if(a!=t){var o=this.animate({childObject:this.workingLocations,property:e,from:a,to:t,dummyData:e},r,this.component.interpolationEasing);return null!=n&&o.delay(n),o.events.on("animationstarted",this.handleInterpolationProgress,this),o.events.on("animationprogress",this.handleInterpolationProgress,this),o.events.on("animationended",this.handleInterpolationProgress,this),this._locationAnimations[e]=o,o}(s=this._locationAnimations[e])&&s.stop(),this.workingLocations[e]=t}else{var s;if((s=this._locationAnimations[e])&&s.stop(),this.workingLocations[e]=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workinglocationchanged")){var l={type:"workinglocationchanged",target:this,property:e};this.events.dispatchImmediately("workinglocationchanged",l)}this.component&&this.component.handleDataItemWorkingLocationChange(this,e)}},t.prototype.setDate=function(e,t,i){!u.f(t)&&this.component&&(t=this.component.dateFormatter.parse(t)),this.dates[e]!==t&&(this.dates[e]=t,this.setValue(e,t.getTime(),i))},t.prototype.getDate=function(e){return this._adapterO?this._adapterO.apply("date",{date:this.dates[e],field:e}).date:this.dates[e]},t.prototype.setProperty=function(e,t){if(this.properties[e]!==t){if(this.hasProperties=!0,this.properties[e]=t,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var i={type:"propertychanged",target:this,property:e,value:t};this.events.dispatchImmediately("propertychanged",i)}this.component&&this.component.handleDataItemPropertyChange(this,e)}},t.prototype.setCategory=function(e,t){u.j(t)||(t=u.a(t)),this.categories[e]!==t&&(this.categories[e]=t)},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),t.dataContext&&(this.dataContext=s.e(t.dataContext,{})),s.f(t.locations,this.locations),t._adapterO&&this.adapter.copyFrom(t._adapterO),this.component=t.component},Object.defineProperty(t.prototype,"opacity",{set:function(e){l.d(this.sprites,(function(t){t.opacity=e}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(e){if(this._ignoreMinMax=e,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var t={type:"propertychanged",target:this,property:"ignoreMinMax",value:e};this.events.dispatchImmediately("propertychanged",t)}this.component&&this.component.handleDataItemPropertyChange(this,"ignoreMinMax")},enumerable:!0,configurable:!0}),t.prototype.animate=function(e,t,i){return new o.a(this,e,t,i).start()},t.prototype.handleInterpolationProgress=function(e){var t=e.target.animationOptions[0];if(t){if(this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var i={type:"workingvaluechanged",target:this,property:t.dummyData};this.events.dispatchImmediately("workingvaluechanged",i)}this.component&&this.component.handleDataItemWorkingValueChange(this,t.dummyData)}},t.prototype.hasValue=function(e){for(var t=0,i=e.length;t<i;t++){var n=this.values[e[t]];if(!n||!u.d(n.value))return!1}return!0},Object.defineProperty(t.prototype,"depth",{get:function(){return this.parent?this.parent.depth+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataContext",{get:function(){return this._dataContext},set:function(e){this._dataContext=e},enumerable:!0,configurable:!0}),t.prototype.addSprite=function(e){e.dataItem&&e.dataItem!=this&&l.o(e.dataItem.sprites,e),this.visible||e.hide(0),this.isHiding&&e.hide(),this.sprites.push(e),e.dataItem=this},t}(r.b)},function(e,t,i){"use strict";i.d(t,"b",(function(){return f})),i.d(t,"a",(function(){return m})),i.d(t,"d",(function(){return y}));var n=i(35),r=i(56),a=i(21),o=i(77);var s={m:"margin",p:"padding"},l={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},u={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){var t={};return function(i){return void 0===t[i]&&(t[i]=e(i)),t[i]}}((function(e){if(e.length>2){if(!u[e])return[e];e=u[e]}var t=e.split(""),i=Object(n.a)(t,2),r=i[0],a=i[1],o=s[r],c=l[a]||"";return Array.isArray(c)?c.map((function(e){return o+e})):[o+c]})),h=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],p=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[].concat(h,p);function f(e,t,i,n){var r=Object(a.b)(e,t)||i;return"number"===typeof r?function(e){return"string"===typeof e?e:r*e}:Array.isArray(r)?function(e){return"string"===typeof e?e:r[e]}:"function"===typeof r?r:function(){}}function m(e){return f(e,"spacing",8)}function y(e,t){if("string"===typeof t||null==t)return t;var i=e(Math.abs(t));return t>=0?i:"number"===typeof i?-i:"-".concat(i)}function v(e,t,i,n){if(-1===t.indexOf(i))return null;var a=function(e,t){return function(i){return e.reduce((function(e,n){return e[n]=y(t,i),e}),{})}}(c(i),n),o=e[i];return Object(r.b)(e,o,a)}function g(e,t){var i=m(e.theme);return Object.keys(e).map((function(n){return v(e,t,n,i)})).reduce(o.a,{})}function _(e){return g(e,h)}function b(e){return g(e,p)}function x(e){return g(e,d)}_.propTypes={},_.filterProps=h,b.propTypes={},b.filterProps=p,x.propTypes={},x.filterProps=d;t.c=x},function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i(2),r=i(18),a=i(12),o=i(49),s=i(24),l=i(15),u=i(135),c=i(27),h=i(25),p=i(61),d=i(3),f=i(1),m=i(7),y=i(41),v=i(6),g=i(8),_=i(11),b=i(0),x=function(e){function t(){var t=e.call(this)||this;return t.dataFields={},t._dataSources={},t._parseDataFrom=0,t._dataDisposers=[],t._currentDataSetId="",t._start=0,t._end=1,t.skipRangeEvent=!1,t.rangeChangeDuration=0,t.rangeChangeEasing=y.b,t.parsingStepDuration=50,t.dataInvalid=!1,t.rawDataInvalid=!1,t.dataRangeInvalid=!1,t.dataItemsInvalid=!1,t.interpolationDuration=0,t.interpolationEasing=y.b,t.sequencedInterpolation=!0,t.sequencedInterpolationDelay=0,t.dataValidationProgress=0,t._addAllDataItems=!0,t._usesData=!0,t.className="Component",t.minZoomCount=1,t.maxZoomCount=0,t._dataItems=new o.a(t.createDataItem()),t._dataItems.events.on("inserted",t.handleDataItemAdded,t,!1),t._dataItems.events.on("removed",t.handleDataItemRemoved,t,!1),t._disposers.push(new a.b(t._dataItems)),t._disposers.push(t._dataItems.template),t.invalidateData(),t.dataUsers.events.on("inserted",t.handleDataUserAdded,t,!1),t._disposers.push(new l.c(t._dataDisposers)),t._start=0,t._end=1,t.maxZoomDeclination=1,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.createDataItem=function(){return new p.a},t.prototype.handleDataUserAdded=function(e){e.newValue.dataProvider=this},t.prototype.handleDataItemValueChange=function(e,t){this.dataItemsInvalid||this.invalidateDataItems()},t.prototype.handleDataItemWorkingValueChange=function(e,t){},t.prototype.handleDataItemWorkingLocationChange=function(e,t){},t.prototype.handleDataItemCalculatedValueChange=function(e,t){},t.prototype.handleDataItemPropertyChange=function(e,t){},t.prototype.processDataItem=function(e,t){var i=this;if(e){t||(t={}),e.dataContext=t;var n=!1;_.d(this.dataFields,(function(r,s){var l=r,u=t[s];if(i._adapterO&&i._adapterO.isEnabled("dataContextValue")&&(u=i._adapterO.apply("dataContextValue",{field:l,value:u,dataItem:e}).value),b.d(u))if(n=!0,e.hasChildren[l]){var c=i.createDataItem();c.copyFrom(i.mainDataSet.template);var h=new o.a(c);h.events.on("inserted",i.handleDataItemAdded,i,!1),h.events.on("removed",i.handleDataItemRemoved,i,!1),i._dataDisposers.push(new a.b(h));for(var p=u.length,d=0;d<p;d++){var f=u[d],m=h.create();m.parent=e,i.processDataItem(m,f)}e[l]=h}else e[l]=u})),_.d(this.propertyFields,(function(i,r){var a=i,o=t[r];b.d(o)&&(n=!0,e.setProperty(a,o))})),this._addAllDataItems||n||this.mainDataSet.remove(e)}},t.prototype.updateDataItem=function(e){var t=this;if(e){var i=e.dataContext;_.d(this.dataFields,(function(n,r){var a=n,o=i[r];(t._adapterO&&(o=t._adapterO.apply("dataContextValue",{field:a,value:o,dataItem:e}).value),b.d(o))&&(e.hasChildren[a]?e[a].each((function(e){t.updateDataItem(e)})):e[a]=o)})),_.d(this.propertyFields,(function(t,n){var r=t,a=i[n];b.d(a)&&e.setProperty(r,a)}))}},t.prototype.validateDataElements=function(){for(var e=this.endIndex,t=this.startIndex;t<e;t++){var i=this.dataItems.getIndex(t);i&&this.validateDataElement(i)}},t.prototype.validate=function(){this.validateDataElements(),e.prototype.validate.call(this)},t.prototype.validateDataElement=function(e){},t.prototype.addData=function(e,t,i){var n=this;if(!this.dataInvalid&&this.inited&&(this._parseDataFrom=this.data.length),i||(e instanceof Array?m.d(e,(function(e){n.data.push(e)})):this.data.push(e)),this.inited)this.removeData(t,i);else if(b.h(t))for(;t>0;)this.data.shift(),t--;this.invalidateData()},t.prototype.removeData=function(e,t){if(b.h(e)&&e>0){for(;e>0;){var i=this.mainDataSet.getIndex(0);i&&this.mainDataSet.remove(i),this.dataUsers.each((function(e){if(!e.data||0==e.data.length){var t=e.mainDataSet.getIndex(0);t&&e.mainDataSet.remove(t)}})),t||this.data.shift(),this._parseDataFrom>0&&this._parseDataFrom--,e--}this.invalidateDataItems()}},t.prototype.invalidateData=function(){this.disabled||this.isTemplate||(d.b.addToInvalidComponents(this),h.a.requestFrame(),this.dataInvalid=!0,g.d(this.dataUsers.iterator(),(function(e){e.invalidateDataItems()})))},t.prototype.invalidateDataUsers=function(){g.d(this.dataUsers.iterator(),(function(e){e.invalidate()}))},t.prototype.invalidateDataItems=function(){this.disabled||this.isTemplate||(m.m(d.b.invalidDataItems,this),h.a.requestFrame(),this.dataItemsInvalid=!0,g.d(this.dataUsers.iterator(),(function(e){e.invalidateDataItems()})))},t.prototype.invalidateDataRange=function(){this.disabled||this.isTemplate||(this.dataRangeInvalid=!0,m.m(d.b.invalidDataRange,this),h.a.requestFrame())},t.prototype.validateDataRange=function(){m.o(d.b.invalidDataRange,this),this.dataRangeInvalid=!1,this.startIndex==this._prevStartIndex&&this.endIndex==this._prevEndIndex||(this.rangeChangeUpdate(),this.appendDataItems(),this.invalidate(),this.dispatchImmediately("datarangechanged"))},t.prototype.sliceData=function(){this._workingStartIndex=this.startIndex,this._workingEndIndex=this.endIndex},t.prototype.rangeChangeUpdate=function(){this.sliceData(),this._prevStartIndex=this.startIndex,this._prevEndIndex=this.endIndex},t.prototype.appendDataItems=function(){for(var e=this.endIndex,t=this.startIndex;t<e;t++){(i=this.dataItems.getIndex(t))&&(i.__disabled=!1)}for(t=0;t<this.startIndex;t++){(i=this.dataItems.getIndex(t))&&(i.__disabled=!0)}for(t=this.endIndex;t<this.dataItems.length;t++){var i;(i=this.dataItems.getIndex(t))&&(i.__disabled=!0)}},t.prototype.invalidateRawData=function(){this.disabled||this.isTemplate||(m.m(d.b.invalidRawDatas,this),h.a.requestFrame(),this.rawDataInvalid=!0,g.d(this.dataUsers.iterator(),(function(e){e.invalidateRawData()})))},t.prototype.validateRawData=function(){var e=this;m.o(d.b.invalidRawDatas,this),g.d(this.mainDataSet.iterator(),(function(t){t&&e.updateDataItem(t)}))},t.prototype.dispose=function(){var t=this;this.mainDataSet.template.clones.clear(),_.d(this._dataSources,(function(e,i){t.removeDispose(i)})),this.disposeData(),e.prototype.dispose.call(this)},t.prototype.disposeData=function(){this.mainDataSet.template.clones.clear(),m.d(this._dataDisposers,(function(e){e.dispose()})),g.d(this.dataUsers.iterator(),(function(e){e.disposeData()})),this._dataDisposers.length=0,this._startIndex=void 0,this._endIndex=void 0,this.mainDataSet.clear(),this.mainDataSet.template.clones.clear(),this._dataSets&&this._dataSets.clear()},t.prototype.getDataItem=function(e){return this.mainDataSet.create()},t.prototype.validateData=function(){if(this.dispatchImmediately("beforedatavalidated"),this.dataInvalid=!1,d.b.removeFromInvalidComponents(this),!this.__disabled){if(this.dataValidationProgress=0,this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.dataFields.data&&this.dataItem){var e=this.dataItem.dataContext;this._data=e[this.dataFields.data]}if(0===this._parseDataFrom&&this.data.length>0&&this.disposeData(),this.data.length>0){var t=this.preloader;g.d(this.dataUsers.iterator(),(function(e){e._startIndex=void 0,e._endIndex=void 0}));for(var i=0,n=Date.now(),r=this._parseDataFrom,a=this.data.length,o=function(){var e=s.data[r];if(s._usesData){var a=s.getDataItem(e);s.processDataItem(a,e)}if((s.dataUsers.each((function(t){if(0==t.data.length){var i=t.getDataItem(e);t.processDataItem(i,e)}})),100==++i)&&(i=0,Date.now()-n>s.parsingStepDuration&&r<s.data.length-10))return s._parseDataFrom=r+1,t&&(r/s.data.length>.5&&!t.visible||(t.progress=r/s.data.length)),s.dataValidationProgress=r/s.data.length,r=s.data.length,s.invalidateData(),{value:void 0}},s=this;r<a;r++){var l=o();if("object"===typeof l)return l.value}t&&(t.progress=1),this.dataUsers.each((function(e){e.hidden&&e.hide(0)}))}this.dataValidationProgress=1,this._parseDataFrom=0,this.invalidateDataItems(),this._internalDefaultsApplied||this.applyInternalDefaults(),this.dispatch("datavalidated")}},t.prototype.validateDataItems=function(){m.o(d.b.invalidDataItems,this),this.dataItemsInvalid=!1,this.invalidateDataRange(),this.invalidate(),this.dispatch("dataitemsvalidated")},Object.defineProperty(t.prototype,"data",{get:function(){return this._data||(this._data=[]),this._adapterO?this._adapterO.apply("data",this._data):this._data},set:function(e){this.setData(e)},enumerable:!0,configurable:!0}),t.prototype.setData=function(e){this.isDisposed()||(this._parseDataFrom=0,this.disposeData(),this._data=e,e&&e.length>0?this.invalidateData():(this.dispatchImmediately("beforedatavalidated"),this.dispatch("datavalidated")))},t.prototype.getDataSource=function(e){var t=this;return b.d(this._dataSources[e])||(this._dataSources[e]=new u.a,this._dataSources[e].component=this,this.setDataSourceEvents(this._dataSources[e],e),this._dataSources[e].adapter.add("dateFields",(function(e){return t.dataSourceDateFields(e)})),this._dataSources[e].adapter.add("numberFields",(function(e){return t.dataSourceNumberFields(e)})),this.events.on("inited",(function(){t.loadData(e)}),this,!1)),this._dataSources[e]},Object.defineProperty(t.prototype,"dataSource",{get:function(){return this._dataSources.data||this.getDataSource("data"),this._dataSources.data},set:function(e){var t=this;this._dataSources.data&&this.removeDispose(this._dataSources.data),this._dataSources.data=e,this._dataSources.data.component=this,this.events.on("inited",(function(){t.loadData("data")}),this,!1),this.setDataSourceEvents(e,"data")},enumerable:!0,configurable:!0}),t.prototype.loadData=function(e){this._dataSources[e].load()},t.prototype.dataSourceDateFields=function(e){return e},t.prototype.dataSourceNumberFields=function(e){return e},t.prototype.populateDataSourceFields=function(e,t,i){return m.d(i,(function(i){t[i]&&-1===m.i(e,t[i])&&e.push(t[i])})),e},t.prototype.setDataSourceEvents=function(e,t){var i=this;e.events.on("started",(function(e){var t=i.preloader;t&&(t.progress=0)}),void 0,!1),e.events.on("loadstarted",(function(e){var t=i.preloader;t&&(t.progress=.25)}),void 0,!1),e.events.on("loadended",(function(e){var t=i.preloader;t&&(t.progress=.5)}),void 0,!1),e.events.on("parseended",(function(e){var t=i.preloader;t&&(t.progress=.75)}),void 0,!1),e.events.on("ended",(function(e){var t=i.preloader;t&&(t.progress=1)}),void 0,!1),e.events.on("error",(function(e){var t=i.preloader;t&&(t.progress=1),i.openModal(e.message)}),void 0,!1),t&&e.events.on("done",(function(n){var r=i.preloader;r&&(r.progress=1),"data"!=t||b.e(n.data)||(n.data=[n.data]),e.incremental&&"data"==t&&i.data.length?i.addData(n.data,e.keepCount?n.data.length:0):e.updateCurrentData&&"data"==t&&i.data.length?(m.d(i.data,(function(e,t){b.d(n.data[t])&&_.d(e,(function(i,r){b.d(n.data[t][i])&&(e[i]=n.data[t][i])}))})),i.invalidateRawData()):i[t]=n.data}))},Object.defineProperty(t.prototype,"responsive",{get:function(){return this._responsive||(this._responsive=new c.a,this._responsive.component=this),this._responsive},set:function(e){this._responsive=e,this._responsive.component=this},enumerable:!0,configurable:!0}),t.prototype.zoom=function(e,t,i,n){var r=this;void 0===t&&(t=!1),void 0===i&&(i=!1);var a=e.start,o=e.end,s=e.priority;if(e.start==e.end&&(e.start=e.start-.5/this.maxZoomFactor,e.end=e.end+.5/this.maxZoomFactor),"end"==s&&1==o&&0!=a&&a<this.start&&(s="start"),"start"==s&&0==a&&o>this.end&&(s="end"),b.h(n)||(n=this.maxZoomDeclination),!b.h(a)||!b.h(o))return{start:this.start,end:this.end};if(this._finalStart!=a||this._finalEnd!=o){var l=this.maxZoomFactor/this.minZoomCount,u=this.maxZoomFactor/this.maxZoomCount;if("start"==s?(this.maxZoomCount>0&&1/(o-a)<u&&(o=a+1/u),1/(o-a)>l&&(o=a+1/l),o>1&&o-a<1/l&&(a=o-1/l)):(this.maxZoomCount>0&&1/(o-a)<u&&(a=o-1/u),1/(o-a)>l&&(a=o-1/l),a<0&&o-a<1/l&&(o=a+1/l)),a<-n&&(a=-n),1/(o-a)>l&&(o=a+1/l),o>1+n&&(o=1+n),1/(o-a)>l&&(a=o-1/l),this._finalEnd=o,this._finalStart=a,this.skipRangeEvent=t,this.dispatchImmediately("rangechangestarted"),this.rangeChangeDuration>0&&!i){var c=this.rangeChangeAnimation;if(c&&c.progress<1){var h=c.animationOptions;if(h.length>1){if(h[0].to==a&&h[1].to==o)return{start:a,end:o};c.isDisposed()||c.stop()}}this.rangeChangeAnimation&&this.rangeChangeAnimation.kill(),c=this.animate([{property:"start",to:a},{property:"end",to:o}],this.rangeChangeDuration,this.rangeChangeEasing),this.rangeChangeAnimation=c,c&&!c.isFinished()?c.events.on("animationended",(function(){r.dispatchImmediately("rangechangeended")})):this.dispatchImmediately("rangechangeended")}else this.start=a,this.end=o,this.dispatch("rangechangeended")}return{start:a,end:o}},t.prototype.zoomToIndexes=function(e,t,i,n){if(b.h(e)&&b.h(t)){var r=e/this.dataItems.length,a=t/this.dataItems.length;this.zoom({start:r,end:a},i,n)}},Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return f.i(1/(this.end-this.start),1,this.maxZoomFactor)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxZoomFactor",{get:function(){return this.getPropertyValue("maxZoomFactor")},set:function(e){this.setPropertyValue("maxZoomFactor",e)&&(1==e&&(this.maxZoomDeclination=0),this.invalidateDataRange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxZoomDeclination",{get:function(){return this.getPropertyValue("maxZoomDeclination")},set:function(e){this.setPropertyValue("maxZoomDeclination",e)&&this.invalidateDataRange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startIndex",{get:function(){return b.h(this._startIndex)||(this._startIndex=0),this._startIndex},set:function(e){this._startIndex=f.i(Math.round(e),0,this.dataItems.length),this.start=this.indexToPosition(this._startIndex)},enumerable:!0,configurable:!0}),t.prototype.indexToPosition=function(e){return e/this.dataItems.length},Object.defineProperty(t.prototype,"endIndex",{get:function(){var e=this.dataItems.length;return(!b.h(this._endIndex)||this._endIndex>e)&&(this._endIndex=e),this._endIndex},set:function(e){this._endIndex=f.i(Math.round(e),0,this.dataItems.length),this.end=this.indexToPosition(this._endIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this._adapterO?this._adapterO.apply("start",this._start):this._start},set:function(e){if(this._start!=e){this._start=e;var t=Math.max(0,Math.floor(this.dataItems.length*e)||0);this._startIndex=Math.min(t,this.dataItems.length),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("startchanged"),this.dispatch("startendchanged")}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._adapterO?this._adapterO.apply("end",this._end):this._end},set:function(e){this._end!=e&&(this._end=e,this._endIndex=Math.min(this.dataItems.length,Math.ceil(this.dataItems.length*e)||0),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("endchanged"),this.dispatch("startendchanged"))},enumerable:!0,configurable:!0}),t.prototype.removeFromInvalids=function(){e.prototype.removeFromInvalids.call(this),d.b.removeFromInvalidComponents(this),m.o(d.b.invalidDataItems,this),m.o(d.b.invalidDataRange,this),m.o(d.b.invalidRawDatas,this)},Object.defineProperty(t.prototype,"dataItems",{get:function(){if(""!=this._currentDataSetId){var e=this.dataSets.getKey(this._currentDataSetId);if(e)return e}return this._dataItems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataSets",{get:function(){return this._dataSets||(this._dataSets=new s.a),this._dataSets},enumerable:!0,configurable:!0}),t.prototype.setDataSet=function(e){if(this._currentDataSetId!=e){if(this.dataSets.getKey(e))return this.dataItems.each((function(e){e.__disabled=!0})),this._currentDataSetId=e,this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each((function(e){e.__disabled=!1})),!0;if(""!=this._currentDataSetId)return this.dataItems.each((function(e){e.__disabled=!0})),this._currentDataSetId="",this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each((function(e){e.__disabled=!1})),!0}return!1},Object.defineProperty(t.prototype,"currentDataSetId",{get:function(){return this._currentDataSetId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mainDataSet",{get:function(){return this._dataItems},enumerable:!0,configurable:!0}),t.prototype._updateDataItemIndexes=function(e){for(var t=this.mainDataSet.values,i=t.length,n=e;n<i;++n)t[n]._index=n},t.prototype.handleDataItemAdded=function(e){e.newValue.component=this,this._updateDataItemIndexes(e.index),this.dataItemsInvalid||this.invalidateDataItems()},t.prototype.handleDataItemRemoved=function(e){this._updateDataItemIndexes(e.index),this.dataItemsInvalid||this.invalidateDataItems()},t.prototype.bindDataField=function(e,t){this.dataFields[e]=t,this.invalidateDataRange()},t.prototype.invalidateProcessedData=function(){this.resetProcessedRange(),this.invalidateDataRange()},t.prototype.resetProcessedRange=function(){this._prevEndIndex=null,this._prevStartIndex=null},Object.defineProperty(t.prototype,"dataUsers",{get:function(){var e=this;return this._dataUsers||(this._dataUsers=new a.a,this._disposers.push(new l.b((function(){g.d(e._dataUsers.iterator(),(function(e){e.dispose()}))})))),this._dataUsers},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var t=e.prototype.clone.call(this);return t.dataFields=v.f(this.dataFields,{}),t},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.data=t.data,this.sequencedInterpolation=t.sequencedInterpolation,this.sequencedInterpolationDelay=t.sequencedInterpolationDelay,this.interpolationDuration=t.interpolationDuration,this.interpolationEasing=t.interpolationEasing},t.prototype.reinit=function(){this._inited=!1,this.deepInvalidate()},t.prototype.getExporting=function(){var t=e.prototype.getExporting.call(this);return t.adapter.has("data",this._exportData,-1,this)||(t.adapter.add("data",this._exportData,-1,this),this.events.on("datavalidated",(function(e){t.handleDataUpdated()}))),t},t.prototype._exportData=function(e){return e.data=this.data,e},t.prototype.setDisabled=function(t){var i=e.prototype.setDisabled.call(this,t);return i&&this.invalidateData(),i},t.prototype.setShowOnInit=function(t){t!=this.getPropertyValue("showOnInit")&&(!t||this.inited||this.hidden?this._showOnInitDisposer2&&this.removeDispose(this._showOnInitDisposer2):(this._showOnInitDisposer2=this.events.once("dataitemsvalidated",this.hideInitially,this,!1),this._disposers.push(this._showOnInitDisposer2))),e.prototype.setShowOnInit.call(this,t)},t.prototype.setBaseId=function(t){t!=this._baseId&&this.dataInvalid&&(this.dataInvalid=!1,d.b.removeFromInvalidComponents(this),this._baseId=t,this.invalidateData()),e.prototype.setBaseId.call(this,t)},Object.defineProperty(t.prototype,"minZoomCount",{get:function(){return this.getPropertyValue("minZoomCount")},set:function(e){this.setPropertyValue("minZoomCount",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxZoomCount",{get:function(){return this.getPropertyValue("maxZoomCount")},set:function(e){this.setPropertyValue("maxZoomCount",e)},enumerable:!0,configurable:!0}),t.prototype._systemCheckIfValidate=function(){return!(this.dataInvalid||this.dataProvider&&this.dataProvider.dataInvalid)},t.prototype.asFunction=function(t){return"interpolationEasing"==t||"rangeChangeEasing"==t||e.prototype.asIs.call(this,t)},t}(r.a);d.b.registeredClasses.Component=x},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(2),r=i(16),a=i(9),o=i(3),s=i(6),l=i(1),u=function(e){function t(){var t=e.call(this)||this;return t.className="Circle",t.element=t.paper.add("circle"),t.setPercentProperty("radius",Object(a.c)(100)),t.setPropertyValue("horizontalCenter","middle"),t.setPropertyValue("verticalCenter","middle"),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),this.element.attr({r:this.pixelRadius})},Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelRadius",{get:function(){return s.E(this.radius,l.C(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),t.prototype.measureElement=function(){var e=this.pixelRadius;this._bbox={x:-e,y:-e,width:2*e,height:2*e}},t}(r.a);o.b.registeredClasses.Circle=u},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(2),r=i(26),a=i(58),o=i(37),s=i(12),l=i(11),u=i(8),c=function(e){function t(){var t=e.call(this)||this;return t.properties={},t.isTemplate=!1,t._scale=1,t._nonScaling=!0,t.className="Filter",t.filterPrimitives=new s.a,t.properties.filterUnits="objectBoundingBox",t.filterPrimitives.events.on("inserted",(function(e){t._disposers.push(e.newValue)})),t.width=120,t.height=120,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.appendPrimitives=function(e){u.d(this.filterPrimitives.iterator(),(function(t){e.add(t)}))},t.prototype.animate=function(e,t,i){return new o.a(this,e,t,i).start()},Object.defineProperty(t.prototype,"width",{get:function(){return this.properties.width},set:function(e){this.properties.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.properties.height},set:function(e){this.properties.height=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){var i=this;e.prototype.copyFrom.call(this,t),l.d(t.properties,(function(e,t){i[e]=t}))},Object.defineProperty(t.prototype,"paper",{get:function(){return this._paper?this._paper:Object(a.b)()},set:function(e){this._paper!=e&&(this._paper=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new o.b(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},set:function(e){this._scale=e,this.updateScale()},enumerable:!0,configurable:!0}),t.prototype.updateScale=function(){},Object.defineProperty(t.prototype,"filterUnits",{get:function(){return this.properties.filterUnits},set:function(e){this.properties.filterUnits=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonScaling",{get:function(){return this._nonScaling},set:function(e){this._nonScaling=e,e||(this._scale=1),this.updateScale()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprite",{set:function(e){this.setSprite(e)},enumerable:!0,configurable:!0}),t.prototype.setSprite=function(e){this._sprite&&this._sprite!=e&&this._sprite.filters.removeValue(this),this._sprite=e},t}(r.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i(2),r=i(26),a=i(12),o=i(58),s=i(3),l=i(8),u=i(0),c=i(9),h=function(e){function t(){var t=e.call(this)||this;return t._stops=new a.a,t.element=t.paper.addGroup("radialGradient"),t.id="gradient-"+s.b.getUniqueId(),t.element.attr({id:t.id}),t._disposers.push(t.element),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){var e,t=this,i=this.element;u.h(this.cx)&&((e=this.cx)instanceof c.a&&(e=e.percent+"%"),i.attr({cx:e}));u.h(this.cy)&&((e=this.cy)instanceof c.a&&(e=e.percent+"%"),i.attr({cy:e}));this.fx&&((e=this.fx)instanceof c.a&&(e=e.percent+"%"),i.attr({fx:e}));this.fy&&((e=this.fy)instanceof c.a&&(e=e.percent+"%"),i.attr({fy:e}));i.removeChildNodes(),l.d(l.i(this._stops.iterator()),(function(e){var n=e[0],r=e[1],a=r.offset;u.h(a)||(a=n/(t._stops.length-1));var o=t.paper.add("stop");u.d(r.color)&&o.attr({"stop-color":r.color.toString()}),u.h(r.opacity)&&o.attr({"stop-opacity":r.opacity}),u.h(a)&&o.attr({offset:a}),i.add(o)}))},t.prototype.addColor=function(e,t,i){this._stops.push({color:e,opacity:t,offset:i}),this.draw()},Object.defineProperty(t.prototype,"paper",{get:function(){return this._paper?this._paper:Object(o.b)()},set:function(e){this._paper!=e&&(this._paper=e,this.draw(),e.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cx",{get:function(){return this._cx},set:function(e){this._cx=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cy",{get:function(){return this._cy},set:function(e){this._cy=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fx",{get:function(){return this._fx},set:function(e){this._fx=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fy",{get:function(){return this._fy},set:function(e){this._fy=e,this.draw()},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.stops.copyFrom(t.stops),this.cx=t.cx,this.cy=t.cy,this.fx=t.fx,this.fy=t.fy},Object.defineProperty(t.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._stops.clear()},t}(r.a);s.b.registeredClasses.RadialGradient=h},function(e,t,i){"use strict";i.d(t,"a",(function(){return k})),i.d(t,"b",(function(){return I})),i.d(t,"d",(function(){return A})),i.d(t,"c",(function(){return m})),i.d(t,"f",(function(){return y})),i.d(t,"e",(function(){return f}));var n=i(10);function r(e){return"/"===e.charAt(0)}function a(e,t){for(var i=t,n=i+1,r=e.length;n<r;i+=1,n+=1)e[i]=e[n];e.pop()}var o=function(e,t){void 0===t&&(t="");var i,n=e&&e.split("/")||[],o=t&&t.split("/")||[],s=e&&r(e),l=t&&r(t),u=s||l;if(e&&r(e)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";if(o.length){var c=o[o.length-1];i="."===c||".."===c||""===c}else i=!1;for(var h=0,p=o.length;p>=0;p--){var d=o[p];"."===d?a(o,p):".."===d?(a(o,p),h++):h&&(a(o,p),h--)}if(!u)for(;h--;h)o.unshift("..");!u||""===o[0]||o[0]&&r(o[0])||o.unshift("");var f=o.join("/");return i&&"/"!==f.substr(-1)&&(f+="/"),f};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var l=function e(t,i){if(t===i)return!0;if(null==t||null==i)return!1;if(Array.isArray(t))return Array.isArray(i)&&t.length===i.length&&t.every((function(t,n){return e(t,i[n])}));if("object"===typeof t||"object"===typeof i){var n=s(t),r=s(i);return n!==t||r!==i?e(n,r):Object.keys(Object.assign({},t,i)).every((function(n){return e(t[n],i[n])}))}return!1},u=i(69);function c(e){return"/"===e.charAt(0)?e:"/"+e}function h(e){return"/"===e.charAt(0)?e.substr(1):e}function p(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function d(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function f(e){var t=e.pathname,i=e.search,n=e.hash,r=t||"/";return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function m(e,t,i,r){var a;"string"===typeof e?(a=function(e){var t=e||"/",i="",n="",r=t.indexOf("#");-1!==r&&(n=t.substr(r),t=t.substr(0,r));var a=t.indexOf("?");return-1!==a&&(i=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===i?"":i,hash:"#"===n?"":n}}(e),a.state=t):(void 0===(a=Object(n.a)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return i&&(a.key=i),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a}function y(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&l(e.state,t.state)}function v(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,i,n,r){if(null!=e){var a="function"===typeof e?e(t,i):e;"string"===typeof a?"function"===typeof n?n(a,r):r(!0):r(!1!==a)}else r(!0)},appendListener:function(e){var i=!0;function n(){i&&e.apply(void 0,arguments)}return t.push(n),function(){i=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,i)}))}}}var g=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(e,t){t(window.confirm(e))}var b="popstate",x="hashchange";function w(){try{return window.history.state||{}}catch(e){return{}}}function k(e){void 0===e&&(e={}),g||Object(u.a)(!1);var t=window.history,i=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,o=a.forceRefresh,s=void 0!==o&&o,l=a.getUserConfirmation,h=void 0===l?_:l,y=a.keyLength,k=void 0===y?6:y,P=e.basename?d(c(e.basename)):"";function S(e){var t=e||{},i=t.key,n=t.state,r=window.location,a=r.pathname+r.search+r.hash;return P&&(a=p(a,P)),m(a,n,i)}function T(){return Math.random().toString(36).substr(2,k)}var C=v();function O(e){Object(n.a)(B,e),B.length=t.length,C.notifyListeners(B.location,B.action)}function I(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||M(S(e.state))}function E(){M(S(w()))}var A=!1;function M(e){if(A)A=!1,O();else{C.confirmTransitionTo(e,"POP",h,(function(t){t?O({action:"POP",location:e}):function(e){var t=B.location,i=j.indexOf(t.key);-1===i&&(i=0);var n=j.indexOf(e.key);-1===n&&(n=0);var r=i-n;r&&(A=!0,L(r))}(e)}))}}var D=S(w()),j=[D.key];function F(e){return P+f(e)}function L(e){t.go(e)}var R=0;function z(e){1===(R+=e)&&1===e?(window.addEventListener(b,I),r&&window.addEventListener(x,E)):0===R&&(window.removeEventListener(b,I),r&&window.removeEventListener(x,E))}var V=!1;var B={length:t.length,action:"POP",location:D,createHref:F,push:function(e,n){var r="PUSH",a=m(e,n,T(),B.location);C.confirmTransitionTo(a,r,h,(function(e){if(e){var n=F(a),o=a.key,l=a.state;if(i)if(t.pushState({key:o,state:l},null,n),s)window.location.href=n;else{var u=j.indexOf(B.location.key),c=j.slice(0,u+1);c.push(a.key),j=c,O({action:r,location:a})}else window.location.href=n}}))},replace:function(e,n){var r="REPLACE",a=m(e,n,T(),B.location);C.confirmTransitionTo(a,r,h,(function(e){if(e){var n=F(a),o=a.key,l=a.state;if(i)if(t.replaceState({key:o,state:l},null,n),s)window.location.replace(n);else{var u=j.indexOf(B.location.key);-1!==u&&(j[u]=a.key),O({action:r,location:a})}else window.location.replace(n)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=C.setPrompt(e);return V||(z(1),V=!0),function(){return V&&(V=!1,z(-1)),t()}},listen:function(e){var t=C.appendListener(e);return z(1),function(){z(-1),t()}}};return B}var P="hashchange",S={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+h(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:h,decodePath:c},slash:{encodePath:c,decodePath:c}};function T(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function C(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function O(e){window.location.replace(T(window.location.href)+"#"+e)}function I(e){void 0===e&&(e={}),g||Object(u.a)(!1);var t=window.history,i=(window.navigator.userAgent.indexOf("Firefox"),e),r=i.getUserConfirmation,a=void 0===r?_:r,o=i.hashType,s=void 0===o?"slash":o,l=e.basename?d(c(e.basename)):"",h=S[s],y=h.encodePath,b=h.decodePath;function x(){var e=b(C());return l&&(e=p(e,l)),m(e)}var w=v();function k(e){Object(n.a)(B,e),B.length=t.length,w.notifyListeners(B.location,B.action)}var I=!1,E=null;function A(){var e,t,i=C(),n=y(i);if(i!==n)O(n);else{var r=x(),o=B.location;if(!I&&(t=r,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(E===f(r))return;E=null,function(e){if(I)I=!1,k();else{var t="POP";w.confirmTransitionTo(e,t,a,(function(i){i?k({action:t,location:e}):function(e){var t=B.location,i=F.lastIndexOf(f(t));-1===i&&(i=0);var n=F.lastIndexOf(f(e));-1===n&&(n=0);var r=i-n;r&&(I=!0,L(r))}(e)}))}}(r)}}var M=C(),D=y(M);M!==D&&O(D);var j=x(),F=[f(j)];function L(e){t.go(e)}var R=0;function z(e){1===(R+=e)&&1===e?window.addEventListener(P,A):0===R&&window.removeEventListener(P,A)}var V=!1;var B={length:t.length,action:"POP",location:j,createHref:function(e){var t=document.querySelector("base"),i="";return t&&t.getAttribute("href")&&(i=T(window.location.href)),i+"#"+y(l+f(e))},push:function(e,t){var i="PUSH",n=m(e,void 0,void 0,B.location);w.confirmTransitionTo(n,i,a,(function(e){if(e){var t=f(n),r=y(l+t);if(C()!==r){E=t,function(e){window.location.hash=e}(r);var a=F.lastIndexOf(f(B.location)),o=F.slice(0,a+1);o.push(t),F=o,k({action:i,location:n})}else k()}}))},replace:function(e,t){var i="REPLACE",n=m(e,void 0,void 0,B.location);w.confirmTransitionTo(n,i,a,(function(e){if(e){var t=f(n),r=y(l+t);C()!==r&&(E=t,O(r));var a=F.indexOf(f(B.location));-1!==a&&(F[a]=t),k({action:i,location:n})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=w.setPrompt(e);return V||(z(1),V=!0),function(){return V&&(V=!1,z(-1)),t()}},listen:function(e){var t=w.appendListener(e);return z(1),function(){z(-1),t()}}};return B}function E(e,t,i){return Math.min(Math.max(e,t),i)}function A(e){void 0===e&&(e={});var t=e,i=t.getUserConfirmation,r=t.initialEntries,a=void 0===r?["/"]:r,o=t.initialIndex,s=void 0===o?0:o,l=t.keyLength,u=void 0===l?6:l,c=v();function h(e){Object(n.a)(b,e),b.length=b.entries.length,c.notifyListeners(b.location,b.action)}function p(){return Math.random().toString(36).substr(2,u)}var d=E(s,0,a.length-1),y=a.map((function(e){return m(e,void 0,"string"===typeof e?p():e.key||p())})),g=f;function _(e){var t=E(b.index+e,0,b.entries.length-1),n=b.entries[t];c.confirmTransitionTo(n,"POP",i,(function(e){e?h({action:"POP",location:n,index:t}):h()}))}var b={length:y.length,action:"POP",location:y[d],index:d,entries:y,createHref:g,push:function(e,t){var n="PUSH",r=m(e,t,p(),b.location);c.confirmTransitionTo(r,n,i,(function(e){if(e){var t=b.index+1,i=b.entries.slice(0);i.length>t?i.splice(t,i.length-t,r):i.push(r),h({action:n,location:r,index:t,entries:i})}}))},replace:function(e,t){var n="REPLACE",r=m(e,t,p(),b.location);c.confirmTransitionTo(r,n,i,(function(e){e&&(b.entries[b.index]=r,h({action:n,location:r}))}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},canGo:function(e){var t=b.index+e;return t>=0&&t<b.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return b}},function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(2),r=i(18),a=i(16),o=i(3),s=i(1),l=i(4),u=i(0),c=i(6),h=i(9),p=i(66),d=function(e){function t(){var t=e.call(this)||this;return t.className="Slice",t.setPropertyValue("cornerRadius",0),t.setPropertyValue("startAngle",0),t.setPercentProperty("innerRadius",0),t.setPercentProperty("radius",0),t.setPropertyValue("arc",0),t.setPropertyValue("shiftRadius",0),t.strokeOpacity=1,t.setPropertyValue("layout","none"),t.slice=t.createChild(a.a),t.slice.isMeasured=!1,t._disposers.push(t.slice),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.radiusY;this.radius>0&&0==t&&(t=.01),this.slice.path=l.a(this.startAngle,this.arc,this.radius,this.pixelInnerRadius,t,this.cornerRadius,this.innerCornerRadius),this.slice.invalidate(),this.shiftRadius=this.shiftRadius,this.realFill instanceof p.a&&this.updateGradient(this.realFill),this.realStroke instanceof p.a&&this.updateGradient(this.realStroke)},t.prototype.updateGradient=function(e){e.element.attr({gradientUnits:"userSpaceOnUse"}),e.element.attr({r:this.radius}),e.cx=0,e.cy=0,e.element.attr({radius:this.radius})},Object.defineProperty(t.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;if(this.isMeasured){var e=s.k(this.startAngle,this.startAngle+this.arc,this.pixelInnerRadius),t=s.k(this.startAngle,this.startAngle+this.arc,this.radius);return s.m([e,t])}return{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",s.D(e),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(e){u.h(e)||(e=0),this.setPropertyValue("arc",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){var e=this.getPropertyValue("radius");return u.h(e)||(e=0),e},set:function(e){this.setPropertyValue("radius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radiusY",{get:function(){var e=this.getPropertyValue("radiusY");return u.h(e)||(e=this.radius),e},set:function(e){this.setPropertyValue("radiusY",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return c.E(this.innerRadius,this.radius)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(e){this.setPropertyValue("cornerRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerCornerRadius",{get:function(){return this.getPropertyValue("innerCornerRadius")},set:function(e){this.setPropertyValue("innerCornerRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shiftRadius",{get:function(){return this.getPropertyValue("shiftRadius")},set:function(e){this.setPropertyValue("shiftRadius",e),e=this.getPropertyValue("shiftRadius"),this.dx=e*this.radius*this.ix,this.dy=e*this.radiusY*this.iy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ix",{get:function(){return s.g(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iy",{get:function(){return s.F(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleAngle",{get:function(){return this.startAngle+this.arc/2},enumerable:!0,configurable:!0}),t.prototype.getTooltipX=function(){var e=this.getPropertyValue("tooltipX");if(u.h(e))return e;var t=.5;e instanceof h.a&&(t=e.value);var i=c.E(this.innerRadius,this.radius);return this.ix*(i+(this.radius-i)*t)},t.prototype.getTooltipY=function(){var e=this.getPropertyValue("tooltipY");if(u.h(e))return e;var t=.5;e instanceof h.a&&(t=e.value);var i=c.E(this.innerRadius,this.radius);return this.iy*(i+(this.radius-i)*t)+this.slice.dy},t}(r.a);o.b.registeredClasses.Slice=d},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n="Invariant failed";function r(e,t){if(!e)throw new Error(n)}},function(e,t,i){"use strict";function n(e,t){return e===t?0:e<t?-1:1}function r(e,t){return new Array(t+1).join(e)}function a(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t}i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return a}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(2),r=i(51),a=i(13),o=i(40),s=i(4),l=function(e){function t(){var t=e.call(this)||this;return t.className="WavedLine",t.element=t.paper.add("path"),t.waveLength=16,t.waveHeight=4,t.tension=.8,t.pixelPerfect=!1,t.fill=Object(a.b)(),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){var e={x:this.x1,y:this.y1},t={x:this.x2,y:this.y2};this.path=s.g(e)+Object(o.d)(e,t,this.waveLength,this.waveHeight,this.tension,!0)},Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(e){this.setPropertyValue("waveLength",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(e){this.setPropertyValue("waveHeight",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e),this.invalidate()},enumerable:!0,configurable:!0}),t}(r.a)},function(e,t,i){"use strict";function n(e){switch(e){case 0:return 0;case-1:return 1;case 1:return-1}}function r(e,t){return 0===e?t:e}i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(2),r=i(26),a=i(58),o=i(12),s=i(37),l=i(3),u=i(20),c=i(8),h=i(11),p=i(0),d=function(e){function t(){var t=e.call(this)||this;t._elements=new o.a,t.properties={},t.className="Pattern",t.width=10,t.height=10,t.x=0,t.y=0,t.patternUnits="userSpaceOnUse";var i=new u.a;return t.backgroundFill=i.getFor("background"),t.backgroundOpacity=0,t.fillOpacity=1,t.fill=i.getFor("alternativeBackground"),t.stroke=i.getFor("alternativeBackground"),t.strokeOpacity=1,t.strokeWidth=1,t.shapeRendering="crispEdges",t.rotation=0,t.element=t.paper.addGroup("pattern"),t.id="pattern-"+l.b.getUniqueId(),t.element.attr({id:t.id}),t._disposers.push(t.element),t._disposers.push(new o.b(t._elements)),t.patternUnits=t.patternUnits,t.width=t.width,t.height=t.height,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){var e=this,t=this.element;if(t){t.removeChildNodes();var i=this.paper.add("rect");i.attr({width:this.width,height:this.height,"shape-rendering":"crispEdges",fill:this.backgroundFill.hex,"fill-opacity":this.backgroundOpacity,stroke:this.backgroundFill.hex,"stroke-opacity":0}),t.add(i),t.attr({x:this.x,y:this.y,width:this.width,height:this.height,stroke:this.stroke.hex,fill:this.fill.hex,"fill-opacity":this.fillOpacity,"stroke-opacity":this.strokeOpacity,"stroke-width":this.strokeWidth,"shape-rendering":this.shapeRendering,patternUnits:this.patternUnits,"stroke-dasharray":this.strokeDasharray}),c.d(this._elements.iterator(),(function(t){t.rotation=e.rotation,t.rotationX=e.properties.rotationX,t.rotationY=e.properties.rotationY,e.element.add(t)}))}},t.prototype.animate=function(e,t,i){return new s.a(this,e,t,i).start()},t.prototype.addElement=function(e){this._elements.push(e),this._disposers.push(e)},t.prototype.removeElement=function(e){this._elements.removeValue(e),this.removeDispose(e)},Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this.properties.fillOpacity},set:function(e){this.properties.fillOpacity=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this.properties.fill},set:function(e){this.properties.fill=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundFill",{get:function(){return this.properties.backgroundFill},set:function(e){this.properties.backgroundFill=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundOpacity",{get:function(){return this.properties.backgroundOpacity},set:function(e){this.properties.backgroundOpacity=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(e){this.properties.stroke=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeOpacity",{get:function(){return this.properties.strokeOpacity},set:function(e){this.properties.strokeOpacity=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(e){this.properties.strokeWidth=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shapeRendering",{get:function(){return this.properties.shapeRendering},set:function(e){this.properties.shapeRendering=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.properties.rotation},set:function(e){this.properties.rotation=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"patternUnits",{get:function(){return this.properties.patternUnits},set:function(e){this.properties.patternUnits=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.properties.width},set:function(e){this.properties.width=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.properties.height},set:function(e){this.properties.height=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.properties.x},set:function(e){this.properties.x=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.properties.y},set:function(e){this.properties.y=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paper",{get:function(){return this._paper?this._paper:Object(a.b)()},set:function(e){this._paper!=e&&(this._paper=e,this.draw(),e.appendDef(this.element))},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){var i=this;e.prototype.copyFrom.call(this,t),h.d(t.properties,(function(e,t){i[e]=t}))},Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new s.b(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeDasharray",{get:function(){return this.properties.strokeDashArray},set:function(e){this.properties.strokeDashArray=e,this.draw()},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(t){if(t&&p.d(t.elements)&&p.e(t.elements))for(var i=0,n=t.elements.length;i<n;i++){var a=t.elements[i];if(p.d(a.type)){var o=this.createEntryInstance(a);o instanceof r.a&&(o.config=a),this.addElement(p.d(a.typeProperty)?o[a.typeProperty]:o.element)}}e.prototype.processConfig.call(this,t)},t}(r.a);l.b.registeredClasses.Pattern=d},function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i(2),r=i(53),a=i(26),o=i(54),s=i(3),l=i(28),u=i(6),c=i(0),h=i(19),p=function(e){function t(){var t=e.call(this)||this;return t._dateFormat="yyyy-MM-dd",t._inputDateFormat="yyyy-MM-dd",t._utc=!1,t.timezoneMinutes=0,t._firstDayOfWeek=1,t.months=["January","February","March","April","May","June","July","August","September","October","November","December"],t.monthsShort=["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t._outputFormat="svg",t.capitalize=!0,t.className="DateFormatter",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"language",{get:function(){return this._language},set:function(e){this._language=e,this.dateFormat=this._language.translate("_date")},enumerable:!0,configurable:!0}),t.prototype.format=function(e,t,i){var n,a;if(this.language||(this.sprite?this.language=this.sprite.language:this.language=new r.a),"undefined"!==typeof t&&""!==t||(t=this._dateFormat),a=c.j(e)?this.parse(e):u.a(e),c.i(t))try{return this.intlLocales?new Intl.DateTimeFormat(this.intlLocales,t).format(a):new Intl.DateTimeFormat(void 0,t).format(a)}catch(s){return"Invalid"}else{t=u.d(t);var o=this.parseFormat(t);if(c.d(this.timezoneOffset)?a.setMinutes(a.getMinutes()+a.getTimezoneOffset()-this.timezoneOffset):c.d(this.timezone)&&!1!==i&&(a=h.i(a,this.timezone)),!c.h(a.getTime()))return this.language.translate("Invalid date");n=this.applyFormat(a,o,this.language),this.capitalize&&(n=n.replace(/^.{1}/,n.substr(0,1).toUpperCase()))}return n},t.prototype.parseFormat=function(e){var t=this.getCache(e);if(c.d(t))return t;for(var i={template:"",parts:[]},n=Object(o.a)().chunk(e,!0),r=0;r<n.length;r++){var a=n[r];if("value"===a.type){a.text.match(/^date$/i)&&c.j(this._dateFormat)&&(a.text=this._dateFormat);var s=a.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(s)for(var u=0;u<s.length;u++)i.parts.push(s[u]),a.text=a.text.replace(s[u],l.d)}i.template+=a.text}return this.setCache(e,i),i},t.prototype.applyFormat=function(e,t,i){var n,r,a,o,s,c,h,p,d=t.template,f=e.getTimezoneOffset(),m=e.getTime();this.utc?(n=e.getUTCFullYear(),r=e.getUTCMonth(),a=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),c=e.getUTCMinutes(),h=e.getUTCSeconds(),p=e.getUTCMilliseconds()):(n=e.getFullYear(),r=e.getMonth(),a=e.getDay(),o=e.getDate(),s=e.getHours(),c=e.getMinutes(),h=e.getSeconds(),p=e.getMilliseconds());for(var y=0,v=t.parts.length;y<v;y++){var g="";switch(t.parts[y]){case"G":g=i.translate(n<0?"_era_bc":"_era_ad");break;case"yyyy":g=Math.abs(n).toString(),n<0&&(g+=i.translate("_era_bc"));break;case"yyy":case"yy":case"y":g=Math.abs(n).toString().substr(-t.parts[y].length),n<0&&(g+=i.translate("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":var _=n;1==u.t(e)&&a>4&&_--,g="YYYY"==t.parts[y]?Math.abs(_).toString():Math.abs(_).toString().substr(-t.parts[y].length),_<0&&(g+=i.translate("_era_bc"));break;case"u":case"F":case"g":break;case"q":g=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":g=i.translate(this.months[r]).substr(0,1);break;case"MMMM":g=i.translate(this.months[r]);break;case"MMM":g=i.translate(this.monthsShort[r]);break;case"MM":g=u.B(r+1,2,"0");break;case"M":g=(r+1).toString();break;case"ww":g=u.B(u.t(e,this.utc),2,"0");break;case"w":g=u.t(e,this.utc).toString();break;case"W":g=u.q(e,this.utc).toString();break;case"dd":g=u.B(o,2,"0");break;case"d":g=o.toString();break;case"DD":case"DDD":g=u.B(u.u(e,this.utc).toString(),t.parts[y].length,"0");break;case"D":g=u.u(e,this.utc).toString();break;case"t":g=i.translateFunc("_dateOrd").call(this,o);break;case"E":g=(a||7).toString();break;case"EE":g=u.B((a||7).toString(),2,"0");break;case"EEE":case"eee":g=i.translate(this.weekdaysShort[a]);break;case"EEEE":case"eeee":g=i.translate(this.weekdays[a]);break;case"EEEEE":case"eeeee":g=i.translate(this.weekdays[a]).substr(0,1);break;case"e":case"ee":g=(a-this.firstDayOfWeek+1).toString(),"ee"==t.parts[y]&&(g=u.B(g,2,"0"));break;case"a":g=s>=12?i.translate("PM"):i.translate("AM");break;case"aa":g=s>=12?i.translate("P.M."):i.translate("A.M.");break;case"aaa":g=s>=12?i.translate("P"):i.translate("A");break;case"h":g=u.m(s).toString();break;case"hh":g=u.B(u.m(s),2,"0");break;case"H":g=s.toString();break;case"HH":g=u.B(s,2,"0");break;case"K":g=u.m(s,0).toString();break;case"KK":g=u.B(u.m(s,0),2,"0");break;case"k":g=(s+1).toString();break;case"kk":g=u.B(s+1,2,"0");break;case"m":g=c.toString();break;case"mm":g=u.B(c,2,"0");break;case"s":g=h.toString();break;case"ss":g=u.B(h,2,"0");break;case"S":case"SS":case"SSS":g=Math.round(p/1e3*Math.pow(10,t.parts[y].length)).toString();break;case"x":g=m.toString();break;case"n":case"nn":case"nnn":g=u.B(p,t.parts[y].length,"0");break;case"z":g=u.s(e,!1,!1,this.utc);break;case"zz":g=u.s(e,!0,!1,this.utc);break;case"zzz":g=u.s(e,!1,!0,this.utc);break;case"zzzz":g=u.s(e,!0,!0,this.utc);break;case"Z":case"ZZ":var b=Math.abs(f)/60,x=Math.floor(b),w=60*b-60*x;this.utc&&(x=0,w=0),"Z"==t.parts[y]?(g="GMT",g+=f>0?"-":"+",g+=u.B(x,2)+":"+u.B(w,2)):(g=f>0?"-":"+",g+=u.B(x,2)+u.B(w,2));break;case"i":g=e.toISOString();break;case"I":g=e.toUTCString()}d=d.replace(l.d,g)}return d},t.prototype.parse=function(e,t){if(c.d(t)||(t=this.inputDateFormat),e instanceof Date)return e;if("number"===typeof e)return new Date(e);var i;"string"!==typeof e&&(e=e.toString()),this.language||(this.sprite?this.language=this.sprite.language:this.language=new r.a);var n="";t=(t=u.d(t)).substr(0,e.length);for(var a=this.parseFormat(t),o={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},s={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this.utc},l=0,h=0,p=0;p<a.parts.length;p++){switch(h=p+l+1,a.parts[p]){case"yyyy":case"YYYY":n+="([0-9]{4})",o.year=h;break;case"yyy":case"YYY":n+="([0-9]{3})",o.year3=h;break;case"yy":case"YY":n+="([0-9]{2})",o.year2=h;break;case"y":case"Y":n+="([0-9]{1})",o.year1=h;break;case"MMMM":n+="("+this.getStringList(this.months).join("|")+")",o.monthLong=h;break;case"MMM":n+="("+this.getStringList(this.monthsShort).join("|")+")",o.monthShort=h;break;case"MM":case"M":n+="([0-9]{2}|[0-9]{1})",o.month=h;break;case"ww":case"w":n+="([0-9]{2}|[0-9]{1})",o.week=h;break;case"dd":case"d":n+="([0-9]{2}|[0-9]{1})",o.day=h;break;case"DDD":case"DD":case"D":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.yearDay=h;break;case"dddd":n+="("+this.getStringList(this.weekdays).join("|")+")",o.weekdayLong=h;break;case"ddd":n+="("+this.getStringList(this.weekdaysShort).join("|")+")",o.weekdayShort=h;break;case"aaa":case"aa":case"a":n+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",o.am=h;break;case"hh":case"h":n+="([0-9]{2}|[0-9]{1})",o.hour12Base1=h;break;case"HH":case"H":n+="([0-9]{2}|[0-9]{1})",o.hourBase0=h;break;case"KK":case"K":n+="([0-9]{2}|[0-9]{1})",o.hour12Base0=h;break;case"kk":case"k":n+="([0-9]{2}|[0-9]{1})",o.hourBase1=h;break;case"mm":case"m":n+="([0-9]{2}|[0-9]{1})",o.minute=h;break;case"ss":case"s":n+="([0-9]{2}|[0-9]{1})",o.second=h;break;case"SSS":case"SS":case"S":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=h,o.millisecondDigits=a.parts[p].length;break;case"nnn":case"nn":case"n":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=h;break;case"x":n+="([0-9]{1,})",o.timestamp=h;break;case"Z":n+="GMT([-+]+[0-9]{2}:[0-9]{2})",o.zone=h;break;case"ZZ":n+="([\\-+]+[0-9]{2}[0-9]{2})",o.zone=h;break;case"i":n+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2}).?([0-9]{0,3})([zZ]|[+-][0-9]{2}:?[0-9]{2}|$)",o.iso=h,l+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":l--}n+="[^0-9]*"}var d=new RegExp(n),f=e.match(d);if(f){if(o.year>-1&&(s.year=parseInt(f[o.year])),o.year3>-1){var m=parseInt(f[o.year3]);m+=1e3,s.year=m}if(o.year2>-1){m=parseInt(f[o.year2]);m+=m>50?1e3:2e3,s.year=m}if(o.year1>-1){m=parseInt(f[o.year1]);m=10*Math.floor((new Date).getFullYear()/10)+m,s.year=m}if(o.monthLong>-1&&(s.month=this.resolveMonth(f[o.monthLong])),o.monthShort>-1&&(s.month=this.resolveShortMonth(f[o.monthShort])),o.month>-1&&(s.month=parseInt(f[o.month])-1),o.week>-1&&-1===o.day&&(s.month=0,s.day=u.o(parseInt(f[o.week]),s.year,1,this.utc)),o.day>-1&&(s.day=parseInt(f[o.day])),o.yearDay>-1&&(s.month=0,s.day=parseInt(f[o.yearDay])),o.hourBase0>-1&&(s.hour=parseInt(f[o.hourBase0])),o.hourBase1>-1&&(s.hour=parseInt(f[o.hourBase1])-1),o.hour12Base0>-1)11==(m=parseInt(f[o.hour12Base0]))&&(m=0),o.am>-1&&!this.isAm(f[o.am])&&(m+=12),s.hour=m;if(o.hour12Base1>-1)12==(m=parseInt(f[o.hour12Base1]))&&(m=0),o.am>-1&&!this.isAm(f[o.am])&&(m+=12),s.hour=m;if(o.minute>-1&&(s.minute=parseInt(f[o.minute])),o.second>-1&&(s.second=parseInt(f[o.second])),o.millisecond>-1){m=parseInt(f[o.millisecond]);2==o.millisecondDigits?m*=10:1==o.millisecondDigits&&(m*=100),s.millisecond=m}if(o.timestamp>-1){s.timestamp=parseInt(f[o.timestamp]);var y=new Date(s.timestamp);s.year=y.getUTCFullYear(),s.month=y.getUTCMonth(),s.day=y.getUTCDate(),s.hour=y.getUTCHours(),s.minute=y.getUTCMinutes(),s.second=y.getUTCSeconds(),s.millisecond=y.getUTCMilliseconds()}o.zone>-1&&(s.offset=this.resolveTimezoneOffset(new Date(s.year,s.month,s.day),f[o.zone])),o.iso>-1&&(s.year=c.l(f[o.iso+0]),s.month=c.l(f[o.iso+1])-1,s.day=c.l(f[o.iso+2]),s.hour=c.l(f[o.iso+3]),s.minute=c.l(f[o.iso+4]),s.second=c.l(f[o.iso+5]),s.millisecond=c.l(f[o.iso+6]),"Z"==f[o.iso+7]||"z"==f[o.iso+7]?s.utc=!0:""!=f[o.iso+7]&&(s.offset=this.resolveTimezoneOffset(new Date(s.year,s.month,s.day),f[o.iso+7]))),i=s.utc?new Date(Date.UTC(s.year,s.month,s.day,s.hour,s.minute,s.second,s.millisecond)):new Date(s.year,s.month,s.day,s.hour,s.minute+s.offset,s.second,s.millisecond)}else i=new Date(e);return i},t.prototype.resolveTimezoneOffset=function(e,t){if(t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){var i=c.b(t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)),n=i[1],r=i[2],a=i[3],o=60*parseInt(r)+parseInt(a);return"+"==n&&(o*=-1),o-(e||new Date).getTimezoneOffset()}return 0},t.prototype.resolveMonth=function(e){var t=this.months.indexOf(e);return t>-1||this.language&&!this.language.isDefault()&&(t=this.language.translateAll(this.months).indexOf(e))>-1?t:0},t.prototype.resolveShortMonth=function(e){var t=this.monthsShort.indexOf(e);return t>-1||(t=this.months.indexOf(e))>-1||this.language&&!this.language.isDefault()&&(t=this.language.translateAll(this.monthsShort).indexOf(e))>-1?t:0},t.prototype.isAm=function(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1},t.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},t.prototype.getStringList=function(e){for(var t=[],i=0;i<e.length;i++)this.language?t.push(u.j(this.language.translate(e[i]))):t.push(u.j(e[i]));return t},Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(e){this._dateFormat=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDateFormat",{get:function(){return this._inputDateFormat},set:function(e){this._inputDateFormat=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(e){this._intlLocales=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"utc",{get:function(){return this._utc},set:function(e){this._utc=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timezoneOffset",{get:function(){return this._timezoneOffset},set:function(e){this._timezoneOffset!=e&&(this._timezoneOffset=e,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timezone",{get:function(){return this._timezone},set:function(e){this._timezone!=e&&(this._timezone=e,this.timezoneMinutes=h.g(e),this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstDayOfWeek",{get:function(){return this._firstDayOfWeek},set:function(e){this._firstDayOfWeek=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(e){this._outputFormat=e.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),t}(a.a);s.b.registeredClasses.DateFormatter=p},function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i(2),r=i(26),a=i(13),o=i(3),s=i(42),l=i(0),u=i(6),c=i(1),h=function(e){function t(){var t=e.call(this)||this;return t._list=[],t._currentStep=0,t._startIndex=0,t._currentPass=0,t.baseColor=new a.a({r:103,g:183,b:220}),t.stepOptions={},t.passOptions={brighten:-.2},t.step=1,t.minColors=20,t.minLightness=.2,t.maxLightness=.9,t.shuffle=!1,t.wrap=!0,t.reuse=!1,t.saturation=1,t.className="ColorSet",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"list",{get:function(){return this._list||this.generate(this.minColors),this._list},set:function(e){this._list=e,this.reset()},enumerable:!0,configurable:!0}),t.prototype.getReusableColor=function(e){if(0==this._list.length)return this.generate(1),this.list[0];var t=e-Math.floor(e/this._list.length)*this.list.length;return this.list[t]},t.prototype.next=function(){var e;return this.list.length<=this._currentStep?this.reuse?e=this.getReusableColor(this._currentStep):(this.generate(c.B(this.minColors,this._currentStep+1)),e=this.list[this._currentStep]):e=this.list[this._currentStep],this._currentStep+=this.step,e.saturate(this.saturation)},t.prototype.getIndex=function(e){var t;return this.list.length<=e?this.reuse?t=this.getReusableColor(e):(this.generate(this.minColors),t=this.getIndex(e)):t=this.list[e],t.saturate(this.saturation)},t.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(t.prototype,"currentStep",{get:function(){return this._currentStep},set:function(e){this._currentStep=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startIndex",{get:function(){return this._startIndex},set:function(e){this._startIndex=e,this.reset()},enumerable:!0,configurable:!0}),t.prototype.generate=function(e){var t=this.currentColor,i=s.h(l.b(t.rgb)),n=l.d(this.stepOptions.hue)?this.stepOptions.hue:1/e,r={brighten:0,lighten:0,hue:i.h,lightness:i.l,saturation:i.s},o=[],c=0==this.list.length?0:1;if(this.reuse)for(var h=c;h<=e;h++)o.push(s.h(l.b(this._list[h].rgb)).h);else for(h=c;h<=e;h++){var p=i.h+n*h;this.wrap&&p>1&&(p-=1),o.push(p)}this.shuffle&&o.sort((function(e,t){return Math.random()-.5}));for(h=0;h<e;h++){this.reuse?i=s.h(l.b(this._list[h].rgb)):i.h=o.shift(),this.applyStepOptions(i,r,h,this._currentPass);var d=Object(a.b)(s.b(i)),f=(this.stepOptions.brighten||0)*h+(this.passOptions.brighten||0)*this._currentPass;0!=f&&(f=this.wrap?u.l(f,this.minLightness,this.maxLightness):u.k(f,this.minLightness,this.maxLightness),d=d.brighten(f));var m=(this.stepOptions.lighten||0)*h+(this.passOptions.lighten||0)*this._currentPass;0!=m&&(m=this.wrap?u.l(m,this.minLightness,this.maxLightness):u.k(m,this.minLightness,this.maxLightness),d=d.lighten(m)),this._list.push(d)}this._currentPass++},Object.defineProperty(t.prototype,"currentColor",{get:function(){return 0==this._list.length?this.baseColor.saturate(this.saturation):this._list[this._list.length-1].saturate(this.saturation)},enumerable:!0,configurable:!0}),t.prototype.applyStepOptions=function(e,t,i,n){e.l=t.lightness+(this.stepOptions.lightness||0)*i+(this.passOptions.lightness||0)*n,this.wrap?(e.l>1?e.l=e.l-Math.floor(e.l):e.l<0&&(e.l=-(e.l-Math.floor(e.l))),e.l=u.l(e.l,this.minLightness,this.maxLightness)):(e.l>1?e.l=1:e.l<0&&(e.l=0),e.l=u.k(e.l,this.minLightness,this.maxLightness))},t.prototype.processConfig=function(t){if(t){if(l.d(t.list)&&l.e(t.list))for(var i=0,n=t.list.length;i<n;i++)t.list[i]instanceof a.a||(t.list[i]=Object(a.b)(t.list[i]));!l.d(t.baseColor)||t.baseColor instanceof a.a||(t.baseColor=Object(a.b)(t.baseColor))}e.prototype.processConfig.call(this,t)},t}(r.a);o.b.registeredClasses.ColorSet=h},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(24),r=i(0),a=new(function(){function e(){this._storage=new n.a,this.ttl=1e3}return e.prototype.set=function(e,t,i,a){var o=this._storage.insertKeyIfEmpty(e,(function(){return new n.a})),s={touched:(new Date).getTime(),ttl:r.h(a)?a:this.ttl,value:i};o.setKey(t,s)},e.prototype.get=function(e,t,i){if(void 0===i&&(i=void 0),this._storage.hasKey(e)){var n=this._storage.getKey(e);if(n.hasKey(t)){var r=n.getKey(t);return r.ttl&&r.touched+r.ttl<(new Date).getTime()&&(r.expired=!0),r.expired?(n.removeKey(t),i):r.value}return i}return i},e.prototype.clear=function(e){e?this._storage.removeKey(e):this._storage.clear()},e}())},function(e,t,i){"use strict";var n=i(193);t.a=function(e,t){return t?Object(n.a)(e,t,{clone:!1}):e}},function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return c})),i.d(t,"d",(function(){return h}));var n=i(195);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),i)}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),i=e.match(t);return i&&1===i[0].length&&(i=i.map((function(e){return e+e}))),i?"rgb".concat(4===i.length?"a":"","(").concat(i.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),i=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(i))throw new Error(Object(n.a)(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:i,values:r=r.map((function(e){return parseFloat(e)}))}}function o(e){var t=e.type,i=e.values;return-1!==t.indexOf("rgb")?i=i.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(i[1]="".concat(i[1],"%"),i[2]="".concat(i[2],"%")),"".concat(t,"(").concat(i.join(", "),")")}function s(e,t){var i=l(e),n=l(t);return(Math.max(i,n)+.05)/(Math.min(i,n)+.05)}function l(e){var t="hsl"===(e=a(e)).type?a(function(e){var t=(e=a(e)).values,i=t[0],n=t[1]/100,r=t[2]/100,s=n*Math.min(r,1-r),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+i/30)%12;return r-s*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",c=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(u+="a",c.push(t[3])),o({type:u,values:c})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){return e=a(e),t=r(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,o(e)}function c(e,t){if(e=a(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var i=0;i<3;i+=1)e.values[i]*=1-t;return o(e)}function h(e,t){if(e=a(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;return o(e)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(195);function r(e){if("string"!==typeof e)throw new Error(Object(n.a)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,i){"use strict";i.d(t,"c",(function(){return u.a})),i.d(t,"a",(function(){return J.b})),i.d(t,"d",(function(){return O.c})),i.d(t,"b",(function(){return ce}));var n=i(25),r=i(26),a=i(63),o=i(18),s=(i(61),i(16)),l=(i(114),i(95),i(3)),u=i(23),c=(i(93),i(96),i(105),i(135),i(85),i(129),i(59)),h=i(64),p=(i(117),i(2)),d=i(14),f=i(0),m=function(e){function t(){var t=e.call(this)||this;return t.className="Image",t.element=t.paper.add("image"),t.applyTheme(),t.width=50,t.height=50,t}return Object(p.c)(t,e),t.prototype.draw=function(){if(e.prototype.draw.call(this),this.href){var t=this.innerWidth,i=this.innerHeight;f.h(this.widthRatio)&&(t=i*this.widthRatio,this.width=t),f.h(this.heightRatio)&&(i=t*this.heightRatio,this.height=i),this.element.attr({width:t,height:i}),this.element.attrNS(d.c,"xlink:href",this.href)}},Object.defineProperty(t.prototype,"href",{get:function(){return this.getPropertyValue("href")},set:function(e){this.setPropertyValue("href",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widthRatio",{get:function(){return this.getPropertyValue("widthRatio")},set:function(e){this.setPropertyValue("widthRatio",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"heightRatio",{get:function(){return this.getPropertyValue("heightRatio")},set:function(e){this.setPropertyValue("heightRatio",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bbox",{get:function(){return{x:0,y:0,width:this.pixelWidth,height:this.pixelHeight}},enumerable:!0,configurable:!0}),t}(s.a);l.b.registeredClasses.Image=m;var y=i(38),v=(i(51),i(109),i(101),i(136),i(137),i(83)),g=i(1),_=i(4),b=function(e){function t(){var t=e.call(this)||this;return t.className="Polyarc",t.controlPointDistance=.5,t.controlPointPosition=.5,t.applyTheme(),t}return Object(p.c)(t,e),t.prototype.makePath=function(){this._distance=0;var e=this.segments;if(e&&e.length>0){var t="";this._realSegments=[];for(var i=0,n=e.length;i<n;i++){var r=e[i],a=[];if(this._realSegments.push(a),r.length>0){t+=_.g(r[0]);for(var o=1;o<r.length;o++){var s=r[o-1],l=r[o],u=g.q(l,s),c=u*this.controlPointDistance,h=this.controlPointPosition,p=-g.j(s,l),d={x:s.x+(l.x-s.x)*h*.5-c*g.F(p),y:s.y+(l.y-s.y)*h*.5-c*g.g(p)},f={x:s.x+(l.x-s.x)*h*1.5-c*g.F(p),y:s.y+(l.y-s.y)*h*1.5-c*g.g(p)};t+=_.e(l,d,f);var m=Math.ceil(u),y=s;if(m>0)for(var v=0;v<=m;v++){var b=g.t(s,l,d,f,v/m);a.push(b),this._distance+=g.q(y,b),y=b}else a.push(s)}}}this.path=t}},Object.defineProperty(t.prototype,"controlPointPosition",{get:function(){return this.getPropertyValue("controlPointPosition")},set:function(e){this.setPropertyValue("controlPointPosition",e),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(e){this.setPropertyValue("controlPointDistance",e),this.makePath()},enumerable:!0,configurable:!0}),t}(v.a);l.b.registeredClasses.Polyarc=b;var x=i(37),w=i(41),k=function(e){function t(t){var i=e.call(this)||this;return i._bboxes=[],i.morphDuration=800,i.morphEasing=w.b,i.morphToSingle=!0,i.scaleRatio=1,i.className="Morpher",i.morphable=t,i.applyTheme(),i}return Object(p.c)(t,e),t.prototype.morphToPolygon=function(e,t,i){var n=this.morphable.currentPoints;if(n&&e){this.sortPoints(n),this.sortPoints(e),this._morphFromPointsReal=[],this._morphToPointsReal=[],f.d(t)||(t=this.morphDuration),f.d(i)||(i=this.morphEasing),this._morphFromPointsReal=this.normalizePoints(e,n),this._morphToPointsReal=this.normalizePoints(n,e),this.morphable.currentPoints=this._morphFromPointsReal;var r=new x.a(this,{property:"morphProgress",from:0,to:1},t,i);return this._disposers.push(r),r.start(),r}},t.prototype.normalizePoints=function(e,t){for(var i=0,n=e.length;i<n;i++){var r=e[i][0],a=e[i][1],o=f.b(g.l(r)),s=o.x+o.width,l=o.y+o.height;if(t[i]||(t[i]=[]),r&&!t[i][0]&&(t[i][0]=[{x:s,y:l},{x:s,y:l}]),t[i][0]){t[i][0]=this.addPoints(t[i][0],r.length);for(var u=1/0,c=0,h=0;h<t[i][0].length;h++){var p=g.q(t[i][0][h],r[0]);p<u&&(c=h,u=p)}var d=t[i][0].slice(0,c),m=t[i][0].slice(c);t[i][0]=m.concat(d)}a&&(t[i][1]||(t[i][1]=[{x:s,y:l},{x:s,y:l}]),t[i][1]=this.addPoints(t[i][1],a.length))}return t},t.prototype.sortPoints=function(e){e.sort((function(e,t){var i=f.b(g.l(e[0])),n=f.b(g.l(t[0]));return i.width*i.height>n.width*n.height?-1:1}));for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i][0];r&&t.push(f.b(g.l(r)))}return g.m(t)},t.prototype.morphToCircle=function(e,t,i){var n=this.morphable.points,r=this.sortPoints(n);this._morphFromPointsReal=[],this._morphToPointsReal=[],f.d(t)||(t=this.morphDuration),f.d(i)||(i=this.morphEasing);for(var a=0,o=n.length;a<o;a++){var s=n[a][0],l=n[a][1];if(this._morphFromPointsReal[a]=[],this._morphToPointsReal[a]=[],s){var u=s,c=s,h=f.b(g.l(c));this.morphToSingle&&(h=f.b(r));var p=h.x+h.width/2,d=h.y+h.height/2,m=e;f.h(m)||(m=Math.min(h.width/2,h.height/2)),u=[];var y=g.j({x:p,y:d},s[0]),v=100;s.length>v&&(v=s.length);for(var _=360/((v=(c=this.addPoints(s,v)).length)-1),b=0;b<v;b++){var w=_*b+y,k={x:p+m*g.g(w),y:d+m*g.F(w)};u[b]=k}if(l&&l.length>0)for(var P=0,S=l.length;P<S;P++)u.push({x:p,y:d});this._morphFromPointsReal[a][0]=c,this._morphToPointsReal[a][0]=u}}this.morphable.currentPoints=this._morphFromPointsReal;var T=new x.a(this,{property:"morphProgress",from:0,to:1},t,i);return this._disposers.push(T),T.start(),T},t.prototype.addPoints=function(e,t){for(var i=Math.round(t/e.length),n=[],r=0,a=e.length;r<a;r++){var o=e[r],s=void 0;s=r==e.length-1?e[0]:e[r+1],n.push(o);for(var l=1;l<i;l++){var u=l/i,c={x:o.x+(s.x-o.x)*u,y:o.y+(s.y-o.y)*u};n.push(c)}n.length+e.length-r==t&&(i=0)}if(n.length<t&&e.length>0){var h=e[e.length-1];for(l=n.length;l<t;l++)n.push({x:h.x,y:h.y})}return n},t.prototype.morphToRectangle=function(e,t,i,n){var r=this.morphable.points;this.sortPoints(r),this._morphFromPointsReal=[],this._morphToPointsReal=[],f.d(i)||(i=this.morphDuration),f.d(n)||(n=this.morphEasing);for(var a=0,o=r.length;a<o;a++){var s=r[a][0],l=r[a][1];if(this._morphFromPointsReal[a]=[],this._morphToPointsReal[a]=[],s){var u=s,c=s,h=this._bboxes[a];this.morphToSingle;var p=h.x,d=h.y,m=e,y=t;if(f.h(m)||(m=h.width),f.h(y)||(y=h.height),u=[{x:p,y:d},{x:p+m,y:d},{x:p+m,y:d+y},{x:p,y:d+y}],u=this.addPoints(u,s.length),s.length<4)for(var v=s.length;v<4;v++)u.push({x:s[v].x,y:s[v].y});if(l&&l.length>0)for(var g=h.x+h.width/2,_=h.y+h.height/2,b=0,w=l.length;b<w;b++)u.push({x:g,y:_});this._morphFromPointsReal[a][0]=c,this._morphToPointsReal[a][0]=u}}this.morphable.currentPoints=this._morphFromPointsReal;var k=new x.a(this,{property:"morphProgress",from:0,to:1},i,n);return this._disposers.push(k),k.start(),k},Object.defineProperty(t.prototype,"morphProgress",{get:function(){return this._morphProgress},set:function(e){this._morphProgress=e;var t=[];if(null!=e){var i=this._morphFromPointsReal,n=this._morphToPointsReal;if(null!=i&&null!=n)for(var r=0,a=i.length;r<a;r++){var o=[];t.push(o);var s=i[r][0],l=i[r][1],u=n[r][0],c=n[r][1];if(s&&s.length>0&&u&&u.length>0){for(var h=[],p=0,d=s.length;p<d;p++){var f=s[p],m=u[p],y={x:f.x+(m.x*this.scaleRatio-f.x)*e,y:f.y+(m.y*this.scaleRatio-f.y)*e};h.push(y)}o[0]=h}if(l&&l.length>0&&c&&c.length>0){for(var v=[],g=0,_=l.length;g<_;g++){f=l[g],m=c[g],y={x:f.x+(m.x*this.scaleRatio-f.x)*e,y:f.y+(m.y*this.scaleRatio-f.y)*e};v.push(y)}o[1]=v}}}this.morphable.currentPoints=t},enumerable:!0,configurable:!0}),t.prototype.morphBack=function(e,t){this._morphToPointsReal=this._morphFromPointsReal,this._morphFromPointsReal=this.morphable.currentPoints,f.d(e)||(e=this.morphDuration),f.d(t)||(t=this.morphEasing);var i=new x.a(this,{property:"morphProgress",from:0,to:1},e,t);return this._disposers.push(i),i.start(),i},Object.defineProperty(t.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new x.b(this._animations))),this._animations},enumerable:!0,configurable:!0}),t}(r.a),P=function(e){function t(){var t=e.call(this)||this;return t.className="Polygon",t.element=t.paper.add("path"),t.shapeRendering="auto",t._currentPoints=[],t.applyTheme(),t}return Object(p.c)(t,e),Object.defineProperty(t.prototype,"points",{get:function(){var e=this.getPropertyValue("points"),t=this.path;if(t&&(!e||0==e.length)){for(var i=t.slice(1,t.length-1).split("ZM"),n=0;n<i.length;n++){var r=i[n];if(r.length>0){var a=r.split("M"),o=a[0],s=a[1];if(o&&o.length>0){var l=o.split("L");if(l.length>0){var u=[],c=[u];e.push(c);for(var h=0;h<l.length;h++){var p=l[h].split(",");u.push({x:+p[0],y:+p[1]})}if(s&&s.length>0){var d=s.split("L");if(d.length>0){var f=[];c.push(f);for(h=d.length-1;h>=0;h--){p=d[h].split(",");f.push({x:+p[0],y:+p[1]})}}}}}}}this.setPropertyValue("points",e),this._currentPoints=e}return e},set:function(e){this.setPropertyValue("points",e,!0),this._currentPoints=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentPoints",{get:function(){return this._currentPoints&&0!=this._currentPoints.length||!this.path||(this._currentPoints=this.points),this._currentPoints},set:function(e){this._currentPoints!=e&&(this._currentPoints=e,this.draw())},enumerable:!0,configurable:!0}),t.prototype.draw=function(){var t,i,n,r,a="",o=this._currentPoints;if(o.length>0){for(var s=0,l=o.length;s<l;s++){var u=o[s][0],c=o[s][1];if(u&&u.length>0){var h=u[0];a+=_.g(h);for(var p=0;p<u.length;p++)h=u[p],a+=_.f(h),(!f.h(i)||i<h.x)&&(i=h.x),(!f.h(t)||t>h.x)&&(t=h.x),(!f.h(n)||n>h.y)&&(n=h.y),(!f.h(r)||r<h.y)&&(r=h.y)}if(c&&c.length>0){h=c[0];a+=_.g(h);for(var d=0,m=c.length;d<m;d++)h=c[d],a+=_.f(h)}}a&&(a+=_.d()),this.bbox.x=t,this.bbox.y=n,this.bbox.width=i-t,this.bbox.height=r-n,e.prototype.setPath.call(this,a)}},t.prototype.setPath=function(t){return!!e.prototype.setPath.call(this,t)&&(this.points=[],this._bbox=this.group.getBBox(),!0)},t.prototype.measureElement=function(){},Object.defineProperty(t.prototype,"centerPoint",{get:function(){return{x:this.bbox.x+this.bbox.width/2,y:this.bbox.y+this.bbox.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"morpher",{get:function(){return this._morpher||(this._morpher=new k(this),this._disposers.push(this._morpher)),this._morpher},enumerable:!0,configurable:!0}),t}(s.a);l.b.registeredClasses.Polygon=P;var S=i(97),T=i(20),C=i(68),O=i(9),I=function(e){function t(){var t=e.call(this)||this;t.className="Preloader",t.width=Object(O.c)(100),t.height=Object(O.c)(100);var i=new T.a,n=t.createChild(o.a);n.shouldClone=!1;var r=n.createChild(C.a);r.shouldClone=!1,r.radius=53,r.arc=360,r.fill=i.getFor("fill"),r.fillOpacity=.8,r.innerRadius=42,r.isMeasured=!1,t.backgroundSlice=r;var a=n.createChild(C.a);a.shouldClone=!1,a.radius=50,a.innerRadius=45,a.fill=i.getFor("alternativeBackground"),a.fillOpacity=.2,a.isMeasured=!1,t.progressSlice=a;var s=n.createChild(y.a);return s.shouldClone=!1,s.horizontalCenter="middle",s.verticalCenter="middle",s.isMeasured=!1,s.fill=i.getFor("text"),s.align="center",s.valign="middle",s.textAlign="middle",s.fillOpacity=.4,t.label=s,t.background.opacity=1,t.background.fill=i.getFor("background"),t.contentAlign="center",t.contentValign="middle",t.delay=300,t.states.create("hidden").properties.opacity=0,t.visible=!1,t.hide(0),t.__disabled=!0,t._disposers.push(t.backgroundSlice),t._disposers.push(t.progressSlice),t._disposers.push(t.label),t._disposers.push(n),t}return Object(p.c)(t,e),Object.defineProperty(t.prototype,"progress",{get:function(){return this.getPropertyValue("progress")},set:function(e){var t=this;this.__disabled=!1,this.validateLayout(),this.setPropertyValue("progress",e),this.progressSlice.arc=360*e,this.label&&(this.label.text=Math.round(100*e)+"%"),e>=1?(this._started&&(this._started=void 0),l.b.events.once("enterframe",(function(){var e=t.hide();e&&!e.isFinished()?e.events.once("animationended",(function(){t.__disabled=!0})):t.__disabled=!0})),this.interactionsEnabled=!1,this.setPropertyValue("progress",0)):e>0&&(this.delay?this._started?this._started+this.delay<=(new Date).getTime()&&(this.__disabled=!1,this.show(),this.interactionsEnabled=!0):this._started=(new Date).getTime():(this.__disabled=!1,this.show(),this.interactionsEnabled=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this.getPropertyValue("delay")},set:function(e){this.setPropertyValue("delay",e)},enumerable:!0,configurable:!0}),t}(o.a);l.b.registeredClasses.Preloader=I;i(86),i(118);var E=i(36),A=function(e){function t(){var t=e.call(this)||this;t.className="CloseButton",t.padding(8,8,8,8),t.showSystemTooltip=!0,t.width=30,t.height=30;var i=new T.a;t.cursorOverStyle=E.a.pointer;var n=t.background;n.cornerRadius(20,20,20,20);var r=i.getFor("background");n.fill=r,n.stroke=i.getFor("primaryButton"),n.strokeOpacity=1,n.strokeWidth=1;var a=i.getFor("primaryButtonActive"),o=n.states.getKey("hover");o.properties.strokeWidth=3,o.properties.fill=r;var l=n.states.getKey("down");l.properties.stroke=a,l.properties.fill=r;var u=new s.a;return u.element=t.paper.add("path"),u.stroke=n.stroke,t.icon=u,t.applyTheme(),t}return Object(p.c)(t,e),t.prototype.validate=function(){e.prototype.validate.call(this);var t=this.pixelWidth/3,i=this.pixelHeight/3,n=_.g({x:-t/2,y:-i/2});n+=_.f({x:t/2,y:i/2}),n+=_.g({x:t/2,y:-i/2}),n+=_.f({x:-t/2,y:i/2}),this.icon.path=n,this.invalidateLayout()},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),f.d(this.readerTitle)||(this.readerTitle=this.language.translate("Close"))},t}(c.a);l.b.registeredClasses.CloseButton=A;var M=function(e){function t(){var t=e.call(this)||this;t.className="SwitchButton",t.tooltipY=0,t.layout="horizontal",t.contentAlign="center",t.contentValign="middle",t.padding(8,16,8,16),t.setStateOnChildren=!0,t.states.create("active");var i=new T.a,n=new y.a;n.fillOpacity=.3,n.states.create("active").properties.fillOpacity=1,n.isActive=!0,t.leftLabel=n;var r=new c.a,a=new h.a;r.contentValign="none",r.padding(0,0,0,0),a.radius=10,r.icon=a,r.icon.valign="middle",r.label=void 0;var o=Object(O.c)(100);r.background.cornerRadius(o,o,o,o),r.width=3.5*a.radius,r.height=2.1*a.radius,r.marginLeft=8,r.marginRight=8,r.togglable=!0,a.dx=.7*-a.radius,a.fill=i.getFor("primaryButton"),a.states.create("hover").properties.fill=i.getFor("primaryButtonHover");var s=a.states.create("active");s.properties.fill=i.getFor("primaryButtonActive"),s.properties.dx=.7*a.radius,t.switchButton=r,t.events.on("toggled",(function(){t.leftLabel.isActive=!t.isActive,t.rightLabel.isActive=t.isActive}));var l=new y.a;return l.fillOpacity=.3,l.states.create("active").properties.fillOpacity=1,t.rightLabel=l,t.role="button",t.focusable=!0,l.valign="middle",n.valign="middle",r.valign="middle",t.applyTheme(),t}return Object(p.c)(t,e),Object.defineProperty(t.prototype,"leftLabel",{get:function(){return this._leftLabel},set:function(e){this._leftLabel&&this.removeDispose(this._leftLabel),this._leftLabel=e,e&&(e.parent=this,e.interactionsEnabled=!1,e.shouldClone=!1,this._disposers.push(this._leftLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightLabel",{get:function(){return this._rightLabel},set:function(e){this._rightLabel&&this.removeDispose(this._rightLabel),this._rightLabel=e,e&&(e.parent=this,e.interactionsEnabled=!1,e.shouldClone=!1,this._disposers.push(this._rightLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"switch",{get:function(){return this._switchButton},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"switchButton",{get:function(){return this._switchButton},set:function(e){this._switchButton&&this.removeDispose(this._switchButton),this._switchButton=e,e&&(e.parent=this,e.shouldClone=!1,this._disposers.push(this._switchButton))},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),t.leftLabel&&this.leftLabel.copyFrom(t.leftLabel),t.rightLabel&&this.rightLabel.copyFrom(t.rightLabel),t.switchButton&&this.switchButton.copyFrom(t.switchButton)},t}(o.a);l.b.registeredClasses.SwitchButton=M;var D=i(45),j=function(e){function t(){var t=e.call(this)||this;return t.className="Slider",t.thumb.opacity=0,t.thumb.interactionsEnabled=!1,t.endGrip.opacity=0,t.endGrip.interactionsEnabled=!1,t.startGrip.events.on("drag",(function(){t.endGrip.x=t.startGrip.x,t.endGrip.y=t.startGrip.y})),t.applyTheme(),t}return Object(p.c)(t,e),Object.defineProperty(t.prototype,"__end",{get:function(){return this._start},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._start},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return this._start},set:function(e){this._isBusy||(this.__start=e)},enumerable:!0,configurable:!0}),t}(i(87).a);l.b.registeredClasses.Slider=j;i(119);var F=i(88),L=(i(139),i(106)),R=(i(111),i(71),i(107),i(140),function(e){function t(){var t=e.call(this)||this;t.className="PlayButton",t.padding(12,12,12,12),t.showSystemTooltip=!0;var i=new T.a,n=t.background;n.cornerRadius(25,25,25,25),n.fill=i.getFor("primaryButton"),n.stroke=i.getFor("primaryButtonStroke"),n.strokeOpacity=0,n.states.getKey("hover").properties.fill=i.getFor("primaryButtonHover"),n.states.getKey("down").properties.fill=i.getFor("primaryButtonActive");var r=new L.a;r.direction="right",r.width=9,r.height=11,r.marginLeft=1,r.marginRight=1,r.horizontalCenter="middle",r.verticalCenter="middle",r.stroke=i.getFor("primaryButtonText"),r.fill=r.stroke,t.icon=r;var a=new D.a;a.width=11,a.height=11,a.horizontalCenter="middle",a.verticalCenter="middle",a.cornerRadius(0,0,0,0),a.stroke=i.getFor("primaryButtonText"),a.fill=r.stroke,t.togglable=!0;var o=t.states.create("active");return o.transitionDuration=0,o.properties.icon=a,t.defaultState.transitionDuration=0,t.applyTheme(),t}return Object(p.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),f.d(this.readerTitle)||(this.readerTitle=this.language.translate("Play"))},t}(c.a));l.b.registeredClasses.PlayButton=R;i(141),i(143),i(144),i(134),i(145),i(74),i(103),i(102),i(54),i(133),i(22),i(132),i(131),i(115),i(82),i(130);var z=i(58),V=(i(40),i(100)),B=(i(142),i(44)),N=(i(98),i(66)),U=function(e){function t(){var t=e.call(this)||this;return t.className="RadialGradientModifier",t.gradient=new N.a,t.applyTheme(),t}return Object(p.c)(t,e),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.gradient=t.gradient.clone()},t}(i(150).a);l.b.registeredClasses.RadialGradientModifier=U;var W=i(73),G=function(e){function t(){var t=e.call(this)||this;return t.properties.gap=0,t._line=t.paper.add("path"),t.addElement(t._line),t}return Object(p.c)(t,e),t.prototype.draw=function(){if(e.prototype.draw.call(this),Math.round(this.rotation/90)!=this.rotation/90&&(this.properties.shapeRendering="auto"),this._line){var t=this.width,i=this.height,n="";if(this.gap)for(var r=this.gap+this.strokeWidth,a=this.height/r,o=-a/2;o<1.5*a;o++)Math.round(this.rotation/90)!=this.rotation/90?(n+=_.g({x:-t,y:(o+.5)*r})+_.f({x:2*t,y:(o+.5)*r}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):n+=_.g({x:-t,y:o*r})+_.f({x:2*t,y:o*r});else Math.round(this.rotation/90)!=this.rotation/90?(n=_.g({x:-t,y:i/2})+_.f({x:2*t,y:i/2}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):n=_.g({x:0,y:0})+_.f({x:t,y:0});this._line.attr({d:n})}},Object.defineProperty(t.prototype,"gap",{get:function(){return this.properties.gap},set:function(e){this.properties.gap=e,this.draw()},enumerable:!0,configurable:!0}),t}(W.a);l.b.registeredClasses.LinePattern=G;var H=function(e){function t(){var t=e.call(this)||this;return t.properties.radius=2,t._circle=t.paper.add("circle"),t.addElement(t._circle),t.shapeRendering="auto",t}return Object(p.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),this._circle&&this._circle.attr({r:this.radius,cx:this.width/2,cy:this.height/2})},Object.defineProperty(t.prototype,"radius",{get:function(){return this.properties.radius},set:function(e){this.properties.radius=e,this.draw()},enumerable:!0,configurable:!0}),t}(W.a);l.b.registeredClasses.CirclePattern=H;var X=function(e){function t(){var t=e.call(this)||this;return t.rectHeight=1,t.rectWidth=1,t._rect=t.paper.add("rect"),t.addElement(t._rect),t}return Object(p.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2,this._rect&&this._rect.attr({width:this.rectWidth,height:this.rectHeight,x:(this.width-this.rectWidth)/2,y:(this.height-this.rectHeight)/2})},Object.defineProperty(t.prototype,"rectWidth",{get:function(){return this.properties.rectWidth},set:function(e){this.properties.rectWidth=e,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectHeight",{get:function(){return this.properties.rectHeight},set:function(e){this.properties.rectHeight=e,this.draw()},enumerable:!0,configurable:!0}),t}(W.a);l.b.registeredClasses.RectPattern=X;var Y=i(65),q=function(e){function t(){var t=e.call(this)||this;return t.className="ColorizeFilter",t.feColorMatrix=t.paper.add("feColorMatrix"),t.feColorMatrix.attr({type:"matrix"}),t.filterPrimitives.push(t.feColorMatrix),t.intensity=1,t.applyTheme(),t}return Object(p.c)(t,e),t.prototype.applyFilter=function(){var e,t,i,n=this.intensity,r=1-n,a=this.color;a&&a.rgb?(e=a.rgb.r/255*n,t=a.rgb.g/255*n,i=a.rgb.b/255*n):(e=0,t=0,i=0),this.feColorMatrix.attr({values:r+" 0 0 0 "+e+" 0 "+r+" 0 0 "+t+" 0 0 "+r+" 0 "+i+" 0 0 0 1 0"})},Object.defineProperty(t.prototype,"color",{get:function(){return this.properties.color},set:function(e){this.properties.color=e,this.applyFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intensity",{get:function(){return this.properties.intensity},set:function(e){this.properties.intensity=e,this.applyFilter()},enumerable:!0,configurable:!0}),t}(Y.a);l.b.registeredClasses.ColorizeFilter=q;var Z=i(99),K=(i(138),function(e){function t(){var t=e.call(this)||this;return t.className="BlurFilter",t.feGaussianBlur=t.paper.add("feGaussianBlur"),t.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),t.filterPrimitives.push(t.feGaussianBlur),t.width=200,t.height=200,t.blur=1.5,t.applyTheme(),t}return Object(p.c)(t,e),Object.defineProperty(t.prototype,"blur",{get:function(){return this.properties.blur},set:function(e){this.properties.blur=e,this.feGaussianBlur.attr({stdDeviation:e/this.scale})},enumerable:!0,configurable:!0}),t}(Y.a));l.b.registeredClasses.BlurFilter=K;var $=function(e){function t(){var t=e.call(this)||this;return t.className="FocusFilter",t.feFlood=t.paper.add("feFlood"),t.feFlood.attr({"flood-color":(new T.a).getFor("primaryButtonHover"),result:"base"}),t.filterPrimitives.push(t.feFlood),t.feMorphology=t.paper.add("feMorphology"),t.feMorphology.attr({result:"bigger",in:"SourceGraphic",operator:"dilate",radius:"2"}),t.filterPrimitives.push(t.feMorphology),t.feColorMatrix=t.paper.add("feColorMatrix"),t.feColorMatrix.attr({result:"mask",in:"bigger",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),t.filterPrimitives.push(t.feColorMatrix),t.feComposite=t.paper.add("feComposite"),t.feComposite.attr({result:"drop",in:"base",in2:"mask",operator:"in"}),t.filterPrimitives.push(t.feComposite),t.feBlend=t.paper.add("feBlend"),t.feBlend.attr({in:"SourceGraphic",in2:"drop",mode:"normal"}),t.filterPrimitives.push(t.feBlend),t.width=130,t.height=130,t.applyTheme(),t}return Object(p.c)(t,e),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(e){this.properties.stroke=e,this.feFlood.attr({"flood-color":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(e){this.properties.strokeWidth=e,this.feMorphology.attr({radius:e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(e){this.properties.opacity=e,this.feColorMatrix.attr({values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+e+" 0"})},enumerable:!0,configurable:!0}),t.prototype.setSprite=function(t){this._sprite&&this._sprite!=t&&this._sprite.group.removeStyle("outline"),t.group.addStyle({outline:"none"}),e.prototype.setSprite.call(this,t)},t}(Y.a),J=(i(108),i(32),i(47),i(76),i(13)),Q=(i(75),function(e){function t(){var t=e.call(this)||this;t._list=[],t._currentStep=0,t._startIndex=0,t._currentPass=0,t.baseColor=new J.a({r:103,g:183,b:220}),t.className="PatternSet";var i=new T.a;return t.list=[t.getLinePattern(1e3,45,1,6),t.getRectPattern(10,0,4),t.getLinePattern(1e3,-45,1,6),t.getCirclePattern(11,2,!0),t.getLinePattern(6,90,1),t.getRectPattern(12,45,6,!0),t.getLinePattern(6,0,1),t.getRectPattern(7,0,4),t.getLinePattern(1e3,45,2,3,"4,2"),t.getCirclePattern(9,3,!1),t.getLinePattern(1e3,-45,2,3,"4,2"),t.getRectPattern(10,45,Math.sqrt(50)),t.getLinePattern(1e3,-45,2,1),t.getRectPattern(10,0,9),t.getLinePattern(1e3,45,2,1),t.getLinePattern(1e3,0,3,1),t.getRectPattern(10,45,10),t.getLinePattern(1e3,90,3,1)],t.baseColor=i.getFor("stroke"),t.applyTheme(),t}return Object(p.c)(t,e),t.prototype.getLinePattern=function(e,t,i,n,r){var a=new G;return a.width=e,a.height=e,a.stroke=this.baseColor,a.gap=n,a.strokeDasharray=r,a.strokeWidth=i,a.rotation=t,a},t.prototype.getRectPattern=function(e,t,i,n){var r=new X;return r.width=e,r.height=e,r.rectWidth=i,r.rectHeight=i,n?(r.stroke=this.baseColor,r.strokeWidth=1,r.fillOpacity=0):(r.fill=this.baseColor,r.strokeWidth=0),0!=t&&(r.shapeRendering="auto"),r.rotation=t,r},t.prototype.getCirclePattern=function(e,t,i){var n=new H;return n.width=e,n.height=e,n.shapeRendering="auto",n.radius=t,i?(n.stroke=this.baseColor,n.strokeWidth=1,n.fillOpacity=0):(n.fill=this.baseColor,n.strokeWidth=0),n},Object.defineProperty(t.prototype,"list",{get:function(){return this._list},set:function(e){this._list=e,this.reset()},enumerable:!0,configurable:!0}),t.prototype.next=function(){var e=this.getIndex(this.currentStep);return this._currentStep++,e},t.prototype.getIndex=function(e){for(;this.list.length<=e;)this.generatePatterns();return this.list[e].clone()},t.prototype.generatePatterns=function(){var e=this.list.length/(this._currentPass+1);this._currentPass++;for(var t=0;t<e;t++)this.list.push(this.list[t].clone())},t.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(t.prototype,"currentStep",{get:function(){return this._currentStep},set:function(e){this._currentStep=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startIndex",{get:function(){return this._startIndex},set:function(e){this._startIndex=e,this.reset()},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(t){e.prototype.processConfig.call(this,t)},t}(r.a));l.b.registeredClasses.PatternSet=Q;i(24);var ee=i(15),te=(i(48),i(8),i(50),i(53),i(12),i(72),function(){function e(){this._disposed=!1,this._disposers=[]}e.prototype.init=function(){},e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var e=this._disposers;for(this._disposers=null;0!==e.length;){e.shift().dispose()}}}}(),i(27),i(49),i(28),i(104),i(42),i(7)),ie=(i(55),i(11),i(70),i(19),i(6)),ne=(i(92),function(e){function t(){var t=e.call(this)||this;t.className="AmChartsLogo",t.valign="bottom";var i=.3;t.opacity=.3,t.defaultState.properties.opacity=.4,t.url="https://www.amcharts.com/",t.urlTarget="_blank",t.showSystemTooltip=!0,t.readerTitle="Chart created using amCharts library",t.width=66,t.height=21,t.background.opacity=0;var n=Object(J.b)("#474758");"#ffffff"==(new T.a).getFor("background").alternative.hex&&(n=Object(J.b)("#ffffff"));var r=new B.a;r.addColor(n),r.addColor(n,1,.75),r.addColor(Object(J.b)("#3cabff"),1,.755),r.rotation=-10;var a=r,o=t.createChild(S.a);o.shouldClone=!1,o.isMeasured=!1,o.segments=[[{x:15,y:15},{x:27,y:15},{x:36,y:6},{x:40.5,y:10.5},{x:45,y:6},{x:54,y:15},{x:60,y:15}]],o.strokeWidth=6*i,o.tensionX=.8,o.tensionY=1,o.stroke=Object(J.b)("#3cabff");var s=t.createChild(S.a);s.shouldClone=!1,s.isMeasured=!1,s.segments=[[{x:6,y:15},{x:15,y:15},{x:27,y:12*i},{x:39.9,y:15},{x:51,y:15},{x:60,y:15}]],s.strokeWidth=6*i,s.tensionX=.75,s.tensionY=1,s.stroke=a,t._disposers.push(s);var l=new Z.a;t.filters.push(l);var u=new Z.a;u.saturation=1;var c=t.states.create("hover");return c.properties.opacity=1,c.filters.push(u),t.applyTheme(),t}return Object(p.c)(t,e),t}(o.a)),re=i(91);function ae(e,t){var i=d.n(e),r=!1;if(i||((i=document.createElement("div")).style.width="200px",i.style.height="200px",i.style.top="0",i.style.left="0",i.style.visibility="hidden",i.style.position="absolute",document.body.appendChild(i),r=!0),i){i.innerHTML="";var a=new V.a(i),s=new z.a(a.SVGContainer,"svg-"+(V.b.length-1)),c=new o.a;c.htmlContainer=i,c.svgContainer=a,c.width=Object(O.c)(100),c.height=Object(O.c)(100),c.background.fillOpacity=0,c.paper=s,s.append(c.group),r&&d.r((function(){c.moveHtmlContainer(e)})),c.relativeWidth=1,c.relativeHeight=1,a.container=c;var h=c.createChild(t);h.topParent=c;var p=h.uid;l.b.invalidSprites[p]=[],l.b.invalidDatas[p]=[],l.b.invalidPositions[p]=[],l.b.invalidLayouts[p]=[],c.baseId=p,h.isBaseSprite=!0,h.focusFilter=new $,l.b.baseSprites.push(h),l.b.baseSpritesByUid[p]=h,h.maskRectangle={x:0,y:0,width:Math.max(a.width||0,0),height:Math.max(a.height||0,0)},c.events.on("maxsizechanged",(function(e){0!=e.previousWidth&&0!=e.previousHeight||c.deepInvalidate(),h.maskRectangle&&(h.maskRectangle={x:0,y:0,width:Math.max(a.width||0,0),height:Math.max(a.height||0,0)})}));var m=null;!function e(){h.isDisposed()?m=null:null==d.o(h.dom)?(u.a.autoDispose?(c.htmlContainer=void 0,a.htmlElement=void 0,h.dispose()):re.b("Chart was not disposed",h.uid),m=null):m=window.setTimeout(e,1e3)}(),h.addDisposer(new ee.b((function(){null!==m&&clearTimeout(m),te.o(l.b.baseSprites,h),l.b.baseSpritesByUid[h.uid]=void 0}))),h.addDisposer(c);var y=c.createChild(o.a);y.topParent=c,y.width=Object(O.c)(100),y.height=Object(O.c)(100),y.isMeasured=!1,c.tooltipContainer=y,h.tooltip=new F.a,h.tooltip.hide(0),h.tooltip.setBounds({x:0,y:0,width:y.maxWidth,height:y.maxHeight}),y.events.on("maxsizechanged",(function(){f.b(h.tooltip).setBounds({x:0,y:0,width:y.maxWidth,height:y.maxHeight})}),void 0,!1);var v=new I;if(v.events.on("inited",(function(){v.__disabled=!0}),void 0,!1),c.preloader=v,h instanceof o.a&&!h.hasLicense()){var g=y.createChild(ne);y.events.on("maxsizechanged",(function(e){y.maxWidth<=100||y.maxHeight<=50?g.hide():(g.isHidden||g.isHiding)&&g.show()}),void 0,!1),h.logo=g,g.align="left",g.valign="bottom"}if(ie.R(h.numberFormatter),c.isStandaloneInstance=!0,u.a.onlyShowOnViewport)if(d.q(i,u.a.viewportTarget))u.a.queue&&oe(h);else{h.__disabled=!0,h.tooltipContainer.__disabled=!0;var _=[d.f(window,"DOMContentLoaded",(function(){le(h)})),d.f(window,"load",(function(){le(h)})),d.f(window,"resize",(function(){le(h)})),d.f(window,"scroll",(function(){le(h)}))];if(u.a.viewportTarget)for(var b=f.e(u.a.viewportTarget)?u.a.viewportTarget:u.a.viewportTarget?[u.a.viewportTarget]:[],x=0;x<b.length;x++){var w=b[x];_.push(d.f(w,"resize",(function(){le(h)}))),_.push(d.f(w,"scroll",(function(){le(h)})))}var k=new ee.c(_);h.addDisposer(k),h.vpDisposer=k}else u.a.queue&&oe(h);return h}throw n.a.log("html container not found"),new Error("html container not found")}function oe(e){-1==l.b.queue.indexOf(e)&&(e.__disabled=!0,e.tooltipContainer.__disabled=!0,e.events.disableType("appeared"),0==l.b.queue.length&&(l.b.events.once("exitframe",(function(){ue(e)})),n.a.requestFrame()),e.addDisposer(new ee.b((function(){se(e)}))),l.b.queue.push(e))}function se(e){var t=l.b.queue.indexOf(e);if(t>=0){l.b.queue.splice(l.b.queue.indexOf(e),1);var i=l.b.queue[t];i&&ue(i)}}function le(e){e.__disabled&&d.q(e.htmlContainer,u.a.viewportTarget)&&(e.vpDisposer&&e.vpDisposer.dispose(),oe(e))}function ue(e){e&&e.tooltipContainer&&(e.__disabled=!1,e.tooltipContainer.__disabled=!1,e.events.enableType("appeared"),e.dispatch("removedfromqueue"),e.showOnInit&&e.events.on("appeared",(function(){se(e)})),e.vpDisposer&&e.vpDisposer.dispose(),e instanceof o.a&&e.invalidateLabels(),e.tooltipContainer&&e.tooltipContainer.invalidateLayout(),e instanceof a.a?(e.invalidateData(),e.reinit(),e.events.once("datavalidated",(function(){e.showOnInit?e.appear():se(e)}))):(e.reinit(),e.events.once("inited",(function(){se(e)})),e.showOnInit&&e.appear()))}function ce(e,t){var i;f.j(t)&&(f.d(l.b.registeredClasses[t])?t=l.b.registeredClasses[t]:(t=l.b.registeredClasses.Container,i=new Error("Class ["+t+"] is not loaded.")));var n=ae(e,t);return i&&n.raiseCriticalError(i),n}},function(e,t,i){"use strict";t.a=function(e,t){}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(14),r=i(11),a=i(0),o=function(){function e(e){this._isDisposed=!1,this._x=0,this._y=0,this._rotationY=0,this._rotationX=0,this._rotation=0,this._scale=1,this.node="string"===typeof e?document.createElementNS(n.a,e):e}return e.prototype.removeNode=function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},Object.defineProperty(e.prototype,"transformString",{get:function(){if(this.node)return this._transformString},enumerable:!0,configurable:!0}),e.prototype.transform=function(){var e="translate("+this._x+","+this._y+")";if(1!=this._scale&&(e+=(e?" ":"")+"scale("+this._scale+")"),0!=this._rotation){var t="rotate("+this._rotation+")";this._rotationX&&this._rotationY&&(t="rotate("+this._rotation+" "+this._rotationX+" "+this._rotationY+")"),e+=(e?" ":"")+t}this._transformString=e,this.node.setAttribute("transform",e)},e.prototype.getBBox=function(){var e={width:0,height:0,x:0,y:0};if(this.node&&this.node.parentNode)try{var t=this.node.getBBox();e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height}catch(i){}return e},e.prototype.moveTo=function(e){if(e){var t=e.x,i=e.y;this._x==t&&this._y==i||(this._x=t,this._y=i,this.transform())}},Object.defineProperty(e.prototype,"content",{get:function(){return this.node.innerHTML||""},set:function(e){this.node.innerHTML=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.node.textContent||""},set:function(e){this.node.textContent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x!=e&&(this._x=e,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y!=e&&(this._y=e,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!=e&&(this._rotation=e,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this._rotationX},set:function(e){this._rotationX!=e&&(this._rotationX=e,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{get:function(){return this._rotationY},set:function(e){this._rotationY!=e&&(this._rotationY=e,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(e){this._scale!=e&&(this._scale=e,this.transform())},enumerable:!0,configurable:!0}),e.prototype.removeAttr=function(e){this.node.removeAttribute(e)},e.prototype.attr=function(e){var t=this;return r.d(e,(function(e,i){a.d(i)?t.node.setAttribute(e,i):t.node.removeAttribute(e)})),this},e.prototype.getAttr=function(e){return this.node.getAttribute(e)},e.prototype.attrNS=function(e,t,i){return this.node.setAttributeNS(e,t,i),this},e.prototype.getAttrNS=function(e,t){return this.node.getAttributeNS(e,t)},e.prototype.removeStyle=function(e){this.node.style[e]=null,delete this.node.style[e]},e.prototype.getStyle=function(e){return this.node.style[e]},e.prototype.addStyle=function(e){var t=this;return r.d(e,(function(e,i){a.d(i)?t.node.style[e]=i:t.removeStyle(e)})),this},e.prototype.addClass=function(e){n.e(this.node,e)},e.prototype.removeClass=function(e){n.s(this.node,e)},e.prototype.setClass=function(e){this.node.setAttribute("class",e)},e.prototype.removeChildNodes=function(){for(;this.node.childNodes.length>0;)this.node.removeChild(this.node.firstChild)},e.prototype.isDisposed=function(){return this._isDisposed},e.prototype.dispose=function(){this.removeNode()},e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(2),r=i(16),a=i(13),o=i(3),s=i(4),l=i(1),u=function(e){function t(){var t=e.call(this)||this;return t._distance=0,t.className="Polyline",t.element=t.paper.add("path"),t.shapeRendering="auto",t.fill=Object(a.b)(),t.strokeOpacity=1,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.makePath=function(){this._distance=0;var e=this.segments;if(e&&e.length>0){for(var t="",i=0,n=e.length;i<n;i++){var r=e[i];if(r.length>0){t+=s.g(r[0]);for(var a=1;a<r.length;a++){var o=r[a];t+=s.f(o),this._distance+=l.q(r[a-1],o)}}}this.path=t}this._realSegments=e},Object.defineProperty(t.prototype,"segments",{get:function(){return this.getPropertyValue("segments")},set:function(e){this.setPropertyValue("segments",e),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e){var t=0;e<0&&(e=Math.abs(e),t=180);var i=this._realSegments;if(i){for(var n=this.distance,r=0,a=0,o=0,s=void 0,u=void 0,c=0;c<i.length;c++){var h=i[c];if(h.length>1){for(var p=1;p<h.length;p++)if(s=h[p-1],u=h[p],a=r/n,o=(r+=l.q(s,u))/n,a<=e&&o>e){c=i.length;break}}else 1==h.length&&(s=h[0],u=h[0],a=0,o=1)}if(s&&u){var d=(e-a)/(o-a),f=l.s(s,u,d);return{x:f.x,y:f.y,angle:t+l.j(s,u)}}}return{x:0,y:0,angle:0}},Object.defineProperty(t.prototype,"realSegments",{get:function(){return this._realSegments},enumerable:!0,configurable:!0}),t}(r.a);o.b.registeredClasses.Polyline=u},function(e,t,i){"use strict";var n=i(254);t.a=function(e,t){return t?Object(n.a)(e,t,{clone:!1}):e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(2),r=i(105),a=i(11),o=i(0),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contentType="application/json",t.options={},t}return Object(n.c)(t,e),t.isJSON=function(e){try{return JSON.parse(e),!0}catch(t){return!1}},t.prototype.parse=function(e){var t,i=this;try{o.d(JSON)&&(t=JSON.parse(e))}catch(h){return}var n=o.d(this.options.emptyAs),r=this.parsableNumbers,s=this.parsableDates;if(Array.isArray(t)&&(r||s||n))for(var l=function(e,o){var l=t[e];a.d(l,(function(e,t){n&&(l[e]=i.maybeToEmpty(l[e])),r&&(l[e]=i.maybeToNumber(e,l[e])),s&&(l[e]=i.maybeToDate(e,l[e]))}))},u=0,c=t.length;u<c;u++)l(u);return t},t}(r.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(2),r=i(16),a=i(3),o=i(1),s=function(e){function t(){var t=e.call(this)||this;return t.className="Rectangle",t.element=t.paper.add("rect"),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this._positionPrecision;this.pixelPerfect&&(t=0);var i=o.E(this.innerWidth,t),n=o.E(this.innerHeight,t);this.element.attr({width:i,height:n})},t.prototype.measureElement=function(){},Object.defineProperty(t.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),t}(r.a);a.b.registeredClasses.Rectangle=s},function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i(2),r=i(18),a=i(118),o=i(59),s=i(22),l=i(36),u=i(45),c=i(3),h=i(50),p=i(20),d=i(9),f=i(1),m=i(41),y=i(0),v=i(6),g=function(e){function t(){var t=e.call(this)||this;t._previousStart=0,t._previousEnd=1,t._prevStart=0,t._prevEnd=1,t._isBusy=!1,t._skipRangeEvents=!1,t.updateWhileMoving=!0,t.className="Scrollbar",t.minHeight=12,t.minWidth=12,t.animationDuration=0,t.animationEasing=m.b,t.margin(10,10,10,10);var i=new p.a,n=t.background;return n.cornerRadius(10,10,10,10),n.fill=i.getFor("fill"),n.fillOpacity=.5,t.showSystemTooltip=!0,t.startGrip=new a.a,t.endGrip=new a.a,t.events.on("transformed",(function(){t.updateThumb()}),t,!1),t.start=0,t.end=1,t.role="scrollbar",t.thumb.role="slider",t.thumb.readerLive="polite",t.startGrip.role="slider",t.endGrip.role="slider",t.events.once("inited",(function(){t._previousStart=void 0,t.dispatchRangeChange()}),void 0,!1),t.hideGrips=!1,t.orientation="horizontal",t.setSVGAttribute({"aria-valuemin":"0"}),t.setSVGAttribute({"aria-valuemax":"100"}),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),"horizontal"===this.orientation?(y.d(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB to select grip buttons or left and right arrows to change selection")),y.d(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use left and right arrows to move selection")),y.d(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use left and right arrows to move left selection")),y.d(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use left and right arrows to move right selection")),this.readerOrientation="horizontal"):(y.d(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB select grip buttons or up and down arrows to change selection")),y.d(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use up and down arrows to move selection")),y.d(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use up and down arrows to move upper selection")),y.d(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use up and down arrows to move lower selection")),this.readerOrientation="vertical"),this.readerControls=this.baseSprite.uidAttr()},t.prototype.validateLayout=function(){this.updateSize(),e.prototype.validateLayout.call(this),this.updateExtremes()},t.prototype.processBackground=function(){e.prototype.processBackground.call(this);var t=this.background;t.clickable=!0,t.events.on("hit",this.handleBgHit,this,void 0)},t.prototype.handleBgHit=function(e){this.makeBusy();var t=e.spritePoint;t=v.I(t,this.background,this);var i=this.thumb;if("horizontal"==this.orientation){var n=t.x-i.pixelWidth/2;n=f.i(n,0,this.innerWidth-i.pixelWidth),this._thumbAnimation=i.animate({property:"x",to:n},this.animationDuration,this.animationEasing)}else{var r=t.y-i.pixelHeight/2;r=f.i(r,0,this.innerHeight-i.pixelHeight),this._thumbAnimation=i.animate({property:"y",to:r},this.animationDuration,this.animationEasing)}this.animationDuration>0?this._thumbAnimation.events.on("animationended",this.makeUnbusy,this,!1):(this._thumb.validate(),this.makeUnbusy())},t.prototype.makeBusy=function(){this._isBusy=!0,this._skipRangeEvents=!1,this._unbusyTimeout&&this.removeDispose(this._unbusyTimeout),this._unbusyTimeout=void 0,this.stopAnimations()},t.prototype.stopAnimations=function(){this._thumbAnimation&&this._thumbAnimation.stop(!0),this._zoomAnimation&&this._zoomAnimation.stop(!0)},t.prototype.makeUnbusy=function(){this._unbusyTimeout=this.setTimeout(this.makeUnbusyReal.bind(this),1.1*this.animationDuration)},t.prototype.makeUnbusyReal=function(){this._usingGrip=void 0,this._isBusy=!1,this.updateWhileMoving||this.dispatchRangeChange()},t.prototype.dispatchRangeChange=function(){this._previousEnd==this.end&&this._previousStart==this.start||(this._previousStart=this.start,this._previousEnd=this.end,this.dispatch("rangechanged"))},t.prototype.updateThumb=function(e){if(void 0===e&&(e=!0),this.parent){var t=this.thumb,i=this.start,n=this.end,r=this.startGrip,a=this.endGrip;if("horizontal"==this.orientation){var o=this.innerWidth;t.width=o*(n-i),t.maxX=o-t.pixelWidth,t.x=i*o,r.moveTo({x:t.pixelX,y:0},void 0,void 0,!0),a.moveTo({x:t.pixelX+t.pixelWidth,y:0},void 0,void 0,!0),r.readerTitle=this.language.translate("From %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*i)+"%",position:i}).value),r.readerValueNow=""+Math.round(100*i),r.readerValueText=r.readerTitle,a.readerTitle=this.language.translate("To %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*n)+"%",position:n}).value),a.readerValueNow=""+Math.round(100*n),a.readerValueText=a.readerTitle}else{var s=this.innerHeight;t.height=s*(n-i),t.maxY=s-t.pixelHeight,t.y=(1-n)*s,r.moveTo({x:0,y:t.pixelY+t.pixelHeight},void 0,void 0,!0),a.moveTo({x:0,y:t.pixelY},void 0,void 0,!0),r.readerTitle=this.language.translate("To %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*(1-i))+"%",position:1-i}).value),r.readerValueNow=""+Math.round(100*i),r.readerValueText=r.readerTitle,a.readerTitle=this.language.translate("From %1",void 0,this.adapter.apply("positionValue",{value:Math.round(100*(1-n))+"%",position:1-n}).value),a.readerValueNow=""+Math.round(100*n),a.readerValueText=a.readerTitle}t.readerTitle=this.language.translate("From %1 to %2",void 0,this.adapter.apply("positionValue",{value:Math.round(100*i)+"%",position:i}).value,this.adapter.apply("positionValue",{value:Math.round(100*n)+"%",position:n}).value),t.readerValueNow=""+Math.round(100*i),t.readerValueText=t.readerTitle,this.readerValueNow=""+Math.round(100*i),this.readerValueText=t.readerTitle,!this._skipRangeEvents&&this.updateWhileMoving&&e&&this.dispatchRangeChange()}},t.prototype.updateExtremes=function(){var e=0,t=0,i=0,n=0;"horizontal"==this.orientation?(i=this.innerWidth,t=n=this.innerHeight/2):(n=this.innerHeight,e=i=this.innerWidth/2);var r=this.startGrip;r.minX=e,r.maxX=i,r.minY=t,r.maxY=n;var a=this.endGrip;a.minX=e,a.maxX=i,a.minY=t,a.maxY=n;var o=this.thumb;o.minX=e,o.maxX=i,o.minY=t,o.maxY=n},t.prototype.updateSize=function(){var e=this.orientation,t=this.startGrip;t&&(t.orientation=e),this.endGrip&&(this.endGrip.orientation=e);var i=this.thumb;i&&("horizontal"==e?(y.h(this._pixelWidth)||this.width instanceof d.a||(this.width=Object(d.c)(100)),y.d(this.percentHeight)&&(this.height=this.minHeight),i.height=this.innerHeight,i.verticalCenter="middle",i.horizontalCenter="left"):(y.h(this._pixelHeight)||this.height instanceof d.a||(this.height=Object(d.c)(100)),y.d(this.percentWidth)&&(this.width=this.minWidth),i.width=this.innerWidth,i.verticalCenter="top",i.horizontalCenter="middle"))},Object.defineProperty(t.prototype,"isBusy",{get:function(){return this._isBusy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"start",{get:function(){return Math.min(this.getPosition(this._start),this.getPosition(this._end))},set:function(e){this._isBusy||(this.__start=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"__start",{get:function(){return this._start},set:function(e){this._start=this.getPosition(e),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return Math.max(this.getPosition(this._start),this.getPosition(this._end))},set:function(e){this._isBusy||(this.__end=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"__end",{get:function(){return this._end},set:function(e){this._end=this.getPosition(e),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return{start:this.start,end:this.end,priority:this._usingGrip}},enumerable:!0,configurable:!0}),t.prototype.skipRangeEvents=function(){this._isBusy||(this._skipRangeEvents=!0)},t.prototype.fixRange=function(e){e.start==f.E(this._start,2)&&e.end==f.E(this._end,2)||(this._start=e.start,this._end=e.end,this._skipRangeEvents=!0,this.updateThumb(),this._skipRangeEvents=!1,this.thumb.validate(),this.thumb.background.validate())},t.prototype.getPosition=function(e){return f.i(f.E(e,4),0,1)},Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e)&&("horizontal"===e?(this.startGrip.cursorOverStyle=l.a.horizontalResize,this.endGrip.cursorOverStyle=l.a.horizontalResize):(this.startGrip.cursorOverStyle=l.a.verticalResize,this.endGrip.cursorOverStyle=l.a.verticalResize),this.updateByOrientation(),this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.updateByOrientation=function(){},Object.defineProperty(t.prototype,"startGrip",{get:function(){return this._startGrip},set:function(e){this._startGrip&&this.removeDispose(this._startGrip),this._startGrip=e,this.processGrip(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endGrip",{get:function(){return this._endGrip},set:function(e){this._endGrip&&this.removeDispose(this._endGrip),this._endGrip=e,this.processGrip(e)},enumerable:!0,configurable:!0}),t.prototype.processGrip=function(e){e.parent=this,e.isMeasured=!1,e.focusable=!0,e.shouldClone=!1,e.zIndex=100,e.events.on("drag",this.handleGripDrag,this,!1),e.events.on("dragstop",this.makeUnbusy,this,!1),e.events.on("down",this.makeBusy,this,!1),e.events.on("up",this.makeUnbusy,this,!1),this._disposers.push(e)},t.prototype.handleGripDrag=function(e){this.makeBusy(),e.target===this._startGrip?this._usingGrip="start":this._usingGrip="end","horizontal"==this.orientation?(this._start=this.startGrip.pixelX/this.innerWidth,this._end=this.endGrip.pixelX/this.innerWidth):(this._start=1-this.startGrip.pixelY/this.innerHeight,this._end=1-this.endGrip.pixelY/this.innerHeight),this.updateThumb()},Object.defineProperty(t.prototype,"thumb",{get:function(){if(!this._thumb){var e=new o.a;e.background.cornerRadius(10,10,10,10),e.padding(0,0,0,0),this.thumb=e}return this._thumb},set:function(e){var t=this;e&&(this._thumb&&this.removeDispose(this._thumb),this._thumb=e,e.parent=this,e.isMeasured=!1,e.inert=!0,e.draggable=!0,e.clickable=!0,e.hoverable=!0,e.focusable=!0,e.shouldClone=!1,e.zIndex=0,e.cursorOverStyle=l.a.grab,e.cursorDownStyle=l.a.grabbing,e.events.on("dragstart",this.makeBusy,this,!1),e.events.on("dragstop",this.makeUnbusy,this,!1),e.events.on("positionchanged",this.handleThumbPosition,this,!1),e.events.on("sizechanged",this.handleThumbPosition,this,!1),e.events.on("doublehit",this.handleDoubleClick,this,!1),this._disposers.push(Object(s.a)().body.events.on("keyup",(function(e){h.a.isKey(e.event,["space","enter"])&&t.thumb.isFocused&&(e.event.preventDefault(),t.handleDoubleClick())}))),this._disposers.push(this._thumb))},enumerable:!0,configurable:!0}),t.prototype.handleDoubleClick=function(){this.makeBusy();var e=0,t=1;0!=this.start||1!=this.end?(this._prevStart=this.start,this._prevEnd=this.end):(e=this._prevStart,t=this._prevEnd);var i=this.animate([{property:"__start",to:e},{property:"__end",to:t}],this.animationDuration,this.animationEasing);i&&!i.isFinished()?(i.events.on("animationended",this.makeUnbusy,this,!1),this._zoomAnimation=i):this.makeUnbusy()},t.prototype.handleThumbPosition=function(){var e=this.thumb;if("horizontal"==this.orientation){var t=this.innerWidth,i=e.innerWidth,n=e.pixelX;this._start=n/t,this._end=(n+i)/t,this.updateThumb()}else{var r=this.innerHeight,a=e.innerHeight,o=e.pixelY;this._start=1-(o+a)/r,this._end=1-o/r,this.updateThumb()}},t.prototype.createBackground=function(){return new u.a},Object.defineProperty(t.prototype,"hideGrips",{get:function(){return this._hideGrips},set:function(e){var t=this;this._hideGrips=e,this._overDisposer&&this.removeDispose(this._overDisposer),this._outDisposer&&this.removeDispose(this._outDisposer),e?(this._overDisposer=this.events.on("over",(function(){t.startGrip.show(),t.endGrip.show()}),void 0,!1),this._outDisposer=this.events.on("out",(function(){t.startGrip.hide(),t.endGrip.hide()}),void 0,!1),this.startGrip.hide(),this.endGrip.hide()):(this.startGrip.show(),this.endGrip.show())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(e){this.setPropertyValue("animationDuration",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(e){this.setPropertyValue("animationEasing",e)},enumerable:!0,configurable:!0}),t.prototype.asFunction=function(t){return"animationEasing"==t||e.prototype.asIs.call(this,t)},t}(r.a);c.b.registeredClasses.Scrollbar=g},function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i(2),r=i(18),a=i(3),o=i(136),s=i(38),l=i(37),u=i(13),c=i(138),h=i(1),p=i(41),d=i(6),f=function(e){function t(){var t=e.call(this)||this;t._boundingRect={x:-4e4,y:-4e4,width:8e4,height:8e4},t._pointTo={x:0,y:0},t.fitPointerToBounds=!1,t._verticalOrientation="up",t.fixDoc=!0,t.className="Tooltip",t.isMeasured=!1,t.getFillFromObject=!0,t.margin(5,5,5,5),t.defaultState.transitionDuration=1,t.hiddenState.transitionDuration=1;var i=t.background;i.interactionsEnabled=!1,i.fillOpacity=.9,i.strokeWidth=1,i.strokeOpacity=1,i.stroke=Object(u.b)("#ffffff"),i.cornerRadius=3,i.pointerLength=6,i.pointerBaseWidth=10;var n=new c.a;n.dy=1,n.dx=1,n.opacity=.5,i.filters.push(n),t.autoTextColor=!0;var r=t.createChild(s.a);return r.shouldClone=!1,t.label=r,r.padding(7,12,4,12),r.interactionsEnabled=!1,r.horizontalCenter="middle",r.fill=Object(u.b)("#ffffff"),t._disposers.push(r),t.label.events.on("sizechanged",t.drawBackground,t),t.label.zIndex=1,t.pointerOrientation="vertical",t.animationDuration=0,t.animationEasing=p.b,t.setPropertyValue("showInViewport",!1),t.role="tooltip",t.visible=!1,t.opacity=0,t.x=0,t.y=0,t.events.on("visibilitychanged",t.handleVisibility,t),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.handleVisibility=function(){this.visible&&this.label.invalidate()},Object.defineProperty(t.prototype,"getStrokeFromObject",{get:function(){return this.getPropertyValue("getStrokeFromObject")},set:function(e){this.setPropertyValue("getStrokeFromObject",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoTextColor",{get:function(){return this.getPropertyValue("autoTextColor")},set:function(e){this.setPropertyValue("autoTextColor",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepTargetHover",{get:function(){return this.getPropertyValue("keepTargetHover")},set:function(e){var t=this;this.setPropertyValue("keepTargetHover",e,!0)&&e&&(this.hoverable=!0,this.background.interactionsEnabled=!0,this._disposers.push(this.events.on("over",(function(e){t.targetSprite&&t.targetSprite.hoverable&&(t.targetSprite.isHover=!0)}))),this._disposers.push(this.events.on("out",(function(e){t.targetSprite&&t.targetSprite.hoverable&&(t.targetSprite.isHover=!1)}))))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showInViewport",{get:function(){return this.getPropertyValue("showInViewport")},set:function(e){this.setPropertyValue("showInViewport",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getFillFromObject",{get:function(){return this.getPropertyValue("getFillFromObject")},set:function(e){this.setPropertyValue("getFillFromObject",e,!0)},enumerable:!0,configurable:!0}),t.prototype.createBackground=function(){return new o.a},Object.defineProperty(t.prototype,"pointerOrientation",{get:function(){return this.getPropertyValue("pointerOrientation")},set:function(e){this.setPropertyValue("pointerOrientation",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(e){this.setPropertyValue("animationDuration",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(e){this.setPropertyValue("animationEasing",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"html",{get:function(){return this.label.html},set:function(e){this.label.html!=e&&(this.label.html=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.label.text},set:function(e){this.label.text!=e&&(this.label.text=e,this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.label;t.invalid&&t.validate();var i,n,r=this._pointTo.x,a=this._pointTo.y,o=this._boundingRect,s=t.measuredWidth,l=t.measuredHeight,u=this.background.pointerLength;if(this.ignoreBounds&&(o=void 0),o&&this.fixDoc&&s>o.width){d.H({x:o.x,y:o.y},this.parent);var c=d.H({x:o.x+o.width,y:o.y+o.height},this.parent),p=document.body.offsetWidth;d.R(document.body.offsetHeight),c.x>p/2?o.x=o.width-s:o.width=o.x+s}var f=this.pointerOrientation;"horizontal"==f||"left"==f||"right"==f?(n=-l/2,i="horizontal"==f?o&&r>o.x+o.width/2?-s/2-u:s/2+u:"left"==f?s/2+u:-s/2-u):(o&&(i=h.i(0,o.x-r+s/2,o.x-r+o.width-s/2)),"vertical"==f?o&&a>o.y+l+u?(n=-l-u,this._verticalOrientation="up"):(n=u,this._verticalOrientation="down"):"down"==f?(n=-l-u,this._verticalOrientation="up"):(n=u,this._verticalOrientation="down")),o&&(n=h.i(n,o.y-a,o.y+o.height-l-a)),t.x=i,t.y=n,this.drawBackground()},t.prototype.updateBackground=function(){this.group.addToBack(this.background.group)},t.prototype.drawBackground=function(){var e=this.label,t=this.background,i=e.measuredWidth,n=e.measuredHeight,r=this._boundingRect,a=i,o=e.pixelX-i/2,s=n,l=e.pixelY,u=this._pointTo.x,c=this._pointTo.y,p=r.x-u,d=p+r.width,f=r.y-c,m=f+r.height;t.x=o,t.y=l,t.width=a,t.height=s,this.fitPointerToBounds?(t.pointerX=h.i(-t.x,p-t.x,d-t.x),t.pointerY=h.i(-t.y,f-t.y,m-t.y)):(t.pointerX=-t.x,t.pointerY=-t.y),t.validate()},t.prototype.delayedPointTo=function(e,t){var i=this;this._pointToDisposer&&this._pointToDisposer.dispose(),this._pointToDisposer=a.b.events.once("exitframe",(function(){i.pointTo(e,t)})),this.addDisposer(this._pointToDisposer)},t.prototype.pointTo=function(e,t){this._pointTo.x==e.x&&this._pointTo.y==e.y||(this._pointTo=e,this.invalidate(),!this.visible||t?(this.moveTo(this._pointTo),this._animation&&this._animation.kill()):0==this.pixelX&&0==this.pixelY?this.moveTo(this._pointTo):(this._animation&&this._animation.kill(),this._animation=new l.a(this,[{property:"x",to:e.x,from:this.pixelX},{property:"y",to:e.y,from:this.pixelY}],this.animationDuration,this.animationEasing).start()))},t.prototype.setBounds=function(e){var t=this._boundingRect;t.x==e.x&&t.y==e.y&&t.width==e.width&&t.height==e.height||(this._boundingRect=e,this.invalidate())},Object.defineProperty(t.prototype,"boundingContainer",{set:function(e){this._boundingContainer=e,e.events.on("sizechanged",this.updateBounds,this),e.events.on("positionchanged",this.updateBounds,this)},enumerable:!0,configurable:!0}),t.prototype.updateBounds=function(){var e=this._boundingContainer,t=d.K({x:e.pixelX,y:e.pixelY,width:e.maxWidth,height:e.maxHeight},e);this.setBounds(t)},Object.defineProperty(t.prototype,"ignoreBounds",{get:function(){return this.getPropertyValue("ignoreBounds")},set:function(e){this.setPropertyValue("ignoreBounds",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalOrientation",{get:function(){return this._verticalOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.label.copyFrom(t.label),t._boundingRect&&(this._boundingRect=t._boundingRect)},t.prototype.asFunction=function(t){return"animationEasing"==t||e.prototype.asIs.call(this,t)},t}(r.a);a.b.registeredClasses.Tooltip=f},function(e,t,i){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(215)},function(e,t,i){"use strict";var n=i(222),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?o:s[e.$$typeof]||r}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,i,n){if("string"!==typeof i){if(f){var r=d(i);r&&r!==f&&e(t,r,n)}var o=c(i);h&&(o=o.concat(h(i)));for(var s=l(t),m=l(i),y=0;y<o.length;++y){var v=o[y];if(!a[v]&&(!n||!n[v])&&(!m||!m[v])&&(!s||!s[v])){var g=p(i,v);try{u(t,v,g)}catch(_){}}}}return t}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}));var n=i(2),r=i(23);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.a.verbose&&console&&console.log.apply(console,Object(n.f)(e))}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.a.suppressWarnings||console&&console.warn.apply(console,Object(n.f)(e))}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(0);function r(e,t,i){return new Promise((function(r,a){var o=n.d(i)&&"blob"==i.responseType,s=new XMLHttpRequest;if(s.onload=function(){if(200===s.status){var e,i=void 0;if(o)return e=s.response,void(l=e,new Promise((function(e,t){var i=new FileReader;i.onload=function(t){e(i.result)},i.onerror=function(e){t(e)},i.readAsText(l)}))).then((function(i){var n={xhr:s,error:!1,response:i,blob:e,type:s.getResponseHeader("Content-Type"),target:t};r(n)}));i=s.responseText||s.response;var n={xhr:s,error:!1,response:i,blob:e,type:s.getResponseHeader("Content-Type"),target:t};r(n)}else a({xhr:s,error:!0,type:s.getResponseHeader("Content-Type"),target:t});var l},s.onerror=function(){a({xhr:s,error:!0,type:s.getResponseHeader("Content-Type"),target:t})},s.open("GET",e,!0),i&&i.withCredentials&&(s.withCredentials=!0),n.d(i)){if(n.d(i.requestHeaders))for(var l=0;l<i.requestHeaders.length;l++){var u=i.requestHeaders[l];s.setRequestHeader(u.key,u.value)}n.d(i.responseType)&&(s.responseType=i.responseType)}s.send()}))}},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(2),r=i(105),a=i(0),o=i(7),s=[",",";","\t"],l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contentType="text/csv",t.options={delimiter:"",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1},t}return Object(n.c)(t,e),t.isCSV=function(e){return!!t.getDelimiterFromData(e)},t.getDelimiterFromData=function(e){var t,i=e.split("\n"),n=i.length;return o.d(s,(function(e){for(var r=0,a=0,o=0;o<n;++o){if(!((r=i[o].split(e).length)>1)){a=0;break}if(0===a)a=r;else if(r!=a){a=0;break}}a&&(t=e)})),t},t.prototype.parse=function(e){this.options.delimiter||(this.options.delimiter=t.getDelimiterFromData(e));var i,n,r,o=this.CSVToArray(e,this.options.delimiter),s=a.d(this.options.emptyAs),l=this.parsableNumbers,u=this.parsableDates,c=[],h=[];for(n=0;n<this.options.skipRows;n++)o.shift();if(this.options.useColumnNames){h=o.shift();for(var p=0;p<h.length;p++)""===(i=a.d(h[p])?h[p].replace(/^\s+|\s+$/gm,""):"")&&(i="col"+p),h[p]=i}for(;r=this.options.reverse?o.pop():o.shift();)if(!this.options.skipEmpty||1!==r.length||""!==r[0]){var d={};for(n=0;n<r.length;n++)d[i=void 0===h[n]?"col"+n:h[n]]=""===r[n]?this.options.emptyAs:r[n],s&&(d[i]=this.maybeToEmpty(d[i])),l&&(d[i]=this.maybeToNumber(i,d[i])),u&&(d[i]=this.maybeToDate(i,d[i]));c.push(d)}return c},t.prototype.CSVToArray=function(e,t){t=t||",";for(var i=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),n=[[]],r=null;r=i.exec(e);){var a=r[1];a.length&&a!==t&&n.push([]);var o=void 0;o=r[2]?r[2].replace(new RegExp('""',"g"),'"'):r[3],n[n.length-1].push(o)}return n},t}(r.a)},,function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i(2),r=i(26),a=i(3),o=i(32),s=i(12),l=i(13),u=i(9),c=i(6),h=i(41),p=i(11),d=i(0),f=function(e){function t(){var t=e.call(this)||this;return t.transitionDuration=0,t.transitionEasing=h.b,t.properties={},t.propertyFields={},t.filters=new s.a,t.isTemplate=!1,t.className="SpriteState",t._disposers.push(new s.b(t.filters)),t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"adapter",{get:function(){var e=this;return this._adapterO||(this._adapterO=new o.a(this),this._adapterO.events.on("inserted",(function(t){e[t.newValue.key]=e[t.newValue.key]}),void 0,!1),this._adapterO.events.on("removed",(function(t){e[t.newValue.key]=e[t.newValue.key]}),void 0,!1)),this._adapterO},enumerable:!0,configurable:!0}),t.prototype.getPropertyValue=function(e){var t=this.properties[e],i=this.sprite;if(i){var n=this.propertyFields[e];if(d.d(n)&&(i.dataItem&&(t=i.dataItem.dataContext[n]),void 0==t&&(t="__unset")),d.d(t))this._adapterO&&(t=this._adapterO.apply(e,t));else{var r=i.getPropertyValue(e);(t=this._adapterO?this._adapterO.apply(e,r):r)==r&&(t=void 0)}}return t},t.prototype.copyFrom=function(e){e&&e!=this&&(this.transitionDuration=e.transitionDuration,this.transitionEasing=e.transitionEasing,c.f(e.properties,this.properties),c.f(e.propertyFields,this.propertyFields),this.filters.copyFrom(e.filters),e._adapterO&&this.adapter.copyFrom(e._adapterO))},Object.defineProperty(t.prototype,"allValues",{get:function(){var e=this,t={};if(p.d(this.properties,(function(i,n){t[i]=e.getPropertyValue(i)})),this._adapterO){var i=this._adapterO.keys();p.d(i,(function(i,n){var r=e.getPropertyValue(n);t[n]=r}))}var n=this.propertyFields;return p.d(n,(function(i){var n=e.getPropertyValue(i);t[i]=n})),t},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.properties={},this.filters.clear()},t.prototype.processConfig=function(t){d.d(t)&&d.d(t.properties)&&p.d(t.properties,(function(e,i){d.j(i)&&(i.match(/^[0-9.\-]+\%$/)?t.properties[e]=Object(u.c)(d.l(i)):i.match(/^\#[0-9abcdef]{3,}$/i)&&(t.properties[e]=Object(l.c)(i)))})),e.prototype.processConfig.call(this,t)},t.prototype.asFunction=function(t){return"transitionEasing"==t||e.prototype.asIs.call(this,t)},t}(r.a);a.b.registeredClasses.SpriteState=f},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(93),r=i(85),a=i(32),o=i(92),s=i(7),l=new(function(){function e(){this.adapter=new a.a(this)}return e.prototype.load=function(e){var t=Array.isArray(e)?e:[e],i=s.l(t,(function(e){return e.dispatchImmediately("started"),e.dispatchImmediately("loadstarted"),o.a(e.url,e,e.requestOptions)}));Promise.all(i).then((function(e){s.d(e,(function(e){var t=e.target;t.dispatchImmediately("loadended"),e.error?t.events.isEnabled("error")&&t.events.dispatchImmediately("error",{type:"error",code:e.xhr.status,message:t.language.translate("Unable to load file: %1",null,t.url),target:t}):t.processData(e.response,e.type),t.dispatchImmediately("ended")}))})).catch((function(e){e.target&&(e.target.dispatchImmediately("loadended"),e.target.events.isEnabled("error")&&e.target.events.dispatchImmediately("error",{type:"error",code:e.xhr.status,message:e.target.language.translate("Unable to load file: %1",null,e.target.url),target:e.target}),e.target.dispatchImmediately("ended"))}))},e.prototype.getParserByType=function(e){var t=this.adapter.apply("getParserByType",{parser:null,type:e}).parser;return t||("csv"==e||"text/csv"==e||"application/vnd.ms-excel"==e?new n.a:"json"==e||"application/json"==e?new r.a:void 0)},e.prototype.getParserByData=function(e,t){var i=this.adapter.apply("getParserByData",{parser:null,data:e,type:t}).parser;if(!i){if(i=this.getParserByType(t))return i;if(r.a.isJSON(e))return this.getParserByType("json");if(n.a.isCSV(e))return this.getParserByType("csv")}return i},e}())},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(2),r=i(83),a=i(3),o=i(1),s=i(0),l=i(4),u=function(e){function t(){var t=e.call(this)||this;return t.className="Polyspline",t.tensionX=.5,t.tensionY=.5,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.makePath=function(){this._distance=0;var e=this.segments,t=this.tensionX,i=this.tensionY;if(this.allPoints=[],e&&e.length>0){var n="";this._realSegments=[];for(var r=0,a=e.length;r<a;r++){var s=e[r],u=[];if(this._realSegments.push(u),s.length>0){var c=s[0],h=s[s.length-1],p=!1;o.E(c.x,3)==o.E(h.x)&&o.E(c.y)==o.E(h.y)&&(p=!0),n+=l.g(s[0]);for(var d=0;d<s.length-1;d++){var f=s[d-1],m=s[d],y=s[d+1],v=s[d+2];0===d?f=s[d]:d==s.length-2&&(v=s[d+1]),v||(v=y),0===d?f=p?s[s.length-2]:s[r]:d==s.length-2&&(v=p?s[1]:s[d+1]);var g=o.n(f,m,y,v,t,i),_=o.o(f,m,y,v,t,i);n+=l.e(y,g,_);var b=1.2*Math.ceil(o.p(m,y,g,_,20)),x=m;if(b>0)for(var w=0;w<=b;w++){var k=o.t(m,y,g,_,w/b);if(k.x!=x.x||k.y!=x.y){u.push(k);var P=o.E(o.j(x,k),5);this._distance+=o.q(x,k),this.allPoints[Math.floor(this._distance)]={x:k.x,y:k.y,angle:P},x=k}}else u.push(f)}}var S=this.allPoints;if(S.length>1)for(var T=0;T<S.length;T++)if(!S[T])if(T>1)S[T]=S[T-1];else for(var C=1;C<S.length;C++)if(S[C]){S[T]=S[C];break}}this.path=n}},t.prototype.getClosestPointIndex=function(e){var t,i=this.allPoints,n=1/0;if(i.length>1)for(var r=1;r<i.length;r++){var a=o.q(e,i[r]);a<n&&(t=r,n=a)}return t},Object.defineProperty(t.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(e){this.setPropertyValue("tensionX",e),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(e){this.setPropertyValue("tensionY",e,!0),this.makePath()},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e,t){var i=0,n=this.allPoints,r=n.length;if(s.h(e)||(e=0),r>1){if(t&&r>3){if(e<0){e<-.01&&(e=-.01);var a=n[0],l=n[1];return{x:u=a.x-(a.x-l.x)*r*e,y:c=a.y-(a.y-l.y)*r*e,angle:o.j(a,l)}}if(e>1){e>1.01&&(e=1.01);var u,c;a=n[n.length-2],l=n[n.length-3];return{x:u=a.x+(a.x-l.x)*r*(e-1),y:c=a.y+(a.y-l.y)*r*(e-1),angle:o.j(a,{x:u,y:c})}}if(1==e){var h=n[n.length-1];return{x:h.x,y:h.y,angle:h.angle}}}else e<0&&(e=Math.abs(e),i=180),e>=1&&(e=.9999999999999);var p;return{x:(p=n[Math.floor(e*r)]).x,y:p.y,angle:p.angle+i}}return 1==r?{x:(p=n[0]).x,y:p.y,angle:p.angle}:{x:0,y:0,angle:0}},t}(r.a);a.b.registeredClasses.Polyspline=u},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(2),r=i(44),a=i(150),o=i(3),s=function(e){function t(){var t=e.call(this)||this;return t.className="LinearGradientModifier",t.gradient=new r.a,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.gradient=t.gradient.clone()},t}(a.a);o.b.registeredClasses.LinearGradientModifier=s},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(2),r=i(65),a=i(3),o=function(e){function t(){var t=e.call(this)||this;return t.className="DesaturateFilter",t.feColorMatrix=t.paper.add("feColorMatrix"),t.feColorMatrix.attr({type:"saturate"}),t.filterPrimitives.push(t.feColorMatrix),t.width=120,t.height=120,t.saturation=0,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"saturation",{get:function(){return this.properties.saturation},set:function(e){this.properties.saturation=e,this.feColorMatrix.attr({values:e.toString()})},enumerable:!0,configurable:!0}),t}(r.a);a.b.registeredClasses.DesaturateFilter=o},function(e,t,i){"use strict";i.d(t,"b",(function(){return m})),i.d(t,"a",(function(){return y}));var n=i(109),r=i(101),a=i(12),o=i(6),s=i(14),l=i(7),u=i(0),c=i(91),h=function(){function e(){var e=this;this._targets=[],this._observer=new ResizeObserver((function(t){l.d(t,(function(t){l.d(e._targets,(function(e){e.target===t.target&&e.callback()}))}))}))}return e.prototype.addTarget=function(e,t){this._observer.observe(e,{box:"content-box"}),this._targets.push({target:e,callback:t})},e.prototype.removeTarget=function(e){this._observer.unobserve(e),l.k(this._targets,(function(t){return t.target!==e}))},e}(),p=function(){function e(){this._targets=[]}return e.prototype.addTarget=function(t,i){var n=this;if(0===this._targets.length){var r=null;this._timer=requestAnimationFrame((function t(){var i=Date.now();(null===r||i>r+e.delay)&&(r=i,l.d(n._targets,(function(e){var t=e.target.getBoundingClientRect();t.width===e.size.width&&t.height===e.size.height||(e.size=t,e.callback())}))),n._timer=requestAnimationFrame(t)}))}var a=t.getBoundingClientRect();this._targets.push({target:t,callback:i,size:a})},e.prototype.removeTarget=function(e){l.k(this._targets,(function(t){return t.target!==e})),0===this._targets.length&&cancelAnimationFrame(this._timer)},e.delay=200,e}(),d=null;var f=function(){function e(e,t){this._disposed=!1,this._sensor=(null===d&&(d="undefined"!==typeof ResizeObserver?new h:new p),d),this._element=e,this._sensor.addTarget(e,t)}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element))},Object.defineProperty(e.prototype,"sensor",{get:function(){return this._sensor},enumerable:!0,configurable:!0}),e.prototype.reset=function(){c.b("resizeSensor.reset() is no longer needed and can be removed")},e}(),m=[],y=function(){function e(e,t){var i=this;this._disposed=!1,this.autoResize=!0,this.nonExportableSprites=[],this._disposers=[],this.cssScale=1,this._printing=!1,this.htmlElement=e,t||(this._printing=!1,this.initSensor(),this._disposers.push(s.f(window,"beforeprint",(function(){i._printing=!0}))),this._disposers.push(s.f(window,"afterprint",(function(){i._printing=!1})))),m.push(this);var n=document.createElement("div"),r=n.style;r.width="100%",r.height="100%",r.position="relative",e.appendChild(n),this.SVGContainer=n}return e.prototype.initSensor=function(){var e=this;this.resizeSensor&&this.resizeSensor.dispose();this.resizeSensor=new f(this.htmlElement,(function(){e.autoResize&&!e._printing&&e.measure()})),this._disposers.push(this.resizeSensor)},e.prototype.measure=function(){var e=o.S(this.htmlElement),t=o.v(this.htmlElement),i=this.container;i&&(this.width==e&&this.height==t||(this.width=e,this.height=t,e>0&&(i.maxWidth=e),t>0&&(i.maxHeight=t),s.l(this.SVGContainer)),i.maxWidth||(i.maxWidth=0),i.maxHeight||(i.maxHeight=0),this.cssScale=1,this.checkTransform(this.htmlElement))},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(e){this._container=e,this.measure()},enumerable:!0,configurable:!0}),e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||l.o(m,this),l.d(this._disposers,(function(e){e.dispose()}))},Object.defineProperty(e.prototype,"hideOverflow",{set:function(e){this.SVGContainer.style.overflow=e?"hidden":""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return u.d(this._modal)||(this._modal=new r.a,this._modal.container=this.SVGContainer,this._disposers.push(this._modal)),this._modal},enumerable:!0,configurable:!0}),e.prototype.openModal=function(e,t){this.closeModal();var i=this.modal;return i.content=e,i.readerTitle=t||"",i.title=t||"",i.open(),i},e.prototype.closeModal=function(){this._modal&&this.modal.close()},Object.defineProperty(e.prototype,"popups",{get:function(){if(!u.d(this._popups)){var e=new n.a;e.container=this.SVGContainer,this._popups=new a.c(e),this._disposers.push(new a.b(this._popups)),this._disposers.push(this._popups.template)}return this._popups},enumerable:!0,configurable:!0}),e.prototype.openPopup=function(e,t){var i=this.popups.create();return i.content=e,u.d(t)&&(i.title=t),i.open(),i},e.prototype.closeAllPopups=function(){this.popups.each((function(e){e.close()}))},Object.defineProperty(e.prototype,"readerAlertElement",{get:function(){if(!u.d(this._readerAlertElement)){var e=document.createElement("div");e.setAttribute("role","alert"),e.style.zIndex="-100000",e.style.opacity="0",e.style.position="absolute",e.style.top="0",this.SVGContainer.appendChild(e),this._readerAlertElement=e}return this._readerAlertElement},enumerable:!0,configurable:!0}),e.prototype.readerAlert=function(e){this.readerAlertElement.innerHTML=e},e.prototype.checkTransform=function(e){if(window.getComputedStyle){if(e&&e.style){var t=window.getComputedStyle(e,null);if(t){var i=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(i&&"none"!==i){var n=i.split("(")[1].split(")")[0].split(","),r=Number(n[0]),a=Number(n[1]),o=Math.sqrt(r*r+a*a);isNaN(o)||(this.cssScale*=o)}}}e.parentNode&&e.parentNode instanceof HTMLElement&&this.checkTransform(e.parentNode)}},e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(2),r=i(109),a=i(32),o=function(e){function t(){var t=e.call(this)||this;return t.adapter=new a.a(t),t.className="Modal",t.showCurtain=!0,t.draggable=!1,t}return Object(n.c)(t,e),t}(r.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(2),r=i(53),a=i(26),o=i(54),s=i(3),l=i(28),u=i(11),c=i(6),h=i(0),p=i(1),d=function(e){function t(){var t=e.call(this)||this;return t._negativeBase=0,t._numberFormat="#,###.#####",t._outputFormat="svg",t._smallNumberThreshold=1,t._forceLTR=!1,t.className="NumberFormatter",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this.language&&this.language.dispose()},Object.defineProperty(t.prototype,"language",{get:function(){return this._language||(this.sprite?this._language=this.sprite.language:this._language=new r.a),this._language},set:function(e){this._language=e},enumerable:!0,configurable:!0}),t.prototype.format=function(e,t,i){var n;("undefined"===typeof t||h.j(t)&&"number"===t.toLowerCase())&&(t=this._numberFormat);var r=Number(e);if(h.i(t))try{return this.intlLocales?new Intl.NumberFormat(this.intlLocales,t).format(r):new Intl.NumberFormat(void 0,t).format(r)}catch(s){return"Invalid"}else{t=c.d(t);var a=this.parseFormat(t,this.language),o=void 0;o=r>this._negativeBase?a.positive:r<this._negativeBase?a.negative:a.zero,h.d(i)&&!o.mod&&((o=u.a(o)).decimals.active=0==r?0:i),n=o.template.split(l.d).join(this.applyFormat(r,o))}return this.forceLTR&&(n="\u200e"+n),n},t.prototype.parseFormat=function(e,t){var i=this,n=this.getCache(e);if(h.d(n))return n;var r={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:t.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:t.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:t.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:t.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:t.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:t.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1}},a=(e=e.replace("||",l.e)).split("|");return r.positive.source=a[0],"undefined"===typeof a[2]?r.zero=r.positive:r.zero.source=a[2],"undefined"===typeof a[1]?r.negative=r.positive:r.negative.source=a[1],u.d(r,(function(e,t){if(!t.parsed)if("undefined"===typeof i.getCache(t.source)){var n=t.source;"number"===n.toLowerCase()&&(n=h.j(i._numberFormat)?i._numberFormat:"#,###.#####");for(var a=Object(o.a)().chunk(n,!0),s=0;s<a.length;s++){var u=a[s];if(u.text=u.text.replace(l.e,"|"),"value"===u.type){var c=u.text.match(/[#0.,]+[ ]?[abesABES%!]?[abesABES\u2030!]?/);if(c)if(null===c||""===c[0])t.template+=u.text;else{var p=c[0].match(/[abesABES%\u2030!]{2}|[abesABES%\u2030]{1}$/);p&&(t.mod=p[0].toLowerCase(),t.modSpacing=!!c[0].match(/[ ]{1}[abesABES%\u2030!]{1}$/));var d=c[0].split(".");if(""===d[0]);else{t.thousands.active=(d[0].match(/0/g)||[]).length,t.thousands.passive=(d[0].match(/\#/g)||[]).length+t.thousands.active;var f=d[0].split(",");1===f.length||(t.thousands.interval=h.b(f.pop()).length,0===t.thousands.interval&&(t.thousands.interval=-1))}"undefined"===typeof d[1]||(t.decimals.active=(d[1].match(/0/g)||[]).length,t.decimals.passive=(d[1].match(/\#/g)||[]).length+t.decimals.active),t.template+=u.text.split(c[0]).join(l.d)}}else t.template+=u.text}i.setCache(t.source,t),t.parsed=!0}else r[e]=i.getCache(t.source)})),this.setCache(e,r),r},t.prototype.applyFormat=function(e,t){var i=e<0;e=Math.abs(e);var n="",r="",a=t.mod?t.mod.split(""):[];if(-1!==a.indexOf("b")){var o=this.applyPrefix(e,this.bytePrefixes,-1!==a.indexOf("!"));e=o[0],n=o[1],r=o[2],t.modSpacing&&(r=" "+r)}else if(-1!==a.indexOf("a")){var s=this.applyPrefix(e,e<this.smallNumberThreshold?this.smallNumberPrefixes:this.bigNumberPrefixes,-1!==a.indexOf("!"));e=s[0],n=s[1],r=s[2],t.modSpacing&&(r=" "+r)}else if(-1!==a.indexOf("%")){var l=p.C(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(l)),r="%"}else if(-1!==a.indexOf("\u2030")){l=p.C(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(l)),r="\u2030"}if(-1!==a.indexOf("e")){var u=void 0;u=t.decimals.passive>=0?e.toExponential(t.decimals.passive).split("e"):e.toExponential().split("e"),e=Number(u[0]),r="e"+u[1],t.modSpacing&&(r=" "+r)}else if(0===t.decimals.passive)e=Math.round(e);else if(t.decimals.passive>0){var h=Math.pow(10,t.decimals.passive);e=Math.round(e*h)/h}var d="",f=c.A(e).split("."),m=f[0];if(m.length<t.thousands.active&&(m=Array(t.thousands.active-m.length+1).join("0")+m),t.thousands.interval>0){for(var y=[],v=m.split("").reverse().join(""),g=0,_=m.length;g<=_;g+=t.thousands.interval){var b=v.substr(g,t.thousands.interval).split("").reverse().join("");""!==b&&y.unshift(b)}m=y.join(t.thousands.separator)}d+=m,1===f.length&&f.push("");var x=f[1];return x.length<t.decimals.active&&(x+=Array(t.decimals.active-x.length+1).join("0")),""!==x&&(d+=t.decimals.separator+x),""===d&&(d="0"),0!==e&&i&&-1===a.indexOf("s")&&(d="-"+d),n&&(d=n+d),r&&(d+=r),d},t.prototype.applyPrefix=function(e,t,i){void 0===i&&(i=!1);for(var n=e,r="",a="",o=!1,s=1,l=0,u=t.length;l<u;l++)t[l].number<=e&&(0===t[l].number?n=0:(n=e/t[l].number,s=t[l].number),r=t[l].prefix,a=t[l].suffix,o=!0);return!o&&i&&t.length&&0!=e&&(n=e/t[0].number,r=t[0].prefix,a=t[0].suffix,o=!0),o&&(n=parseFloat(n.toPrecision(p.C(s.toString().length+Math.floor(n).toString().replace(/[^0-9]*/g,"").length,21)))),[n,r,a]},t.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(t.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(e){this._numberFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(e){this._intlLocales=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"negativeBase",{get:function(){return this._negativeBase},set:function(e){this._negativeBase=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bigNumberPrefixes",{get:function(){return h.d(this._bigNumberPrefixes)||(this._bigNumberPrefixes=[{number:1e3,suffix:this.language.translate("_big_number_suffix_3")},{number:1e6,suffix:this.language.translate("_big_number_suffix_6")},{number:1e9,suffix:this.language.translate("_big_number_suffix_9")},{number:1e12,suffix:this.language.translate("_big_number_suffix_12")},{number:1e15,suffix:this.language.translate("_big_number_suffix_15")},{number:1e18,suffix:this.language.translate("_big_number_suffix_18")},{number:1e21,suffix:this.language.translate("_big_number_suffix_21")},{number:1e24,suffix:this.language.translate("_big_number_suffix_24")}]),this._bigNumberPrefixes},set:function(e){this._bigNumberPrefixes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smallNumberPrefixes",{get:function(){return h.d(this._smallNumberPrefixes)||(this._smallNumberPrefixes=[{number:1e-24,suffix:this.language.translate("_small_number_suffix_24")},{number:1e-21,suffix:this.language.translate("_small_number_suffix_21")},{number:1e-18,suffix:this.language.translate("_small_number_suffix_18")},{number:1e-15,suffix:this.language.translate("_small_number_suffix_15")},{number:1e-12,suffix:this.language.translate("_small_number_suffix_12")},{number:1e-9,suffix:this.language.translate("_small_number_suffix_9")},{number:1e-6,suffix:this.language.translate("_small_number_suffix_6")},{number:.001,suffix:this.language.translate("_small_number_suffix_3")}]),this._smallNumberPrefixes},set:function(e){this._smallNumberPrefixes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smallNumberThreshold",{get:function(){return this._smallNumberThreshold},set:function(e){this._smallNumberThreshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bytePrefixes",{get:function(){return h.d(this._bytePrefixes)||(this._bytePrefixes=[{number:1,suffix:this.language.translate("_byte_suffix_B")},{number:1024,suffix:this.language.translate("_byte_suffix_KB")},{number:1048576,suffix:this.language.translate("_byte_suffix_MB")},{number:1073741824,suffix:this.language.translate("_byte_suffix_GB")},{number:1099511627776,suffix:this.language.translate("_byte_suffix_TB")},{number:0x4000000000000,suffix:this.language.translate("_byte_suffix_PB")}]),this._bytePrefixes},set:function(e){this._bytePrefixes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(e){this._outputFormat=e.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forceLTR",{get:function(){return this._forceLTR},set:function(e){this._forceLTR=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),t.prototype.escape=function(e){return e.replace("||",l.e)},t.prototype.unescape=function(e){return e.replace(l.e,"|")},t}(a.a);s.b.registeredClasses.NumberFormatter=d},function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(2),r=i(53),a=i(26),o=i(54),s=i(3),l=i(28),u=i(11),c=i(6),h=i(0),p=i(1),d=function(e){function t(){var t=e.call(this)||this;return t._negativeBase=0,t._baseUnit="second",t._outputFormat="svg",t._unitValues={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},t._unitAliases={Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"},t.className="DurationFormatter",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.format=function(e,t,i){this.language||(this.sprite?this.language=this.sprite.language:this.language=new r.a);var n=i||this._baseUnit;"undefined"!==typeof t&&""!==t||(t=h.d(this.durationFormat)?this.durationFormat:this.getFormat(h.l(e),null,n)),t=c.d(t);var a,o=this.parseFormat(t,n),s=Number(e);a=s>this._negativeBase?o.positive:s<this._negativeBase?o.negative:o.zero;var l=this.applyFormat(s,a);return""!==a.color&&("svg"===this._outputFormat?l="<tspan fill='"+a.color+"'>"+l+"</tspan>":"html"===this._outputFormat&&(l="<span style='color: "+a.color+";'>"+l+"</span>")),l},t.prototype.parseFormat=function(e,t){var i=this,n=this.getCache(e);if(h.d(n))return n;var r=t||this._baseUnit,a={positive:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:r,parsed:!1,absolute:!1}},s=(e=e.replace("||",l.e)).split("|");return a.positive.source=s[0],"undefined"===typeof s[2]?a.zero=a.positive:a.zero.source=s[2],"undefined"===typeof s[1]?a.negative=a.positive:a.negative.source=s[1],u.d(a,(function(e,t){if(!t.parsed)if("undefined"===typeof i.getCache(t.source)){var n,r=t.source;(n=t.source.match(/^\[([^\]]*)\]/))&&n.length&&""!==n[0]&&(r=t.source.substr(n[0].length),t.color=n[1]);for(var s=Object(o.a)().chunk(r,!0),u=0;u<s.length;u++){var c=s[u];if(c.text=c.text.replace(l.e,"|"),"value"===c.type){c.text.match(/[yYMdDwhHKkmsSn]+a/)&&(t.absolute=!0,c.text=c.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));var p=c.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(p)for(var d=0;d<p.length;d++)h.d(p[d])||(p[d]=i._unitAliases[p[d]]),t.parts.push(p[d]),c.text=c.text.replace(p[d],l.d)}t.template+=c.text}i.setCache(t.source,t),t.parsed=!0}else a[e]=i.getCache(t.source)})),this.setCache(e,a),a},t.prototype.applyFormat=function(e,t){var i=!t.absolute&&e<this._negativeBase;e=Math.abs(e);for(var n=this.toTimeStamp(e,t.baseUnit),r=t.template,a=0,o=t.parts.length;a<o;a++){var s=t.parts[a],u=this.toTimeUnit(s.substr(0,1)),h=s.length,p=Math.floor(n/this._unitValues[u]);r=r.replace(l.d,c.B(p,h,"0")),n-=p*this._unitValues[u]}return i&&(r="-"+r),r},t.prototype.toTimeStamp=function(e,t){return e*this._unitValues[t]},t.prototype.toTimeUnit=function(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}},t.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(t.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(e){this._baseUnit=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(e){this._outputFormat=e.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),t.prototype.getFormat=function(e,t,i){if(h.d(this.durationFormat))return this.durationFormat;if(i||(i=this.baseUnit),h.d(t)&&e!=t){e=Math.abs(e),t=Math.abs(t);var n=this.getValueUnit(p.B(e,t),i);return this.durationFormats[i][n]}var r=this.getValueUnit(e,i);return this.durationFormats[i][r]},t.prototype.getValueUnit=function(e,t){var i;t||(t=this.baseUnit);var n=this.getMilliseconds(e,t);return u.e(this._unitValues,(function(e,r){if(e==t||i){if(n/r<=1)return i||(i=e),!1;i=e}return!0})),i},t.prototype.getMilliseconds=function(e,t){return t||(t=this.baseUnit),e*this._unitValues[t]},Object.defineProperty(t.prototype,"durationFormat",{get:function(){return this._durationFormat},set:function(e){this._durationFormat!=e&&(this._durationFormat=e,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationFormats",{get:function(){return this._durationFormats||(this._durationFormats={millisecond:{millisecond:this.language.translate("_duration_millisecond"),second:this.language.translate("_duration_millisecond_second"),minute:this.language.translate("_duration_millisecond_minute"),hour:this.language.translate("_duration_millisecond_hour"),day:this.language.translate("_duration_millisecond_day"),week:this.language.translate("_duration_millisecond_week"),month:this.language.translate("_duration_millisecond_month"),year:this.language.translate("_duration_millisecond_year")},second:{second:this.language.translate("_duration_second"),minute:this.language.translate("_duration_second_minute"),hour:this.language.translate("_duration_second_hour"),day:this.language.translate("_duration_second_day"),week:this.language.translate("_duration_second_week"),month:this.language.translate("_duration_second_month"),year:this.language.translate("_duration_second_year")},minute:{minute:this.language.translate("_duration_minute"),hour:this.language.translate("_duration_minute_hour"),day:this.language.translate("_duration_minute_day"),week:this.language.translate("_duration_minute_week"),month:this.language.translate("_duration_minute_month"),year:this.language.translate("_duration_minute_year")},hour:{hour:this.language.translate("_duration_hour"),day:this.language.translate("_duration_hour_day"),week:this.language.translate("_duration_hour_week"),month:this.language.translate("_duration_hour_month"),year:this.language.translate("_duration_hour_year")},day:{day:this.language.translate("_duration_day"),week:this.language.translate("_duration_day_week"),month:this.language.translate("_duration_day_month"),year:this.language.translate("_duration_day_year")},week:{week:this.language.translate("_duration_week"),month:this.language.translate("_duration_week_month"),year:this.language.translate("_duration_week_year")},month:{month:this.language.translate("_duration_month"),year:this.language.translate("_duration_month_year")},year:{year:this.language.translate("_duration_year")}}),this._durationFormats},set:function(e){this._durationFormats=e,this.invalidateSprite()},enumerable:!0,configurable:!0}),t}(a.a);s.b.registeredClasses.DurationFormatter=d},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(2),r=i(26),a=i(3),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._validateDisposer=null,t}return Object(n.c)(t,e),t.prototype.invalidate=function(){null===this._validateDisposer&&(this._validateDisposer=a.b.events.on("exitframe",this.validate,this))},t.prototype.validate=function(){null!==this._validateDisposer&&(this._validateDisposer.dispose(),this._validateDisposer=null)},t.prototype.dispose=function(){null!==this._validateDisposer&&(this._validateDisposer.dispose(),this._validateDisposer=null),e.prototype.dispose.call(this)},t}(r.b)},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(74),r=i(6),a=i(0),o=function(){function e(){}return e.prototype.parse=function(e){return[]},Object.defineProperty(e.prototype,"parsableNumbers",{get:function(){return this.options.numberFields&&this.options.numberFields.length>0},enumerable:!0,configurable:!0}),e.prototype.maybeToNumber=function(e,t){return-1!==this.options.numberFields.indexOf(e)?r.b(t):t},Object.defineProperty(e.prototype,"parsableDates",{get:function(){return this.options.dateFields&&this.options.dateFields.length>0},enumerable:!0,configurable:!0}),e.prototype.maybeToDate=function(e,t){return-1!==this.options.dateFields.indexOf(e)?this.options.dateFormatter.parse(t,this.dateFormat):t},e.prototype.maybeToEmpty=function(e){return a.d(e)&&""!=e||!a.d(this.options.emptyAs)?e:this.options.emptyAs},Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this.options.dateFormatter||(this.options.dateFormatter=new n.a,this.options.dateFormat&&(this.options.dateFormat=this.options.dateFormat)),this.options.dateFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this.options.dateFormat||this.dateFormatter.inputDateFormat},enumerable:!0,configurable:!0}),e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(2),r=i(16),a=i(3),o=i(4),s=function(e){function t(){var t=e.call(this)||this;return t.className="Triangle",t.element=t.paper.add("path"),t.direction="top",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t,i=this.pixelWidth,n=this.pixelHeight;switch(this.direction){case"right":t=o.g({x:0,y:0})+o.f({x:i,y:n/2})+o.f({x:0,y:n})+o.d();break;case"left":t=o.g({x:i,y:0})+o.f({x:0,y:n/2})+o.f({x:i,y:n})+o.d();break;case"bottom":t=o.g({x:0,y:0})+o.f({x:i,y:0})+o.f({x:i/2,y:n})+o.d();break;case"top":t=o.g({x:i/2,y:0})+o.f({x:i,y:n})+o.f({x:0,y:n})+o.d()}this.path=t},Object.defineProperty(t.prototype,"direction",{get:function(){return this.getPropertyValue("direction")},set:function(e){this.setPropertyValue("direction",e,!0)},enumerable:!0,configurable:!0}),t}(r.a);a.b.registeredClasses.Triangle=s},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(2),r=i(86),a=i(40),o=i(4),s=function(e){function t(){var t=e.call(this)||this;return t.className="WavedRectangle",t.element=t.paper.add("path"),t.waveLength=16,t.waveHeight=4,t.tension=.8,t.setPropertyValue("wavedLeft",!0),t.setPropertyValue("wavedRight",!0),t.setPropertyValue("wavedTop",!0),t.setPropertyValue("wavedBottom",!0),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.pixelWidth,i=this.pixelHeight;if(t>0&&i>0){var n={x:0,y:0},r={x:t,y:0},s={x:t,y:i},l={x:0,y:i},u=Math.min(t,this.waveLength),c=Math.min(i,this.waveHeight),h=Math.min(i,this.waveLength),p=Math.min(t,this.waveHeight),d="",f="",m="",y="";this.wavedTop&&(d=Object(a.d)(n,r,u,c,this.tension,!0)),this.wavedRight&&(f=Object(a.d)(r,s,h,p,this.tension,!0)),this.wavedBottom&&(m=Object(a.d)(s,l,u,c,this.tension,!0)),this.wavedLeft&&(y=Object(a.d)(l,n,h,p,this.tension,!0)),this.path=o.g(n)+d+o.f(r)+f+o.f(s)+m+o.f(l)+y+"z"}},Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(e){this.setPropertyValue("waveLength",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(e){this.setPropertyValue("waveHeight",e),this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.setWavedSides=function(e,t,i,n){this.wavedTop=e,this.wavedRight=t,this.wavedBottom=i,this.wavedLeft=n},Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedRight",{get:function(){return this.getPropertyValue("wavedRight")},set:function(e){this.setPropertyValue("wavedRight",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedLeft",{get:function(){return this.getPropertyValue("wavedLeft")},set:function(e){this.setPropertyValue("wavedLeft",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedTop",{get:function(){return this.getPropertyValue("wavedTop")},set:function(e){this.setPropertyValue("wavedTop",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wavedBottom",{get:function(){return this.getPropertyValue("wavedBottom")},set:function(e){this.setPropertyValue("wavedBottom",e,!0)},enumerable:!0,configurable:!0}),t}(r.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(2),r=i(65),a=i(3),o=function(e){function t(){var t=e.call(this)||this;return t.className="LightenFilter",t.feColorMatrix=t.paper.add("feColorMatrix"),t.feColorMatrix.attr({type:"matrix"}),t.filterPrimitives.push(t.feColorMatrix),t.lightness=0,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"lightness",{get:function(){return this.properties.lightness},set:function(e){this.properties.lightness=e;var t=e+1;this.feColorMatrix.attr({values:t+" 0 0 0 0 0 "+t+" 0 0 0 0 0 "+t+" 0 0 0 0 0 1 0"})},enumerable:!0,configurable:!0}),t}(r.a);a.b.registeredClasses.LightenFilter=o},function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i(2),r=i(14),a=i(24),o=i(15),s=i(20),l=new a.a,u=i(32),c=i(26),h=i(22),p=i(50),d=i(0),f=i(11),m=function(e){function t(){var t=e.call(this)||this;return t.adapter=new u.a(t),t._elements={},t._IOs={},t._content="",t._title="",t._classPrefix="ampopup",t._defaultStyles=!0,t._showCurtain=!1,t._draggable=!0,t._align="center",t._dynamicResize=!0,t._verticalAlign="middle",t._shift={x:0,y:0},t._tempShift={x:0,y:0},t._readerTitle="",t._closable=!0,t._cssLoaded=!1,t._fitTo="window",t.isTemplate=!1,t._sized=!1,t.className="Popup",t}return Object(n.c)(t,e),t.prototype.open=function(){this.container&&(this._elements.wrapper&&this.container.appendChild(this._elements.wrapper),this._elements.curtain&&(this.container.appendChild(this._elements.curtain),this.showCurtain=this.showCurtain),this.positionElement(),this.dispatchImmediately("opened"))},t.prototype.close=function(){this._elements.wrapper&&this._elements.wrapper.parentElement&&this._elements.wrapper.parentElement.removeChild(this._elements.wrapper),this._elements.curtain&&this._elements.curtain.parentElement&&this._elements.curtain.parentElement.removeChild(this._elements.curtain),this.dispatchImmediately("closed"),this.releasePointers()},t.prototype.dispose=function(){this.close(),e.prototype.dispose.call(this)},t.prototype.positionElement=function(e){var t=this;void 0===e&&(e=!0),this._elements.wrapper&&setTimeout((function(){if(t._elements.wrapper){if(e||!t._sized){t._elements.wrapper.style.opacity="0.01",t._elements.wrapper.style.left="0",t._elements.wrapper.style.top="0",t._elements.wrapper.style.margin="0 0 0 0",t._elements.wrapper.style.width="",t._elements.wrapper.style.height="";var i=t._elements.wrapper.getBoundingClientRect();t._elements.wrapper.style.width=i.width+"px",t._elements.wrapper.style.height=i.height+"px",t._sized=!0}if(t.dynamicResize)for(var n=t._elements.wrapper.getElementsByTagName("img"),r=0;r<n.length;r++){var a=n[r];if(!a.complete){a.addEventListener("load",(function(){t.positionElement(!0)}));break}}setTimeout((function(){if(t._elements.wrapper){var i;switch(!e&&t._sized||!t._bbox?(i=t._elements.wrapper.getBoundingClientRect(),t._elements.wrapper.style.opacity=""):i=t._bbox,t.align){case"left":t._elements.wrapper.style.left="0",t._elements.wrapper.style.right="auto",t._elements.wrapper.style.marginLeft=t.toStyle(t._shift.x+t._tempShift.x);break;case"center":t._elements.wrapper.style.left="50%",t._elements.wrapper.style.right="auto",t._elements.wrapper.style.marginLeft=t.toStyle(Math.round(-i.width/2)+(t._shift.x+t._tempShift.x));break;case"right":t._elements.wrapper.style.left="auto",t._elements.wrapper.style.right="0",t._elements.wrapper.style.marginLeft=t.toStyle(t._shift.x+t._tempShift.x);break;default:t._elements.wrapper.style.left=t.toStyle(t.left)||"auto",t._elements.wrapper.style.right=t.toStyle(t.right)||"auto",t._elements.wrapper.style.marginLeft=t.toStyle(t._shift.x+t._tempShift.x)}switch(t.verticalAlign){case"top":t._elements.wrapper.style.top="0",t._elements.wrapper.style.bottom="auto",t._elements.wrapper.style.marginTop=t.toStyle(t._shift.y+t._tempShift.y);break;case"middle":t._elements.wrapper.style.top="50%",t._elements.wrapper.style.bottom="auto",t._elements.wrapper.style.marginTop=t.toStyle(Math.round(-i.height/2)+(t._shift.y+t._tempShift.y));break;case"bottom":t._elements.wrapper.style.top="auto",t._elements.wrapper.style.bottom="0",t._elements.wrapper.style.marginTop=t.toStyle(t._shift.y+t._tempShift.y);break;default:t._elements.wrapper.style.top=t.toStyle(t.top)||"auto",t._elements.wrapper.style.bottom=t.toStyle(t.bottom)||"auto",t._elements.wrapper.style.marginTop=t.toStyle(t._shift.y+t._tempShift.y)}}}),1)}}),1)},t.prototype.setupDragging=function(){var e=this;this.draggable?(this._IOs.header.events.has("drag")||this._IOs.header.events.on("drag",(function(t){e._tempShift.x=t.shift.x,e._tempShift.y=t.shift.y,e.positionElement(!1)})),this._IOs.header.events.has("dragstop")||this._IOs.header.events.on("dragstop",(function(t){e._shift.x+=e._tempShift.x,e._shift.y+=e._tempShift.y,e._tempShift.x=0,e._tempShift.y=0,e.positionElement(!1)}))):this._IOs.header&&(Object(h.a)().unprepElement(this._IOs.header),this._IOs.header.events.has("drag")&&this._IOs.header.events.off("drag"),this._IOs.header.events.has("dragstop")&&this._IOs.header.events.off("dragstop"))},t.prototype.toStyle=function(e){return d.d(e)?d.h(e)?e+"px":e.toString():null},Object.defineProperty(t.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",this._classPrefix)},set:function(e){this._classPrefix=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classPrefixRaw",{get:function(){return this._classPrefix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this.adapter.apply("content",this._content)},set:function(e){this._content!=e&&(this._content=e,this._elements.content||this.createContentElement(),this._elements.content.innerHTML=e,this.positionElement())},enumerable:!0,configurable:!0}),t.prototype.getClassNames=function(){return this.adapter.apply("classNames",{wrapperClass:this.classPrefix+"",headerClass:this.classPrefix+"-header",titleClass:this.classPrefix+"-title",contentClass:this.classPrefix+"-content",insideClass:this.classPrefix+"-inside",curtainClass:this.classPrefix+"-curtain",closeClass:this.classPrefix+"-close"})},t.prototype.createContentElement=function(){if(!this._elements.wrapper){var e=this.getClassNames(),t=document.createElement("div");t.className=e.contentClass,t.style.opacity="0.01";var i=document.createElement("a");i.className=e.closeClass;var n=document.createElement("div");n.className=e.headerClass;var r=document.createElement("div");r.innerHTML=this.title,r.className=e.titleClass,this.title||(r.style.display="none");var a=document.createElement("div");a.className=e.insideClass,a.innerHTML=this.content,this._IOs.wrapper=Object(h.a)().getInteraction(t),this._IOs.header=Object(h.a)().getInteraction(n),this._disposers.push(this._IOs.wrapper),this._IOs.wrapper.events.on("over",this.disablePointers,this),this._IOs.wrapper.events.on("out",this.releasePointers,this),this._IOs.close=Object(h.a)().getInteraction(i),this._disposers.push(this._IOs.close),i.style.visibility="hidden",t.setAttribute("role","dialog"),n.appendChild(i),n.appendChild(r),t.appendChild(n),t.appendChild(a),this.container.appendChild(t),this._elements.wrapper=t,this._elements.header=n,this._elements.content=a,this._elements.title=r,this._elements.close=i,this.defaultStyles&&this.loadDefaultCSS(),this.createCurtainElement(),this.applyEvents(),this.applyReaderSettings(),this.setupDragging()}},Object.defineProperty(t.prototype,"title",{get:function(){return this.adapter.apply("title",this._title)},set:function(e){this._title!=e&&(this._title=e,this._elements.content||this.createContentElement(),this._elements.title.innerHTML=e,this.positionElement(),this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readerTitle",{get:function(){return this.adapter.apply("readerTitle",""!=this._readerTitle?this._readerTitle:this.title)},set:function(e){this._readerTitle!=e&&(this._readerTitle=e,this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closable",{get:function(){return this.adapter.apply("closable",this._closable)},set:function(e){e!==this._closable&&(this._closable=e,this.applyEvents())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitTo",{get:function(){return this.adapter.apply("fitTo",this._fitTo)},set:function(e){e!=this._fitTo&&(this._fitTo=e,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",this._defaultStyles)},set:function(e){this._defaultStyles!=e&&(this._defaultStyles=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showCurtain",{get:function(){return this.adapter.apply("showCurtain",this._showCurtain)},set:function(e){this._showCurtain!=e&&(this._showCurtain=e,this._elements.curtain&&(this._elements.curtain.style.display=e?"block":"none"))},enumerable:!0,configurable:!0}),t.prototype.createCurtainElement=function(){var e=this.getClassNames(),t=document.createElement("div");t.className=e.curtainClass,this.container.appendChild(t),this._IOs.curtain=Object(h.a)().getInteraction(t),this._disposers.push(this._IOs.curtain),this._IOs.curtain.events.on("over",this.disablePointers,this),this._IOs.curtain.events.on("out",this.releasePointers,this),t.style.display=this.showCurtain?"block":"none",this._elements.curtain=t},Object.defineProperty(t.prototype,"draggable",{get:function(){return this.adapter.apply("draggable",this._draggable)},set:function(e){this._draggable!=e&&(this._draggable=e,this.setupDragging())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dynamicResize",{get:function(){return this.adapter.apply("dynamicResize",this._dynamicResize)},set:function(e){this._dynamicResize!=e&&(this._dynamicResize=e,this.positionElement(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.adapter.apply("align",this._align)},set:function(e){this._align!=e&&(this._align=e,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",this._verticalAlign)},set:function(e){this._verticalAlign!=e&&(this._verticalAlign=e,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.adapter.apply("left",this._left)},set:function(e){this.left!=e&&(this._left=e,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.adapter.apply("right",this._right)},set:function(e){this.right!=e&&(this._right=e,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.adapter.apply("top",this._top)},set:function(e){this.top!=e&&(this._top=e,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.adapter.apply("bottom",this._bottom)},set:function(e){this.bottom!=e&&(this._bottom=e,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),t.prototype.loadDefaultCSS=function(){this._cssLoaded||(this._disposers.push(function(e,t){t||(t="ampopup");var i=new s.a,n=i.getFor("text"),a=i.getFor("background");a.alpha=.8;var u=i.getFor("alternativeBackground");return u.alpha=.05,l.insertKeyIfEmpty(t,(function(){var i=new o.c([new r.b(e,"."+t,{overflow:"visible",position:"absolute",top:"0",left:"0","z-index":"2000"}),new r.b(e,"."+t+"-curtain",{width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"2001","background-color":a.hex,opacity:"0.5"}),new r.b(e,"."+t+"-header",{display:"block",width:"100%","min-height":"1.8em",background:u.rgba}),new r.b(e,"."+t+"-title",{"font-weight":"bold","font-size":"110%",padding:"0.5em 1.2em 0.5em 1em"}),new r.b(e,"."+t+"-content",{background:a.hex,"background-color":a.rgba,color:n.hex,display:"inline-block",position:"absolute",top:"0",left:"0","max-width":"90%","max-height":"90%",overflow:"auto","z-index":"2002"}),new r.b(e,"."+t+"-inside",{padding:"1em"}),new r.b(e,"."+t+"-close",{display:"block",position:"absolute",top:"0.3em",right:"0.3em","background-color":"rgb(100, 100, 100)",background:"rgba(100, 100, 100, 0.1) url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=) no-repeat center","background-size":"80%",width:"1.2em",height:"1.2em",cursor:"pointer"})]);return new o.a((function(){l.removeKey(t),i.dispose()}))})).increment()}(Object(r.p)(this.container),this.classPrefix)),f.d(this._elements,(function(e,t){t.style.display=""})),this._cssLoaded=!0)},t.prototype.applyEvents=function(){var e=this;if(this._IOs.close)if(this.closable){this._IOs.close.element.style.visibility="visible";var t=[Object(h.a)().body.events.on("keyup",(function(t){p.a.isKey(t.event,"esc")&&e.closable&&e.close()})),this._IOs.close.events.on("hit",(function(t){e.close()}))];t.push(this._IOs.curtain.events.on("hit",(function(t){e.showCurtain&&e.closable&&e.close()}))),this._disposers.push(new o.c(t))}else this._IOs.close.element.style.visibility="hidden"},t.prototype.disablePointers=function(){this.sprite&&(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled,this.sprite.interactionsEnabled=!1)},t.prototype.releasePointers=function(){d.d(this._spriteInteractionsEnabled)&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled,this._spriteInteractionsEnabled=void 0)},t.prototype.applyReaderSettings=function(){this.elements.wrapper.setAttribute("aria-label",this.readerTitle)},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.container=t.container,this.sprite=t.sprite,this.classPrefix=t.classPrefixRaw,this.content=t.content,this.title=t.title,this.readerTitle=t.readerTitle,this.defaultStyles=t.defaultStyles,this.showCurtain=t.showCurtain,this.align=t.align,this.verticalAlign=t.verticalAlign,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.adapter.copyFrom(t.adapter)},t}(c.b)},,function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(2),r=i(64),a=i(3),o=i(4),s=i(1),l=i(6),u=i(40),c=function(e){function t(){var t=e.call(this)||this;return t.className="WavedCircle",t.element=t.paper.add("path"),t.waveLength=16,t.waveHeight=4,t.fill=void 0,t.fillOpacity=0,t.tension=.8,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){var e="",t=this.pixelRadius;if(t>0){var i=this.getPoints(t);e=o.g(i[0])+new u.c(this.tension,this.tension).smooth(i)}var n=this.pixelInnerRadius;n>0&&((i=this.getPoints(n)).reverse(),e+=o.g(i[0])+new u.c(this.tension,this.tension).smooth(i));this.path=e},t.prototype.getPoints=function(e){for(var t=e*Math.PI*2,i=this.waveHeight/2,n=t/Math.round(t/this.waveLength),r=n/2,a=[],o=t/n,l=0;l<=o;l++){var u=l*n/t*360,c=(l*n+r)/t*360;a.push({x:(e-i)*s.g(u),y:(e-i)*s.F(u)}),a.push({x:(e+i)*s.g(c),y:(e+i)*s.F(c)})}return a.pop(),a},Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return l.E(this.innerRadius,s.C(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(e){this.setPropertyValue("waveLength",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(e){this.setPropertyValue("waveHeight",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e),this.invalidate()},enumerable:!0,configurable:!0}),t}(r.a);a.b.registeredClasses.WavedCircle=c},function(e,t,i){"use strict";var n=i(33),r=i(30),a=i(254),o=i(10),s=["xs","sm","md","lg","xl"];function l(e){var t=e.values,i=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,n=e.unit,a=void 0===n?"px":n,l=e.step,u=void 0===l?5:l,c=Object(r.a)(e,["values","unit","step"]);function h(e){var t="number"===typeof i[e]?i[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function p(e,t){var n=s.indexOf(t);return n===s.length-1?h(e):"@media (min-width:".concat("number"===typeof i[e]?i[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==n&&"number"===typeof i[s[n+1]]?i[s[n+1]]:t)-u/100).concat(a,")")}return Object(o.a)({keys:s,values:i,up:h,down:function(e){var t=s.indexOf(e)+1,n=i[s[t]];return t===s.length?h("xs"):"@media (max-width:".concat(("number"===typeof n&&t>0?n:e)-u/100).concat(a,")")},between:p,only:function(e){return p(e,e)},width:function(e){return i[e]}},c)}function u(e,t,i){var r;return Object(o.a)({gutters:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),Object(o.a)({paddingLeft:t(2),paddingRight:t(2)},i,Object(n.a)({},e.up("sm"),Object(o.a)({paddingLeft:t(3),paddingRight:t(3)},i[e.up("sm")])))},toolbar:(r={minHeight:56},Object(n.a)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),Object(n.a)(r,e.up("sm"),{minHeight:64}),r)},i)}var c=i(195),h={black:"#000",white:"#fff"},p={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},d={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},f={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},m={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},y={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},v={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},g={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},_=i(78),b={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h.white,default:p[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x={text:{primary:h.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:p[800],default:"#303030"},action:{active:h.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,i,n){var r=n.light||n,a=n.dark||1.5*n;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:"light"===t?e.light=Object(_.d)(e.main,r):"dark"===t&&(e.dark=Object(_.b)(e.main,a)))}function k(e){var t=e.primary,i=void 0===t?{light:d[300],main:d[500],dark:d[700]}:t,n=e.secondary,s=void 0===n?{light:f.A200,main:f.A400,dark:f.A700}:n,l=e.error,u=void 0===l?{light:m[300],main:m[500],dark:m[700]}:l,k=e.warning,P=void 0===k?{light:y[300],main:y[500],dark:y[700]}:k,S=e.info,T=void 0===S?{light:v[300],main:v[500],dark:v[700]}:S,C=e.success,O=void 0===C?{light:g[300],main:g[500],dark:g[700]}:C,I=e.type,E=void 0===I?"light":I,A=e.contrastThreshold,M=void 0===A?3:A,D=e.tonalOffset,j=void 0===D?.2:D,F=Object(r.a)(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function L(e){return Object(_.c)(e,x.text.primary)>=M?x.text.primary:b.text.primary}var R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=Object(o.a)({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(Object(c.a)(4,t));if("string"!==typeof e.main)throw new Error(Object(c.a)(5,JSON.stringify(e.main)));return w(e,"light",i,j),w(e,"dark",n,j),e.contrastText||(e.contrastText=L(e.main)),e},z={dark:x,light:b};return Object(a.a)(Object(o.a)({common:h,type:E,primary:R(i),secondary:R(s,"A400","A200","A700"),error:R(u),warning:R(P),info:R(T),success:R(O),grey:p,contrastThreshold:M,getContrastText:L,augmentColor:R,tonalOffset:j},z[E]),F)}function P(e){return Math.round(1e5*e)/1e5}function S(e){return P(e)}var T={textTransform:"uppercase"},C='"Roboto", "Helvetica", "Arial", sans-serif';function O(e,t){var i="function"===typeof t?t(e):t,n=i.fontFamily,s=void 0===n?C:n,l=i.fontSize,u=void 0===l?14:l,c=i.fontWeightLight,h=void 0===c?300:c,p=i.fontWeightRegular,d=void 0===p?400:p,f=i.fontWeightMedium,m=void 0===f?500:f,y=i.fontWeightBold,v=void 0===y?700:y,g=i.htmlFontSize,_=void 0===g?16:g,b=i.allVariants,x=i.pxToRem,w=Object(r.a)(i,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var k=u/14,O=x||function(e){return"".concat(e/_*k,"rem")},I=function(e,t,i,n,r){return Object(o.a)({fontFamily:s,fontWeight:e,fontSize:O(t),lineHeight:i},s===C?{letterSpacing:"".concat(P(n/t),"em")}:{},r,b)},E={h1:I(h,96,1.167,-1.5),h2:I(h,60,1.2,-.5),h3:I(d,48,1.167,0),h4:I(d,34,1.235,.25),h5:I(d,24,1.334,0),h6:I(m,20,1.6,.15),subtitle1:I(d,16,1.75,.15),subtitle2:I(m,14,1.57,.1),body1:I(d,16,1.5,.15),body2:I(d,14,1.43,.15),button:I(m,14,1.75,.4,T),caption:I(d,12,1.66,.4),overline:I(d,12,2.66,1,T)};return Object(a.a)(Object(o.a)({htmlFontSize:_,pxToRem:O,round:S,fontFamily:s,fontSize:u,fontWeightLight:h,fontWeightRegular:d,fontWeightMedium:m,fontWeightBold:v},E),w,{clone:!1})}function I(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var E=["none",I(0,2,1,-1,0,1,1,0,0,1,3,0),I(0,3,1,-2,0,2,2,0,0,1,5,0),I(0,3,3,-2,0,3,4,0,0,1,8,0),I(0,2,4,-1,0,4,5,0,0,1,10,0),I(0,3,5,-1,0,5,8,0,0,1,14,0),I(0,3,5,-1,0,6,10,0,0,1,18,0),I(0,4,5,-2,0,7,10,1,0,2,16,1),I(0,5,5,-3,0,8,10,1,0,3,14,2),I(0,5,6,-3,0,9,12,1,0,3,16,2),I(0,6,6,-3,0,10,14,1,0,4,18,3),I(0,6,7,-4,0,11,15,1,0,4,20,3),I(0,7,8,-4,0,12,17,2,0,5,22,4),I(0,7,8,-4,0,13,19,2,0,5,24,4),I(0,7,9,-4,0,14,21,2,0,5,26,4),I(0,8,9,-5,0,15,22,2,0,6,28,5),I(0,8,10,-5,0,16,24,2,0,6,30,5),I(0,8,11,-5,0,17,26,2,0,6,32,5),I(0,9,11,-5,0,18,28,2,0,7,34,6),I(0,9,12,-6,0,19,29,2,0,7,36,6),I(0,10,13,-6,0,20,31,3,0,8,38,7),I(0,10,13,-6,0,21,33,3,0,8,40,7),I(0,10,14,-6,0,22,35,3,0,8,42,7),I(0,11,14,-7,0,23,36,3,0,9,44,8),I(0,11,15,-7,0,24,38,3,0,9,46,8)],A={borderRadius:4},M=i(303);function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Object(M.a)({spacing:e}),i=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return 0===i.length?t(1):1===i.length?t(i[0]):i.map((function(e){if("string"===typeof e)return e;var i=t(e);return"number"===typeof i?"".concat(i,"px"):i})).join(" ")};return Object.defineProperty(i,"unit",{get:function(){return e}}),i.mui=!0,i}var j={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},F={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function L(e){return"".concat(Math.round(e),"ms")}var R={easing:j,duration:F,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.duration,n=void 0===i?F.standard:i,a=t.easing,o=void 0===a?j.easeInOut:a,s=t.delay,l=void 0===s?0:s;Object(r.a)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof n?n:L(n)," ").concat(o," ").concat("string"===typeof l?l:L(l))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},z={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function V(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,i=void 0===t?{}:t,n=e.mixins,o=void 0===n?{}:n,s=e.palette,c=void 0===s?{}:s,h=e.spacing,p=e.typography,d=void 0===p?{}:p,f=Object(r.a)(e,["breakpoints","mixins","palette","spacing","typography"]),m=k(c),y=l(i),v=D(h),g=Object(a.a)({breakpoints:y,direction:"ltr",mixins:u(y,v,o),overrides:{},palette:m,props:{},shadows:E,typography:O(m,d),spacing:v,shape:A,transitions:R,zIndex:z},f),_=arguments.length,b=new Array(_>1?_-1:0),x=1;x<_;x++)b[x-1]=arguments[x];return g=b.reduce((function(e,t){return Object(a.a)(e,t)}),g)}var B=V();t.a=B},function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return v}));var n=i(43),r=i(52),a=i(5),o=i.n(a),s=i(67),l=i(10),u=i(29),c=i(69),h=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).history=Object(s.a)(t.props),t}return Object(r.a)(t,e),t.prototype.render=function(){return o.a.createElement(n.b,{history:this.history,children:this.props.children})},t}(o.a.Component);o.a.Component;var p=function(e,t){return"function"===typeof e?e(t):e},d=function(e,t){return"string"===typeof e?Object(s.c)(e,null,null,t):e},f=function(e){return e},m=o.a.forwardRef;"undefined"===typeof m&&(m=f);var y=m((function(e,t){var i=e.innerRef,n=e.navigate,r=e.onClick,a=Object(u.a)(e,["innerRef","navigate","onClick"]),s=a.target,c=Object(l.a)({},a,{onClick:function(e){try{r&&r(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),n())}});return c.ref=f!==m&&t||i,o.a.createElement("a",c)}));var v=m((function(e,t){var i=e.component,r=void 0===i?y:i,a=e.replace,h=e.to,v=e.innerRef,g=Object(u.a)(e,["component","replace","to","innerRef"]);return o.a.createElement(n.d.Consumer,null,(function(e){e||Object(c.a)(!1);var i=e.history,n=d(p(h,e.location),e.location),u=n?i.createHref(n):"",y=Object(l.a)({},g,{href:u,navigate:function(){var t=p(h,e.location),n=Object(s.e)(e.location)===Object(s.e)(d(t));(a||n?i.replace:i.push)(t)}});return f!==m?y.ref=t||v:y.innerRef=v,o.a.createElement(r,y)}))})),g=function(e){return e},_=o.a.forwardRef;"undefined"===typeof _&&(_=g);_((function(e,t){var i=e["aria-current"],r=void 0===i?"page":i,a=e.activeClassName,s=void 0===a?"active":a,h=e.activeStyle,f=e.className,m=e.exact,y=e.isActive,b=e.location,x=e.sensitive,w=e.strict,k=e.style,P=e.to,S=e.innerRef,T=Object(u.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.a.createElement(n.d.Consumer,null,(function(e){e||Object(c.a)(!1);var i=b||e.location,a=d(p(P,i),i),u=a.pathname,C=u&&u.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),O=C?Object(n.e)(i.pathname,{path:C,exact:m,sensitive:x,strict:w}):null,I=!!(y?y(O,i):O),E="function"===typeof f?f(I):f,A="function"===typeof k?k(I):k;I&&(E=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((function(e){return e})).join(" ")}(E,s),A=Object(l.a)({},A,h));var M=Object(l.a)({"aria-current":I&&r||null,className:E,style:A,to:a},T);return g!==_?M.ref=t||S:M.innerRef=S,o.a.createElement(v,M)}))}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(2),r=i(24),a=i(48),o=i(15),s=i(6),l=i(11),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._interactionEvents=new r.a,t}return Object(n.c)(t,e),t.prototype._dispatchSpriteEvent=function(e){if(!this.target.disabled&&!this.target.isTemplate&&this.target.events.isEnabled(e.type)){var t=l.j(e,{target:this.target});this.target.events.dispatchImmediately(t.type,t)}},t.prototype._dispatchSpritePointEvent=function(e){if(!this.target.disabled&&!this.target.isTemplate&&this.target.events.isEnabled(e.type)){var t=l.j(e,{target:this.target,spritePoint:e.point?s.h(e.point,this.target):void 0,svgPoint:this.target.getSvgPoint(e.point)});this.target.events.dispatchImmediately(t.type,t)}},t.prototype._addInteractionObjectEvent=function(e,t,i,n){var r=this,a=n+"-"+e;return this._interactionEvents.insertKeyIfEmpty(a,(function(){var s=r.target.interactions.events.on(e,t,i,n);return new o.a((function(){r._interactionEvents.removeKey(a),s.dispose()}))})).increment()},t.prototype._on=function(t,i,n,r,a,s){var l=e.prototype._on.call(this,t,i,n,r,a,s),u=[l.disposer];switch(i){case"hit":case"track":case"doublehit":case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":u.push(this._addInteractionObjectEvent(i,this._dispatchSpritePointEvent,this,a));break;case"rightclick":case"down":case"up":case"drag":case"dragged":case"dragstart":case"dragstop":case"over":case"out":case"swipe":case"swipeleft":case"swiperight":case"resize":case"focus":case"blur":case"toggled":u.push(this._addInteractionObjectEvent(i,this._dispatchSpriteEvent,this,a))}switch(i){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"toggled":this.target.togglable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":this.target.hoverable=!0;case"out":this.target.hoverable=!0;break;case"focus":case"blur":this.target.focusable=!0}return l.disposer=new o.c(u),l},t}(a.b)},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(2),r=i(48),a=i(15),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._domEvents={},t}return Object(n.c)(t,e),t.prototype._addDOMEvent=function(e,t,i,n){var r=this;if(!this._domEvents[e]){var o=function(e){i.call(n,t,e)};this.target.element.addEventListener(e,o,!1),this._domEvents[e]=new a.a((function(){delete r._domEvents[e],r.target.element.removeEventListener(e,o,!1)}))}return this._domEvents[e].increment()},t.prototype._dispatchKeyboardEvent=function(e,t){this.target.events.isEnabled(e)&&this.target.events.dispatchImmediately(e,{type:e,target:this.target,event:t})},t.prototype._on=function(t,i,n,r,o,s){var l=e.prototype._on.call(this,t,i,n,r,o,s),u=[l.disposer];switch(i){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":case"out":this.target.hoverable=!0;break;case"focus":case"blur":case"focusin":case"focusout":this.target.focusable=!0;break;case"keydown":case"keyup":case"keypress":case"input":u.push(this._addDOMEvent(i,i,this._dispatchKeyboardEvent,this))}return l.disposer=new a.c(u),l},t}(r.b)},function(e,t,i){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(2),r=i(64),a=i(3),o=function(e){function t(){var t=e.call(this)||this;return t.className="Ellipse",t.element=t.paper.add("ellipse"),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),this.element.attr({rx:this.radius}),this.element.attr({ry:this.radiusY})},Object.defineProperty(t.prototype,"radiusY",{get:function(){return this.innerHeight/2},set:function(e){this.height=2*e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.innerWidth/2},set:function(e){this.width=2*e,this.invalidate()},enumerable:!0,configurable:!0}),t}(r.a);a.b.registeredClasses.Ellipse=o},function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(2),r=i(59),a=i(16),o=i(20),s=i(3),l=i(4),u=function(e){function t(){var t=e.call(this)||this;t.className="ResizeButton",t.orientation="horizontal",t.layout="absolute",t.horizontalCenter="middle",t.verticalCenter="middle",t.draggable=!0,t.padding(8,8,8,8),t.background.cornerRadius(20,20,20,20);var i=new a.a;i.element=t.paper.add("path");var n=l.g({x:-2,y:-6});return n+=l.f({x:-2,y:6}),n+=l.g({x:2,y:-6}),n+=l.f({x:2,y:6}),i.path=n,i.pixelPerfect=!0,i.padding(0,4,0,4),i.stroke=(new o.a).getFor("alternativeText"),i.strokeOpacity=.7,t.icon=i,t.label.dispose(),t.label=void 0,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"orientation",{set:function(e){var t=this.icon;t&&(t.rotation="horizontal"==e?0:-90)},enumerable:!0,configurable:!0}),t}(r.a);s.b.registeredClasses.ResizeButton=u},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(2),r=i(38),a=i(36),o=i(20),s=i(3),l=function(e){function t(){var t=e.call(this)||this;t.className="TextLink",t.selectable=!0;var i=new o.a;return t.fill=i.getFor("primaryButton").brighten(.3),t.states.create("hover").properties.fill=i.getFor("primaryButtonHover").brighten(.3),t.states.create("down").properties.fill=i.getFor("primaryButtonDown").brighten(.3),t.cursorOverStyle=a.a.pointer,t.applyTheme(),t}return Object(n.c)(t,e),t}(r.a);s.b.registeredClasses.TextLink=l},function(e,t,i){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return rt})),i.d(t,"b",(function(){return it}));var n=i(2),r=i(3),a=i(63),o=i(15),s=i(12),l=i(18),u=i(38),c=i(59),h=i(16),p=i(20),d=i(9),f=i(4),m=function(e){function t(){var t=e.call(this)||this;t.className="Grip";var i=new p.a;t.layout="absolute",t.padding(10,10,10,10),t.margin(3,3,3,3),t.background.fillOpacity=.3,t.background.cornerRadius(10,10,10,10);var n=new h.a;n.element=t.paper.add("path");var r=f.g({x:-6,y:0});return r+=f.f({x:6,y:0}),r+=f.g({x:-8,y:-6}),r+=f.f({x:0,y:-12}),r+=f.f({x:8,y:-6}),r+=f.g({x:-8,y:6}),r+=f.f({x:0,y:12}),r+=f.f({x:8,y:6}),n.path=r,n.strokeWidth=2,n.fillOpacity=0,n.pixelPerfect=!0,n.padding(0,4,0,4),n.stroke=i.getFor("text"),n.strokeOpacity=.7,n.align="center",n.valign="middle",t.icon=n,t.label.dispose(),t.label=void 0,t.position="right",t.autoHideDelay=3e3,t.events.on("shown",(function(e){t._autoHideTimeout&&t._autoHideTimeout.dispose(),t.autoHideDelay&&(t._autoHideTimeout=t.setTimeout((function(){t.hide()}),t.autoHideDelay))})),t.events.on("down",(function(e){t._autoHideTimeout&&t._autoHideTimeout.dispose()})),t.events.on("out",(function(e){t.autoHideDelay&&(t._autoHideTimeout=t.setTimeout((function(){t.hide()}),t.autoHideDelay))})),t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(e){if(this.setPropertyValue("position",e))switch(e){case"left":this.align="left",this.valign="middle",this.horizontalCenter="left",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=Object(d.c)(30);break;case"right":this.align="right",this.valign="middle",this.horizontalCenter="right",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=Object(d.c)(30);break;case"top":this.align="center",this.valign="top",this.horizontalCenter="middle",this.verticalCenter="top",this.icon.rotation=90,this.width=Object(d.c)(30),this.height=void 0;break;case"bottom":this.align="center",this.valign="bottom",this.horizontalCenter="middle",this.verticalCenter="bottom",this.icon.rotation=90,this.width=Object(d.c)(30),this.height=void 0;break;default:this.align="center",this.valign="middle",this.horizontalCenter="middle",this.verticalCenter="middle",this.icon.rotation=90,this.width=Object(d.c)(30),this.height=void 0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoHideDelay",{get:function(){return this.getPropertyValue("autoHideDelay")},set:function(e){this.setPropertyValue("autoHideDelay",e)},enumerable:!0,configurable:!0}),t}(c.a);r.b.registeredClasses.Grip=m;var y=i(61),v=i(8),g=i(0),_=i(27),b=function(e){function t(){var t=e.call(this)||this;return t.className="ChartDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(y.a),x=function(e){function t(){var i=e.call(this)||this;if(i._legend=new o.d,i.constructor===t)throw new Error("'Chart' cannot be instantiated directly. Please use a specific chart type.");i.className="Chart";var n=new u.a;i.titles=new s.c(n),i._disposers.push(new s.b(i.titles)),i._disposers.push(n),i.width=Object(d.c)(100),i.height=Object(d.c)(100),i.layout="vertical";var r=i.createChild(l.a);r.shouldClone=!1,r.layout="vertical",r.width=Object(d.c)(100),r.height=Object(d.c)(100),i.chartAndLegendContainer=r;var a=r.createChild(l.a);return a.shouldClone=!1,a.width=Object(d.c)(100),a.height=Object(d.c)(100),i.chartContainer=a,i.showOnInit=!0,i._disposers.push(i._legend),i.titles.events.on("inserted",(function(e){i.processTitle(e),i.updateReaderTitleReferences()}),i,!1),i.titles.events.on("removed",(function(e){i.updateReaderTitleReferences()}),i,!1),i.role="region",i.defaultState.transitionDuration=1,i.applyTheme(),i}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Chart"))},t.prototype.draw=function(){this.fixLayout(),e.prototype.draw.call(this)},t.prototype.fixLayout=function(){var e=this.legend;if(e){var t=this.chartAndLegendContainer,i=this.chartContainer;switch(i.x=void 0,i.y=void 0,"absolute"!=e.position&&(e.x=void 0,e.y=void 0),e.position){case"left":t.layout="horizontal",e.toBack();break;case"right":t.layout="horizontal",e.toFront();break;case"top":t.layout="vertical",e.toBack();break;case"bottom":t.layout="vertical",e.toFront();break;case"absolute":e.isMeasured=!1}}},t.prototype.feedLegend=function(){},t.prototype.processTitle=function(e){var t=e.newValue;return t.parent=this,t.toBack(),t.shouldClone=!1,t.align="center",t.uidAttr(),t},t.prototype.updateReaderTitleReferences=function(){if(this.titles.length){var e=[];v.d(this.titles.iterator(),(function(t){e.push(t.uid)})),this.setSVGAttribute({"aria-labelledby":e.join(" ")})}else this.removeSVGAttribute("aria-labelledby")},Object.defineProperty(t.prototype,"legend",{get:function(){return this._legend.get()},set:function(e){this.setLegend(e)},enumerable:!0,configurable:!0}),t.prototype.setLegend=function(e){var t=this;this._legend.get()!==e&&(e?(e.parent=this.chartAndLegendContainer,this._legend.set(e,e.events.on("propertychanged",(function(e){"position"==e.property&&t.fixLayout()}),void 0,!1)),e.addDisposer(new o.b((function(){t.legend=void 0})))):this._legend.reset(),this.feedLegend())},t.prototype.dispose=function(){this.legend&&this.legend.dispose(),e.prototype.dispose.call(this)},t.prototype.processConfig=function(t){t&&g.d(t.legend)&&!g.d(t.legend.type)&&(t.legend.type="Legend"),e.prototype.processConfig.call(this,t)},t.prototype.copyFrom=function(t){this.titles.copyFrom(t.titles),this.chartContainer.copyFrom(t.chartContainer),t.legend&&(this.legend=t.legend.clone(),this.legend.removeChildren()),e.prototype.copyFrom.call(this,t)},Object.defineProperty(t.prototype,"dragGrip",{get:function(){var e=this;if(!this._dragGrip){var t=this.tooltipContainer.createChild(m);t.align="right",t.valign="middle",t.hide(0),t.events.on("down",(function(t){t.touch&&(e.interactionsEnabled=!1)})),t.events.on("up",(function(t){e.interactionsEnabled=!0})),this.events.on("down",(function(e){e.touch&&t.show()})),this._dragGrip=t}return this._dragGrip},set:function(e){this._dragGrip=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusable",{get:function(){return this.parent.focusable},set:function(e){this.parent.focusable=e},enumerable:!0,configurable:!0}),t}(a.a);r.b.registeredClasses.Chart=x,_.c.push({relevant:_.b.widthXS,state:function(e,t){if(e instanceof x){var i=e.states.create(t);return e.pixelPaddingLeft>10&&(i.properties.paddingLeft=10),e.pixelPaddingRight>10&&(i.properties.paddingRight=10),i}return null}}),_.c.push({relevant:_.b.heightXS,state:function(e,t){if(e instanceof x){var i=e.states.create(t);return e.pixelPaddingTop>10&&(i.properties.paddingTop=10),e.pixelPaddingBottom>10&&(i.properties.paddingBottom=10),i}return null}}),_.c.push({relevant:_.b.widthXXS,state:function(e,t){if(e instanceof x){var i=e.states.create(t);return i.properties.paddingLeft=0,i.properties.paddingRight=0,i}return null}}),_.c.push({relevant:_.b.heightXXS,state:function(e,t){if(e instanceof x){var i=e.states.create(t);return i.properties.paddingTop=0,i.properties.paddingBottom=0,i}return null}});var w=i(24),k=i(88),P=function(e){function t(){var t=e.call(this)||this;return t.className="Bullet",t.isMeasured=!1,t.tooltipX=0,t.tooltipY=0,t.layout="none",t.applyOnClones=!0,t.copyToLegendMarker=!0,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(e){if(this.setPropertyValue("locationX",e)){var t=this.dataItem;t&&t.component&&t.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(e){if(this.setPropertyValue("locationY",e)){var t=this.dataItem;t&&t.component&&t.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xField",{get:function(){return this.getPropertyValue("xField")},set:function(e){this.setPropertyValue("xField",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yField",{get:function(){return this.getPropertyValue("yField")},set:function(e){this.setPropertyValue("yField",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDynamic",{get:function(){return this.getPropertyValue("isDynamic")},set:function(e){this.setPropertyValue("isDynamic",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"copyToLegendMarker",{get:function(){return this.getPropertyValue("copyToLegendMarker")},set:function(e){this.setPropertyValue("copyToLegendMarker",e)},enumerable:!0,configurable:!0}),t}(l.a);r.b.registeredClasses.Bullet=P,_.c.push({relevant:_.b.isXS,state:function(e,t){if(e instanceof P){var i=e.states.create(t);return i.properties.disabled=!0,i}return null}});var S=i(45),T=i(50),C=i(22),O=i(6),I=i(1),E=i(36),A=i(87),M=function(e){function t(){var t=e.call(this)||this;return t.childrenCreated=!1,t.className="LegendDataItem",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"label",{get:function(){var e=this;if(!this._label){var t=this.component.labels.create();this._label=t,this.addSprite(t),this._disposers.push(t),t.parent=this.itemContainer,this._disposers.push(new o.b((function(){g.d(e.component)&&e.component.labels.removeValue(t)})))}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.properties.color},set:function(e){this.setProperty("color",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueLabel",{get:function(){var e=this;if(!this._valueLabel){var t=this.component.valueLabels.create();this._valueLabel=t,this.addSprite(t),this._disposers.push(t),t.parent=this.itemContainer,this._disposers.push(new o.b((function(){g.d(e.component)&&e.component.valueLabels.removeValue(t)})))}return this._valueLabel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemContainer",{get:function(){var e=this;if(!this._itemContainer){var t=this.component,i=t.itemContainers.create();i.parent=t,this._itemContainer=i,this.addSprite(i),this._disposers.push(i),i.togglable&&i.events.on("toggled",(function(e){t.toggleDataItem(e.target.dataItem)}),void 0,!1),i.focusable&&(i.events.on("hit",(function(e){t.focusedItem=void 0}),void 0,!1),i.events.on("focus",(function(e){t.focusedItem=e.target.dataItem}),void 0,!1),i.events.on("blur",(function(e){t.focusedItem=void 0}),void 0,!1)),this._disposers.push(new o.b((function(){g.d(e.component)&&e.component.itemContainers.removeValue(i)}))),this.dataContext.uidAttr&&(i.readerControls=this.dataContext.uidAttr(),i.readerLabelledBy=this.dataContext.uidAttr());var n=this.dataContext;if((n instanceof y.a||n instanceof h.a)&&!n.isDisposed()){var r=function(e){i.readerChecked=e.visible,i.events.disableType("toggled"),i.isActive=!e.visible,i.events.enableType("toggled")};n.addDisposer(new o.b((function(){e.component&&e.component.dataItems.remove(e)}))),n instanceof h.a?(i.addDisposer(n.events.on("visibilitychanged",r,void 0,!1)),i.addDisposer(n.events.on("hidden",(function(e){i.readerChecked=!1,i.events.disableType("toggled"),i.isActive=!0,i.events.enableType("toggled")}),void 0,!1)),i.addDisposer(n.events.on("shown",(function(e){i.readerChecked=!0,i.events.disableType("toggled"),i.isActive=!1,i.events.enableType("toggled")}),void 0,!1))):i.addDisposer(n.events.on("visibilitychanged",r,void 0,!1))}}return this._itemContainer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"marker",{get:function(){var e=this;if(!this._marker){var t=this.component.markers.create();this._marker=t,t.parent=this.itemContainer,this.addSprite(t),this._disposers.push(t),this._disposers.push(new o.b((function(){g.d(e.component)&&e.component.markers.removeValue(t)})))}return this._marker},enumerable:!0,configurable:!0}),t}(y.a),D=function(){this.createMarker=!0},j=function(e){function t(){var t=e.call(this)||this;t.className="Legend",t.layout="grid",t.setPropertyValue("useDefaultMarker",!1),t.setPropertyValue("scrollable",!1),t.setPropertyValue("contentAlign","center");var i=new l.a;i.applyOnClones=!0,i.padding(8,0,8,0),i.margin(0,10,0,10),i.layout="horizontal",i.clickable=!0,i.focusable=!0,i.role="switch",i.togglable=!0,i.cursorOverStyle=E.a.pointer,i.background.fillOpacity=0,t.itemContainers=new s.c(i),t._disposers.push(new s.b(t.itemContainers)),t._disposers.push(t.itemContainers.template),t._disposers.push(Object(C.a)().body.events.on("keyup",(function(e){if(T.a.isKey(e.event,"enter")&&t.focusedItem){var i=t.focusedItem,n=i.itemContainer;n.togglable?t.toggleDataItem(i):n.clickable&&n.events.isEnabled("hit")&&(n.dispatchImmediately("hit",{event:e}),t.focusedItem=i)}}),t));var n=new p.a,r=new l.a;r.width=23,r.height=23,r.interactionsEnabled=!1,r.applyOnClones=!0,r.setStateOnChildren=!0,r.background.fillOpacity=0,r.background.strokeOpacity=0,r.propertyFields.fill="fill",r.valign="middle";var a=n.getFor("disabledBackground");r.events.on("childadded",(function(e){var t=e.newValue.states.create("active");t.properties.stroke=a,t.properties.fill=a})),t.markers=new s.c(r),t._disposers.push(new s.b(t.markers)),t._disposers.push(t.markers.template);var o=r.createChild(S.a);o.width=Object(d.c)(100),o.height=Object(d.c)(100),o.applyOnClones=!0,o.propertyFields.fill="fill",o.strokeOpacity=0;var c=new u.a;c.text="{name}",c.margin(0,5,0,5),c.valign="middle",c.applyOnClones=!0,c.states.create("active").properties.fill=n.getFor("disabledBackground"),t.labels=new s.c(c),t._disposers.push(new s.b(t.labels)),t._disposers.push(t.labels.template),c.interactionsEnabled=!1,c.truncate=!0,c.fullWords=!1;var h=new u.a;return h.margin(0,5,0,0),h.valign="middle",h.width=50,h.align="right",h.textAlign="end",h.applyOnClones=!0,h.states.create("active").properties.fill=n.getFor("disabledBackground"),h.interactionsEnabled=!1,t.valueLabels=new s.c(h),t._disposers.push(new s.b(t.valueLabels)),t._disposers.push(t.valueLabels.template),t.position="bottom",i.states.create("active"),i.setStateOnChildren=!0,t.role="group",t.events.on("layoutvalidated",t.handleScrollbar,t,!1),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Legend"))},t.prototype.createDataItem=function(){return new M},t.prototype.validateDataElements=function(){this.scrollbar&&(this.scrollbar.start=0,this.scrollbar.end=1),e.prototype.validateDataElements.call(this)},t.prototype.validateDataElement=function(t){e.prototype.validateDataElement.call(this,t);var i=t.itemContainer,n=t.marker;O.R(t.label);var r=t.valueLabel;i.readerChecked=t.dataContext.visible,t.dataContext.legendDataItem=t;var a=t.label.maxWidth;t.label.width instanceof d.a||(t.label.width=void 0),a>0&&(t.label.maxWidth=a),"right"==r.align&&(r.width=void 0);var o=t.dataContext.legendSettings,s=t.dataContext;!s.createLegendMarker||this.useDefaultMarker&&s instanceof h.a?this.markers.template.propertyFields.fill=void 0:t.childrenCreated||(s.createLegendMarker(n),t.childrenCreated=!0),s.updateLegendValue&&s.updateLegendValue(),s.component&&s.component.updateLegendValue&&s.component.updateLegendValue(s),r.invalid&&r.validate(),""==r.text||void 0==r.text?r.__disabled=!0:r.__disabled=!1,!o||void 0==o.itemValueText&&void 0==o.valueText||(r.__disabled=!1);var l=t.dataContext.visible;void 0===l&&(l=!0),l=g.k(l),t.dataContext.visible=l,i.events.disableType("toggled"),i.isActive=!l,i.isActive?i.setState("active",0):i.setState("default",0),i.events.enableType("toggled")},t.prototype.afterDraw=function(){var t=this,i=this.getPropertyValue("maxWidth"),n=0;this.labels.each((function(e){e.invalid&&(e.maxWidth=void 0,e.validate()),e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight>n&&(n=e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight)}));var r=0;this.valueLabels.each((function(e){e.invalid&&e.validate(),e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight>r&&(r=e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight)}));var a=0;this.markers.each((function(e){e.invalid&&e.validate(),e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight>a&&(a=e.measuredWidth+e.pixelMarginLeft+e.pixelMarginRight)}));var o,s=this.itemContainers.template,l=s.pixelMarginRight+s.pixelMarginLeft,u=n+r+a;g.h(i)?((i-=l)>u&&(i=u),o=i-a-r):o=n,this.labels.each((function(e){("right"==t.valueLabels.template.align||e.measuredWidth>o)&&(e.width instanceof d.a||(e.width=Math.min(e.maxWidth,o-e.pixelMarginLeft-e.pixelMarginRight),e.maxWidth=e.width))})),"right"==this.valueLabels.template.align&&this.valueLabels.each((function(e){e.width=r-e.pixelMarginRight-e.pixelMarginLeft})),e.prototype.afterDraw.call(this)},t.prototype.handleScrollbar=function(){var e=this.scrollbar;this.scrollable&&e&&(e.height=this.measuredHeight,e.x=this.measuredWidth-e.pixelWidth-e.pixelMarginLeft,this.contentHeight>this.measuredHeight?(e.visible=!0,e.thumb.height=e.height*this.measuredHeight/this.contentHeight,this.paddingRight=e.pixelWidth+e.pixelMarginLeft+ +e.pixelMarginRight):e.visible=!1,this.updateMasks())},Object.defineProperty(t.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(e){this.setPropertyValue("position",e)&&("left"==e||"right"==e?(this.margin(10,5,10,10),this.valign="middle",this.contentAlign="none",this.valueLabels.template.align="right",g.h(this.maxColumns)||(this.maxColumns=1),this.width=void 0,this.maxWidth=220):(this.maxColumns=void 0,this.width=Object(d.c)(100),this.valueLabels.template.align="left"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useDefaultMarker",{get:function(){return this.getPropertyValue("useDefaultMarker")},set:function(e){this.setPropertyValue("useDefaultMarker",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollable",{get:function(){return this.getPropertyValue("scrollable")},set:function(e){if(this.setPropertyValue("scrollable",e,!0))if(e){var t=this.createChild(A.a);this.scrollbar=t,t.isMeasured=!1,t.orientation="vertical",t.endGrip.__disabled=!0,t.startGrip.__disabled=!0,t.visible=!1,t.marginLeft=5,this._mouseWheelDisposer=this.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer),this._disposers.push(t.events.on("rangechanged",this.updateMasks,this,!1))}else this._mouseWheelDisposer&&(this._mouseWheelDisposer.dispose(),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=void 0))},enumerable:!0,configurable:!0}),t.prototype.handleWheel=function(e){var t=e.shift.y,i=this.scrollbar;if(i){var n=t/1e3*this.measuredHeight/this.contentHeight,r=i.end-i.start;t>0?(i.start=I.B(0,i.start-n),i.end=i.start+r):(i.end=I.C(1,i.end-n),i.start=i.end-r)}},t.prototype.updateMasks=function(){var e=this;this.scrollbar&&this.itemContainers.each((function(t){t.dy=-e.scrollbar.thumb.pixelY*e.contentHeight/e.measuredHeight,t.maskRectangle={x:0,y:-t.dy,width:e.measuredWidth,height:e.measuredHeight}}))},t.prototype.toggleDataItem=function(e){var t=e.dataContext;!t.visible||t.isHiding||t instanceof h.a&&t.isHidden?(e.color=e.colorOrig,t.appeared=!0,e.itemContainer.isActive=!1,!0===t.hidden&&(t.hidden=!1),t.show?t.show():t.visible=!0,this.svgContainer.readerAlert(this.language.translate("%1 shown",this.language.locale,e.label.readerTitle))):(e.itemContainer.isActive=!0,t.appeared=!0,t.hide?t.hide():t.visible=!1,this.svgContainer.readerAlert(this.language.translate("%1 hidden",this.language.locale,e.label.readerTitle)),e.color=(new p.a).getFor("disabledBackground"))},Object.defineProperty(t.prototype,"preloader",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.handleDataItemPropertyChange=function(e,t){e.valueLabel.invalidate(),e.label.invalidate()},t}(a.a);r.b.registeredClasses.Legend=j,_.c.push({relevant:_.b.widthXS,state:function(e,t){if(e instanceof j&&("left"==e.position||"right"==e.position)){var i=e.states.create(t);return i.properties.position="bottom",i}return null}}),_.c.push({relevant:_.b.heightXS,state:function(e,t){if(e instanceof j&&("top"==e.position||"bottom"==e.position)){var i=e.states.create(t);return i.properties.position="right",i}return null}}),_.c.push({relevant:_.b.isXS,state:function(e,t){if(e instanceof j){var i=e.states.create(t);return i.properties.disabled=!0,i}return null}});var F=i(23),L=i(13),R=i(41),z=i(11),V=i(7),B=i(42),N=function(e){function t(){var t=e.call(this)||this;return t.className="SeriesDataItem",t.values.value={},t.values.value={},t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new w.a,this._disposers.push(new w.b(this._bullets))),this._bullets},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.bullets.clear(),e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"value",{get:function(){return this.values.value.value},set:function(e){this.setValue("value",e)},enumerable:!0,configurable:!0}),t}(y.a),U=function(e){function t(){var i=e.call(this)||this;if(i._ignoreMinMax=!1,i._showBullets=!0,i.legendSettings=new D,i._tmin=new w.a,i._tmax=new w.a,i._smin=new w.a,i._smax=new w.a,i.dataItemsByAxis=new w.a,i.skipFocusThreshold=20,i._itemReaderTextChanged=!1,i.calculatePercent=!1,i.usePercentHack=!0,i.autoDispose=!0,i.simplifiedProcessing=!1,i.constructor===t)throw new Error("'Series' cannot be instantiated directly. Please use a specific series type.");i.className="Series",i.isMeasured=!1,i.layout="none",i.shouldClone=!1,i.setPropertyValue("hidden",!1),i.axisRanges=new s.a,i.axisRanges.events.on("inserted",i.processAxisRange,i,!1),i.minBulletDistance=0,i.mainContainer=i.createChild(l.a),i.mainContainer.shouldClone=!1,i.mainContainer.mask=i.createChild(h.a),i._disposers.push(i.mainContainer);var n=i.mainContainer.createChild(l.a);return i._shouldBeReady.push(n),n.shouldClone=!1,n.layout="none",n.virtualParent=i,i._disposers.push(n),i.bulletsContainer=n,i.tooltip=new k.a,i.tooltip.virtualParent=i,i._disposers.push(i.tooltip),i.hiddenState.transitionEasing=R.a,i.dataItem=i.createDataItem(),i._disposers.push(i.dataItem),i.dataItem.component=i,i.role="group",i.applyTheme(),i}return Object(n.c)(t,e),t.prototype.applyTheme=function(){e.prototype.applyTheme.call(this),F.a.autoSetClassName&&this.bulletsContainer&&(this.bulletsContainer.className=this.className+"-bullets",this.bulletsContainer.setClassName())},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Series"))},t.prototype.createDataItem=function(){return new N},Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},set:function(e){this._chart=e},enumerable:!0,configurable:!0}),t.prototype.positionBullet=function(e){},t.prototype.processBullet=function(e){var t=this,i=e.newValue;i.isTemplate=!0,this.events.once("datavalidated",(function(e){t.itemsFocusable()&&(i.focusable=!0)})),this.invalidate()},t.prototype.removeBullet=function(e){var t=e.oldValue;this.dataItems.each((function(e){var i=e.bullets.getKey(t.uid);i&&i.dispose()})),this.invalidate()},t.prototype.validateDataItems=function(){e.prototype.validateDataItems.call(this),this.processValues(!1)},t.prototype.getFirstValue=function(e,t){for(var i=t;i>=0;i--){var n=this.dataItems.getIndex(i).getActualWorkingValue(e);if(g.h(n))return n}return null},t.prototype.getAbsoluteFirstValue=function(e){for(var t=0;t<this.dataItems.length;t++){var i=this.dataItems.getIndex(t).values[e].value;if(g.h(i))return i}return null},t.prototype.rangeChangeUpdate=function(){e.prototype.rangeChangeUpdate.call(this),this.processValues(!0)},t.prototype.processValues=function(e){var t=this;if(!this.simplifiedProcessing){var i=this.dataItems,n={},r={},a={},o={},s={},l={},u={},c={},h={},p={},d=I.B(0,this.startIndex);d=I.C(d,this.dataItems.length);var f=I.C(this.endIndex,this.dataItems.length);if(g.h(d)||(d=0),g.h(f)||(f=this.dataItems.length),d>0){var m=i.getIndex(d-1);z.d(m.values,(function(e,t){var i=m.getActualWorkingValue(e);g.h(i)&&(c[e]=i)}))}for(var y=function(e){var f=i.getIndex(e);z.d(f.values,(function(e,i){var m=f.getActualWorkingValue(e);if(g.h(m)){g.h(n[e])||(n[e]=0),n[e]++,g.h(r[e])||(r[e]=0),r[e]+=m,g.h(a[e])||(a[e]=0),a[e]+=Math.abs(m),g.h(l[e])||(l[e]=m),u[e]=m,g.h(o[e])?o[e]>m&&(o[e]=m):o[e]=m,g.h(s[e])?s[e]<m&&(s[e]=m):s[e]=m,g.h(h[e])||(h[e]=t.getFirstValue(e,d)),g.h(p[e])||(p[e]=t.getAbsoluteFirstValue(e)),f.setCalculatedValue(e,m-h[e],"change"),f.setCalculatedValue(e,(m-h[e])/h[e]*100,"changePercent"),f.setCalculatedValue(e,m-p[e],"startChange"),f.setCalculatedValue(e,(m-p[e])/p[e]*100,"startChangePercent");var y=c[e];g.h(y)||(y=m),f.setCalculatedValue(e,m-y,"previousChange"),f.setCalculatedValue(e,(m-y)/y*100,"previousChangePercent"),c[e]=m}}))},v=d;v<f;v++)y(v);if(this.calculatePercent){var _=function(e){var n=i.getIndex(e);z.d(n.values,(function(e){var i=a[e],r=n.getActualWorkingValue(e);if(g.h(r))if(i>0){t.usePercentHack&&r==i&&(i=n.values[e].value);var o=r/i*100;n.setCalculatedValue(e,o,"percent")}else n.setCalculatedValue(e,0,"percent")}))};for(v=d;v<f;v++)_(v)}if(d>0){var b=i.getIndex(d-1);z.d(b.values,(function(e){var t=b.values[e].value;b.setCalculatedValue(e,t-l[e],"change"),b.setCalculatedValue(e,(t-l[e])/l[e]*100,"changePercent")}))}var x=this.dataItem;z.d(x.values,(function(e){x.setCalculatedValue(e,r[e],"sum"),x.setCalculatedValue(e,a[e],"absoluteSum"),x.setCalculatedValue(e,r[e]/n[e],"average"),x.setCalculatedValue(e,l[e],"open"),x.setCalculatedValue(e,u[e],"close"),x.setCalculatedValue(e,o[e],"low"),x.setCalculatedValue(e,s[e],"high"),x.setCalculatedValue(e,n[e],"count")}))}},t.prototype.validate=function(){O.w()&&this.filters.clear(),v.d(this.axisRanges.iterator(),(function(e){e.validate()})),e.prototype.validate.call(this);var t=this.bulletsContainer;if(t.fill=this.fill,t.stroke=this.stroke,t.x=this.pixelX,t.y=this.pixelY,this.bulletsContainer.children.length>0)if(this._showBullets){for(var i=0;i<this.startIndex;i++){(n=this.dataItems.getIndex(i))&&n.bullets.each((function(e,t){t.__disabled=!0}))}for(i=this.dataItems.length-1;i>this.endIndex;i--){var n;(n=this.dataItems.getIndex(i))&&n.bullets.each((function(e,t){t.__disabled=!0}))}}else this.bulletsContainer.children.each((function(e){e.__disabled=!0}));this.updateTooltipBounds()},t.prototype.updateTooltipBounds=function(){if(this.topParent){var e={x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight};this.tooltip.setBounds(e)}},t.prototype.shouldCreateBullet=function(e,t){return!0},t.prototype.validateDataElement=function(t){var i=this;e.prototype.validateDataElement.call(this,t),this._showBullets?(this.isHidden||(this.bulletsContainer.visible=!0),this.bullets.each((function(e){var n=t.bullets.getKey(e.uid);if(i.shouldCreateBullet(t,e)){if(!n){var r=e.propertyFields.disabled,a=t.dataContext;r&&a&&!1===a[r]?(e.applyOnClones=!1,e.disabled=!1,n=e.clone(),e.disabled=!0,e.applyOnClones=!0):n=e.clone(),n.shouldClone=!1,t.addSprite(n),i.visible&&!i.isHiding||n.hide(0)}var o=n.dataItem;if(o!=t){o&&o.bullets.setKey(e.uid,void 0);var s=i.itemReaderText;n instanceof P&&(s||(s="{"+n.xField+"}: {"+n.yField+"}"),n.isDynamic&&(t.events.on("workingvaluechanged",n.deepInvalidate,n,!1),i.dataItem.events.on("workingvaluechanged",n.deepInvalidate,n,!1)),n.deepInvalidate()),n.focusable&&(n.events.on("focus",(function(e){n.readerTitle=i.populateString(s,n.dataItem)}),void 0,!1),n.events.on("blur",(function(e){n.readerTitle=""}),void 0,!1)),n.hoverable&&(n.events.on("over",(function(e){n.readerTitle=i.populateString(s,n.dataItem)}),void 0,!1),n.events.on("out",(function(e){n.readerTitle=""}),void 0,!1))}n.parent=i.bulletsContainer,t.bullets.setKey(e.uid,n),n.maxWidth=t.itemWidth,n.maxHeight=t.itemHeight,n.__disabled=!1,i.positionBullet(n)}else n&&(n.__disabled=!0)}))):this.bulletsContainer.visible=!1},t.prototype.handleDataItemWorkingValueChange=function(e,t){this.dataRangeInvalid||this.invalidateProcessedData()},Object.defineProperty(t.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(e){this._ignoreMinMax=e,this.invalidateDataItems()},enumerable:!0,configurable:!0}),t.prototype.createMask=function(){},t.prototype.processAxisRange=function(e){this.rangesContainer||(this.rangesContainer=this.createChild(l.a),this.rangesContainer.shouldClone=!1,this.rangesContainer.isMeasured=!1);var t=e.newValue;t&&(t.contents.parent=this.rangesContainer,t.isRange=!0,t.events.on("valuechanged",this.invalidateDataItems,this,!1))},t.prototype.getAxisField=function(e){},t.prototype.showTooltipAtPosition=function(e,t){},Object.defineProperty(t.prototype,"minBulletDistance",{get:function(){return this.getPropertyValue("minBulletDistance")},set:function(e){this.setPropertyValue("minBulletDistance",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new s.c(new P),this._bullets.template.virtualParent=this,this._bullets.events.on("inserted",this.processBullet,this,!1),this._bullets.events.on("removed",this.removeBullet,this,!1),this._disposers.push(new s.b(this._bullets)),this._disposers.push(this._bullets.template)),this._bullets},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e){},Object.defineProperty(t.prototype,"hiddenInLegend",{get:function(){return this.getPropertyValue("hiddenInLegend")},set:function(e){this.setPropertyValue("hiddenInLegend",e)&&this.chart&&this.chart.feedLegend()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(e){this.setPropertyValue("name",e);var t=this.legendDataItem;t&&(t.component.invalidate(),t.component.invalidateRawData()),this.readerTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemReaderText",{get:function(){var e=this._itemReaderText;return e||(this.tooltipText?e=O.C(this.tooltipText):this.tooltipHTML&&(e=O.C(this.tooltipHTML))),this._adapterO?this._adapterO.apply("itemReaderText",e):e},set:function(e){this._itemReaderText=e,this._itemReaderTextChanged=!0},enumerable:!0,configurable:!0}),t.prototype.itemsFocusable=function(){return!(this.dataItems.length>=this.skipFocusThreshold)},Object.defineProperty(t.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(e){this._legendDataItem=e,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),t.prototype.updateLegendValue=function(e,t){if(this.legendDataItem){var i=this.legendSettings,n=this.legendDataItem,r=n.label,a=n.valueLabel;e&&!e.isDisposed()||t?(a&&(i.itemValueText&&(a.text=i.itemValueText),a.dataItem=e),r&&(i.itemLabelText&&(r.text=i.itemLabelText),r.dataItem=e)):(r&&((i.labelText||void 0!=i.itemLabelText)&&(r.text=i.labelText),r.dataItem=this.dataItem),a&&((i.valueText||void 0!=i.itemValueText)&&(a.text=i.valueText),a.dataItem=this.dataItem))}},t.prototype.copyFrom=function(t){this.bullets.copyFrom(t.bullets),this.bulletsContainer.copyFrom(t.bulletsContainer),this.calculatePercent=t.calculatePercent,this.usePercentHack=t.usePercentHack,this.simplifiedProcessing=t.simplifiedProcessing,e.prototype.copyFrom.call(this,t)},t.prototype.raiseCriticalError=function(e){this._chart&&this._chart.modal&&(this._chart.modal.content=this._chart.adapter.apply("criticalError",e).message,this._chart.modal.closable=!1,F.a.suppressErrors||this._chart.modal.open(),this._chart.disabled=!0),F.a.verbose&&console.log(e)},t.prototype.applyFilters=function(){var t=this;e.prototype.applyFilters.call(this),this.bulletsContainer.filters.clear(),v.d(this.filters.iterator(),(function(e){t.bulletsContainer.filters.push(e.clone())}))},Object.defineProperty(t.prototype,"heatRules",{get:function(){var e=this;return this._heatRules||(this._heatRules=new s.a,this._heatRules.events.on("inserted",(function(t){var i=t.newValue,n=i.target;if(n){var r=i.dataField;g.d(r)||(r="value");var a=e.dataItem,o=i.property,s=g.l(i.minValue),u=g.l(i.maxValue);g.h(s)||g.h(u)||e.dataItem.events.on("calculatedvaluechanged",(function(t){t.property==r&&v.d(e.dataItems.iterator(),(function(e){var t=!1;V.d(e.sprites,(function(e){if(e.clonedFrom==n){var i=e;i[o]=i[o],t=!0}})),t||V.d(e.sprites,(function(e){e instanceof l.a&&v.d(e.children.iterator(),(function(e){if(e.className==n.className){var t=e;t[o]=t[o]}else e instanceof l.a&&e.deepInvalidate()}))}))}))})),e.dataItems.template.events.on("workingvaluechanged",(function(e){if(e.property==r){var t=e.target,i=!1;V.d(t.sprites,(function(e){if(e.clonedFrom==n){var t=e;t[o]=t[o],i=!0}})),i||V.d(t.sprites,(function(e){e instanceof l.a&&v.d(e.children.iterator(),(function(e){if(e.className==n.className){var t=e;t[o]=t[o]}else e instanceof l.a&&e.deepInvalidate()}))}))}})),n.adapter.add(o,(function(e,t,n){var o=g.l(i.minValue),s=g.l(i.maxValue),l=i.min,u=i.max;if(t instanceof h.a){var c=t.propertyFields[n];if(c&&t.dataItem){var p=t.dataItem.dataContext;if(p&&g.d(p[c]))return e}}var d=t.dataItem;if((g.h(o)||(o=a.values[r].low),g.h(s)||(s=a.values[r].high),d)&&d.values[r]){var f=d.getActualWorkingValue(r);if(g.d(l)&&g.d(u)&&g.h(o)&&g.h(s)&&g.h(f)){var m=void 0;if(m=i.logarithmic?(Math.log(f)*Math.LOG10E-Math.log(o)*Math.LOG10E)/(Math.log(s)*Math.LOG10E-Math.log(o)*Math.LOG10E):(f-o)/(s-o),!g.h(f)||g.h(m)&&Math.abs(m)!=1/0||(m=.5),g.h(l))return l+(u-l)*m;if(l instanceof L.a)return new L.a(B.c(l.rgb,u.rgb,m))}}return e}))}}))),this._heatRules},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(t){var i;if(t){if(g.d(t.bullets)&&g.e(t.bullets))for(var n=0,r=t.bullets.length;n<r;n++){var a=t.bullets[n];g.d(a.type)||(a.type="Bullet")}g.d(t.heatRules)&&g.e(t.heatRules)&&(i=t.heatRules,delete t.heatRules)}if(e.prototype.processConfig.call(this,t),i){for(n=0,r=i.length;n<r;n++){var o=i[n],l=this;if(g.d(o.target)&&g.j(o.target))if(this.map.hasKey(o.target))l=this.map.getKey(o.target);else for(var u=o.target.split("."),c=0;c<u.length;c++)if(l instanceof s.a){var h=l.getIndex(g.l(u[c]));l=h||l[u[c]]}else{var p=u[c].match(/^(.*)\[([0-9]+)\]/);l=p?l[p[1]]instanceof s.a?l[p[1]].getIndex(g.l(p[2])):l[p[1]][g.l(p[2])]:l[u[c]]}o.target=l,g.d(o.min)&&(o.min=this.maybeColorOrPercent(o.min)),g.d(o.max)&&(o.max=this.maybeColorOrPercent(o.max))}e.prototype.processConfig.call(this,{heatRules:i})}},t.prototype.configOrder=function(t,i){return t==i?0:"heatRules"==t?1:"heatRules"==i?-1:e.prototype.configOrder.call(this,t,i)},t.prototype.setVisibility=function(t){e.prototype.setVisibility.call(this,t),this.bulletsContainer.visible=t},t}(a.a);r.b.registeredClasses.Series=U,r.b.registeredClasses.SeriesDataItem=N;var W=i(75),G=function(e){function t(){var t=e.call(this)||this;return t.className="SerialChartDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(b),H=function(e){function t(){var t=e.call(this)||this;t.className="SerialChart",t.colors=new W.a,t._usesData=!1;var i=t.chartContainer.createChild(l.a);i.shouldClone=!1,i.width=Object(d.c)(100),i.height=Object(d.c)(100),i.isMeasured=!1,i.layout="none",i.zIndex=2,t.seriesContainer=i;var n=t.chartContainer.createChild(l.a);return n.shouldClone=!1,n.width=Object(d.c)(100),n.height=Object(d.c)(100),n.isMeasured=!1,n.zIndex=3,n.layout="none",t.bulletsContainer=n,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this.colors&&this.colors.dispose(),this.patterns&&this.patterns.dispose()},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Serial chart"))},Object.defineProperty(t.prototype,"series",{get:function(){return this._series||(this._series=new s.c(this.createSeries()),this._series.events.on("inserted",this.handleSeriesAdded,this,!1),this._series.events.on("removed",this.handleSeriesRemoved,this,!1),this._disposers.push(new s.b(this._series,!1)),this._disposers.push(this._series.template)),this._series},enumerable:!0,configurable:!0}),t.prototype.handleSeriesRemoved=function(e){var t=e.oldValue;this.dataUsers.removeValue(t),this.dataUsers.each((function(e){e.invalidateDataItems()})),t.autoDispose?t.dispose():(t.parent=void 0,t.bulletsContainer.parent=void 0);var i=this.legend;if(i){for(var n=this.legend.dataItems,r=n.length-1;r>=0;r--){var a=n.getIndex(r);a&&a.dataContext==t&&i.dataItems.remove(a)}for(r=i.data.length-1;r>=0;r--){var o=i.data[r];o&&o==t&&V.o(i.data,o)}}},t.prototype.handleSeriesAdded=function(e){var t=this,i=e.newValue;i.isDisposed()||(i.chart=this,i.parent=this.seriesContainer,i.bulletsContainer.parent=this.bulletsContainer,this._dataUsers.moveValue(i),i.addDisposer(new o.b((function(){t.dataUsers.removeValue(i)}))),this.handleSeriesAdded2(i),this.handleLegendSeriesAdded(i))},t.prototype.handleLegendSeriesAdded=function(e){e.hiddenInLegend||this.legend&&this.legend.addData(e)},t.prototype.handleSeriesAdded2=function(e){var t=this;this.dataInvalid||this._disposers.push(r.b.events.once("exitframe",(function(){e.data&&0!=e.data.length||(e.data=t.data,e.showOnInit&&(e.reinit(),e.setPropertyValue("showOnInit",!1),e.showOnInit=!0),e.isDisposed()||e.events.once("datavalidated",(function(){e.data==t.data&&(e._data=[])})))})))},t.prototype.feedLegend=function(){var e=this.legend;if(e){var t=[];v.d(this.series.iterator(),(function(e){e.hiddenInLegend||t.push(e)})),e.dataFields.name="name",e.data=t}},t.prototype.createSeries=function(){return new U},Object.defineProperty(t.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(e){this.setPropertyValue("colors",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(e){this.setPropertyValue("patterns",e,!0)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.series.copyFrom(t.series)},t.prototype.appear=function(){e.prototype.appear.call(this),this.series.each((function(e){e.showOnInit&&e.inited&&e.appear()}))},t}(x);r.b.registeredClasses.SerialChart=H;var X=i(71),Y=function(e){function t(){var t=e.call(this)||this;t._axis=new o.d,t.dataItems=new s.a,t.className="AxisBreak",t.breakSize=.01,t.marginLeft=-5,t.marginRight=-5,t.marginTop=-5,t.marginBottom=-5;var i=new p.a,n=new X.a;n.fill=i.getFor("background"),n.stroke=Object(L.b)(),n.fillOpacity=.9,n.zIndex=0,t._fillShape=n;var r=new X.a;r.fill=Object(L.b)(),r.stroke=i.getFor("grid"),r.strokeOpacity=.3,r.zIndex=1,t._startLine=r;var a=new X.a;return a.fill=Object(L.b)(),a.stroke=Object(L.b)("#000000"),a.strokeOpacity=.3,a.zIndex=2,t._endLine=a,t._disposers.push(t._axis),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this._fillShape&&this._fillShape.dispose(),this._startLine&&this._startLine.dispose(),this._endLine&&this._endLine.dispose()},Object.defineProperty(t.prototype,"startLine",{get:function(){return this._startLine},set:function(e){this._startLine&&this._startLine.dispose(),this._startLine=e,this.addBreakSprite(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endLine",{get:function(){return this._endLine},set:function(e){this._endLine&&this._endLine.dispose(),this._endLine=e,this.addBreakSprite(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillShape",{get:function(){return this._fillShape},set:function(e){this._fillShape&&this._fillShape.dispose(),this._fillShape=e,this.addBreakSprite(e)},enumerable:!0,configurable:!0}),t.prototype.addBreakSprite=function(e){e.parent=this,e.isMeasured=!1,this._disposers.push(e)},Object.defineProperty(t.prototype,"axis",{get:function(){return this._axis.get()},set:function(e){if(this._axis.get()!==e){this._axis.set(e,e.renderer.gridContainer.events.on("transformed",this.invalidate,this,!1)),e.renderer.createBreakSprites(this);var t=e.axisBreaks.template;this.startLine.copyFrom(t.startLine),this.endLine.copyFrom(t.endLine),this.fillShape.copyFrom(t.fillShape)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"breakSize",{get:function(){return this.getPropertyValue("breakSize")},set:function(e){this.setPropertyValue("breakSize",e)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startPoint",{get:function(){var e=this.axis.renderer;if(e)return e.positionToPoint(this.startPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPoint",{get:function(){var e=this.axis.renderer;if(e)return e.positionToPoint(this.endPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startPosition",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPosition",{get:function(){},enumerable:!0,configurable:!0}),t.prototype.draw=function(){(e.prototype.draw.call(this),this.axis)&&this.axis.renderer.updateBreakElement(this)},Object.defineProperty(t.prototype,"startValue",{get:function(){return this.getPropertyValue("startValue")},set:function(e){this.setPropertyValue("startValue",e)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endValue",{get:function(){return this.getPropertyValue("endValue")},set:function(e){this.setPropertyValue("endValue",e)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),t}(l.a);r.b.registeredClasses.AxisBreak=Y;var q,Z=i(49),K=i(55),$=function(e){function t(){var t=e.call(this)||this;return t.className="AxisDataItem",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"grid",{get:function(){if(!this._grid){var e=this.component;if(e){var t,i=void 0;if(this.isRange){if((i=e.axisRanges.template.grid).disabled)return;t=i.clone()}else{if((i=e.renderer.grid.template).disabled)return;t=e.renderer.grid.create(),this._disposers.push(new o.b((function(){e.renderer.grid.removeValue(t)})))}this.grid=t,t.shouldClone=!1,this._disposers.push(t),t.axis=this.component}}return this._grid},set:function(e){this._grid&&this._grid!=e&&(V.o(this.sprites,this._grid),this._grid.dataItem=void 0),e&&(e.dataItem&&e.dataItem!=this&&(V.o(e.dataItem.sprites,e),e.dataItem.grid=void 0),this.addSprite(e)),this._grid=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tick",{get:function(){if(!this._tick){var e=this.component;if(e){var t,i=void 0;if(this.isRange){if((i=e.axisRanges.template.tick).disabled)return;t=i.clone()}else{if((i=e.renderer.ticks.template).disabled)return;t=e.renderer.ticks.create(),this._disposers.push(new o.b((function(){e.renderer.ticks.removeValue(t)})))}this.tick=t,t.axis=this.component,t.shouldClone=!1,this._disposers.push(t)}}return this._tick},set:function(e){this._tick&&this._tick!=e&&(V.o(this.sprites,this._tick),this._tick.dataItem=void 0),e&&(e.dataItem&&e.dataItem!=this&&(V.o(e.dataItem.sprites,e),e.dataItem.tick=void 0),this.addSprite(e)),this._tick=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){if(!this._label){var e=this.component;if(e){var t,i=void 0;if(this.isRange){if((i=e.axisRanges.template.label).disabled)return;t=i.clone()}else{if((i=e.renderer.labels.template).disabled)return;t=e.renderer.labels.create(),this._disposers.push(new o.b((function(){e.renderer.labels.removeValue(t)})))}this._disposers.push(t),this.label=t,t.shouldClone=!1,t.axis=this.component,t.virtualParent=e}}return this._label},set:function(e){this._label&&this._label!=e&&(V.o(this.sprites,this._label),this._label.dataItem=void 0),e&&(e.dataItem&&e.dataItem!=this&&(V.o(e.dataItem.sprites,e),e.dataItem.label=void 0),this.addSprite(e)),this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisFill",{get:function(){if(!this._axisFill){var e=this.component;if(e){var t,i=void 0;if(this.isRange){if(i=e.axisRanges.template.axisFill,!this.isTemplate&&i.disabled)return;t=i.clone()}else{if((i=e.renderer.axisFills.template).disabled)return;t=e.renderer.axisFills.create(),this._disposers.push(new o.b((function(){e.renderer.axisFills.removeValue(t)})))}this.axisFill=t,t.shouldClone=!1,this._disposers.push(t)}}return this._axisFill},set:function(e){this._axisFill&&this._axisFill!=e&&(V.o(this.sprites,this._axisFill),this._axisFill.dataItem=void 0),e&&(e.dataItem&&e.dataItem!=this&&(V.o(e.dataItem.sprites,e),e.dataItem.axisFill=void 0),e.axis=this.component,this.addSprite(e)),this._axisFill=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){this._text=e,this._label&&(this._label.text=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contents",{get:function(){if(!this._contents){var e=new l.a;this.addSprite(e),e.isMeasured=!1,this._contents=e;var t=this.component;if(t){var i=t.renderer.createFill(this.component);i.disabled=!1,i.axis=t,this.addSprite(i),this._mask=i,e.mask=i}}return this._contents},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisBreak",{get:function(){return this._axisBreak},set:function(e){this._axisBreak&&this._axisBreak.dataItems.removeValue(this),e&&e.dataItems.push(this),this._axisBreak=e},enumerable:!0,configurable:!0}),t.prototype.validate=function(){this.component&&this.component.validateDataElement(this)},t.prototype.appendChildren=function(){this.component&&this.component.appendDataItem(this)},t.prototype.hasProperty=function(t){return"component"==t||e.prototype.hasProperty.call(this,t)},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.text=t.text,t.bullet&&(this.bullet=t.bullet.clone()),this.minPosition=t.minPosition,this.maxPosition=t.maxPosition},t.prototype.setVisibility=function(t,i){e.prototype.setVisibility.call(this,t,i),this._contents&&(this._contents.visible=t)},Object.defineProperty(t.prototype,"bullet",{get:function(){return this._bullet},set:function(e){this._bullet&&this._bullet!=e&&(V.o(this.sprites,this._bullet),this._bullet.dataItem=void 0),this._bullet=e,e&&this.addSprite(e)},enumerable:!0,configurable:!0}),t}(y.a);!function(e){e[e.Start=0]="Start",e[e.Middle=.5]="Middle",e[e.End=1]="End"}(q||(q={}));var J=function(e){function t(){var i=e.call(this)||this;if(i._gridCount=10,i._series=new s.a,i.autoDispose=!0,i._axisItemCount=0,i.constructor===t)throw new Error("'Axis' cannot be instantiated directly. Please use a specific axis type.");i.hideTooltipWhileZooming=!0,i.minWidth=1e-4,i.minHeight=1e-4,i.className="Axis",i.shouldClone=!1,i.setPropertyValue("cursorTooltipEnabled",!0),i.toggleZoomOutButton=!0,i.zoomable=!0;var n=new p.a;i.title=new u.a,i.title.shouldClone=!1,i._disposers.push(i.title),i.setPropertyValue("startLocation",0),i.setPropertyValue("endLocation",1),i._dataItemsIterator=new v.a(i.dataItems,(function(){return i.dataItems.create()})),i._dataItemsIterator.createNewItems=!0;var r=new k.a;i._disposers.push(r),r.label.padding(5,10,5,10),r.background.pointerLength=5,r.fitPointerToBounds=!0,r.background.filters.clear(),r.virtualParent=i;var a=r.background;return a.cornerRadius=0,a.fill=n.getFor("alternativeBackground"),a.stroke=a.fill,a.strokeWidth=1,a.fillOpacity=1,r.label.fill=n.getFor("alternativeText"),i.tooltip=r,i.readerHidden=!0,i.events.on("rangechangestarted",(function(){i.series.each((function(e){e.hideTooltipWhileZooming&&(e.tooltip.hide(),e.tooltip.preventShow=!0)})),i.hideTooltipWhileZooming&&(i.tooltip.hide(),i.tooltip.preventShow=!0)}),void 0,!1),i.events.on("rangechangeended",(function(){i.series.each((function(e){e.hideTooltipWhileZooming&&(e.tooltip.hide(),e.tooltip.preventShow=!1)})),i.hideTooltipWhileZooming&&(i.tooltip.hide(),i.tooltip.preventShow=!1)}),void 0,!1),i.applyTheme(),i}return Object(n.c)(t,e),t.prototype.fillRule=function(e,t){g.h(t)||(t=e.index),t/2==Math.round(t/2)?(e.axisFill.__disabled=!0,e.axisFill.opacity=0):(e.axisFill.opacity=1,e.axisFill.__disabled=!1)},t.prototype.createDataItem=function(){return new $},t.prototype.invalidateLayout=function(){e.prototype.invalidateLayout.call(this),v.d(this.series.iterator(),(function(e){e.invalidateLayout()}))},t.prototype.invalidateSeries=function(){v.d(this.series.iterator(),(function(e){e.invalidate()}))},t.prototype.validateDataElements=function(){this._axisItemCount=0,this.ghostLabel&&(this.renderer.updateLabelElement(this.ghostLabel,this.start,this.end),this.ghostLabel.validate())},t.prototype.updateGridCount=function(){if(this.renderer){var e=this.axisLength/this.renderer.minGridDistance;e!=this._gridCount&&(this._gridCount=e,this.clearCache())}},t.prototype.validateLayout=function(){this.axisFullLength=this.axisLength/(this.end-this.start),e.prototype.validateLayout.call(this),this.updateGridCount();var t=this.renderer;t&&(t.updateAxisLine(),t.updateTooltip(),t.updateBaseGridElement()),this._prevLength!=this.axisLength&&(this.dispatchImmediately("lengthchanged"),this._prevLength=this.axisLength)},t.prototype.initRenderer=function(){},t.prototype.appendDataItem=function(e){var t=this.renderer,i=e.tick;i&&(i.above?i.parent=t.bulletsContainer:i.parent=t.gridContainer),e.label&&(e.label.parent=t);var n=e.axisFill;n&&(n.above?n.parent=t.bulletsContainer:n.parent=t.gridContainer);var r=e.grid;r&&(r.above?r.parent=t.bulletsContainer:r.parent=t.gridContainer),e.bullet&&(e.bullet.parent=t.bulletsContainer)},t.prototype.validate=function(){e.prototype.validate.call(this),this.validateLayout(),this.renderer.updateGridContainer()},t.prototype.validateAxisRanges=function(){var e=this;v.d(this.axisRanges.iterator(),(function(t){e.appendDataItem(t),e.validateDataElement(t),t.grid&&t.grid.validate(),t.tick&&t.tick.validate(),t.axisFill&&t.axisFill.validate(),t.label&&t.label.validate()}))},t.prototype.validateBreaks=function(){this._axisBreaks&&v.d(this._axisBreaks.iterator(),(function(e){e.invalidate()}))},t.prototype.processBreak=function(e){var t=e.newValue;t.parent=this.renderer.breakContainer,t.axis=this},t.prototype.registerSeries=function(e){var t=this;return this.series.moveValue(e),new o.c([new o.b((function(){t.series.removeValue(e)})),this.events.on("lengthchanged",e.invalidate,e,!1),this.events.on("lengthchanged",e.createMask,e,!1),this.events.on("startchanged",e.invalidate,e,!1),this.events.on("endchanged",e.invalidate,e,!1)])},Object.defineProperty(t.prototype,"renderer",{get:function(){return this._renderer},set:function(e){if(e!=this._renderer){this._renderer=e,e.chart=this.chart,e.axis=this,e.parent=this,this.title.parent=this,this.initRenderer(),this._disposers.push(e.gridContainer.events.on("maxsizechanged",this.invalidate,this,!1));var t=this.renderer.labels.create();this._disposers.push(t),t.dataItem=this.dataItems.template.clone(),t.text="L",t.parent=this.renderer,t.shouldClone=!1,t.fillOpacity=0,t.opacity=0,t.strokeOpacity=0,t.interactionsEnabled=!1,t.validate(),this.ghostLabel=t,this.events.on("beforedatavalidated",(function(){t.text="L"}),void 0,!1)}},enumerable:!0,configurable:!0}),t.prototype.positionToAngle=function(e){return this.renderer.positionToAngle(e)},t.prototype.pointToPosition=function(e){return this.renderer.pointToPosition(e)},t.prototype.positionToCoordinate=function(e){return this.renderer.positionToCoordinate(e)},t.prototype.getAnyRangePath=function(e,t){return this.renderer.getPositionRangePath(e,t)},t.prototype.anyToPosition=function(e){return 0},t.prototype.anyToPoint=function(e){return{x:0,y:0,angle:0}},t.prototype.getPositionRangePath=function(e,t){return this.renderer?this.renderer.getPositionRangePath(e,t):""},Object.defineProperty(t.prototype,"axisLength",{get:function(){return this.renderer?this.renderer.axisLength:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(e){this.setPropertyValue("cursorTooltipEnabled",e)&&(e&&this.renderer?this.renderer.updateTooltip():this.tooltip&&this.tooltip.hide(0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toggleZoomOutButton",{get:function(){return this.getPropertyValue("toggleZoomOutButton")},set:function(e){this.setPropertyValue("toggleZoomOutButton",e)},enumerable:!0,configurable:!0}),t.prototype.hideTooltip=function(t){e.prototype.hideTooltip.call(this,t),this._tooltipPosition=void 0},t.prototype.showTooltipAtPosition=function(e,t){var i=this._tooltip;if(!i||this.dataItems.length<=0)this._tooltipPosition=void 0;else{if(t||(e=this.toAxisPosition(e)),!g.h(e)||e<this.start||e>this.end)return i.hide(0),void(this._tooltipPosition=void 0);var n=this.renderer;i.parent||(i.parent=this.tooltipContainer);var r=n.tooltipLocation,a=this.getCellStartPosition(e),o=this.getCellEndPosition(e);if("fixed"==this.tooltipPosition&&(e=a+(o-a)*r),e=I.i(e,this.start,this.end),this._tooltipPosition!=e){this._tooltipPosition=e;var s=n.tooltipLocation2,l=n.positionToPoint(a,s),u=n.positionToPoint(o,s);this.currentItemStartPoint=l,this.currentItemEndPoint=u,n.fullWidthTooltip&&(i.width=u.x-l.x,i.height=u.y-l.y);var c=n.positionToPoint(e,s),h=O.J(c,this.renderer.line);i.text=this.getTooltipText(e),i.text&&(i.delayedPointTo(h),i.show())}this.cursorTooltipEnabled&&!this.tooltip.disabled||i.hide(0)}},t.prototype.toAxisPosition=function(e){if(void 0!=(e=this.renderer.toAxisPosition(e)))return e*=this.end-this.start,e=this.renderer.inversed?this.end-e:this.start+e},t.prototype.toGlobalPosition=function(e){return this.renderer.inversed?e=this.end-e:e-=this.start,e/(this.end-this.start)},t.prototype.getTooltipText=function(e){},t.prototype.updateTooltip=function(e,t){var i=this._tooltip;i&&(i.fixDoc=!1,i.pointerOrientation=e,i.setBounds(O.K(t,this.renderer.line)))},t.prototype.roundPosition=function(e,t,i){return e},t.prototype.getCellStartPosition=function(e){return e},t.prototype.getCellEndPosition=function(e){return e},Object.defineProperty(t.prototype,"axisRanges",{get:function(){if(!this._axisRanges){var e=this.createDataItem();e.isRange=!0,e.axisFill=this.renderer.axisFills.template.clone(),e.grid=this.renderer.grid.template.clone(),e.tick=this.renderer.ticks.template.clone(),e.label=this.renderer.labels.template.clone(),e.isTemplate=!0,e.component=this,e.axisFill.disabled=!1,e.tick.disabled=!1,e.grid.disabled=!1,e.label.disabled=!1,this._axisRanges=new s.c(e),this._axisRanges.events.on("inserted",this.processAxisRange,this,!1),this._disposers.push(new s.b(this._axisRanges)),this._disposers.push(this._axisRanges.template)}return this._axisRanges},enumerable:!0,configurable:!0}),t.prototype.processAxisRange=function(e){var t=e.newValue;t.component=this,t.isRange=!0},Object.defineProperty(t.prototype,"axisBreaks",{get:function(){return this._axisBreaks||(this._axisBreaks=new Z.c(this.createAxisBreak(),(function(e,t){return K.a(e.adjustedStartValue,t.adjustedStartValue)})),this._axisBreaks.events.on("inserted",this.processBreak,this,!1),this._disposers.push(new s.b(this._axisBreaks)),this._disposers.push(this._axisBreaks.template)),this._axisBreaks},enumerable:!0,configurable:!0}),t.prototype.createAxisBreak=function(){return new Y},Object.defineProperty(t.prototype,"series",{get:function(){return this._series||(this._series=new s.a),this._series},enumerable:!0,configurable:!0}),t.prototype.processSeriesDataItems=function(){},t.prototype.processSeriesDataItem=function(e,t){},t.prototype.postProcessSeriesDataItems=function(e){},t.prototype.postProcessSeriesDataItem=function(e){},t.prototype.updateAxisBySeries=function(){},t.prototype.hideUnusedDataItems=function(){var e=this,t=this._dataItemsIterator;t.createNewItems=!1,v.d(t.iterator(),(function(t){e.validateDataElement(t),t.__disabled=!0})),t.clear(),t.createNewItems=!0},t.prototype.getSeriesDataItem=function(e,t,i){},t.prototype.getAngle=function(e,t,i,n,r){},t.prototype.getX=function(e,t,i,n,r){},t.prototype.getPositionX=function(e,t,i,n,r){},t.prototype.getY=function(e,t,i,n,r){},t.prototype.getPositionY=function(e,t,i,n,r){},Object.defineProperty(t.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),t.prototype.dataChangeUpdate=function(){},t.prototype.seriesDataChangeUpdate=function(e){},t.prototype.adjustDifference=function(e,t){var i=t-e;if(g.h(i))return this._axisBreaks&&v.e(this._axisBreaks.iterator(),(function(n){var r=n.adjustedStartValue,a=n.adjustedEndValue;if(g.h(r)&&g.h(a)){if(r>t)return!1;if(a>=e&&g.h(r)&&g.h(a)){var o=n.breakSize,s=I.y({start:r,end:a},{start:e,end:t});s&&(i-=(s.end-s.start)*(1-o))}return!0}})),i},t.prototype.isInBreak=function(e){if(this._axisBreaks)return v.f(this._axisBreaks.iterator(),(function(t){return e>=t.adjustedStartValue&&e<=t.adjustedEndValue}))},t.prototype.fixAxisBreaks=function(){var e=this;if(this._axisBreaks){var t=this._axisBreaks;if(t.length>0){V.d(v.m(t.iterator()),(function(t){var i=I.C(t.startValue,t.endValue),n=I.B(t.startValue,t.endValue);t.adjustedStartValue=i,t.adjustedEndValue=n,e._axisBreaks.update(t)}));var i=t.first,n=Math.min(i.startValue,i.endValue);v.d(t.iterator(),(function(e){var t=e.adjustedStartValue,i=e.adjustedEndValue;t<n&&(t=n,i<n&&(i=n)),e.adjustedStartValue=t,e.adjustedEndValue=i}))}}},Object.defineProperty(t.prototype,"startIndex",{get:function(){return 0},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endIndex",{get:function(){return this.dataItems.length},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.getPositionLabel=function(e){return Math.round(100*e)+"%x"},Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},set:function(e){this._chart=e},enumerable:!0,configurable:!0}),t.prototype.createSeriesRange=function(e){var t=this.axisRanges.create();return t.component=this,t.axisFill=this.renderer.axisFills.template.clone(),t.axisFill.disabled=!1,t.axisFill.fillOpacity=0,t.grid=this.renderer.grid.template.clone(),t.grid.disabled=!0,t.tick=this.renderer.ticks.template.clone(),t.tick.disabled=!0,t.label=this.renderer.labels.template.clone(),t.label.disabled=!0,t.addDisposer(new o.b((function(){e.axisRanges.removeValue(t)}))),e.axisRanges.push(t),t},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.renderer?this.renderer.copyFrom(t.renderer):t.renderer&&(this.renderer=t.renderer.clone(),this._disposers.push(this.renderer)),t.title&&(this.title?this.title.copyFrom(t.title):(this.title=t.title.clone(),this.title.parent=this),this._disposers.push(this.title))},t.prototype.resetIterators=function(){this._dataItemsIterator.reset()},t.prototype.processConfig=function(t){if(t&&g.d(t.axisRanges)&&g.e(t.axisRanges))for(var i=0,n=t.axisRanges.length;i<n;i++){var r=t.axisRanges[i];g.d(r.series)&&g.j(r.series)&&this.map.hasKey(r.series)&&(t.axisRanges[i]=this.createSeriesRange(this.map.getKey(r.series)),delete r.series,t.axisRanges[i].config=r)}e.prototype.processConfig.call(this,t)},t.prototype.configOrder=function(t,i){return t==i?0:"title"==t?1:"title"==i||"component"==t?-1:"component"==i?1:e.prototype.configOrder.call(this,t,i)},Object.defineProperty(t.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(e){this.setPropertyValue("startLocation",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(e){this.setPropertyValue("endLocation",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setDisabled=function(t){var i=e.prototype.setDisabled.call(this,t);return this.renderer&&(this.renderer.gridContainer.disabled=t),i},Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(e){this._title&&this._title!=e&&this._title.dispose(),e&&(this._title=e,e.parent=this,e.shouldClone=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(e){this.setPropertyValue("hideTooltipWhileZooming",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomable",{get:function(){return this.getPropertyValue("zoomable")},set:function(e){this.setPropertyValue("zoomable",e)},enumerable:!0,configurable:!0}),t}(a.a);r.b.registeredClasses.Axis=J,r.b.registeredClasses.AxisDataItem=$,_.c.push({relevant:_.b.maybeXS,state:function(e,t){if(e instanceof J&&e.tooltip){var i=e.states.create(t);return i.properties.cursorTooltipEnabled=!1,i}return null}});var Q=function(e){function t(){var t=e.call(this)||this;t.className="AxisLine",t.element=t.paper.add("path");var i=new p.a;return t.stroke=i.getFor("grid"),t.strokeOpacity=.15,t.pixelPerfect=!0,t.fill=Object(L.b)(),t.applyTheme(),t.interactionsEnabled=!1,t}return Object(n.c)(t,e),t}(h.a);r.b.registeredClasses.AxisLine=Q;var ee=function(e){function t(t){var i=e.call(this)||this;i.axis=t,i.element=i.paper.add("path"),i.className="AxisFill",i.isMeasured=!1,i.location=0,i.above=!1;var n=new p.a;return i.fill=n.getFor("alternativeBackground"),i.fillOpacity=0,i.applyTheme(),i}return Object(n.c)(t,e),t.prototype.setDisabled=function(t){var i=e.prototype.setDisabled.call(this,t);return this.axis&&this.axis.invalidateDataItems(),i},t.prototype.draw=function(){e.prototype.draw.call(this),this.__disabled||this.disabled||this.axis&&g.h(this.startPosition)&&g.h(this.endPosition)&&(this.fillPath=this.axis.getPositionRangePath(this.startPosition,this.endPosition),this.path=this.fillPath,this.isMeasured&&this.measure())},Object.defineProperty(t.prototype,"startPosition",{get:function(){return this.getPropertyValue("startPosition")},set:function(e){this.setPropertyValue("startPosition",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPosition",{get:function(){return this.getPropertyValue("endPosition")},set:function(e){this.setPropertyValue("endPosition",e),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(e){this.setPropertyValue("location",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setPath=function(e){return!!this.setPropertyValue("path",e)&&(this.element.attr({d:e}),!0)},Object.defineProperty(t.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(e){this.setPropertyValue("above",e,!0)},enumerable:!0,configurable:!0}),t}(h.a);r.b.registeredClasses.AxisFill=ee;var te=function(e){function t(){var t=e.call(this)||this;t.className="Grid",t.element=t.paper.add("path"),t.location=.5,t.isMeasured=!1,t.above=!1;var i=new p.a;return t.stroke=i.getFor("grid"),t.pixelPerfect=!0,t.strokeOpacity=.15,t.fill=Object(L.b)(),t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(e){this.setPropertyValue("location",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(e){this.setPropertyValue("above",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setDisabled=function(t){var i=e.prototype.setDisabled.call(this,t);return this.axis&&this.axis.invalidateDataItems(),i},t}(h.a);r.b.registeredClasses.Grid=te,_.c.push({relevant:_.b.maybeXS,state:function(e,t){if(e instanceof te){var i=e.states.create(t);return i.properties.disabled=!0,i}return null}});var ie=function(e){function t(){var t=e.call(this)||this;return t.className="AxisLabel",t.isMeasured=!1,t.padding(10,10,10,10),t.location=.5,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(e){this.setPropertyValue("location",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(e){this.setPropertyValue("inside",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setDisabled=function(t){var i=e.prototype.setDisabled.call(this,t);return this.axis&&this.axis.invalidateDataItems(),i},t}(u.a);r.b.registeredClasses.AxisLabel=ie;var ne=function(e){function t(){var t=e.call(this)||this;t.className="Tick";var i=new p.a;return t.fillOpacity=0,t.length=6,t.strokeOpacity=.2,t.stroke=i.getFor("grid"),t.isMeasured=!1,t.nonScalingStroke=!0,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this.disabled?0:this.getPropertyValue("length")},set:function(e){this.setPropertyValue("length",e,!0)},enumerable:!0,configurable:!0}),t}(h.a);r.b.registeredClasses.Tick=ne;var re=function(e){function t(){var t=e.call(this)||this;return t.className="AxisTick",t.element=t.paper.add("path"),t.location=.5,t.above=!1,t.isMeasured=!1,t.pixelPerfect=!0,t.strokeOpacity=0,t.length=5,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(e){this.setPropertyValue("location",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(e){this.setPropertyValue("inside",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(e){this.setPropertyValue("above",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setDisabled=function(t){var i=e.prototype.setDisabled.call(this,t);return this.axis&&this.axis.invalidateDataItems(),i},t}(ne);r.b.registeredClasses.AxisTick=re;var ae=function(e){function t(){var t=e.call(this)||this;t._chart=new o.d,t.className="AxisRenderer",t.minGridDistance=50,t.inside=!1,t.inversed=!1,t.tooltipLocation=.5,t.fullWidthTooltip=!1,t.cellStartLocation=0,t.cellEndLocation=1,t.minLabelPosition=0,t.maxLabelPosition=1,t.shouldClone=!1;var i=t.createChild(l.a);i.shouldClone=!1,i.layout="none",i.virtualParent=t,i.width=Object(d.c)(100),i.height=Object(d.c)(100),t.gridContainer=i,i.events.on("maxsizechanged",(function(){t.inited&&t.invalidateAxisItems()}),t,!1);var n=t.createChild(l.a);n.shouldClone=!1,n.isMeasured=!1,n.layout="none",n.width=Object(d.c)(100),n.height=Object(d.c)(100),t.breakContainer=n;var r=t.createChild(l.a);r.shouldClone=!1,r.isMeasured=!1,r.layout="none",r.width=Object(d.c)(100),r.height=Object(d.c)(100),t.bulletsContainer=r,t.line=t.createChild(Q),t.line.shouldClone=!1,t.line.strokeOpacity=0;var a=t.createChild(te);a.shouldClone=!1,t.baseGrid=a;var s=t._disposers;return s.push(a),s.push(t.line),s.push(i),s.push(n),s.push(r),s.push(t._chart),t.ticks.template.disabled=!0,t.axisFills.template.disabled=!0,t.axisFills.template.interactionsEnabled=!1,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"axis",{get:function(){return this._axis},set:function(e){this.setAxis(e)},enumerable:!0,configurable:!0}),t.prototype.setAxis=function(e){this._axis=e,this.baseGrid.parent=e,this.line.parent=e,this.gridContainer.bind("opacity",e)},t.prototype.processRenderer=function(){this.events.on("sizechanged",this.updateTooltip,this,!1),this.events.on("positionchanged",this.updateTooltip,this,!1),this.labels.template.inside=this.inside,this.ticks.template.inside=this.inside},t.prototype.updateTooltip=function(){},Object.defineProperty(t.prototype,"axisLength",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.positionItem=function(e,t){e&&e.moveTo(t)},t.prototype.positionToPoint=function(e,t){return{x:0,y:0}},t.prototype.positionToAngle=function(e){return 0},t.prototype.positionToCoordinate=function(e){var t=this.axis,i=t.axisFullLength;return t.renderer.inversed?(t.end-e)*i:(e-t.start)*i},t.prototype.updateGridContainer=function(){},t.prototype.getHeight=function(){var e=this.gridContainer;return e.parent?e.parent.pixelHeight:this.gridContainer.pixelHeight||0},t.prototype.getWidth=function(){var e=this.gridContainer;return e.parent?e.parent.pixelWidth:this.gridContainer.pixelWidth||0},t.prototype.coordinateToPosition=function(e,t){var i,n=this.axis,r=n.axisFullLength;return i=n.renderer.inversed?n.end-e/r:e/r+n.start,I.E(i,5)},t.prototype.pointToPosition=function(e){return 0},t.prototype.getPositionRangePath=function(e,t){return""},t.prototype.invalidateAxisItems=function(){var e=this.axis;e&&e.invalidateDataItems()},t.prototype.updateGridElement=function(e,t,i){},t.prototype.updateTickElement=function(e,t,i){},t.prototype.updateBullet=function(e,t,i){},t.prototype.updateLabelElement=function(e,t,i,n){},t.prototype.updateFillElement=function(e,t,i){e.startPosition=t,e.endPosition=i},t.prototype.updateAxisLine=function(){},t.prototype.updateBaseGridElement=function(){},t.prototype.updateBreakElement=function(e){this.positionItem(e.startLine,e.startPoint),this.toggleVisibility(e.startLine,e.startPosition,0,1),this.positionItem(e.endLine,e.endPoint),this.toggleVisibility(e.endLine,e.endPosition,0,1)},Object.defineProperty(t.prototype,"minGridDistance",{get:function(){return this.getPropertyValue("minGridDistance")},set:function(e){this.setPropertyValue("minGridDistance",e)&&this.axis&&this.axis.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart.get()},set:function(e){this._chart.set(e,null)},enumerable:!0,configurable:!0}),t.prototype.toggleVisibility=function(e,t,i,n){var r=this.axis,a=e.dataItem;a&&a instanceof $&&(g.h(a.minPosition)&&(i=a.minPosition),g.h(a.maxPosition)&&(n=a.maxPosition));var o=r.start+(r.end-r.start)*(i-1e-4),s=r.start+(r.end-r.start)*(n+1e-4);e.disabled||(e.__disabled=t<o||t>s)},t.prototype.createBreakSprites=function(e){},Object.defineProperty(t.prototype,"axisFills",{get:function(){if(!this._axisFills){var e=this.createFill(this.axis);this._axisFills=new s.c(e),e.applyOnClones=!0,e.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new s.b(this._axisFills)),this._disposers.push(this._axisFills.template)}return this._axisFills},enumerable:!0,configurable:!0}),t.prototype.createFill=function(e){return new ee(e)},Object.defineProperty(t.prototype,"grid",{get:function(){if(!this._grid){var e=this.createGrid();this._grid=new s.c(e),e.applyOnClones=!0,e.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new s.b(this._grid)),this._disposers.push(this._grid.template)}return this._grid},enumerable:!0,configurable:!0}),t.prototype.createGrid=function(){return new te},Object.defineProperty(t.prototype,"ticks",{get:function(){if(!this._ticks){var e=this.createTick();e.applyOnClones=!0,e.isMeasured=!1,e.events.on("enabled",this.invalidateAxisItems,this,!1),this._ticks=new s.c(e),this._disposers.push(new s.b(this._ticks)),this._disposers.push(this._ticks.template)}return this._ticks},enumerable:!0,configurable:!0}),t.prototype.createTick=function(){return new re},Object.defineProperty(t.prototype,"labels",{get:function(){if(!this._labels){var e=this.createLabel();this._labels=new s.c(e),e.applyOnClones=!0,e.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new s.b(this._labels)),this._disposers.push(this._labels.template)}return this._labels},enumerable:!0,configurable:!0}),t.prototype.createLabel=function(){return new ie},Object.defineProperty(t.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(e){this.setPropertyValue("inside",e)&&this.axis&&this.axis.invalidate(),e?(this.width=0,this.height=0):(this.width=void 0,this.height=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opposite",{get:function(){return this.getPropertyValue("opposite")},set:function(e){this.setPropertyValue("opposite",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullWidthTooltip",{get:function(){return this.getPropertyValue("fullWidthTooltip")},set:function(e){this.setPropertyValue("fullWidthTooltip",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(e){this.setPropertyValue("tooltipLocation",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipLocation2",{get:function(){return this.getPropertyValue("tooltipLocation2")},set:function(e){this.setPropertyValue("tooltipLocation2",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellStartLocation",{get:function(){return this.getPropertyValue("cellStartLocation")},set:function(e){this.setPropertyValue("cellStartLocation",e)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellEndLocation",{get:function(){return this.getPropertyValue("cellEndLocation")},set:function(e){this.setPropertyValue("cellEndLocation",e)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inversed",{get:function(){return this.getPropertyValue("inversed")},set:function(e){this.setPropertyValue("inversed",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minLabelPosition",{get:function(){return this.getPropertyValue("minLabelPosition")},set:function(e){this.setPropertyValue("minLabelPosition",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLabelPosition",{get:function(){return this.getPropertyValue("maxLabelPosition")},set:function(e){this.setPropertyValue("maxLabelPosition",e,!0)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.grid.template.copyFrom(t.grid.template),this.ticks.template.copyFrom(t.ticks.template),this.labels.template.copyFrom(t.labels.template),this.axisFills.template.copyFrom(t.axisFills.template),this.line.copyFrom(t.line),this.baseGrid.copyFrom(t.baseGrid)},t.prototype.toAxisPosition=function(e){return e},t.prototype.setVisibility=function(t){e.prototype.setVisibility.call(this,t),this.bulletsContainer.visible=t},t}(l.a);r.b.registeredClasses.AxisRenderer=ae;var oe=i(107),se=function(e){function t(){var t=e.call(this)||this;return t.className="AxisBullet",t.location=.5,t.isMeasured=!1,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(e){this.setPropertyValue("location",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setDisabled=function(t){var i=e.prototype.setDisabled.call(this,t);return this.axis&&this.axis.invalidateDataItems(),i},t}(l.a);r.b.registeredClasses.AxisBullet=se;var le=function(e){function t(){var t=e.call(this)||this;return t.className="AxisRendererY",t.minGridDistance=40,t.opposite=!1,t.height=Object(d.c)(100),t.labels.template.verticalCenter="middle",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.setAxis=function(t){e.prototype.setAxis.call(this,t),t.layout="horizontal"},t.prototype.updateGridContainer=function(){var e=this.axis;if(e){var t=this.gridContainer;t.y=e.pixelY,t.height=e.axisLength}},t.prototype.toAxisPosition=function(e){var t=this.axis;if(t){var i=1-e,n=t.relativePositionSprite,r=t.pixelY;if(n?r=O.I({x:0,y:this.pixelY},this.parent,n).y:n=t.parent,n)return 1-(i-r/n.innerHeight)/(t.axisLength/n.innerHeight)}return e},t.prototype.processRenderer=function(){e.prototype.processRenderer.call(this);var t=this.axis;if(t){var i=t.title;i.valign="middle",t.height instanceof d.a||(t.height=Object(d.c)(100)),this.opposite?(i.rotation=90,this.line.toBack(),i.toFront()):(i.rotation=-90,i.toBack(),this.line.toFront())}},t.prototype.updateTooltip=function(){if(this.axis){var e=2e3,t=0,i=e,n=this.axisLength;this.opposite?this.inside&&(t=-2e3,i=e):this.inside||(t=-2e3,i=e),this.axis.updateTooltip("horizontal",{x:t,y:0,width:i,height:n})}},Object.defineProperty(t.prototype,"axisLength",{get:function(){var e=this.axis;return e.measuredHeight-e.pixelPaddingTop-e.pixelPaddingBottom||0},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e,t){return{x:0,y:this.positionToCoordinate(e)}},t.prototype.pointToPosition=function(e){return this.coordinateToPosition(e.y,e.x)},t.prototype.coordinateToPosition=function(e,t){var i,n=this.axis,r=n.axisFullLength;return i=n.renderer.inversed?1-n.start-e/r:e/r+(1-n.end),I.E(i,5)},t.prototype.getPositionRangePath=function(e,t){var i=I.i(this.positionToCoordinate(e),0,this.axisLength),n=I.i(this.positionToCoordinate(t),0,this.axisLength),r=Math.abs(n-i),a=this.getWidth(),o=Math.min(i,n);return f.j({x:0,y:o,width:a,height:r},!0)},t.prototype.updateGridElement=function(e,t,i){t+=(i-t)*e.location;var n=this.positionToPoint(t);e.path=f.g({x:0,y:0})+f.f({x:this.getWidth(),y:0}),this.positionItem(e,n),this.toggleVisibility(e,t,0,1)},t.prototype.updateTickElement=function(e,t,i){t+=(i-t)*e.location;var n=this.positionToPoint(t),r=e.length;try{O.R(this.axis.title.measuredWidth)}catch(a){}n.x=O.I({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.opposite?r*=e.inside?-1:1:r*=e.inside?1:-1,e.path=f.g({x:0,y:0})+f.f({x:r,y:0}),this.positionItem(e,n),this.toggleVisibility(e,t,0,1)},t.prototype.updateAxisLine=function(){this.line.path=f.g({x:0,y:0})+f.f({x:0,y:this.axisLength})},t.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var t=this.axis,i=this.getWidth(),n=this.axisLength,r=t.basePoint.y,a=this.baseGrid;if(r<-.2||r>n+.2)a.hide(0);else{var o=O.I({x:0,y:0},this.gridContainer,a.parent).x;a.path=f.g({x:0,y:0})+f.f({x:i,y:0}),a.moveTo({x:o,y:r}),a.show(0)}},t.prototype.updateLabelElement=function(e,t,i,n){g.d(n)||(n=e.location),t+=(i-t)*n,e.isMeasured=!e.inside;var r,a=this.positionToPoint(t),o=0,s=this.gridContainer.maxWidth;this.opposite?(e.inside?(r="right","left"==e.align&&(o=-s,r="left"),"center"==e.align&&(o=-s/2,r="middle")):r="left",a.x=0+o):(e.inside?(r="left","right"==e.align&&(o=s,r="right"),"center"==e.align&&(o=s/2,r="middle")):r="right",a.x=this.measuredWidth+o),0==e.rotation&&(e.horizontalCenter=r),this.positionItem(e,a),this.toggleVisibility(e,t,this.minLabelPosition,this.maxLabelPosition)},t.prototype.updateBreakElement=function(t){e.prototype.updateBreakElement.call(this,t);var i=t.startLine,n=t.endLine,r=t.fillShape,a=t.startPoint,o=t.endPoint,s=t.pixelMarginLeft,l=this.getWidth()-t.pixelMarginLeft-t.pixelMarginRight;a.y=I.i(a.y,-1,this.axisLength+1),o.y=I.i(o.y,-1,this.axisLength+1),a.y==o.y&&(a.y<0||a.y>this.axisLength)?t.fillShape.__disabled=!0:t.fillShape.__disabled=!1;var u=Math.abs(l-s);i.x=s,i.height=0,i.width=u,n.x=s,n.height=0,n.width=u,r.width=u,r.height=Math.abs(o.y-a.y),r.x=s,r.y=o.y},t.prototype.createBreakSprites=function(e){e.startLine=new X.a,e.endLine=new X.a;var t=new oe.a;t.setWavedSides(!0,!1,!0,!1),e.fillShape=t},t.prototype.positionToCoordinate=function(e){var t=this.axis,i=t.axisFullLength;return t.renderer.inversed?(e-t.start)*i:(t.end-e)*i},t.prototype.updateBullet=function(e,t,i){var n=.5;e instanceof se&&(n=e.location),t+=(i-t)*n;var r=this.positionToPoint(t);r.x=O.I({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.positionItem(e,r),this.toggleVisibility(e,t,0,1)},t}(ae);r.b.registeredClasses.AxisRendererY=le,_.c.push({relevant:_.b.widthS,state:function(e,t){if(e instanceof le){var i=e.states.create(t);return i.properties.inside=!0,i.properties.maxLabelPosition=.9,i.properties.minLabelPosition=.1,i}return null}}),_.c.push({relevant:_.b.widthXS,state:function(e,t){if(e instanceof le){var i=e.states.create(t);return i.properties.disabled=!0,i}return null}});var ue=function(e){function t(){var t=e.call(this)||this;return t.className="ValueAxisBreak",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedStartValue)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedEndValue)},enumerable:!0,configurable:!0}),t}(Y);r.b.registeredClasses.ValueAxisBreak=ue;var ce=function(e){function t(){var t=e.call(this)||this;return t.className="ValueAxisDataItem",t.values.value={},t.values.endValue={},t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.values.value.value},set:function(e){this.setValue("value",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endValue",{get:function(){return this.values.endValue.value},set:function(e){this.setValue("endValue",e)},enumerable:!0,configurable:!0}),t}($),he=function(e){function t(){var t=e.call(this)||this;return t._stepDecimalPlaces=0,t._prevStepDecimalPlaces=0,t._adjustLabelPrecision=!0,t._baseValue=0,t._adjustedStart=0,t._adjustedEnd=1,t._extremesChanged=!1,t._deltaMinMax=1,t._dsc=!1,t.calculateTotals=!1,t.className="ValueAxis",t.axisFieldName="value",t.setPropertyValue("maxZoomFactor",1e3),t.setPropertyValue("extraMin",0),t.setPropertyValue("extraMax",0),t.setPropertyValue("strictMinMax",!1),t.setPropertyValue("maxPrecision",Number.MAX_VALUE),t.setPropertyValue("adjustLabelPrecision",!0),t.setPropertyValue("extraTooltipPrecision",0),t.keepSelection=!1,t.includeRangesInMinMax=!1,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.fillRule=function(e){var t=e.value,i=e.component;e.axisFill.disabled||(I.E(t/i.step/2,5)==Math.round(t/i.step/2)?e.axisFill.__disabled=!0:e.axisFill.__disabled=!1)},t.prototype.createDataItem=function(){return new ce},t.prototype.createAxisBreak=function(){return new ue},t.prototype.dataChangeUpdate=function(){this.clearCache(),this.keepSelection?(0!=this._start&&this.dispatchImmediately("startchanged"),1!=this._end&&this.dispatchImmediately("endchanged"),0==this._start&&1==this._end||this.dispatchImmediately("startendchanged")):0==this._start&&1==this._end||(this._start=0,this._end=1,this.dispatchImmediately("startendchanged")),this._maxZoomed=this._maxDefined,this._minZoomed=this._minDefined,this._maxAdjusted=this._maxDefined,this._minAdjusted=this._minDefined},t.prototype.processSeriesDataItems=function(){if(this.calculateTotals){var e=this.series.getIndex(0),t=e.startIndex;if(e.dataItems.length>0){t>0&&t--;var i=e.endIndex;i<e.dataItems.length&&i++;for(var n=function(e){var t={},i={};r.series.each((function(n){if(!n.excludeFromTotal){var r=n.dataItems.getIndex(e);r&&z.d(r.values,(function(e){var n=r.values[e].workingValue;g.h(n)&&(g.h(t[e])?t[e]+=Math.abs(n):t[e]=Math.abs(n),g.h(i[e])?i[e]+=n:i[e]=n)}))}})),r.series.each((function(n){if(!n.excludeFromTotal){var r=n.dataItems.getIndex(e);r&&z.d(r.values,(function(e){var n=r.values[e].workingValue;g.h(n)&&(r.setCalculatedValue(e,t[e],"total"),r.setCalculatedValue(e,100*n/t[e],"totalPercent"),r.setCalculatedValue(e,i[e],"sum"))}))}}))},r=this,a=t;a<i;++a)n(a)}}},t.prototype.validate=function(){this.axisLength<=0||(e.prototype.validate.call(this),this.getMinMax(),g.h(this._minAdjusted)||this.dataItems.each((function(e){e.value=null})),this.fixAxisBreaks(),this.calculateZoom(),this.validateAxisElements(),this.validateAxisRanges(),this.validateBreaks(),this.hideUnusedDataItems(),this.renderer.invalidateLayout())},t.prototype.calculateZoom=function(){if(g.h(this.min)&&g.h(this.max)){var e=this.positionToValue(this.start),t=this.positionToValue(this.end),i=this.adjustDifference(e,t),n=this.adjustMinMax(e,t,i,this._gridCount,!0),r=O.g(n.step);this._stepDecimalPlaces=r,e=I.E(e,r),t=I.E(t,r);var a=(n=this.adjustMinMax(e,t,i,this._gridCount,!0)).step;if(this.syncWithAxis){var o=this.getCache(e+"-"+t);g.h(o)&&(a=o)}else e=n.min,t=n.max;(this._minZoomed!=e||this._maxZoomed!=t||this._step!=a||this._dsc)&&(this._dsc=!1,this._minZoomed=e,this._maxZoomed=t,this._step=a,this.dispatchImmediately("selectionextremeschanged"))}},t.prototype.fixSmallStep=function(e){return 1+e==1?(e*=2,this.fixSmallStep(e)):e},t.prototype.validateAxisElements=function(){var e=this;if(g.h(this.max)&&g.h(this.min)){var t=this.minZoomed-2*this._step;if(this.logarithmic)Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E>1?t=Math.pow(10,Math.log(this.min)*Math.LOG10E):0==(t=Math.floor(this.minZoomed/this._step)*this._step)&&(t=this.minZoomed);else t=Math.floor(t/this._step)*this._step;var i=this._maxZoomed+this._step;this.resetIterators();var n=this._dataItemsIterator;if(0==this._step)return;this._step=this.fixSmallStep(this._step);var r=0,a=this._prevStepDecimalPlaces!=this._stepDecimalPlaces;for(this._prevStepDecimalPlaces=this._stepDecimalPlaces;t<=i;){if(!this.isInBreak(t)){var o=n.find((function(e){return e.value===t}));o.__disabled&&(o.__disabled=!1),this.appendDataItem(o),o.axisBreak=void 0,(o.value!=t||a)&&(o.value=t,o.text=this.formatLabel(t),o.label&&o.label.invalid&&o.label.validate(),o.value>=this.min&&o.value<=this.max&&o.label&&("Y"==this.axisLetter&&o.label.measuredWidth>this.ghostLabel.measuredWidth||"X"==this.axisLetter&&o.label.measuredHeight>this.ghostLabel.measuredHeight)&&(this.ghostLabel.text=o.label.currentText,this.ghostLabel.validate())),this.validateDataElement(o)}r++;var s=t;if(this.logarithmic)Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E>1?t=Math.pow(10,Math.log(this.min)*Math.LOG10E+r):t+=this._step;else t+=this._step;var l=Math.pow(10,Math.floor(Math.log(Math.abs(this._step))*Math.LOG10E));if(l<1){var u=Math.round(Math.abs(Math.log(Math.abs(l))*Math.LOG10E))+2;if(u=Math.min(13,u),s==(t=I.E(t,u))){t=i;break}}}var c=this._axisBreaks;if(c){var h=this.renderer;v.d(c.iterator(),(function(t){if(t.breakSize>0&&I.q(t.startPoint,t.endPoint)>h.minGridDistance)for(var i=t.adjustedMin;i<=t.adjustedMax;){if(i>=t.adjustedStartValue&&i<=t.adjustedEndValue){var r=n.find((function(e){return e.value===i}));r.__disabled&&(r.__disabled=!1),e.appendDataItem(r),r.axisBreak=t,r.value!=i&&(r.value=i,r.text=e.formatLabel(i),r.label&&r.label.invalid&&r.label.validate()),e.validateDataElement(r)}i+=t.adjustedStep}}))}}},t.prototype.validateDataElement=function(t){e.prototype.validateDataElement.call(this,t),t.itemIndex=this._axisItemCount,this._axisItemCount++;var i=this.renderer,n=t.value,r=t.endValue,a=this.valueToPosition(n);t.position=a;var o=a,s=this.valueToPosition(n+this._step);g.h(r)&&(s=o=this.valueToPosition(r)),t.point=i.positionToPoint(a);var l=t.tick;l&&!l.disabled&&i.updateTickElement(l,a,o);var u=t.grid;u&&!u.disabled&&i.updateGridElement(u,a,o);var c=t.label;c&&!c.disabled&&i.updateLabelElement(c,a,o);var h=t.axisFill;h&&!h.disabled&&(i.updateFillElement(h,a,s),t.isRange||this.fillRule(t)),t.bullet&&i.updateBullet(t.bullet,a,o);var p=t.mask;p&&i.updateFillElement(p,a,s)},t.prototype.formatLabel=function(e){return this.adjustLabelPrecision&&0!=e?this.numberFormatter.format(e,void 0,this._stepDecimalPlaces):this.numberFormatter.format(e)},Object.defineProperty(t.prototype,"basePoint",{get:function(){var e=this.baseValue,t=this.valueToPosition(e);return this.renderer.positionToPoint(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseValue",{get:function(){var e=this._baseValue;return this.logarithmic&&(e=this.min),this._adapterO?this._adapterO.apply("baseValue",e):e},set:function(e){this._baseValue=e,this.invalidateLayout(),this.invalidateSeries()},enumerable:!0,configurable:!0}),t.prototype.anyToPosition=function(e){return this.valueToPosition(e)},t.prototype.valueToPoint=function(e){var t=this.valueToPosition(e),i=this.renderer.positionToPoint(t),n=this.renderer.positionToAngle(t);return{x:i.x,y:i.y,angle:n}},t.prototype.anyToPoint=function(e){return this.valueToPoint(e)},t.prototype.valueToPosition=function(e){if(g.h(e)){var t=this.min,i=this.max;if(g.h(t)&&g.h(i)){var n=this._difference,r=this._axisBreaks;r&&r.length>0&&v.e(r.iterator(),(function(n){var r=n.adjustedStartValue,a=n.adjustedEndValue;if(g.h(r)&&g.h(a)){if(e<r)return!1;if(I.x({start:r,end:a},{start:t,end:i})){r=Math.max(r,t),a=Math.min(a,i);var o=n.breakSize;e>a?t+=(a-r)*(1-o):e<r||(e=r+(e-r)*o)}}return!0}));var a=void 0;if(this.logarithmic){var o=this.treatZeroAs;g.h(o)&&e<=o&&(e=o),a=(Math.log(e)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)/(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)}else a=(e-t)/n;return a}}return 0},t.prototype.invalidateLabels=function(){e.prototype.invalidateLabels.call(this),this.dataItems&&(this.dataItems.each((function(e){e.value=void 0})),this.invalidate())},t.prototype.positionToValue=function(e){var t=this.min,i=this.max;if(g.h(t)&&g.h(i)){var n=i-t,r=null,a=this._axisBreaks;return a&&a.length>0&&v.e(a.iterator(),(function(a){var o=a.startPosition,s=a.endPosition,l=a.adjustedStartValue,u=a.adjustedEndValue;if(g.h(l)&&g.h(u)){if(l>i)return!1;if(I.x({start:l,end:u},{start:t,end:i})){l=I.B(l,t),u=I.C(u,i);var c=a.breakSize;if(n-=(u-l)*(1-c),e>s)t+=(u-l)*(1-c);else if(!(e<o))return r=l+(e-o)/(s-o)*(u-l),!1}return!0}})),g.h(r)||(r=this.logarithmic?Math.pow(Math.E,(e*(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)+Math.log(this.min)*Math.LOG10E)/Math.LOG10E):e*n+t),r}},t.prototype.xToValue=function(e){return this.positionToValue(this.pointToPosition({x:e,y:0}))},t.prototype.yToValue=function(e){return this.positionToValue(this.pointToPosition({x:0,y:e}))},t.prototype.pointToPosition=function(e){return this.renderer instanceof le?1-this.renderer.pointToPosition(e):this.renderer.pointToPosition(e)},t.prototype.animateMinMax=function(e,t){return this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:e},{property:"_maxAdjusted",from:this._maxAdjusted,to:t}],this.rangeChangeDuration,this.rangeChangeEasing)},t.prototype.getMinMax=function(){var e=this;this.updateGridCount();var t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(g.h(this._minDefined)&&g.h(this._maxDefined)||(this.series.each((function(n){if(!n.ignoreMinMax){var r=n.min(e);g.h(r)&&r<t&&(t=r);var a=n.max(e);g.h(a)&&a>i&&(i=a)}})),this.includeRangesInMinMax&&this.axisRanges.each((function(e){if(!e.ignoreMinMax){var n=I.C(e.value,e.endValue),r=I.B(e.value,e.endValue);(n<t||!g.h(t))&&(t=n),(r>i||!g.h(i))&&(i=r)}}))),this.logarithmic){var n=this.treatZeroAs;g.h(n)&&t<=0&&(t=n),t<=0&&this.raiseCriticalError(new Error("Logarithmic value axis can not have values <= 0."),!0)}if(0==t&&0==i&&(i=.9,t=-.9),g.h(this._minDefined)&&(t=this._minDefined),g.h(this._maxDefined)&&(i=this._maxDefined),this._adapterO&&(t=this._adapterO.apply("min",t)),this._adapterO&&(i=this._adapterO.apply("max",i)),g.h(t)&&g.h(i)){this._minReal=t,this._maxReal=i,t==Number.POSITIVE_INFINITY&&(t=void 0),i==Number.NEGATIVE_INFINITY&&(i=void 0);var r=this.adjustDifference(t,i);if(t=this.fixMin(t),(i=this.fixMax(i))-t<=1/Math.pow(10,15)){if(i-t!=0)this._deltaMinMax=(i-t)/2;else{var a=Math.log(Math.abs(i))*Math.LOG10E,o=Math.pow(10,Math.floor(a));o/=10,this._deltaMinMax=o}t-=this._deltaMinMax,i+=this._deltaMinMax}t-=(i-t)*this.extraMin,i+=(i-t)*this.extraMax;var s=this.strictMinMax;g.h(this._maxDefined)&&(s=!0);var l=this.adjustMinMax(t,i,r,this._gridCount,s);if(t=l.min,r=(i=l.max)-t,l=this.adjustMinMax(t,i,i-t,this._gridCount,!0),t=l.min,i=l.max,this.strictMinMax&&(t=g.h(this._minDefined)?this._minDefined:this._minReal,(i=g.h(this._maxDefined)?this._maxDefined:this._maxReal)-t<=1e-8&&(t-=this._deltaMinMax,i+=this._deltaMinMax),t-=(i-t)*this.extraMin,i+=(i-t)*this.extraMax),this._adapterO&&(t=this._adapterO.apply("min",t)),this._adapterO&&(i=this._adapterO.apply("max",i)),this._step=l.step,g.h(t)||g.h(i)||(this.start=0,this.end=1,this.renderer.labels.each((function(e){e.dataItem.text=""}))),(this._minAdjusted!=t||this._maxAdjusted!=i)&&g.h(t)&&g.h(i)){var u=this._minMaxAnimation;if(this._extremesChanged&&g.h(this._minAdjusted)&&g.h(this._maxAdjusted)&&this.inited){if(u&&!u.isFinished()&&this._finalMax==i&&this._finalMin==t)return;this._finalMin=t,this._finalMax=i,(u=this.animateMinMax(t,i))&&!u.isFinished()?(u.events.on("animationprogress",this.validateDataItems,this),u.events.on("animationended",(function(){e.series.each((function(e){e.validate()})),e.validateDataItems(),e.handleSelectionExtremesChange()})),this._minMaxAnimation=u):this.series.each((function(e){e.invalidate()})),this.validateDataItems(),this.dispatchImmediately("extremeschanged"),this.handleSelectionExtremesChange()}else{if(u&&!u.isFinished()&&this._finalMax==i&&this._finalMin==t)return;this._minAdjusted=t,this._maxAdjusted=i,this._finalMin=t,this._finalMax=i,this.invalidateDataItems(),this.dispatchImmediately("extremeschanged")}}this._extremesChanged=!1,this._difference=this.adjustDifference(t,i)}},t.prototype.fixMin=function(e){return e},t.prototype.fixMax=function(e){return e},t.prototype.adjustMinMax=function(e,t,i,n,r){n<=1&&(n=1),n=Math.round(n);var a=e,o=t;0===i&&(i=Math.abs(t));var s=Math.log(Math.abs(i))*Math.LOG10E,l=Math.pow(10,Math.floor(s)),u=l/=10;r&&(u=0),this.logarithmic?(e<=0&&(e=this.baseValue),e==1/0&&(e=1),t==-1/0&&(t=10),this.strictMinMax?(e=this._minDefined>0?this._minDefined:e,this._maxDefined>0&&(t=t)):(e=Math.pow(10,Math.floor(Math.log(Math.abs(e))*Math.LOG10E)),t=Math.pow(10,Math.ceil(Math.log(Math.abs(t))*Math.LOG10E)))):(r?(e=Math.floor(e/l)*l,t=Math.ceil(t/l)*l):(e=Math.ceil(e/l)*l-u,t=Math.floor(t/l)*l+u),e<0&&a>=0&&(e=0),t>0&&o<=0&&(t=0)),s=Math.log(Math.abs(i))*Math.LOG10E,l=Math.pow(10,Math.floor(s)),l/=10;var c=Math.ceil(i/n/l)*l,h=Math.pow(10,Math.floor(Math.log(Math.abs(c))*Math.LOG10E)),p=Math.ceil(c/h);p>5?p=10:p<=5&&p>2&&(p=5),c=Math.ceil(c/(h*p))*h*p,this.maxPrecision<Number.MAX_VALUE&&c!=I.e(c,this.maxPrecision)&&(c=I.e(c,this.maxPrecision));var d=0;if(h<1&&(d=Math.round(Math.abs(Math.log(Math.abs(h))*Math.LOG10E))+1,c=I.E(c,d)),!this.logarithmic){var f=Math.floor(e/c);e=I.E(c*f,d);var m=void 0;(m=r?Math.floor(t/c):Math.ceil(t/c))==f&&m++,(t=I.E(c*m,d))<o&&(t+=c),e>a&&(e-=c)}return{min:e,max:t,step:c}},Object.defineProperty(t.prototype,"min",{get:function(){var e=this._minAdjusted;return g.h(e)||(e=this._minDefined),e},set:function(e){this._minDefined!=e&&(this._minDefined=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minDefined",{get:function(){return this._minDefined},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDefined",{get:function(){return this._maxDefined},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraMin",{get:function(){return this.getPropertyValue("extraMin")},set:function(e){this.setPropertyValue("extraMin",e)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraMax",{get:function(){return this.getPropertyValue("extraMax")},set:function(e){this.setPropertyValue("extraMax",e)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){var e=this._maxAdjusted;return g.h(e)||(e=this._maxDefined),e},set:function(e){this._maxDefined!=e&&(this._maxDefined=e,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"adjustLabelPrecision",{get:function(){return this.getPropertyValue("adjustLabelPrecision")},set:function(e){this.setPropertyValue("adjustLabelPrecision",e)&&this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.registerSeries=function(t){return new o.c([e.prototype.registerSeries.call(this,t),t.events.on("extremeschanged",this.handleExtremesChange,this,!1),t.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1),this.events.on("extremeschanged",t.invalidate,t,!1)])},t.prototype.handleSelectionExtremesChange=function(){var e,t,i=this,n=!0;if(v.d(this.series.iterator(),(function(r){if(!r.ignoreMinMax&&!r.isHidden&&!r.outOfRange){r.visible&&!r.isHiding&&(n=!1);var a=r.selectionMin(i),o=r.selectionMax(i);g.h(a)&&(!g.h(e)||a<e)&&(e=a),g.h(o)&&(!g.h(t)||o>t)&&(t=o)}})),this.includeRangesInMinMax&&this.axisRanges.each((function(i){if(!i.ignoreMinMax){var n=I.C(i.value,i.endValue),r=I.B(i.value,i.endValue);n<e&&(e=n),r>t&&(t=r)}})),g.h(this._minDefined)?e=this.strictMinMax?this._minDefined:this.min:this.strictMinMax&&(e=this._minReal),g.h(this._maxDefined)?t=this.strictMinMax?this._maxDefined:this.max:this.strictMinMax&&(t=this._maxReal),e==t){e-=this._deltaMinMax,t+=this._deltaMinMax;var r=this.adjustMinMax(e,t,0,this._gridCount,this.strictMinMax);e=r.min,t=r.max}var a=this.adjustDifference(e,t),o=this.adjustMinMax(e,t,a,this._gridCount);e=o.min,t=o.max,e-=(t-e)*this.extraMin,t+=(t-e)*this.extraMax,e=I.i(e,this.min,this.max),t=I.i(t,this.min,this.max),a=this.adjustDifference(e,t),o=this.adjustMinMax(e,t,a,this._gridCount,!0),e=o.min,t=o.max,this.strictMinMax&&(e=I.B(e,this._minDefined),t=I.C(t,this._maxDefined));var s=o.step;this.syncWithAxis&&(o=this.syncAxes(e,t,s),e=o.min,t=o.max,this.invalidate()),s=o.step,this._difference=this.adjustDifference(this.min,this.max);var l=this.valueToPosition(e),u=this.valueToPosition(t);n&&!this.syncWithAxis&&(l=0,u=1);var c=0;this.syncWithAxis?(c=5,this.setCache(e+"-"+t,s)):(this._step==s&&this._minZoomed==e&&this._maxZoomed==t||(this._dsc=!0),this._step=s,this._minZoomed=e,this._maxZoomed=t),this.keepSelection||this.zoom({start:l,end:u},!1,!1,c)},Object.defineProperty(t.prototype,"strictMinMax",{get:function(){return this.getPropertyValue("strictMinMax")},set:function(e){this.setPropertyValue("strictMinMax",e)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logarithmic",{get:function(){return this.getPropertyValue("logarithmic")},set:function(e){this.setPropertyValue("logarithmic",e)&&(this.invalidate(),this.series.each((function(e){e.invalidateDataItems()})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepSelection",{get:function(){return this.getPropertyValue("keepSelection")},set:function(e){this.setPropertyValue("keepSelection",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"includeRangesInMinMax",{get:function(){return this.getPropertyValue("includeRangesInMinMax")},set:function(e){this.setPropertyValue("includeRangesInMinMax",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxPrecision",{get:function(){return this.getPropertyValue("maxPrecision")},set:function(e){this.setPropertyValue("maxPrecision",e)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraTooltipPrecision",{get:function(){return this.getPropertyValue("extraTooltipPrecision")},set:function(e){this.setPropertyValue("extraTooltipPrecision",e)&&this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.handleExtremesChange=function(){var e=this;if(this._extremesChanged=!0,this.getMinMax(),this.ghostLabel){this.dataItems.each((function(t){t.label&&t.label.pixelWidth>0&&(e.ghostLabel.text=t.label.currentText)}))}},t.prototype.getX=function(e,t,i,n,r){return this.renderer.positionToPoint(this.getPositionX(e,t,i,n,r)).x},t.prototype.getPositionX=function(e,t,i,n,r){var a=e.getWorkingValue(t);g.d(n)||(n="valueX");var o=e.getValue(n,"stack");g.h(a)||(a=this.baseValue,this.logarithmic&&o>0&&(a=0));var s=this.valueToPosition(a+o);return r&&(s=I.i(s,r.start,r.end)),s},t.prototype.getY=function(e,t,i,n,r){return this.renderer.positionToPoint(this.getPositionY(e,t,i,n,r)).y},t.prototype.getPositionY=function(e,t,i,n,r){var a=e.getWorkingValue(t);g.d(n)||(n="valueY");var o=e.getValue(n,"stack");g.h(a)||(a=this.baseValue,this.logarithmic&&o>0&&(a=0));var s=this.valueToPosition(a+o);return r&&(s=I.i(s,r.start,r.end)),s},t.prototype.getAngle=function(e,t,i,n,r){var a=e.getWorkingValue(t),o=e.getValue(n,"stack");g.h(a)||(a=this.baseValue);var s=this.valueToPosition(a+o);return r&&(s=I.i(s,r.start,r.end)),this.positionToAngle(s)},t.prototype.getAnyRangePath=function(e,t,i){var n=this.valueToPosition(e),r=this.valueToPosition(t);return this.getPositionRangePath(n,r)},t.prototype.getTooltipText=function(e){var t=I.E(this.positionToValue(e),this._stepDecimalPlaces+this.extraTooltipPrecision),i=this.tooltip.numberFormatter.format(t);return this._adapterO?this._adapterO.apply("getTooltipText",i):i},t.prototype.zoomToValues=function(e,t,i,n){var r=(e-this.min)/(this.max-this.min),a=(t-this.min)/(this.max-this.min);this.zoom({start:r,end:a},i,n)},Object.defineProperty(t.prototype,"minZoomed",{get:function(){return this.syncWithAxis?this._minZoomed:I.B(this.min,this._minZoomed)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxZoomed",{get:function(){return this.syncWithAxis?this._maxZoomed:I.C(this.max,this._maxZoomed)},enumerable:!0,configurable:!0}),t.prototype.fixAxisBreaks=function(){var t=this;e.prototype.fixAxisBreaks.call(this);var i=this._axisBreaks;i&&i.length>0&&i.each((function(e){var i=e.adjustedStartValue,n=e.adjustedEndValue,r=n-i,a=Math.ceil(r*e.breakSize)*t._gridCount/(t.max-t.min),o=t.adjustMinMax(i,n,r,a,!0);e.adjustedStep=o.step,e.adjustedMin=o.min,e.adjustedMax=o.max})),this._difference=this.adjustDifference(this.min,this.max)},t.prototype.getPositionLabel=function(e){var t=this.positionToValue(e);return this.numberFormatter.format(t)},t.prototype.showTooltipAt=function(e){this.showTooltipAtPosition(this.valueToPosition(e))},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.min=t.min,this.max=t.max,this.calculateTotals=t.calculateTotals,this._baseValue=t.baseValue},Object.defineProperty(t.prototype,"syncWithAxis",{get:function(){return this.getPropertyValue("syncWithAxis")},set:function(e){var t=this;this.setPropertyValue("syncWithAxis",e,!0)&&e&&(this._disposers.push(e.events.on("extremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(e.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(e.events.on("startendchanged",this.handleSelectionExtremesChange,this,!1)),this.events.on("shown",this.handleSelectionExtremesChange,this,!1),this.events.on("maxsizechanged",(function(){t.clearCache(),t._disposers.push(r.b.events.once("exitframe",(function(){t.handleSelectionExtremesChange()})))}),this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"treatZeroAs",{get:function(){return this.getPropertyValue("treatZeroAs")},set:function(e){this.setPropertyValue("treatZeroAs",e,!0)},enumerable:!0,configurable:!0}),t.prototype.syncAxes=function(e,t,i){var n=this.syncWithAxis;if(n){g.h(e)||(e=this.min),g.h(t)||(t=this.max),g.h(i)||(i=this._step);var r=Math.round((n.maxZoomed-n.minZoomed)/n.step),a=Math.round((t-e)/i);if(g.h(r)&&g.h(a))for(var o=!1,s=0,l=.01*(t-e),u=e,c=t,h=i;1!=o;)if(o=this.checkSync(u,c,h,r),++s>1e3&&(o=!0),o)e=u,t=c,i=h;else{s/3==Math.round(s/3)?(u=e-l*s,e>=0&&u<0&&(u=0)):(c=t+l*s)<=0&&c>0&&(c=0);var p=this.adjustMinMax(u,c,c-u,this._gridCount,!0);u=p.min,c=p.max,h=p.step}}return{min:e,max:t,step:i}},t.prototype.checkSync=function(e,t,i,n){for(var r=(t-e)/i,a=1;a<n;a++)if(I.E(r/a,1)==n||r*a==n)return!0;return!1},t.prototype.processConfig=function(t){t&&g.d(t.syncWithAxis)&&g.j(t.syncWithAxis)&&(this.map.hasKey(t.syncWithAxis)?t.syncWithAxis=this.map.getKey(t.syncWithAxis):(this.processingErrors.push('[ValueAxis] No axis with id "'+t.syncWithAxis+'" found for `syncWithAxis`'),delete t.xAxis)),e.prototype.processConfig.call(this,t)},t}(J);r.b.registeredClasses.ValueAxis=he,r.b.registeredClasses.ValueAxisDataItem=ce;var pe=function(e){function t(){var t=e.call(this)||this;return t.className="DateAxisBreak",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"startDate",{get:function(){return this.getPropertyValue("startDate")},set:function(e){this.setPropertyValue("startDate",e)&&(this.startValue=e.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endDate",{get:function(){return this.getPropertyValue("endDate")},set:function(e){this.setPropertyValue("endDate",e)&&(this.endValue=e.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),t}(ue);r.b.registeredClasses.DateAxisBreak=pe;var de=i(19),fe=function(e){function t(){var t=e.call(this)||this;return t.className="DateAxisDataItem",t.applyTheme(),t.values.date={},t.values.endDate={},t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"date",{get:function(){return this.dates.date},set:function(e){this.setDate("date",e),this.value=e.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endDate",{get:function(){return this.dates.endDate},set:function(e){this.setDate("endDate",e),this.endValue=e.getTime()},enumerable:!0,configurable:!0}),t}(ce),me=function(e){function t(){var t=e.call(this)||this;return t._gapBreaks=!1,t.gridIntervals=new s.a,t.groupIntervals=new s.a,t.dateFormats=new w.a,t.periodChangeDateFormats=new w.a,t._baseIntervalReal={timeUnit:"day",count:1},t._prevSeriesTime={},t._minDifference={},t._firstWeekDay=1,t.groupMin={},t.groupMax={},t.className="DateAxis",t.setPropertyValue("markUnitChange",!0),t.snapTooltip=!0,t.tooltipPosition="pointer",t.setPropertyValue("groupData",!1),t.groupCount=200,t.events.on("parentset",t.getDFFormatter,t,!1),t.gridIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}]),t.groupIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}]),t.axisFieldName="date",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.fillRule=function(e){var t=e.value,i=e.component,n=i._gridInterval,r=de.d(n.timeUnit,n.count);Math.round((t-i.min)/r)/2==Math.round(Math.round((t-i.min)/r)/2)?e.axisFill.__disabled=!0:e.axisFill.__disabled=!1},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),this.dateFormats.hasKey("millisecond")||this.dateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.dateFormats.hasKey("second")||this.dateFormats.setKey("second",this.language.translate("_date_second")),this.dateFormats.hasKey("minute")||this.dateFormats.setKey("minute",this.language.translate("_date_minute")),this.dateFormats.hasKey("hour")||this.dateFormats.setKey("hour",this.language.translate("_date_hour")),this.dateFormats.hasKey("day")||this.dateFormats.setKey("day",this.language.translate("_date_day")),this.dateFormats.hasKey("week")||this.dateFormats.setKey("week",this.language.translate("_date_day")),this.dateFormats.hasKey("month")||this.dateFormats.setKey("month",this.language.translate("_date_month")),this.dateFormats.hasKey("year")||this.dateFormats.setKey("year",this.language.translate("_date_year")),this.periodChangeDateFormats.hasKey("millisecond")||this.periodChangeDateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.periodChangeDateFormats.hasKey("second")||this.periodChangeDateFormats.setKey("second",this.language.translate("_date_second")),this.periodChangeDateFormats.hasKey("minute")||this.periodChangeDateFormats.setKey("minute",this.language.translate("_date_minute")),this.periodChangeDateFormats.hasKey("hour")||this.periodChangeDateFormats.setKey("hour",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("day")||this.periodChangeDateFormats.setKey("day",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("week")||this.periodChangeDateFormats.setKey("week",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("month")||this.periodChangeDateFormats.setKey("month",this.language.translate("_date_month")+" "+this.language.translate("_date_year"))},t.prototype.createDataItem=function(){return new fe},t.prototype.createAxisBreak=function(){return new pe},t.prototype.validateDataItems=function(){var t=this.start,i=this.end,n=this.baseDuration,r=(this.max-this.min)/n;this._firstWeekDay=this.getFirstWeekDay(),this.getDFFormatter(),e.prototype.validateDataItems.call(this);var a=de.d(this.mainBaseInterval.timeUnit,this.mainBaseInterval.count);this.maxZoomFactor=Math.max(1,(this.max-this.min)/a),this._deltaMinMax=this.baseDuration/2,t+=(i-t)*(1-r/((this.max-this.min)/n)),this.zoom({start:t,end:i},!1,!0)},t.prototype.handleSelectionExtremesChange=function(){},t.prototype.calculateZoom=function(){var t=this;e.prototype.calculateZoom.call(this);var i=this.adjustDifference(this._minZoomed,this._maxZoomed),r=!1;if(this.groupData&&g.d(i)){var a=this.mainBaseInterval,o=i+(this.startLocation+(1-this.endLocation))*this.baseDuration,s=void 0;this.groupInterval?s=Object(n.a)({},this.groupInterval):(s=this.chooseInterval(0,o,this.groupCount,this.groupIntervals),de.d(s.timeUnit,s.count)<de.d(a.timeUnit,a.count)&&(s=Object(n.a)({},a))),this._groupInterval=s;var l=s.timeUnit+s.count;this._currentDataSetId!=l&&(this._currentDataSetId=l,this.dispatch("groupperiodchanged")),this.series.each((function(e){e.baseAxis==t&&e.setDataSet(t._currentDataSetId)&&(r=!0)}))}var u=this.chooseInterval(0,i,this._gridCount);de.d(u.timeUnit,u.count)<this.baseDuration&&(u=Object(n.a)({},this.baseInterval)),this._gridInterval=u,this._nextGridUnit=de.e(u.timeUnit),this._intervalDuration=de.d(u.timeUnit,u.count),this._gridDate=de.h(new Date(this.minZoomed-de.d(u.timeUnit,u.count)),u.timeUnit,u.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),v.d(this.series.iterator(),(function(e){if(e.baseAxis==t){var i=e.getAxisField(t),n=de.h(new Date(t._minZoomed+.05*t.baseDuration),t.baseInterval.timeUnit,t.baseInterval.count,t._firstWeekDay,t._df.utc,void 0,t._df.timezoneMinutes,t._df.timezone).getTime(),a=n.toString(),o=e.dataItemsByAxis.getKey(t.uid).getKey(a+e.currentDataSetId),s=0;0!=t.start&&(s=o?(o=t.findFirst(o,n,i)).index:e.dataItems.findClosestIndex(t._minZoomed,(function(e){return e[i]}),"left"));var l=t.baseInterval,u=de.a(de.h(new Date(t._maxZoomed),l.timeUnit,l.count,t._firstWeekDay,t._df.utc,void 0,t._df.timezoneMinutes,t._df.timezone),l.timeUnit,l.count,t._df.utc).getTime(),c=u.toString(),h=e.dataItemsByAxis.getKey(t.uid).getKey(c+e.currentDataSetId),p=e.dataItems.length;1!=t.end&&(h?p=h.index:(u-=1,p=e.dataItems.findClosestIndex(u,(function(e){return e[i]}),"right"),p++)),e.max(t)<n?(e.startIndex=e.dataItems.length,e.endIndex=e.dataItems.length,e.outOfRange=!0):e.min(t)>u?(e.startIndex=0,e.endIndex=0,e.outOfRange=!0):(e.outOfRange=!1,e.startIndex=s,e.endIndex=p),!r&&e.dataRangeInvalid&&e.validateDataRange()}}))},t.prototype.findFirst=function(e,t,i){var n=e.index;if(n>0){var r=e.component.dataItems.getIndex(n-1),a=r[i];return!a||a.getTime()<t?e:this.findFirst(r,t,i)}return e},t.prototype.validateData=function(){e.prototype.validateData.call(this),g.h(this.baseInterval.count)||(this.baseInterval.count=1)},Object.defineProperty(t.prototype,"minDifference",{get:function(){var e=this,t=Number.MAX_VALUE;return this.series.each((function(i){t>e._minDifference[i.uid]&&(t=e._minDifference[i.uid])})),t!=Number.MAX_VALUE&&0!=t||(t=de.d("day")),t},enumerable:!0,configurable:!0}),t.prototype.seriesDataChangeUpdate=function(e){this._minDifference[e.uid]=Number.MAX_VALUE},t.prototype.postProcessSeriesDataItems=function(e){var t=this;this._firstWeekDay=this.getFirstWeekDay(),e?this.seriesGroupUpdate(e):this.series.each((function(e){t.seriesGroupUpdate(e)})),this.addEmptyUnitsBreaks()},t.prototype.seriesGroupUpdate=function(e){var t=this;JSON.stringify(e._baseInterval[this.uid])!=JSON.stringify(this.mainBaseInterval)&&(e._baseInterval[this.uid]=this.mainBaseInterval,e.mainDataSet.each((function(e){t.postProcessSeriesDataItem(e)})),this.groupData&&this.groupSeriesData(e))},t.prototype.groupSeriesData=function(e){var t=this;if(e.baseAxis==this&&e.dataItems.length>0&&!e.dataGrouped){e.bulletsContainer.removeChildren();var i=[],n=this.mainBaseInterval,r=de.d(n.timeUnit,n.count);this.groupIntervals.each((function(e){var n=de.d(e.timeUnit,e.count);(n>r&&n<t.max-t.min||t.groupInterval)&&i.push(e)})),e._dataSets&&(e._dataSets.each((function(e,t){t.each((function(e){e.dispose()})),t.clear()})),e._dataSets.clear()),e.dataGrouped=!0,V.d(i,(function(i){var n="date"+t.axisLetter,r=i.timeUnit+i.count,a=new Z.a(e.mainDataSet.template.clone());e.dataSets.setKey(r,a);var o,s,l=e.mainDataSet,u=Number.NEGATIVE_INFINITY,c=0,h=[];z.d(e.dataFields,(function(e,t){var i=e;i!=n&&-1==i.indexOf("Show")&&h.push(i)})),l.each((function(r){var l=r.getDate(n);if(l){var p=l.getTime(),d=(s=de.h(new Date(p),i.timeUnit,i.count,t._df.firstDayOfWeek,t._df.utc,void 0,t._df.timezoneMinutes,t._df.timezone)).getTime();u<d?(o&&e._adapterO&&V.d(h,(function(t){o.values[t].value=e._adapterO.apply("groupDataItem",{dataItem:o,interval:i,dataField:t,date:s,value:o.values[t].value}).value,o.values[t].workingValue=o.values[t].value})),(o=a.create()).dataContext={},o.setWorkingLocation("dateX",e.dataItems.template.locations.dateX,0),o.setWorkingLocation("openDateX",e.dataItems.template.locations.openDateX,0),o.setWorkingLocation("dateY",e.dataItems.template.locations.dateY,0),o.setWorkingLocation("openDateY",e.dataItems.template.locations.openDateY,0),o.component=e,o.setDate(n,s),o._index=c,c++,V.d(h,(function(t){var n=r.values[t];if(n){var a=n.value;e._adapterO&&(a=e._adapterO.apply("groupValue",{dataItem:r,interval:i,dataField:t,date:s,value:a}).value);var l=o.values[t];g.h(a)?(l.value=a,l.workingValue=a,l.open=a,l.close=a,l.low=a,l.high=a,l.sum=a,l.average=a,l.count=1):l.count=0}})),t.postProcessSeriesDataItem(o,i),z.d(e.propertyFields,(function(e,t){var i=e,n=r.properties[e];g.d(n)&&(o.hasProperties=!0,o.setProperty(i,n))})),o.groupDataItems=[r],u=d):o&&(V.d(h,(function(t){var n=e.groupFields[t],a=r.values[t];if(a){var l=a.value;if(e._adapterO&&(l=e._adapterO.apply("groupValue",{dataItem:r,interval:i,dataField:t,date:s,value:l}).value),g.h(l)){var u=o.values[t];g.h(u.open)||(u.open=l),u.close=l,(u.low>l||!g.h(u.low))&&(u.low=l),(u.high<l||!g.h(u.high))&&(u.high=l),g.h(u.sum)?u.sum+=l:u.sum=l,u.count++,u.average=u.sum/u.count,g.h(u[n])&&(u.value=u[n],u.workingValue=u.value)}}})),O.f(r.properties,o.properties),z.d(e.propertyFields,(function(e,t){var i=e,n=r.properties[e];g.d(n)&&(o.hasProperties=!0,o.setProperty(i,n))})),o.groupDataItems.push(r))}o&&O.f(r.dataContext,o.dataContext)})),o&&e._adapterO&&V.d(h,(function(t){o.values[t].value=e._adapterO.apply("groupDataItem",{dataItem:o,interval:i,dataField:t,date:s,value:o.values[t].value}).value,o.values[t].workingValue=o.values[t].value}))})),this.calculateZoom()}},t.prototype.getDFFormatter=function(){this._df=this.dateFormatter},t.prototype.postProcessSeriesDataItem=function(e,t){var i=this,n="";t?n=t.timeUnit+t.count:t=this.mainBaseInterval;var r=e.component.dataItemsByAxis.getKey(this.uid);z.d(e.dates,(function(a){var o=e.getDate(a).getTime(),s=de.h(new Date(o),t.timeUnit,t.count,i._firstWeekDay,i._df.utc,void 0,i._df.timezoneMinutes,i._df.timezone).getTime(),l=de.a(new Date(s),t.timeUnit,t.count,i._df.utc);e.setCalculatedValue(a,s,"open"),e.setCalculatedValue(a,l.getTime(),"close"),r.setKey(s+n,e)}))},t.prototype.addEmptyUnitsBreaks=function(){var e=this;if(this.skipEmptyPeriods&&g.h(this.min)&&g.h(this.max)){var t=this.baseInterval.timeUnit,i=this.baseInterval.count;this._axisBreaks&&this._axisBreaks.clear();for(var n=de.h(new Date(this.min),t,i,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),r=void 0,a=function(){de.a(n,t,i,o._df.utc);var a=n.getTime(),s=a.toString();v.c(o.series.iterator(),(function(t){return!!t.dataItemsByAxis.getKey(e.uid).getKey(s+t.currentDataSetId)}))?r&&(r.endDate=new Date(a-1),r=void 0):r||((r=o.axisBreaks.create()).startDate=new Date(a),o._gapBreaks=!0)},o=this;n.getTime()<this.max-this.baseDuration;)a()}},t.prototype.fixAxisBreaks=function(){var t=this;e.prototype.fixAxisBreaks.call(this);var i=this._axisBreaks;i&&i.length>0&&i.each((function(e){var i=Math.ceil(t._gridCount*(Math.min(t.end,e.endPosition)-Math.max(t.start,e.startPosition))/(t.end-t.start));e.gridInterval=t.chooseInterval(0,e.adjustedEndValue-e.adjustedStartValue,i);var n=de.h(new Date(e.adjustedStartValue),e.gridInterval.timeUnit,e.gridInterval.count,t._firstWeekDay,t._df.utc,void 0,t._df.timezoneMinutes,t._df.timezone);n.getTime()>e.startDate.getTime()&&de.a(n,e.gridInterval.timeUnit,e.gridInterval.count,t._df.utc),e.gridDate=n}))},t.prototype.getFirstWeekDay=function(){return this._df?this._df.firstDayOfWeek:1},t.prototype.getGridDate=function(e,t){var i=this._gridInterval.timeUnit,n=this._gridInterval.count;de.h(e,i,1,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);var r=e.getTime(),a=de.c(e),o=de.a(a,i,t,this._df.utc).getTime(),s=this.isInBreak(o);s&&s.endDate&&(a=new Date(s.endDate.getTime()),de.h(a,i,n,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),a.getTime()<s.endDate.getTime()&&de.a(a,i,n,this._df.utc),o=a.getTime());var l=this.adjustDifference(r,o);return Math.round(l/de.d(i))<n?this.getGridDate(e,t+n):a},t.prototype.getBreaklessDate=function(e,t,i){var n=new Date(e.endValue);de.h(n,t,i,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),de.a(n,t,i,this._df.utc);var r=n.getTime();return(e=this.isInBreak(r))?this.getBreaklessDate(e,t,i):n},t.prototype.validateAxisElements=function(){var e=this;if(g.h(this.max)&&g.h(this.min)){this.calculateZoom();var t=this._gridDate.getTime(),i=this._gridInterval.timeUnit,n=this._gridInterval.count,r=de.c(this._gridDate),a=this._dataItemsIterator;this.resetIterators();for(var o=function(){var e=s.getGridDate(de.c(r),n);t=e.getTime();var o=de.c(e);o=de.a(o,i,n,s._df.utc);var l=s.dateFormats.getKey(i);s.markUnitChange&&r&&de.b(e,r,s._nextGridUnit,s._df.utc)&&"year"!==i&&(l=s.periodChangeDateFormats.getKey(i));var u=s._df.format(e,l),c=a.find((function(e){return e.text===u}));c.__disabled&&(c.__disabled=!1),s.appendDataItem(c),c.axisBreak=void 0,c.date=e,c.endDate=o,c.text=u,s.validateDataElement(c),r=e},s=this;t<=this._maxZoomed;)o();var l=this.renderer;this._axisBreaks&&v.d(this._axisBreaks.iterator(),(function(t){if(t.breakSize>0){var i=t.gridInterval.timeUnit,n=t.gridInterval.count;if(I.q(t.startPoint,t.endPoint)>4*l.minGridDistance)for(var r,o=t.gridDate.getTime(),s=0,u=function(){var l=de.c(t.gridDate);if(o=de.a(l,i,n*s,e._df.utc).getTime(),s++,o>t.adjustedStartValue&&o<t.adjustedEndValue){var u=de.c(l);u=de.a(u,i,n,e._df.utc);var c=e.dateFormats.getKey(i);e.markUnitChange&&r&&de.b(l,r,e._nextGridUnit,e._df.utc)&&"year"!==i&&(c=e.periodChangeDateFormats.getKey(i));var h=e._df.format(l,c),p=a.find((function(e){return e.text===h}));p.__disabled&&(p.__disabled=!1),e.appendDataItem(p),p.axisBreak=t,t.dataItems.moveValue(p),p.date=l,p.endDate=u,p.text=h,r=l,e.validateDataElement(p)}};o<=t.adjustedMax;)u()}}))}},t.prototype.validateDataElement=function(e){if(e.itemIndex=this._axisItemCount,this._axisItemCount++,g.h(this.max)&&g.h(this.min)){var t=this.renderer,i=e.value,n=e.endValue;g.h(n)||(n=i);var r=this.valueToPosition(i),a=this.valueToPosition(n),o=a;!e.isRange&&this._gridInterval.count>this.baseInterval.count&&(a=r+(a-r)/(this._gridInterval.count/this.baseInterval.count)),e.position=r;var s=e.tick;s&&!s.disabled&&t.updateTickElement(s,r,a);var l=e.grid;l&&!l.disabled&&t.updateGridElement(l,r,a);var u=e.axisFill;u&&!u.disabled&&(t.updateFillElement(u,r,o),e.isRange||this.fillRule(e));var c=e.mask;c&&t.updateFillElement(c,r,a),e.bullet&&t.updateBullet(e.bullet,r,a);var h=e.label;if(h&&!h.disabled){var p=h.location;0==p&&(p=1!=this._gridInterval.count||"week"==this._gridInterval.timeUnit||e.isRange?0:.5),t.updateLabelElement(h,r,a,p)}}},Object.defineProperty(t.prototype,"baseDuration",{get:function(){return de.d(this.baseInterval.timeUnit,this.baseInterval.count)},enumerable:!0,configurable:!0}),t.prototype.adjustMinMax=function(e,t){return{min:e,max:t,step:this.baseDuration}},t.prototype.fixMin=function(e){var t=this.baseInterval,i=de.h(new Date(e),t.timeUnit,t.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime();return i+(de.a(new Date(i),t.timeUnit,t.count,this._df.utc).getTime()-i)*this.startLocation},t.prototype.fixMax=function(e){var t=this.baseInterval,i=de.h(new Date(e),t.timeUnit,t.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime();return i+(de.a(new Date(i),t.timeUnit,t.count,this._df.utc).getTime()-i)*this.endLocation},t.prototype.chooseInterval=function(e,t,i,r){r||(r=this.gridIntervals);var a=r.getIndex(e),o=de.d(a.timeUnit,a.count),s=r.length-1;if(e>=s)return Object(n.a)({},r.getIndex(s));var l=Math.ceil(t/o);return t<o&&e>0?Object(n.a)({},r.getIndex(e-1)):l<=i?Object(n.a)({},r.getIndex(e)):e+1<r.length?this.chooseInterval(e+1,t,i,r):Object(n.a)({},r.getIndex(e))},t.prototype.formatLabel=function(e){return this._df.format(e)},t.prototype.dateToPosition=function(e){return this.valueToPosition(e.getTime())},t.prototype.anyToPosition=function(e){return e instanceof Date?this.dateToPosition(e):this.valueToPosition(e)},t.prototype.dateToPoint=function(e){var t=this.dateToPosition(e),i=this.renderer.positionToPoint(t),n=this.renderer.positionToAngle(t);return{x:i.x,y:i.y,angle:n}},t.prototype.anyToPoint=function(e){return e instanceof Date?this.dateToPoint(e):this.valueToPoint(e)},t.prototype.positionToDate=function(e){return new Date(this.positionToValue(e))},t.prototype.getPositionX=function(e,t,i,n,r){var a=this.getTimeByLocation(e,t,i);g.h(a)||(a=this.baseValue);var o=this.valueToPosition(a);return r&&(o=I.i(o,r.start,r.end)),o},t.prototype.getPositionY=function(e,t,i,n,r){var a=this.getTimeByLocation(e,t,i),o=e.getValue("valueX","stack");g.h(a)||(a=this.baseValue);var s=this.valueToPosition(a+o);return r&&(s=I.i(s,r.start,r.end)),s},t.prototype.getAngle=function(e,t,i,n,r){var a=this.getTimeByLocation(e,t,i),o=e.getValue(n,"stack");g.h(a)||(a=this.baseValue);var s=this.valueToPosition(a+o);return r&&(s=I.i(s,r.start,r.end)),this.positionToAngle(s)},t.prototype.getTimeByLocation=function(e,t,i){if(g.d(t)){g.h(i)||(i=e.workingLocations[t],g.h(i)||(i=0));var n=e.values[t].open,r=e.values[t].close,a=e.values[t].workingValue,o=e.values[t].value-a;return n-=o,r-=o,g.h(n)&&g.h(r)?n+(r-n)*i:void 0}},t.prototype.processSeriesDataItem=function(e,t){var i,n=e.component,r=e["date"+t];if(g.h(this.timezoneOffset)?(r.setTime(r.getTime()+6e4*(r.getTimezoneOffset()-this.timezoneOffset)),e.setValue("date"+t,r.getTime(),0)):g.d(this.timezone)&&(r=de.i(r,this.timezone),e.setValue("date"+t,r.getTime(),0),e["date"+t]=r),r){i=r.getTime();var a,o=e["openDate"+t],s=this._prevSeriesTime[n.uid];if(o&&(a=o.getTime()),g.h(a)){var l=Math.abs(i-a);this._minDifference[n.uid]>l&&(this._minDifference[n.uid]=l)}var u=i-s;u>0&&this._minDifference[n.uid]>u&&(this._minDifference[n.uid]=u),this._prevSeriesTime[n.uid]=i,n._baseInterval[this.uid]&&this.postProcessSeriesDataItem(e)}},t.prototype.updateAxisBySeries=function(){e.prototype.updateAxisBySeries.call(this);var t=this.chooseInterval(0,this.minDifference,1);this.minDifference>=de.d("day",27)&&"week"==t.timeUnit&&(t.timeUnit="month",t.count=1),"month"==t.timeUnit&&(this.minDifference>=de.d("day",58)&&1==t.count&&(t.count=2),this.minDifference>=de.d("day",87)&&2==t.count&&(t.count=3),this.minDifference>=de.d("day",174)&&5==t.count&&(t.count=6)),this.minDifference>=de.d("hour",23)&&"hour"==t.timeUnit&&(t.timeUnit="day",t.count=1),this.minDifference>=de.d("week",1)-de.d("hour",1)&&"day"==t.timeUnit&&(t.timeUnit="week",t.count=1),this.minDifference>=de.d("year",1)-de.d("day",1.01)&&"month"==t.timeUnit&&(t.timeUnit="year",t.count=1),this._baseIntervalReal=t,this._mainBaseInterval=t},Object.defineProperty(t.prototype,"baseInterval",{get:function(){return this._groupInterval?this._groupInterval:this._baseInterval?this._baseInterval:this._baseIntervalReal},set:function(e){JSON.stringify(this._baseInterval)!=JSON.stringify(e)&&(this._baseInterval=e,this._mainBaseInterval=e,g.h(e.count)||(e.count=1),this.invalidate(),this.postProcessSeriesDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mainBaseInterval",{get:function(){return this._baseInterval?this._baseInterval:this._mainBaseInterval?this._mainBaseInterval:this._baseIntervalReal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipEmptyPeriods",{get:function(){return this.getPropertyValue("skipEmptyPeriods")},set:function(e){if(e){var t=this.axisBreaks.template;t.startLine.disabled=!0,t.endLine.disabled=!0,t.fillShape.disabled=!0,t.breakSize=0}else this._gapBreaks&&(this.axisBreaks.clear(),this._gapBreaks=!1);this.setPropertyValue("skipEmptyPeriods",e)&&(this.invalidate(),this.postProcessSeriesDataItems(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipDateFormat",{get:function(){return this.getPropertyValue("tooltipDateFormat")},set:function(e){this.setPropertyValue("tooltipDateFormat",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markUnitChange",{get:function(){return this.getPropertyValue("markUnitChange")},set:function(e){this.setPropertyValue("markUnitChange",e)&&this.invalidateData()},enumerable:!0,configurable:!0}),t.prototype.getTooltipText=function(e){var t,i=this.positionToDate(e);if(i=de.h(i,this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),this.tooltipDate=i,g.d(this.tooltipDateFormat))t=this._df.format(i,this.tooltipDateFormat,-1==["day","month","week","year"].indexOf(this.baseInterval.timeUnit));else{var n=this.dateFormats.getKey(this.baseInterval.timeUnit);t=n?this._df.format(i,n):this.getPositionLabel(e)}return this._adapterO?this._adapterO.apply("getTooltipText",t):t},t.prototype.roundPosition=function(e,t,i){var n=this.baseInterval,r=n.timeUnit,a=n.count,o=this.positionToDate(e);if(de.h(o,r,a,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),t>0&&de.a(o,r,t*a,this._df.utc),i>0&&i<1&&o.setTime(o.getTime()+this.baseDuration*i),this.isInBreak(o.getTime()))for(;o.getTime()<this.max&&(de.a(o,r,a,this._df.utc),this.isInBreak(o.getTime())););return this.dateToPosition(o)},t.prototype.getCellStartPosition=function(e){return this.roundPosition(e,0)},t.prototype.getCellEndPosition=function(e){return this.roundPosition(e,1)},t.prototype.getSeriesDataItem=function(e,t,i){var n=this.positionToValue(t),r=n-("Y"==this.axisLetter?e.dataItems.template.locations.dateY:e.dataItems.template.locations.dateX)*this.baseDuration,a=de.h(new Date(n),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),o=de.h(new Date(n+this.baseDuration),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);o.getTime()>a.getTime()&&Math.abs(o.getTime()-r)<Math.abs(r-a.getTime())&&(a=o);var s,l=e.dataItemsByAxis.getKey(this.uid).getKey(a.getTime()+e.currentDataSetId);!l&&i&&(s="Y"==this.axisLetter?"dateY":"dateX",l=e.dataItems.getIndex(e.dataItems.findClosestIndex(a.getTime(),(function(e){return e[s]?e[s].getTime():-1/0}),"any")));return l},t.prototype.getPositionLabel=function(e){var t=this.positionToDate(e);return this._df.format(t,this.getCurrentLabelFormat())},t.prototype.getCurrentLabelFormat=function(){return this.dateFormats.getKey(this._gridInterval?this._gridInterval.timeUnit:"day")},t.prototype.initRenderer=function(){e.prototype.initRenderer.call(this);var t=this.renderer;t&&(t.ticks.template.location=0,t.grid.template.location=0,t.labels.template.location=0,t.baseGrid.disabled=!0)},Object.defineProperty(t.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),t.prototype.animateMinMax=function(e,t){var i=this,n=this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:e},{property:"_maxAdjusted",from:this._maxAdjusted,to:t}],this.rangeChangeDuration,this.rangeChangeEasing);return n.events.on("animationprogress",(function(){i.dispatch("extremeschanged")})),n},t.prototype.handleExtremesChange=function(){if(e.prototype.handleExtremesChange.call(this),this.groupData){var t=this.baseInterval.timeUnit+this.baseInterval.count;this.groupMin[t]=this._finalMin,this.groupMax[t]=this._finalMax}},t.prototype.zoomToDates=function(e,t,i,n,r){e=this._df.parse(e),t=this._df.parse(t),this.zoomToValues(e.getTime(),t.getTime(),i,n,r)},t.prototype.zoomToValues=function(e,t,i,r,a){var o=this;if(this.groupData){var s=this.adjustDifference(e,t),l=!1;t==this.max&&(l=!0);var u=!1;if(e==this.min&&(u=!0),g.d(s)){var c=this.mainBaseInterval,h=this.chooseInterval(0,s,this.groupCount,this.groupIntervals);(h.timeUnit==c.timeUnit&&h.count<c.count||de.d(h.timeUnit,1)<de.d(c.timeUnit,1))&&(h=Object(n.a)({},c));var p=h.timeUnit+h.count,d=this.groupMin[p],f=this.groupMax[p];g.h(d)&&g.h(f)||(d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,this.series.each((function(e){var t=e.min(o),i=e.max(o);if(e._dataSets){var n=e._dataSets.getKey(h.timeUnit+h.count);if(n){var r=n.getIndex(0),a=n.getIndex(n.length-1);r&&(e.xAxis==o?t=r.dateX.getTime():e.yAxis==o&&(t=r.dateY.getTime())),a&&(e.xAxis==o?i=a.dateX.getTime():e.yAxis==o&&(i=a.dateY.getTime()))}}i=de.h(de.a(new Date(i),h.timeUnit,1,o._df.utc),h.timeUnit,1,o._df.firstDayOfWeek,o._df.utc,void 0,o._df.timezoneMinutes,o._df.timezone).getTime(),t<d&&(d=t),i>f&&(f=i)})),this.groupMin[p]=d,this.groupMax[p]=f),e=I.i(e,d,f),t=I.i(t,d,f),a&&(l&&(e=t-s,e=I.i(e,d,f)),u&&(t=e+s,t=I.i(t,d,f)));m=(e-d)/(f-d),y=(t-d)/(f-d);this.zoom({start:m,end:y},i,r)}}else{var m=this.valueToPosition(e),y=this.valueToPosition(t);this.zoom({start:m,end:y},i,r)}},t.prototype.asIs=function(t){return"baseInterval"==t||e.prototype.asIs.call(this,t)},t.prototype.copyFrom=function(t){var i=this;e.prototype.copyFrom.call(this,t),this.dateFormats=t.dateFormats,this.periodChangeDateFormats=t.periodChangeDateFormats,this.groupIntervals.clear(),t.groupIntervals.each((function(e){i.groupIntervals.push(Object(n.a)({},e))})),this.gridIntervals.clear(),t.gridIntervals.each((function(e){i.gridIntervals.push(Object(n.a)({},e))})),t._baseInterval&&(this.baseInterval=t._baseInterval)},t.prototype.showTooltipAtPosition=function(t,i){var n=this;if(i||(t=this.toAxisPosition(t)),this.snapTooltip){var r,a=this.positionToDate(t).getTime();if(this.series.each((function(e){if(e.baseAxis==n){var i=n.getSeriesDataItem(e,t,!0);if(i){var o=void 0;e.xAxis==n&&(o=i.dateX),e.yAxis==n&&(o=i.dateY),r?Math.abs(r.getTime()-a)>Math.abs(o.getTime()-a)&&(r=o):r=o}}})),r){var o=r.getTime();r=de.h(new Date(o),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),o=r.getTime();var s=this.renderer.tooltipLocation;0==s&&(s=1e-4),r=new Date(r.getTime()+this.baseDuration*s),t=this.dateToPosition(r),this.chart.cursor&&this.chart.cursor.snapToSeries||this.series.each((function(e){var t=e.dataItemsByAxis.getKey(n.uid).getKey(o+e.currentDataSetId),i=e.showTooltipAtDataItem(t);i?n.chart._seriesPoints.push({series:e,point:i}):(e.tooltipText||e.tooltipHTML)&&e.hideTooltip()}))}}e.prototype.showTooltipAtPosition.call(this,t,!0)},Object.defineProperty(t.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(e){this.setPropertyValue("snapTooltip",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupData",{get:function(){return this.getPropertyValue("groupData")},set:function(e){var t=this;this.setPropertyValue("groupData",e)&&(this.series.each((function(i){i.setDataSet(""),e&&!i.dataGrouped&&i.inited&&(i._baseInterval[t.uid]=t.mainBaseInterval,t.groupSeriesData(i))})),this._currentDataSetId="",this._groupInterval=void 0,this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupInterval",{get:function(){return this.getPropertyValue("groupInterval")},set:function(e){this.setPropertyValue("groupInterval",e)&&(this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupCount",{get:function(){return this.getPropertyValue("groupCount")},set:function(e){this.setPropertyValue("groupCount",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timezoneOffset",{get:function(){return this.getPropertyValue("timezoneOffset")},set:function(e){this.setPropertyValue("timezoneOffset",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timezone",{get:function(){return this.getPropertyValue("timezone")},set:function(e){this.setPropertyValue("timezone",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridInterval",{get:function(){return this._gridInterval},enumerable:!0,configurable:!0}),t.prototype.makeGap=function(e,t){var i=e.component;if(e&&t&&!i.connect&&g.h(i.autoGapCount)&&i.baseAxis==this){var n=e.dates["date"+this.axisLetter],r=t.dates["date"+this.axisLetter];if(n&&r)if(n.getTime()-r.getTime()>i.autoGapCount*this.baseDuration)return!0}return!1},Object.defineProperty(t.prototype,"baseValue",{get:function(){return this.min},enumerable:!0,configurable:!0}),t}(he);r.b.registeredClasses.DateAxis=me,r.b.registeredClasses.DateAxisDataItem=fe;var ye=function(e){function t(){var t=e.call(this)||this;return t.className="AxisRendererX",t.minGridDistance=120,t.opposite=!1,t.rotation=0,t.width=Object(d.c)(100),t.labels.template.horizontalCenter="middle",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.setAxis=function(t){e.prototype.setAxis.call(this,t),t.layout="vertical"},t.prototype.updateGridContainer=function(){var e=this.axis;if(e){var t=this.gridContainer;t.x=e.pixelX,t.width=e.axisLength}},t.prototype.processRenderer=function(){e.prototype.processRenderer.call(this);var t=this.axis;if(t){t.width instanceof d.a||(t.width=Object(d.c)(100)),O.R(this.line);var i=t.title;i.rotation=0,i.align="center",this.opposite?(this.line.toFront(),i.toBack()):(i.toFront(),this.toBack(),this.line.toBack())}},t.prototype.updateTooltip=function(){if(this.axis){var e=1e3,t=this.line.pixelX,i=this.line.pixelY,n=this.axisLength,r=e;this.opposite?this.inside||(i=-1e3,r=e):this.inside&&(i=-1e3,r=e),this.axis.updateTooltip("vertical",{x:t,y:i,width:n,height:r})}},t.prototype.updateLabelElement=function(e,t,i,n){g.d(n)||(n=e.location),t+=(i-t)*n;var r=this.positionToPoint(t);e.isMeasured=!e.inside;var a,o=0,s=this.gridContainer.maxHeight;this.opposite?(e.inside?(a="top","bottom"==e.valign&&(o=s,a="bottom"),"middle"==e.valign&&(o=s/2,a="middle")):a="bottom",r.y=o):(e.inside?(a="bottom","top"==e.valign&&(o=-s,a="top"),"middle"==e.valign&&(o=-s/2,a="middle")):a="top",r.y+=o),0==e.rotation&&(e.verticalCenter=a),this.positionItem(e,r),this.toggleVisibility(e,t,this.minLabelPosition,this.maxLabelPosition)},Object.defineProperty(t.prototype,"axisLength",{get:function(){var e=this.axis;return e.measuredWidth-e.pixelPaddingRight-e.pixelPaddingLeft||0},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e,t){return{x:this.positionToCoordinate(e),y:0}},t.prototype.pointToPosition=function(e){return this.coordinateToPosition(e.x,e.y)},t.prototype.getPositionRangePath=function(e,t){var i=I.i(this.positionToCoordinate(e),0,this.axisLength),n=I.i(this.positionToCoordinate(t),0,this.axisLength),r=Math.abs(n-i),a=this.getHeight(),o=Math.min(i,n);return f.j({x:o,y:0,width:r,height:a},!0)},t.prototype.updateBreakElement=function(t){e.prototype.updateBreakElement.call(this,t);var i=t.startLine,n=t.endLine,r=t.fillShape,a=t.startPoint,o=t.endPoint,s=t.pixelMarginLeft,l=this.getHeight()-t.pixelMarginTop-t.pixelMarginBottom;a.x=I.i(a.x,-1,this.axisLength+1),o.x=I.i(o.x,-1,this.axisLength+1),a.x==o.x&&(a.x<0||a.x>this.axisLength)?t.fillShape.__disabled=!0:t.fillShape.__disabled=!1,i.y=s,i.width=0,i.height=l,n.y=s,n.width=0,n.height=l,r.height=l,r.width=Math.abs(o.x-a.x),r.y=s,r.x=a.x},t.prototype.updateGridElement=function(e,t,i){t+=(i-t)*e.location;var n=this.positionToPoint(t);e.path=f.g({x:0,y:0})+f.f({x:0,y:this.getHeight()}),this.positionItem(e,n),this.toggleVisibility(e,t,0,1)},t.prototype.updateTickElement=function(e,t,i){t+=(i-t)*e.location;var n=this.positionToPoint(t),r=e.length;n.y=O.I({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.opposite?r*=e.inside?1:-1:r*=e.inside?-1:1,e.path=f.g({x:0,y:0})+f.f({x:0,y:r}),this.positionItem(e,n),this.toggleVisibility(e,t,0,1)},t.prototype.updateAxisLine=function(){this.line.path=f.g({x:0,y:0})+f.f({x:this.axisLength,y:0})},t.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var t=this.axis,i=this.getHeight(),n=this.axisLength,r=this.baseGrid,a=t.basePoint.x;if(a<-.2||a>n+.2)r.hide(0);else{var o=O.I({x:0,y:0},this.gridContainer,r.parent).y;r.path=f.g({x:0,y:0})+f.f({x:0,y:i}),r.moveTo({x:a,y:o}),r.show(0)}},t.prototype.createBreakSprites=function(e){e.startLine=new X.a,e.endLine=new X.a;var t=new oe.a;t.setWavedSides(!1,!0,!1,!0),e.fillShape=t},t.prototype.toAxisPosition=function(e){var t=e,i=this.axis;if(i){var n=i.relativePositionSprite,r=i.pixelX;if(n?r=O.I({x:this.pixelX,y:0},this.parent,n).x:n=i.parent,n)return(t-r/n.innerWidth)/(i.axisLength/n.innerWidth)}return e},t.prototype.updateBullet=function(e,t,i){var n=.5;e instanceof se&&(n=e.location),t+=(i-t)*n;var r=this.positionToPoint(t);r.y=O.I({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.positionItem(e,r),this.toggleVisibility(e,t,0,1)},t}(ae);r.b.registeredClasses.AxisRendererX=ye,_.c.push({relevant:_.b.heightXS,state:function(e,t){if(e instanceof ye){var i=e.states.create(t);return i.properties.inside=!0,i.properties.maxLabelPosition=.9,i.properties.minLabelPosition=.1,i}return null}}),_.c.push({relevant:_.b.heightXXS,state:function(e,t){if(e instanceof ye){var i=e.states.create(t);return i.properties.disabled=!0,i}return null}});var ve=function(e){function t(){var t=e.call(this)||this;return t.className="CategoryAxisBreak",t.properties.startLocation=.5,t.properties.endLocation=.5,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedStartValue,this.startLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedEndValue,this.endLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startCategory",{get:function(){return this.getPropertyValue("startCategory")},set:function(e){this.setPropertyValue("startCategory",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endCategory",{get:function(){return this.getPropertyValue("endCategory")},set:function(e){this.setPropertyValue("endCategory",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startValue",{get:function(){var e=this.getPropertyValue("startCategory");return e?this.axis.categoryToIndex(e):this.getPropertyValue("startValue")},set:function(e){this.setPropertyValue("startValue",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endValue",{get:function(){var e=this.getPropertyValue("endCategory");return e?this.axis.categoryToIndex(e):this.getPropertyValue("endValue")},set:function(e){this.setPropertyValue("endValue",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(e){this.setPropertyValue("startLocation",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(e){this.setPropertyValue("endLocation",e)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),t}(Y);r.b.registeredClasses.CategoryAxisBreak=ve;var ge=function(e){function t(){var t=e.call(this)||this;return t.seriesDataItems={},t.className="CategoryAxisDataItem",t.text="{category}",t.locations.category=0,t.locations.endCategory=1,t.deltaPosition=0,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"category",{get:function(){return this._adapterO&&this._adapterO.isEnabled("category")?this._adapterO.apply("category",this.properties.category):this.properties.category},set:function(e){var t=this.properties.category;this.setProperty("category",e),g.d(t)&&t!=e&&this.component&&this.component.validateDataElement(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endCategory",{get:function(){return this.properties.endCategory},set:function(e){this.setProperty("endCategory",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deltaPosition",{get:function(){return this.properties.deltaCoordinate},set:function(e){e!=this.properties.deltaCoordinate&&(this.setProperty("deltaCoordinate",e),this.component&&(this.component.invalidateDataItems(),this.component.invalidateSeries()))},enumerable:!0,configurable:!0}),t}($),_e=function(e){function t(){var t=e.call(this)||this;t.dataItemsByCategory=new w.a,t.className="CategoryAxis",t.axisFieldName="category",t._lastDataItem=t.createDataItem(),t._lastDataItem.component=t,t._disposers.push(t._lastDataItem),t.applyTheme();var i=t.dataItemsByCategory;return t.addDisposer(t.mainDataSet.events.on("removed",(function(e){i.removeKey(e.oldValue.category)}))),t}return Object(n.c)(t,e),t.prototype.createDataItem=function(){return new ge},t.prototype.createAxisBreak=function(){return new ve},t.prototype.processSeriesDataItem=function(t,i){e.prototype.processSeriesDataItem.call(this,t,i);var n=t["category"+this.axisLetter];if(g.d(n)){var r=this.dataItemsByCategory.getKey(n);if(r){var a=t.component.uid,o=r.seriesDataItems[a];o||(o=[],r.seriesDataItems[a]=o),o.push(t)}}else t.component.dataItems.remove(t)},t.prototype.validateDataRange=function(){var i=this;e.prototype.validateDataRange.call(this),v.d(this._series.iterator(),(function(e){if(e.xAxis instanceof t&&e.yAxis instanceof t)e.invalidateDataRange();else{var n=i.positionToIndex(i.start),r=i.positionToIndex(i.end);r>=i.dataItems.length&&r--;for(var a=e.uid,o=void 0,s=void 0,l=n;l<=r;l++){var u=i.dataItems.getIndex(l);if(u){var c=u.seriesDataItems[a];if(c)for(var h=0;h<c.length;h++){var p=c[h];if(p){var d=p.index;(!g.h(o)||d<o)&&(o=d),(!g.h(s)||d>s)&&(s=d)}}}}g.h(o)?e.startIndex=o:e.start=i.start,g.h(s)?e.endIndex=s+1:e.end=i.end,i._axisBreaks&&i._axisBreaks.length>0&&e.invalidateDataRange()}}))},t.prototype.validate=function(){var t=this;e.prototype.validate.call(this);var i=this.dataItems.length,n=I.i(Math.floor(this.start*i-1),0,i),r=I.i(Math.ceil(this.end*i),0,i);this.renderer.invalid&&this.renderer.validate();var a=this.renderer.axisLength/Math.max(this.renderer.minGridDistance,1/Number.MAX_SAFE_INTEGER),o=Math.min(this.dataItems.length,Math.ceil((r-n)/a));if(this._startIndex=Math.floor(n/o)*o,this._endIndex=Math.ceil(this.end*i),this.fixAxisBreaks(),this._startIndex==this._endIndex&&this._endIndex++,this._frequency=o,!(this.axisLength<=0)){this.maxZoomFactor=this.dataItems.length,this.dataItems.length<=0&&(this.maxZoomFactor=1),this.resetIterators(),n=I.B(0,this._startIndex-this._frequency),r=I.C(this.dataItems.length,this._endIndex+this._frequency);for(var s=0,l=0;l<n;l++){(c=this.dataItems.getIndex(l)).__disabled=!0}l=r;for(var u=this.dataItems.length;l<u;l++){(c=this.dataItems.getIndex(l)).__disabled=!0}for(l=n;l<r;l++)if(l<this.dataItems.length){var c=this.dataItems.getIndex(l);if(l/this._frequency==Math.round(l/this._frequency))this.isInBreak(l)||(this.appendDataItem(c),this.validateDataElement(c,s)),s++;else c.__disabled=!0}if(this.appendDataItem(this._lastDataItem),this.validateDataElement(this._lastDataItem,s+1,this.dataItems.length),this._axisBreaks)this._axisBreaks.each((function(e){var i=e.adjustedStartValue,n=e.adjustedEndValue;if(I.x({start:i,end:n},{start:t._startIndex,end:t._endIndex})){for(var r=i;r<=n;r++){(s=t.dataItems.getIndex(r)).__disabled=!0}var a=I.i(Math.ceil(t._frequency/e.breakSize),1,n-i),o=0;if(e.breakSize>0)for(r=i;r<=n;r+=a){var s;(s=t.dataItems.getIndex(r)).__disabled=!1,t.appendDataItem(s),t.validateDataElement(s,o),o++}}}));this.validateBreaks(),this.validateAxisRanges(),this.ghostLabel.invalidate(),this.renderer.invalidateLayout()}},t.prototype.validateDataElement=function(t,i,n){e.prototype.validateDataElement.call(this,t),t.itemIndex=this._axisItemCount,this._axisItemCount++;var r=this.renderer;g.h(n)||(n=this.categoryToIndex(t.category));var a=this.categoryToIndex(t.endCategory);g.h(a)||(a=n);var o,s,l,u=this.indexToPosition(n,t.locations.category),c=this.indexToPosition(a,t.locations.endCategory);t.position=u,t.isRange&&(o=a,s=this.indexToPosition(n,t.locations.category),l=this.indexToPosition(o,t.locations.endCategory)),t.point=r.positionToPoint(u);var h=t.tick;h&&!h.disabled&&r.updateTickElement(h,u,c);var p=t.grid;p&&!p.disabled&&r.updateGridElement(p,u,c);var d=t.label;d&&!d.disabled&&(t.isRange&&void 0!=d.text||(t.text=t.text),r.updateLabelElement(d,u,c),(r instanceof le&&t.label.measuredWidth>this.ghostLabel.measuredWidth||r instanceof ye&&t.label.measuredHeight>this.ghostLabel.measuredHeight)&&(t.label.html?this.ghostLabel.html=t.label.currentText:this.ghostLabel.text=t.label.currentText));var f=t.axisFill;f&&!f.disabled&&(t.isRange||(o=n+this._frequency,s=this.indexToPosition(n,f.location),l=this.indexToPosition(o,f.location)),r.updateFillElement(f,s,l),t.isRange||this.fillRule(t,i)),t.bullet&&r.updateBullet(t.bullet,u,c);var m=t.mask;m&&r.updateFillElement(m,s,l)},t.prototype.disposeData=function(){this.dataItemsByCategory.clear(),e.prototype.disposeData.call(this)},t.prototype.processDataItem=function(t,i){t&&(e.prototype.processDataItem.call(this,t,i),g.d(t.category)&&this.dataItemsByCategory.setKey(t.category,t))},t.prototype.getDataItem=function(e){var t=e[this.dataFields.category];if(g.d(t)){var i=this.dataItemsByCategory.getKey(t);return i||this.dataItems.create()}},t.prototype.indexToPosition=function(e,t){g.h(t)||(t=.5);var i=this.startIndex,n=this.endIndex,r=this.adjustDifference(i,n),a=this.startLocation;if(r-=a,r-=1-this.endLocation,this._axisBreaks){var o=this._axisBreaks;v.e(o.iterator(),(function(t){var r=t.adjustedStartValue,a=t.adjustedEndValue;if(e<i||!g.h(r)||!g.h(a))return!1;if(I.x({start:r,end:a},{start:i,end:n})){r=Math.max(i,r),a=Math.min(n,a);var o=t.breakSize;e>a?i+=(a-r)*(1-o):e<r||(e=r+(e-r)*o)}return!0}))}var s=0,l=this.dataItems.getIndex(e);return l&&(s=l.deltaPosition),I.E(s+(e+t-a-i)/r,5)},t.prototype.categoryToPosition=function(e,t){var i=this.categoryToIndex(e);return this.indexToPosition(i,t)},t.prototype.categoryToPoint=function(e,t){var i=this.categoryToPosition(e,t),n=this.renderer.positionToPoint(i),r=this.renderer.positionToAngle(i);return{x:n.x,y:n.y,angle:r}},t.prototype.anyToPoint=function(e,t){return this.categoryToPoint(e,t)},t.prototype.anyToPosition=function(e,t){return this.categoryToPosition(e,t)},t.prototype.categoryToIndex=function(e){if(g.d(e)){var t=this.dataItemsByCategory.getKey(e);if(t)return t.index}},t.prototype.zoomToCategories=function(e,t){this.zoomToIndexes(this.categoryToIndex(e),this.categoryToIndex(t)+1)},t.prototype.getAnyRangePath=function(e,t,i,n){var r=this.categoryToPosition(e,i),a=this.categoryToPosition(t,n);return this.getPositionRangePath(r,a)},t.prototype.roundPosition=function(e,t){var i=this.positionToIndex(e);return this.indexToPosition(i,t)},t.prototype.getFirstSeriesDataItem=function(e,t){for(var i=0;i<e.dataItems.length;i++){var n=e.dataItems.getIndex(i);if(e.xAxis==this&&n.categoryX==t)return n;if(e.yAxis==this&&n.categoryY==t)return n}},t.prototype.getLastSeriesDataItem=function(e,t){for(var i=e.dataItems.length-1;i>=0;i--){var n=e.dataItems.getIndex(i);if(e.xAxis==this&&n.categoryX==t)return n;if(e.yAxis==this&&n.categoryY==t)return n}},t.prototype.getSeriesDataItemByCategory=function(e,t){var i,n=this;return t.dataItems.each((function(r){t.xAxis==n?r.categoryX==e&&(i=r):t.yAxis==n&&r.categoryY==e&&(i=r)})),i},t.prototype.getSeriesDataItem=function(e,t,i){var n=this;if(g.h(t)){var r=this.positionToIndex(t);r>=this.dataItems.length&&r--;var a=this.dataItems.getIndex(r);if(a){var o,s=a.category,l=e.dataItems.getIndex(r);if(l){if(e.xAxis==this&&l.categoryX==s)return l;if(e.yAxis==this&&l.categoryY==s)return l}return e.dataItems.each((function(t){e.xAxis==n&&t.categoryX==s&&(o||(o=t),Math.abs(r-o.index)>Math.abs(r-t.index)&&(o=t)),e.yAxis==n&&t.categoryY==s&&(o||(o=t),Math.abs(r-o.index)>Math.abs(r-t.index)&&(o=t))})),o}}},t.prototype.getX=function(e,t,i,n,r){var a=this.getPositionX(e,t,i,n,r);return g.g(a)?this.basePoint.x:this.renderer.positionToPoint(a).x},t.prototype.getPositionX=function(e,t,i,n,r){var a;return g.d(t)&&(a=this.categoryToPosition(e.categories[t],i)),r&&(a=I.i(a,r.start,r.end)),a},t.prototype.getY=function(e,t,i,n,r){var a=this.getPositionY(e,t,i,n,r);return g.g(a)?this.basePoint.y:this.renderer.positionToPoint(a).y},t.prototype.getPositionY=function(e,t,i,n,r){var a;return g.d(t)&&(a=this.categoryToPosition(e.categories[t],i)),r&&(a=I.i(a,r.start,r.end)),a},t.prototype.getAngle=function(e,t,i,n,r){var a=this.categoryToPosition(e.categories[t],i);return r&&(a=I.i(a,r.start,r.end)),this.positionToAngle(a)},t.prototype.getCellStartPosition=function(e){return this.roundPosition(e,0)},t.prototype.getCellEndPosition=function(e){return this.roundPosition(e,1)},t.prototype.getTooltipText=function(e){var t=this.dataItems.getIndex(this.positionToIndex(e));if(t)return this.tooltipDataItem=t,this.tooltip.dataItem=t,this.tooltipText?this.tooltipText:this._adapterO?this._adapterO.apply("getTooltipText",t.category):t.category},t.prototype.positionToIndex=function(e){(e=I.E(e,10))<0&&(e=0),e>1&&(e=1);var t=this.startIndex,i=this.endIndex,n=i-t-this.startLocation-(1-this.endLocation);e+=1/n*this.startLocation;var r=null;if(this._axisBreaks){var a=this._axisBreaks;v.e(a.iterator(),(function(a){var o=a.startPosition,s=a.endPosition,l=a.adjustedStartValue,u=a.adjustedEndValue;l=I.B(l,t),u=I.C(u,i);var c=a.breakSize;if(n-=(u-l)*(1-c),e>s)t+=(u-l)*(1-c);else if(!(e<o)){var h=(e-o)/(s-o);return r=l+Math.round(h*(u-l)),!1}return!0}))}return g.h(r)||(r=Math.floor(e*n+t)),r>=this.dataItems.length&&(r=this.dataItems.length-1),r},t.prototype.positionToCategory=function(e){return this.getPositionLabel(e)},t.prototype.getPositionLabel=function(e){var t=this.dataItems.getIndex(this.positionToIndex(e));if(t)return t.category},Object.defineProperty(t.prototype,"basePoint",{get:function(){return this.renderer.positionToPoint(1)},enumerable:!0,configurable:!0}),t.prototype.initRenderer=function(){e.prototype.initRenderer.call(this),this.renderer.baseGrid.disabled=!0},Object.defineProperty(t.prototype,"frequency",{get:function(){return this._frequency},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortBySeries",{get:function(){return this.getPropertyValue("sortBySeries")},set:function(e){this.setPropertyValue("sortBySeries",e,!0)},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(t){t&&g.d(t.sortBySeries)&&g.j(t.sortBySeries)&&(this.map.hasKey(t.sortBySeries)?t.sortBySeries=this.map.getKey(t.sortBySeries):(this.addDelayedMap("sortBySeries",t.sortBySeries),delete t.sortBySeries)),e.prototype.processConfig.call(this,t)},t}(J);r.b.registeredClasses.CategoryAxis=_e,r.b.registeredClasses.CategoryAxisDataItem=ge;var be=function(e){function t(){var t=e.call(this)||this;return t.className="XYSeriesDataItem",t.values.customValue={},t.values.valueX={stack:0},t.values.valueY={stack:0},t.values.openValueX={},t.values.openValueY={},t.values.dateX={},t.values.dateY={},t.values.openDateX={},t.values.openDateY={},t.setLocation("dateX",.5,0),t.setLocation("dateY",.5,0),t.setLocation("categoryX",.5,0),t.setLocation("categoryY",.5,0),t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"valueX",{get:function(){return this.values.valueX.value},set:function(e){this.setValue("valueX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customValue",{get:function(){return this.values.customValue.value},set:function(e){this.setValue("customValue",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueY",{get:function(){return this.values.valueY.value},set:function(e){this.setValue("valueY",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateX",{get:function(){return this.getDate("dateX")},set:function(e){this.setDate("dateX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateY",{get:function(){return this.getDate("dateY")},set:function(e){this.setDate("dateY",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categoryX",{get:function(){return this.categories.categoryX},set:function(e){this.setCategory("categoryX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"categoryY",{get:function(){return this.categories.categoryY},set:function(e){this.setCategory("categoryY",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openValueX",{get:function(){return this.values.openValueX.value},set:function(e){this.setValue("openValueX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openValueY",{get:function(){return this.values.openValueY.value},set:function(e){this.setValue("openValueY",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openDateX",{get:function(){return this.getDate("openDateX")},set:function(e){this.setDate("openDateX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openDateY",{get:function(){return this.getDate("openDateY")},set:function(e){this.setDate("openDateY",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openCategoryX",{get:function(){return this.categories.openCategoryX},set:function(e){this.setCategory("openCategoryX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openCategoryY",{get:function(){return this.categories.openCategoryY},set:function(e){this.setCategory("openCategoryY",e)},enumerable:!0,configurable:!0}),t.prototype.getMin=function(e,t,i){var n,r=this;return g.h(i)||(i=0),V.d(e,(function(e){var a;a=t?r.getWorkingValue(e):r.getValue(e),((a+=i)<n||!g.h(n))&&(n=a)})),n},t.prototype.getMax=function(e,t,i){var n,r=this;return g.h(i)||(i=0),V.d(e,(function(e){var a;a=t?r.getWorkingValue(e):r.getValue(e),((a+=i)>n||!g.h(n))&&(n=a)})),n},t}(N),xe=function(e){function t(){var t=e.call(this)||this;return t.groupFields={},t._xAxis=new o.d,t._yAxis=new o.d,t._xValueFields=[],t._yValueFields=[],t._baseInterval={},t.dataGrouped=!1,t.usesShowFields=!1,t._dataSetChanged=!1,t._maxxX=1e5,t._maxxY=1e5,t._propertiesChanged=!1,t.outOfRange=!1,t.className="XYSeries",t.isMeasured=!1,t.groupFields.valueX="close",t.groupFields.valueY="close",t.groupFields.customValue="close",t.groupFields.openValueX="open",t.groupFields.openValueY="open",t.cursorTooltipEnabled=!0,t.cursorHoverEnabled=!0,t.excludeFromTotal=!1,t.mainContainer.mask=new h.a,t.mainContainer.mask.setElement(t.paper.add("path")),t.stacked=!1,t.snapTooltip=!1,t._showBullets=!1,t.tooltip.pointerOrientation="horizontal",t.properties.stackToNegative=!0,t.hideTooltipWhileZooming=!0,t.setPropertyValue("maskBullets",!0),t.tooltip.events.on("hidden",(function(){t.returnBulletDefaultState()}),void 0,!1),t._disposers.push(t._xAxis),t._disposers.push(t._yAxis),t.observe(h.b,(function(){t.inited&&(t._propertiesChanged=!0,t.legendDataItem&&(t.legendDataItem.childrenCreated=!1),t.chart&&t.chart.legend&&t.chart.legend.invalidateDataItems(),t.invalidate())}),void 0,!1),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y Series"))},t.prototype.createDataItem=function(){return new be},t.prototype.resetExtremes=function(){this._tmin.clear(),this._tmax.clear(),this._smin.clear(),this._smax.clear()},t.prototype.dataChangeUpdate=function(){this.dataGrouped=!1,this._baseInterval={},this._currentDataSetId="",this.resetExtremes(),this.xAxis&&this.xAxis.seriesDataChangeUpdate(this),this.yAxis&&this.yAxis.seriesDataChangeUpdate(this)},t.prototype.validateData=function(){this._baseInterval={};var t=this.dataFields;if(t.valueYShow||t.openValueXShow||t.openValueXShow||t.openValueYShow?this.usesShowFields=!0:this.usesShowFields=!1,this.defineFields(),this.data.length>0&&this.dataChangeUpdate(),e.prototype.validateData.call(this),this.updateItemReaderText(),this.chart&&(!g.d(this.dataFields[this._xField])||!g.d(this.dataFields[this._yField])))throw Error('Data fields for series "'+(this.name?this.name:this.uid)+'" are not properly defined.');this.inited&&this.isHidden&&this.hide(0),this.dataGrouped=!1},t.prototype.processDataItem=function(t,i){try{e.prototype.processDataItem.call(this,t,i),this.xAxis.processSeriesDataItem(t,"X"),this.yAxis.processSeriesDataItem(t,"Y"),this.setInitialWorkingValues(t)}catch(n){this._chart&&this._chart.raiseCriticalError(n)}},t.prototype.updateDataItem=function(t){e.prototype.updateDataItem.call(this,t),this.xAxis.processSeriesDataItem(t,"X"),this.yAxis.processSeriesDataItem(t,"Y")},t.prototype.setInitialWorkingValues=function(e){},t.prototype.disposeData=function(){e.prototype.disposeData.call(this);var t=this.xAxis,i=this.yAxis;if(t){var n=this.dataItemsByAxis.getKey(t.uid);n&&n.clear(),t instanceof _e&&this.clearCatAxis(t)}if(i){var r=this.dataItemsByAxis.getKey(i.uid);r&&r.clear(),i instanceof _e&&this.clearCatAxis(i)}},t.prototype.clearCatAxis=function(e){var t=this.uid;e.dataItems.each((function(e){e.seriesDataItems[t]&&(e.seriesDataItems[t]=[])}))},t.prototype.defineFields=function(){var e=this.xAxis,t=this.yAxis;if(e&&t){var i=e.axisFieldName,n=i+"X",r="open"+O.c(i)+"X",a=t.axisFieldName,o=a+"Y",s="open"+O.c(a)+"Y";this._xField=n,this._yField=o,this.dataFields[r]&&(this._xOpenField=r),this.dataFields[s]&&(this._yOpenField=s),this.dataFields[s]||this.baseAxis!=t||(this._yOpenField=o),this.dataFields[r]||this.baseAxis!=e||(this._xOpenField=n),this.stacked&&this.baseAxis==e&&(this._xOpenField=n),this.stacked&&this.baseAxis==t&&(this._yOpenField=o),e instanceof _e&&t instanceof _e&&(this._yOpenField||(this._yOpenField=o)),this._xValueFields=[],this._yValueFields=[],this.addValueField(e,this._xValueFields,this._xField),this.addValueField(e,this._xValueFields,this._xOpenField),this.addValueField(t,this._yValueFields,this._yField),this.addValueField(t,this._yValueFields,this._yOpenField)}},t.prototype.addValueField=function(e,t,i){e instanceof he&&g.d(this.dataFields[i])&&-1==t.indexOf(i)&&t.push(i)},t.prototype.setCategoryAxisField=function(e,t){g.d(this.dataFields[e])||(this.dataFields[e]=t.dataFields.category)},t.prototype.setDateAxisField=function(e,t){g.d(this.dataFields[e])||(this.dataFields[e]=t.dataFields.date)},t.prototype.afterDraw=function(){e.prototype.afterDraw.call(this),this.createMask()},t.prototype.createMask=function(){if(this.mainContainer.mask){var e=this.getMaskPath();v.d(this.axisRanges.iterator(),(function(t){t.axisFill.fillPath&&(t.axisFill.validate(),e+=t.axisFill.fillPath)})),this.mainContainer.mask.path=e}},t.prototype.getMaskPath=function(){return this.xAxis&&this.yAxis?f.j({x:0,y:0,width:this.xAxis.axisLength,height:this.yAxis.axisLength}):""},t.prototype.getAxisField=function(e){return e==this.xAxis?this.xField:e==this.yAxis?this.yField:void 0},t.prototype.validateDataItems=function(){var t=this.chart;t&&(this._maxxX=I.B(1e5,2*t.plotContainer.maxWidth),this._maxxY=I.B(1e5,2*t.plotContainer.maxHeight));var i=this.xAxis,n=this.yAxis;i&&n&&(i.updateAxisBySeries(),n.updateAxisBySeries()),e.prototype.validateDataItems.call(this),i&&n&&(i.postProcessSeriesDataItems(this),n.postProcessSeriesDataItems(this))},t.prototype.validateDataRange=function(){var t=this.xAxis,i=this.yAxis;t&&i&&(t.dataRangeInvalid&&t.validateDataRange(),i.dataRangeInvalid&&i.validateDataRange()),e.prototype.validateDataRange.call(this)},t.prototype.validate=function(){var t=this.xAxis,i=this.yAxis;if(t&&i){t.invalid&&t.validate(),i.invalid&&i.validate(),this.y=i.pixelY,this.x=t.pixelX,this._showBullets=!0;var n=this.minBulletDistance;g.h(n)&&this.baseAxis.axisLength/(this.endIndex-this.startIndex)<n&&(this._showBullets=!1)}if(this.updateTooltip(),!(t instanceof me&&t.groupData&&!this.dataGrouped||i instanceof me&&i.groupData&&!this.dataGrouped)){e.prototype.validate.call(this);var r=this.chart,a=this.maskBullets;r&&a&&"XYChart"==r.className&&("vertical"!=r.leftAxesContainer.layout&&"vertical"!=r.rightAxesContainer.layout||(this.yAxis?this.bulletsContainer.mask=this.yAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0),"horizontal"!=r.topAxesContainer.layout&&"horizontal"!=r.bottomAxesContainer.layout||(this.xAxis?this.bulletsContainer.mask=this.xAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0))}},Object.defineProperty(t.prototype,"xAxis",{get:function(){if(this.chart){if(!this._xAxis.get()){var e=this.chart.xAxes.getIndex(0);if(!e)throw Error("There are no X axes on chart.");this.xAxis=e}return this._xAxis.get()}},set:function(e){this.setXAxis(e)},enumerable:!0,configurable:!0}),t.prototype.setXAxis=function(e){var t=this._xAxis.get();t!=e&&(t&&(this.dataItemsByAxis.removeKey(t.uid),this._xAxis.dispose(),t.series.removeValue(this)),this._xAxis.set(e,e.registerSeries(this)),this.dataItemsByAxis.setKey(e.uid,new w.a),this.invalidateData())},Object.defineProperty(t.prototype,"yAxis",{get:function(){if(this.chart){if(!this._yAxis.get()){var e=this.chart.yAxes.getIndex(0);if(!e)throw Error("There are no Y axes on chart.");this.yAxis=e}return this._yAxis.get()}},set:function(e){this.setYAxis(e)},enumerable:!0,configurable:!0}),t.prototype.setYAxis=function(e){var t=this._yAxis.get();t!=e&&(t&&(this.dataItemsByAxis.removeKey(t.uid),this._yAxis.dispose(),t.series.removeValue(this)),this._yAxis.set(e,e.registerSeries(this)),e.chart instanceof Te&&e.chart.handleYAxisSet(this),this.dataItemsByAxis.setKey(e.uid,new w.a),this.invalidateData())},Object.defineProperty(t.prototype,"baseAxis",{get:function(){var e=this.xAxis,t=this.yAxis;return!this._baseAxis&&e&&t&&(t instanceof me&&(this._baseAxis=t),e instanceof me&&(this._baseAxis=e),t instanceof _e&&(this._baseAxis=t),e instanceof _e&&(this._baseAxis=e),this._baseAxis||(this._baseAxis=e)),this._baseAxis},set:function(e){this._baseAxis!=e&&(this._baseAxis=e,this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.addData=function(t,i,n){e.prototype.addData.call(this,t,i,n),this.scrollbarSeries&&(this.scrollbarSeries.addData(t,i,!0),this.scrollbarSeries._parseDataFrom=this._parseDataFrom)},t.prototype.setData=function(t){e.prototype.setData.call(this,t),this.scrollbarSeries&&this.scrollbarSeries.setData(t)},t.prototype.setDataSet=function(t){var i=e.prototype.setDataSet.call(this,t);if(i){this._dataSetChanged=!0;var n=this.dataItems;if(this.resetExtremes(),n&&n.length>0){var r=this.xAxis,a=this.yAxis;this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.appeared||this.processValues(!1),r instanceof me&&r==this.baseAxis&&(this._tmin.setKey(r.uid,n.getIndex(0).dateX.getTime()),this._tmax.setKey(r.uid,n.getIndex(n.length-1).dateX.getTime()),this.dispatch("extremeschanged")),a instanceof me&&a==this.baseAxis&&(this._tmin.setKey(a.uid,n.getIndex(0).dateY.getTime()),this._tmax.setKey(a.uid,n.getIndex(n.length-1).dateY.getTime()),this.dispatch("extremeschanged"))}}return i},t.prototype.processValues=function(t){e.prototype.processValues.call(this,t);var i=this.xAxis,n=this.yAxis;if(i&&n){var r=this.dataItems,a=1/0,o=-1/0,s=1/0,l=-1/0,u=this.startIndex,c=this.endIndex,h=u,p=c;t||(u=0,c=this.dataItems.length);for(var d=u;d<c;d++){var f=r.getIndex(d);this.getStackValue(f,t);var m=f.getValue("valueX","stack"),y=f.getValue("valueY","stack");a=I.C(f.getMin(this._xValueFields,t,m),a),s=I.C(f.getMin(this._yValueFields,t,y),s),o=I.B(f.getMax(this._xValueFields,t,m),o),l=I.B(f.getMax(this._yValueFields,t,y),l),this.stacked&&(this.baseAxis==i&&(y<s&&(s=y),y>l&&(l=y)),this.baseAxis==n&&(m<a&&(a=m),m>o&&(o=m)))}i.processSeriesDataItems(),n.processSeriesDataItems();var v=i.uid,_=n.uid;if(this.xAxis instanceof he&&(a==1/0||o==-1/0))return this._smin.setKey(v,void 0),this._smax.setKey(v,void 0),void this.dispatchImmediately("selectionextremeschanged");if(this.yAxis instanceof he&&(s==1/0||l==-1/0))return this._smin.setKey(_,void 0),this._smax.setKey(_,void 0),void this.dispatchImmediately("selectionextremeschanged");if(!t&&(this._tmin.getKey(v)!=a||this._tmax.getKey(v)!=o||this._tmin.getKey(_)!=s||this._tmax.getKey(_)!=l)){this._tmin.setKey(v,a),this._tmax.setKey(v,o),this._tmin.setKey(_,s),this._tmax.setKey(_,l);var b=this.stackedSeries;b&&(b.isDisposed()?this.stackedSeries=void 0:b.processValues(!1)),this.dispatchImmediately("extremeschanged")}if(u!=h||c!=p){a=1/0,o=-1/0,s=1/0,l=-1/0;for(d=h;d<p;d++){f=r.getIndex(d);this.getStackValue(f,t);m=f.getValue("valueX","stack"),y=f.getValue("valueY","stack");a=I.C(f.getMin(this._xValueFields,t,m),a),s=I.C(f.getMin(this._yValueFields,t,y),s),o=I.B(f.getMax(this._xValueFields,t,m),o),l=I.B(f.getMax(this._yValueFields,t,y),l),this.stacked&&(this.baseAxis==i&&(y<s&&(s=y),y>l&&(l=y)),this.baseAxis==n&&(m<a&&(a=m),m>o&&(o=m)))}}if(this.xAxis instanceof he&&(a==1/0||o==-1/0))return this._smin.setKey(v,void 0),this._smax.setKey(v,void 0),void this.dispatchImmediately("selectionextremeschanged");if(this.yAxis instanceof he&&(s==1/0||l==-1/0))return this._smin.setKey(_,void 0),this._smax.setKey(_,void 0),void this.dispatchImmediately("selectionextremeschanged");if((this._smin.getKey(v)!=a||this._smax.getKey(v)!=o||this._smin.getKey(_)!=s||this._smax.getKey(_)!=l)&&(this._smin.setKey(v,a),this._smax.setKey(v,o),this._smin.setKey(_,s),this._smax.setKey(_,l),this.appeared||0!=this.start||1!=this.end||this.dataItems!=this.mainDataSet)){var x=!1;if(n instanceof he&&!(n instanceof me)){var w=this._tmin.getKey(_);(!g.h(w)||(this.usesShowFields||this._dataSetChanged||i instanceof me&&i.groupData&&this.isShowing)&&s<w||this.stackedSeries&&!this.isHidden)&&(this._tmin.setKey(_,s),x=!0);var k=this._tmax.getKey(_);(!g.h(k)||(this.usesShowFields||this._dataSetChanged||i instanceof me&&i.groupData&&this.isShowing)&&l>k||this.stackedSeries&&!this.isHidden)&&(this._tmax.setKey(_,l),x=!0)}if(i instanceof he&&!(i instanceof me)){w=this._tmin.getKey(v);(!g.h(w)||(this.usesShowFields||this._dataSetChanged||n instanceof me&&n.groupData&&this.isShowing)&&a<w||this.stackedSeries&&!this.isHidden)&&(this._tmin.setKey(v,a),x=!0);k=this._tmax.getKey(v);(!g.h(k)||(this.usesShowFields||this._dataSetChanged||n instanceof me&&n.groupData&&this.isShowing)&&o>k||this.stackedSeries&&!this.isHidden)&&(this._tmax.setKey(v,o),x=!0)}x&&this.dispatchImmediately("extremeschanged"),0==this.start&&1==this.end&&(this._dataSetChanged=!1),this.dispatchImmediately("selectionextremeschanged")}!t&&this.stacked&&this.processValues(!0)}},t.prototype.hideTooltip=function(t){e.prototype.hideTooltip.call(this,t),this.returnBulletDefaultState(),this._prevTooltipDataItem=void 0},t.prototype.showTooltipAtPosition=function(e,t){var i;if(this.visible&&!this.isHiding&&!this.isShowing){var n=this._xAxis.get(),r=this._yAxis.get();n==this.baseAxis&&(i=n.getSeriesDataItem(this,n.toAxisPosition(e),this.snapTooltip)),r==this.baseAxis&&(i=r.getSeriesDataItem(this,r.toAxisPosition(t),this.snapTooltip));var a=this.showTooltipAtDataItem(i);if(a)return a;if(!this.tooltipText&&!this.tooltipHTML)return}this.hideTooltip()},t.prototype.getAdjustedXLocation=function(e,t,i){return e.locations[t]},t.prototype.getAdjustedYLocation=function(e,t,i){return e.locations[t]},t.prototype.showTooltipAtDataItem=function(e){var t,i,r=this.chart.cursor;if(r&&r.hideSeriesTooltipsOnSelection&&r.selection.visible&&r.downPoint)this.hideTooltip();else if(this.returnBulletDefaultState(e),e&&e.visible){if(this.updateLegendValue(e),this.cursorTooltipEnabled){this.tooltipDataItem=e;var a=this.tooltipXField,o=this.tooltipYField;if(g.d(e[a])&&g.d(e[o])){var s=this.getPoint(e,a,o,this.getAdjustedXLocation(e,a),this.getAdjustedYLocation(e,o));if(s&&("XYChart"!=this.chart.className||!(s.y<-1||s.y>this.yAxis.pixelHeight+1||s.x<-1||s.x>this.xAxis.pixelWidth+1))){if(this.tooltipX=s.x,this.tooltipY=s.y,this._prevTooltipDataItem!=e&&(this.dispatchImmediately("tooltipshownat",{type:"tooltipshownat",target:this,dataItem:e}),this._prevTooltipDataItem=e),this.cursorHoverEnabled)try{for(var l=Object(n.g)(e.sprites),u=l.next();!u.done;u=l.next()){var c=u.value;!c.parent.visible||c.isHidden||c.__disabled||c.disabled||c.isHiding||(c.interactions.isRealHover||(c.dispatchImmediately("over"),c.interactions.isRealHover=!0),c.isHover=!0)}}catch(h){t={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(t)throw t.error}}return this.showTooltip()?O.J({x:s.x,y:s.y},this):void 0}}}}else this.updateLegendValue(e,!0)},t.prototype.returnBulletDefaultState=function(e){var t,i;if(this._prevTooltipDataItem&&this._prevTooltipDataItem!=e)try{for(var r=Object(n.g)(this._prevTooltipDataItem.sprites),a=r.next();!a.done;a=r.next()){var o=a.value;if(o.isDisposed())this._prevTooltipDataItem=void 0;else{var s=o.interactions.isRealHover;o.isHover=!1,s&&o.dispatchImmediately("out")}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}},t.prototype.shouldCreateBullet=function(e,t){var i=t.xField;g.d(i)||(i=this.xField);var n=t.yField;if(g.d(n)||(n=this.yField),this.xAxis instanceof he&&!e.hasValue([i])||this.yAxis instanceof he&&!e.hasValue([n]))return!1;if(t.disabled){var r=t.propertyFields.disabled,a=e.dataContext;return!(!a||!1!==a[r])}return!0},t.prototype.updateTooltip=function(){this.hideTooltipWhileZooming||!this.tooltip||this.tooltip.isHidden||this.isHiding||this.isHidden||!this.tooltipDataItem||this.showTooltipAtDataItem(this.tooltipDataItem)},t.prototype.positionBullet=function(t){e.prototype.positionBullet.call(this,t);var i=t.dataItem,n=t.xField;g.d(n)||(n=this.xField);var r=t.yField;g.d(r)||(r=this.yField);var a=this.xAxis,o=this.yAxis;if(a instanceof he&&!i.hasValue([n])||o instanceof he&&!i.hasValue([r]))t.visible=!1;else{var s=this.getBulletLocationX(t,n),l=this.getBulletLocationY(t,r);if(this.getPoint(i,n,r,s,l)){var u=this.xOpenField,c=this.yOpenField,h=void 0,p=void 0;if(a instanceof me){g.h(s)||(s=0);var d=void 0,f=i.getWorkingValue(n);if(u?d=i.getWorkingValue(u):a==this.baseAxis&&(d=a.baseValue),g.h(d)||(d=f),(d+=w=i.getValue("valueX","stack"))==(f+=w)){var m=a.baseInterval,y=a.dateFormatter;d=de.h(new Date(d),m.timeUnit,m.count,y.firstDayOfWeek,y.utc,void 0,y.timezoneMinutes,y.timezone).getTime(),f=de.a(new Date(d),m.timeUnit,m.count,y.utc).getTime()}var v=void 0;v=a==this.baseAxis?d+(f-d)*s:d+(f-d)*(1-s),h=a.valueToPosition(v)}else if(a instanceof he){g.h(s)||(s=0);d=void 0,f=i.getWorkingValue(n);d=u?i.getWorkingValue(u):a.baseValue;v=(d+=w=i.getValue("valueX","stack"))+((f+=w)-d)*(1-s);h=a.valueToPosition(v)}else if(a instanceof _e){var _=this.getAdjustedXLocation(i,n,t.locationX),b=this.getAdjustedXLocation(i,u,t.locationX);h=a.categoryToPosition(i[n],_);var x=void 0;u&&(x=a.categoryToPosition(i[u],b)),g.h(x)||(x=1),h=x+(h-x)*s}if(o instanceof me){g.h(l)||(l=0);d=void 0,f=i.getWorkingValue(r);if(c?d=i.getWorkingValue(c):o==this.baseAxis&&(d=o.baseValue),g.h(d)||(d=f),(d+=w=i.getValue("valueY","stack"))==(f+=w)){m=o.baseInterval,y=o.dateFormatter;d=de.h(new Date(d),m.timeUnit,m.count,y.firstDayOfWeek,y.utc,void 0,y.timezoneMinutes,y.timezone).getTime(),f=de.a(new Date(d),m.timeUnit,m.count,y.utc).getTime()}v=void 0;v=o==this.baseAxis?d+(f-d)*l:d+(f-d)*(1-l),p=o.valueToPosition(v)}else if(o instanceof he){g.h(l)||(l=0);var w;d=void 0,f=i.getWorkingValue(r);d=c?i.getWorkingValue(c):o.baseValue;v=(d+=w=i.getValue("valueY","stack"))+((f+=w)-d)*(1-l);p=o.valueToPosition(v)}else if(o instanceof _e){p=o.categoryToPosition(i[r],l);var k=this.getAdjustedYLocation(i,r,t.locationY),P=this.getAdjustedYLocation(i,c,t.locationY);p=o.categoryToPosition(i[r],k);var S=void 0;c&&(S=o.categoryToPosition(i[c],P)),g.h(S)||(S=1),p=S+(p-S)*l}t.visible=!0,this.positionBulletReal(t,h,p)}else t.visible=!1}},t.prototype.positionBulletReal=function(e,t,i){e.x=this.xAxis.renderer.positionToPoint(t,i).x,e.y=this.yAxis.renderer.positionToPoint(i,t).y},t.prototype.getBulletLocationX=function(e,t){var i=e.locationX,n=e.dataItem;return g.h(i)||(i=n.workingLocations[t]),i},t.prototype.getBulletLocationY=function(e,t){var i=e.locationY,n=e.dataItem;return g.h(i)||(i=n.workingLocations[t]),i},t.prototype.updateStacking=function(){var e=this;this.invalidateDataItems(),this.chart&&this.chart.series.each((function(t){t.baseAxis==e.baseAxis&&(t.stackedSeries=void 0,t.invalidateDataItems(),t.invalidateProcessedData())}))},Object.defineProperty(t.prototype,"stacked",{get:function(){return this.getPropertyValue("stacked")},set:function(e){if(this.setPropertyValue("stacked",e,!0)){this.updateStacking();var t,i=this.xAxis,n=this.yAxis;if(!e)i!=this.baseAxis&&i instanceof he&&(t=this.xField),n!=this.baseAxis&&n instanceof he&&(t=this.yField),t&&this.dataItems.each((function(e){e.setCalculatedValue(t,0,"stack")}))}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(e){this.setPropertyValue("snapTooltip",e)},enumerable:!0,configurable:!0}),t.prototype.show=function(t){var i,n=this;this.isHidden&&(this.appeared&&this.xAxis instanceof me&&this.xAxis.groupData&&(this._tmin.setKey(this.yAxis.uid,void 0),this._tmax.setKey(this.yAxis.uid,void 0)),this.appeared&&this.yAxis instanceof me&&this.yAxis.groupData&&(this._tmin.setKey(this.xAxis.uid,void 0),this._tmax.setKey(this.xAxis.uid,void 0))),this.xAxis instanceof he&&this.xAxis!=this.baseAxis&&(i=this._xValueFields),this.yAxis instanceof he&&this.yAxis!=this.baseAxis&&(i=this._yValueFields);var r,a=this.startIndex,o=this.endIndex,s=0,l=this.defaultState.transitionDuration;g.h(t)&&(l=t),F.a.animationsEnabled||(l=0),v.d(v.i(this.dataItems.iterator()),(function(e){var t=e[0],u=e[1],c=l;(t<n.startIndex-10||t>n.endIndex+10)&&(c=0,s=0),n.sequencedInterpolation&&c>0&&(s=n.sequencedInterpolationDelay*t+l*(t-a)/(o-a)),r=u.show(c,s,i)})),this.dataSets.each((function(e,t){t!=n.dataItems&&t.each((function(e){e.events.disable(),e.show(0,0,i),e.events.enable()}))})),this.mainDataSet!=this.dataItems&&this.mainDataSet.each((function(e){e.events.disable(),e.show(0,0,i),e.events.enable()}));var u=e.prototype.show.call(this,t);return r&&!r.isFinished()&&(u=r),this.hidden&&(this.dispatchImmediately("selectionextremeschanged"),this.hidden=!1),u},t.prototype.hide=function(t){var i,n,r=this,a=this.xAxis;a instanceof he&&a!=this.baseAxis&&(i=this._xValueFields,n=this.stacked||a.minZoomed<a.baseValue&&a.maxZoomed>a.baseValue||this.stackedSeries?a.baseValue:a.min);var o=this.yAxis;o instanceof he&&o!=this.baseAxis&&(i=this._yValueFields,n=this.stacked||o.minZoomed<o.baseValue&&o.maxZoomed>o.baseValue||this.stackedSeries?o.baseValue:o.min);var s=this.startIndex,l=this.endIndex,u=this.hiddenState.transitionDuration;g.h(t)&&(u=t),F.a.animationsEnabled||(u=0);var c,h=0;v.d(v.i(this.dataItems.iterator()),(function(e){var t=e[0],a=e[1],o=u;(t<r.startIndex-10||t>r.endIndex+10)&&(o=0),0==o?a.hide(0,0,n,i):(r.sequencedInterpolation&&o>0&&(h=r.sequencedInterpolationDelay*t+u*(t-s)/(l-s)),c=a.hide(o,h,n,i))})),this.dataSets.each((function(e,t){t!=r.dataItems&&t.each((function(e){e.events.disable(),e.hide(0,0,n,i),e.events.enable()}))})),this.mainDataSet!=this.dataItems&&this.mainDataSet.each((function(e){e.events.disable(),e.hide(0,0,n,i),e.events.enable()}));var p=e.prototype.hide.call(this,u);return p&&!p.isFinished()&&p.delay(h),c&&!c.isFinished()&&(p=c),this.validateDataElements(),p},t.prototype.handleDataItemWorkingValueChange=function(t,i){e.prototype.handleDataItemWorkingValueChange.call(this,t,i);var n=this.baseAxis.series;v.d(n.iterator(),(function(e){(e.stacked||e.stackedSeries)&&e.invalidateProcessedData()}))},t.prototype.getStackValue=function(e,t){var i=this,n=this.xAxis,r=this.yAxis;if(this.stacked&&n&&r){var a,o=this.chart,s=o.series.indexOf(this);n!=this.baseAxis&&n instanceof he&&(a=this.xField),r!=this.baseAxis&&r instanceof he&&(a=this.yField),a&&(e.setCalculatedValue(a,0,"stack"),v.e(o.series.range(0,s).backwards().iterator(),(function(o){if(o.xAxis==n&&o.yAxis==r&&o.className==i.className){o.stackedSeries=i;var s=o.dataItems.getIndex(e.index);if(s&&s.hasValue(i._xValueFields)&&s.hasValue(i._yValueFields)){var l=e.getValue(a),u=void 0,c=s.getValue(a)+s.getValue(a,"stack");if(u=t?s.getWorkingValue(a)+s.getValue(a,"stack"):s.getValue(a)+s.getValue(a,"stack"),!i.stackToNegative)return e.setCalculatedValue(a,u,"stack"),!1;if(l>=0&&c>=0||l<0&&c<0)return e.setCalculatedValue(a,u,"stack"),!1;if(!o.stacked)return!1}else if(!o.stacked)return!1}return!0})))}},Object.defineProperty(t.prototype,"stackToNegative",{get:function(){return this.getPropertyValue("stackToNegative")},set:function(e){this.setPropertyValue("stackToNegative",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xField",{get:function(){return this._xField},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yField",{get:function(){return this._yField},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xOpenField",{get:function(){return this._xOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yOpenField",{get:function(){return this._yOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipXField",{get:function(){return this._tooltipXField?this._tooltipXField:this._xField},set:function(e){this._tooltipXField=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipYField",{get:function(){return this._tooltipYField?this._tooltipYField:this._yField},set:function(e){this._tooltipYField=e},enumerable:!0,configurable:!0}),t.prototype.min=function(e){return this._tmin.getKey(e.uid)},t.prototype.max=function(e){return this._tmax.getKey(e.uid)},t.prototype.selectionMin=function(e){return this._smin.getKey(e.uid)},t.prototype.selectionMax=function(e){return this._smax.getKey(e.uid)},t.prototype.processConfig=function(t){if(t){if(g.d(t.baseAxis)&&g.j(t.baseAxis)&&(this.map.hasKey(t.baseAxis)?t.baseAxis=this.map.getKey(t.baseAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+t.baseAxis+'" found for `baseAxis`.'),delete t.baseAxis)),g.d(t.xAxis)&&g.j(t.xAxis)&&(this.map.hasKey(t.xAxis)?t.xAxis=this.map.getKey(t.xAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+t.xAxis+'" found for `xAxis`.'),delete t.xAxis)),g.d(t.yAxis)&&g.j(t.yAxis)&&(this.map.hasKey(t.yAxis)?t.yAxis=this.map.getKey(t.yAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+t.yAxis+'" found for `yAxis`.'),delete t.yAxis)),g.d(t.axisRanges)&&g.e(t.axisRanges))for(var i=0,n=t.axisRanges.length;i<n;i++){var r=t.axisRanges[i];g.d(r.type)||(r.type="AxisDataItem"),g.d(r.axis)&&g.j(r.axis)&&this.map.hasKey(r.axis)?r.component=this.map.getKey(r.axis):g.d(r.component)&&g.j(r.component)&&this.map.hasKey(r.component)&&(r.component=this.map.getKey(r.component))}g.d(t.dataFields)&&g.i(t.dataFields)||this.processingErrors.push("`dataFields` is not set for series ["+(this.name||"unnamed")+"]")}e.prototype.processConfig.call(this,t)},t.prototype.getPoint=function(e,t,i,n,r,a,o){if(this.xAxis&&this.yAxis){var s=this.xAxis.getX(e,t,n),l=this.yAxis.getY(e,i,r);return{x:s=I.i(s,-this._maxxX,this._maxxX),y:l=I.i(l,-this._maxxY,this._maxxY)}}},t.prototype.updateItemReaderText=function(){if(!this._itemReaderTextChanged){var e="";z.d(this.dataFields,(function(t,i){e+="{"+t+"} "})),this.itemReaderText=e,this._itemReaderTextChanged=!1}},Object.defineProperty(t.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(e){this.setPropertyValue("cursorTooltipEnabled",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursorHoverEnabled",{get:function(){return this.getPropertyValue("cursorHoverEnabled")},set:function(e){this.setPropertyValue("cursorHoverEnabled",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"excludeFromTotal",{get:function(){return this.getPropertyValue("excludeFromTotal")},set:function(e){this.setPropertyValue("excludeFromTotal",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(e){this.setPropertyValue("hideTooltipWhileZooming",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(e){this.setPropertyValue("maskBullets",e);var t=this.chart;t&&(this.bulletsContainer.parent=e?t.bulletsContainer:t.axisBulletsContainer)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){this.groupFields=O.f(t.groupFields,{}),e.prototype.copyFrom.call(this,t)},t.prototype.dispose=function(){this.scrollbarSeries&&this.scrollbarSeries.dispose(),e.prototype.dispose.call(this)},t}(U);r.b.registeredClasses.XYSeries=xe,r.b.registeredClasses.XYSeriesDataItem=be;var we=i(140),ke=i(99),Pe=function(e){function t(){var t=e.call(this)||this;t._chart=new o.d,t.className="XYChartScrollbar";var i=new p.a;t.padding(0,0,0,0);var n=t.createChild(Te);if(n.shouldClone=!1,n.margin(0,0,0,0),n.padding(0,0,0,0),n.interactionsEnabled=!1,t._scrollbarChart=n,!O.w()){var r=new ke.a;r.filterUnits="userSpaceOnUse",n.plotContainer.filters.push(r)}t._disposers.push(t._scrollbarChart),t.minHeight=60,t.minWidth=60;var a=t.createChild(h.a);a.shouldClone=!1,a.setElement(t.paper.add("path")),a.fill=i.getFor("background"),a.fillOpacity=.8,a.interactionsEnabled=!1,a.isMeasured=!1,a.toBack(),t._unselectedOverlay=a,t._disposers.push(t._unselectedOverlay),n.toBack(),t.background.cornerRadius(0,0,0,0);var s=t.thumb.background;s.cornerRadius(0,0,0,0),s.fillOpacity=0,s.fill=i.getFor("background");var l=s.states.getKey("hover");l&&(l.properties.fillOpacity=.2);var u=s.states.getKey("down");return u&&(u.properties.fillOpacity=.4),t._disposers.push(t._chart),t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"series",{get:function(){return this._series||(this._series=new s.a,this._disposers.push(this._series.events.on("inserted",this.handleSeriesAdded,this,!1)),this._disposers.push(this._series.events.on("removed",this.handleSeriesRemoved,this,!1))),this._series},enumerable:!0,configurable:!0}),t.prototype.handleSeriesAdded=function(e){var t=this,i=e.newValue;if(i.xAxis&&i.yAxis){var n=this.scrollbarChart;n.zoomOutButton.disabled=!0,this.chart=i.chart,n.dateFormatter.inputDateFormat=this.chart.dateFormatter.inputDateFormat,n.language.locale=this.chart.language.locale;var r=!0,a=!0;v.d(this.series.iterator(),(function(e){e!=i&&(e.xAxis==i.xAxis&&t.scrollbarChart.xAxes.length>0&&(r=!1),e.yAxis==i.yAxis&&t.scrollbarChart.yAxes.length>0&&(a=!1))})),i.events.on("beforedisposed",(function(){t.series.removeValue(i)}));var o=new p.a,s=i.clone();if((F.a.onlyShowOnViewport||F.a.queue)&&this.addDisposer(this.chart.events.on("removedfromqueue",(function(){n.invalidateData()}))),O.w()&&(s.stroke=Object(L.b)("#aaaaaa"),s.fill=s.stroke,s.propertyFields.fill=void 0,s.propertyFields.stroke=void 0),i.scrollbarSeries=s,r){var l=i.xAxis.clone();if(n.xAxes.moveValue(l),l.title.disabled=!0,l.rangeChangeDuration=0,(f=l.renderer).ticks.template.disabled=!0,f.inside=!0,f.labels.template.inside=!0,f.line.strokeOpacity=0,f.minLabelPosition=.02,f.maxLabelPosition=.98,f.line.disabled=!0,f.axisFills.template.disabled=!0,f.baseGrid.disabled=!0,f.grid.template.strokeOpacity=.05,f.minWidth=void 0,f.minHeight=void 0,f.padding(0,0,0,0),f.chart=n,f.margin(0,0,0,0),l.width=Object(d.c)(100),f.labels.template.fillOpacity=.5,l.maxZoomCount=void 0,l.minZoomCount=void 0,l instanceof me){var u=l,c=i.xAxis;u.groupCount=5*c.groupCount,u.min=void 0,u.max=void 0,this._disposers.push(u.clonedFrom.events.on("extremeschanged",(function(){g.h(u.clonedFrom.minDefined)&&(u.min=u.clonedFrom.minDefined),g.h(u.clonedFrom.maxDefined)&&(u.max=u.clonedFrom.maxDefined)}),void 0,!1))}else if(l instanceof he){var h=l;h.min=void 0,h.max=void 0,g.h(h.clonedFrom.minDefined)||(h.min=void 0),g.h(h.clonedFrom.maxDefined)||(h.max=void 0),this._disposers.push(h.clonedFrom.events.on("extremeschanged",(function(){g.h(h.clonedFrom.minDefined)&&(h.min=h.clonedFrom.min),g.h(h.clonedFrom.maxDefined)&&(h.max=h.clonedFrom.max)}),void 0,!1))}s.xAxis=l}else this.scrollbarChart.xAxes.each((function(e){e.clonedFrom==i.xAxis&&(s.xAxis=e)}));if(a){var f,m=i.yAxis.clone();if(n.yAxes.moveValue(m),m.title.disabled=!0,m.rangeChangeDuration=0,(f=m.renderer).ticks.template.disabled=!0,f.inside=!0,f.labels.template.inside=!0,f.line.strokeOpacity=0,f.minLabelPosition=.02,f.maxLabelPosition=.98,f.line.disabled=!0,f.axisFills.template.disabled=!0,f.grid.template.stroke=o.getFor("background"),f.baseGrid.disabled=!0,f.grid.template.strokeOpacity=.05,f.minWidth=void 0,f.minHeight=void 0,f.chart=n,f.padding(0,0,0,0),f.margin(0,0,0,0),m.height=Object(d.c)(100),f.labels.template.fillOpacity=.5,s.yAxis=m,m.maxZoomCount=void 0,m.minZoomCount=void 0,m instanceof me){var y=m;y.min=void 0,y.max=void 0;c=i.yAxis;m.groupCount=5*c.groupCount,this._disposers.push(y.clonedFrom.events.on("extremeschanged",(function(){g.h(y.clonedFrom.minDefined)&&(y.min=y.clonedFrom.minDefined),g.h(y.clonedFrom.maxDefined)&&(y.max=y.clonedFrom.maxDefined)})))}else if(m instanceof he){var _=m;_.min=void 0,_.max=void 0,g.h(_.clonedFrom.minDefined)||(_.min=void 0),g.h(_.clonedFrom.maxDefined)||(_.max=void 0),this._disposers.push(_.clonedFrom.events.on("extremeschanged",(function(){g.h(_.clonedFrom.minDefined)&&(_.min=_.clonedFrom.minDefined),g.h(_.clonedFrom.maxDefined)&&(_.max=_.clonedFrom.maxDefined)})))}}else this.scrollbarChart.yAxes.each((function(e){e.clonedFrom==i.yAxis&&(s.yAxis=e)}));s.rangeChangeDuration=0,s.interpolationDuration=0,s.defaultState.transitionDuration=0,s.showOnInit=!1,this._disposers.push(s.events.on("validated",this.zoomOutAxes,this,!1)),this._disposers.push(i.events.on("datavalidated",(function(){s.data!=i.data&&(s.data=i.data)}),void 0,!1)),s.defaultState.properties.visible=!0,n.series.push(s),this.updateByOrientation()}},t.prototype.updateByOrientation=function(){var e=this;this._scrollbarChart&&(v.d(this._scrollbarChart.xAxes.iterator(),(function(t){var i=t.renderer;"vertical"==e.orientation?(i.grid.template.disabled=!0,i.labels.template.disabled=!0,i.minGridDistance=10):(i.grid.template.disabled=!1,i.labels.template.disabled=!1,i.minGridDistance=t.clonedFrom.renderer.minGridDistance)})),v.d(this._scrollbarChart.yAxes.iterator(),(function(t){var i=t.renderer;"horizontal"==e.orientation?(i.grid.template.disabled=!0,i.labels.template.disabled=!0,i.minGridDistance=10):(i.grid.template.disabled=!1,i.labels.template.disabled=!1,i.minGridDistance=t.clonedFrom.renderer.minGridDistance)})))},t.prototype.handleSeriesRemoved=function(e){var t=e.oldValue,i=this.scrollbarChart;i.series.each((function(e){e&&e.clonedFrom==t&&i.series.removeValue(e)})),0==i.series.length&&(i.xAxes.clear(),i.yAxes.clear());try{t.events.off("validated",this.zoomOutAxes,this)}catch(n){}},Object.defineProperty(t.prototype,"scrollbarChart",{get:function(){return this._scrollbarChart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart.get()},set:function(e){this._chart.get()!==e&&(this._chart.set(e,e.events.on("datavalidated",this.handleDataChanged,this,!1)),this.handleDataChanged(),this._scrollbarChart.dataProvider=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unselectedOverlay",{get:function(){return this._unselectedOverlay},enumerable:!0,configurable:!0}),t.prototype.handleDataChanged=function(){this.chart.data!=this.scrollbarChart.data?this.scrollbarChart.data=this.chart.data:this.scrollbarChart.invalidateRawData()},t.prototype.zoomOutAxes=function(){var e=this.scrollbarChart;v.d(e.xAxes.iterator(),(function(e){e.zoom({start:0,end:1},!0,!0)})),v.d(e.yAxes.iterator(),(function(e){e.zoom({start:0,end:1},!0,!0)}))},t.prototype.updateThumb=function(t){if(void 0===t&&(t=!0),e.prototype.updateThumb.call(this,t),this._unselectedOverlay){var i=this.thumb,n=i.pixelX||0,r=i.pixelY||0,a=i.pixelWidth||0,o=i.pixelHeight||0,s="";"horizontal"==this.orientation?(s=f.j({x:-1,y:0,width:n,height:o}),s+=f.j({x:n+a,y:0,width:(this.pixelWidth||0)-n-a,height:o})):(s=f.j({x:0,y:0,width:a,height:r}),s+=f.j({x:0,y:r+o,width:a,height:(this.pixelHeight||0)-r-o})),this._unselectedOverlay.path=s}},t.prototype.processConfig=function(t){if(t&&g.d(t.series)&&g.e(t.series))for(var i=0,n=t.series.length;i<n;i++){var r=t.series[i];if(g.d(r)&&g.j(r)){if(!this.map.hasKey(r))throw Error("XYChartScrollbar error: Series with id `"+r+"` does not exist.");t.series[i]=this.map.getKey(r)}}e.prototype.processConfig.call(this,t)},t}(A.a);r.b.registeredClasses.XYChartScrollbar=Pe;var Se=function(e){function t(){var t=e.call(this)||this;return t.className="XYChartDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(G),Te=function(e){function t(){var t=e.call(this)||this;t._axisRendererX=ye,t._axisRendererY=le,t._seriesPoints=[],t.className="XYChart",t.maskBullets=!0,t.arrangeTooltips=!0;var i=t.chartContainer;i.layout="vertical",t.padding(15,15,15,15);var n=i.createChild(l.a);n.shouldClone=!1,n.layout="vertical",n.width=Object(d.c)(100),n.zIndex=1,t.topAxesContainer=n;var r=i.createChild(l.a);r.shouldClone=!1,r.layout="horizontal",r.width=Object(d.c)(100),r.height=Object(d.c)(100),r.zIndex=0,t.yAxesAndPlotContainer=r;var a=i.createChild(l.a);a.shouldClone=!1,a.width=Object(d.c)(100),a.layout="vertical",a.zIndex=1,t.bottomAxesContainer=a;var o=r.createChild(l.a);o.shouldClone=!1,o.layout="horizontal",o.height=Object(d.c)(100),o.contentAlign="right",o.events.on("transformed",t.updateXAxesMargins,t,!1),o.zIndex=1,t.leftAxesContainer=o;var s=r.createChild(l.a);s.shouldClone=!1,s.height=Object(d.c)(100),s.width=Object(d.c)(100),s.background.fillOpacity=0,t.plotContainer=s,t.mouseWheelBehavior="none",t._cursorContainer=s;var u=r.createChild(l.a);u.shouldClone=!1,u.layout="horizontal",u.height=Object(d.c)(100),u.zIndex=1,u.events.on("transformed",t.updateXAxesMargins,t,!1),t.rightAxesContainer=u,t.seriesContainer.parent=s,t.bulletsContainer.parent=s;var c=s.createChild(we.a);c.shouldClone=!1,c.align="right",c.valign="top",c.zIndex=Number.MAX_SAFE_INTEGER,c.marginTop=5,c.marginRight=5,c.hide(0),t.zoomOutButton=c;var h=t.plotContainer.createChild(l.a);return h.shouldClone=!1,h.width=Object(d.c)(100),h.height=Object(d.c)(100),h.isMeasured=!1,h.zIndex=4,h.layout="none",t.axisBulletsContainer=h,t._bulletMask=t.plotContainer,t.events.on("beforedatavalidated",(function(){t.series.each((function(e){e.dataGrouped=!1,e._baseInterval={}}))}),t,!1),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),this.zoomOutButton.exportable=!1,g.d(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y chart"))},t.prototype.draw=function(){e.prototype.draw.call(this),this.seriesContainer.toFront(),this.bulletsContainer.toFront(),this.maskBullets&&(this.bulletsContainer.mask=this._bulletMask),this.updateSeriesLegend()},t.prototype.updatePlotElements=function(){v.d(this.series.iterator(),(function(e){e.invalidate()}))},t.prototype.validateData=function(){0==this._parseDataFrom&&(v.d(this.xAxes.iterator(),(function(e){e.dataChangeUpdate()})),v.d(this.yAxes.iterator(),(function(e){e.dataChangeUpdate()})),v.d(this.series.iterator(),(function(e){e.dataChangeUpdate()}))),e.prototype.validateData.call(this)},t.prototype.updateXAxesMargins=function(){var e=this.leftAxesContainer.measuredWidth,t=this.rightAxesContainer.measuredWidth,i=this.bottomAxesContainer;i.paddingLeft==e&&i.paddingRight==t||(i.paddingLeft=e,i.paddingRight=t);var n=this.topAxesContainer;n.paddingLeft==e&&n.paddingRight==t||(n.paddingLeft=e,n.paddingRight=t)},t.prototype.reinit=function(){e.prototype.reinit.call(this),this.series.each((function(e){e.appeared=!1}))},t.prototype.handleXAxisChange=function(e){this.updateXAxis(e.target)},t.prototype.handleYAxisChange=function(e){this.updateYAxis(e.target)},t.prototype.processXAxis=function(e){var t=e.newValue;t.chart=this,t.renderer||(t.renderer=new this._axisRendererX,t.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleXAxisChange,this,!1)),t.axisLetter="X",t.events.on("startendchanged",this.handleXAxisRangeChange,this,!1),t.dataProvider=this,this.updateXAxis(t.renderer),this.processAxis(t)},t.prototype.processYAxis=function(e){var t=e.newValue;t.chart=this,t.renderer||(t.renderer=new this._axisRendererY,t.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleYAxisChange,this,!1)),t.axisLetter="Y",t.events.on("startendchanged",this.handleYAxisRangeChange,this,!1),t.dataProvider=this,this.updateYAxis(t.renderer),this.processAxis(t)},t.prototype.handleXAxisRangeChange=function(){var e=this.getCommonAxisRange(this.xAxes);this.scrollbarX&&this.zoomAxes(this.xAxes,e,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarX,e)},t.prototype.toggleZoomOutButton=function(){if(this.zoomOutButton){var e=!1;v.e(this.xAxes.iterator(),(function(t){if(t.toggleZoomOutButton)if(t.maxZoomCount>0){var i=t.maxZoomFactor/t.maxZoomCount;if(I.E(t.end-t.start,3)<1/i)return e=!0,!1}else if(I.E(t.start,3)>0||I.E(t.end,3)<1)return e=!0,!1;return!0})),v.e(this.yAxes.iterator(),(function(t){if(t.toggleZoomOutButton){if(t.maxZoomCount>0){var i=t.maxZoomFactor/t.maxZoomCount;if(I.E(t.end-t.start,3)<1/i)return e=!0,!1}else if(I.E(t.start,3)>0||I.E(t.end,3)<1)return e=!0,!1;return!0}})),this.seriesAppeared||(e=!1),e?this.zoomOutButton.show():this.zoomOutButton.hide()}},t.prototype.seriesAppeared=function(){var e=!1;return v.d(this.series.iterator(),(function(t){if(!t.appeared)return e=!1,!1})),e},t.prototype.handleYAxisRangeChange=function(){var e=this.getCommonAxisRange(this.yAxes);this.scrollbarY&&this.zoomAxes(this.yAxes,e,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarY,e)},t.prototype.updateScrollbar=function(e,t){e&&(e.skipRangeEvents(),e.start=t.start,e.end=t.end)},t.prototype.getCommonAxisRange=function(e){var t,i;return e.each((function(e){if(!e.zoomable||e instanceof he&&e.syncWithAxis);else{var n=e.start,r=e.end;e.renderer.inversed&&(n=1-e.end,r=1-e.start),(!g.h(t)||n<t)&&(t=n),(!g.h(i)||r>i)&&(i=r)}})),{start:t,end:i}},t.prototype.updateXAxis=function(e){var t=e.axis;e.opposite?(t.parent=this.topAxesContainer,t.toFront()):(t.parent=this.bottomAxesContainer,t.toBack()),t.renderer&&t.renderer.processRenderer()},t.prototype.updateYAxis=function(e){var t=e.axis;e.opposite?(t.parent=this.rightAxesContainer,t.toBack()):(t.parent=this.leftAxesContainer,t.toFront()),t.renderer&&t.renderer.processRenderer()},t.prototype.processAxis=function(e){var t=this;e instanceof _e&&this._dataUsers.moveValue(e);var i=e.renderer;i.gridContainer.parent=this.plotContainer,i.gridContainer.toBack(),i.breakContainer.parent=this.plotContainer,i.breakContainer.toFront(),i.breakContainer.zIndex=10,e.addDisposer(new o.b((function(){t.dataUsers.removeValue(e)}))),i.bulletsContainer.parent=this.axisBulletsContainer,this._disposers.push(e.events.on("positionchanged",(function(){var n=O.I({x:0,y:0},e,t.axisBulletsContainer);e.renderer instanceof le&&(i.bulletsContainer.y=n.y),e.renderer instanceof ye&&(i.bulletsContainer.x=n.x)}),void 0,!1)),this.plotContainer.events.on("maxsizechanged",(function(){t.inited&&(e.invalidateDataItems(),t.updateSeriesMasks())}),e,!1)},t.prototype.updateSeriesMasks=function(){O.w()&&this.series.each((function(e){var t=e.mainContainer.mask;e.mainContainer.mask=void 0,e.mainContainer.mask=t}))},t.prototype.handleSeriesRemoved=function(t){var i=t.oldValue;i&&(i.xAxis&&(i.xAxis.series.removeValue(i),i.xAxis.invalidateProcessedData()),i.yAxis&&(i.yAxis.series.removeValue(i),i.yAxis.invalidateProcessedData()),this.series.each((function(e){e.resetExtremes()}))),e.prototype.handleSeriesRemoved.call(this,t)},Object.defineProperty(t.prototype,"xAxes",{get:function(){return this._xAxes||(this._xAxes=new s.a,this._xAxes.events.on("inserted",this.processXAxis,this,!1),this._xAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new s.b(this._xAxes,!1))),this._xAxes},enumerable:!0,configurable:!0}),t.prototype.handleAxisRemoval=function(e){var t=e.oldValue;this.dataUsers.removeValue(t),t.autoDispose&&t.dispose()},Object.defineProperty(t.prototype,"yAxes",{get:function(){return this._yAxes||(this._yAxes=new s.a,this._yAxes.events.on("inserted",this.processYAxis,this,!1),this._yAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new s.b(this._yAxes,!1))),this._yAxes},enumerable:!0,configurable:!0}),t.prototype.handleSeriesAdded=function(t){try{e.prototype.handleSeriesAdded.call(this,t);var i=t.newValue;0!=this.xAxes.length&&0!=this.yAxes.length||(r.b.removeFromInvalidComponents(i),i.dataInvalid=!1),O.R(i.xAxis),O.R(i.yAxis),i.maskBullets=i.maskBullets,void 0==i.fill&&(this.patterns?(g.d(i.stroke)||(i.stroke=this.colors.next()),i.fill=this.patterns.next(),g.d(i.fillOpacity)&&(i.fill.backgroundOpacity=i.fillOpacity),i.stroke instanceof L.a&&(i.fill.stroke=i.stroke,i.fill.fill=i.stroke)):i.fill=this.colors.next()),g.d(i.stroke)||(i.stroke=i.fill)}catch(n){this.raiseCriticalError(n)}},Object.defineProperty(t.prototype,"cursor",{get:function(){return this._cursor},set:function(e){this._cursor!=e&&(this._cursor&&this.removeDispose(this._cursor),this._cursor=e,e&&(this._disposers.push(e),e.chart=this,e.shouldClone=!1,e.parent=this._cursorContainer,e.events.on("cursorpositionchanged",this.handleCursorPositionChange,this,!1),e.events.on("zoomstarted",this.handleCursorZoomStart,this,!1),e.events.on("zoomended",this.handleCursorZoomEnd,this,!1),e.events.on("panstarted",this.handleCursorPanStart,this,!1),e.events.on("panning",this.handleCursorPanning,this,!1),e.events.on("panended",this.handleCursorPanEnd,this,!1),e.events.on("behaviorcanceled",this.handleCursorCanceled,this,!1),e.events.on("hidden",this.handleHideCursor,this,!1),e.zIndex=Number.MAX_SAFE_INTEGER-1,this.tapToActivate&&this.setTapToActivate(this.tapToActivate)))},enumerable:!0,configurable:!0}),t.prototype.handleCursorPositionChange=function(){var e=this.cursor;if(e.visible&&!e.isHiding){var t=this.cursor.xPosition,i=this.cursor.yPosition;this.showSeriesTooltip({x:t,y:i});var n=[],r=e.snapToSeries;if(r&&!e.downPoint){r instanceof xe&&(r=[r]);var a=[];V.d(r,(function(e){if(!e.isHidden&&!e.isHiding){var r=e.xAxis,o=e.yAxis;r instanceof he&&!(r instanceof me)&&o instanceof he&&!(o instanceof me)?(e.dataItems.each((function(e){a.push(e)})),V.m(n,e.yAxis),V.m(n,e.xAxis)):(e.baseAxis==e.xAxis&&(V.m(n,e.yAxis),a.push(r.getSeriesDataItem(e,r.toAxisPosition(t),!0))),e.baseAxis==e.yAxis&&(V.m(n,e.xAxis),a.push(o.getSeriesDataItem(e,o.toAxisPosition(i),!0))))}}));var o=this.getClosest(a,t,i);o&&(this.series.each((function(e){var t=o.component;e!=t&&(e.hideTooltip(),e.xAxis!=t.xAxis&&(e.xAxis.hideTooltip(),n.push(e.xAxis)),e.yAxis!=t.yAxis&&(e.yAxis.hideTooltip(),n.push(e.yAxis)))})),o.component.showTooltipAtDataItem(o),e.handleSnap(o.component))}this._seriesPoints=[],this._cursorXPosition!=t&&this.showAxisTooltip(this.xAxes,t,n),this._cursorYPosition!=i&&this.showAxisTooltip(this.yAxes,i,n),this.arrangeTooltips&&this.sortSeriesTooltips(this._seriesPoints),this.legend&&this.legend.afterDraw()}},t.prototype.getClosest=function(e,t,i){var n,r=1/0;return V.e(e,(function(e){if(e){var a=e.component.xAxis,o=e.component.yAxis,s=a.positionToCoordinate(a.toGlobalPosition(a.toAxisPosition(t))),l=o.positionToCoordinate(o.toGlobalPosition(o.toAxisPosition(i))),u=e.component.xField,c=e.component.yField;if(a instanceof he&&!g.h(e.getValue(u)))return!0;if(o instanceof he&&!g.h(e.getValue(c)))return!0;var h=a.positionToCoordinate(a.toGlobalPosition(a.getPositionX(e,u,e.locations[u],"valueX"))),p=o.positionToCoordinate(o.toGlobalPosition(o.getPositionY(e,c,e.locations[c],"valueY"))),d=Math.sqrt(Math.pow(s-h,2)+Math.pow(l-p,2));return d<r&&(r=d,n=e),!0}})),n},t.prototype.handleHideCursor=function(){this.hideObjectTooltip(this.xAxes),this.hideObjectTooltip(this.yAxes),this.hideObjectTooltip(this.series),this._cursorXPosition=void 0,this._cursorYPosition=void 0,this.updateSeriesLegend()},t.prototype.updateSeriesLegend=function(){v.d(this.series.iterator(),(function(e){e.updateLegendValue()}))},t.prototype.hideObjectTooltip=function(e){v.d(e.iterator(),(function(e){e.cursorTooltipEnabled&&e.hideTooltip(0)}))},t.prototype.showSeriesTooltip=function(e){var t=this;if(e){var i=[];this.series.each((function(n){if(n.xAxis instanceof me&&n.xAxis.snapTooltip||n.yAxis instanceof me&&n.yAxis.snapTooltip);else{var r=n.showTooltipAtPosition(e.x,e.y);r&&(n.tooltip.setBounds(O.K({x:0,y:0,width:t.pixelWidth,height:t.pixelHeight},t)),i.push({series:n,point:r}))}})),this.arrangeTooltips&&this.sortSeriesTooltips(i)}else this.series.each((function(e){e.hideTooltip()}))},t.prototype.sortSeriesTooltips=function(e){if(e.length>0){var t=this.cursor;if(t&&g.h(t.maxTooltipDistance)){var i,n,r=O.J({x:t.point.x,y:t.point.y},t),a=1/0;V.d(e,(function(e){var t=e.series,o=e.point;if(o){var s={x:o.x,y:o.y},l=Math.abs(I.q(s,r));l<a&&(n=s,a=l,i=t)}}));var o=[];i&&(V.d(e,(function(e){if(Math.abs(I.q(e.point,n))<=Math.abs(t.maxTooltipDistance))o.push({series:e.series,point:e.point});else{var i=e.series.tooltipDataItem;i&&V.d(i.sprites,(function(e){e.isHover=!1,e.handleOutReal()})),e.series.hideTooltip(0)}})),t.maxTooltipDistance<0&&(o.length>0&&V.d(o,(function(e){i!=e.series&&e.series.hideTooltip(0)})),o=[{series:i,point:n}])),e=o}var s=O.J({x:-.5,y:-.5},this.plotContainer),l=O.J({x:this.plotContainer.pixelWidth+.5,y:this.plotContainer.pixelHeight+.5},this.plotContainer),u=0,c=[];V.d(e,(function(e){var t=e.point;t&&I.A(t,{x:s.x,y:s.y,width:l.x-s.x,height:l.y-s.y})&&(c.push({point:t,series:e.series}),u+=t.y)})),e=c;var h=this.series.getIndex(0),p=!1;h&&h.yAxis&&h.yAxis.renderer.inversed&&(p=!0),p?e.sort((function(e,t){return K.a(e.point.y,t.point.y)})):(e.sort((function(e,t){return K.a(t.point.y,e.point.y)})),e.reverse());var d=u/e.length,f=O.N({x:0,y:0},this.svgContainer.SVGContainer).y;if(e.length>0){var m=s.y,y=l.y;O.H({x:0,y:m},this);var v=!1;if(d>m+(y-m)/2)for(var _=y,b=e.length-1;b>=0;b--){var x=(S=e[b].series).tooltip,w=e[b].point.y;if(x.setBounds({x:0,y:-f,width:this.pixelWidth,height:_+f}),x.invalid&&x.validate(),x.toBack(),(_=O.J({x:0,y:x.label.pixelY-x.pixelY+w-x.pixelMarginTop},x).y)<-f){v=!0;break}}if(d<=m+(y-m)/2||v)for(var k=m,P=(b=0,e.length);b<P;b++){var S=e[b].series;w=e[b].point.y;(x=S.tooltip).setBounds({x:0,y:k,width:this.pixelWidth,height:y}),x.invalid&&x.validate(),x.toBack(),k=O.J({x:0,y:x.label.pixelY+x.label.measuredHeight-x.pixelY+w+x.pixelMarginBottom},x).y}}}},t.prototype.showAxisTooltip=function(e,t,i){var n=this;v.d(e.iterator(),(function(e){i&&-1!=i.indexOf(e)||(n.dataItems.length>0||e.dataItems.length>0)&&e.showTooltipAtPosition(t)}))},t.prototype.getUpdatedRange=function(e,t){if(e){var i,n;e.renderer.inversed?(I.z(t),i=1-e.end,n=1-e.start):(i=e.start,n=e.end);var r=n-i;return{start:i+t.start*r,end:i+t.end*r}}},t.prototype.handleCursorZoomEnd=function(e){var t=this.cursor,i=t.behavior;if("zoomX"==i||"zoomXY"==i){var n=t.xRange;n&&this.xAxes.length>0&&((n=this.getUpdatedRange(this.xAxes.getIndex(0),n)).priority="start",this.zoomAxes(this.xAxes,n))}if("zoomY"==i||"zoomXY"==i){var r=t.yRange;r&&this.yAxes.length>0&&((r=this.getUpdatedRange(this.yAxes.getIndex(0),r)).priority="start",this.zoomAxes(this.yAxes,r))}this.handleHideCursor()},t.prototype.handleCursorPanStart=function(e){var t=this.xAxes.getIndex(0);t&&(this._panStartXRange={start:t.start,end:t.end},t.renderer.inversed&&(this._panStartXRange=I.z(this._panStartXRange)));var i=this.yAxes.getIndex(0);i&&(this._panStartYRange={start:i.start,end:i.end},i.renderer.inversed&&(this._panStartYRange=I.z(this._panStartYRange)))},t.prototype.handleCursorPanEnd=function(e){var t=this.cursor,i=t.behavior;if(this._panEndXRange&&("panX"==i||"panXY"==i)){var n=this._panEndXRange,r=this._panStartXRange,a=0;n.start<0&&(a=n.start),r.end>1?n.end>r.end&&(a=n.end-r.end):n.end>1&&(a=n.end-1),this.zoomAxes(this.xAxes,{start:n.start-a,end:n.end-a},!1,t.snapOnPan),this._panEndXRange=void 0,this._panStartXRange=void 0}if(this._panEndYRange&&("panY"==i||"panXY"==i)){a=0;(n=this._panEndYRange).start<0&&(a=n.start),n.end>1&&(a=n.end-1),this.zoomAxes(this.yAxes,{start:n.start-a,end:n.end-a},!1,t.snapOnPan),this._panEndYRange=void 0,this._panStartYRange=void 0}},t.prototype.handleCursorCanceled=function(){this._panEndXRange=void 0,this._panStartXRange=void 0},t.prototype.handleCursorPanning=function(e){var t=this.cursor,i=t.behavior,n=t.maxPanOut;if(this._panStartXRange&&("panX"==i||"panXY"==i)){var r=this._panStartXRange,a=t.xRange,o=this.getCommonAxisRange(this.xAxes),s=r.end-r.start,l=a.start*(o.end-o.start),u=Math.max(-n,l+r.start),c=Math.min(l+r.end,1+n);u<=0&&(c=u+s),c>=1&&(u=c-s);var h={start:u,end:c};this._panEndXRange=h,this.zoomAxes(this.xAxes,h,!1,!1,t.maxPanOut)}if(this._panStartYRange&&("panY"==i||"panXY"==i)){r=this._panStartYRange,a=t.yRange,o=this.getCommonAxisRange(this.yAxes),s=r.end-r.start,l=a.start*(o.end-o.start),u=Math.max(-n,l+r.start),c=Math.min(l+r.end,1+n);u<=0&&(c=u+s),c>=1&&(u=c-s);h={start:u,end:c};this._panEndYRange=h,this.zoomAxes(this.yAxes,h,!1,!1,t.maxPanOut)}this.handleHideCursor()},t.prototype.handleYAxisSet=function(e){},t.prototype.handleCursorZoomStart=function(e){},Object.defineProperty(t.prototype,"scrollbarX",{get:function(){return this._scrollbarX},set:function(e){var t=this;this._scrollbarX&&this.removeDispose(this._scrollbarX),this._scrollbarX=e,e&&(this._disposers.push(e),e.parent=this.topAxesContainer,e.shouldClone=!1,e.startGrip.exportable=!1,e.endGrip.exportable=!1,e.toBack(),e.orientation="horizontal",e.events.on("rangechanged",this.handleXScrollbarChange,this,!1),this.events.on("datavalidated",(function(){return e.updateThumb(!1)}),this,!1),e.adapter.add("positionValue",(function(e){var i=t.xAxes.getIndex(0);return i&&(e.value=i.getPositionLabel(i.renderer.inversed?1-e.position:e.position)),e})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollbarY",{get:function(){return this._scrollbarY},set:function(e){var t=this;this._scrollbarY&&this.removeDispose(this._scrollbarY),this._scrollbarY=e,e&&(this._disposers.push(e),e.parent=this.rightAxesContainer,e.startGrip.exportable=!1,e.shouldClone=!1,e.endGrip.exportable=!1,e.toFront(),e.orientation="vertical",e.events.on("rangechanged",this.handleYScrollbarChange,this,!1),this.events.on("datavalidated",(function(){return e.updateThumb(!1)}),this,!1),e.adapter.add("positionValue",(function(e){var i=t.yAxes.getIndex(0);return i&&(e.value=i.getPositionLabel(e.position)),e})))},enumerable:!0,configurable:!0}),t.prototype.handleXScrollbarChange=function(e){if(this.inited){var t=e.target,i=t.range;0==i.start&&(i.priority="start"),1==i.end&&(i.priority="end"),i=this.zoomAxes(this.xAxes,i),t.fixRange(i)}},t.prototype.handleYScrollbarChange=function(e){if(this.inited){var t=e.target,i=t.range;1==i.end&&(i.priority="end"),0==i.start&&(i.priority="start"),i=this.zoomAxes(this.yAxes,i),t.fixRange(i)}},t.prototype.zoomAxes=function(e,t,i,n,r,a){var o={start:0,end:1};this.showSeriesTooltip();var s=t;return this.dataInvalid||v.d(e.iterator(),(function(e){var l=e.maxZoomFactor;if(g.h(e.minZoomCount)&&(l/=e.minZoomCount),a&&1/(t.end-t.start)>=l);else if(e.zoomable){if(t=e.renderer.inversed?I.z(s):s,e.hideTooltip(0),n)if(e instanceof _e){var u=e.getCellEndPosition(0)-e.getCellStartPosition(0);t.start=e.roundPosition(t.start+u/2-e.startLocation*u,e.startLocation),t.end=e.roundPosition(t.end-u/2+(1-e.endLocation)*u,e.endLocation)}else t.start=e.roundPosition(t.start+1e-4,0,e.startLocation),t.end=e.roundPosition(t.end+1e-4,0,e.endLocation);var c=e.zoom(t,i,i,r);e.renderer.inversed&&(c=I.z(c)),o=c}})),o},Object.defineProperty(t.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(e){this.setPropertyValue("maskBullets",e,!0)&&this.bulletsContainer&&(this.bulletsContainer.mask=e?this._bulletMask:void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arrangeTooltips",{get:function(){return this.getPropertyValue("arrangeTooltips")},set:function(e){this.setPropertyValue("arrangeTooltips",e,!0)},enumerable:!0,configurable:!0}),t.prototype.handleWheel=function(e){var t=this.plotContainer,i=O.i(e.point,this.htmlContainer,this.svgContainer.cssScale),n=O.O(i,t),r=e.shift.y;this.handleWheelReal(r,this.mouseWheelBehavior,n)},t.prototype.handleHorizontalWheel=function(e){var t=this.plotContainer,i=O.i(e.point,this.htmlContainer,this.svgContainer.cssScale),n=O.O(i,t);this.handleWheelReal(e.shift.x,this.horizontalMouseWheelBehavior,n)},t.prototype.handleWheelReal=function(e,t,i){if(0!=e){var n=this.plotContainer,r=this.getCommonAxisRange(this.xAxes),a=this.getCommonAxisRange(this.yAxes),o=.1;if("panX"==t||"panXY"==t){var s=r.end-r.start,l=Math.max(-0,r.start+o*e/100*(r.end-r.start)),u=Math.min(r.end+o*e/100*(r.end-r.start),1);l<=0&&(u=l+s),u>=1&&(l=u-s),this.zoomAxes(this.xAxes,{start:l,end:u})}if("panY"==t||"panXY"==t){e*=-1;var c=a.end-a.start,h=Math.max(-0,a.start+o*e/100*(a.end-a.start)),p=Math.min(a.end+o*e/100*(a.end-a.start),1);h<=0&&(p=h+c),p>=1&&(h=p-c),this.zoomAxes(this.yAxes,{start:h,end:p})}if("zoomX"==t||"zoomXY"==t){var d=i.x/n.maxWidth,f=this.xAxes.getIndex(0).toAxisPosition(d);l=Math.max(-0,r.start-o*(r.end-r.start)*e/100*d);l=Math.min(l,f);u=Math.min(r.end+o*(r.end-r.start)*e/100*(1-d),1);u=Math.max(u,f),this.zoomAxes(this.xAxes,{start:l,end:u},void 0,void 0,void 0,!0)}if("zoomY"==t||"zoomXY"==t){var m=i.y/n.maxHeight,y=this.yAxes.getIndex(0).toAxisPosition(m);h=Math.max(-0,a.start-o*(a.end-a.start)*e/100*(1-m));h=Math.min(h,y);p=Math.min(a.end+o*e/100*m*(a.end-a.start),1);p=Math.max(p,y),this.zoomAxes(this.yAxes,{start:h,end:p},void 0,void 0,void 0,!0)}}},Object.defineProperty(t.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(e){this.setPropertyValue("mouseWheelBehavior",e)&&("none"!=e?(this._mouseWheelDisposer=this.plotContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):this._mouseWheelDisposer&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer.dispose()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalMouseWheelBehavior",{get:function(){return this.getPropertyValue("horizontalMouseWheelBehavior")},set:function(e){this.setPropertyValue("horizontalMouseWheelBehavior",e)&&("none"!=e?(this._mouseWheelDisposer2=this.plotContainer.events.on("wheel",this.handleHorizontalWheel,this,!1),this._disposers.push(this._mouseWheelDisposer2)):this._mouseWheelDisposer2&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer2.dispose()))},enumerable:!0,configurable:!0}),t.prototype.dataSourceDateFields=function(t){var i=this;return t=e.prototype.dataSourceDateFields.call(this,t),v.d(this.series.iterator(),(function(e){t=i.populateDataSourceFields(t,e.dataFields,["dateX","dateY","openDateX","openDateY"])})),t},t.prototype.dataSourceNumberFields=function(t){var i=this;return t=e.prototype.dataSourceDateFields.call(this,t),v.d(this.series.iterator(),(function(e){t=i.populateDataSourceFields(t,e.dataFields,["valueX","valueY","openValueX","openValueY"])})),t},t.prototype.processConfig=function(t){if(t){var i=[],n=[];if(g.d(t.xAxes)&&g.e(t.xAxes))for(var r=0,a=t.xAxes.length;r<a;r++){if(!t.xAxes[r].type)throw Error("[XYChart error] No type set for xAxes["+r+"].");if(g.d(t.xAxes[r].axisRanges)){for(var o=0,s=t.xAxes[r].axisRanges.length;o<s;o++){var l=t.xAxes[r].axisRanges[o];g.d(l.date)&&g.j(l.date)&&(l.date=this.dateFormatter.parse(l.date)),g.d(l.endDate)&&g.j(l.endDate)&&(l.endDate=this.dateFormatter.parse(l.endDate))}i.push({axisRanges:t.xAxes[r].axisRanges,index:r}),delete t.xAxes[r].axisRanges}}if(g.d(t.yAxes)&&g.e(t.yAxes))for(r=0,a=t.yAxes.length;r<a;r++){if(!t.yAxes[r].type)throw Error("[XYChart error] No type set for yAxes["+r+"].");if(g.d(t.yAxes[r].axisRanges)){o=0;for(var u=t.yAxes[r].axisRanges.length;o<u;o++){l=t.yAxes[r].axisRanges[o];g.d(l.date)&&g.j(l.date)&&(l.date=this.dateFormatter.parse(l.date)),g.d(l.endDate)&&g.j(l.endDate)&&(l.endDate=this.dateFormatter.parse(l.endDate))}n.push({axisRanges:t.yAxes[r].axisRanges,index:r}),delete t.yAxes[r].axisRanges}}if(g.d(t.series)&&g.e(t.series))for(r=0,a=t.series.length;r<a;r++)t.series[r].type=t.series[r].type||"LineSeries";if(g.d(t.cursor)&&!g.d(t.cursor.type)&&(t.cursor.type="XYCursor"),g.d(t.scrollbarX)&&!g.d(t.scrollbarX.type)&&(t.scrollbarX.type="Scrollbar"),g.d(t.scrollbarY)&&!g.d(t.scrollbarY.type)&&(t.scrollbarY.type="Scrollbar"),e.prototype.processConfig.call(this,t),n.length)for(r=0,a=n.length;r<a;r++)this.yAxes.getIndex(n[r].index).config={axisRanges:n[r].axisRanges};if(i.length)for(r=0,a=i.length;r<a;r++)this.xAxes.getIndex(i[r].index).config={axisRanges:i[r].axisRanges}}},t.prototype.configOrder=function(t,i){return t==i?0:"scrollbarX"==t?1:"scrollbarX"==i?-1:"scrollbarY"==t?1:"scrollbarY"==i?-1:"cursor"==t?1:"cursor"==i?-1:"series"==t?1:"series"==i?-1:e.prototype.configOrder.call(this,t,i)},t.prototype.createSeries=function(){return new xe},Object.defineProperty(t.prototype,"zoomOutButton",{get:function(){return this._zoomOutButton},set:function(e){var t=this;this._zoomOutButton=e,e&&e.events.on("hit",(function(){t.zoomAxes(t.xAxes,{start:0,end:1}),t.zoomAxes(t.yAxes,{start:0,end:1})}),void 0,!1)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){var i=this;t.xAxes.each((function(e){var t=i.xAxes.push(e.clone());t.chart=i,t.renderer.chart=i})),t.yAxes.each((function(e){var t=i.yAxes.push(e.clone());t.renderer.chart=i,t.chart=i})),e.prototype.copyFrom.call(this,t),t.cursor&&(this.cursor=t.cursor.clone()),t.scrollbarX&&(this.scrollbarX=t.scrollbarX.clone()),t.scrollbarY&&(this.scrollbarY=t.scrollbarY.clone())},t.prototype.disposeData=function(){e.prototype.disposeData.call(this);var t=this.scrollbarX;t&&t instanceof Pe&&t.scrollbarChart.disposeData();var i=this.scrollbarY;i&&i instanceof Pe&&i.scrollbarChart.disposeData(),this.xAxes.each((function(e){e instanceof _e&&e.disposeData()})),this.yAxes.each((function(e){e instanceof _e&&e.disposeData()}))},t.prototype.addData=function(t,i){this.scrollbarX instanceof Pe&&this.addScrollbarData(this.scrollbarX,i),this.scrollbarY instanceof Pe&&this.addScrollbarData(this.scrollbarY,i),e.prototype.addData.call(this,t,i)},t.prototype.addScrollbarData=function(e,t){var i=e.scrollbarChart;i._parseDataFrom=i.data.length,i.invalidateData()},t.prototype.removeScrollbarData=function(e,t){var i=e.scrollbarChart;if(g.h(t)){for(;t>0;){var n=this.dataItems.getIndex(0);n&&i.dataItems.remove(n),i.dataUsers.each((function(e){var t=e.dataItems.getIndex(0);t&&e.dataItems.remove(t)})),i._parseDataFrom--,t--}i.invalidateData()}},t.prototype.removeData=function(t){this.scrollbarX instanceof Pe&&this.removeScrollbarData(this.scrollbarX,t),this.scrollbarY instanceof Pe&&this.removeScrollbarData(this.scrollbarY,t),e.prototype.removeData.call(this,t)},t.prototype.setTapToActivate=function(t){e.prototype.setTapToActivate.call(this,t),this.cursor&&(this.cursor.interactions.isTouchProtected=t,this.plotContainer.interactions.isTouchProtected=t)},t.prototype.handleTapToActivate=function(){e.prototype.handleTapToActivate.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!1,this.plotContainer.interactions.isTouchProtected=!1)},t.prototype.handleTapToActivateDeactivation=function(){e.prototype.handleTapToActivateDeactivation.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!0,this.plotContainer.interactions.isTouchProtected=!0)},t}(H);r.b.registeredClasses.XYChart=Te,_.c.push({relevant:_.b.maybeXS,state:function(e,t){if(e instanceof Te&&e.scrollbarX){var i=e.states.create(t);return e.scrollbarX.states.create(t).properties.disabled=!0,i}return null}}),_.c.push({relevant:_.b.maybeXS,state:function(e,t){if(e instanceof Te&&e.scrollbarY){var i=e.states.create(t);return e.scrollbarY.states.create(t).properties.disabled=!0,i}return null}});var Ce=i(40),Oe=function(e){function t(){var t=e.call(this)||this;t.className="LineSeriesSegment",t.isMeasured=!1,t.interactionsEnabled=!1,t.layout="none";var i=t.createChild(h.a);t.fillSprite=i,i.shouldClone=!1,i.setElement(t.paper.add("path")),i.isMeasured=!1,t._disposers.push(i);var n=t.createChild(h.a);return t.strokeSprite=n,n.shouldClone=!1,n.fill=Object(L.b)(),n.setElement(t.paper.add("path")),n.isMeasured=!1,t._disposers.push(n),t}return Object(n.c)(t,e),t.prototype.drawSegment=function(e,t,i,n){if(!this.disabled)if(e.length>0&&t.length>0&&g.h(e[0].x)&&g.h(e[0].y)){var r=f.g({x:e[0].x-.2,y:e[0].y-.2})+f.g(e[0]),a=this.series;"bezier"==a.smoothing?r+=new Ce.c(i,n).smooth(e):"monotoneX"==a.smoothing?r+=new Ce.a({closed:!1}).smooth(e):"monotoneY"==a.smoothing&&(r+=new Ce.b({closed:!1}).smooth(e)),0==this.strokeOpacity||0==this.strokeSprite.strokeOpacity||(this.strokeSprite.path=r),(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&g.h(t[0].x)&&g.h(t[0].y)&&(r+=f.f(t[0]),"bezier"==a.smoothing?r+=new Ce.c(i,n).smooth(t):"monotoneX"==a.smoothing?r+=new Ce.a({closed:!1}).smooth(t):"monotoneY"==a.smoothing&&(r+=new Ce.b({closed:!1}).smooth(t)),r+=f.f(e[0]),r+=f.d(),this.fillSprite.path=r)}else this.fillSprite.path="",this.strokeSprite.path=""},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t);var i=this.strokeSprite;z.c(t,i.properties,h.b),i.events.copyFrom(t.strokeSprite.events),i.fillOpacity=0;var n=this.fillSprite;z.c(t,n.properties,h.b),n.events.copyFrom(t.fillSprite.events),n.strokeOpacity=0},t}(l.a);r.b.registeredClasses.LineSeriesSegment=Oe;var Ie=function(e){function t(){var t=e.call(this)||this;return t.className="DurationAxisDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(ce),Ee=function(e){function t(){var t=e.call(this)||this;return t._baseUnit="second",t.className="DurationAxis",t.setPropertyValue("maxZoomFactor",1e6),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.formatLabel=function(e,t){return this.durationFormatter.format(e,t||this.axisDurationFormat)},t.prototype.adjustMinMax=function(t,i,r,a,o){var s,l,u,c=this.baseUnit;if(this.setPropertyValue("maxPrecision",0),"millisecond"==c||"second"==c||"minute"==c||"hour"==c){a<=1&&(a=1),a=Math.round(a);var h=t,p=i;0===r&&(r=Math.abs(i));var d,f=[60,30,20,15,10,2,1],m=1;"hour"==c&&(f=[24,12,6,4,2,1]);try{for(var y=Object(n.g)(f),v=y.next();!v.done;v=y.next()){var g=v.value;if(r/g>a){m=g;break}}}catch(k){s={error:k}}finally{try{v&&!v.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}var _=Math.ceil((i-t)/m/a),b=Math.log(Math.abs(_))*Math.LOG10E,x=Math.pow(10,Math.floor(b))/10,w=_/x;d=m*(_=I.f(f,w)*x),this.durationFormatter.getValueUnit(d,this.baseUnit),t=Math.floor(t/d)*d,i=Math.ceil(i/d)*d,o&&((t-=d)<0&&h>=0&&(t=0),(i+=d)>0&&p<=0&&(i=0)),u={min:t,max:i,step:d}}else u=e.prototype.adjustMinMax.call(this,t,i,r,a,o);return this.axisDurationFormat=this.durationFormatter.getFormat(u.step,u.max,this.baseUnit),u},Object.defineProperty(t.prototype,"tooltipDurationFormat",{get:function(){return this._tooltipDurationFormat},set:function(e){this._tooltipDurationFormat=e},enumerable:!0,configurable:!0}),t.prototype.getTooltipText=function(e){var t=I.E(this.positionToValue(e),this._stepDecimalPlaces),i=this.formatLabel(t,this.tooltipDurationFormat);return this._adapterO?this._adapterO.apply("getTooltipText",i):i},Object.defineProperty(t.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(e){this._baseUnit!=e&&(this._baseUnit=e,this.durationFormatter.baseUnit=e,this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.baseUnit=t.baseUnit},t}(he);r.b.registeredClasses.DurationAxis=Ee,r.b.registeredClasses.DurationAxisDataItem=Ie;var Ae=i(51),Me=i(86),De=function(e){function t(){var t=e.call(this)||this;return t.className="LineSeriesDataItem",t}return Object(n.c)(t,e),t}(be),je=function(e){function t(){var t=e.call(this)||this;return t.minDistance=.5,t.segments=new s.c(t.createSegment()),t.segments.template.applyOnClones=!0,t._disposers.push(new s.b(t.segments)),t._disposers.push(t.segments.template),t._segmentsIterator=new v.a(t.segments,(function(){return t.segments.create()})),t._segmentsIterator.createNewItems=!0,t.className="LineSeries",t.strokeOpacity=1,t.fillOpacity=0,t.connect=!0,t.tensionX=1,t.tensionY=1,t.autoGapCount=1.1,t.smoothing="bezier",t.segmentsContainer=t.mainContainer.createChild(l.a),t.segmentsContainer.isMeasured=!1,t.bulletsContainer.toFront(),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Line Series"))},t.prototype.createSegment=function(){return new Oe},t.prototype.createDataItem=function(){return new De},t.prototype.setInitialWorkingValues=function(e){var t=this._yAxis.get(),i=this._xAxis.get();if(this.appeared&&this.visible){var n=this.dataItems.getIndex(e.index-1);if(e.component=this,this.baseAxis==i&&t instanceof he){var r=t.minZoomed;if(n&&(r=n.values.valueY.workingValue),e.setWorkingValue("valueY",r,0),e.setWorkingValue("valueY",e.values.valueY.value),i instanceof me)e.setWorkingLocation("dateX",e.locations.dateX-1,0),e.setWorkingLocation("dateX",e.locations.dateX);else if(i instanceof Ee&&n){var a=e.valueX;e.setWorkingValue("valueX",n.valueX,0),e.setWorkingValue("valueX",a)}}if(this.baseAxis==t&&i instanceof he){var o=i.minZoomed;if(n&&(o=n.values.valueX.workingValue),e.setWorkingValue("valueX",o,0),e.setWorkingValue("valueX",e.values.valueX.value),t instanceof me)e.setWorkingLocation("dateY",e.locations.dateX-1,0),e.setWorkingLocation("dateY",e.locations.dateY);else if(t instanceof Ee&&n){a=e.valueY;e.setWorkingValue("valueY",n.valueY,0),e.setWorkingValue("valueY",a)}}}else this.baseAxis==i&&t instanceof he&&(i instanceof me&&e.setWorkingLocation("dateX",e.locations.dateX),i instanceof _e&&e.setWorkingLocation("categoryX",e.locations.categoryX)),this.baseAxis==t&&i instanceof he&&(t instanceof me&&e.setWorkingLocation("dateY",e.locations.dateY),t instanceof _e&&e.setWorkingLocation("categoryY",e.locations.categoryY))},t.prototype.updateLegendValue=function(t,i){e.prototype.updateLegendValue.call(this,t,i),t&&t.segment&&(this.tooltipColorSource=t.segment)},t.prototype.validate=function(){var t=this;e.prototype.validate.call(this),this.xAxis&&this.yAxis&&(this._segmentsIterator.reset(),this.openSegmentWrapper(this._adjustedStartIndex),v.d(this.axisRanges.iterator(),(function(e){t.openSegmentWrapper(t._adjustedStartIndex,e)})),v.d(this._segmentsIterator.iterator(),(function(e){e.__disabled=!0})))},t.prototype.sliceData=function(){for(var e=this.startIndex,t=this.endIndex,i=this.startIndex-1;i>=0;i--){if((r=this.dataItems.getIndex(i))&&r.hasValue(this._xValueFields)&&r.hasValue(this._yValueFields)){e=i;break}}this._adjustedStartIndex=this.findAdjustedIndex(e,["stroke","strokeWidth","strokeDasharray","strokeOpacity","fill","fillOpacity","opacity"]);i=this.endIndex;for(var n=this.dataItems.length;i<n;i++){var r;if((r=this.dataItems.getIndex(i))&&r.hasValue(this._xValueFields)&&r.hasValue(this._yValueFields)){t=i+1;break}}this._workingStartIndex=e,this._workingEndIndex=t},t.prototype.findAdjustedIndex=function(e,t){var i=this,n=this.propertyFields,r=e;return V.d(t,(function(t){if(g.d(n[t]))for(var a=r;a>=0;a--){var o=i.dataItems.getIndex(a);if(o&&g.d(o.properties[t])){e>a&&(e=a);break}}})),e},t.prototype.openSegmentWrapper=function(e,t){var i={index:e,axisRange:t};do{i=this.openSegment(i.index,i.axisRange)}while(i)},t.prototype.getSegment=function(){var e=this._segmentsIterator.getFirst();return e.series=this,e.isDisposed()?(this.segments.removeValue(e),this.getSegment()):e},t.prototype.openSegment=function(e,t){var i=!1,n=[];e=Math.min(e,this.dataItems.length);var r,a=Math.min(this._workingEndIndex,this.dataItems.length);this._workingEndIndex=Math.min(this._workingEndIndex,this.dataItems.length);var o=!1,s=this.getSegment();s.strokeDasharray=void 0,s.__disabled=!1,t?(s.parent=t.contents,z.c(t.contents,s,h.b)):(z.c(this,s,h.b),s.filters.clear(),s.parent=this.segmentsContainer),this.group.node.removeAttribute("fill");for(var l=this.connect,u=!1,c=e;c<a;c++){var p=this.dataItems.getIndex(c);if(p.segment=s,p.hasProperties&&(c==e?this.updateSegmentProperties(p.properties,s):o=this.updateSegmentProperties(p.properties,s,!0)),p.hasValue(this._xValueFields)&&p.hasValue(this._yValueFields))this.addPoints(n,p,this.xField,this.yField),u=!0;else{if(c==e)continue;if(!l&&u){r=c;break}}if(r=c,this.baseAxis instanceof me){var d=this.dataItems.getIndex(c+1);if(d&&this.baseAxis.makeGap(d,p)){i=!0;break}}if(o)break}return this.closeSegment(s,n,e,r,t,i)},t.prototype.addPoints=function(e,t,i,n,r){var a=this.getPoint(t,i,n,t.workingLocations[i],t.workingLocations[n]);r||(t.point=a),e.push(a)},t.prototype.closeSegment=function(e,t,i,n,r,a){var o=[];if(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)for(var s=n;s>=i;s--){var l=this.dataItems.getIndex(s);l.hasValue(this._xValueFields)&&l.hasValue(this._yValueFields)&&this.addPoints(o,l,this.xOpenField,this.yOpenField,!0)}else{var u=this.baseAxis,c=t.length,h=this.xAxis,p=this.yAxis;c>0&&(u==h?(o.push({x:t[c-1].x,y:p.basePoint.y}),o.push({x:t[0].x,y:p.basePoint.y})):(o.push({x:h.basePoint.x,y:t[c-1].y}),o.push({x:h.basePoint.x,y:t[0].y})))}return this.drawSegment(e,t,o),a&&n++,n<this._workingEndIndex-1?{index:n,axisRange:r}:null},t.prototype.drawSegment=function(e,t,i){e.drawSegment(t,i,this.tensionX,this.tensionY)},t.prototype.updateSegmentProperties=function(e,t,i){var n=!1;return z.d(e,(function(e,r){if(g.d(r)){var a=t[e],o=void 0;a&&(o=a.toString?a.toString():a);var s=void 0;r&&(s=r.toString?r.toString():r),a==r||void 0!=o&&void 0!=s&&o==s||(i||(t[e]=r),n=!0)}})),n},Object.defineProperty(t.prototype,"connect",{get:function(){return this.getPropertyValue("connect")},set:function(e){this.setPropertyValue("connect",e)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(e){this.setPropertyValue("tensionX",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(e){this.setPropertyValue("tensionY",e,!0)},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e){var t=this,i=e.pixelWidth,n=e.pixelHeight;e.disposeChildren();var r=e.createChild(Ae.a);if(r.shouldClone=!1,z.c(this,r,h.b),r.x2=i,r.y=n/2,r.y2=1e-5,r.visible=!0,this.fillOpacity>0){var a=e.createChild(Me.a);z.c(this,a,h.b),a.width=i,a.height=n,a.y=0,a.strokeOpacity=0,a.visible=!0,r.y=0}var o=e.dataItem;o.color=this.stroke,o.colorOrig=this.fill,v.e(this.bullets.iterator(),(function(r){if(r instanceof P&&!r.copyToLegendMarker)return!1;var a=!1;if(r instanceof l.a&&v.d(r.children.iterator(),(function(e){if(e instanceof u.a)return a=!0,!0})),!a){var o=r.clone();return o.parent=e,o.isMeasured=!0,o.tooltipText=void 0,o.x=i/2,t.fillOpacity>0?o.y=0:o.y=n/2,o.visible=!0,g.d(o.fill)||(o.fill=t.fill),g.d(o.stroke)||(o.stroke=t.stroke),!1}}))},t.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.segments.clear()},Object.defineProperty(t.prototype,"autoGapCount",{get:function(){return this.getPropertyValue("autoGapCount")},set:function(e){this.setPropertyValue("autoGapCount",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"smoothing",{get:function(){return this.getPropertyValue("smoothing")},set:function(e){this.setPropertyValue("smoothing",e,!0)},enumerable:!0,configurable:!0}),t}(xe);r.b.registeredClasses.LineSeries=je,r.b.registeredClasses.LineSeriesDataItem=De;var Fe=function(e){function t(){var t=e.call(this)||this;return t.className="RadarSeriesDataItem",t.setLocation("dateX",0,0),t.setLocation("dateY",0,0),t.setLocation("categoryX",0,0),t.setLocation("categoryY",0,0),t.applyTheme(),t}return Object(n.c)(t,e),t}(De),Le=function(e){function t(){var t=e.call(this)||this;return t.className="RadarSeries",t.connectEnds=!0,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},t.prototype.createDataItem=function(){return new Fe},t.prototype.getPoint=function(e,t,i,n,r,a,o){a||(a="valueX"),o||(o="valueY");var s=this.yAxis.getX(e,i,r,o),l=this.yAxis.getY(e,i,r,o),u=I.q({x:s,y:l});0==u&&(u=1e-5);var c=this.xAxis.getAngle(e,t,n,a),h=this.chart.startAngle,p=this.chart.endAngle;return c<h||c>p?void 0:{x:u*I.g(c),y:u*I.F(c)}},t.prototype.addPoints=function(e,t,i,n,r){var a=this.getPoint(t,i,n,t.locations[i],t.locations[n]);a&&e.push(a)},t.prototype.getMaskPath=function(){var e=this.yAxis.renderer;return f.a(e.startAngle,e.endAngle-e.startAngle,e.pixelRadius,e.pixelInnerRadius)},t.prototype.drawSegment=function(t,i,n){var r=this.yAxis.renderer;this.connectEnds&&360==Math.abs(r.endAngle-r.startAngle)&&(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)&&(i.push(i[0]),n.length>0&&n.unshift(n[n.length-1])),e.prototype.drawSegment.call(this,t,i,n)},Object.defineProperty(t.prototype,"connectEnds",{get:function(){return this.getPropertyValue("connectEnds")},set:function(e){this.setPropertyValue("connectEnds",e,!0)},enumerable:!0,configurable:!0}),t.prototype.positionBulletReal=function(e,t,i){var n=this.xAxis,r=this.yAxis;(t<n.start||t>n.end||i<r.start||i>r.end)&&(e.visible=!1),e.moveTo(this.xAxis.renderer.positionToPoint(t,i))},t.prototype.setXAxis=function(t){e.prototype.setXAxis.call(this,t),this.updateRendererRefs()},t.prototype.setYAxis=function(t){e.prototype.setYAxis.call(this,t),this.updateRendererRefs()},t.prototype.updateRendererRefs=function(){var e=this.xAxis.renderer,t=this.yAxis.renderer;e.axisRendererY=t},t}(je);r.b.registeredClasses.RadarSeries=Le,r.b.registeredClasses.RadarSeriesDataItem=Fe;var Re=i(64),ze=function(e){function t(t){var i=e.call(this,t)||this;return i.className="AxisFillCircular",i.element=i.paper.add("path"),i.radius=Object(d.c)(100),i.applyTheme(),i}return Object(n.c)(t,e),t.prototype.draw=function(){if(e.prototype.draw.call(this),!this.__disabled&&!this.disabled&&this.axis){var t=this.axis.renderer;this.fillPath=t.getPositionRangePath(this.startPosition,this.endPosition,this.radius,g.d(this.innerRadius)?this.innerRadius:t.innerRadius,this.cornerRadius),this.path=this.fillPath}},Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(e){this.setPropertyValue("cornerRadius",e,!0)},enumerable:!0,configurable:!0}),t}(ee);r.b.registeredClasses.AxisFillCircular=ze;var Ve=function(e){function t(){var t=e.call(this)||this;return t.className="GridCircular",t.pixelPerfect=!1,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),t}(te);r.b.registeredClasses.GridCircular=Ve;var Be=function(e){function t(){var t=e.call(this)||this;return t.fdx=0,t.fdy=0,t.className="AxisLabelCircular",t.padding(0,0,0,0),t.location=.5,t.locationOnPath=.5,t.radius=0,t.isMeasured=!1,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"relativeRotation",{get:function(){return this.getPropertyValue("relativeRotation")},set:function(e){if(this.setPropertyValue("relativeRotation",e,!0),!g.d(e)){this.rotation=void 0;var t=this.dataItem;t&&t.component&&t.component.invalidateDataItems()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bent",{get:function(){return this.getPropertyValue("bent")},set:function(e){this.setPropertyValue("bent",e,!0),this.setPropertyValue("wrap",!1),this.setPropertyValue("horizontalCenter","none"),this.setPropertyValue("verticalCenter","none"),e?(this.setPropertyValue("dx",0),this.setPropertyValue("dy",0),this.setPropertyValue("x",0),this.setPropertyValue("y",0),this.setPropertyValue("rotation",0),this.fdx=0,this.fdy=0,this.textAlign="middle"):this.textPathElement&&(this.textPathElement.dispose(),this.textPathElement=void 0)},enumerable:!0,configurable:!0}),t.prototype.pixelRadius=function(e){var t=1;return this.inside&&(t=-1),O.E(this.radius,e)*t},t.prototype.pixelRadiusY=function(e,t){var i=1;this.inside&&(i=-1);var n=this.radius;return g.h(n)?(n*=t/e,O.E(n,e)*i):O.E(n,t)*i},t.prototype.fixPosition=function(e,t,i,n,r){g.h(i)||(i=t),g.h(n)||(n=0),g.h(r)||(r=0);var a={x:t*I.g(e),y:i*I.F(e)};this.invalid&&this.validate();var o=!1,s=this.radius;(s instanceof d.a&&s.value<0||s<0)&&(o=!0);var l=this.relativeRotation,u=this.pixelRadius(t);if(this.bent){var c={x:(t+u)*I.g(e+180),y:(i+u*i/t)*I.F(e+180)};return this.path=f.g(c)+f.b(e+180,360,t+u,i+u*i/t),void(this.textPathElement&&this.textPathElement.attr({startOffset:100*this.locationOnPath+"%"}))}if(g.h(l)){this.horizontalCenter="none",this.verticalCenter="none",e=I.h(e,-180,180);var h=this.bbox.width,p=this.bbox.height,m=this.pixelPaddingBottom,y=this.pixelPaddingTop,v=this.pixelPaddingLeft,_=this.pixelPaddingRight;e>90||e<-90?-90==l&&(l=90,h=0):(-90==l&&(p=-p),90==l&&(l=-90,h=-v-_,p=-p-y-m)),this.rotation=l+e+90;var b=I.F(l)/2,x=I.g(l)/2,w=this.rotation;this.dx=p*b*I.F(w)-h*x*I.g(w),this.dy=-p*b*I.g(w)-h*x*I.F(w),this.inside?e>90||e<-90?u-=(m+y)*I.g(l)+(v+_)*I.F(l):u+=(m+this.bbox.height+y)*I.g(l)+(v+_+this.bbox.width)*I.F(l):u+=(p+m+y)*I.g(l)+(h+v+_)*I.F(l),a.x+=I.g(e)*u,a.y+=I.F(e)*u*i/t}else this.horizontalCenter="middle",this.verticalCenter="middle",o?(this.dx=0,this.dy=0,a.x=(t+u)*I.g(e),a.y=(i+u*i/t)*I.F(e)):(this.dy=this._measuredHeight/2*I.F(e),this.dx=this._measuredWidth/2*I.g(e),a.x+=I.g(e)*u,a.y+=I.F(e)*u*i/t);a.x+=n,a.y+=r,this.fdx=this.dx,this.fdy=this.dy,this.moveTo(a)},t}(ie);r.b.registeredClasses.AxisLabelCircular=Be;var Ne=function(e){function t(){var t=e.call(this)||this;return t.pixelRadiusReal=0,t.layout="none",t.className="AxisRendererCircular",t.isMeasured=!1,t.startAngle=-90,t.endAngle=270,t.useChartAngles=!0,t.radius=Object(d.c)(100),t.isMeasured=!1,t.grid.template.location=0,t.labels.template.location=0,t.labels.template.radius=15,t.ticks.template.location=0,t.ticks.template.pixelPerfect=!1,t.tooltipLocation=0,t.line.strokeOpacity=0,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.setAxis=function(t){var i=this;e.prototype.setAxis.call(this,t),t.isMeasured=!1;var n=t.tooltip;n.adapter.add("dx",(function(e,t){var n=O.O({x:t.pixelX,y:t.pixelY},i);return i.pixelRadius*Math.cos(Math.atan2(n.y,n.x))-n.x})),n.adapter.add("dy",(function(e,t){var n=O.O({x:t.pixelX,y:t.pixelY},i);return i.pixelRadius*Math.sin(Math.atan2(n.y,n.x))-n.y}))},t.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},Object.defineProperty(t.prototype,"axisLength",{get:function(){return 2*Math.PI*this.pixelRadius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelRadius",{get:function(){return O.D(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){var e=this.chart,t=this.getPropertyValue("innerRadius");if(e){if(g.d(t)){if(t instanceof d.a&&e){var i=e.mr,n=t.value;n=Math.max(i*n,i-Math.min(e.plotContainer.innerHeight,e.plotContainer.innerWidth))/i,t=Object(d.c)(100*n)}}else(t=e.innerRadius)instanceof d.a&&e&&(t=Object(d.c)(t.value*e.innerRadiusModifyer*100));return t}},set:function(e){this.setPercentProperty("innerRadius",e,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useChartAngles",{get:function(){return this.getPropertyValue("useChartAngles")},set:function(e){this.setPropertyValue("useChartAngles",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return O.D(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e,t){g.h(t)||(t=1);var i=this.positionToCoordinate(e),n=this.startAngle+(this.endAngle-this.startAngle)*i/this.axisLength,r=this.pixelRadius,a=this.pixelInnerRadius;if(this.axisRendererY){var o=I.i(this.axisRendererY.positionToCoordinate(t),0,1/0);return 0==o&&(o=1e-6),{x:o*I.g(n),y:o*I.F(n)}}return{x:I.g(n)*a+(r-a)*I.g(n)*t,y:I.F(n)*a+(r-a)*I.F(n)*t}},t.prototype.positionToAngle=function(e){var t,i=this.axis,n=(this.endAngle-this.startAngle)/(i.end-i.start);return t=i.renderer.inversed?this.startAngle+(i.end-e)*n:this.startAngle+(e-i.start)*n,I.E(t,3)},t.prototype.angleToPosition=function(e){var t,i=this.axis,n=(this.endAngle-this.startAngle)/(i.end-i.start);return t=i.renderer.inversed?i.end-(e-this.startAngle)/n:(e-this.startAngle)/n+i.start,I.E(t,5)},t.prototype.updateAxisLine=function(){var e=this.pixelRadius,t=this.startAngle,i=this.endAngle,n=I.C(360,i-t);this.line.path=f.g({x:e*I.g(t),y:e*I.F(t)})+f.b(t,n,e,e)},t.prototype.updateGridElement=function(e,t,i){t+=(i-t)*e.location;var n=this.positionToPoint(t);if(g.h(n.x)&&g.h(n.y)&&e.element){var r=I.a*Math.atan2(n.y,n.x),a=O.D(g.d(e.radius)?e.radius:Object(d.c)(100),this.pixelRadius),o=O.D(e.innerRadius,this.pixelRadius);e.zIndex=0;var s=O.D(g.h(o)?o:this.innerRadius,this.pixelRadiusReal,!0);g.h(s)||(s=0),e.path=f.g({x:s*I.g(r),y:s*I.F(r)})+f.f({x:a*I.g(r),y:a*I.F(r)})}this.toggleVisibility(e,t,0,1)},t.prototype.updateTickElement=function(e,t,i){t+=(i-t)*e.location;var n=this.positionToPoint(t);if(e.element){var r=this.pixelRadius,a=I.a*Math.atan2(n.y,n.x),o=e.length;e.inside&&(o=-o),e.zIndex=1,e.path=f.g({x:r*I.g(a),y:r*I.F(a)})+f.f({x:(r+o)*I.g(a),y:(r+o)*I.F(a)})}this.toggleVisibility(e,t,0,1)},t.prototype.updateBullet=function(e,t,i){var n=.5;e instanceof se&&(n=e.location),t+=(i-t)*n;var r=this.positionToPoint(t),a=this.pixelRadius,o=I.a*Math.atan2(r.y,r.x);r={x:a*I.g(o),y:a*I.F(o)},this.positionItem(e,r),this.toggleVisibility(e,t,0,1)},t.prototype.updateLabelElement=function(e,t,i,n){g.d(n)||(n=e.location),t+=(i-t)*n,e.fixPosition(this.positionToAngle(t),this.pixelRadius),e.zIndex=2,this.toggleVisibility(e,t,this.minLabelPosition,this.maxLabelPosition)},t.prototype.fitsToBounds=function(e){return!0},Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),t.prototype.getPositionRangePath=function(e,t,i,n,r){var a="";if(g.h(e)&&g.h(t)){g.d(i)||(i=this.radius),e=I.B(e,this.axis.start),(t=I.C(t,this.axis.end))<e&&(t=e);var o=O.D(i,this.pixelRadius),s=O.D(n,this.pixelRadius,!0),l=this.positionToAngle(e),u=this.positionToAngle(t)-l;a=f.a(l,u,o,s,o,r)}return a},t.prototype.createGrid=function(){return new Ve},t.prototype.createFill=function(e){return new ze(e)},t.prototype.createLabel=function(){return new Be},t.prototype.pointToPosition=function(e){var t=I.h(I.j(e),this.startAngle,this.endAngle);return this.coordinateToPosition((t-this.startAngle)/360*this.axisLength)},t}(ae);r.b.registeredClasses.AxisRendererCircular=Ne;var Ue=i(111),We=function(e){function t(){var t=e.call(this)||this;return t._chart=new o.d,t.pixelRadiusReal=0,t.className="AxisRendererRadial",t.isMeasured=!1,t.startAngle=-90,t.endAngle=270,t.minGridDistance=30,t.gridType="circles",t.axisAngle=-90,t.isMeasured=!1,t.layout="none",t.radius=Object(d.c)(100),t.line.strokeOpacity=0,t.labels.template.horizontalCenter="middle",t._disposers.push(t._chart),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},Object.defineProperty(t.prototype,"axisLength",{get:function(){return this.pixelRadius-this.pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelRadius",{get:function(){return O.D(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){var e=this.chart,t=this.getPropertyValue("innerRadius");if(e)if(g.d(t)){if(t instanceof d.a&&e){var i=e.mr,n=t.value;n=Math.max(i*n,i-Math.min(e.plotContainer.innerHeight,e.plotContainer.innerWidth))/i,t=Object(d.c)(100*n)}}else(t=e.innerRadius)instanceof d.a&&e&&(t=Object(d.c)(t.value*e.innerRadiusModifyer*100));return t},set:function(e){this.setPercentProperty("innerRadius",e,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return O.D(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e,t){var i=I.i(this.positionToCoordinate(e),0,1/0);return{x:i*I.g(this.axisAngle),y:i*I.F(this.axisAngle)}},t.prototype.updateAxisLine=function(){this.line.path=f.g({x:this.pixelInnerRadius*I.g(this.axisAngle),y:this.pixelInnerRadius*I.F(this.axisAngle)})+f.f({x:this.pixelRadius*I.g(this.axisAngle),y:this.pixelRadius*I.F(this.axisAngle)});var e=this.axis.title;e.valign="none",e.horizontalCenter="middle",e.verticalCenter="bottom",e.y=-this.axisLength/2;var t=90;this.opposite?this.inside||(t=-90):this.inside&&(t=-90),e.rotation=t},t.prototype.updateGridElement=function(e,t,i){t+=(i-t)*e.location;var n,r=this.positionToPoint(t),a=I.q(r),o=this.startAngle,s=this.endAngle,l=this.chart;if(g.h(a)&&e.element&&l){var u=l.xAxes.getIndex(0),c=0,h=l.series.getIndex(0);if(h&&(c=h.dataItems.length),"polygons"==this.gridType&&c>0&&h&&u&&u instanceof _e){var p=u.renderer.grid.template.location,d=u.getAngle(h.dataItems.getIndex(0),"categoryX",p);n=f.g({x:a*I.g(d),y:a*I.F(d)});for(var m=1;m<c;m++)d=u.getAngle(h.dataItems.getIndex(m),"categoryX",p),n+=f.f({x:a*I.g(d),y:a*I.F(d)});d=u.getAngle(h.dataItems.getIndex(c-1),"categoryX",u.renderer.cellEndLocation),n+=f.f({x:a*I.g(d),y:a*I.F(d)})}else n=f.g({x:a*I.g(o),y:a*I.F(o)})+f.b(o,s-o,a,a);e.path=n}this.toggleVisibility(e,t,0,1)},t.prototype.updateLabelElement=function(e,t,i,n){g.d(n)||(n=e.location),t+=(i-t)*n;var r=this.positionToPoint(t);this.positionItem(e,r),this.toggleVisibility(e,t,this.minLabelPosition,this.maxLabelPosition)},t.prototype.updateBaseGridElement=function(){},t.prototype.fitsToBounds=function(e){return!0},Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisAngle",{get:function(){return this.getPropertyValue("axisAngle")},set:function(e){this.setPropertyValue("axisAngle",I.D(e)),this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridType",{get:function(){return this.chart.xAxes.getIndex(0)instanceof _e?this.getPropertyValue("gridType"):"circles"},set:function(e){this.setPropertyValue("gridType",e,!0)},enumerable:!0,configurable:!0}),t.prototype.getPositionRangePath=function(e,t){var i,n=this.pixelInnerRadius,r=this.axisLength+n,a=I.i(this.positionToCoordinate(e),n,r),o=I.i(this.positionToCoordinate(t),n,r),s=this.startAngle,l=this.endAngle-s,u=this.chart,c=u.xAxes.getIndex(0),h=u.series.getIndex(0),p=0;if(h&&(p=h.dataItems.length),"polygons"==this.gridType&&p>0&&h&&c&&c instanceof _e){var d=c.renderer.grid.template.location,m=c.getAngle(h.dataItems.getIndex(0),"categoryX",d);i=f.g({x:o*I.g(m),y:o*I.F(m)});for(var y=1;y<p;y++)m=c.getAngle(h.dataItems.getIndex(y),"categoryX",d),i+=f.f({x:o*I.g(m),y:o*I.F(m)});m=c.getAngle(h.dataItems.getIndex(p-1),"categoryX",c.renderer.cellEndLocation),i+=f.f({x:o*I.g(m),y:o*I.F(m)}),i+=f.g({x:a*I.g(m),y:a*I.F(m)});for(y=p-1;y>=0;y--)m=c.getAngle(h.dataItems.getIndex(y),"categoryX",d),i+=f.f({x:a*I.g(m),y:a*I.F(m)})}else i=f.a(s,l,o,a);return i},t.prototype.updateBreakElement=function(e){var t=e.startLine,i=e.endLine,n=e.fillShape,r=e.startPoint,a=e.endPoint;t.radius=Math.abs(r.y),i.radius=Math.abs(a.y),n.radius=Math.abs(a.y),n.innerRadius=Math.abs(r.y)},t.prototype.createBreakSprites=function(e){e.startLine=new Ue.a,e.endLine=new Ue.a,e.fillShape=new Ue.a},t.prototype.updateTooltip=function(){if(this.axis){var e=this.axisAngle;e<0&&(e+=360);var t="vertical";(e>45&&e<135||e>225&&e<315)&&(t="horizontal"),this.axis.updateTooltip(t,{x:-4e3,y:-4e3,width:8e3,height:8e3})}},t.prototype.updateTickElement=function(e,t,i){t+=(i-t)*e.location;var n=this.positionToPoint(t);if(e.element){var r=I.D(this.axisAngle+90);r/90!=Math.round(r/90)?e.pixelPerfect=!1:e.pixelPerfect=!0;var a=-e.length;e.inside&&(a*=-1),e.path=f.g({x:0,y:0})+f.f({x:a*I.g(r),y:a*I.F(r)})}this.positionItem(e,n),this.toggleVisibility(e,t,0,1)},t.prototype.updateBullet=function(e,t,i){var n=.5;e instanceof se&&(n=e.location),t+=(i-t)*n;var r=this.positionToPoint(t);this.positionItem(e,r),this.toggleVisibility(e,t,0,1)},t.prototype.positionToCoordinate=function(e){var t,i=this.axis,n=i.axisFullLength,r=this.pixelInnerRadius;return t=i.renderer.inversed?(i.end-e)*n+r:(e-i.start)*n+r,I.E(t,1)},t.prototype.pointToPosition=function(e){var t=I.q(e)-this.pixelInnerRadius;return this.coordinateToPosition(t)},Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart.get()},set:function(e){this._chart.set(e,null)},enumerable:!0,configurable:!0}),t}(le);r.b.registeredClasses.AxisRendererRadial=We;var Ge=function(e){function t(){var t=e.call(this)||this;return t.className="RadarChartDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(Se),He=function(e){function t(){var t=e.call(this)||this;t._axisRendererX=Ne,t._axisRendererY=We,t.innerRadiusModifyer=1,t.mr=1,t.className="RadarChart",t.startAngle=-90,t.endAngle=270,t.radius=Object(d.c)(80),t.innerRadius=0;var i=t.plotContainer.createChild(l.a);return i.shouldClone=!1,i.layout="absolute",i.align="center",i.valign="middle",t.seriesContainer.parent=i,t.radarContainer=i,t.bulletsContainer.parent=i,t.axisBulletsContainer=i,t._cursorContainer=i,t.chartContainer.events.on("maxsizechanged",t.invalidate,t,!1),t._bulletMask=i.createChild(Re.a),t._bulletMask.shouldClone=!1,t._bulletMask.element=t.paper.add("path"),t._bulletMask.opacity=0,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Radar chart"))},t.prototype.processAxis=function(t){e.prototype.processAxis.call(this,t);var i=t.renderer;i.gridContainer.parent=i,i.breakContainer.parent=i,t.parent=this.radarContainer,i.toBack()},t.prototype.handleXAxisRangeChange=function(){e.prototype.handleXAxisRangeChange.call(this),v.d(this.yAxes.iterator(),(function(e){e.invalidate()}))},t.prototype.handleYAxisRangeChange=function(){e.prototype.handleYAxisRangeChange.call(this),v.d(this.xAxes.iterator(),(function(e){e.invalidate()}))},t.prototype.processConfig=function(t){if(t&&(g.d(t.cursor)&&!g.d(t.cursor.type)&&(t.cursor.type="RadarCursor"),g.d(t.series)&&g.e(t.series)))for(var i=0,n=t.series.length;i<n;i++)t.series[i].type=t.series[i].type||"RadarSeries";e.prototype.processConfig.call(this,t)},t.prototype.beforeDraw=function(){e.prototype.beforeDraw.call(this);var t=this.plotContainer,i=I.k(this.startAngle,this.endAngle,1),n={x:0,y:0,width:0,height:0},r=t.innerWidth/i.width,a=t.innerHeight/i.height,o=this.innerRadius;if(o instanceof d.a){var s=o.value,l=Math.min(r,a);this.mr=l,s=Math.max(l*s,l-Math.min(t.innerHeight,t.innerWidth))/l,n=I.k(this.startAngle,this.endAngle,s),this.innerRadiusModifyer=s/o.value,o=Object(d.c)(100*s)}i=I.m([i,n]);var u=Math.min(t.innerWidth/i.width,t.innerHeight/i.height),c=2*O.D(this.radius,u)||0,h=c/2,p=this.startAngle,m=this.endAngle;this._pixelInnerRadius=O.D(o,h),this._bulletMask.path=f.a(p,m-p,h,this._pixelInnerRadius),v.d(this.xAxes.iterator(),(function(e){e.renderer.useChartAngles&&(e.renderer.startAngle=p,e.renderer.endAngle=m),e.width=c,e.height=c,e.renderer.pixelRadiusReal=h})),v.d(this.yAxes.iterator(),(function(e){e.renderer.startAngle=p,e.renderer.endAngle=m,e.width=c,e.height=c,e.renderer.pixelRadiusReal=h}));var y=this.cursor;y&&(y.width=c,y.height=c,y.startAngle=p,y.endAngle=m),this.radarContainer.definedBBox={x:h*i.x,y:h*i.y,width:h*i.width,height:h*i.height},this.radarContainer.validatePosition()},t.prototype.createSeries=function(){return new Le},Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),t.prototype.updateXAxis=function(e){e&&e.processRenderer()},t.prototype.updateYAxis=function(e){e&&e.processRenderer()},t}(Te);r.b.registeredClasses.RadarChart=He;var Xe=i(139),Ye=function(e){function t(){var t=e.call(this)||this;t._axis=new o.d,t.className="ClockHand";var i=new p.a;t.fill=i.getFor("alternativeBackground"),t.stroke=t.fill;var n=new Re.a;n.radius=5,t.pin=n,t.isMeasured=!1,t.startWidth=5,t.endWidth=1,t.width=Object(d.c)(100),t.height=Object(d.c)(100),t.radius=Object(d.c)(100),t.innerRadius=Object(d.c)(0);var r=new Xe.a;return t.hand=r,t._disposers.push(t._axis),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.validate=function(){e.prototype.validate.call(this);var t=this.hand;t.width=this.pixelWidth;var i=Math.max(this.startWidth,this.endWidth);if(t.height=i,t.leftSide=Object(d.c)(this.startWidth/i*100),t.rightSide=Object(d.c)(this.endWidth/i*100),this.axis){var n=this.axis.renderer,r=O.D(this.innerRadius,n.pixelRadius),a=O.D(this.radius,n.pixelRadius);t.x=r,t.y=-i/2,t.width=a-r}},Object.defineProperty(t.prototype,"pin",{get:function(){return this._pin},set:function(e){this._pin&&this.removeDispose(this._pin),e&&(this._pin=e,e.parent=this,this._disposers.push(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hand",{get:function(){return this._hand},set:function(e){this._hand&&this.removeDispose(this._hand),e&&(this._hand=e,e.parent=this,this._disposers.push(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startWidth",{get:function(){return this.getPropertyValue("startWidth")},set:function(e){this.setPropertyValue("startWidth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endWidth",{get:function(){return this.getPropertyValue("endWidth")},set:function(e){this.setPropertyValue("endWidth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationDirection",{get:function(){return this.getPropertyValue("rotationDirection")},set:function(e){this.setPropertyValue("rotationDirection",e)},enumerable:!0,configurable:!0}),t.prototype.showValue=function(e,t,i){if(this._value=e,void 0!=e&&(g.h(t)||(t=0),this.axis)){var n=this.axis.renderer.positionToAngle(this.axis.anyToPosition(e)),r=this.rotation;"clockWise"==this.rotationDirection&&n<r&&(this.rotation=r-360),"counterClockWise"==this.rotationDirection&&n>r&&(this.rotation=r+360),this.animate({property:"rotation",to:n},t,i)}},Object.defineProperty(t.prototype,"currentPosition",{get:function(){if(this.axis)return this.axis.renderer.angleToPosition(this.rotation)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this.showValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axis",{get:function(){return this._axis.get()},set:function(e){if(this.axis!=e&&this._axis.set(e,new o.c([e.events.on("datavalidated",this.updateValue,this,!1),e.events.on("datarangechanged",this.updateValue,this,!1),e.events.on("dataitemsvalidated",this.updateValue,this,!1),e.events.on("propertychanged",this.invalidate,this,!1)])),e){var t=e.chart;t&&(this.rotation=t.startAngle)}this.parent=e.renderer,this.zIndex=5},enumerable:!0,configurable:!0}),t.prototype.updateValue=function(){this.value=this.value},t.prototype.processConfig=function(t){t&&g.d(t.axis)&&g.j(t.axis)&&this.map.hasKey(t.axis)&&(t.axis=this.map.getKey(t.axis)),e.prototype.processConfig.call(this,t)},t}(l.a);r.b.registeredClasses.ClockHand=Ye;!function(e){function t(){var t=e.call(this)||this;return t.className="GaugeChartDataItem",t.applyTheme(),t}Object(n.c)(t,e)}(Ge);var qe=function(e){function t(){var t=e.call(this)||this;return t.className="GaugeChart",t.startAngle=180,t.endAngle=360,t.hands=new s.c(new Ye),t.hands.events.on("inserted",t.processHand,t,!1),t._disposers.push(new s.b(t.hands)),t._disposers.push(t.hands.template),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Gauge chart"))},t.prototype.processHand=function(e){var t=e.newValue;t.axis||(t.axis=this.xAxes.getIndex(0))},t.prototype.configOrder=function(t,i){return t==i?0:"hands"==t?1:"hands"==i?-1:e.prototype.configOrder.call(this,t,i)},t}(He);r.b.registeredClasses.GaugeChart=qe;var Ze=function(e){function t(){var t=e.call(this)||this;return t.className="PercentSeriesDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.uidAttr=function(){return this.slice.uidAttr()},t.prototype.hide=function(t,i,n,r){return r||(r=["value"]),e.prototype.hide.call(this,t,i,0,r)},t.prototype.setVisibility=function(t,i){i||(t?this.setWorkingValue("value",this.values.value.value,0,0):this.setWorkingValue("value",0,0,0)),e.prototype.setVisibility.call(this,t,i)},t.prototype.show=function(t,i,n){return n||(n=["value"]),e.prototype.show.call(this,t,i,n)},Object.defineProperty(t.prototype,"category",{get:function(){return this.properties.category},set:function(e){this.setProperty("category",e)},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e){this.component.createLegendMarker(e,this)},Object.defineProperty(t.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(e){this._legendDataItem=e,e.label&&(e.label.dataItem=this),e.valueLabel&&(e.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tick",{get:function(){var e=this;if(!this._tick){var t=this.component.ticks.create();this._tick=t,this.addSprite(t),this._disposers.push(t),t.parent=this.component.ticksContainer,this._disposers.push(new o.b((function(){e.component&&e.component.ticks.removeValue(t)}))),t.visible=this.visible}return this._tick},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){var e=this;if(!this._label){var t=this.component.labels.create();this.addSprite(t),this._label=t,this._disposers.push(t),t.parent=this.component.labelsContainer,this._disposers.push(new o.b((function(){e.component&&e.component.labels.removeValue(t)}))),t.visible=this.visible}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slice",{get:function(){var e=this;if(!this._slice){var t=this.component,i=t.slices.create();this.addSprite(i),this._slice=i,this._disposers.push(i),i.parent=t.slicesContainer,this._disposers.push(new o.b((function(){t.slices.removeValue(i)}))),i.visible=this.visible,t.itemsFocusable()?(g.d(this.component.role)||(this.component.role="menu"),g.d(i.role)||(i.role="menuitem"),i.focusable=!0):(g.d(this.component.role)||(this.component.role="list"),g.d(i.role)||(i.role="listitem"),i.focusable=!1),i.focusable&&(i.events.on("focus",(function(n){i.readerTitle=t.populateString(t.itemReaderText,e)}),void 0,!1),i.events.on("blur",(function(e){i.readerTitle=""}),void 0,!1)),i.hoverable&&(i.events.on("over",(function(n){i.readerTitle=t.populateString(t.itemReaderText,e)}),void 0,!1),i.events.on("out",(function(e){i.readerTitle=""}),void 0,!1))}return this._slice},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hiddenInLegend",{get:function(){return this.properties.hiddenInLegend},set:function(e){this.setProperty("hiddenInLegend",e)},enumerable:!0,configurable:!0}),t}(N),Ke=function(e){function t(){var t=e.call(this)||this;t.className="PercentSeries",t._addAllDataItems=!1,t.colors=new W.a,t.colors.step=1,t.isMeasured=!0,t.calculatePercent=!0;var i=t.createChild(l.a);i.shouldClone=!1,i.isMeasured=!1,t.slicesContainer=i;var n=t.createChild(l.a);n.shouldClone=!1,n.isMeasured=!1,n.layout="none",t.ticksContainer=n;var r=t.createChild(l.a);return r.shouldClone=!1,r.isMeasured=!1,r.layout="none",t.labelsContainer=r,t.alignLabels=!1,t.bulletsContainer.toFront(),t.skipFocusThreshold=50,t.defaultState.transitionEasing=R.e,t.itemReaderText="{category}: {value.percent.formatNumber('#.#')}%",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.createSlice=function(){return new h.a},t.prototype.createTick=function(){return new ne},t.prototype.createLabel=function(){return new u.a},Object.defineProperty(t.prototype,"slices",{get:function(){if(!this._slices){var e=this.createSlice();e.applyOnClones=!0,this._disposers.push(e),this.initSlice(e),this._slices=new s.c(e),this._disposers.push(new s.b(this._slices))}return this._slices},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ticks",{get:function(){if(!this._ticks){var e=this.createTick();e.applyOnClones=!0,this._disposers.push(e),this.initTick(e),this._ticks=new s.c(e),this._disposers.push(new s.b(this._ticks))}return this._ticks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labels",{get:function(){if(!this._labels){var e=this.createLabel();e.applyOnClones=!0,this._disposers.push(e),this.initLabel(e),this._labels=new s.c(e),this._disposers.push(new s.b(this._labels))}return this._labels},enumerable:!0,configurable:!0}),t.prototype.createDataItem=function(){return new Ze},t.prototype.initSlice=function(e){},t.prototype.initLabel=function(e){e.text="{category}: {value.percent.formatNumber('#.0')}%",e.isMeasured=!1,e.padding(5,5,5,5)},t.prototype.initTick=function(e){},t.prototype.validateDataItems=function(){this.colors.reset(),this.patterns&&this.patterns.reset(),e.prototype.validateDataItems.call(this)},t.prototype.validateDataElement=function(t){var i=t.slice;i&&(void 0==i.fill?this.patterns?(g.d(i.stroke)||(i.stroke=this.colors.next()),i.fill=this.patterns.next(),g.d(i.fillOpacity)&&(i.fill.backgroundOpacity=i.fillOpacity),i.stroke instanceof L.a&&(i.fill.stroke=i.stroke,i.fill.fill=i.stroke)):i.fill=this.colors.next():this.colors.currentStep+=this.colors.step,void 0==i.stroke&&(i.stroke=i.fill)),e.prototype.validateDataElement.call(this,t),i&&t.bullets.each((function(e,t){void 0==t.fill&&(t.fill=i.fill),void 0==t.stroke&&(t.stroke=i.stroke)})),this.updateLegendValue(t)},t.prototype.validateData=function(){e.prototype.validateData.call(this),this.chart&&this.chart.feedLegend()},t.prototype.arrangeLabels=function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t].label;if(n){n.invalid&&n.validate();var r=n.measuredHeight;n.visible||(r=0),n.pixelY-r/2<-this.maxHeight/2&&(n.y=-this.maxHeight/2+r/2);var a=this.getNextLabel(t+1,e),o=n.pixelY+r;a&&a.y<o&&(a.y=o)}}},t.prototype.arrangeLabels2=function(e){for(var t=this.maxHeight/2,i=e.length-1;i>=0;i--){var n=e[i].label;if(n){n.invalid&&n.validate();var r=n.measuredHeight;n.visible||(r=0),i==e.length-1&&(t+=r/2),n.pixelY+r>t&&(n.y=t-r,t=n.y)}}},t.prototype.getNextLabel=function(e,t){if(t.length>=e){var i=t[e];if(i)return i.label&&i.visible?i.label:this.getNextLabel(e+1,t)}},Object.defineProperty(t.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(e){this.setPropertyValue("colors",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(e){this.setPropertyValue("patterns",e,!0)},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e,t){v.d(e.children.iterator(),(function(i){var n=t.slice;i.defaultState.properties.fill=n.fill,i.defaultState.properties.stroke=n.stroke,i.defaultState.properties.fillOpacity=n.fillOpacity,i.defaultState.properties.strokeOpacity=n.strokeOpacity,i.fill=n.fill,i.stroke=n.stroke,i.fillOpacity=n.fillOpacity,i.strokeOpacity=n.strokeOpacity,void 0==i.fill&&(i.__disabled=!0);var r=e.dataItem;r.color=n.fill,r.colorOrig=n.fill,i.addDisposer(n.events.on("propertychanged",(function(e){"fill"==e.property&&(i.__disabled=!1,i.isActive||(i.fill=n.fill),i.defaultState.properties.fill=n.fill,r.color=n.fill,r.colorOrig=n.fill),"stroke"==e.property&&(i.isActive||(i.stroke=n.stroke),i.defaultState.properties.stroke=n.stroke)}),void 0,!1))}))},t.prototype.handleSliceScale=function(e){var t=this,i=e.target.dataItem;i&&i.bullets&&v.d(i.bullets.iterator(),(function(e){var i=e[1];t.positionBullet(i)}))},t.prototype.handleSliceMove=function(e){},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.slices.template.copyFrom(t.slices.template),this.labels.template.copyFrom(t.labels.template),this.ticks.template.copyFrom(t.ticks.template),this.colors=t.colors.clone()},Object.defineProperty(t.prototype,"alignLabels",{get:function(){return this.getPropertyValue("alignLabels")},set:function(e){this.setAlignLabels(e)},enumerable:!0,configurable:!0}),t.prototype.setAlignLabels=function(e){this.setPropertyValue("alignLabels",e,!0)},Object.defineProperty(t.prototype,"ignoreZeroValues",{get:function(){return this.getPropertyValue("ignoreZeroValues")},set:function(e){this.setPropertyValue("ignoreZeroValues",e,!0)},enumerable:!0,configurable:!0}),t.prototype.updateLegendValue=function(e){if(e){var t=e.legendDataItem,i=e.legendSettings;t&&i&&i&&(i.labelText&&(t.label.text=i.labelText),i.itemLabelText&&(t.label.text=i.itemLabelText),i.valueText&&(t.valueLabel.text=i.valueText),i.itemValueText&&(t.valueLabel.text=i.itemValueText))}},t}(U);r.b.registeredClasses.PercentSeries=Ke,r.b.registeredClasses.PercentSeriesDataItem=Ze,_.c.push({relevant:_.b.maybeXS,state:function(e,t){if(e instanceof Ke){var i=e.states.create(t);return e.labels.template.states.create(t).properties.disabled=!0,e.ticks.template.states.create(t).properties.disabled=!0,i}return null}});var $e=function(e){function t(){var t=e.call(this)||this;return t.className="PercentChartDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(G),Je=function(e){function t(){var t=e.call(this)||this;return t.className="PercentChart",t.align="none",t.valign="none",t.chartContainer.minHeight=50,t.chartContainer.minWidth=50,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.validateData=function(){e.prototype.validateData.call(this),this.feedLegend()},t.prototype.feedLegend=function(){var e=this.legend;if(e){var t=[];v.d(this.series.iterator(),(function(e){e.hiddenInLegend||v.d(e.dataItems.iterator(),(function(i){i.hiddenInLegend||(t.push(i),i.legendSettings||(i.legendSettings=e.legendSettings))}))})),e.data=t,e.dataFields.name="category"}},t.prototype.createSeries=function(){return new Ke},t.prototype.setLegend=function(t){e.prototype.setLegend.call(this,t),t&&(t.labels.template.text="{category}",t.valueLabels.template.text="{value.percent.formatNumber('#.0')}%",t.itemContainers.template.events.on("over",(function(e){var t=e.target.dataItem.dataContext;if(t.visible&&!t.isHiding){var i=t.slice;i.dispatchImmediately("over"),i.isHover=!0,i.interactions.isRealHover=!0}})),t.itemContainers.template.events.on("out",(function(e){var t=e.target.dataItem.dataContext.slice;t.dispatchImmediately("out"),t.isHover=!1})))},t}(H);r.b.registeredClasses.PercentChart=Je,r.b.registeredClasses.PercentChartDataItem=$e;var Qe=i(68),et=function(e){function t(){var t=e.call(this)||this;return t._label=new o.d,t._slice=new o.d,t.className="PieTick",t.element=t.paper.add("polyline"),t._disposers.push(t._label),t._disposers.push(t._slice),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.slice,i=this.label,n=t.dataItem.component;if(t&&t.radius>0&&i&&i.text){var r=t.dx+t.slice.dx+t.pixelX+t.ix*t.radius*t.scale,a=t.dy+t.slice.dy+t.pixelY+t.iy*t.radiusY*t.scale,o=void 0,s=void 0,l=void 0,u=void 0;if(n.alignLabels)o=i.pixelX-this.length,s=i.pixelY,l=i.pixelX,u=s,"right"==i.horizontalCenter&&(l=(o+=2*this.length)-this.length);else{var c=i.pixelRadius(t.radius);l=o=r+c*t.ix,u=s=a+c*t.iy}this.element.attr({points:[r,a,o,s,l,u]})}},Object.defineProperty(t.prototype,"slice",{get:function(){return this._slice.get()},set:function(e){this._slice.set(e,new o.c([e.events.on("transformed",this.invalidate,this),e.events.on("validated",this.invalidate,this)]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label.get()},set:function(e){this._label.set(e,e.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),t}(ne);r.b.registeredClasses.PieTick=et;var tt=function(e){function t(){var t=e.call(this)||this;return t.className="PieSeriesDataItem",t.values.radiusValue={},t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"radiusValue",{get:function(){return this.values.radiusValue.value},set:function(e){this.setValue("radiusValue",e)},enumerable:!0,configurable:!0}),t.prototype.hide=function(t,i,n,r){return e.prototype.hide.call(this,t,i,0,["value","radiusValue"])},t.prototype.show=function(t,i,n){return e.prototype.show.call(this,t,i,["value","radiusValue"])},t}(Ze),it=function(e){function t(){var t=e.call(this)||this;return t.className="PieSeries",t.alignLabels=!0,t.layout="none",t.labels.template.radius=Object(d.c)(5),t.addDisposer(t.labels.template.events.on("enabled",t.invalidate,t,!1)),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.createSlice=function(){return new Qe.a},t.prototype.createTick=function(){return new et},t.prototype.createLabel=function(){return new Be},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Pie Slice Series"))},t.prototype.createDataItem=function(){return new tt},t.prototype.initSlice=function(e){e.isMeasured=!1,e.defaultState.properties.scale=1,e.observe("scale",this.handleSliceScale,this),e.observe(["dx","dy","x","y","shiftRadius"],this.handleSliceMove,this),e.tooltipText="{category}: {value.percent.formatNumber('#.#')}% ({value.value})",e.states.create("hover").properties.scale=1.05,e.defaultState.properties.shiftRadius=0,e.togglable=!0,e.events.on("toggled",(function(e){e.target.hideTooltip(),e.target.interactions.lastHitPointer&&e.target.interactions.lastHitPointer.touch&&!e.target.isActive&&(e.target.isHover=!1)})),e.states.create("active").properties.shiftRadius=.1},t.prototype.validate=function(){this._leftItems=[],this._rightItems=[],this._currentStartAngle=this.startAngle,this._arcRect=I.k(this.startAngle,this.endAngle),this._maxRadiusPercent=0;for(var t=this.startIndex;t<this.endIndex;t++){var i=this.dataItems.getIndex(t).values.radiusValue.percent;i>this._maxRadiusPercent&&(this._maxRadiusPercent=i)}e.prototype.validate.call(this),this.alignLabels&&(this.startAngle>this.endAngle?this._rightItems.reverse():this._leftItems.reverse(),this._rightItems.sort((function(e,t){var i=(e.slice.middleAngle+360)%360,n=(t.slice.middleAngle+360)%360;return i>270&&(i-=360),n>270&&(n-=360),i<n?-1:i>n?1:0})),this._leftItems.sort((function(e,t){var i=(e.slice.middleAngle+360)%360,n=(t.slice.middleAngle+360)%360;return i<n?1:i>n?-1:0})),this.arrangeLabels(this._rightItems),this.arrangeLabels2(this._rightItems),this.arrangeLabels(this._leftItems),this.arrangeLabels2(this._leftItems))},t.prototype.validateDataElement=function(t){if(this.pixelRadius>0){!this.ignoreZeroValues||0!=t.value&&null!=t.value?t.__disabled=!1:t.__disabled=!0;var i=t.slice;if(i.radius=this.pixelRadius,g.h(t.radiusValue)&&(i.radius=this.pixelInnerRadius+(this.pixelRadius-this.pixelInnerRadius)*t.values.radiusValue.percent/this._maxRadiusPercent),i.innerRadius instanceof d.a||(i.innerRadius=this.pixelInnerRadius),i.startAngle=this._currentStartAngle,i.arc=Math.abs(t.values.value.percent)*(this.endAngle-this.startAngle)/100,!this.labels.template.disabled){var n=t.label,r=t.tick;r.slice=i,r.label=n;var a=(i.middleAngle+360)%360,o=void 0;if(this.alignLabels){var s=n.pixelRadius(i.radius),l=r.length+s;n.dx=0,n.dy=0,n.verticalCenter="middle";var u=this._arcRect;a>270||a<=90?(l+=(u.width+u.x)*this.pixelRadius,n.horizontalCenter="left",this._rightItems.push(t)):(l-=u.x*this.pixelRadius,n.horizontalCenter="right",this._leftItems.push(t),l*=-1);var c=i.radius+r.length+s;o={x:l,y:i.iy*c},n.moveTo(o)}else{var h=i.depth;g.h(h)||(h=0),n.fixPosition(i.middleAngle,i.radius,i.radiusY,0,-h)}}this._currentStartAngle+=i.arc,e.prototype.validateDataElement.call(this,t)}},Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelRadius",{get:function(){return this._pixelRadius},set:function(e){this._pixelRadius!=e&&(this._pixelRadius=e,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},set:function(e){this._pixelInnerRadius!=e&&(this._pixelInnerRadius=e,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startAngle",{get:function(){var e=this.getPropertyValue("startAngle");return g.h(e)?e:this._startAngleInternal},set:function(e){this.setPropertyValue("startAngle",I.D(e),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){var e=this.getPropertyValue("endAngle");return g.h(e)?e:this._endAngleInternal},set:function(e){this.setPropertyValue("endAngle",e,!0)},enumerable:!0,configurable:!0}),t.prototype.positionBullet=function(t){e.prototype.positionBullet.call(this,t);var i=t.dataItem.slice,n=t.locationX;g.h(n)||(n=.5);var r=t.locationY;g.h(r)||(r=1);var a=i.startAngle+i.arc*n;t.x=r*i.radius*I.g(a),t.y=r*i.radiusY*I.F(a)},t.prototype.handleSliceMove=function(e){if(!this.alignLabels){var t=e.target,i=t.dataItem;if(i){var n=i.label;n&&(n.dx=n.fdx+t.dx+t.pixelX,n.dy=n.fdy+t.dy+t.pixelY)}}},Object.defineProperty(t.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;var e=this.chart;return e?I.k(e.startAngle,e.endAngle,this.pixelRadius):I.k(this.startAngle,this.endAngle,this.pixelRadius)},enumerable:!0,configurable:!0}),t}(Ke);r.b.registeredClasses.PieSeries=it,r.b.registeredClasses.PieSeriesDataItem=tt;var nt=function(e){function t(){var t=e.call(this)||this;return t.className="PieChartDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}($e),rt=function(e){function t(){var t=e.call(this)||this;t.className="PieChart",t.innerRadius=0,t.radius=Object(d.c)(80),t.align="none",t.valign="none",t.startAngle=-90,t.endAngle=270;var i=t.seriesContainer;return i.isMeasured=!0,i.valign="middle",i.align="center",i.layout="absolute",i.width=void 0,i.height=void 0,t.chartContainer.minHeight=50,t.chartContainer.minWidth=50,t.chartContainer.events.on("maxsizechanged",t.updateRadius,t,!1),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Pie chart"))},t.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.updateRadius()},t.prototype.handleSeriesAdded=function(t){e.prototype.handleSeriesAdded.call(this,t),this._chartPixelRadius=void 0,this.updateSeriesAngles()},t.prototype.updateSeriesAngles=function(){var e=this;this.series.each((function(t){t._startAngleInternal=e.startAngle,t._endAngleInternal=e.endAngle}))},t.prototype.updateRadius=function(){var e=this.chartContainer,t=I.k(this.startAngle,this.endAngle,1),i={x:0,y:0,width:0,height:0},n=this.innerRadius;n instanceof d.a&&(i=I.k(this.startAngle,this.endAngle,n.value)),t=I.m([t,i]);var r=Math.min(e.innerWidth/t.width,e.innerHeight/t.height);g.h(r)||(r=0);var a=O.D(this.radius,r),o=O.D(this.innerRadius,r),s=(a-o)/this.series.length;a==this._chartPixelRadius&&o==this._chartPixelInnerRadius||(this._chartPixelRadius=a,this._chartPixelInnerRadius=o,v.d(v.i(this.series.iterator()),(function(e){var t=e[0],i=e[1],n=o+O.D(i.radius,a-o),r=o+O.D(i.innerRadius,a-o);g.h(n)||(n=o+s*(t+1)),g.h(r)||(r=o+s*t),i.pixelRadius=n,i.pixelInnerRadius=r})),this.seriesContainer.definedBBox={x:a*t.x,y:a*t.y,width:a*t.width,height:a*t.height},this.seriesContainer.invalidateLayout(),this.bulletsContainer.x=this.seriesContainer.x,this.bulletsContainer.y=this.seriesContainer.y)},Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),t.prototype.createSeries=function(){return new it},Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),t}(Je);r.b.registeredClasses.PieChart=rt,r.b.registeredClasses.PieChartDataItem=nt;var at=i(144),ot=function(e){function t(){var t=e.call(this)||this;return t.className="PieSeries3DDataItem",t.values.depthValue={},t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"depthValue",{get:function(){return this.values.depthValue.value},set:function(e){this.setValue("depthValue",e)},enumerable:!0,configurable:!0}),t}(tt),st=function(e){function t(){var t=e.call(this)||this;return t.className="PieSeries3D",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.createDataItem=function(){return new ot},t.prototype.createSlice=function(){return new at.a},t.prototype.validateDataElement=function(t){var i=t.slice,n=this.depth;g.h(n)||(n=this.chart.depth);var r=t.values.depthValue.percent;g.h(r)||(r=100),i.depth=r*n/100;var a=this.angle;g.h(a)||(a=this.chart.angle),i.angle=a,e.prototype.validateDataElement.call(this,t)},t.prototype.validate=function(){e.prototype.validate.call(this);for(var t=this._workingStartIndex;t<this._workingEndIndex;t++){var i=this.dataItems.getIndex(t).slice,n=i.startAngle;n>=-90&&n<90?i.toFront():n>=90&&i.toBack()}},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e)},enumerable:!0,configurable:!0}),t.prototype.positionBullet=function(t){e.prototype.positionBullet.call(this,t);var i=t.dataItem.slice;t.y=t.pixelY-i.depth},t}(it);r.b.registeredClasses.PieSeries3D=st,r.b.registeredClasses.PieSeries3DDataItem=ot;!function(e){function t(){var t=e.call(this)||this;return t.className="PieChart3DDataItem",t.applyTheme(),t}Object(n.c)(t,e)}(nt);var lt=function(e){function t(){var t=e.call(this)||this;return t.className="PieChart3D",t.depth=20,t.angle=10,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){e=I.i(e,0,90),this.setPropertyValue("angle",e)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),t.prototype.createSeries=function(){return new st},t}(rt);r.b.registeredClasses.PieChart3D=lt;var ut=function(e){function t(){var t=e.call(this)||this;return t.className="SlicedChartDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}($e),ct=function(e){function t(){var t=e.call(this)||this;return t.className="SlicedChart",t.seriesContainer.layout="horizontal",t.padding(15,15,15,15),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Sliced chart"))},t.prototype.validate=function(){e.prototype.validate.call(this)},t}(Je);r.b.registeredClasses.SlicedChart=ct,r.b.registeredClasses.SlicedChartDataItem=ut;var ht=i(70),pt=i(72),dt=function(e){function t(){var t=e.call(this)||this;return t.legendSettings=new D,t.className="FlowDiagramNode",t.isMeasured=!1,new p.a,t.draggable=!0,t.inert=!0,t.setStateOnChildren=!0,t.events.on("positionchanged",t.invalidateLinks,t,!1),t.events.on("sizechanged",t.invalidateLinks,t,!1),t}return Object(n.c)(t,e),t.prototype.handleHit=function(e){this.isHidden||this.isHiding?this.show():this.hide()},t.prototype.show=function(t){var i=e.prototype.show.call(this,t);return this.outgoingDataItems.each((function(e){(!e.toNode||e.toNode&&!e.toNode.isHidden)&&(e.setWorkingValue("value",e.getValue("value"),t),e.link.show())})),this.incomingDataItems.each((function(e){(!e.fromNode||e.fromNode&&!e.fromNode.isHidden)&&(e.setWorkingValue("value",e.getValue("value"),t),e.link.show())})),i},t.prototype.hide=function(t){var i=e.prototype.hide.call(this,t);return this.outgoingDataItems.each((function(e){e.setWorkingValue("value",0,t),e.link.hide()})),this.incomingDataItems.each((function(e){e.setWorkingValue("value",0,t),e.link.hide()})),i},t.prototype.validate=function(){this.isDisposed()||(e.prototype.validate.call(this),this.invalidateLinks())},t.prototype.invalidateLinks=function(){var e=this;this.outgoingDataItems.each((function(t){var i=t.link;if("fromNode"==i.colorMode&&(i.fill=i.dataItem.fromNode.color),"gradient"==i.colorMode){i.fill=i.gradient,i.stroke=i.gradient;var n=i.gradient.stops.getIndex(0);n&&(n.color=e.color,i.gradient.validate())}})),this.incomingDataItems.each((function(t){var i=t.link;if("toNode"==i.colorMode&&(i.fill=i.dataItem.toNode.color),"gradient"==i.colorMode){i.fill=i.gradient,i.stroke=i.gradient;var n=i.gradient.stops.getIndex(1);n&&(n.color=e.color,i.gradient.validate())}}))},Object.defineProperty(t.prototype,"incomingDataItems",{get:function(){var e=this;if(!this._incomingDataItems){var t=new s.a;t.events.on("inserted",(function(){"name"==e.chart.sortBy?e._incomingSorted=v.l(e._incomingDataItems.iterator(),(function(e,t){return ht.a(e.fromName,t.fromName)})):"value"==e.chart.sortBy?e._incomingSorted=v.l(e._incomingDataItems.iterator(),(function(e,t){return pt.b(K.a(e.value,t.value))})):e._incomingSorted=e._incomingDataItems.iterator()}),void 0,!1),this._incomingDataItems=t}return this._incomingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outgoingDataItems",{get:function(){var e=this;if(!this._outgoingDataItems){var t=new s.a;t.events.on("inserted",(function(){"name"==e.chart.sortBy?e._outgoingSorted=v.l(e._outgoingDataItems.iterator(),(function(e,t){return ht.a(e.fromName,t.fromName)})):"value"==e.chart.sortBy?e._outgoingSorted=v.l(e._outgoingDataItems.iterator(),(function(e,t){return pt.b(K.a(e.value,t.value))})):e._outgoingSorted=e._outgoingDataItems.iterator()}),void 0,!1),this._outgoingDataItems=t}return this._outgoingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(e){this.setPropertyValue("name",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this.getPropertyValue("total")},set:function(e){this.setPropertyValue("total",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalIncoming",{get:function(){return this.getPropertyValue("totalIncoming")},set:function(e){this.setPropertyValue("totalIncoming",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalOutgoing",{get:function(){return this.getPropertyValue("totalOutgoing")},set:function(e){this.setPropertyValue("totalOutgoing",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.getPropertyValue("color")},set:function(e){this.setColorProperty("color",e),this._background&&(this._background.fill=e),this.fill=e},enumerable:!0,configurable:!0}),t.prototype.createLegendMarker=function(e){var t=e.pixelWidth,i=e.pixelHeight;e.removeChildren();var n=e.createChild(S.a);n.shouldClone=!1,z.c(this,n,h.b),n.stroke=this.fill,n.copyFrom(this),n.padding(0,0,0,0),n.width=t,n.height=i;var r=e.dataItem;r.color=n.fill,r.colorOrig=n.fill},Object.defineProperty(t.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(e){this._legendDataItem=e,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),t}(l.a);r.b.registeredClasses.FlowDiagramNode=dt;var ft=i(44),mt=i(83),yt=function(e){function t(){var t=e.call(this)||this;t.className="FlowDiagramLink";var i=new p.a;return t.maskBullets=!1,t.colorMode="fromNode",t.layout="none",t.isMeasured=!1,t.startAngle=0,t.endAngle=0,t.strokeOpacity=0,t.verticalCenter="none",t.horizontalCenter="none",t.tooltipText="{fromName}\u2192{toName}:{value.value}",t.tooltipLocation=.5,t.link=t.createChild(h.a),t.link.shouldClone=!1,t.link.setElement(t.paper.add("path")),t.link.isMeasured=!1,t.fillOpacity=.2,t.fill=i.getFor("alternativeBackground"),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.positionBullets=function(){var e=this;v.d(this.bullets.iterator(),(function(t){t.parent=e.bulletsContainer,t.maxWidth=e.maxWidth,t.maxHeight=e.maxHeight,e.positionBullet(t)}))},Object.defineProperty(t.prototype,"bulletsContainer",{get:function(){if(!this._bulletsContainer){var e=this.createChild(l.a);e.shouldClone=!1,e.layout="none",this._bulletsContainer=e}return this._bulletsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bulletsMask",{get:function(){if(!this._bulletsMask){var e=this.createChild(h.a);e.shouldClone=!1,e.setElement(this.paper.add("path")),e.isMeasured=!1,this._bulletsMask=e}return this._bulletsMask},enumerable:!0,configurable:!0}),t.prototype.positionBullet=function(e){var t=e.locationX;g.h(t)||(t=e.locationY),g.h(t)||(t=.5);var i=this.middleLine.positionToPoint(t);e.moveTo(i);var n,r=e.propertyFields.rotation;e.dataItem&&(n=e.dataItem.dataContext[r]);g.h(n)||(n=i.angle),e.rotation=n},Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorMode",{get:function(){return this.getPropertyValue("colorMode")},set:function(e){if("gradient"==e){var t=this.fill;this.gradient.stops.clear(),t instanceof L.a&&(this.gradient.addColor(t),this.gradient.addColor(t)),this.fill=this.gradient,this.stroke=this.gradient}this.setPropertyValue("colorMode",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(e){this.setPropertyValue("maskBullets",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(e){this.setPropertyValue("tooltipLocation",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setFill=function(t){e.prototype.setFill.call(this,t);var i=this._gradient;i&&t instanceof L.a&&(i.stops.clear(),i.addColor(t),i.addColor(t))},t.prototype.measureElement=function(){},Object.defineProperty(t.prototype,"bullets",{get:function(){var e=this;return this._bullets||(this._bullets=new s.c(new P),this._disposers.push(new s.b(this._bullets)),this._disposers.push(this._bullets.template),this._bullets.events.on("inserted",(function(t){t.newValue.events.on("propertychanged",(function(t){"locationX"!=t.property&&"locationY"!=t.property||e.positionBullet(t.target)}),void 0,!1)}),void 0,!1)),this._bullets},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.bullets.copyFrom(t.bullets);var i=this.middleLine;i&&(i instanceof Ae.a&&t.middleLine instanceof Ae.a&&i.copyFrom(t.middleLine),i instanceof mt.a&&t.middleLine instanceof mt.a&&i.copyFrom(t.middleLine)),this.link.copyFrom(t.link)},t.prototype.getTooltipX=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).x},t.prototype.getTooltipY=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).y},Object.defineProperty(t.prototype,"gradient",{get:function(){return this._gradient||(this._gradient=new ft.a),this._gradient},enumerable:!0,configurable:!0}),t}(l.a);r.b.registeredClasses.FlowDiagramLink=yt;var vt=i(98),gt=function(e){function t(){var t=e.call(this)||this;return t.className="FlowDiagramDataItem",t.values.value={},t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"fromName",{get:function(){return this.properties.fromName},set:function(e){this.setProperty("fromName",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toName",{get:function(){return this.properties.toName},set:function(e){this.setProperty("toName",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this.properties.color},set:function(e){this.setProperty("color",Object(L.c)(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.values.value.value},set:function(e){this.setValue("value",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"link",{get:function(){var e=this;if(!this._link){var t=this.component.links.create();this._link=t,this.addSprite(t),this._disposers.push(new o.b((function(){e.component&&e.component.links.removeValue(t)})))}return this._link},enumerable:!0,configurable:!0}),t}(b),_t=function(e){function t(){var t=e.call(this)||this;t.colors=new W.a,t.className="FlowDiagram",t.nodePadding=20,t.sortBy="none",t.sequencedInterpolation=!0,t.colors.step=2,t.minNodeSize=.02;var i=t.chartContainer.createChild(l.a);i.shouldClone=!1,i.layout="none",i.isMeasured=!1,t.linksContainer=i;var n=t.chartContainer.createChild(l.a);return n.shouldClone=!1,n.layout="none",n.isMeasured=!1,t.nodesContainer=n,t.dataItem=t.createDataItem(),t.dataItem.component=t,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this.dataItem.dispose()},t.prototype.validateData=function(){var t=this;0==this._parseDataFrom&&this.nodes.clear(),this.sortNodes(),this.colors.reset(),e.prototype.validateData.call(this);var i,n,r=0,a=0;v.d(this.dataItems.iterator(),(function(e){var o=e.fromName;o&&((s=t.nodes.getKey(o))||((s=t.nodes.create(o)).name=o,s.chart=t,s.dataItem=e),e.fromNode=s,e.fromNode.outgoingDataItems.push(e));var s,l=e.toName;l&&((s=t.nodes.getKey(l))||((s=t.nodes.create(l)).name=l,s.chart=t,s.dataItem=e),e.toNode=s,e.toNode.incomingDataItems.push(e));if(!e.fromNode){var u=new vt.a;u.opacities=[0,1],e.link.strokeModifier=u}if(!e.toNode){var c=new vt.a;c.opacities=[1,0],e.link.strokeModifier=c}var h=e.value;g.h(h)&&(r+=h,a++,(i>h||!g.h(i))&&(i=h),(n<h||!g.h(n))&&(n=h))}));var o="value";this.dataItem.setCalculatedValue(o,n,"high"),this.dataItem.setCalculatedValue(o,i,"low"),this.dataItem.setCalculatedValue(o,r,"sum"),this.dataItem.setCalculatedValue(o,r/a,"average"),this.dataItem.setCalculatedValue(o,a,"count"),v.d(this.nodes.iterator(),(function(e){var i=e[1];i.fill instanceof L.a&&(i.color=i.fill),void 0==i.color&&(i.color=t.colors.next()),void 0!=i.dataItem.color&&(i.color=i.dataItem.color),i.dataItem.visible||i.hide(0),t.getNodeValue(i)})),this.sortNodes(),this.feedLegend()},t.prototype.handleDataItemWorkingValueChange=function(e,t){this.invalidate()},t.prototype.sortNodes=function(){"name"==this.sortBy?this._sorted=this.nodes.sortedIterator():"value"==this.sortBy?this._sorted=v.l(this.nodes.iterator(),(function(e,t){return pt.b(K.a(e[1].total,t[1].total))})):this._sorted=this.nodes.iterator()},t.prototype.getNodeValue=function(e){var t=0,i=0;v.d(e.incomingDataItems.iterator(),(function(e){var i=e.getWorkingValue("value");g.h(i)&&(t+=i)})),v.d(e.outgoingDataItems.iterator(),(function(e){var t=e.getWorkingValue("value");g.h(t)&&(i+=t)})),e.total=t+i,e.totalIncoming=t,e.totalOutgoing=i},t.prototype.changeSorting=function(){this.sortNodes()},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Flow diagram"))},t.prototype.createDataItem=function(){return new gt},Object.defineProperty(t.prototype,"nodePadding",{get:function(){return this.getPropertyValue("nodePadding")},set:function(e){this.setPropertyValue("nodePadding",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortBy",{get:function(){return this.getPropertyValue("sortBy")},set:function(e){this.setPropertyValue("sortBy",e),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minNodeSize",{get:function(){return this.getPropertyValue("minNodeSize")},set:function(e){this.setPropertyValue("minNodeSize",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){if(!this._nodes){var e=this.createNode();e.events.on("hit",(function(e){e.target.handleHit(e)})),this._nodes=new w.c(e),this._disposers.push(new w.b(this._nodes))}return this._nodes},enumerable:!0,configurable:!0}),t.prototype.createNode=function(){var e=new dt;return this._disposers.push(e),e},Object.defineProperty(t.prototype,"links",{get:function(){return this._links||(this._links=new s.c(this.createLink()),this._disposers.push(new s.b(this._links))),this._links},enumerable:!0,configurable:!0}),t.prototype.createLink=function(){var e=new yt;return this._disposers.push(e),e},t.prototype.feedLegend=function(){var e=this.legend;if(e){var t=[];this.nodes.each((function(e,i){t.push(i)})),e.data=t,e.dataFields.name="name"}},t.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.nodes.clear()},t}(x);r.b.registeredClasses.FlowDiagram=_t;var bt=function(e){function t(){var t=e.call(this)||this;t.className="LabelBullet";var i=t.createChild(u.a);return i.shouldClone=!1,i.verticalCenter="middle",i.horizontalCenter="middle",i.truncate=!0,i.hideOversized=!1,i.maxWidth=500,i.maxHeight=500,i.stroke=Object(L.b)(),i.strokeOpacity=0,i.fill=(new p.a).getFor("text"),t.events.on("maxsizechanged",t.handleMaxSize,t,!1),t.label=i,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.handleMaxSize=function(){this.label.maxWidth=this.maxWidth,this.label.maxHeight=this.maxHeight},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.label.copyFrom(t.label)},t}(P);r.b.registeredClasses.LabelBullet=bt;var xt=function(e){function t(){var t=e.call(this)||this;t.nextInCoord=0,t.nextOutCoord=0,t.className="SankeyNode",t.width=10,t.height=10;var i=t.createChild(bt);i.shouldClone=!1,i.locationX=1,i.locationY=.5,i.label.text="{name}",i.width=150,i.height=150,i.label.horizontalCenter="left",i.label.padding(0,5,0,5),t.nameLabel=i;var n=t.createChild(bt);n.shouldClone=!1,n.label.hideOversized=!1,n.locationX=.5,n.locationY=.5,n.width=150,n.height=150,n.label.horizontalCenter="middle",t.valueLabel=n;var r=t.hiddenState;return r.properties.fill=(new p.a).getFor("disabledBackground"),r.properties.opacity=.5,r.properties.visible=!0,t.background.hiddenState.copyFrom(r),t}return Object(n.c)(t,e),t.prototype.invalidateLinks=function(){var t=this;e.prototype.invalidateLinks.call(this),this.nextInCoord=0,this.nextOutCoord=0;var i=this.chart;if(i){var n=i.orientation;this._incomingSorted&&v.d(this._incomingSorted,(function(e){var r=e.link,a=e.getWorkingValue("value");if(g.h(a)){r.parent=t.chart.linksContainer;var o=void 0,s=void 0,l=void 0;if("horizontal"==n?(o=t.pixelX+t.dx,s=t.nextInCoord+t.pixelY+t.dy,l=0):(s=t.pixelY+t.dy,o=t.nextInCoord+t.pixelX+t.dx,l=90),r.endX=o,r.endY=s,r.startAngle=l,r.endAngle=l,r.gradient.rotation=l,r.linkWidth=a*i.valueHeight,!e.fromNode){"horizontal"==n?(r.maxWidth=200,r.startX=t.pixelX+t.dx-r.maxWidth,r.startY=r.endY):(r.maxHeight=200,r.startX=r.endX,r.startY=t.pixelY+t.dy-r.maxHeight),O.R(r.gradient),r.fill=e.toNode.color;var u=r.gradient.stops.getIndex(0);u&&("gradient"==r.colorMode&&(u.color=t.color),u.opacity=0,r.fill=r.gradient,r.stroke=r.gradient,r.gradient.validate())}t.nextInCoord+=r.linkWidth}})),this._outgoingSorted&&v.d(this._outgoingSorted,(function(e){var i=e.link;i.parent=t.chart.linksContainer;var r=e.getWorkingValue("value");if(g.h(r)){var a=void 0,o=void 0,s=void 0;if("horizontal"==n?(s=0,a=t.pixelX+t.pixelWidth+t.dx-1,o=t.nextOutCoord+t.pixelY+t.dy):(s=90,a=t.nextOutCoord+t.pixelX+t.dx,o=t.pixelY+t.pixelHeight+t.dy-1),i.startX=a,i.startY=o,i.startAngle=s,i.endAngle=s,i.gradient.rotation=s,i.linkWidth=r*t.chart.valueHeight,!e.toNode){"horizontal"==n?(i.maxWidth=200,i.endX=t.pixelX+i.maxWidth+t.dx,i.endY=i.startY):(i.maxHeight=200,i.endX=i.startX,i.endY=t.pixelY+i.maxHeight+t.dy),i.opacity=t.opacity;var l=i.gradient.stops.getIndex(1);l&&("gradient"==i.colorMode&&(l.color=t.color),l.opacity=0,i.fill=i.gradient,i.stroke=i.gradient,i.gradient.validate())}t.nextOutCoord+=i.linkWidth}}))}this.positionBullet(this.nameLabel),this.positionBullet(this.valueLabel)},t.prototype.positionBullet=function(e){e&&(e.x=this.measuredWidth*e.locationX,e.y=this.measuredHeight*e.locationY)},Object.defineProperty(t.prototype,"level",{get:function(){return this.getPropertyValue("level")},set:function(e){this.setPropertyValue("level",e,!0)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.nameLabel.copyFrom(t.nameLabel),this.valueLabel.copyFrom(t.valueLabel)},t}(dt);r.b.registeredClasses.SankeyNode=xt;var wt=i(97),kt=function(e){function t(){var t=e.call(this)||this;return t.className="SankeyLink",new p.a,t.tension=.8,t.controlPointDistance=.2,t.startAngle=0,t.endAngle=0,t.linkWidth=0,t.startX=0,t.endX=0,t.startY=0,t.endY=0,t.middleLine=t.createChild(wt.a),t.middleLine.shouldClone=!1,t.middleLine.strokeOpacity=0,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.makeBackwards=function(){void 0!=this.states.getKey("backwards")&&this.setState("backwards")},t.prototype.validate=function(){var t,i,r,a;if(e.prototype.validate.call(this),!this.isTemplate){var o=this.startX,s=this.startY,l=this.endX,u=this.endY;if(this.states.getKey("backwards")&&this.setState("default"),this.dataItem){var c=this.dataItem.component;c&&("horizontal"==c.orientation?l<o&&(o=(t=Object(n.e)([l,o],2))[0],l=t[1],s=(i=Object(n.e)([u,s],2))[0],u=i[1],this.makeBackwards()):u<s&&(s=(r=Object(n.e)([u,s],2))[0],u=r[1],o=(a=Object(n.e)([l,o],2))[0],l=a[1],this.makeBackwards()))}g.h(l)||(l=o),g.h(u)||(u=s);var h=this.startAngle,p=this.endAngle,d=this.linkWidth,m="",y=o,v=s,_=l,b=u,x=o+d*I.F(h),w=l+d*I.F(p),k=s+d*I.g(h),P=u+d*I.g(p),S=o+d/2*I.F(h),T=l+d/2*I.F(p),C=s+d/2*I.g(h),O=u+d/2*I.g(p);this.zIndex=this.zIndex||this.dataItem.index;var E=this.tension+(1-this.tension)*I.F(h),A=this.tension+(1-this.tension)*I.g(h);if(this.middleLine.tensionX=E,this.middleLine.tensionY=A,g.h(d)&&g.h(o)&&g.h(l)&&g.h(s)&&g.h(u)){I.E(y,3)==I.E(_,3)&&(_+=.01),I.E(v,3)==I.E(b,3)&&(b+=.01),I.E(x,3)==I.E(w,3)&&(w+=.01),I.E(k,3)==I.E(P,3)&&(P+=.01);var M=Math.min(x,w,y,_),D=Math.min(k,P,v,b),j=Math.max(x,w,y,_),F=Math.max(k,P,v,b);this._bbox={x:M,y:D,width:j-M,height:F-D};var L=this.controlPointDistance,R=y+(_-y)*L*I.g(h),z=v+(b-v)*L*I.F(h),V=_-(_-y)*L*I.g(p),B=b-(b-v)*L*I.F(p),N=S+(T-S)*L*I.g(h),U=C+(O-C)*L*I.F(h),W=T-(T-S)*L*I.g(p),G=O-(O-C)*L*I.F(p),H=I.j({x:R,y:z},{x:V,y:B}),X=(d/I.g(H)-d)/I.G(H)*I.g(h),Y=(d/I.F(H)-d)*I.G(H)*I.F(h),q=-X/2+x+(w-x)*L*I.g(h),Z=-Y/2+k+(P-k)*L*I.F(h),K=-X/2+w-(w-x)*L*I.g(p),$=-Y/2+P-(P-k)*L*I.F(p);this.middleLine.segments=[[{x:S,y:C},{x:N,y:U},{x:W,y:G},{x:T,y:O}]],R+=X/2,z+=Y/2,V+=X/2,B+=Y/2,m+=f.g({x:y,y:v}),m+=new Ce.c(E,A).smooth([{x:y,y:v},{x:R,y:z},{x:V,y:B},{x:_,y:b}]),m+=f.f({x:w,y:P}),m+=new Ce.c(E,A).smooth([{x:w,y:P},{x:K,y:$},{x:q,y:Z},{x:x,y:k}]),m+=f.d()}this.link.path=m,this.maskBullets&&(this.bulletsMask.path=m,this.bulletsContainer.mask=this.bulletsMask),this.positionBullets()}},Object.defineProperty(t.prototype,"startX",{get:function(){return this.getPropertyValue("startX")},set:function(e){this.setPropertyValue("startX",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endX",{get:function(){return this.getPropertyValue("endX")},set:function(e){this.setPropertyValue("endX",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startY",{get:function(){return this.getPropertyValue("startY")},set:function(e){this.setPropertyValue("startY",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endY",{get:function(){return this.getPropertyValue("endY")},set:function(e){this.setPropertyValue("endY",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkWidth",{get:function(){return this.getPropertyValue("linkWidth")},set:function(e){this.setPropertyValue("linkWidth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(e){this.setPropertyValue("controlPointDistance",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e,!0)},enumerable:!0,configurable:!0}),t}(yt);r.b.registeredClasses.SankeyLink=kt;var Pt=i(37),St=function(e){function t(){var t=e.call(this)||this;return t.className="SankeyDiagramDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(gt),Tt=function(e){function t(){var t=e.call(this)||this;return t.className="SankeyDiagram",t.orientation="horizontal",t.nodeAlign="middle",t.nodesContainer.width=Object(d.c)(100),t.nodesContainer.height=Object(d.c)(100),t.linksContainer.width=Object(d.c)(100),t.linksContainer.height=Object(d.c)(100),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.validateData=function(){var t=this;this._valueHeight=void 0,e.prototype.validateData.call(this),this._levelCount=0,this.nodes.each((function(e,t){t.level=void 0})),this.nodes.each((function(e,i){i.level=t.getNodeLevel(i,0),t._levelCount=I.B(t._levelCount,i.level)}))},t.prototype.getNodeLevel=function(e,t){var i=this,r=[t];return v.d(e.incomingDataItems.iterator(),(function(e){e.fromNode&&(g.h(e.fromNode.level)?r.push(e.fromNode.level+1):(i._counter=0,i.checkLoop(e.fromNode),i._counter<i.dataItems.length&&r.push(i.getNodeLevel(e.fromNode,t+1))))})),Math.max.apply(Math,Object(n.f)(r))},t.prototype.checkLoop=function(e){var t=this;this._counter++,this._counter>this.dataItems.length||v.d(e.incomingDataItems.iterator(),(function(e){t.checkLoop(e.fromNode)}))},t.prototype.calculateValueHeight=function(){var e=this;this._levelSum={},this._levelNodesCount={},this.maxSum=0;var t,i,n,r=this.dataItem.values.value.sum;v.d(this._sorted,(function(t){var i=t[1];e.getNodeValue(i)})),this.nodes.each((function(t,i){var n=i.level,a=Math.max(i.totalIncoming,i.totalOutgoing);a/r<e.minNodeSize&&(a=r*e.minNodeSize),g.h(e._levelSum[n])?e._levelSum[n]+=a:e._levelSum[n]=a,g.h(e._levelNodesCount[n])?e._levelNodesCount[n]++:e._levelNodesCount[n]=1})),t="horizontal"==this.orientation?this.chartContainer.maxHeight-1:this.chartContainer.maxWidth-1,z.d(this._levelSum,(function(r,a){var o=a,s=e._levelNodesCount[r],l=(t-(s-1)*e.nodePadding)/o;l==1/0&&(l=0),(n>l||!g.h(n))&&(n=l,e.maxSum=o,i=g.l(r))})),this._maxSumLevel=i;var a=this._levelNodesCount[this._maxSumLevel],o=(t-(a-1)*this.nodePadding)/this.maxSum;if(o==1/0&&(o=0),g.h(this.valueHeight)){var s=void 0;try{s=this._heightAnimation.animationOptions[0].to}catch(u){}if(s!=o){var l=this.interpolationDuration;try{l=this.nodes.template.states.getKey("active").transitionDuration}catch(u){}this._heightAnimation=new Pt.a(this,{property:"valueHeight",from:this.valueHeight,to:o},l,this.interpolationEasing).start(),this._disposers.push(this._heightAnimation)}}else this.valueHeight=o},t.prototype.validate=function(){var t=this;e.prototype.validate.call(this),this.calculateValueHeight();var i,n=this.nodesContainer,r={},a=this._levelNodesCount[this._maxSumLevel],o=this.dataItem.values.value.sum;i="horizontal"==this.orientation?this.chartContainer.maxHeight-1:this.chartContainer.maxWidth-1,v.d(this._sorted,(function(e){var s,l,u,c=e[1],h=c.level,p=0,d=t._levelNodesCount[h];switch(t.nodeAlign){case"bottom":p=(t.maxSum-t._levelSum[h])*t.valueHeight-(d-a)*t.nodePadding;break;case"middle":p=(t.maxSum-t._levelSum[h])*t.valueHeight/2-(d-a)*t.nodePadding/2}if(0==t.maxSum)switch(t.nodeAlign){case"bottom":p=i-d*(t.minNodeSize*i+t.nodePadding);break;case"middle":p=i/2-d/2*(t.minNodeSize*i+t.nodePadding)}c.parent=n;var f=Math.max(c.totalIncoming,c.totalOutgoing);if(f/o<t.minNodeSize&&(f=o*t.minNodeSize),"horizontal"==t.orientation){l=(s=(t.innerWidth-c.pixelWidth)/t._levelCount)*c.level,u=r[h]||p;var m=f*t.valueHeight;0==o&&0==m&&(m=t.minNodeSize*i),c.height=m,c.minX=l,c.maxX=l,r[h]=u+m+t.nodePadding}else{s=(t.innerHeight-c.pixelHeight)/t._levelCount,l=r[h]||p,u=s*c.level;var y=f*t.valueHeight;0==o&&0==y&&(y=t.minNodeSize*i),c.width=y,c.minY=u,c.maxY=u,r[h]=l+y+t.nodePadding}c.x=l,c.y=u}))},t.prototype.showReal=function(t){var i=this;if(!this.preventShow){if(this.interpolationDuration>0){var n=this.nodesContainer,r=0;v.d(this.links.iterator(),(function(e){e.hide(0)})),v.d(this._sorted,(function(e){var t,a=e[1];"horizontal"==i.orientation?(a.dx=-(n.pixelWidth-a.pixelWidth)/Math.max(i._levelCount,1),t="dx"):(a.dy=-(n.pixelHeight-a.pixelHeight)/Math.max(i._levelCount,1),t="dy");var o=0,s=i.interpolationDuration;i.sequencedInterpolation&&(o=i.sequencedInterpolationDelay*r+s*r/v.j(i.nodes.iterator())),a.opacity=0,a.invalidateLinks(),a.animate([{property:"opacity",from:0,to:1},{property:t,to:0}],i.interpolationDuration,i.interpolationEasing).delay(o),v.d(a.outgoingDataItems.iterator(),(function(e){var t=e.link.show(i.interpolationDuration);t&&!t.isFinished()&&t.delay(o)})),v.d(a.incomingDataItems.iterator(),(function(e){if(!e.fromNode){var t=e.link.show(i.interpolationDuration);t&&!t.isFinished()&&t.delay(o)}})),r++}))}return e.prototype.showReal.call(this)}},t.prototype.changeSorting=function(){var e=this;this.sortNodes();var t={};v.d(this._sorted,(function(i){var n,r,a=i[1],o=a.level,s=(e.maxSum-e._levelSum[o])*e.valueHeight/2;"horizontal"==e.orientation?(n="y",r=a.pixelHeight):(n="x",r=a.pixelWidth),a.animate({property:n,to:t[o]||s},e.interpolationDuration,e.interpolationEasing),t[o]=(t[o]||s)+r+e.nodePadding,a.invalidateLinks()}))},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Sankey diagram"))},t.prototype.createDataItem=function(){return new St},Object.defineProperty(t.prototype,"nodeAlign",{get:function(){return this.getPropertyValue("nodeAlign")},set:function(e){this.setPropertyValue("nodeAlign",e),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e,!0);var t=this.nodes.template.nameLabel;"vertical"==e?(this.nodes.template.width=void 0,t.label.horizontalCenter="middle",t.locationX=.5):(this.nodes.template.height=void 0,t.label.horizontalCenter="left",t.locationX=1)},enumerable:!0,configurable:!0}),t.prototype.createNode=function(){var e=new xt;return this._disposers.push(e),e},t.prototype.createLink=function(){var e=new kt;return this._disposers.push(e),e},Object.defineProperty(t.prototype,"valueHeight",{get:function(){return this._valueHeight},set:function(e){e!=this._valueHeight&&(this._valueHeight=e,this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.disposeData=function(){e.prototype.disposeData.call(this),this._sorted=this.nodes.iterator()},t}(_t);r.b.registeredClasses.SankeyDiagram=Tt;var Ct=function(e){function t(){var t=e.call(this)||this;t.className="ChordNode";var i=t.createChild(Be);i.location=.5,i.radius=5,i.text="{name}",i.zIndex=1,i.shouldClone=!1,t.label=i,t.layout="none",t.events.on("positionchanged",t.updateRotation,t,!1),t.isMeasured=!1,t.slice=t.createChild(Qe.a),t.slice.isMeasured=!1;var n=t.hiddenState;return n.properties.fill=(new p.a).getFor("disabledBackground"),n.properties.opacity=.5,n.properties.visible=!0,t.setStateOnChildren=!1,t.slice.hiddenState.properties.visible=!0,t.adapter.add("tooltipX",(function(e,t){return t.slice.ix*(t.slice.radius-(t.slice.radius-t.slice.pixelInnerRadius)/2)})),t.adapter.add("tooltipY",(function(e,t){return t.slice.iy*(t.slice.radius-(t.slice.radius-t.slice.pixelInnerRadius)/2)})),t}return Object(n.c)(t,e),t.prototype.invalidateLinks=function(){var t=this;e.prototype.invalidateLinks.call(this);var i=this.label,n=this.slice,r=this.chart;if(r&&n){var a=this.total,o=n.arc,s=n.startAngle;this.children.each((function(e){if(e instanceof P){var t=e.locationX;g.h(t)||(t=.5);var i=e.locationY;g.h(i)||(i=1);var r=s+o*t,a=i*n.radius;e.x=a*I.g(r),e.y=a*I.F(r)}}));var l=s+o*i.location,u=s+(1-a/this.adjustedTotal)*o*.5;g.g(u)&&(u=s),i.fixPosition(l,n.radius),this.nextAngle=u,this._outgoingSorted&&v.d(this._outgoingSorted,(function(e){var i=e.link;i.parent=t.chart.linksContainer;var a=e.getWorkingValue("value");if(g.h(a)){if(r.nonRibbon){var l=i.percentWidth;g.h(l)||(l=5),l/=100,i.startAngle=s+o/2-o/2*l,i.arc=o*l}else i.arc=a*r.valueAngle,i.startAngle=t.nextAngle,t.nextAngle+=i.arc;e.toNode||(i.endAngle=i.startAngle),i.radius=n.pixelInnerRadius}})),this._incomingSorted&&v.d(this._incomingSorted,(function(e){var i=e.link;if(i.radius=n.pixelInnerRadius,r.nonRibbon){var a=i.percentWidth;g.h(a)||(a=5),a/=100,i.endAngle=s+o/2-o/2*a,i.arc=o*a}else{i.endAngle=t.nextAngle;var l=e.getWorkingValue("value");g.h(l)&&(i.arc=l*r.valueAngle,t.nextAngle+=i.arc)}e.fromNode||(i.startAngle=i.endAngle)}))}},t.prototype.updateRotation=function(){var e=this.slice,t=this.trueStartAngle+e.arc/2,i=e.radius,n=i*I.g(t),r=i*I.F(t),a=I.j({x:n+this.pixelX,y:r+this.pixelY});e.startAngle=this.trueStartAngle+(a-t),this.dx=-this.pixelX,this.dy=-this.pixelY},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.label.copyFrom(t.label),this.slice.copyFrom(t.slice)},t}(dt);r.b.registeredClasses.ChordNode=Ct;var Ot=function(e){function t(){var t=e.call(this)||this;return t.className="QuadraticCurve",t.element=t.paper.add("path"),t.pixelPerfect=!1,t.fill=Object(L.b)(),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){if(g.h(this.x1+this.x2+this.y1+this.y2+this.cpx+this.cpy)){var e={x:this.x1,y:this.y1},t={x:this.x2,y:this.y2},i={x:this.cpx,y:this.cpy},n=f.g(e)+f.i(t,i);this.path=n}},Object.defineProperty(t.prototype,"cpx",{get:function(){return this.getPropertyValue("cpx")},set:function(e){this.setPropertyValue("cpx",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cpy",{get:function(){return this.getPropertyValue("cpy")},set:function(e){this.setPropertyValue("cpy",e,!0)},enumerable:!0,configurable:!0}),t.prototype.positionToPoint=function(e){var t={x:this.x1,y:this.y1},i={x:this.cpx,y:this.cpy},n={x:this.x2,y:this.y2},r=I.u(t,n,i,e),a=I.u(t,n,i,e+.001);return{x:r.x,y:r.y,angle:I.j(r,a)}},t}(Ae.a),It=function(e){function t(){var t=e.call(this)||this;return t.className="ChordLink",t.middleLine=t.createChild(Ot),t.middleLine.shouldClone=!1,t.middleLine.strokeOpacity=0,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.validate=function(){if(e.prototype.validate.call(this),!this.isTemplate){var t=this.startAngle,i=this.endAngle,n=this.arc,r=this.radius,a=this.dataItem.fromNode,o=this.dataItem.toNode,s=0,l=0;a&&(s=a.pixelX+a.dx,l=a.pixelY+a.dy);var u=0,c=0;if(o&&(u=o.pixelX+o.dx,c=o.pixelY+o.dy),r>0){var h=r*I.g(t)+s,p=r*I.F(t)+l,d=r*I.g(i)+u,m=r*I.F(i)+c,y={x:0,y:0},v=f.g({x:h,y:p});v+=f.b(t,n,r),v+=f.i({x:d,y:m},y),v+=f.b(i,n,r),v+=f.i({x:h,y:p},y),this.link.path=n>0?v:"",this.maskBullets&&(this.bulletsMask.path=v,this.bulletsContainer.mask=this.bulletsMask);var g=t+n/2,_=i+n/2,b=this.middleLine;b.x1=r*I.g(g)+s,b.y1=r*I.F(g)+l,b.x2=r*I.g(_)+u,b.y2=r*I.F(_)+c,b.cpx=0,b.cpy=0,b.stroke=this.fill,this.positionBullets()}}},Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPropertyValue("radius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(e){this.setPropertyValue("arc",e,!0)},enumerable:!0,configurable:!0}),t}(yt);r.b.registeredClasses.ChordLink=It;var Et=function(e){function t(){var t=e.call(this)||this;return t.className="ChordDiagramDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(gt),At=function(e){function t(){var t=e.call(this)||this;t.valueAngle=0,t.className="ChordDiagram",t.startAngle=-90,t.endAngle=270,t.radius=Object(d.c)(80),t.innerRadius=-15,t.nodePadding=5;var i=t.chartContainer.createChild(l.a);return i.align="center",i.valign="middle",i.shouldClone=!1,i.layout="absolute",t.chordContainer=i,t.nodesContainer.parent=i,t.linksContainer.parent=i,t.chartContainer.events.on("maxsizechanged",t.invalidate,t,!1),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.validate=function(){var t=this,i=this.chartContainer,n=this.endAngle,r=this.startAngle+this.nodePadding/2,a=I.k(this.startAngle,this.endAngle,1);a=I.m([a,{x:0,y:0,width:0,height:0}]);var o=Math.min(i.innerWidth/a.width,i.innerHeight/a.height);g.h(o)||(o=0);var s=O.D(this.radius,o),l=O.D(this.innerRadius,s,!0),u=this.dataItem.values.value.sum,c=0,h=0;v.d(this._sorted,(function(e){var i=e[1];t.getNodeValue(i),c++;var n=i.total;i.total/u<t.minNodeSize&&(n=u*t.minNodeSize),h+=n})),this.valueAngle=(n-this.startAngle-this.nodePadding*c)/h,v.d(this._sorted,(function(e){var i=e[1],a=i.slice;a.radius=s,a.innerRadius=l;var o,h=i.total;i.total/u<t.minNodeSize&&(h=u*t.minNodeSize),i.adjustedTotal=h,o=t.nonRibbon?(n-t.startAngle)/c-t.nodePadding:t.valueAngle*h,a.arc=o,a.startAngle=r,i.trueStartAngle=r,i.parent=t.nodesContainer,i.validate(),r+=o+t.nodePadding})),this.chordContainer.definedBBox={x:s*a.x,y:s*a.y,width:s*a.width,height:s*a.height},this.chordContainer.invalidateLayout(),e.prototype.validate.call(this)},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Chord diagram"))},t.prototype.createDataItem=function(){return new Et},Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonRibbon",{get:function(){return this.getPropertyValue("nonRibbon")},set:function(e){this.setPropertyValue("nonRibbon",e,!0),this.links.template.middleLine.strokeOpacity=1,this.links.template.link.fillOpacity=0},enumerable:!0,configurable:!0}),t.prototype.createNode=function(){var e=new Ct;return this._disposers.push(e),e},t.prototype.createLink=function(){var e=new It;return this._disposers.push(e),e},t}(_t);r.b.registeredClasses.ChordDiagram=At;var Mt=function(e){function t(){var t=e.call(this)||this;return t.className="Column",t.width=Object(d.c)(80),t.height=Object(d.c)(80),t.events.disableType("transformed"),t.applyOnClones=!0,t.strokeOpacity=1,t.layout="none",t.createAssets(),t.events.on("childadded",t.handleKidAdded,t,!1),t}return Object(n.c)(t,e),t.prototype.handleKidAdded=function(){"none"==this.layout&&(this.layout="absolute")},t.prototype.createAssets=function(){this.column=this.createChild(S.a),this.column.shouldClone=!1,this.column.isMeasured=!1,this.column.cornerRadius(0,0,0,0),this._disposers.push(this.column)},t.prototype.validate=function(){e.prototype.validate.call(this);var t=this.column;t&&(t.width=I.C(this.pixelWidth,this.maxWidth),t.height=I.C(this.pixelHeight,this.maxHeight),t.invalid&&t.validate())},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.column&&this.column.copyFrom(t.column)},Object.defineProperty(t.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.column?{x:0,y:0,width:this.column.measuredWidth,height:this.column.measuredHeight}:{x:0,y:0,width:I.C(this.pixelWidth,this.maxWidth),height:I.C(this.pixelHeight,this.maxHeight)}},enumerable:!0,configurable:!0}),t}(l.a);r.b.registeredClasses.Column=Mt;var Dt=function(e){function t(){var t=e.call(this)||this;return t.className="ColumnSeriesDataItem",t.locations.dateX=.5,t.locations.dateY=.5,t.locations.categoryX=.5,t.locations.categoryY=.5,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"column",{get:function(){return this._column},set:function(e){this.setColumn(e)},enumerable:!0,configurable:!0}),t.prototype.setColumn=function(e){var t=this;if(this._column&&e!=this._column&&V.o(this.sprites,this._column),this._column=e,e){var i=e.dataItem;i&&i!=this&&(i.column=void 0),this.addSprite(e),this._disposers.push(new o.b((function(){t.component&&t.component.columns.removeValue(e)})))}},Object.defineProperty(t.prototype,"width",{get:function(){var e=this.properties.width;return this._adapterO&&(e=this._adapterO.apply("width",e)),e},set:function(e){this.properties.width!=e&&(this.properties.width=e,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var e=this.properties.height;return this._adapterO&&(e=this._adapterO.apply("height",e)),e},set:function(e){this.properties.height!=e&&(this.properties.height=e,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangesColumns",{get:function(){return this._rangesColumns||(this._rangesColumns=new w.a),this._rangesColumns},enumerable:!0,configurable:!0}),t}(be),jt=function(e){function t(){var t=e.call(this)||this;t._startLocation=0,t._endLocation=1,t.className="ColumnSeries",t.width=Object(d.c)(100),t.height=Object(d.c)(100),t.strokeOpacity=0,t.fillOpacity=1,t.clustered=!0;var i=t.mainContainer.createChild(l.a);return i.shouldClone=!1,i.isMeasured=!1,i.layout="none",t._columnsContainer=i,t.columns.template.pixelPerfect=!1,t.tooltipColorSource=t.columns.template,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"columnsContainer",{get:function(){return this._columnsContainer},enumerable:!0,configurable:!0}),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Column Series"))},t.prototype.createDataItem=function(){return new Dt},t.prototype.validate=function(){var i=this;if(this.group.node.removeAttribute("fill"),this.chart&&this.xAxis&&this.yAxis){var n,r=this.chart.series,a=0,o=0,s=[];v.d(r.iterator(),(function(e){var n;e instanceof t&&(i.baseAxis==e.baseAxis&&(n=i.baseAxis==i.xAxis?i.chart.yAxes.indexOf(e.yAxis):i.chart.xAxes.indexOf(e.xAxis),s.push({series:e,axis:n})))})),s.sort((function(e,t){return e.axis-t.axis})),V.d(s,(function(e){var r=e.series;r instanceof t&&((!r.stacked&&r.clustered||n!=e.axis&&r.clustered)&&a++,r==i&&(o=a-1)),n=e.axis})),this.clustered||(o=0,a=1);var l=this.baseAxis.renderer,u=l.cellStartLocation,c=l.cellEndLocation;this._startLocation=u+o/a*(c-u),this._endLocation=u+(o+1)/a*(c-u);var h=this.xAxis,p=this.yAxis;h instanceof _e&&p instanceof he&&h.sortBySeries==this&&this.sortCategoryAxis(h,"valueY"),p instanceof _e&&h instanceof he&&p.sortBySeries==this&&this.sortCategoryAxis(p,"valueX")}e.prototype.validate.call(this);for(var d=0;d<this.startIndex;d++){var f=this.dataItems.getIndex(d);this.disableUnusedColumns(f)}for(d=this.dataItems.length-1;d>this.endIndex;d--){f=this.dataItems.getIndex(d);this.disableUnusedColumns(f)}this._propertiesChanged=!1},t.prototype.sortCategoryAxis=function(e,t){var i=this;this.dataItems.values.sort((function(e,i){return i.values[t].workingValue-e.values[t].workingValue}));var n=0;this.dataItems.each((function(e){e._index=n,n++})),e.dataItems.each((function(e){var t=e.component,n=t.categoryToPosition(e.category)-e.deltaPosition,r=t.getSeriesDataItemByCategory(e.category,i);if(r){var a=i.dataItems.indexOf(r);e._index=a;var o=I.E((a+.5)/i.dataItems.length-n,3);e.deltaAnimation&&!e.deltaAnimation.isDisposed()&&e.deltaAnimation.animationOptions[0].to==o||o!=I.E(e.deltaPosition,3)&&(e.deltaAnimation&&e.deltaAnimation.stop(),e.deltaAnimation=e.animate({property:"deltaPosition",from:-o,to:0},t.interpolationDuration,t.interpolationEasing),i._disposers.push(e.deltaAnimation))}})),e.dataItems.values.sort((function(e,t){return e.index-t.index}))},t.prototype.validateDataElement=function(t){this.chart&&this.xAxis&&this.yAxis&&(this.validateDataElementReal(t),e.prototype.validateDataElement.call(this,t))},t.prototype.getStartLocation=function(e){var t=this._startLocation;return this.baseAxis==this.xAxis?t+=e.locations[this.xOpenField]-.5:t+=e.locations[this.yOpenField]-.5,t},t.prototype.getEndLocation=function(e){var t=this._endLocation;return this.baseAxis==this.xAxis?t+=e.locations[this.xField]-.5:t+=e.locations[this.yField]-.5,t},t.prototype.validateDataElementReal=function(e){var t,i,n,r,a=this,o=this.getStartLocation(e),s=this.getEndLocation(e),l=this.xField,u=this.xOpenField,c=this.yField,p=this.yOpenField,f=this.columns.template,m=f.percentWidth,y=f.percentHeight,_=f.pixelWidth,b=f.pixelHeight,x=f.maxWidth,w=f.maxHeight,k=f.pixelPaddingLeft,P=f.pixelPaddingRight,S=f.pixelPaddingTop,T=f.pixelPaddingBottom,C=!1,O=e.width;g.d(O)&&(g.h(O)&&(_=O),O instanceof d.a&&(m=100*O.value));var E=e.height;if(g.d(E)&&(g.h(E)&&(b=E),E instanceof d.a&&(y=100*E.value)),this.xAxis instanceof _e&&this.yAxis instanceof _e){if(!e.hasValue(this._xValueFields)||!e.hasValue(this._yValueFields))return;if(o=0,s=1,!g.g(m))o+=j=I.E((s-o)*(1-m/100)/2,5),s-=j;if(t=this.xAxis.getX(e,u,o),i=this.xAxis.getX(e,l,s),g.g(m))t+=j=(i-t-_)/2,i-=j;if(!g.g(x)&&x<Math.abs(i-t))t+=j=(i-t-x)/2,i-=j;if(o=0,s=1,!g.g(y))o+=j=I.E((1-y/100)/2,5),s-=j;if(n=this.yAxis.getY(e,p,o),r=this.yAxis.getY(e,c,s),g.g(y))r+=j=(r-n-b)/2,n-=j;if(!g.g(w)&&w<Math.abs(r-n))r+=j=(r-n-w)/2,n-=j;i=this.fixHorizontalCoordinate(i),t=this.fixHorizontalCoordinate(t),n=this.fixVerticalCoordinate(n),r=this.fixVerticalCoordinate(r)}else if(this.baseAxis==this.xAxis){if(!e.hasValue(this._yValueFields))return;if(!g.g(m))o+=j=I.E((s-o)*(1-m/100)/2,5),s-=j;if(t=this.xAxis.getX(e,u,o),i=this.xAxis.getX(e,l,s),g.g(m))t+=j=(i-t-_)/2,i-=j;if(!g.g(x)&&x<Math.abs(i-t))t+=j=(i-t-x)/2,i-=j;var A=e.locations[p],M=e.locations[c];this.yAxis instanceof he&&this.dataFields[this.yField]!=this.dataFields[this.yOpenField]&&(A=0,M=0),r=this.yAxis.getY(e,p,A),n=this.yAxis.getY(e,c,M);var D=Math.ceil(this.yAxis.axisLength);(n<0&&r<0||n>D&&r>D)&&(C=!0),n=this.fixVerticalCoordinate(n),r=this.fixVerticalCoordinate(r),Math.abs(i-t)-k-P==0&&(C=!0)}else{if(!e.hasValue(this._xValueFields))return;var j;if(!g.g(y))o+=j=I.E((s-o)*(1-y/100)/2,5),s-=j;if(n=this.yAxis.getY(e,p,o),r=this.yAxis.getY(e,c,s),g.g(y))r-=j=(r-n-b)/2,n+=j;if(!g.g(w)&&w<Math.abs(r-n))r-=j=(r-n-w)/2,n+=j;var F=e.locations[l],L=e.locations[u];this.xAxis instanceof he&&this.dataFields[this.xField]!=this.dataFields[this.xOpenField]&&(F=0,L=0),i=this.xAxis.getX(e,l,F),t=this.xAxis.getX(e,u,L);D=Math.ceil(this.xAxis.axisLength);(i<0&&t<0||i>D&&t>D)&&(C=!0),i=this.fixHorizontalCoordinate(i),t=this.fixHorizontalCoordinate(t),Math.abs(n-r)-S-T==0&&(C=!0)}var R,B=Math.abs(i-t),N=Math.abs(r-n),U=Math.min(t,i),W=Math.min(n,r);C?this.disableUnusedColumns(e):(e.column?(R=e.column,this._propertiesChanged&&(z.c(this,R,h.b),z.c(this.columns.template,R,h.b),V.d(h.b,(function(e){R[e]=R[e]})))):(R=this.columns.create(),z.c(this,R,h.b),z.c(this.columns.template,R,h.b),e.addSprite(R),e.column=R,R.paper=this.paper,this.itemsFocusable()?(g.d(this.role)||(this.role="menu"),g.d(R.role)||(R.role="menuitem"),R.focusable=!0):(g.d(this.role)||(this.role="list"),g.d(R.role)||(R.role="listitem"),R.focusable=!1),R.focusable&&(R.events.on("focus",(function(t){R.readerTitle=a.populateString(a.itemReaderText,e)}),void 0,!1),R.events.on("blur",(function(e){R.readerTitle=""}),void 0,!1)),R.hoverable&&(R.events.on("over",(function(t){R.readerTitle=a.populateString(a.itemReaderText,e)}),void 0,!1),R.events.on("out",(function(e){R.readerTitle=""}),void 0,!1)),R.parent=this.columnsContainer,R.virtualParent=this),R.width=B,R.height=N,R.x=U,R.y=W,R.realX=t,R.realY=n,R.realWidth=i-t,R.realHeight=r-n,this.setColumnStates(R),R.invalid&&R.validate(),R.__disabled=!1,v.d(this.axisRanges.iterator(),(function(t){var i=e.rangesColumns.getKey(t.uid);i||(i=a.columns.create(),z.c(t.contents,i,h.b),e.addSprite(i),e.rangesColumns.setKey(t.uid,i),i.paper=a.paper),i.parent=t.contents,i.width=B,i.height=N,i.x=U,i.y=W,a.setColumnStates(i),i.invalid&&i.validate(),i.__disabled=!1})));e.itemWidth=B,e.itemHeight=N},t.prototype.disableUnusedColumns=function(e){e&&(e.column&&(e.column.width=0,e.column.height=0,e.column.__disabled=!0),v.d(this.axisRanges.iterator(),(function(t){var i=e.rangesColumns.getKey(t.uid);i&&(i.width=0,i.height=0,i.__disabled=!0)})))},t.prototype.setColumnStates=function(e){if(this._dropFromOpenState||this._dropFromPreviousState||this._riseFromOpenState||this._riseFromPreviousState){var t=e.dataItem;if(this.xAxis instanceof he||this.yAxis instanceof he){var i,n=void 0,r=void 0;this.baseAxis==this.yAxis?(this.xOpenField&&this.xField&&this.xAxis instanceof he&&(i=t.getValue(this.xOpenField),n=t.getValue(this.xField)),r=t.getValue(this.xAxis.axisFieldName+"X","previousChange")):(this.yOpenField&&this.yField&&this.yAxis instanceof he&&(i=t.getValue(this.yOpenField),n=t.getValue(this.yField)),r=t.getValue(this.yAxis.axisFieldName+"Y","previousChange")),n<i?(t.droppedFromOpen=!0,e.defaultState.copyFrom(this._dropFromOpenState),e.setState(this._dropFromOpenState,0)):(t.droppedFromOpen=!1,e.defaultState.copyFrom(this._riseFromOpenState),e.setState(this._riseFromOpenState,0)),r<0?(t.droppedFromPrevious=!0,e.defaultState.copyFrom(this._dropFromPreviousState),e.setState(this._dropFromPreviousState,0)):(t.droppedFromPrevious=!1,e.defaultState.copyFrom(this._riseFromPreviousState),e.setState(this._riseFromPreviousState,0))}}},Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns||(this._columns=new s.c(this.createColumnTemplate()),this._disposers.push(new s.b(this._columns)),this._disposers.push(this._columns.template)),this._columns},enumerable:!0,configurable:!0}),t.prototype.createColumnTemplate=function(){return new Mt},Object.defineProperty(t.prototype,"clustered",{get:function(){return this.getPropertyValue("clustered")},set:function(e){this.setPropertyValue("clustered",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropFromOpenState",{get:function(){return this._dropFromOpenState||(this._dropFromOpenState=this.states.create("dropFromOpenState")),this._dropFromOpenState},set:function(e){this._dropFromOpenState=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropFromPreviousState",{get:function(){return this._dropFromPreviousState||(this._dropFromPreviousState=this.states.create("dropFromPreviousState")),this._dropFromPreviousState},set:function(e){this._dropFromPreviousState=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"riseFromOpenState",{get:function(){return this._riseFromOpenState||(this._riseFromOpenState=this.states.create("riseFromOpenState")),this._riseFromOpenState},set:function(e){this._riseFromOpenState=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"riseFromPreviousState",{get:function(){return this._riseFromPreviousState||(this._riseFromPreviousState=this.states.create("riseFromPreviousState")),this._riseFromPreviousState},set:function(e){this._riseFromPreviousState=e},enumerable:!0,configurable:!0}),t.prototype.updateLegendValue=function(t,i){var n=this;if(e.prototype.updateLegendValue.call(this,t,i),this.legendDataItem){var r,a,o=this.legendDataItem.marker;t&&(r=t.droppedFromOpen?this._dropFromOpenState:this._riseFromOpenState,a=t.droppedFromPrevious?this._dropFromPreviousState:this._riseFromPreviousState),v.d(o.children.iterator(),(function(e){t?(e.setState(a),e.setState(r)):(e.setState(n._riseFromPreviousState),e.setState(n._riseFromOpenState))}))}},t.prototype.createLegendMarker=function(e){var t=e.pixelWidth,i=e.pixelHeight;e.removeChildren();var n=e.createChild(S.a);n.shouldClone=!1,z.c(this,n,h.b),n.copyFrom(this.columns.template),n.padding(0,0,0,0),n.width=t,n.height=i;var r=e.dataItem;r.color=this.fill,r.colorOrig=this.fill},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.columns.template.copyFrom(t.columns.template)},t.prototype.getBulletLocationX=function(t,i){if(this.baseAxis==this.xAxis){var n=t.locationX;g.h(n)||(n=.5);var r=this.getEndLocation(t.dataItem);return r-(r-this.getStartLocation(t.dataItem))*n}return e.prototype.getBulletLocationX.call(this,t,i)},t.prototype.getBulletLocationY=function(t,i){if(this.baseAxis==this.yAxis){var n=t.locationY;g.h(n)||(n=.5);var r=this.getEndLocation(t.dataItem);return r-(r-this.getStartLocation(t.dataItem))*n}return e.prototype.getBulletLocationY.call(this,t,i)},t.prototype.getAdjustedXLocation=function(e,t,i){return g.h(i)||(i=e?e.locations[t]:.5),this._endLocation-(this._endLocation-this._startLocation)*(1-i)},t.prototype.getAdjustedYLocation=function(e,t,i){return g.h(i)||(i=e?e.locations[t]:.5),this._endLocation-(this._endLocation-this._startLocation)*i},t.prototype.fixVerticalCoordinate=function(e){var t=this.columns.template.pixelPaddingBottom,i=-this.columns.template.pixelPaddingTop,n=this.yAxis.axisLength+t;return I.i(e,i,n)},t.prototype.fixHorizontalCoordinate=function(e){var t=this.columns.template.pixelPaddingLeft,i=this.columns.template.pixelPaddingRight,n=-t,r=this.xAxis.axisLength+i;return I.i(e,n,r)},t.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.columns.clear()},t}(xe);r.b.registeredClasses.ColumnSeries=jt,r.b.registeredClasses.ColumnSeriesDataItem=Dt;var Ft=function(e){function t(){var t=e.call(this)||this;return t.className="TreeMapSeriesDataItem",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"parentName",{get:function(){var e=this.treeMapDataItem;if(e&&e.parent)return e.parent.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var e=this.treeMapDataItem;if(e)return e.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"treeMapDataItem",{get:function(){return this._dataContext},enumerable:!0,configurable:!0}),t.prototype.hide=function(t,i,n,r){var a=this.treeMapDataItem;return a&&a.hide(t),e.prototype.hide.call(this,t,i,n,r)},t.prototype.show=function(t,i,n){var r=this.treeMapDataItem;return r&&r.show(t,i,n),e.prototype.show.call(this,t,i,n)},t}(Dt),Lt=function(e){function t(){var t=e.call(this)||this;t.className="TreeMapSeries",t.applyTheme(),t.fillOpacity=1,t.strokeOpacity=1,t.minBulletDistance=0,t.columns.template.tooltipText="{parentName} {name}: {value}",t.columns.template.configField="config";var i=new p.a;return t.stroke=i.getFor("background"),t.dataFields.openValueX="x0",t.dataFields.valueX="x1",t.dataFields.openValueY="y0",t.dataFields.valueY="y1",t.sequencedInterpolation=!1,t.showOnInit=!1,t.columns.template.pixelPerfect=!1,t}return Object(n.c)(t,e),t.prototype.processDataItem=function(t,i){i.seriesDataItem=t,e.prototype.processDataItem.call(this,t,i)},t.prototype.createDataItem=function(){return new Ft},t.prototype.show=function(t){if(!this.preventShow){var i=this.defaultState.transitionDuration;return g.h(t)&&(i=t),this.dataItems.each((function(e){e.show(t)})),e.prototype.showReal.call(this,i)}},t.prototype.hide=function(t){var i=this.defaultState.transitionDuration;g.h(t)&&(i=t);var n=e.prototype.hideReal.call(this,i);return this.dataItems.each((function(e){e.hide(t)})),n},t.prototype.processValues=function(){},t.prototype.getStartLocation=function(e){return 0},t.prototype.getEndLocation=function(e){return 1},t.prototype.dataChangeUpdate=function(){},t.prototype.processConfig=function(t){t&&(g.d(t.dataFields)&&g.i(t.dataFields)||(t.dataFields={})),e.prototype.processConfig.call(this,t)},t.prototype.createLegendMarker=function(e){var t=e.pixelWidth,i=e.pixelHeight;e.removeChildren();var n=e.createChild(S.a);n.shouldClone=!1,z.c(this,n,h.b),n.padding(0,0,0,0),n.width=t,n.height=i;var r=e.dataItem;r.color=n.fill,r.colorOrig=n.fill},t.prototype.disableUnusedColumns=function(t){e.prototype.disableUnusedColumns.call(this,t),t.column&&(t.column.__disabled=!1)},t}(jt);r.b.registeredClasses.TreeMapSeries=Lt,r.b.registeredClasses.TreeMapSeriesDataItem=Ft;var Rt=function(e){function t(){var t=e.call(this)||this;return t.rows=[],t.className="TreeMapDataItem",t.values.value={workingValue:0},t.values.x0={},t.values.y0={},t.values.x1={},t.values.y1={},t.hasChildren.children=!0,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(e){this._legendDataItem=e,e.label&&(e.label.dataItem=this),e.valueLabel&&(e.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),t.prototype.getDuration=function(){return 0},Object.defineProperty(t.prototype,"value",{get:function(){var e=0;return this.children&&0!=this.children.length?v.d(this.children.iterator(),(function(t){var i=t.value;g.h(i)&&(e+=i)})):e=this.values.value.workingValue,e},set:function(e){this.setValue("value",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"percent",{get:function(){return this.parent?this.value/this.parent.value*100:100},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x0",{get:function(){return this.values.x0.value},set:function(e){this.setValue("x0",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x1",{get:function(){return this.values.x1.value},set:function(e){this.setValue("x1",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y0",{get:function(){return this.values.y0.value},set:function(e){this.setValue("y0",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this.values.y1.value},set:function(e){this.setValue("y1",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.properties.name},set:function(e){this.setProperty("name",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.properties.children},set:function(e){this.setProperty("children",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.parent?this.parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){var e=this.properties.color;return void 0==e&&this.parent&&(e=this.parent.color),void 0==e&&this.component&&(e=this.component.colors.getIndex(this.component.colors.step*this.index)),e},set:function(e){this.setProperty("color",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this.color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},set:function(e){e!=this._series&&(this._series&&(this.component.series.removeValue(this._series),this._series.dispose()),this._series=e,this._disposers.push(e))},enumerable:!0,configurable:!0}),t.prototype.hide=function(t,i,n,r){this.setWorkingValue("value",0),this.children&&this.children.each((function(e){e.hide(t,i,n,r)}));var a=this.seriesDataItem;return a&&a.bullets.each((function(e,t){t.hide(),t.preventShow=!0})),e.prototype.hide.call(this,t,i,n,r)},t.prototype.show=function(t,i,n){this.setWorkingValue("value",this.values.value.value),this.children&&this.children.each((function(e){e.show(t,i,n)}));var r=this.seriesDataItem;return r&&r.bullets.each((function(e,t){t.preventShow=!1})),e.prototype.show.call(this,t,i,n)},t}(Se),zt=function(e){function t(){var t=e.call(this)||this;t.layoutAlgorithm=t.squarify,t.zoomable=!0,t.className="TreeMap",t._usesData=!0,t.maxLevels=2,t.currentLevel=0,t.hideParentColumns=!1,t.colors=new W.a,t.sorting="descending";var i=t.xAxes.push(new he);i.title.disabled=!0,i.strictMinMax=!0;var n=i.renderer;n.inside=!0,n.labels.template.disabled=!0,n.ticks.template.disabled=!0,n.grid.template.disabled=!0,n.axisFills.template.disabled=!0,n.minGridDistance=100,n.line.disabled=!0,n.baseGrid.disabled=!0;var r=t.yAxes.push(new he);r.title.disabled=!0,r.strictMinMax=!0;var a=r.renderer;a.inside=!0,a.labels.template.disabled=!0,a.ticks.template.disabled=!0,a.grid.template.disabled=!0,a.axisFills.template.disabled=!0,a.minGridDistance=100,a.line.disabled=!0,a.baseGrid.disabled=!0,a.inversed=!0,t.xAxis=i,t.yAxis=r;var o=new Lt;return t.seriesTemplates=new w.c(o),o.virtualParent=t,t._disposers.push(new w.b(t.seriesTemplates)),t._disposers.push(o),t.zoomOutButton.events.on("hit",(function(){t.zoomToChartDataItem(t._homeDataItem)}),void 0,!1),t.seriesTemplates.events.on("insertKey",(function(e){e.newValue.isTemplate=!0}),void 0,!1),t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"navigationBar",{get:function(){return this._navigationBar},set:function(e){var t=this;this._navigationBar!=e&&(this._navigationBar=e,e.parent=this,e.toBack(),e.links.template.events.on("hit",(function(e){var i=e.target.dataItem.dataContext;i.isDisposed()||(t.zoomToChartDataItem(i),t.createTreeSeries(i))}),void 0,!0),this._disposers.push(e))},enumerable:!0,configurable:!0}),t.prototype.validateData=function(){this.series.clear(),this._tempSeries=[],e.prototype.validateData.call(this),this._homeDataItem&&this._homeDataItem.dispose();var t=this.dataItems.template.clone();this._homeDataItem=t,v.d(this.dataItems.iterator(),(function(e){e.parent=t})),t.children=this.dataItems,t.x0=0,t.y0=0,t.name=this._homeText;var i=1e3,n=10*Math.round(i*this.pixelHeight/this.pixelWidth/10)||1e3;t.x1=i,t.y1=n,this.xAxis.min=0,this.xAxis.max=i,this.xAxis.getMinMax(),this.yAxis.min=0,this.yAxis.max=n,this.yAxis.getMinMax(),this.layoutItems(t),this.createTreeSeries(t),this.feedLegend()},t.prototype.layoutItems=function(e,t){if(e){var i=e.children;t||(t=this.sorting),"ascending"==t&&i.values.sort((function(e,t){return e.value-t.value})),"descending"==t&&i.values.sort((function(e,t){return t.value-e.value})),this._updateDataItemIndexes(0),this.layoutAlgorithm(e);for(var n=0,r=i.length;n<r;n++){var a=i.getIndex(n);a.children&&this.layoutItems(a)}}},t.prototype.createTreeSeries=function(e){var t=this;this._tempSeries=[];for(var i=[e],n=e.parent;void 0!=n;)this.initSeries(n),i.push(n),n=n.parent;i.reverse(),this.navigationBar&&(this.navigationBar.data=i),this.createTreeSeriesReal(e),V.d(this._tempSeries,(function(e){-1==t.series.indexOf(e)&&t.series.push(e),e.zIndex=e.level}))},t.prototype.createTreeSeriesReal=function(e){if(e.children&&e.level<this.currentLevel+this.maxLevels){this.initSeries(e);for(var t=0;t<e.children.length;t++){var i=e.children.getIndex(t);i.children&&this.createTreeSeriesReal(i)}}},t.prototype.setData=function(t){this.currentLevel=0,this.currentlyZoomed=void 0,this.xAxis.start=0,this.xAxis.end=1,this.yAxis.start=0,this.yAxis.end=1,e.prototype.setData.call(this,t)},t.prototype.seriesAppeared=function(){return!0},t.prototype.initSeries=function(e){var t=this;if(!e.series){var i=void 0,n=this.seriesTemplates.getKey(e.level.toString());(i=n?n.clone():this.series.create()).dataItem.dataContext=e,i.name=e.name,i.parentDataItem=e,e.series=i;var r=e.level;i.level=r;var a=e.dataContext;a&&(i.config=a.config),this.dataUsers.removeValue(i),i.data=e.children.values,i.fill=e.color,i.columnsContainer.hide(0),i.bulletsContainer.hide(0),i.columns.template.adapter.add("fill",(function(e,t){var i=t.dataItem;if(i){var n=i.treeMapDataItem;if(n)return t.fill=n.color,t.adapter.remove("fill"),n.color}})),this.zoomable&&(e.level>this.currentLevel||e.children&&e.children.length>0)&&(i.columns.template.cursorOverStyle=E.a.pointer,this.zoomable&&i.columns.template.events.on("hit",(function(i){var n=i.target.dataItem;e.level>t.currentLevel?t.zoomToChartDataItem(n.treeMapDataItem.parent):t.zoomToSeriesDataItem(n)}),this,void 0))}this._tempSeries.push(e.series)},t.prototype.toggleBullets=function(e){var t=this;v.d(this.series.iterator(),(function(i){-1==t._tempSeries.indexOf(i)?(i.columnsContainer.hide(),i.bulletsContainer.hide(e)):(i.columnsContainer.show(),i.bulletsContainer.show(e),i.dataItems.each((function(e){e.bullets.each((function(e,t){t.show()}))})),i.level<t.currentLevel?(t.hideParentColumns&&i.columnsContainer.hide(),i.bulletsContainer.hide(e)):i.level==t.currentLevel&&t.maxLevels>1&&i.dataItems.each((function(e){e.treeMapDataItem.children&&e.bullets.each((function(e,t){t.hide()}))})))}))},t.prototype.zoomToSeriesDataItem=function(e){this.zoomToChartDataItem(e.treeMapDataItem)},t.prototype.zoomToChartDataItem=function(e){var t=this;e||(e=this._homeDataItem);var i=this.zoomOutButton;if(i&&(e!=this._homeDataItem?i.show():i.hide()),e&&e.children){this.xAxis.zoomToValues(e.x0,e.x1),this.yAxis.zoomToValues(e.y0,e.y1),this.currentLevel=e.level,this.currentlyZoomed=e,this.createTreeSeries(e);var n=this.xAxis.rangeChangeAnimation||this.yAxis.rangeChangeAnimation;!n||n.isDisposed()||n.isFinished()?this.toggleBullets():(this._dataDisposers.push(n),n.events.once("animationended",(function(){t.toggleBullets()})))}},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("TreeMap chart"))},t.prototype.createDataItem=function(){return new Rt},Object.defineProperty(t.prototype,"maxLevels",{get:function(){return this.getPropertyValue("maxLevels")},set:function(e){this.setPropertyValue("maxLevels",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.getPropertyValue("currentLevel")},set:function(e){this.setPropertyValue("currentLevel",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideParentColumns",{get:function(){return this.getPropertyValue("hideParentColumns")},set:function(e){this.setPropertyValue("hideParentColumns",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sorting",{get:function(){return this.getPropertyValue("sorting")},set:function(e){this.setPropertyValue("sorting",e,!0)},enumerable:!0,configurable:!0}),t.prototype.createSeries=function(){return new Lt},Object.defineProperty(t.prototype,"homeText",{get:function(){return this._homeText},set:function(e){this._homeText=e,this._homeDataItem&&(this._homeDataItem.name=this._homeText)},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(t){if(t){if(g.d(t.layoutAlgorithm)&&g.j(t.layoutAlgorithm))switch(t.layoutAlgorithm){case"squarify":t.layoutAlgorithm=this.squarify;break;case"binaryTree":t.layoutAlgorithm=this.binaryTree;break;case"slice":t.layoutAlgorithm=this.slice;break;case"dice":t.layoutAlgorithm=this.dice;break;case"sliceDice":t.layoutAlgorithm=this.sliceDice;break;default:delete t.layoutAlgorithm}g.d(t.navigationBar)&&!g.d(t.navigationBar.type)&&(t.navigationBar.type="NavigationBar"),e.prototype.processConfig.call(this,t)}},t.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.layoutItems(this.currentlyZoomed)},t.prototype.validateDataItems=function(){e.prototype.validateDataItems.call(this),this.layoutItems(this._homeDataItem),v.d(this.series.iterator(),(function(e){e.validateRawData()})),this.zoomToChartDataItem(this._homeDataItem)},t.prototype.binaryTree=function(e){var t,i,n=e.children,r=n.length,a=new Array(r+1);for(a[0]=i=t=0;t<r;++t)a[t+1]=i+=n.getIndex(t).value;r>0&&function e(t,i,r,o,s,l,u){if(t>=i-1){return(v=n.getIndex(t)).x0=o,v.y0=s,v.x1=l,void(v.y1=u)}var c=a[t],h=r/2+c,p=t+1,d=i-1;for(;p<d;){var f=p+d>>>1;a[f]<h?p=f+1:d=f}h-a[p-1]<a[p]-h&&t+1<p&&--p;var m=a[p]-c,y=r-m;if(0==r){var v;return(v=n.getIndex(t)).x0=o,v.y0=s,v.x1=l,void(v.y1=u)}if(l-o>u-s){var g=(o*y+l*m)/r;e(t,p,m,o,s,g,u),e(p,i,y,g,s,l,u)}else{var _=(s*y+u*m)/r;e(t,p,m,o,s,l,_),e(p,i,y,o,_,l,u)}}(0,r,e.value,e.x0,e.y0,e.x1,e.y1)},t.prototype.slice=function(e){for(var t,i=e.x0,n=e.x1,r=e.y0,a=e.y1,o=e.children,s=-1,l=o.length,u=e.value&&(a-r)/e.value;++s<l;)(t=o.getIndex(s)).x0=i,t.x1=n,t.y0=r,r+=t.value*u,t.y1=r},t.prototype.dice=function(e){for(var t,i=e.x0,n=e.x1,r=e.y0,a=e.y1,o=e.children,s=-1,l=o.length,u=e.value&&(n-i)/e.value;++s<l;)(t=o.getIndex(s)).y0=r,t.y1=a,t.x0=i,i+=t.value*u,t.x1=i},t.prototype.sliceDice=function(e){1&e.level?this.slice(e):this.dice(e)},t.prototype.squarify=function(e){for(var t,i,n,r,a,o,s,l,u,c,h=(1+Math.sqrt(5))/2,p=e.x0,d=e.x1,f=e.y0,m=e.y1,y=e.children,v=0,g=0,_=y.length,b=e.value;v<_;){i=d-p,n=m-f;do{r=y.getIndex(g++).value}while(!r&&g<_);for(a=o=r,c=r*r*(u=Math.max(n/i,i/n)/(b*h)),l=Math.max(o/c,c/a);g<_;++g){if(r+=t=y.getIndex(g).value,t<a&&(a=t),t>o&&(o=t),c=r*r*u,(s=Math.max(o/c,c/a))>l){r-=t;break}l=s}var x=this.dataItems.template.clone();x.value=r,x.dice=i<n,x.children=y.slice(v,g),x.x0=p,x.y0=f,x.x1=d,x.y1=m,x.dice?(x.y1=b?f+=n*r/b:m,this.dice(x)):(x.x1=b?p+=i*r/b:d,this.slice(x)),b-=r,v=g}},t.prototype.handleSeriesAdded2=function(){},t.prototype.handleDataItemValueChange=function(e,t){"value"==t&&this.invalidateDataItems()},t.prototype.handleDataItemWorkingValueChange=function(e,t){"value"==t&&this.invalidateDataItems()},t.prototype.getLegendLevel=function(e){if(e&&e.children){if(e.children.length>1)return e;if(1==e.children.length){var t=e.children.getIndex(0);return t.children?this.getLegendLevel(t):e}return e}},t.prototype.handleLegendSeriesAdded=function(e){},Object.defineProperty(t.prototype,"homeDataItem",{get:function(){return this._homeDataItem},enumerable:!0,configurable:!0}),t.prototype.feedLegend=function(){var e=this.legend;if(e){e.dataFields.name="name";var t=this.getLegendLevel(this._homeDataItem);if(t){var i=[];t.children.each((function(e){i.push(e)})),e.data=i}}},t.prototype.disposeData=function(){e.prototype.disposeData.call(this),this._homeDataItem=void 0,this.series.clear(),this.navigationBar&&this.navigationBar.disposeData(),this.xAxis.disposeData(),this.yAxis.disposeData()},t.prototype.getExporting=function(){var t=this,i=e.prototype.getExporting.call(this);return i.adapter.add("formatDataFields",(function(e){return"csv"!=e.format&&"xlsx"!=e.format||g.d(t.dataFields.children)&&delete e.dataFields[t.dataFields.children],e})),i},t}(Te);r.b.registeredClasses.TreeMap=zt;var Vt=function(e){function t(){var t=e.call(this)||this;return t._chart=new o.d,t.className="AxisRendererX3D",t._disposers.push(t._chart),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.updateGridElement=function(e,t,i){t+=(i-t)*e.location;var n=this.positionToPoint(t);if(e.element){var r=this.chart.dx3D||0,a=this.chart.dy3D||0,o=this.getHeight();e.path=f.g({x:r,y:a})+f.f({x:r,y:o+a})+f.f({x:0,y:o})}this.positionItem(e,n),this.toggleVisibility(e,t,0,1)},t.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var t=this.getHeight(),i=this.chart.dx3D||0,n=this.chart.dy3D||0;this.baseGrid.path=f.g({x:i,y:n})+f.f({x:0,y:0})+f.f({x:0,y:t})},Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart.get()},set:function(e){e&&this._chart.set(e,e.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),t.prototype.handle3DChanged=function(e){"depth"!=e.property&&"angle"!=e.property||this.invalidate()},t}(ye);r.b.registeredClasses.AxisRendererX3D=Vt;var Bt=function(e){function t(){var t=e.call(this)||this;return t._chart=new o.d,t.className="AxisRendererY3D",t._disposers.push(t._chart),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.updateGridElement=function(e,t,i){t+=(i-t)*e.location;var n=this.positionToPoint(t);if(e.element){var r=this.chart.dx3D||0,a=this.chart.dy3D||0,o=this.getWidth();e.path=f.g({x:0,y:0})+f.f({x:r,y:a})+f.f({x:o+r,y:a})}this.positionItem(e,n),this.toggleVisibility(e,t,0,1)},t.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var t=this.chart.dx3D||0,i=this.chart.dy3D||0,n=this.getWidth();this.baseGrid.path=f.g({x:0,y:0})+f.f({x:n,y:0})+f.f({x:n+t,y:i})},Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart.get()},set:function(e){e&&this._chart.set(e,e.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),t.prototype.handle3DChanged=function(e){"depth"!=e.property&&"angle"!=e.property||this.invalidate()},t}(le),Nt=i(143),Ut=function(e){function t(){var t=e.call(this)||this;return t.className="Column3D",t}return Object(n.c)(t,e),t.prototype.createAssets=function(){this.column3D=this.createChild(Nt.a),this.column3D.shouldClone=!1,this.column3D.strokeOpacity=0,this.column=this.column3D},t.prototype.validate=function(){e.prototype.validate.call(this),this.column3D&&(this.column3D.width=this.pixelWidth,this.column3D.height=this.pixelHeight,this.column3D.invalid&&this.column3D.validate())},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.column3D&&this.column3D.copyFrom(t.column3D)},t.prototype.setFill=function(t){e.prototype.setFill.call(this,t),this.column.fill=t},t}(Mt);r.b.registeredClasses.Column3D=Ut;var Wt=function(e){function t(){var t=e.call(this)||this;return t.className="ColumnSeries3DDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(Dt),Gt=function(e){function t(){var t=e.call(this)||this;return t.className="ColumnSeries3D",t.columns.template.column3D.applyOnClones=!0,t.columns.template.hiddenState.properties.visible=!0,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"columnsContainer",{get:function(){var e=this.chart;return e&&e.columnsContainer&&"vertical"!=e.leftAxesContainer.layout&&"vertical"!=e.rightAxesContainer.layout&&"horizontal"!=e.bottomAxesContainer.layout&&"horizontal"!=e.topAxesContainer.layout?e.columnsContainer:this._columnsContainer},enumerable:!0,configurable:!0}),t.prototype.validateDataElementReal=function(t){e.prototype.validateDataElementReal.call(this,t),t.column&&(t.column.dx=this.dx,t.column.dy=this.dy,t.column.visible=this.visible)},t.prototype.validateDataElements=function(){e.prototype.validateDataElements.call(this),this.chart&&this.chart.invalidateLayout()},t.prototype.createColumnTemplate=function(){return new Ut},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e,!0),this.columns.template.column3D.depth=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e),this.columns.template.column3D.angle=e},enumerable:!0,configurable:!0}),t}(jt);r.b.registeredClasses.ColumnSeries3D=Gt,r.b.registeredClasses.ColumnSeries3DDataItem=Wt;!function(e){function t(){var t=e.call(this)||this;return t.className="XYChart3DDataItem",t.applyTheme(),t}Object(n.c)(t,e)}(Se);var Ht=function(e){function t(){var t=e.call(this)||this;t._axisRendererX=Vt,t._axisRendererY=Bt,t.className="XYChart3D",t.depth=30,t.angle=30;var i=t.seriesContainer.createChild(l.a);return i.shouldClone=!1,i.isMeasured=!1,i.layout="none",t.columnsContainer=i,t.columnsContainer.mask=t.createChild(h.a),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.updateSeriesMasks=function(){if(e.prototype.updateSeriesMasks.call(this),O.w()){var t=this.columnsContainer,i=t.mask;t.mask=void 0,t.mask=i}},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dx3D",{get:function(){return I.g(this.angle)*this.depth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dy3D",{get:function(){return-I.F(this.angle)*this.depth},enumerable:!0,configurable:!0}),t.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.fixColumns()},t.prototype.fixLayout=function(){this.chartContainer.paddingTop=-this.dy3D,this.chartContainer.paddingRight=this.dx3D,this.scrollbarX&&(this.scrollbarX.dy=this.dy3D,this.scrollbarX.dx=this.dx3D),this.scrollbarY&&(this.scrollbarY.dy=this.dy3D,this.scrollbarY.dx=this.dx3D),this.fixColumns(),e.prototype.fixLayout.call(this)},t.prototype.fixColumns=function(){var e=this,t=1,i=0;v.d(this.series.iterator(),(function(e){e instanceof Gt&&(!e.clustered&&i>0&&t++,e.depthIndex=t-1,i++)}));var n=0;v.d(this.series.iterator(),(function(i){if(i instanceof Gt){i.depth=e.depth/t,i.angle=e.angle,i.columnsContainer==e.columnsContainer&&(i.dx=e.depth/t*I.g(e.angle)*i.depthIndex,i.dy=-e.depth/t*I.F(e.angle)*i.depthIndex);var r=!1;(i.baseAxis==i.xAxis&&i.xAxis.renderer.inversed||i.baseAxis==i.yAxis&&i.yAxis.renderer.inversed)&&(r=!0);var a=1;i.dataItems.each((function(e){var t=e.column;t&&(t.zIndex=r?1e3*(1e3-a)+n-100*i.depthIndex:1e3*a+n-100*i.depthIndex),a++})),r?n--:n++}})),this.maskColumns()},t.prototype.processConfig=function(t){if(t&&g.d(t.series)&&g.e(t.series))for(var i=0,n=t.series.length;i<n;i++)t.series[i].type=t.series[i].type||"ColumnSeries3D";e.prototype.processConfig.call(this,t)},t.prototype.maskColumns=function(){var e=this.plotContainer.pixelWidth,t=this.plotContainer.pixelHeight,i=this.dx3D,n=this.dy3D,r=f.g({x:0,y:0})+f.f({x:i,y:n})+f.f({x:e+i,y:n})+f.f({x:e+i,y:t+n})+f.f({x:e,y:t})+f.f({x:e,y:t})+f.f({x:0,y:t})+f.d(),a=this.columnsContainer;a&&a.mask&&(a.mask.path=r)},t}(Te);r.b.registeredClasses.XYChart3D=Ht;var Xt=function(e){function t(){var t=e.call(this)||this;t.className="HeatLegend",t.markerContainer=t.createChild(l.a),t.markerContainer.shouldClone=!1,t.markerCount=1;var i=new S.a;return i.minHeight=20,i.minWidth=20,i.interactionsEnabled=!1,i.fillOpacity=1,i.cornerRadius(0,0,0,0),t.markerContainer.minHeight=20,t.markerContainer.minWidth=20,t.orientation="horizontal",t.markers=new s.c(i),t._disposers.push(new s.b(t.markers)),t._disposers.push(t.markers.template),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.getMinFromRules=function(e){var t,i=this.series;if(i)return v.e(i.heatRules.iterator(),(function(i){return i.property!=e||(t=i.min,!1)})),t},t.prototype.getMaxFromRules=function(e){var t,i=this.series;if(i)return v.d(i.heatRules.iterator(),(function(i){return i.property!=e||(t=i.max,!1)})),t},t.prototype.validate=function(){e.prototype.validate.call(this),this.valueAxis.renderer.inversed=this.reverseOrder;var t=this.series,i=this.minColor,n=this.maxColor;if(g.d(i)||(i=Object(L.c)(this.getMinFromRules("fill"))),g.d(n)||(n=Object(L.c)(this.getMaxFromRules("fill"))),t){var r=t.fill;!g.d(i)&&r instanceof L.a&&(i=r),!g.d(n)&&r instanceof L.a&&(n=r)}g.d(n)||(n=Object(L.c)(this.getMaxFromRules("fill")));var a=g.l(this.getMinFromRules("fillOpacity"));g.h(a)||(a=1);var o=g.l(this.getMaxFromRules("fillOpacity"));g.h(o)||(o=1);var s=g.l(this.getMinFromRules("strokeOpacity"));g.h(s)||(s=1);var l=g.l(this.getMaxFromRules("strokeOpacity"));g.h(l)||(l=1);for(var u=Object(L.c)(this.getMinFromRules("stroke")),c=Object(L.c)(this.getMaxFromRules("stroke")),h=0;h<this.markerCount;h++){var p=this.markers.getIndex(h);if(p||((p=this.markers.create()).parent=this.markerContainer,p.height=Object(d.c)(100),p.width=Object(d.c)(100)),1==this.markerCount){var f=new ft.a;if(this.reverseOrder?(f.addColor(n,o),f.addColor(i,a)):(f.addColor(i,a),f.addColor(n,o)),"vertical"==this.orientation&&(f.rotation=-90),p.fill=f,g.d(u)&&g.d(c)){var m=new ft.a;this.reverseOrder?(m.addColor(c,l),m.addColor(u,s)):(m.addColor(u,s),m.addColor(c,l)),"vertical"==this.orientation&&(m.rotation=-90),p.stroke=m}}else{var y=h;this.reverseOrder&&(y=this.markerCount-h-1);var v=new L.a(B.c(i.rgb,n.rgb,y/this.markerCount));p.fill=v;var _=a+(o-a)*y/this.markerCount;if(p.fillOpacity=_,g.d(u)&&g.d(c)){var b=new L.a(B.c(u.rgb,c.rgb,y/this.markerCount));p.stroke=b;var x=s+(l-s)*y/this.markerCount;p.strokeOpacity=x}}}var w=this.valueAxis.renderer;this.markerCount>1&&("horizontal"==this.orientation?w.minGridDistance=this.measuredWidth/this.markerCount:w.minGridDistance=this.measuredHeight/this.markerCount),this.valueAxis.invalidate();h=this.markerCount;for(var k=this.markers.length;h<k;h++)this.markers.getIndex(h).parent=void 0},Object.defineProperty(t.prototype,"minColor",{get:function(){return this.getPropertyValue("minColor")},set:function(e){e instanceof L.a||(e=Object(L.c)(e)),this.setColorProperty("minColor",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxColor",{get:function(){return this.getPropertyValue("maxColor")},set:function(e){e instanceof L.a||(e=Object(L.c)(e)),this.setColorProperty("maxColor",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"markerCount",{get:function(){return this.getPropertyValue("markerCount")},set:function(e){this.setPropertyValue("markerCount",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(e){this.setPropertyValue("minValue",e),this.valueAxis.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(e){this.setPropertyValue("maxValue",e),this.valueAxis.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e,!0);var t=this.markerContainer,i=this.valueAxis;"horizontal"==e?(g.d(this.width)||(this.width=200),this.height=void 0,i.width=Object(d.c)(100),i.height=void 0,i.tooltip.pointerOrientation="vertical",this.layout="vertical",t.width=Object(d.c)(100),t.height=void 0,i.renderer instanceof ye||(i.renderer=new ye)):(g.d(this.height)||(this.height=200),this.width=void 0,this.layout="horizontal",t.width=void 0,t.height=Object(d.c)(100),i.height=Object(d.c)(100),i.width=void 0,i.tooltip.pointerOrientation="horizontal",i.renderer instanceof le||(i.renderer=new le),i.renderer.inside=!0,i.renderer.labels.template.inside=!0,this.markerContainer.reverseOrder=!0);var n=i.renderer;n.grid.template.disabled=!0,n.axisFills.template.disabled=!0,n.baseGrid.disabled=!0,n.labels.template.padding(2,3,2,3),n.minHeight=void 0,n.minWidth=void 0,this.markerContainer.layout=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueAxis",{get:function(){return this._valueAxis||(this.valueAxis=this.createChild(he),this.valueAxis.shouldClone=!1),this._valueAxis},set:function(e){this._valueAxis=e,e.parent=this,e.strictMinMax=!0,this.orientation=this.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},set:function(e){var t=this;this._series=e;var i="value";try{var n=e.heatRules.getIndex(0).dataField;n&&(i=n)}catch(r){}this.updateMinMax(e.dataItem.values[i].low,e.dataItem.values[i].high),e.dataItem.events.on("calculatedvaluechanged",(function(n){t.updateMinMax(e.dataItem.values[i].low,e.dataItem.values[i].high)}),void 0,!1),e.heatRules.events.on("inserted",this.invalidate,this,!1),e.heatRules.events.on("removed",this.invalidate,this,!1)},enumerable:!0,configurable:!0}),t.prototype.updateMinMax=function(e,t){var i=this.valueAxis;g.h(this.minValue)||(i.min=e,i.invalidate()),g.h(this.maxValue)||(i.max=t,i.invalidate())},t.prototype.processConfig=function(t){if(t&&g.d(t.series)&&g.j(t.series)&&g.j(t.series))if(this.map.hasKey(t.series))t.series=this.map.getKey(t.series);else{var i=t.series,n=this.map.events.on("insertKey",(function(e){e.key==i&&(this.series=e.newValue,n.dispose())}),this);this._disposers.push(n),delete t.series}e.prototype.processConfig.call(this,t)},t}(l.a);r.b.registeredClasses.HeatLegend=Xt;var Yt=function(e){function t(){var t=e.call(this)||this;return t.className="Candlestick",t.layout="none",t}return Object(n.c)(t,e),t.prototype.createAssets=function(){e.prototype.createAssets.call(this),this.lowLine=this.createChild(Ae.a),this.lowLine.shouldClone=!1,this.highLine=this.createChild(Ae.a),this.highLine.shouldClone=!1},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.lowLine&&this.lowLine.copyFrom(t.lowLine),this.highLine&&this.highLine.copyFrom(t.highLine)},t}(Mt);r.b.registeredClasses.Candlestick=Yt;var qt=function(e){function t(){var t=e.call(this)||this;return t.values.lowValueX={},t.values.lowValueY={},t.values.highValueX={},t.values.highValueY={},t.className="CandlestickSeriesDataItem",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"lowValueX",{get:function(){return this.values.lowValueX.value},set:function(e){this.setValue("lowValueX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lowValueY",{get:function(){return this.values.lowValueY.value},set:function(e){this.setValue("lowValueY",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highValueX",{get:function(){return this.values.highValueX.value},set:function(e){this.setValue("highValueX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highValueY",{get:function(){return this.values.highValueY.value},set:function(e){this.setValue("highValueY",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeValueX",{get:function(){return this.values.valueX.value},set:function(e){this.setValue("valueX",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeValueY",{get:function(){return this.values.valueY.value},set:function(e){this.setValue("valueY",e)},enumerable:!0,configurable:!0}),t}(Dt),Zt=function(e){function t(){var t=e.call(this)||this;t.className="CandlestickSeries",t.groupFields.lowValueX="low",t.groupFields.lowValueY="low",t.groupFields.highValueX="high",t.groupFields.highValueY="high",t.strokeOpacity=1;var i=new p.a,n=i.getFor("positive"),r=i.getFor("negative");return t.dropFromOpenState.properties.fill=r,t.dropFromOpenState.properties.stroke=r,t.riseFromOpenState.properties.fill=n,t.riseFromOpenState.properties.stroke=n,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Candlestick Series"))},t.prototype.createDataItem=function(){return new qt},t.prototype.validateDataElementReal=function(t){e.prototype.validateDataElementReal.call(this,t),this.validateCandlestick(t)},t.prototype.validateCandlestick=function(e){var t=e.column;if(t){var i=t.lowLine,n=t.highLine;if(this.baseAxis==this.xAxis){var r=t.pixelWidth/2;i.x=r,n.x=r;var a=e.getWorkingValue(this.yOpenField),o=e.getWorkingValue(this.yField),s=this.yAxis.getY(e,this.yOpenField),l=this.yAxis.getY(e,this.yField),u=this.yAxis.getY(e,this.yLowField),c=this.yAxis.getY(e,this.yHighField),h=t.pixelY;i.y1=u-h,n.y1=c-h,a<o?(i.y2=s-h,n.y2=l-h):(i.y2=l-h,n.y2=s-h)}if(this.baseAxis==this.yAxis){var p=t.pixelHeight/2;i.y=p,n.y=p;var d=e.getWorkingValue(this.xOpenField),f=e.getWorkingValue(this.xField),m=this.xAxis.getX(e,this.xOpenField),y=this.xAxis.getX(e,this.xField),g=this.xAxis.getX(e,this.xLowField),_=this.xAxis.getX(e,this.xHighField),b=t.pixelX;i.x1=g-b,n.x1=_-b,d<f?(i.x2=m-b,n.x2=y-b):(i.x2=y-b,n.x2=m-b)}v.d(this.axisRanges.iterator(),(function(t){var r=e.rangesColumns.getKey(t.uid);if(r){var a=r.lowLine;a.x=i.x,a.y=i.y,a.x1=i.x1,a.x2=i.x2,a.y1=i.y1,a.y2=i.y2;var o=r.highLine;o.x=n.x,o.y=n.y,o.x1=n.x1,o.x2=n.x2,o.y1=n.y1,o.y2=n.y2}}))}},Object.defineProperty(t.prototype,"xLowField",{get:function(){return this._xLowField},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yLowField",{get:function(){return this._yLowField},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xHighField",{get:function(){return this._xHighField},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yHighField",{get:function(){return this._yHighField},enumerable:!0,configurable:!0}),t.prototype.defineFields=function(){e.prototype.defineFields.call(this);var t=this.xAxis,i=this.yAxis;if(t&&i){if(this.baseAxis==t){var n=O.c(i.axisFieldName);this._yLowField="low"+n+"Y",this._yHighField="high"+n+"Y"}if(this.baseAxis==i){var r=O.c(t.axisFieldName);this._xLowField="low"+r+"X",this._xHighField="high"+r+"X"}this.addValueField(t,this._xValueFields,this._xLowField),this.addValueField(t,this._xValueFields,this._xHighField),this.addValueField(i,this._yValueFields,this._yLowField),this.addValueField(i,this._yValueFields,this._yHighField)}},t.prototype.createLegendMarker=function(e){var t=e.pixelWidth,i=e.pixelHeight;e.removeChildren();var n,r,a=e.createChild(Yt);a.shouldClone=!1,a.copyFrom(this.columns.template);var o=a.lowLine,s=a.highLine;this.baseAxis==this.yAxis?(n=t/3,r=i,o.y=i/2,s.y=i/2,o.x2=t/3,s.x2=t/3,s.x=t/3*2,a.column.x=t/3):(n=t,r=i/3,o.x=t/2,s.x=t/2,o.y2=i/3,s.y2=i/3,s.y=i/3*2,a.column.y=i/3),a.width=n,a.height=r,z.c(this,e,h.b),z.c(this.columns.template,a,h.b),a.stroke=this.riseFromOpenState.properties.stroke,a.fill=a.stroke;var l=e.dataItem;l.color=a.fill,l.colorOrig=a.fill},t.prototype.createColumnTemplate=function(){return new Yt},t}(jt);r.b.registeredClasses.CandlestickSeries=Zt,r.b.registeredClasses.CandlestickSeriesDataItem=qt;var Kt=function(e){function t(){var t=e.call(this)||this;return t.className="OHLC",t.layout="none",t}return Object(n.c)(t,e),t.prototype.createAssets=function(){this.openLine=this.createChild(Ae.a),this.openLine.shouldClone=!1,this.highLowLine=this.createChild(Ae.a),this.highLowLine.shouldClone=!1,this.closeLine=this.createChild(Ae.a),this.closeLine.shouldClone=!1},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.openLine&&this.openLine.copyFrom(t.openLine),this.highLowLine&&this.highLowLine.copyFrom(t.highLowLine),this.closeLine&&this.closeLine.copyFrom(t.closeLine)},t}(Yt);r.b.registeredClasses.OHLC=Kt;var $t=function(e){function t(){var t=e.call(this)||this;return t.className="OHLCSeriesDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(qt),Jt=function(e){function t(){var t=e.call(this)||this;return t.className="OHLCSeries",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("OHLC Series"))},t.prototype.createDataItem=function(){return new $t},t.prototype.validateCandlestick=function(e){var t=e.column;if(t){var i=t.openLine,n=t.highLowLine,r=t.closeLine;if(this.baseAxis==this.xAxis){var a=t.pixelWidth/2;n.x=a,e.getWorkingValue(this.yOpenField),e.getWorkingValue(this.yField);var o=this.yAxis.getY(e,this.yOpenField),s=this.yAxis.getY(e,this.yField),l=this.yAxis.getY(e,this.yLowField),u=this.yAxis.getY(e,this.yHighField),c=t.pixelY;i.y1=o-c,i.y2=o-c,i.x1=0,i.x2=a,r.y1=s-c,r.y2=s-c,r.x1=a,r.x2=2*a,n.y1=u-c,n.y2=l-c}if(this.baseAxis==this.yAxis){var h=t.pixelHeight/2;n.y=h,e.getWorkingValue(this.xOpenField),e.getWorkingValue(this.xField);var p=this.xAxis.getX(e,this.xOpenField),d=this.xAxis.getX(e,this.xField),f=this.xAxis.getX(e,this.xLowField),m=this.xAxis.getX(e,this.xHighField),y=t.pixelX;i.x1=p-y,i.x2=p-y,i.y1=h,i.y2=2*h,r.x1=d-y,r.x2=d-y,r.y1=0,r.y2=h,n.x1=m-y,n.x2=f-y}v.d(this.axisRanges.iterator(),(function(t){var a=e.rangesColumns.getKey(t.uid);if(a){var o=a.openLine;o.x=i.x,o.y=i.y,o.x1=i.x1,o.x2=i.x2,o.y1=i.y1,o.y2=i.y2;var s=a.closeLine;s.x=r.x,s.y=r.y,s.x1=r.x1,s.x2=r.x2,s.y1=r.y1,s.y2=r.y2;var l=a.highLowLine;l.x=n.x,l.y=n.y,l.x1=n.x1,l.x2=n.x2,l.y1=n.y1,l.y2=n.y2}}))}},t.prototype.createLegendMarker=function(e){var t=e.pixelWidth,i=e.pixelHeight;e.removeChildren();var n,r,a=e.createChild(Kt);a.shouldClone=!1,a.copyFrom(this.columns.template);var o=a.openLine,s=a.closeLine,l=a.highLowLine;this.baseAxis==this.yAxis?(n=t/3,r=i,l.y=i/2,l.x2=t,o.x=t/3*2,o.y2=i/2,s.x=t/3,s.y2=i,s.y1=i/2):(n=t,r=i/3,l.x=t/2,l.y2=i,o.y=i/3*2,o.x2=t/2,s.y=i/3,s.x2=t,s.x1=t/2),a.width=n,a.height=r,z.c(this,e,h.b),z.c(this.columns.template,a,h.b),a.stroke=this.riseFromOpenState.properties.stroke;var u=e.dataItem;u.color=a.stroke,u.colorOrig=a.stroke},t.prototype.createColumnTemplate=function(){return new Kt},t}(Zt);r.b.registeredClasses.OHLCSeries=Jt,r.b.registeredClasses.OHLCSeriesDataItem=$t;var Qt=function(e){function t(){var t=e.call(this)||this;return t.className="StepLineSeriesSegment",t}return Object(n.c)(t,e),t.prototype.drawSegment=function(e,t,i,n,r,a){if(e.length>0&&t.length>0)if(r){var o=f.g(e[0]);if(e.length>0)for(var s=1;s<e.length;s++){var l=e[s];s/2==Math.round(s/2)?o+=f.g(l):o+=f.f(l)}this.strokeSprite.path=o,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(o=f.g(e[0])+f.h(e),o+=f.f(t[0])+f.h(t),o+=f.f(e[0]),o+=f.d(),this.fillSprite.path=o)}else{o=f.g(e[0])+f.h(e);this.strokeSprite.path=o,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(o+=f.f(t[0])+f.h(t),o+=f.f(e[0]),o+=f.d(),this.fillSprite.path=o)}else this.strokeSprite.path="",this.fillSprite.path=""},t}(Oe);r.b.registeredClasses.StepLineSeriesSegment=Qt;var ei=function(e){function t(){var t=e.call(this)||this;return t.className="StepLineSeriesDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(De),ti=function(e){function t(){var t=e.call(this)||this;return t.className="StepLineSeries",t.applyTheme(),t.startLocation=0,t.endLocation=1,t}return Object(n.c)(t,e),t.prototype.createDataItem=function(){return new ei},t.prototype.addPoints=function(e,t,i,n,r){var a,o,s,l;this.baseAxis==this.xAxis&&(a=this.startLocation,o=this.endLocation,s=this.getAdjustedXLocation(t,this.yOpenField),l=this.getAdjustedXLocation(t,this.yField)),this.baseAxis==this.yAxis&&(s=this.startLocation,l=this.endLocation,a=this.getAdjustedXLocation(t,this.xOpenField),o=this.getAdjustedXLocation(t,this.xField));var u=this.xAxis.getX(t,i,a),c=this.yAxis.getY(t,n,s),h=this.xAxis.getX(t,i,o),p=this.yAxis.getY(t,n,l);if(u=I.i(u,-1e5,1e5),c=I.i(c,-1e5,1e5),h=I.i(h,-1e5,1e5),p=I.i(p,-1e5,1e5),!this.noRisers&&e.length>1){var d=e[e.length-1];this.baseAxis==this.xAxis&&(r?e.push({x:d.x,y:p}):e.push({x:u,y:d.y})),this.baseAxis==this.yAxis&&(r?e.push({x:h,y:d.y}):e.push({x:d.x,y:c}))}var f={x:u,y:c},m={x:h,y:p};r?e.push(m,f):e.push(f,m)},t.prototype.drawSegment=function(e,t,i){var n=!1;this.yAxis==this.baseAxis&&(n=!0),e.drawSegment(t,i,this.tensionX,this.tensionY,this.noRisers,n)},t.prototype.createSegment=function(){return new Qt},Object.defineProperty(t.prototype,"noRisers",{get:function(){return this.getPropertyValue("noRisers")},set:function(e){this.setPropertyValue("noRisers",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(e){this.setPropertyValue("startLocation",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(e){this.setPropertyValue("endLocation",e,!0)},enumerable:!0,configurable:!0}),t}(je);r.b.registeredClasses.StepLineSeries=ti,r.b.registeredClasses.StepLineSeriesDataItem=ei;var ii=function(e){function t(){var t=e.call(this)||this;return t.className="RadarColumn",t}return Object(n.c)(t,e),t.prototype.createAssets=function(){this.radarColumn=this.createChild(Qe.a),this.radarColumn.shouldClone=!1,this.radarColumn.strokeOpacity=void 0,this.column=this.radarColumn},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.radarColumn&&this.radarColumn.copyFrom(t.radarColumn)},t.prototype.getTooltipX=function(){var e=this.getPropertyValue("tooltipX");return g.h(e)?e:this.radarColumn.getTooltipX()},t.prototype.getTooltipY=function(){var e=this.getPropertyValue("tooltipX");return g.h(e)?e:this.radarColumn.getTooltipY()},t}(Mt);r.b.registeredClasses.RadarColumn=ii;var ni=function(e){function t(){var t=e.call(this)||this;return t.className="ColumnSeriesDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(Dt),ri=function(e){function t(){var t=e.call(this)||this;return t.className="RadarColumnSeries",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.createColumnTemplate=function(){return new ii},t.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},t.prototype.disableUnusedColumns=function(e){e&&(e.column&&(e.column.__disabled=!0),v.d(this.axisRanges.iterator(),(function(t){var i=e.rangesColumns.getKey(t.uid);i&&(i.__disabled=!0)})))},t.prototype.validateDataElementReal=function(e){var t,i,n,r,a=this,o=this.chart.startAngle,s=this.chart.endAngle,l=this.yField,u=this.yOpenField,c=this.xField,p=this.xOpenField,f=this.getStartLocation(e),m=this.getEndLocation(e),y=(s-o)/(this.dataItems.length*(this.end-this.start)),_=e.column;_||(_=this.columns.create(),e.column=_,z.c(this,_,h.b),z.c(this.columns.template,_,h.b),e.addSprite(_),_.paper=this.paper,this.setColumnStates(_));var b=_.width,x=100;b instanceof d.a&&(x=b.percent);var w=I.E((m-f)*(1-x/100)/2,5);if(f+=w,m-=w,this.xAxis instanceof _e&&this.yAxis instanceof _e)n=I.q({x:this.yAxis.getX(e,l,0,"valueY"),y:this.yAxis.getY(e,l,0,"valueY")}),r=I.q({x:this.yAxis.getX(e,u,1,"valueY"),y:this.yAxis.getY(e,u,1,"valueY")}),t=this.xAxis.getAngle(e,p,0,"valueX"),i=this.xAxis.getAngle(e,c,1,"valueX"),o+=f*y,s-=(1-m)*y;else if(this.baseAxis==this.xAxis)n=I.q({x:this.yAxis.getX(e,l,e.locations[l],"valueY"),y:this.yAxis.getY(e,l,e.locations[l],"valueY")}),r=I.q({x:this.yAxis.getX(e,u,e.locations[u],"valueY"),y:this.yAxis.getY(e,u,e.locations[u],"valueY")}),t=this.xAxis.getAngle(e,p,f,"valueX"),i=this.xAxis.getAngle(e,c,m,"valueX"),o+=f*y,s-=(1-m)*y;else{if(n=I.q({x:this.yAxis.getX(e,l,f,"valueY"),y:this.yAxis.getY(e,l,f,"valueY")}),r=I.q({x:this.yAxis.getX(e,u,m,"valueY"),y:this.yAxis.getY(e,u,m,"valueY")}),g.h(b)){var k=Math.abs(n-r);if(k>b){var P=(k-b)/2;n+=P,r-=P}}t=this.xAxis.getAngle(e,c,e.locations[c],"valueX"),i=this.xAxis.getAngle(e,p,e.locations[p],"valueX")}if(i<t){var S=i;i=t,t=S}t=I.i(t,o,s),i=I.i(i,o,s);var T=_.radarColumn;T.startAngle=t;var C=i-t;C>0?(T.arc=C,T.radius=n,T.innerRadius=r,_.__disabled=!1,_.parent=this.columnsContainer,v.d(this.axisRanges.iterator(),(function(i){var o=e.rangesColumns.getKey(i.uid);o||(o=a.columns.create(),z.h(a.columns.template,o,h.b),z.c(i.contents,o,h.b),o.dataItem&&V.o(o.dataItem.sprites,o),e.addSprite(o),o.paper=a.paper,a.setColumnStates(o),e.rangesColumns.setKey(i.uid,o));var s=o.radarColumn;s.startAngle=t,s.arc=C,s.radius=n,s.innerRadius=r,s.invalid&&(s.paper=a.paper,s.validate()),o.__disabled=!1,o.parent=i.contents}))):this.disableUnusedColumns(e)},t.prototype.getPoint=function(e,t,i,n,r,a,o){a||(a="valueX"),o||(o="valueY");var s=this.yAxis.getX(e,i,r,o),l=this.yAxis.getY(e,i,r,o),u=I.q({x:s,y:l});0==u&&(u=1e-5);var c=this.xAxis.getAngle(e,t,n,a);return{x:u*I.g(c),y:u*I.F(c)}},t.prototype.getMaskPath=function(){var e=this.yAxis.renderer;return f.a(e.startAngle,e.endAngle-e.startAngle,e.pixelRadius,e.pixelInnerRadius)},t.prototype.positionBulletReal=function(e,t,i){var n=this.xAxis,r=this.yAxis;(t<n.start||t>n.end||i<r.start||i>r.end)&&(e.visible=!1),e.moveTo(this.xAxis.renderer.positionToPoint(t,i))},t.prototype.setXAxis=function(t){e.prototype.setXAxis.call(this,t),this.updateRendererRefs()},t.prototype.setYAxis=function(t){e.prototype.setYAxis.call(this,t),this.updateRendererRefs()},t.prototype.updateRendererRefs=function(){var e=this.xAxis.renderer,t=this.yAxis.renderer;e.axisRendererY=t},t}(jt);r.b.registeredClasses.RadarColumnSeries=ri,r.b.registeredClasses.RadarColumnSeriesDataItem=ni;var ai=function(e){function t(){var t=e.call(this)||this;return t.slice=t.createChild(h.a),t.slice.shouldClone=!1,t.slice.setElement(t.paper.add("path")),t.slice.isMeasured=!1,t.orientation="vertical",t.bottomWidth=Object(d.c)(100),t.topWidth=Object(d.c)(100),t.isMeasured=!1,t.width=10,t.height=10,t.expandDistance=0,t.className="FunnelSlice",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.pixelPaddingTop,i=this.pixelPaddingBottom,n=this.pixelPaddingRight,r=this.pixelPaddingLeft,a=this.pixelWidth-n-r,o=this.pixelHeight-t-i,s=this.expandDistance,l="";if("vertical"==this.orientation){var u={x:(a-(g=O.E(this.topWidth,a)))/2+r,y:t},c={x:(a+g)/2+r,y:t},h={x:(a+(_=O.E(this.bottomWidth,a)))/2+r,y:t+o},p={x:(a-_)/2+r,y:t+o},d={x:c.x+(h.x-c.x)/2+s*o,y:c.y+.5*o},m={x:u.x+(p.x-u.x)/2-s*o,y:u.y+.5*o},y=f.f(h),v=f.f(u);0!=s&&(y=f.i(h,d),v=f.i(u,m)),l=f.g(u)+f.f(c)+y+f.f(p)+v,this.tickPoint={x:c.x+(h.x-c.x)/2,y:c.y+(h.y-c.y)/2}}else{var g,_,b={x:r,y:(o-(g=O.E(this.topWidth,o)))/2+t},x={x:r,y:(o+g)/2+t},w={x:r+a,y:(o-(_=O.E(this.bottomWidth,o)))/2+t},k={x:r+a,y:(o+_)/2+t};d={y:b.y+(w.y-b.y)/2-s*a,x:b.x+.5*a},m={y:x.y+(k.y-x.y)/2+s*a,x:x.x+.5*a},y=f.f(w),v=f.f(x);0!=s&&(y=f.i(w,d),v=f.i(x,m)),l=f.g(x)+f.f(b)+y+f.f(k)+v,this.tickPoint={y:x.y+(k.y-x.y)/2,x:x.x+(k.x-x.x)/2}}this.slice.path=l,this.invalidateLayout()},t.prototype.getPoint=function(e,t){var i=this.pixelPaddingTop,n=this.pixelPaddingBottom,r=this.pixelPaddingRight,a=this.pixelPaddingLeft,o=this.pixelWidth-r-a,s=this.pixelHeight-i-n;if("vertical"==this.orientation){var l={x:(o-(p=O.E(this.topWidth,o)))/2+a,y:i},u={x:(o+p)/2+a,y:i},c={x:(o+(d=O.E(this.bottomWidth,o)))/2+a,y:i+s},h=l.x+({x:(o-d)/2+a,y:i+s}.x-l.x)*t;return{x:h+(u.x+(c.x-u.x)*t-h)*e,y:u.y+(c.y-u.y)*t}}var p,d,f={x:a,y:(s-(p=O.E(this.topWidth,s)))/2+i},m={x:a,y:(s+p)/2+i},y={x:a+o,y:(s-(d=O.E(this.bottomWidth,s)))/2+i},v=f.y+(y.y-f.y)*e;return{y:v+(m.y+({x:a+o,y:(s+d)/2+i}.y-m.y)*e-v)*t,x:f.x+(y.x-f.x)*e}},Object.defineProperty(t.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(e){this.setPercentProperty("bottomWidth",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(e){this.setPercentProperty("topWidth",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expandDistance",{get:function(){return this.getPropertyValue("expandDistance")},set:function(e){this.setPropertyValue("expandDistance",e,!0)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.slice&&this.slice.copyFrom(t.slice)},t}(l.a);r.b.registeredClasses.FunnelSlice=ai;var oi=function(e){function t(){var t=e.call(this)||this;return t._label=new o.d,t._slice=new o.d,t.className="FunnelTick",t.element=t.paper.add("path"),t._disposers.push(t._label),t._disposers.push(t._slice),t.setPropertyValue("locationX",0),t.setPropertyValue("locationY",0),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.slice,i=t.getPoint(this.locationX,this.locationY);if(i){var n=this.label,r=t.dataItem.component,a=void 0,o=void 0,s=void 0;if("vertical"==r.orientation){var l=n.pixelX,u=n.pixelY;r.labelsOpposite||(l+=n.maxRight),a=O.I(i,t,this.parent),s=O.I({x:l,y:u},n.parent,this.parent),o={x:n.parent.pixelX-this.length,y:s.y},r.labelsOpposite||(o.x=n.parent.measuredWidth+this.length)}else{l=n.pixelX,u=n.pixelY;r.labelsOpposite||(u+=n.maxBottom),a=O.I(i,t,this.parent),o={x:(s=O.I({x:l,y:u},n.parent,this.parent)).x,y:n.parent.pixelY-this.length},r.labelsOpposite||(o.y=n.parent.measuredHeight+this.length)}this.path=f.g(a)+f.f(o)+f.f(s)}},Object.defineProperty(t.prototype,"slice",{get:function(){return this._slice.get()},set:function(e){this._slice.set(e,new o.c([e.events.on("transformed",this.invalidate,this,!1),e.events.on("validated",this.invalidate,this,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label.get()},set:function(e){this._label.set(e,e.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(e){this.setPropertyValue("locationX",e,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(e){this.setPropertyValue("locationY",e,!1,!0)},enumerable:!0,configurable:!0}),t}(ne);r.b.registeredClasses.FunnelTick=oi;var si=function(e){function t(){var t=e.call(this)||this;return t.className="FunnelSeriesDataItem",t.events.on("visibilitychanged",(function(){t.component&&t.component.invalidateDataItems()}),t,!1),t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"sliceLink",{get:function(){var e=this;if(!this._sliceLink){var t=this.component.sliceLinks.create();this._sliceLink=t,this._disposers.push(t),t.parent=this.component.slicesContainer,this._disposers.push(new o.b((function(){e.component&&e.component.sliceLinks.removeValue(t)}))),this.addSprite(t),t.visible=this.visible}return this._sliceLink},enumerable:!0,configurable:!0}),t}(Ze),li=function(e){function t(){var t=e.call(this)||this;return t._nextY=0,t.className="FunnelSeries",t.orientation="vertical",t.width=Object(d.c)(100),t.height=Object(d.c)(100),t.slicesContainer.width=Object(d.c)(100),t.slicesContainer.height=Object(d.c)(100),t._disposers.push(t.slicesContainer.events.on("maxsizechanged",t.invalidateDataItems,t,!1)),t.labelsOpposite=!0,t.labelsContainer.layout="absolute",t.bottomRatio=0,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.createSlice=function(){return new ai},t.prototype.createTick=function(){return new oi},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Funnel Series"))},t.prototype.createDataItem=function(){return new si},t.prototype.initSlice=function(e){e.isMeasured=!1,e.defaultState.properties.scale=1,e.observe("scale",this.handleSliceScale,this),e.observe(["dx","dy","x","y"],this.handleSliceMove,this),e.tooltipText="{category}: {value.percent.formatNumber('#.#')}% ({value.value})",e.states.create("hover").properties.expandDistance=.2},t.prototype.initLabel=function(t){e.prototype.initLabel.call(this,t),t.verticalCenter="middle",t.horizontalCenter="middle",t.isMeasured=!0,t.padding(5,5,5,5)},t.prototype.validate=function(){e.prototype.validate.call(this),this._nextY=0},t.prototype.validateDataElements=function(){var t=this,i=this.slicesContainer,n=this.labelsContainer,r=this.labels.template;this.alignLabels?(r.interactionsEnabled=!0,i.isMeasured=!0,n.isMeasured=!0):(r.interactionsEnabled=!1,i.isMeasured=!1,n.isMeasured=!1);var a=0,o=0;this.dataItems.each((function(e){g.d(e.value)&&(o++,e.value>0?a+=Math.abs(e.getWorkingValue("value")/e.value):t.ignoreZeroValues||!e.visible||e.__disabled||e.isHiding?o--:a+=1)})),this._total=1/o*a,this._count=o,e.prototype.validateDataElements.call(this),this.arrangeLabels()},t.prototype.getNextValue=function(e){var t=e.index,i=e.getWorkingValue("value");if(t<this.dataItems.length-1){var n=this.dataItems.getIndex(t+1);if(i=n.getWorkingValue("value"),!n.visible||n.isHiding||n.__disabled||0==n.value&&this.ignoreZeroValues)return this.getNextValue(n)}return i},t.prototype.formDataElement=function(){},t.prototype.validateDataElement=function(t){var i=this,n=t.slice;n.orientation=this.orientation;var r=t.sliceLink;r.orientation=this.orientation;var a=t.tick,o=t.label;a.slice=n,a.label=o,g.d(t.value)?(this.decorateSlice(t),V.d(t.sprites,(function(e){0==t.value&&i.ignoreZeroValues?e.__disabled=!0:e.__disabled=!1}))):V.d(t.sprites,(function(e){e.__disabled=!0})),t.index==this.dataItems.length-1&&(r.disabled=!0),e.prototype.validateDataElement.call(this,t),r.fill=n.fill},t.prototype.decorateSlice=function(e){var t=e.slice,i=e.sliceLink,n=e.label,r=e.tick,a=this.slicesContainer.innerWidth,o=this.slicesContainer.innerHeight,s=this.getNextValue(e),l=Math.abs(e.getWorkingValue("value")),u=this.bottomRatio,c=1;if(0!=e.value?c=l/Math.abs(e.value):(e.__disabled||e.isHiding||!e.visible)&&(c=1e-6),this.ignoreZeroValues&&0==e.value)e.__disabled=!0;else if(e.__disabled=!1,this._nextY==1/0&&(this._nextY=0),"vertical"==this.orientation){var h=i.pixelHeight*c;o+=h,t.topWidth=l/this.dataItem.values.value.high*a,t.bottomWidth=(l-(l-s)*u)/this.dataItem.values.value.high*a,i.topWidth=t.bottomWidth,i.bottomWidth=(l-(l-s))/this.dataItem.values.value.high*a,t.y=this._nextY,t.height=Math.min(1e5,I.B(0,o/this._count*c/this._total-h)),t.x=a/2,this.alignLabels?n.x=void 0:n.x=t.x,n.y=t.pixelY+t.pixelHeight*r.locationY,this._nextY+=t.pixelHeight+h,i.y=this._nextY-h,i.x=t.x}else{var p=i.pixelWidth*c;a+=p,t.topWidth=l/this.dataItem.values.value.high*o,t.bottomWidth=(l-(l-s)*u)/this.dataItem.values.value.high*o,i.topWidth=t.bottomWidth,i.bottomWidth=(l-(l-s))/this.dataItem.values.value.high*o,t.x=this._nextY,t.width=Math.min(1e5,a/this._count*c*1/this._total-p),t.y=o/2,this.alignLabels?n.y=this.labelsContainer.measuredHeight:n.y=t.y,n.x=t.pixelX+t.pixelWidth*r.locationX,this._nextY+=t.pixelWidth+p,i.x=this._nextY-p,i.y=t.y}},t.prototype.getLastLabel=function(e){if(e>0){var t=this.labels.getIndex(e);return t.__disabled||!t.visible?this.getLastLabel(e-1):t}},t.prototype.arrangeLabels=function(){if(this.alignLabels){var e=this.labels.length;if(e>1){var t=this.getLastLabel(e-1);if(t){var i=t.pixelY,n=t.pixelX;if(e>1){for(var r=e-2;r>=0;r--){(a=this.labels.getIndex(r)).visible&&!a.__disabled&&(a.invalid&&a.validate(),"vertical"==this.orientation?a.pixelY+a.measuredHeight>i&&(a.y=Math.min(1e6,i-a.measuredHeight)):a.pixelX+a.measuredWidth>n&&(a.x=Math.min(1e6,n-a.measuredWidth)),i=a.pixelY,n=a.pixelX)}i=0,n=0;for(r=0;r<e;r++){var a;(a=this.labels.getIndex(r)).visible&&!a.__disabled&&(a.invalid&&a.validate(),"vertical"==this.orientation?a.pixelY<i&&(a.y=Math.min(1e6,i)):a.pixelX<n&&(a.x=Math.min(1e6,n)),i+=a.measuredHeight,n+=a.measuredWidth)}}}}}},t.prototype.positionBullet=function(t){e.prototype.positionBullet.call(this,t);var i=t.dataItem.slice,n=t.locationX;g.h(n)||(n=.5);var r=t.locationY;g.h(r)||(r=1),t.x=i.pixelX+i.measuredWidth*n,t.y=i.pixelY+i.measuredHeight*r},Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e)&&(this.labelsOpposite=this.labelsOpposite,this.invalidate(),"vertical"==e?(this.ticks.template.locationX=1,this.ticks.template.locationY=.5,this.labels.template.rotation=0,this.layout="horizontal"):(this.ticks.template.locationX=.5,this.ticks.template.locationY=1,this.labels.template.rotation=-90,this.layout="vertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRatio",{get:function(){return this.getPropertyValue("bottomRatio")},set:function(e){this.setPropertyValue("bottomRatio",e)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sliceLinks",{get:function(){if(!this._sliceLinks){var e=new ai;e.applyOnClones=!0,e.fillOpacity=.5,e.expandDistance=-.3,e.hiddenState.properties.opacity=0,this._disposers.push(e),this._sliceLinks=new s.c(e),this._disposers.push(new s.b(this._sliceLinks))}return this._sliceLinks},enumerable:!0,configurable:!0}),t.prototype.show=function(t){var i=this,n=this.startIndex,r=this.endIndex,a=this.defaultState.transitionDuration;g.h(t)&&(a=t),F.a.animationsEnabled||(a=0);var o=0;return v.d(v.i(this.dataItems.iterator()),(function(e){var t=e[0],s=e[1];i.sequencedInterpolation&&(o=i.sequencedInterpolationDelay*t+a*(t-n)/(r-n)),s.show(a,o,["value"])})),e.prototype.show.call(this,t)},t.prototype.hide=function(t){var i=this,n=["value"],r=this.startIndex,a=this.endIndex,o=0,s=this.hiddenState.transitionDuration;g.h(t)&&(s=t),F.a.animationsEnabled||(s=0),v.d(v.i(this.dataItems.iterator()),(function(e){var t=e[0],l=e[1];i.sequencedInterpolation&&(o=i.sequencedInterpolationDelay*t+s*(t-r)/(a-r)),l.hide(s,o,0,n)}));var l=e.prototype.hide.call(this,t);return l&&!l.isFinished()&&l.delay(o),l},t.prototype.setAlignLabels=function(t){e.prototype.setAlignLabels.call(this,t),this.ticks.template.disabled=!t;var i=this.labelsContainer;i&&(t?(i.height=void 0,i.width=void 0,i.margin(10,10,10,10)):(i.width=Object(d.c)(100),i.height=Object(d.c)(100))),this.labelsOpposite=this.labelsOpposite},Object.defineProperty(t.prototype,"labelsOpposite",{get:function(){return this.getPropertyValue("labelsOpposite")},set:function(e){this.setPropertyValue("labelsOpposite",e);var t=this.labels.template,i="none",n="none";this.alignLabels?e?(this.labelsContainer.toFront(),"vertical"==this.orientation?(this.ticks.template.locationX=1,t.horizontalCenter="left",i="right"):(this.ticks.template.locationY=1,t.horizontalCenter="right",n="bottom")):(this.labelsContainer.toBack(),"vertical"==this.orientation?(this.ticks.template.locationX=0,i="left"):(n="top",this.ticks.template.locationY=0)):"vertical"==this.orientation?i="center":n="middle",t.align=i,t.valign=n,this.validateLayout(),this.ticks.each((function(e){e.invalidate()})),this.invalidateDataItems()},enumerable:!0,configurable:!0}),t}(Ke);r.b.registeredClasses.FunnelSeries=li,r.b.registeredClasses.FunnelSeriesDataItem=si;var ui=function(e){function t(){var t=e.call(this)||this;return t.className="PyramidSeriesDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(si),ci=function(e){function t(){var t=e.call(this)||this;return t.className="PyramidSeries",t.topWidth=Object(d.c)(0),t.bottomWidth=Object(d.c)(100),t.pyramidHeight=Object(d.c)(100),t.valueIs="area",t.sliceLinks.template.width=0,t.sliceLinks.template.height=0,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},t.prototype.createDataItem=function(){return new ui},t.prototype.validate=function(){e.prototype.validate.call(this),this._nextWidth=void 0},t.prototype.getNextValue=function(e){var t=e.index,i=e.getWorkingValue("value");t<this.dataItems.length-1&&(i=this.dataItems.getIndex(t+1).getWorkingValue("value"));return 0==i&&(i=1e-6),i},t.prototype.validateDataElements=function(){var t=this,i=this.slicesContainer.innerWidth,n=this.slicesContainer.innerHeight;if(this.dataItems.each((function(e){if(e.value>0){var r=e.getWorkingValue("value")/e.value,a=e.sliceLink;"vertical"==t.orientation?n-=a.pixelHeight*r:i-=a.pixelWidth*r}})),this._pyramidHeight=O.E(this.pyramidHeight,n),this._pyramidWidth=O.E(this.pyramidHeight,i),"vertical"==this.orientation){var r=(n-this._pyramidHeight)/2;this.slicesContainer.y=r,this.labelsContainer.y=r,this.ticksContainer.y=r}else{var a=(i-this._pyramidWidth)/2;this.slicesContainer.x=a,this.labelsContainer.x=a,this.ticksContainer.x=a}e.prototype.validateDataElements.call(this)},t.prototype.decorateSlice=function(e){var t=this.dataItem.values.value.absoluteSum;if(0!=t){var i=e.slice,n=e.sliceLink,r=e.label,a=e.tick;this.getNextValue(e);var o=Math.abs(e.getWorkingValue("value")),s=this._pyramidWidth,l=this._pyramidHeight,u=this.slicesContainer.innerWidth,c=this.slicesContainer.innerHeight,h=n.pixelWidth,p=n.pixelHeight;if(0!=e.value&&null!=e.value||!this.ignoreZeroValues?e.__disabled=!1:e.__disabled=!0,"vertical"==this.orientation){var d=O.E(this.topWidth,u);g.h(this._nextWidth)||(this._nextWidth=d);var f=O.E(this.bottomWidth,u),m=this._nextWidth,y=Math.atan2(l,d-f);0==(w=Math.tan(Math.PI/2-y))&&(w=1e-8);var v=void 0,_=void 0;if("area"==this.valueIs){var b=(d+f)/2*l*o/t,x=Math.abs(m*m-2*b*w);_=(v=(m-Math.sqrt(x))/w)>0?(2*b-v*m)/v:m}else _=m-(v=l*o/t)*w;i.height=v,i.width=u,i.bottomWidth=_,i.topWidth=m,n.topWidth=i.bottomWidth,n.bottomWidth=i.bottomWidth,i.y=this._nextY,this.alignLabels?r.x=0:r.x=u/2,r.y=i.pixelY+i.pixelHeight*a.locationY+i.dy,this._nextY+=i.pixelHeight+p*o/Math.max(Math.abs(e.value),1e-8),n.y=this._nextY-p,n.x=u/2}else{d=O.E(this.topWidth,c);g.h(this._nextWidth)||(this._nextWidth=d);var w;f=O.E(this.bottomWidth,c),m=this._nextWidth,y=Math.atan2(s,d-f);0==(w=Math.tan(Math.PI/2-y))&&(w=1e-8);var k=void 0;_=void 0;if("area"==this.valueIs)_=(2*(b=(d+f)/2*s*o/t)-(k=(m-Math.sqrt(m*m-2*b*w))/w)*m)/k;else _=m-(k=s*o/t)*w;i.width=k,i.height=c,i.bottomWidth=_,i.topWidth=m,n.topWidth=i.bottomWidth,n.bottomWidth=i.bottomWidth,i.x=this._nextY,this.alignLabels?r.y=this.labelsContainer.measuredHeight:r.y=c/2,r.x=i.pixelX+i.pixelWidth*a.locationX+i.dx,this._nextY+=i.pixelWidth+h*o/Math.max(Math.abs(e.value),1e-8),n.x=this._nextY-h,n.y=c/2}this._nextWidth=i.bottomWidth}},Object.defineProperty(t.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(e){this.setPercentProperty("topWidth",e,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pyramidHeight",{get:function(){return this.getPropertyValue("pyramidHeight")},set:function(e){this.setPercentProperty("pyramidHeight",e,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(e){this.setPercentProperty("bottomWidth",e,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueIs",{get:function(){return this.getPropertyValue("valueIs")},set:function(e){this.setPropertyValue("valueIs",e)&&this.invalidate()},enumerable:!0,configurable:!0}),t}(li);r.b.registeredClasses.PyramidSeries=ci,r.b.registeredClasses.PyramidSeriesDataItem=ui;var hi=function(e){function t(){var t=e.call(this)||this;return t.className="PictorialStackedSeriesDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(ui),pi=function(e){function t(){var t=e.call(this)||this;return t.className="PictorialStackedSeries",t.topWidth=Object(d.c)(100),t.bottomWidth=Object(d.c)(100),t.valueIs="height",t.applyTheme(),t.startLocation=0,t.endLocation=1,t.align="center",t.valign="middle",t._maskSprite=t.slicesContainer.createChild(h.a),t._maskSprite.visible=!1,t._maskSprite.zIndex=100,t._maskSprite.shouldClone=!1,t}return Object(n.c)(t,e),t.prototype.validateDataElements=function(){var t=this.slicesContainer.maxWidth,i=this.slicesContainer.maxHeight,n=this._maskSprite,r=n.measuredWidth/n.scale,a=n.measuredHeight/n.scale,o=I.C(i/a,t/r);o==1/0&&(o=1),o=I.B(.001,o);var s,l,u=this.startLocation,c=this.endLocation,h=I.C(t,r*o),p=I.C(i,a*o);n.scale=o,"vertical"==this.orientation?(this.topWidth=h+4,this.bottomWidth=h+4,this.pyramidHeight=p*(c-u),n.x=t/2,n.y=p/2):(this.topWidth=p+4,this.bottomWidth=p+4,this.pyramidHeight=h*(c-u),n.valign="middle",n.x=h/2,n.y=i/2),n.verticalCenter="middle",n.horizontalCenter="middle",e.prototype.validateDataElements.call(this),"vertical"==this.orientation?("bottom"==this.valign&&(s=i-p),"middle"==this.valign&&(s=(i-p)/2),"top"==this.valign&&(s=0),"left"==this.align&&(l=-(t-h)/2),"center"==this.align&&(l=0),"right"==this.align&&(l=(t-h)/2),this.slices.template.dy=u*p,this.alignLabels&&(this.slicesContainer.dx=l)):("bottom"==this.valign&&(s=(i-p)/2),"middle"==this.valign&&(s=0),"top"==this.valign&&(s=-(i-p)/2),"left"==this.align&&(l=0),"center"==this.align&&(l=(t-h)/2),"right"==this.align&&(l=t-h),this.slices.template.dx=u*h,this.alignLabels&&(this.slicesContainer.dy=s)),this.slicesContainer.x=l,this.labelsContainer.x=l,this.ticksContainer.x=l,this.slicesContainer.y=s,this.labelsContainer.y=s,this.ticksContainer.y=s,h>0&&p>0&&(this.slicesContainer.mask=n)},t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),g.d(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},t.prototype.createDataItem=function(){return new hi},Object.defineProperty(t.prototype,"maskSprite",{get:function(){return this._maskSprite},enumerable:!0,configurable:!0}),t.prototype.initSlice=function(t){e.prototype.initSlice.call(this,t);var i=t.states.getKey("hover");i&&(i.properties.expandDistance=0)},Object.defineProperty(t.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(e){this.setPropertyValue("startLocation",e)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(e){this.setPropertyValue("endLocation",e)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),t}(ci);r.b.registeredClasses.PictorialStackedSeries=pi,r.b.registeredClasses.PictorialStackedSeriesDataItem=hi;var di=i(141),fi=function(e){function t(){var t=e.call(this)||this;return t.className="ConeColumn",t}return Object(n.c)(t,e),t.prototype.createAssets=function(){this.coneColumn=this.createChild(di.a),this.coneColumn.shouldClone=!1,this.column=this.coneColumn},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.coneColumn&&this.coneColumn.copyFrom(t.coneColumn)},t}(Mt);r.b.registeredClasses.ConeColumn=fi;var mi=function(e){function t(){var t=e.call(this)||this;return t.className="ConeSeriesDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(Dt),yi=function(e){function t(){var t=e.call(this)||this;return t.className="ConeSeries",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.createColumnTemplate=function(){return new fi},t.prototype.getMaskPath=function(){var e=0,t=0,i=this.columns.getIndex(0);if(i)return this.baseAxis==this.xAxis?t=i.coneColumn.innerWidth/2+1:e=i.coneColumn.innerHeight/2+1,f.j({x:-e,y:0,width:this.xAxis.axisLength+e,height:this.yAxis.axisLength+t})},t.prototype.validateDataElementReal=function(t){if(e.prototype.validateDataElementReal.call(this,t),t.column){var i=t.column.coneColumn;i.fill=t.column.fill,this.baseAxis==this.yAxis?i.orientation="horizontal":i.orientation="vertical"}},t}(jt);r.b.registeredClasses.ConeSeries=yi,r.b.registeredClasses.ConeSeriesDataItem=mi;var vi=function(e){function t(){var t=e.call(this)||this;return t.className="CurvedColumn",t}return Object(n.c)(t,e),t.prototype.createAssets=function(){this.curvedColumn=this.createChild(h.a),this.curvedColumn.shouldClone=!1,this.setPropertyValue("tension",.7),this.width=Object(d.c)(120),this.height=Object(d.c)(120),this.column=this.curvedColumn},t.prototype.draw=function(){e.prototype.draw.call(this);var t,i=this.realWidth,n=this.realHeight,r=this.realX-this.pixelX,a=this.realY-this.pixelY;O.R(this.width);var o=1,s=1;"vertical"==this.orientation?(o=this.tension,t=[{x:0,y:n+a},{x:i/2,y:a},{x:i,y:n+a}]):(s=this.tension,t=[{x:r,y:n=Math.abs(n)},{x:r+i,y:n/2},{x:r,y:0}]);var l=f.g(t[0])+new Ce.c(o,s).smooth(t);this.column.path=l},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.curvedColumn&&this.curvedColumn.copyFrom(t.curvedColumn)},Object.defineProperty(t.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(e){this.setPropertyValue("tension",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e,!0)},enumerable:!0,configurable:!0}),t}(Mt);r.b.registeredClasses.CurvedColumn=vi;var gi=function(e){function t(){var t=e.call(this)||this;return t.className="CurvedColumnSeriesDataItem",t.applyTheme(),t}return Object(n.c)(t,e),t}(Dt),_i=function(e){function t(){var t=e.call(this)||this;return t.className="CurvedColumnSeries",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.createColumnTemplate=function(){return new vi},t.prototype.validateDataElementReal=function(t){e.prototype.validateDataElementReal.call(this,t);var i=t.column;(i=t.column)&&(t.column.curvedColumn.fill=t.column.fill,this.baseAxis==this.yAxis?i.orientation="horizontal":i.orientation="vertical")},t}(jt);r.b.registeredClasses.CurvedColumnSeries=_i,r.b.registeredClasses.CurvedColumnSeriesDataItem=gi;var bi=function(e){function t(){var t=e.call(this)||this;t.className="CircleBullet";var i=t.createChild(Re.a);return i.shouldClone=!1,i.radius=5,i.isMeasured=!1,t.circle=i,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.circle.copyFrom(t.circle)},t}(P);r.b.registeredClasses.CircleBullet=bi;var xi=function(e){function t(){var t=e.call(this)||this;return t.className="ErrorBullet",t.errorLine=t.createChild(h.a),t.errorLine.shouldClone=!1,t.width=20,t.height=20,t.strokeOpacity=1,t.isDynamic=!0,t}return Object(n.c)(t,e),t.prototype.validatePosition=function(){e.prototype.validatePosition.call(this);var t=this.pixelWidth/2,i=this.pixelHeight/2;this.errorLine.path=f.g({x:-t,y:-i})+f.f({x:t,y:-i})+f.g({x:0,y:-i})+f.f({x:0,y:i})+f.g({x:-t,y:i})+f.f({x:t,y:i})},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.errorLine.copyFrom(t.errorLine)},t}(P);r.b.registeredClasses.ErrorBullet=xi;var wi=i(119),ki=i(106),Pi=function(e){function t(){var t=e.call(this)||this;return t.className="NavigationBarDataItem",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this.properties.name},set:function(e){this.setProperty("name",e)},enumerable:!0,configurable:!0}),t}(y.a),Si=function(e){function t(){var t=e.call(this)||this;t.className="NavigationBar";var i=new p.a,n=new wi.a;n.valign="middle",n.paddingTop=8,n.paddingBottom=8,t.paddingBottom=2,t.links=new s.c(n),t._disposers.push(new s.b(t.links)),t._disposers.push(n),t._linksIterator=new v.a(t.links,(function(){return t.links.create()})),t._linksIterator.createNewItems=!0;var r=new ki.a;r.direction="right",r.width=8,r.height=12,r.fill=i.getFor("alternativeBackground"),r.fillOpacity=.5,r.valign="middle",r.marginLeft=10,r.marginRight=10,t.separators=new s.c(r),t._disposers.push(new s.b(t.separators)),t._disposers.push(r);var a=new wi.a;return t.activeLink=a,a.copyFrom(n),a.valign="middle",a.fontWeight="bold",t.width=Object(d.c)(100),t.layout="grid",t.dataFields.name="name",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.validateDataElements=function(){this.removeChildren(),this._linksIterator.reset(),e.prototype.validateDataElements.call(this)},t.prototype.validateDataElement=function(t){var i;if(e.prototype.validateDataElement.call(this,t),t.index<this.dataItems.length-1){(i=this._linksIterator.getLast()).parent=this;var n=this.separators.create();n.parent=this,n.valign="middle"}else(i=this.activeLink).events.copyFrom(this.links.template.events),i.hide(0),i.show(),i.parent=this;i.dataItem=t,i.text=t.name,i.validate()},t}(a.a);r.b.registeredClasses.NavigationBar=Si,r.b.registeredClasses.NavigationBarDataItem=Pi;var Ti=i(14),Ci=i(25),Oi=function(e){function t(){var t=e.call(this)||this;t.point={x:0,y:0},t._stick="none",t.className="Cursor",t.width=Object(d.c)(100),t.height=Object(d.c)(100),t.shouldClone=!1,t.hide(0),t.trackable=!0,t.clickable=!0,t.isMeasured=!1;var i=Object(C.a)();return t._disposers.push(i.body.events.on("down",t.handleCursorDown,t)),t._disposers.push(i.body.events.on("up",t.handleCursorUp,t)),t._disposers.push(i.body.events.on("track",t.handleCursorMove,t)),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.handleCursorMove=function(e){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&e.touch)){if(("zoom"==this._generalBehavior||"pan"==this._generalBehavior)&&this.downPoint||Object(C.a)().isLocalElement(e.pointer,this.paper.svg,this.uid)){var t=O.h(e.pointer.point,this);return"hard"==this._stick&&this._stickPoint&&(t=this._stickPoint),"soft"==this._stick&&this._stickPoint&&(this.fitsToBounds(t)||(t=this._stickPoint)),this._adapterO&&this._adapterO.apply("cursorPoint",t),this.triggerMove(t),t}this.isHidden&&this.isHiding||this.hide()}},t.prototype.hideReal=function(t){if("hard"!=this._stick&&"soft"!=this._stick||!this._stickPoint)return e.prototype.hideReal.call(this,t)},t.prototype.triggerMove=function(e,t,i){e.x=I.E(e.x,1),e.y=I.E(e.y,1),t&&(this._stick=t),"hard"!=t&&"soft"!=t||(this._stickPoint=e),this.triggerMoveReal(e,i)},t.prototype.triggerMoveReal=function(e,t){(this.point.x!=e.x||this.point.y!=e.y||t)&&(this.point=e,this.invalidatePosition(),this.fitsToBounds(e)?this.show(0):this.downPoint||this.hide(0),this.visible&&(this.getPositions(),this.dispatch("cursorpositionchanged")))},t.prototype.triggerDown=function(e){this.triggerDownReal(e)},t.prototype.triggerDownReal=function(e){switch(this._generalBehavior){case"zoom":this.dispatchImmediately("zoomstarted");break;case"select":this.dispatchImmediately("selectstarted");break;case"pan":this.dispatchImmediately("panstarted"),Object(C.a)().setGlobalStyle(E.a.grabbing)}},t.prototype.triggerUp=function(e){this.triggerUpReal(e)},t.prototype.triggerUpReal=function(e){Ci.a.requestFrame(),this.updatePoint(this.upPoint);var t=Object(C.a)();if(I.q(this._upPointOrig,this._downPointOrig)>t.getHitOption(this.interactions,"hitTolerance")){switch(this._generalBehavior){case"zoom":this.dispatch("zoomended");break;case"select":this.dispatch("selectended");break;case"pan":this.dispatch("panended"),t.setGlobalStyle(E.a.default)}this.downPoint=void 0,this.updateSelection()}},t.prototype.updateSelection=function(){},t.prototype.getPositions=function(){this.xPosition=this.point.x/this.innerWidth,this.yPosition=1-this.point.y/this.innerHeight},t.prototype.handleCursorDown=function(e){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&e.touch)&&Object(C.a)().isLocalElement(e.pointer,this.paper.svg,this.uid)){Ti.g();var t=O.h(e.pointer.point,this);"hard"==this._stick&&this._stickPoint&&(t=this._stickPoint),this._adapterO&&this._adapterO.apply("cursorPoint",t),this.fitsToBounds(t)&&(this._downPointOrig={x:t.x,y:t.y},e.event.cancelable&&this.shouldPreventGestures(e.touch)&&this.fitsToBounds(t)&&e.event.preventDefault(),this.triggerMove(t),this.triggerDown(t))}},t.prototype.shouldPreventGestures=function(e){return!0},t.prototype.updatePoint=function(e){},t.prototype.handleCursorUp=function(e){if(this.interactionsEnabled&&(this.downPoint||Object(C.a)().isLocalElement(e.pointer,this.paper.svg,this.uid))){var t=O.h(e.pointer.point,this);this._adapterO&&this._adapterO.apply("cursorPoint",t),this.downPoint&&this.fitsToBounds(this.downPoint)&&("hard"==this._stick&&this._stickPoint&&(t=this._stickPoint),this._upPointOrig={x:t.x,y:t.y},this.triggerMove(t),this.triggerUp(t))}},Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},set:function(e){this._chart=e,g.d(this._chart.plotContainer)&&Object(C.a)().lockElement(this._chart.plotContainer.interactions)},enumerable:!0,configurable:!0}),t}(l.a);r.b.registeredClasses.Cursor=Oi;var Ii=function(e){function t(){var t=e.call(this)||this;t._lineX=new o.d,t._lineY=new o.d,t._xAxis=new o.d,t._yAxis=new o.d,t._snapToDisposers=[],t.className="XYCursor",t.behavior="zoomX",t.maxPanOut=.1;var i=new p.a;t.snapOnPan=!0;var n=t.createChild(h.a);n.shouldClone=!1,n.fillOpacity=.2,n.fill=i.getFor("alternativeBackground"),n.isMeasured=!1,n.visible=!1,n.interactionsEnabled=!1,t.selection=n,t._disposers.push(t.selection);var r=t.createChild(h.a);r.shouldClone=!1,r.stroke=i.getFor("grid"),r.fill=Object(L.b)(),r.strokeDasharray="3,3",r.isMeasured=!1,r.strokeOpacity=.4,r.interactionsEnabled=!1,r.y=0,t.lineX=r,t._disposers.push(t.lineX);var a=t.createChild(h.a);return a.shouldClone=!1,a.stroke=i.getFor("grid"),a.fill=Object(L.b)(),a.strokeDasharray="3,3",a.isMeasured=!1,a.strokeOpacity=.4,a.interactionsEnabled=!1,a.x=0,t.lineY=a,t._disposers.push(t.lineY),t.events.on("sizechanged",t.updateSize,t,!1),t._disposers.push(t._lineX),t._disposers.push(t._lineY),t._disposers.push(t._xAxis),t._disposers.push(t._yAxis),t.mask=t,t.hideSeriesTooltipsOnSelection=!0,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.updateSize=function(){this.lineX&&(this.lineX.path=f.g({x:0,y:0})+f.f({x:0,y:this.innerHeight})),this.lineY&&(this.lineY.path=f.g({x:0,y:0})+f.f({x:this.innerWidth,y:0}))},t.prototype.updateSelection=function(){if(this._usesSelection){var e=this.downPoint,t=this.behavior;if(e){var i=this.point;this.lineX&&(i.x=this.lineX.pixelX),this.lineY&&(i.y=this.lineY.pixelY);var n=this.selection,r=Math.min(i.x,e.x),a=Math.min(i.y,e.y),o=I.E(Math.abs(e.x-i.x),this._positionPrecision),s=I.E(Math.abs(e.y-i.y),this._positionPrecision);switch(t){case"zoomX":case"selectX":a=0,s=this.pixelHeight;break;case"zoomY":case"selectY":r=0,o=this.pixelWidth}n.x=r,n.y=a,n.path=f.k(o,s),n.validatePosition()}else"select"!=this._generalBehavior&&this.selection.hide()}},t.prototype.fixPoint=function(e){return e.x=Math.max(0,e.x),e.y=Math.max(0,e.y),e.x=Math.min(this.pixelWidth,e.x),e.y=Math.min(this.pixelHeight,e.y),e},t.prototype.triggerMoveReal=function(t,i){e.prototype.triggerMoveReal.call(this,t,i);var n=this.snapToSeries;if(n&&!this.downPoint)if(n instanceof xe)n.isHidden&&this.updateLinePositions(t);else{var r=!0;V.d(n,(function(e){e.isHidden||(r=!1)})),r&&this.updateLinePositions(t)}else this.updateLinePositions(t);this.downPoint&&I.q(this.downPoint,t)>3&&"pan"==this._generalBehavior&&(this.getPanningRanges(),this.dispatch("panning"))},t.prototype.updateLinePositions=function(e){e=this.fixPoint(this.point),this.lineX&&this.lineX.visible&&!this.xAxis&&(this.lineX.x=e.x),this.lineY&&this.lineY.visible&&!this.yAxis&&(this.lineY.y=e.y),this.updateSelection()},t.prototype.triggerDownReal=function(t){if(this.visible&&!this.isHiding)if("select"==this._generalBehavior&&(this.selection.parent=this.parent),this.fitsToBounds(t)){this.downPoint={x:t.x,y:t.y},this.updatePoint(t),this.point.x=this.downPoint.x,this.point.y=this.downPoint.y;var i=this.selection,n=this.downPoint.x,r=this.downPoint.y;this._usesSelection&&(i.x=n,i.y=r,i.path="",i.show()),e.prototype.triggerDownReal.call(this,t)}else this.downPoint=void 0;else this.downPoint=void 0},t.prototype.updatePoint=function(e){this.lineX&&(e.x=this.lineX.pixelX),this.lineY&&(e.y=this.lineY.pixelY)},t.prototype.triggerUpReal=function(t){if(this.hasMoved())this.downPoint&&(this.upPoint=t,this.updatePoint(this.upPoint),"pan"!=this._generalBehavior&&this.getRanges(),"select"!=this._generalBehavior&&this.selection.hide(),e.prototype.triggerUpReal.call(this,t));else{if("select"!=this._generalBehavior?this.selection.hide(0):(this.xRange=void 0,this.yRange=void 0,this.dispatchImmediately("selectended")),"pan"==this._generalBehavior)Object(C.a)().setGlobalStyle(E.a.default);this.dispatchImmediately("behaviorcanceled")}this.downPoint=void 0,this.dispatch("cursorpositionchanged")},t.prototype.hasMoved=function(){return("zoomX"==this.behavior||"panX"==this.behavior?I.r(this._upPointOrig,this._downPointOrig):"zoomY"==this.behavior||"panY"==this.behavior?I.w(this._upPointOrig,this._downPointOrig):I.q(this._upPointOrig,this._downPointOrig))>Object(C.a)().getHitOption(this.interactions,"hitTolerance")},t.prototype.getPanningRanges=function(){var e=I.E(this.downPoint.x/this.innerWidth,5),t=1-I.E(this.downPoint.y/this.innerHeight,5),i=e-I.E(this.point.x/this.innerWidth,5),n=t-(1-I.E(this.point.y/this.innerHeight,5));this.xRange={start:i,end:1+i},this.yRange={start:n,end:1+n},"panX"==this.behavior&&(this.yRange.start=0,this.yRange.end=1),"panY"==this.behavior&&(this.xRange.start=0,this.xRange.end=1)},t.prototype.getRanges=function(){this.lineX&&(this.upPoint.x=this.lineX.pixelX),this.lineY&&(this.upPoint.y=this.lineY.pixelY),O.R(this.selection);var e=I.E(this.downPoint.x/this.innerWidth,5),t=I.E(this.upPoint.x/this.innerWidth,5),i=1-I.E(this.downPoint.y/this.innerHeight,5),n=1-I.E(this.upPoint.y/this.innerHeight,5);this.xRange={start:I.C(e,t),end:I.B(e,t)},this.yRange={start:I.C(i,n),end:I.B(i,n)}},Object.defineProperty(t.prototype,"behavior",{get:function(){return this.getPropertyValue("behavior")},set:function(e){this.setPropertyValue("behavior",e,!0),this._usesSelection=!1,-1!=e.indexOf("zoom")&&(this._generalBehavior="zoom",this._usesSelection=!0),-1!=e.indexOf("select")&&(this._generalBehavior="select",this._usesSelection=!0),-1!=e.indexOf("pan")&&(this._generalBehavior="pan",this._usesSelection=!1)},enumerable:!0,configurable:!0}),t.prototype.shouldPreventGestures=function(e){return(!this.interactions.isTouchProtected||!e)&&"none"!=this.behavior},Object.defineProperty(t.prototype,"fullWidthLineX",{get:function(){return this.getPropertyValue("fullWidthLineX")},set:function(e){this.setPropertyValue("fullWidthLineX",e),e||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullWidthLineY",{get:function(){return this.getPropertyValue("fullWidthLineY")},set:function(e){this.setPropertyValue("fullWidthLineY",e),e||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideSeriesTooltipsOnSelection",{get:function(){return this.getPropertyValue("hideSeriesTooltipsOnSelection")},set:function(e){this.setPropertyValue("hideSeriesTooltipsOnSelection",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxTooltipDistance",{get:function(){return this.getPropertyValue("maxTooltipDistance")},set:function(e){this.setPropertyValue("maxTooltipDistance",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(e){this.setPropertyValue("maxPanOut",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"xAxis",{get:function(){return this._xAxis.get()},set:function(e){var t=this;this._xAxis.get()!=e&&this._xAxis.set(e,new o.c([e.tooltip.events.on("positionchanged",this.handleXTooltipPosition,this,!1),e.events.on("rangechangestarted",(function(e){t.hide(0),t.preventShow=!0}),void 0,!1),e.events.on("rangechangeended",(function(e){t.preventShow=!1,t.hide(0),t.dispatch("cursorpositionchanged")}),void 0,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yAxis",{get:function(){return this._yAxis.get()},set:function(e){var t=this;this._yAxis.get()!=e&&this._yAxis.set(e,new o.c([e.tooltip.events.on("positionchanged",this.handleYTooltipPosition,this,!1),e.events.on("rangechangestarted",(function(e){t.hide(0),t.__disabled=!0}),void 0,!1),e.events.on("rangechangeended",(function(e){t.__disabled=!1,t.hide(0),t.dispatch("cursorpositionchanged")}),void 0,!1)]))},enumerable:!0,configurable:!0}),t.prototype.handleXTooltipPosition=function(e){var t=this.xAxis.tooltip,i=O.O({x:t.pixelX,y:t.pixelY},this),n=i.x;if(i.y=1,this.lineX&&(this.lineX.x=n,this.fitsToBounds(i)||this.hide()),this.xAxis&&this.fullWidthLineX){var r=this.xAxis.currentItemStartPoint,a=this.xAxis.currentItemEndPoint;if(r&&a){this.lineX.x=n;var o=a.x-r.x;this.lineX.path=f.k(o,this.innerHeight,-o/2)}}},t.prototype.handleYTooltipPosition=function(e){var t=this.yAxis.tooltip,i=O.O({x:t.pixelX,y:t.pixelY},this),n=i.y;if(i.x=1,this.lineY&&(this.lineY.y=n,this.fitsToBounds(i)||this.hide()),this.yAxis&&this.fullWidthLineY){var r=this.yAxis.currentItemStartPoint,a=this.yAxis.currentItemEndPoint;if(r&&a){this.lineY.y=n;var o=a.y-r.y;this.lineY.path=f.k(this.innerWidth,o,0,-o/2)}}},Object.defineProperty(t.prototype,"lineX",{get:function(){return this._lineX.get()},set:function(e){e?(e.setElement(this.paper.add("path")),this._lineX.set(e,e.events.on("positionchanged",this.updateSelection,this,!1)),e.interactionsEnabled=!1,e.parent=this):this._lineX.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineY",{get:function(){return this._lineY.get()},set:function(e){e?(e.setElement(this.paper.add("path")),this._lineY.set(e,e.events.on("positionchanged",this.updateSelection,this,!1)),e.parent=this,e.interactionsEnabled=!1):this._lineY.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._selection},set:function(e){this._selection=e,e&&(e.element=this.paper.add("path"),e.parent=this)},enumerable:!0,configurable:!0}),t.prototype.processConfig=function(t){var i=this;if(t&&(g.d(t.xAxis)&&g.j(t.xAxis)&&(this.map.hasKey(t.xAxis)?t.xAxis=this.map.getKey(t.xAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+t.xAxis+'" found for `xAxis`'),delete t.xAxis)),g.d(t.yAxis)&&g.j(t.yAxis)&&(this.map.hasKey(t.yAxis)?t.yAxis=this.map.getKey(t.yAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+t.yAxis+'" found for `yAxis`'),delete t.yAxis)),g.d(t.snapToSeries))){var n=g.e(t.snapToSeries)?t.snapToSeries:[t.snapToSeries],r=!1;V.d(n,(function(e,t){g.j(e)&&(i.map.hasKey(e)?n[t]=i.map.getKey(e):(i.processingErrors.push('[XYCursor] No series with id "'+e+'" found for `series`'),r=!0))})),r?delete t.snapToSeries:t.snapToSeries=n}e.prototype.processConfig.call(this,t)},Object.defineProperty(t.prototype,"snapToSeries",{get:function(){return this.getPropertyValue("snapToSeries")},set:function(e){var t=this;this.setPropertyValue("snapToSeries",e)&&(e instanceof xe&&(e=[e]),this._snapToDisposers&&V.d(this._snapToDisposers,(function(e){e.dispose()})),this._snapToDisposers=[],e&&V.d(e,(function(e){t._snapToDisposers.push(e.events.on("tooltipshownat",(function(){t.handleSnap(e)}),void 0,!1))})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snapOnPan",{get:function(){return this.getPropertyValue("snapOnPan")},set:function(e){this.setPropertyValue("snapOnPan",e)},enumerable:!0,configurable:!0}),t.prototype.handleSnap=function(e){if(!this.downPoint){var t=e.getTooltipX()+e.xAxis.pixelX,i=e.getTooltipY()+e.yAxis.pixelY,n=e.xAxis,r=e.yAxis;n&&n.renderer.opposite&&(i-=this.pixelHeight),this.point={x:t,y:i},this.getPositions();var a=t,o=i;t-=this.pixelWidth,r&&r.renderer.opposite&&(t+=this.pixelWidth);var s=e.tooltip,l=s.animationDuration,u=s.animationEasing;n instanceof he&&!(n instanceof me)&&r instanceof he&&!(r instanceof me)?(e.yAxis.showTooltipAtPosition(this.yPosition),e.xAxis.showTooltipAtPosition(this.xPosition)):(e.baseAxis==e.xAxis&&e.yAxis.showTooltipAtPosition(this.yPosition),e.baseAxis==e.yAxis&&e.xAxis.showTooltipAtPosition(this.xPosition)),this.lineY.x=t,this.lineX.y=i,this.xAxis||this.lineX.animate([{property:"x",to:a}],l,u),this.yAxis||this.lineY.animate([{property:"y",to:o}],l,u)}},t.prototype.dispose=function(){this.hide(0),e.prototype.dispose.call(this)},t}(Oi);r.b.registeredClasses.XYCursor=Ii;var Ei=function(e){function t(){var t=e.call(this)||this;return t.className="RadarCursor",t.radius=Object(d.c)(100),t.innerRadius=Object(d.c)(0),t.applyTheme(),t.mask=void 0,t}return Object(n.c)(t,e),t.prototype.fitsToBounds=function(e){var t=I.q(e);return t<this.truePixelRadius+1&&t>this.pixelInnerRadius-1},Object.defineProperty(t.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(e){this.setPropertyValue("startAngle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(e){this.setPropertyValue("endAngle",e,!0)},enumerable:!0,configurable:!0}),t.prototype.triggerMoveReal=function(t,i){this.xAxis&&(!this.xAxis||this.xAxis.cursorTooltipEnabled&&!this.xAxis.tooltip.disabled)||this.updateLineX(this.point),this.yAxis&&(!this.yAxis||this.yAxis.cursorTooltipEnabled&&!this.yAxis.tooltip.disabled)||this.updateLineY(this.point),this.updateSelection(),e.prototype.triggerMoveReal.call(this,t,i)},t.prototype.updateLineX=function(e){var t=this.pixelRadius,i=this.startAngle,n=this.endAngle,r=this.pixelInnerRadius;if(t>0&&g.h(i)&&g.h(n)&&g.h(r)){var a=I.h(I.j(e),i,n),o=void 0;if(this.lineX&&this.lineX.visible){if(this.lineX.moveTo({x:0,y:0}),this.xAxis&&this.fullWidthLineX){var s=this.xAxis.currentItemStartPoint,l=this.xAxis.currentItemEndPoint;if(s&&l){var u=I.h(I.j(s),i,n),c=I.h(I.j(l),i,n)-u;i<n?c<0&&(c+=360):c>0&&(c-=360),a-=c/2,o=f.g({x:r*I.g(a),y:r*I.F(a)})+f.f({x:t*I.g(a),y:t*I.F(a)})+f.b(a,c,t)+f.f({x:r*I.g(a+c),y:r*I.F(a+c)})+f.b(a+c,-c,r)}}o||(o=f.g({x:r*I.g(a),y:r*I.F(a)})+f.f({x:t*I.g(a),y:t*I.F(a)})),this.lineX.path=o}}},t.prototype.updateLineY=function(e){if(this.lineY&&this.lineY.visible){var t=this.startAngle,i=this.endAngle,n=this.truePixelRadius,r=I.i(I.q(e),0,this.truePixelRadius);if(g.h(r)&&g.h(t)){this.lineY.moveTo({x:0,y:0});var a=void 0,o=i-t;if(this.yAxis&&this.fullWidthLineY){var s=this.yAxis.currentItemStartPoint,l=this.yAxis.currentItemEndPoint;if(s&&l){var u=I.i(I.q(s),0,n);r=I.i(I.q(l),0,n),a=f.g({x:r*I.g(t),y:r*I.F(t)})+f.b(t,o,r),a+=f.g({x:u*I.g(i),y:u*I.F(i)})+f.b(i,-o,u)}}a||(a=f.g({x:r*I.g(t),y:r*I.F(t)})+f.b(t,i-t,r)),this.lineY.path=a}}},t.prototype.updateSelection=function(){if(this._usesSelection){var e=this.downPoint;if(e){var t=this.point,i=this.pixelRadius,n=this.truePixelRadius,r=this.pixelInnerRadius,a=Math.min(this.startAngle,this.endAngle),o=Math.max(this.startAngle,this.endAngle),s=I.h(I.j(e),a,o),l=I.h(I.j(t),a,o),u=I.q(e);if(u<n){var c=I.i(I.q(t),0,n);this._prevAngle=l;var h=f.g({x:0,y:0}),p=I.F(s),d=I.g(s),m=I.F(l),y=I.g(l),v=this.behavior;"zoomX"==v||"selectX"==v?h+=f.f({x:i*d,y:i*p})+f.b(s,l-s,i)+f.f({x:r*y,y:r*m})+f.b(l,s-l,r):"zoomY"==v||"selectY"==v?h=f.g({x:c*I.g(a),y:c*I.F(a)})+f.b(a,o-a,c)+f.f({x:u*I.g(o),y:u*I.F(o)})+f.b(o,a-o,u)+f.d():"zoomXY"==v&&(h=f.g({x:c*I.g(s),y:c*I.F(s)})+f.b(s,l-s,c)+f.f({x:u*I.g(l),y:u*I.F(l)})+f.b(l,s-l,u)+f.d()),this.selection.path=h}this.selection.moveTo({x:0,y:0})}}},t.prototype.getPositions=function(){if(this.chart){var e=this.pixelInnerRadius,t=this.truePixelRadius-e,i=this.startAngle,n=this.endAngle,r=(I.h(I.j(this.point),i,n)-i)/(n-i);this.xPosition=r,this.yPosition=I.i((I.q(this.point)-e)/t,0,1)}},t.prototype.updatePoint=function(e){},t.prototype.handleXTooltipPosition=function(e){if(this.xAxis.cursorTooltipEnabled){var t=this.xAxis.tooltip;this.updateLineX(O.O({x:t.pixelX,y:t.pixelY},this))}},t.prototype.handleYTooltipPosition=function(e){if(this.yAxis.cursorTooltipEnabled){var t=this.yAxis.tooltip;this.updateLineY(O.O({x:t.pixelX,y:t.pixelY},this))}},t.prototype.updateLinePositions=function(e){},t.prototype.getRanges=function(){var e=this.downPoint;if(e){var t=this.upPoint;if(this.chart){var i=this.pixelRadius,n=this.startAngle,r=this.endAngle,a=I.h(I.j(e),this.startAngle,this.endAngle),o=I.h(I.j(t),this.startAngle,this.endAngle),s=I.i(I.q(e),0,i),l=I.i(I.q(t),0,i),u=0,c=1,h=0,p=1,d=this.behavior;if("zoomX"==d||"selectX"==d||"zoomXY"==d||"selectXY"==d){var f=r-n;u=I.E((a-n)/f,5),c=I.E((o-n)/f,5)}"zoomY"!=d&&"selectY"!=d&&"zoomXY"!=d&&"selectXY"!=d||(h=I.E(s/i,5),p=I.E(l/i,5)),this.xRange={start:Math.min(u,c),end:Math.max(u,c)},this.yRange={start:Math.min(h,p),end:Math.max(h,p)},"selectX"==this.behavior||"selectY"==this.behavior||"selectXY"==this.behavior||this.selection.hide()}}},t.prototype.updateSize=function(){},Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPercentProperty("radius",e,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelRadius",{get:function(){return O.D(this.radius,this.truePixelRadius)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"truePixelRadius",{get:function(){return O.E(Object(d.c)(100),I.C(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(e){this.setPercentProperty("innerRadius",e,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelInnerRadius",{get:function(){var e=this.innerRadius;return e instanceof d.a&&(e=Object(d.c)(100*e.value*this.chart.innerRadiusModifyer)),O.D(e,this.truePixelRadius)||0},enumerable:!0,configurable:!0}),t.prototype.fixPoint=function(e){return e},t}(Ii);r.b.registeredClasses.RadarCursor=Ei},function(e,t){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,i(t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},,,,function(e,t,i){var n=i(172);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){"use strict";var n,r,a,o=i(244),s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function l(){a=!1}function u(e){if(e){if(e!==n){if(e.length!==s.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,i){return t!==i.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,l()}}else n!==s&&(n=s,l())}function c(){return a||(a=function(){n||u(s);for(var e,t=n.split(""),i=[],r=o.nextValue();t.length>0;)r=o.nextValue(),e=Math.floor(r*t.length),i.push(t.splice(e,1)[0]);return i.join("")}())}e.exports={get:function(){return n||s},characters:function(e){return u(e),n},seed:function(e){o.seed(e),r!==e&&(l(),r=e)},lookup:function(e){return c()[e]},shuffled:c}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(13),r=function(){function e(){}return e.opacity=1,e.strokeOpacity=1,e.strokeWidth=1,e.fillOpacity=1,e.fill=Object(n.b)("#000000"),e.stroke=Object(n.b)("#000000"),e.focusable=void 0,e.tabindex=0,e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(2),r=function(e){function t(t){return e.call(this,t)||this}return Object(n.c)(t,e),t.prototype.add=function(e){e&&this.node.appendChild(e.node)},t.prototype.addToBack=function(e){if(e){var t=this.node.childNodes[0];t?t!=e.node&&this.node.insertBefore(e.node,t):this.node.appendChild(e.node)}},t.prototype.removeElement=function(e){if(e)try{e.node&&e.node.parentNode==this.node&&this.node.removeChild(e.node)}catch(t){}},t.prototype.hasChild=function(e){for(var t=0;t<this.node.childNodes.length;t++)if(this.node.childNodes[t]==e.node)return!0;return!1},Object.defineProperty(t.prototype,"content",{get:function(){return this.node.innerHTML},set:function(e){this.node.innerHTML=e},enumerable:!0,configurable:!0}),t.prototype.removeChildren=function(){if(this.node.childNodes)for(;this.node.childNodes.length>0;){var e=this.node.firstChild;e&&e.parentNode&&e.parentNode.removeChild(e)}},t}(i(82).a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(2),r=i(115),a=i(26),o=i(12),s=i(24),l=i(22),u=i(0),c=function(e){function t(t){var i=e.call(this)||this;return i._eventDispatcher=new r.a(i),i.eventDisposers=new s.a,i.replacedStyles=new s.a,i._clickable=!1,i._contextMenuDisabled=!1,i._hoverable=!1,i._trackable=!1,i._draggable=!1,i._swipeable=!1,i._resizable=!1,i._wheelable=!1,i._inert=!1,i._isHover=!1,i.isRealHover=!1,i._isHoverByTouch=!1,i._isDown=!1,i._isFocused=!1,i._isTouchProtected=!1,i._inertiaOptions=new s.a,i.inertias=new s.a,i._hitOptions={},i._hoverOptions={},i._swipeOptions={},i._keyboardOptions={},i._mouseOptions={},i._cursorOptions={defaultStyle:[{property:"cursor",value:"default"}]},i._disposers.push(i._eventDispatcher),i._element=t,i.className="InteractionObject",i._disposers.push(new s.b(i.inertias)),i._disposers.push(new s.b(i.eventDisposers)),i.applyTheme(),i}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHover",{get:function(){return this._isHover},set:function(e){this.isHover!=e&&(this._isHover=e,e?Object(l.a)().overObjects.moveValue(this):(this.isRealHover=!1,Object(l.a)().overObjects.removeValue(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHoverByTouch",{get:function(){return this._isHoverByTouch},set:function(e){this.isHoverByTouch!=e&&(this._isHoverByTouch=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overPointers",{get:function(){return this._overPointers||(this._overPointers=new o.a),this._overPointers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDown",{get:function(){return this._isDown},set:function(e){this.isDown!=e&&(this._isDown=e,e?Object(l.a)().downObjects.moveValue(this):Object(l.a)().downObjects.removeValue(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downPointers",{get:function(){return this._downPointers||(this._downPointers=new o.a),this._downPointers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFocused",{get:function(){return this._isFocused},set:function(e){this.isFocused!=e&&(this._isFocused=e,Object(l.a)().focusedObject=e?this:void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTouchProtected",{get:function(){return this._isTouchProtected},set:function(e){this._isTouchProtected!=e&&(this._isTouchProtected=e,e?Object(l.a)().unprepElement(this):(this.draggable||this.swipeable||this.trackable||this.resizable)&&Object(l.a)().prepElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clickable",{get:function(){return this._clickable},set:function(e){this._clickable!==e&&(this._clickable=e,Object(l.a)().processClickable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contextMenuDisabled",{get:function(){return this._contextMenuDisabled},set:function(e){this._contextMenuDisabled!==e&&(this._contextMenuDisabled=e,Object(l.a)().processContextMenu(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverable",{get:function(){return this._hoverable},set:function(e){this._hoverable!==e&&(this._hoverable=e,Object(l.a)().processHoverable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackable",{get:function(){return this._trackable},set:function(e){this._trackable!==e&&(this._trackable=e,Object(l.a)().processTrackable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"draggable",{get:function(){return this._draggable},set:function(e){this._draggable!==e&&(this._draggable=e,Object(l.a)().processDraggable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swipeable",{get:function(){return this._swipeable},set:function(e){this._swipeable!==e&&(this._swipeable=e,Object(l.a)().processSwipeable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizable",{get:function(){return this._resizable},set:function(e){this._resizable!==e&&(this._resizable=e,Object(l.a)().processResizable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wheelable",{get:function(){return this._wheelable},set:function(e){this._wheelable!==e&&(this._wheelable=e,Object(l.a)().processWheelable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inert",{get:function(){return this._inert},set:function(e){this._inert!==e&&(this._inert=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusable",{get:function(){return this._focusable},set:function(e){this._focusable!==e&&(this._focusable=e,this._focusable&&-1==this.tabindex&&(this._tabindex=1),Object(l.a)().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabindex",{get:function(){return u.c(this._tabindex,-1)},set:function(e){this._tabindex!==e&&(this._tabindex=e,e>-1&&(this.focusable=!0),Object(l.a)().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalPosition",{get:function(){return this._originalPosition||{x:0,y:0}},set:function(e){this._originalPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalScale",{get:function(){return u.c(this._originalScale,1)},set:function(e){this._originalScale!==e&&(this._originalScale=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalAngle",{get:function(){return u.c(this._originalAngle,0)},set:function(e){this._originalAngle!==e&&(this._originalAngle=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inertiaOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("inertiaOptions",this._inertiaOptions):this._inertiaOptions},set:function(e){this._inertiaOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hitOptions",this._hitOptions):this._hitOptions},set:function(e){this._hitOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hoverOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hoverOptions",this._hoverOptions):this._hoverOptions},set:function(e){this._hoverOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swipeOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("swipeOptions",this._swipeOptions):this._swipeOptions},set:function(e){this._swipeOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyboardOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("keyboardOptions",this._keyboardOptions):this._keyboardOptions},set:function(e){this._keyboardOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("mouseOptions",this._mouseOptions):this._mouseOptions},set:function(e){this._mouseOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursorOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("cursorOptions",this._cursorOptions):this._cursorOptions},set:function(e){this._cursorOptions=e},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.inertiaOptions=t.inertiaOptions,this.hitOptions=t.hitOptions,this.hoverOptions=t.hoverOptions,this.swipeOptions=t.swipeOptions,this.keyboardOptions=t.keyboardOptions,this.cursorOptions=t.cursorOptions,this.contextMenuDisabled=t.contextMenuDisabled,Object(l.a)().applyCursorOverStyle(this)},t.prototype.setEventDisposer=function(e,t,i){var n=this.eventDisposers.getKey(e);t?null==n&&this.eventDisposers.setKey(e,i()):null!=n&&(n.dispose(),this.eventDisposers.removeKey(e))},t.prototype.dispose=function(){e.prototype.dispose.call(this);var t=Object(l.a)();t.overObjects.removeValue(this),t.downObjects.removeValue(this),t.trackedObjects.removeValue(this),t.transformedObjects.removeValue(this),this.isHover&&this.wheelable&&t.unlockWheel(),t.focusedObject===this&&(t.focusedObject=void 0)},t}(a.b)},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(22),r=i(25),a=i(7),o=function(){function e(e,t){this._disposed=!1,this.directionX=0,this.directionY=0,this.interaction=e,this.keyboardEvent=t,this._startedOn=(new Date).getTime(),Object(n.a)().processDragStart(e),r.a.animations.push(this),this.update()}return e.prototype.update=function(){var e=this.interaction,t=Object(n.a)().getKeyboardOption(e,"speed"),i=Object(n.a)().getKeyboardOption(e,"accelleration"),r=Object(n.a)().getKeyboardOption(e,"accellerationDelay"),a={x:0,y:0};this.keyboardEvent.shiftKey?(t*=.5,i=1):this.keyboardEvent.ctrlKey&&(t*=2);var o=(new Date).getTime()-this._startedOn,s=o-r;if(i>0&&s>0){var l=o/r;o=r,a.x+=this.directionX*(t*i*l*s),a.y+=this.directionY*(t*i*l*s)}a.x+=this.directionX*(t*o),a.y+=this.directionY*(t*o),Object(n.a)().handleTransformMove(e,a,{x:0,y:0},this.keyboardEvent,!0,!1)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(Object(n.a)().processDragStop(this.interaction),a.o(r.a.animations,this))},e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(2),r=i(26),a=i(22),o=i(37),s=i(0),l=function(e){function t(t,i,n,r){var a=e.call(this)||this;return a.animations=[],a.className="Inertia",a.interaction=t,a.type=i,a.point=n,a.startPoint=r,a._disposers.push(new o.b(a.animations)),a}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"x",{get:function(){return this.point.x},set:function(e){s.h(e)&&(this.point.x=e,this.handleMove())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.point.y},set:function(e){s.h(e)&&(this.point.y=e,this.handleMove())},enumerable:!0,configurable:!0}),t.prototype.handleMove=function(){if(this.interaction.events.isEnabled("drag")){var e={type:"drag",target:this.interaction,shift:{x:this.x-this.startPoint.x,y:this.y-this.startPoint.y},startPoint:this.startPoint,point:{x:this.x,y:this.y},touch:!1};this.interaction.events.dispatchImmediately("drag",e)}},t.prototype.done=function(){this.interaction.inertias.removeKey(this.type),"move"===this.type&&Object(a.a)().processDragStop(this.interaction),this.dispose()},t}(r.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var n,r=i(2),a=i(145),o=i(32),s=i(16),l=i(101),u=i(12),c=i(24),h=i(74),p=i(103),d=i(102),f=i(53),m=i(104),y=i(13),v=i(3),g=i(23),_=i(14),b=i(149),x=i(11),w=i(92),k=i(0),P=i(91),S=i(6),T=i(7),C=i(1),O=i(28);var I=/src: ([^;]+);/;function E(e){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(i){switch(i.label){case 0:t=e.sheet,i.label=1;case 1:return i.trys.push([1,2,,4]),[2,t.cssRules];case 2:return i.sent(),[4,new Promise((function(i,n){e.addEventListener("load",(function(){i(t.cssRules)}),!0),e.addEventListener("error",(function(e){n(e)}),!0),setTimeout((function(){n(new Error("Timeout while waiting for <style> to load"))}),1e4)}))];case 3:return[2,i.sent()];case 4:return[2]}}))}))}function A(e,t,i){return Object(r.b)(this,void 0,void 0,(function(){var n,a,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,w.a(t)];case 1:return n=r.sent(),[3,3];case 2:return a=r.sent(),console.error("Failed to load stylesheet",t,a),[2];case 3:(o=e.createElement("style")).textContent=n.response,""!=g.a.nonce&&o.setAttribute("nonce",g.a.nonce),e.head.appendChild(o),r.label=4;case 4:return r.trys.push([4,,7,8]),[4,E(o)];case 5:return s=r.sent(),[4,M(e,t,s,i)];case 6:return r.sent(),[3,8];case 7:return e.head.removeChild(o),[7];case 8:return[2]}}))}))}function M(e,t,i,n){return Object(r.b)(this,void 0,void 0,(function(){var a,o,s,l,u;return Object(r.d)(this,(function(r){switch(r.label){case 0:for(a=[],o=i.length,s=0;s<o;s++)(l=i[s]).type===CSSRule.IMPORT_RULE?(u=l.href)&&(u=S.y(t,u),a.push(A(e,u,n))):n(t,l);return a.length?[4,Promise.all(a)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}function D(e){return Object(r.b)(this,void 0,void 0,(function(){var t,i;return Object(r.d)(this,(function(n){switch(n.label){case 0:(t=document.createElement("iframe")).src="about:blank",t.setAttribute("title",""),document.head.appendChild(t),n.label=1;case 1:return n.trys.push([1,,3,4]),i=t.contentDocument,[4,Promise.all(T.l(document.styleSheets,(function(t){var n=t.href;return null==n?M(i,location.href,t.cssRules,e):(n=S.y(location.href,n),A(i,n,e))})))];case 2:return n.sent(),[3,4];case 3:return document.head.removeChild(t),[7];case 4:return[2]}}))}))}var j=function(e){function t(t){var i=e.call(this)||this;return i.adapter=new o.a(i),i._formatOptions=new c.a,i._extraSprites=[],i._validateSprites=[],i.dataFieldsOrder=[],i._dynamicDataFields=!0,i._removedObjects=new u.a,i._hiddenObjects=[],i._objectsAlreadyHidden=!1,i._filePrefix="amCharts",i.useWebFonts=!0,i.useRetina=!0,i.useSimplifiedExport=!0,i.timeoutDelay=2e3,i._exportRunning=!1,i._prevHasData=!1,i._container=t,i.className="Export",i._formatOptions.setKey("png",{}),i._formatOptions.setKey("jpg",{quality:.8}),i._formatOptions.setKey("gif",{}),i._formatOptions.setKey("svg",{}),i._formatOptions.setKey("pdf",{fontSize:14,imageFormat:"png",align:"left",addURL:!0,addColumnNames:!0}),i._formatOptions.setKey("json",{indent:2,useLocale:!0}),i._formatOptions.setKey("csv",{addColumnNames:!0,emptyAs:"",addBOM:!0}),i._formatOptions.setKey("xlsx",{addColumnNames:!0,useLocale:!0,emptyAs:""}),i._formatOptions.setKey("html",{addColumnNames:!0,emptyAs:""}),i._formatOptions.setKey("pdfdata",{fontSize:14,imageFormat:"png",addURL:!0,addColumnNames:!0,emptyAs:""}),i._formatOptions.setKey("print",{delay:500,printMethod:"iframe"}),i.adapter.add("options",(function(e){var t=i._formatOptions.getKey(e.type);return e.options?e.options=x.j(t,e.options):e.options=t,e})),i.applyTheme(),i.dispatchImmediately("inited"),i}return Object(r.c)(t,e),Object.defineProperty(t.prototype,"menu",{get:function(){return this._menu},set:function(e){var t=this;this._menu&&this.removeDispose(this._menu),this._menu=e,this._menu.container=this.container,this._menu.language=this._language,this._menu.adapter.add("branch",(function(e){return e.branch.unsupported=!t.typeSupported(e.branch.type),e})),this._menu.events.on("hit",(function(e){t.export(e.branch.type,e.branch.options),t.menu.close()})),this._menu.events.on("enter",(function(e){t.export(e.branch.type,e.branch.options),t.menu.close()})),this._menu.events.on("over",(function(e){t._disablePointers()})),this._menu.events.on("out",(function(e){setTimeout((function(){t._releasePointers()}),10)})),this.dispatchImmediately("menucreated"),this._menu.adapter.add("classPrefix",(function(e){return e.classPrefix=g.a.classNamePrefix+e.classPrefix,e})),this._disposers.push(this._menu)},enumerable:!0,configurable:!0}),t.prototype.typeSupported=function(e){var t=!0,i=this.getFormatOptions(e);return k.d(i)&&i.disabled?t=!1:"pdf"===e||("xlsx"===e?t=!!this._hasData():("print"!=e||window.print)&&(-1===["json","csv","html","pdfdata"].indexOf(e)||this._hasData())||(t=!1)),this.adapter.apply("supported",{supported:t,type:e}).supported},t.prototype._hasData=function(){return this.data&&this.data.length},t.prototype._getFunction=function(e){switch(e){case"png":case"gif":case"jpg":return this.getImage;case"svg":return this.getSVG;case"pdf":case"pdfdata":return this.getPDF;case"xlsx":return this.getExcel;case"csv":return this.getCSV;case"json":return this.getJSON;case"html":return this.getHTML;case"print":return this.getPrint;default:return this.unsupported}},t.prototype.export=function(e,t){return Object(r.b)(this,void 0,void 0,(function(){var i,n,a,o,s,l=this;return Object(r.d)(this,(function(r){switch(r.label){case 0:return"custom"==e?(this.handleCustom(t),[2,!0]):(this._exportRunning=!0,this.events.isEnabled("exportstarted")&&(i={type:"exportstarted",target:this,format:e,options:t},this.events.dispatchImmediately("exportstarted",i)),this.showPreloader(),this.timeoutDelay&&(this.hideTimeout(),this._timeoutTimeout=this.setTimeout((function(){if(l.events.isEnabled("exporttimedout")){var i={type:"exporttimedout",target:l,format:e,options:t};l.events.dispatchImmediately("exporttimedout",i)}l.showTimeout()}),this.timeoutDelay)),this.hideNonExportableSprites(),n=this._getFunction(e),t=this.adapter.apply("options",{options:t,type:e}).options,[4,(n=this.adapter.apply("exportFunction",{func:n,type:e,options:t}).func).call(this,e,t)]);case 1:return a=r.sent(),this._exportRunning=!1,this._releasePointers(),this.restoreNonExportableSprites(),a?(this.events.isEnabled("exportfinished")&&(o={type:"exportfinished",target:this,format:e,options:t},this.events.dispatchImmediately("exportfinished",o)),this.hidePreloader(),this.hideTimeout(),this.menu&&this.menu.close(),"print"===e?[2,this.print(a,t,this.adapter.apply("title",{title:this.title,options:t}).title)]:"pdfdata"==e?[2,this.download(a,this.filePrefix+".pdf")]:[2,this.download(a,this.filePrefix+"."+e,t&&t.addBOM)]):(this.events.isEnabled("error")&&(s={type:"error",target:this,format:e,options:t},this.events.dispatchImmediately("error",s)),[2,!1])}}))}))},t.prototype.unsupported=function(e,t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return[2,""]}))}))},t.prototype.handleCustom=function(e){k.d(e)&&k.d(e.callback)&&e.callback.call(e.callbackTarget||this,e)},t.prototype.getPrint=function(e,t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){return[2,this.getImage("png",t)]}))}))},t.prototype.getFontFamilies=function(){return Object(r.b)(this,void 0,void 0,(function(){var e,t,i,n,a=this;return Object(r.d)(this,(function(o){switch(o.label){case 0:return e=this.getDOMURL(),t=[],i=[],[4,D((function(n,o){if(o.type===CSSRule.FONT_FACE_RULE){var s=o.cssText,l=I.exec(s);if(null!==l){var u=l[1].split(/ *, */).map((function(i){return Object(r.b)(a,void 0,void 0,(function(){var a,o,s,l,u,c;return Object(r.d)(this,(function(r){switch(r.label){case 0:return null!==(a=/^url\(["']?([^"'\)]+)["']?\)([^,]*)$/.exec(i))?[3,1]:[2,i];case 1:if(o=a[2],s=S.y(n,a[1]),this.webFontFilter&&!s.match(this.webFontFilter))return[2,null];r.label=2;case 2:return r.trys.push([2,7,,8]),[4,w.a(s,void 0,{responseType:"blob"})];case 3:return l=r.sent(),null==window.navigator.msSaveOrOpenBlob?[3,4]:(u=e.createObjectURL(l.blob),t.push(u),[3,6]);case 4:return[4,(h=l.blob,new Promise((function(e,t){var i=new FileReader;i.onload=function(t){e(i.result)},i.onerror=function(e){t(e)},i.readAsDataURL(h)})))];case 5:u=r.sent(),r.label=6;case 6:return[2,'url("'+u+'")'+o];case 7:return c=r.sent(),console.error("Failed to load font",s,c),[2,null];case 8:return[2]}var h}))}))}));i.push(Promise.all(u).then((function(e){return 0===(e=e.filter((function(e){return null!=e}))).length?"":s.replace(I,"src: "+e.join(", ")+";")})))}}}))];case 1:return o.sent(),[4,Promise.all(i)];case 2:return n=o.sent(),[2,{blobs:t,cssText:n.filter((function(e){return!!e})).join("\n")}]}}))}))},t.prototype.getImage=function(e,t,i){return Object(r.b)(this,void 0,void 0,(function(){var n,a,o,s,l;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(n=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),k.d(t)||(t=this.getFormatOptions(e)),[4,this.awaitValidSprites()];case 1:return r.sent(),[4,this.simplifiedImageExport()];case 2:if(!r.sent())return[3,10];a=void 0,r.label=3;case 3:return r.trys.push([3,7,,9]),[4,this.getCanvas(t)];case 4:return a=r.sent(),!1===i?[3,6]:[4,this.addExtras(a,t)];case 5:a=r.sent(),r.label=6;case 6:return o=a.toDataURL(this.getContentType(e),t.quality),this.disposeCanvas(a),n||this.restoreNonExportableSprites(),[2,o];case 7:return s=r.sent(),console.error(s.message+"\n"+s.stack),P.b("Simple export failed, falling back to advanced export"),a&&this.disposeCanvas(a),[4,this.getImageAdvanced(e,t,i)];case 8:return l=r.sent(),n||this.restoreNonExportableSprites(),[2,l];case 9:return[3,12];case 10:return[4,this.getImageAdvanced(e,t,i)];case 11:return l=r.sent(),n||this.restoreNonExportableSprites(),[2,l];case 12:return[2]}}))}))},t.prototype.addExtras=function(e,t,i){return Object(r.b)(this,void 0,void 0,(function(){var n,a,o,l,u,c,h,p,d,f,m,y,v,g,_=this;return Object(r.d)(this,(function(b){switch(b.label){case 0:return this.extraSprites.length?(n=0,a=0,o=e.width,l=e.height,u=0,c=0,[4,Promise.all(T.l(this.extraSprites,(function(e){return Object(r.b)(_,void 0,void 0,(function(){var h,p,d,f;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(h=e instanceof s.a?{sprite:e,position:"bottom"}:e).position=h.position||"bottom",h.marginTop=h.marginTop||0,h.marginRight=h.marginRight||0,h.marginBottom=h.marginBottom||0,h.marginLeft=h.marginLeft||0,i?[4,h.sprite.exporting.getCanvasAdvanced(t)]:[3,2];case 1:return p=r.sent(),[3,4];case 2:return[4,h.sprite.exporting.getCanvas(t)];case 3:p=r.sent(),r.label=4;case 4:return d=p.width+h.marginLeft+h.marginRight,f=p.height+h.marginTop+h.marginBottom,"top"==h.position?(o=h.crop?l:C.B(o,d),a+=f):"right"==h.position?(l=h.crop?l:C.B(l,f),u+=d):"left"==h.position?(l=h.crop?l:C.B(l,f),n+=d):"bottom"===h.position&&(o=h.crop?l:C.B(o,d),c+=f),[2,{canvas:p,position:h.position,left:h.marginLeft,top:h.marginTop,width:d,height:f}]}}))}))})))]):[3,2];case 1:return h=b.sent(),(p=this.getDisposableCanvas()).width=n+o+u,p.height=a+l+c,d=p.getContext("2d"),(f=this.backgroundColor||this.findBackgroundColor(this.sprite.dom))&&(d.fillStyle=f.toString(),d.fillRect(0,0,p.width,p.height)),v=(m=n)+o,g=(y=a)+l,T.d(h,(function(e){"top"==e.position?(y-=e.height,d.drawImage(e.canvas,n+e.left,y+e.top)):"right"==e.position?(d.drawImage(e.canvas,v+e.left,a+e.top),v+=e.width):"left"==e.position?(m-=e.width,d.drawImage(e.canvas,m+e.left,a+e.top)):"bottom"===e.position&&(d.drawImage(e.canvas,n+e.left,g+e.top),g+=e.height),_.disposeCanvas(e.canvas)})),d.drawImage(e,n,a),[2,p];case 2:return[2,e]}}))}))},t.prototype.getCanvas=function(e){return Object(r.b)(this,void 0,void 0,(function(){var t,i,n,a,o,s,l,u,c,h,p,d,f,m,y,v,g;return Object(r.d)(this,(function(r){switch(r.label){case 0:k.d(e)||(e={}),t=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),i=this.getDOMURL(),n=null,a=null,r.label=1;case 1:return r.trys.push([1,,4,5]),s=this.sprite.pixelWidth,l=this.sprite.pixelHeight,u=_.j(this.sprite.dom),c=_.k(this.sprite.dom),h=e.scale||1,p=this.getPixelRatio(e),h=this.getAdjustedScale(s*p,l*p,h,e),(o=this.getDisposableCanvas()).style.width=s*h+"px",o.style.height=l*h+"px",o.width=s*h,o.height=l*h,d=o.getContext("2d"),t&&(d.fillStyle=t.toString(),d.fillRect(0,0,s*h,l*h)),f=[],this.useWebFonts&&f.push(this.getFontFamilies().then((function(e){return a=e.blobs,e.cssText}))),f.push(this.imagesToDataURI(this.sprite.dom,e)),f.push(this.prepForeignObjects(this.sprite.dom,e)),[4,Promise.all(f)];case 2:return m=r.sent(),y=this.normalizeSVG("<style>"+m[0]+"</style>"+this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),e,s,l,h,u,c),v=new Blob([y],{type:"image/svg+xml"}),n=i.createObjectURL(v),[4,this.loadNewImage(n,s*h*p,l*h*p,"anonymous")];case 3:return g=r.sent(),d.drawImage(g,0,0),[3,5];case 4:return null!==n&&i.revokeObjectURL(n),null!==a&&T.d(a,(function(e){i.revokeObjectURL(e)})),this.restoreRemovedObjects(),[7];case 5:return[2,o]}}))}))},t.prototype.getCanvasAdvanced=function(e){return Object(r.b)(this,void 0,void 0,(function(){var t,i,n,a,o,s,l,u,c,h,p;return Object(r.d)(this,(function(r){switch(r.label){case 0:return k.d(e)||(e={}),[4,this.imagesToDataURI(this.sprite.dom,e)];case 1:return r.sent(),t=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),[4,this.canvg];case 2:return i=r.sent(),n=this.sprite.pixelWidth,a=this.sprite.pixelHeight,o=_.j(this.sprite.dom),s=_.k(this.sprite.dom),l=e.scale||1,u=this.getPixelRatio(e),l=this.getAdjustedScale(n*u,a*u,l,e),c=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),e,n,a,l,o,s,t),(h=this.getDisposableCanvas()).style.width=n*u*l+"px",h.style.height=a*u*l+"px",h.width=n*u*l,h.height=a*u*l,p={useCORS:!0},1!=u&&(p.ignoreDimensions=!0,p.scaleWidth=n*u*l,p.scaleHeight=a*u*l),[4,i.fromString(h.getContext("2d"),c,p).render()];case 3:return r.sent(),[2,h]}}))}))},t.prototype.getImageAdvanced=function(e,t,i){return Object(r.b)(this,void 0,void 0,(function(){var n,a,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(n=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),k.d(t)||(t=this.getFormatOptions(e)),[4,this.getCanvasAdvanced(t)];case 1:return a=r.sent(),!1===i?[3,3]:[4,this.addExtras(a,t,!0)];case 2:a=r.sent(),r.label=3;case 3:return o=a.toDataURL(this.getContentType(e),t.quality),this.disposeCanvas(a),n||this.restoreNonExportableSprites(),[2,o]}}))}))},t.prototype.getDisposableCanvas=function(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="-10000px",document.body.appendChild(e),e},t.prototype.disposeCanvas=function(e){document.body.removeChild(e)},t.prototype.getPixelRatio=function(e){return this.useRetina?S.r():1},t.prototype.getAdjustedScale=function(e,t,i,n){if(!n)return i;var r,a,o=e*i,s=e*i;return n.maxWidth&&o>n.maxWidth&&(r=n.maxWidth/e),n.maxHeight&&s>n.maxHeight&&(a=n.maxHeight/t),r||a?C.C(r,a):(n.minWidth&&o<n.minWidth&&(r=n.minWidth/e),n.minHeight&&s<n.minHeight&&(a=n.minHeight/t),r||a?C.B(r,a):i)},t.prototype.imagesToDataURI=function(e,i){return Object(r.b)(this,void 0,void 0,(function(){var n,a,o,s,l,u;return Object(r.d)(this,(function(r){switch(r.label){case 0:if(!(n=e.querySelectorAll("image")).length)return[3,2];for(a=[],o=n.length,s=0;s<o;s++)l=n[s],(u=l.getAttributeNS(t.XLINK,"href"))&&(-1!==u.indexOf("data:image")||(-1!==u.indexOf(".svg")?a.push(this.svgToDataURI(l,i)):a.push(this.imageToDataURI(l,i))));return[4,Promise.all(a)];case 1:return r.sent(),[2];case 2:return[2]}}))}))},t.prototype.prepForeignObjects=function(e,t){return Object(r.b)(this,void 0,void 0,(function(){var t,i,n;return Object(r.d)(this,(function(r){if((t=e.querySelectorAll("foreignObject")).length)for(i=t.length,n=0;n<i;n++)this.temporarilyRemoveObject(t[n]);return[2]}))}))},t.prototype.imageToDataURI=function(e,i){return Object(r.b)(this,void 0,void 0,(function(){var n,a,o;return Object(r.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.loadNewImage(e.getAttributeNS(t.XLINK,"href"),null,null,"anonymous")];case 1:n=r.sent(),(a=document.createElement("canvas")).width=n.width,a.height=n.height,a.getContext("2d").drawImage(n,0,0);try{return o=a.toDataURL(),e.setAttribute("href",o),[2,o]}catch(s){return!1!==i.keepTainted&&this.temporarilyRemoveObject(e),[2,void 0]}return[3,3];case 2:return r.sent(),i&&!1===i.keepTainted||this.temporarilyRemoveObject(e),[2,void 0];case 3:return[2]}}))}))},t.prototype.svgToDataURI=function(e,i){return Object(r.b)(this,void 0,void 0,(function(){var n,a,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:n=e.getAttributeNS(t.XLINK,"href"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,w.a(n)];case 2:return a=r.sent(),o=this.adapter.apply("charset",{charset:"base64",type:"svg",options:i}).charset,s=this.adapter.apply("svgToDataURI",{data:"data:"+this.getContentType("svg")+";"+o+","+btoa(a.response),options:i}).data,e.setAttributeNS(t.XLINK,"href",s),[2,s];case 3:return r.sent(),i&&!1===i.keepTainted||this.temporarilyRemoveObject(e),[2,void 0];case 4:return[2]}}))}))},t.prototype.temporarilyRemoveObject=function(e,t){var i=e.parentElement||e.parentNode;t||(t=this.sprite.paper.add("g").node),i.insertBefore(t,e),e.textContent,i.removeChild(e),this._removedObjects.push({element:e,placeholder:t})},t.prototype.restoreRemovedObjects=function(){for(var e;e=this._removedObjects.pop();){(e.placeholder.parentElement||e.placeholder.parentNode).insertBefore(e.element,e.placeholder)}},t.prototype.simplifiedImageExport=function(){return Object(r.b)(this,void 0,void 0,(function(){var e,t,i,n,a,o,s;return Object(r.d)(this,(function(r){switch(r.label){case 0:if(!1===this.useSimplifiedExport)return[2,!1];if(!1===(e=v.b.getCache("simplifiedImageExport"))||!0===e)return[2,e];r.label=1;case 1:r.trys.push([1,6,,7]),(t=document.createElement("canvas")).width=1,t.height=1,i=t.getContext("2d"),n=this.getDOMURL(),a=new Blob([this.normalizeSVG("<g></g>",{},1,1)],{type:"image/svg+xml"}),o=n.createObjectURL(a),s=void 0,r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.loadNewImage(o,1,1)];case 3:return s=r.sent(),[3,5];case 4:return r.sent(),[2,!1];case 5:i.drawImage(s,0,0),n.revokeObjectURL(o);try{return v.b.setCache("simplifiedImageExport",!0),[2,!0]}catch(l){return v.b.setCache("simplifiedImageExport",!1),[2,!1]}return[3,7];case 6:return r.sent(),v.b.setCache("simplifiedImageExport",!1),[2,!1];case 7:return[2]}}))}))},t.prototype.loadNewImage=function(e,t,i,n){return new Promise((function(r,a){var o;function s(){if(n){var t=o.src;o.onerror=function(){a(new Error('Loading image "'+e+'" failed'))},o.removeAttribute("crossorigin"),o.src="",o.src=t}else a(new Error('Loading image "'+e+'" failed'))}o=t&&i?new Image(t,i):new Image,n&&o.setAttribute("crossOrigin",n),o.onload=function(){r(o)},o.onabort=s,o.onerror=s,o.src=e}))},t.prototype.getDOMURL=function(){return self.URL||self.webkitURL||self},t.prototype.getSVG=function(e,t,i){return void 0===i&&(i=!0),Object(r.b)(this,void 0,void 0,(function(){var n,a,o,s,l,u,c,h,p,d;return Object(r.d)(this,(function(r){switch(r.label){case 0:return(n=this._objectsAlreadyHidden)||this.hideNonExportableSprites(),k.d(t)||(t=this.getFormatOptions("svg")),[4,this.awaitValidSprites()];case 1:return r.sent(),a=this.sprite.pixelWidth,o=this.sprite.pixelHeight,s=_.j(this.sprite.dom),l=_.k(this.sprite.dom),u=t.scale||1,c=this.getPixelRatio(t),u=this.getAdjustedScale(a*c,o*c,u,t),h=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),t,a,o,u,s,l),p=this.adapter.apply("charset",{charset:"charset=utf-8",type:"svg",options:t}).charset,d=this.adapter.apply("getSVG",{data:i?"data:"+this.getContentType(e)+";"+p+","+encodeURIComponent(h):h,options:t}).data,n||this.restoreNonExportableSprites(),[2,d]}}))}))},t.prototype.normalizeSVG=function(e,t,i,n,r,a,o,s){var l="";i&&(l+='width="'+Math.round(i*(r||1))+'px" '),n&&(l+='height="'+Math.round(n*(r||1))+'px" ');var u="";a&&(u+="font-family: "+a.replace(/"/g,"")+";"),o&&(u+="font-size: "+o+";"),r&&(l+='viewBox="0 0 '+i+" "+n+'" ');var c=[],h=e.match(/<foreignObject[\s\S]*<\/foreignObject>/gi);if(h)for(var p=0;p<h.length;p++)e=e.replace(h[p],O.d),c.push(h[p]);e.match(/<svg/)?""!==l&&(e=(e=(e=e.replace(/(<svg[^>]*)width="[^"]*"/,"$1")).replace(/(<svg[^>]*)height="[^"]*"/,"$1")).replace(/(<svg)/,"$1"+l)):e='<?xml version="1.0" encoding="utf-8"?><svg '+l+' style="'+u+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+e+"</svg>",s&&(e=e.replace(/(<svg[^>]*>)/,'$1<rect width="100%" height="100%" fill="'+s.rgba+'"/>')),b.a()&&(e=e.replace(/<feColorMatrix [^\/>]*\/>/gi,""));var d=new RegExp("url\\("+S.j(S.n()),"g");if(e=(e=e.replace(d,"url(#")).replace(/url\(&quot;([^)]*)&quot;\)/gm,"url($1)"),c.length)for(p=0;p<c.length;p++)e=e.replace(O.d,c[p]);return e=this.adapter.apply("normalizeSVG",{data:e,options:t}).data},t.prototype.serializeElement=function(e){return(new XMLSerializer).serializeToString(e)},t.prototype.getPDF=function(e,t){return Object(r.b)(this,void 0,void 0,(function(){function i(e){var t={};t.normal=e.normal.path,f[e.normal.path]=e.normal.bytes,e.bold?(t.bold=e.bold.path,f[e.bold.path]=e.bold.bytes):t.bold=e.normal.path,e.italics?(t.italics=e.italics.path,f[e.italics.path]=e.italics.bytes):t.italics=e.normal.path,e.bolditalics?(t.bolditalics=e.bolditalics.path,f[e.bolditalics.path]=e.bolditalics.bytes):t.bolditalics=e.normal.path,d[e.name]=t}var n,a,o,s,l,u,c,h,p,d,f;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,this.getImage(t.imageFormat||"png",t)];case 1:return n=r.sent(),[4,this.pdfmake];case 2:return a=r.sent(),o=[30,30,30,30],s={pageSize:t.pageSize||"A4",pageOrientation:t.pageOrientation||"portrait",pageMargins:t.pageMargins||o,defaultStyle:{font:t.font?t.font.name:void 0},content:[]},l=this.adapter.apply("title",{title:this.title,options:t}).title,u=0,l&&(s.content.push({text:l,fontSize:t.fontSize||14,bold:!0,margin:[0,0,0,15]}),u+=50),t.addURL&&(s.content.push({text:this.language.translate("Saved from")+": "+document.location.href,fontSize:t.fontSize,margin:[0,0,0,15]}),u+=50),"pdfdata"!=e&&s.content.push({image:n,alignment:t.align||"left",fit:this.getPageSizeFit(s.pageSize,s.pageMargins,u)}),"pdfdata"==e||t.addData?(h=(c=s.content).push,p={},[4,this.getPDFData("pdf",t)]):[3,4];case 3:h.apply(c,[(p.table=r.sent(),p.fontSize=t.fontSize||14,p)]),r.label=4;case 4:return s=this.adapter.apply("pdfmakeDocument",{doc:s,options:t}).doc,d=null,f=null,t.font&&(d={},f={},i(t.font),t.extraFonts&&T.d(t.extraFonts,i)),[4,new Promise((function(e,t){a.createPdf(s,null,d,f).getDataUrl((function(t){e(t)}))}))];case 5:return[2,r.sent()]}}))}))},t.prototype.getPDFData=function(e,t){return Object(r.b)(this,void 0,void 0,(function(){var e,i,n,a,o,s,l=this;return Object(r.d)(this,(function(r){if(e={body:[]},i=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"pdf"}).dataFields,n=this.data,t.pivot)a=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder,x.f(i,(function(i,r){var a=[];t.addColumnNames&&a.push(r);for(var o=n.length,s=0;s<o;s++){var u=n[s][i];a.push(l.convertToSpecialFormat(i,u,t,!0))}e.body.push(l.getPDFDataRow(a,t,void 0,!0))}),(function(e,t){var i=a.indexOf(e),n=a.indexOf(t);return i>n?1:i<n?-1:0}));else for(t.addColumnNames&&(e.body.push(this.getPDFDataRow(i,t,void 0,!0)),e.headerRows=1),o=n.length,s=0;s<o;s++)e.body.push(this.getPDFDataRow(n[s],t,i));return[2,this.adapter.apply("pdfmakeTable",{table:e,options:t}).table]}))}))},t.prototype.getPDFDataRow=function(e,t,i,n){var r=this;void 0===n&&(n=!1);var a=[];i||(i=e);var o=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder;return x.f(i,(function(i,o){var s=r.convertEmptyValue(i,e[i],t),l=n?s:r.convertToSpecialFormat(i,s,t);l=""+l,a.push(l)}),(function(e,t){var i=o.indexOf(e),n=o.indexOf(t);return i>n?1:i<n?-1:0})),a},t.prototype.getPageSizeFit=function(e,t,i){void 0===i&&(i=0);var n=[0,0,0,0];"number"==typeof t?n=[t,t,t,t]:2==t.length?n=[t[0],t[1],t[0],t[1]]:4==t.length&&(n=t);var r={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]}[e];return r[0]-=n[0]+n[2],r[1]-=n[1]+n[3]+i,r},t.prototype.getExcel=function(e,t){return Object(r.b)(this,void 0,void 0,(function(){var i,n,a,o,s,l,u,c,h,p=this;return Object(r.d)(this,(function(r){switch(r.label){case 0:return k.d(t)||(t=this.getFormatOptions("xlsx")),[4,this.xlsx];case 1:if(i=r.sent(),n=this.adapter.apply("xlsxWorkbookOptions",{xlsx:i,options:{bookType:"xlsx",bookSST:!1,type:"base64"}}).options,a=this.normalizeExcelSheetName(this.adapter.apply("xlsxSheetName",{xlsx:i,name:this.title||this.language.translate("Data")}).name),o={SheetNames:[a],Sheets:{}},s=[],l=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"xslx"}).dataFields,t.pivot)u=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder,x.f(l,(function(e,i){var n=[];t.addColumnNames&&n.push(i);for(var r=p.data.length,a=0;a<r;a++){var o=p.data[a][e];n.push(p.convertToSpecialFormat(e,o,t,!0))}s.push(p.getExcelRow(n,t,void 0,!0))}),(function(e,t){var i=u.indexOf(e),n=u.indexOf(t);return i>n?1:i<n?-1:0}));else for(t.addColumnNames&&s.push(this.getExcelRow(l,t,void 0,!0)),c=this.data.length,h=0;h<c;h++)s.push(this.getExcelRow(this.data[h],t,l));return o.Sheets[a]=i.utils.aoa_to_sheet(s),o=this.adapter.apply("xlsxWorkbook",{xlsx:i,workbook:o,options:t}).workbook,[2,this.adapter.apply("getExcel",{data:"data:"+this.getContentType(e)+";base64,"+i.write(o,n),options:t}).data]}}))}))},t.prototype.normalizeExcelSheetName=function(e){return e=e.replace(/([:\\\/?*\[\]]+)/g," "),S.Q(e,31,"...",!0)},t.prototype.getExcelRow=function(e,t,i,n){var r=this;void 0===n&&(n=!1);var a=[];i||(i=e);var o=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder;return x.f(i,(function(i,o){var s=r.convertEmptyValue(i,e[i],t),l=n?s:r.convertToSpecialFormat(i,s,t,!0);a.push(l)}),(function(e,t){var i=o.indexOf(e),n=o.indexOf(t);return i>n?1:i<n?-1:0})),a},t.prototype.getCSV=function(e,t,i){return void 0===i&&(i=!0),Object(r.b)(this,void 0,void 0,(function(){var n,a,o,s,l,u,c,h,p,d=this;return Object(r.d)(this,(function(r){if(k.d(t)||(t=this.getFormatOptions("csv")),n="",a=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,o="",s=this.data,t.pivot)l=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder,x.f(a,(function(e,i){var r=[];t.addColumnNames&&r.push(i);for(var a=s.length,l=0;l<a;l++){var u=s[l][e];r.push(d.convertToSpecialFormat(e,u,t,!0))}n+=o+d.getCSVRow(r,t,void 0,!0),o="\n"}),(function(e,t){var i=l.indexOf(e),n=l.indexOf(t);return i>n?-1:i<n?1:0}));else{for(u=s.length,c=0;c<u;c++)h=this.getCSVRow(s[c],t,a),t.reverse?n=h+o+n:n+=o+h,o="\n";t.addColumnNames&&(n=this.getCSVRow(a,t,void 0,!0)+o+n)}return p=this.adapter.apply("charset",{charset:"charset=utf-8",type:e,options:t}).charset,[2,this.adapter.apply("getCSV",{data:i?"data:"+this.getContentType(e)+";"+p+","+encodeURIComponent(n):n,options:t}).data]}))}))},t.prototype.getCSVRow=function(e,t,i,n){var r=this;void 0===n&&(n=!1);var a=t.separator||",",o=[];i||(i=e);var s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder;return x.f(i,(function(i,s){var l=r.convertEmptyValue(i,e[i],t),u=n?l:r.convertToSpecialFormat(i,l,t);u=(u=""+u).replace(/"/g,'""'),(t.forceQuotes||u.search(new RegExp('"|\n|'+a,"g"))>=0)&&(u='"'+u+'"'),o.push(u)}),(function(e,t){var i=s.indexOf(e),n=s.indexOf(t);return i>n?1:i<n?-1:0})),o.join(a)},t.prototype.getHTML=function(e,t,i){return void 0===i&&(i=!0),Object(r.b)(this,void 0,void 0,(function(){var n,a,o,s,l,u,c,h=this;return Object(r.d)(this,(function(r){if(k.d(t)||(t=this.getFormatOptions("html")),n="<table>",t.tableClass&&(n='<table class="'+t.tableClass+'">'),a=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"html"}).dataFields,o=this.data,t.pivot)s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,n+="\n<tbody>",x.f(a,(function(e,i){var r=[];t.addColumnNames&&r.push(i);for(var a=o.length,s=0;s<a;s++){var l=o[s][e];r.push(h.convertToSpecialFormat(e,l,t,!0))}n+="\n"+h.getHTMLRow(r,t,void 0,!0)}),(function(e,t){var i=s.indexOf(e),n=s.indexOf(t);return i>n?-1:i<n?1:0})),n+="\n</tbody>";else{for(t.addColumnNames&&(n+="\n<thead>\n"+this.getHTMLRow(a,t,void 0,!0,!0)+"\n</thead>"),n+="\n<tbody>",l=o.length,u=0;u<l;u++)n+="\n"+this.getHTMLRow(o[u],t,a);n+="\n</tbody>"}return n+="\n</table>",c=this.adapter.apply("charset",{charset:"charset=utf-8",type:e,options:t}).charset,[2,this.adapter.apply("getHTML",{data:i?"data:"+this.getContentType(e)+";"+c+","+encodeURIComponent(n):n,options:t}).data]}))}))},t.prototype.getHTMLRow=function(e,t,i,n,r){var a=this;void 0===n&&(n=!1),void 0===r&&(r=!1);var o="\t<tr>";t.rowClass&&(o='\t<tr class="'+t.rowClass+'">'),i||(i=e);var s=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,l=r?"th":"td",u=!0;return x.f(i,(function(i,r){var s=a.convertEmptyValue(i,e[i],t),c=n?s:a.convertToSpecialFormat(i,s,t);c=(c=""+c).replace(/[\u00A0-\u9999<>\&]/gim,(function(e){return"&#"+e.charCodeAt(0)+";"}));var h=l;t.pivot&&u&&(h="th"),t.cellClass?o+="\n\t\t<"+h+' class="'+t.cellClass+'">'+c+"</"+h+">":o+="\n\t\t<"+h+">"+c+"</"+h+">",u=!1}),(function(e,t){var i=s.indexOf(e),n=s.indexOf(t);return i>n?1:i<n?-1:0})),o+="\n\t</tr>"},t.prototype.getJSON=function(e,t,i){return void 0===i&&(i=!0),Object(r.b)(this,void 0,void 0,(function(){var n,a,o,s,l,u,c,h,p=this;return Object(r.d)(this,(function(r){if(k.d(t)||(t=this.getFormatOptions("json")),a=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"json"}).dataFields,this._dynamicDataFields)n=this.data;else for(n=[],o=this.data,s=function(e,i){var r=o[i];if("object"==typeof r){var s={};x.d(r,(function(e,i){k.d(a[e])&&(s[a[e]]=p.convertToSpecialFormat(e,i,t))})),n.push(s)}},l=o.length,u=0;u<l;u++)s(0,u);return c=JSON.stringify(n,(function(e,i){return"object"==typeof i&&x.d(i,(function(e,n){i[e]=p.convertToSpecialFormat(e,n,t)})),i}),t.indent),h=this.adapter.apply("charset",{charset:"charset=utf-8",type:e,options:t}).charset,[2,this.adapter.apply("getJSON",{data:i?"data:"+this.getContentType(e)+";"+h+","+encodeURIComponent(c):c,options:t}).data]}))}))},t.prototype.convertToSpecialFormat=function(e,t,i,n){if("number"==typeof t)if(this.isDateField(e))t=new Date(t);else{if(this.isDurationField(e))return this.durationFormatter.format(t,this.durationFormat);if(this.isNumberField(e)&&this.numberFormat)return this.numberFormatter.format(t,this.numberFormat)}return t instanceof Date?i.useTimestamps?t=t.getTime():i.useLocale?n||(t=t.toLocaleString()):t=this.dateFormatter.format(t,this.dateFormat):k.j(t)&&this.isDateField(e)&&this.dateFormat&&(t=this.dateFormatter.format(this.dateFormatter.parse(t),this.dateFormat)),t},t.prototype.convertEmptyValue=function(e,t,i){return k.d(t)?t:i.emptyAs},t.prototype.download=function(e,t,i){return void 0===i&&(i=!1),Object(r.b)(this,void 0,void 0,(function(){var n,a,o,s,l,u,c,h,p,d,f,m,y,v,g;return Object(r.d)(this,(function(r){if(this.msBlobDownloadSupport()){if(m=e.split(";"),y=m.shift().replace(/data:/,""),e=decodeURIComponent(m.join(";").replace(/^[^,]*,/,"")),-1!=["image/svg+xml","application/json","text/csv"].indexOf(y))return n=new Blob([e],{type:y}),window.navigator.msSaveBlob(n,t),[2,!0];try{o=atob(e),e=o}catch(_){return[2,!1]}for(u=new Array(e.length),c=0;c<e.length;++c)h=e.charCodeAt(c),u[c]=h;p=new Blob([new Uint8Array(u)],{type:y}),window.navigator.msSaveBlob(p,t)}else if(this.blobDownloadSupport()){if((a=document.createElement("a")).download=t,document.body.appendChild(a),m=e.split(";"),y=m.shift().replace(/data:/,""),e=decodeURIComponent(m.join(";").replace(/^[^,]*,/,"")),-1!=["image/svg+xml","application/json","text/csv","text/html"].indexOf(y))return i&&(e="\ufeff"+e),s=new Blob([e],{type:y}),l=window.URL.createObjectURL(s),a.href=l,a.download=t,a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(l)}),100),[2,!0];try{o=atob(e),e=o}catch(_){return[2,!1]}for(u=new Array(e.length),c=0;c<e.length;++c)h=e.charCodeAt(c),u[c]=h;i&&(u=[239,187,191].concat(u)),p=new Blob([new Uint8Array(u)],{type:y}),d=window.URL.createObjectURL(p),a.href=d,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout((function(){window.URL.revokeObjectURL(d)}),100)}else this.linkDownloadSupport()?((f=document.createElement("a")).download=t,f.href=e,document.body.appendChild(f),f.click(),document.body.removeChild(f)):this.legacyIE()?4===(m=e.match(/^data:(.*);[ ]*([^,]*),(.*)$/)).length&&("base64"==m[2]?m[1].match(/^image\//)&&this.showModal('<img src="'+e+'" style="float: left; max-width: 50%; max-height: 80%; margin: 0 1em 0.5em 0; border: 1px solid #eee;" /><p>'+this.language.translate('To save the image, right-click thumbnail on the left and choose "Save picture as..."')+'</p><p style="text-align: center;"><small>'+this.language.translate("(Press ESC to close this message)")+"</small></p>",this.language.translate("Image Export Complete")):(y=void 0,t.match(/\.svg$/)?y="image/svg+xml":(y="text/plain",t+=".txt"),(v=document.createElement("iframe")).width="1px",v.height="1px",v.style.display="none",document.body.appendChild(v),(g=v.contentDocument).open(y,"replace"),g.write(decodeURIComponent(m[3])),g.close(),g.execCommand("SaveAs",!0,t),document.body.removeChild(v))):window.location.href=e;return[2,!0]}))}))},t.prototype.downloadSupport=function(){return this.linkDownloadSupport()||this.msBlobDownloadSupport()},t.prototype.linkDownloadSupport=function(){var e=v.b.getCache("linkDownloadSupport");if(!1===e||!0===e)return e;var t="undefined"!==typeof document.createElement("a").download;return v.b.setCache("linkDownloadSupport",t),t},t.prototype.blobDownloadSupport=function(){return k.d(window.Blob)},t.prototype.msBlobDownloadSupport=function(){return k.d(window.navigator.msSaveOrOpenBlob)},t.prototype.legacyIE=function(){var e=document.createElement("div");return e.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1==e.getElementsByTagName("i").length},t.prototype.print=function(e,t,i){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(n){return"css"==t.printMethod?[2,this.printViaCSS(e,t,i)]:[2,this.printViaIframe(e,t,i)]}))}))},t.prototype.printViaCSS=function(e,t,i){return Object(r.b)(this,void 0,void 0,(function(){var n,a,o,s;return Object(r.d)(this,(function(r){return n=document.documentElement.scrollTop||document.body.scrollTop,a=new _.b(_.p(this.container),"body > *",{display:"none",position:"fixed",visibility:"hidden",opacity:"0",clipPath:"polygon(0px 0px,0px 0px,0px 0px,0px 0px);"}),i&&document&&document.title&&(o=document.title,document.title=i),(s=new Image).src=e,s.style.maxWidth="100%",s.style.display="block",s.style.position="relative",s.style.visibility="visible",s.style.opacity="1",s.style.clipPath="none",document.body.appendChild(s),this.setTimeout((function(){window.print()}),50),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&t.delay<1e3?t.delay=1e3:t.delay<100&&(t.delay=100),this.setTimeout((function(){document.body.removeChild(s),a.dispose(),o&&(document.title=document.title),document.documentElement.scrollTop=document.body.scrollTop=n}),t.delay||500),[2,!0]}))}))},t.prototype.printViaIframe=function(e,t,i){return Object(r.b)(this,void 0,void 0,(function(){var n,a;return Object(r.d)(this,(function(r){return(n=document.createElement("iframe")).style.visibility="hidden",document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.close(),(a=new Image).src=e,a.style.maxWidth="100%",a.style.height="auto",i&&(n.contentWindow.document.title=i),n.contentWindow.document.body.appendChild(a),n.load=function(){n.contentWindow.document.body.appendChild(a)},this.setTimeout((function(){try{n.contentWindow.document.execCommand("print",!1,null)||n.contentWindow.print()}catch(e){n.contentWindow.print()}}),t.delay||50),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&t.delay<1e3?t.delay=1e3:t.delay<100&&(t.delay=100),this.setTimeout((function(){document.body.removeChild(n)}),t.delay+50||100),[2,!0]}))}))},t.prototype.findBackgroundColor=function(e){var t=1,i=Object(_.m)(e,"background-color");if((i.match(/[^,]*,[^,]*,[^,]*,[ ]?0/)||"transparent"==i)&&(t=0),0==t){var n=e.parentElement;return n?this.findBackgroundColor(n):Object(y.b)("#fff")}return Object(y.b)(i,t)},Object.defineProperty(t.prototype,"container",{get:function(){return this.adapter.apply("container",{container:this._container}).container},set:function(e){this._container=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprite",{get:function(){return this.adapter.apply("sprite",{sprite:this._sprite}).sprite},set:function(e){this._sprite=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extraSprites",{get:function(){return this.adapter.apply("extraSprites",{extraSprites:this._extraSprites}).extraSprites},set:function(e){this._extraSprites=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"validateSprites",{get:function(){return this.adapter.apply("validateSprites",{validateSprites:this._validateSprites}).validateSprites},set:function(e){this._validateSprites=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.adapter.apply("data",{data:this._data}).data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataFields",{get:function(){return this._dataFields||this.generateDataFields(),this.adapter.apply("dataFields",{dataFields:this._dataFields}).dataFields},set:function(e){this._dataFields=e,this._dynamicDataFields=!1},enumerable:!0,configurable:!0}),t.prototype.handleDataUpdated=function(){this._dynamicDataFields&&(this._dataFields=void 0);var e=this.data.length>0;this._prevHasData!=e&&(this._prevHasData=e,this.menu&&this.menu.invalidate())},Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this._dateFormatter||(this._dateFormatter=new h.a,this._dateFormatter.language=this.language),this.adapter.apply("dateFormatter",{dateFormatter:this._dateFormatter}).dateFormatter},set:function(e){this._dateFormatter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormat",{get:function(){return this.adapter.apply("dateFormat",{dateFormat:this._dateFormat}).dateFormat},set:function(e){this._dateFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFields",{get:function(){return this._dateFields||(this._dateFields=new u.a),this.adapter.apply("dateFields",{dateFields:this._dateFields}).dateFields},set:function(e){this._dateFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numberFormatter",{get:function(){return this._numberFormatter||(this._numberFormatter=new d.a,this._numberFormatter.language=this.language),this.adapter.apply("numberFormatter",{numberFormatter:this._numberFormatter}).numberFormatter},set:function(e){this._numberFormatter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numberFormat",{get:function(){return this.adapter.apply("numberFormat",{numberFormat:this._numberFormat}).numberFormat},set:function(e){this._numberFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numberFields",{get:function(){return this._numberFields||(this._numberFields=new u.a),this.adapter.apply("numberFields",{numberFields:this._numberFields}).numberFields},set:function(e){this._numberFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationFormatter",{get:function(){return this._durationFormatter||(this._durationFormatter=new p.a,this._durationFormatter.language=this.language),this.adapter.apply("durationFormatter",{durationFormatter:this._durationFormatter}).durationFormatter},set:function(e){this._durationFormatter=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationFormat",{get:function(){return this.adapter.apply("durationFormat",{durationFormat:this._durationFormat}).durationFormat},set:function(e){this._durationFormat=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"durationFields",{get:function(){return this._durationFields||(this._durationFields=new u.a),this.adapter.apply("durationFields",{durationFields:this._durationFields}).durationFields},set:function(e){this._durationFields=e},enumerable:!0,configurable:!0}),t.prototype.generateDataFields=function(){var e=this;this._dataFields={},this.data.length&&T.d(this.data,(function(t){x.d(t,(function(t,i){k.d(e._dataFields[t])||(e._dataFields[t]=e.adapter.apply("dataFieldName",{name:t,field:t}).name)}))}))},t.prototype.isDateField=function(e){return this.adapter.apply("isDateField",{isDateField:this.dateFields.contains(e),field:e}).isDateField},t.prototype.isNumberField=function(e){return this.adapter.apply("isNumberField",{isNumberField:this.numberFields.contains(e),field:e}).isNumberField},t.prototype.isDurationField=function(e){return this.adapter.apply("isDurationField",{isDurationField:this.durationFields.contains(e),field:e}).isDurationField},t.prototype.getContentType=function(e){var t="";switch(e){case"png":case"gif":t="image/"+e;break;case"jpg":t="image/jpeg";break;case"svg":t="image/svg+xml";break;case"csv":t="text/csv";break;case"json":t="application/json";break;case"html":t="text/html";break;case"pdf":case"pdfdata":t="application/pdf";break;case"xlsx":t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}return this.adapter.apply("contentType",{contentType:t,type:e}).contentType},Object.defineProperty(t.prototype,"filePrefix",{get:function(){return this.adapter.apply("filePrefix",{filePrefix:this._filePrefix}).filePrefix},set:function(e){this._filePrefix=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this.adapter.apply("backgroundColor",{backgroundColor:this._backgroundColor}).backgroundColor},set:function(e){this._backgroundColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.adapter.apply("title",{title:this._title}).title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),t.prototype.showPreloader=function(){var e=this.preloader;e&&(e.progress=.5,e.label.text="...")},t.prototype.hidePreloader=function(){var e=this.preloader;e&&(e.progress=1)},Object.defineProperty(t.prototype,"preloader",{get:function(){return this._sprite&&this._sprite.parent&&this._sprite.parent.preloader?this._sprite.parent.preloader:void 0},enumerable:!0,configurable:!0}),t.prototype.showTimeout=function(){this.showModal(this.adapter.apply("timeoutMessage",{message:this.language.translate("Export operation took longer than expected. Something might have gone wrong.")}).message)},t.prototype.hideTimeout=function(){this._timeoutTimeout&&(this.removeDispose(this._timeoutTimeout),this._timeoutTimeout=null),this.hideModal()},Object.defineProperty(t.prototype,"language",{get:function(){return this._language||(this._language=new f.a),this._language},set:function(e){this._language=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"modal",{get:function(){return this._modal||(this._modal=new l.a,this._modal.adapter.add("classPrefix",(function(e){return e=g.a.classNamePrefix+e}))),this._modal},enumerable:!0,configurable:!0}),t.prototype.showModal=function(e,t){this.hideModal(),this.hidePreloader();var i=this.modal;i.container=this.sprite.svgContainer.SVGContainer,i.content=e,i.readerTitle=t,i.open()},t.prototype.hideModal=function(){this._modal&&this.modal.close()},t.prototype._canvg=function(){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(t){switch(t.label){case 0:return[4,i.e(4).then(i.bind(null,258))];case 1:return null!=(e=t.sent()).default?[2,e.default]:[2,e]}}))}))},Object.defineProperty(t.prototype,"canvg",{get:function(){return this._canvg()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pdfmake",{get:function(){return null==n&&(n=function(){return Object(r.b)(this,void 0,void 0,(function(){var e,t,n,a;return Object(r.d)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([i.e(6).then(i.t.bind(null,256,7)),i.e(6).then(i.bind(null,257))])];case 1:return e=r.sent(),t=e[0],n=e[1],(a=window).pdfMake=a.pdfMake||{},a.pdfMake.vfs=n.default,t.vfs=n.default,[2,t]}}))}))}()),n},enumerable:!0,configurable:!0}),t.prototype._xlsx=function(){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.d)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([i.e(5),i.e(2)]).then(i.t.bind(null,259,7))];case 1:return[2,e.sent()]}}))}))},Object.defineProperty(t.prototype,"xlsx",{get:function(){return this._xlsx()},enumerable:!0,configurable:!0}),t.prototype.setFormatOptions=function(e,t){this._formatOptions.setKey(e,t)},t.prototype.getFormatOptions=function(e){return this._formatOptions.getKey(e)},Object.defineProperty(t.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),t.prototype._disablePointers=function(){k.d(this._spriteInteractionsEnabled)||(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled),this.sprite.interactionsEnabled=!1},t.prototype._releasePointers=function(){k.d(this._spriteInteractionsEnabled)&&!this._exportRunning&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled)},t.prototype.hideNonExportableSprites=function(){var e=this;if(!this._objectsAlreadyHidden){var t=this.sprite.svgContainer;t&&T.d(t.nonExportableSprites,(function(t){t.isHidden||t.isHiding||!t.visible||e._hiddenObjects.push(t),t.hide(0)})),this._objectsAlreadyHidden=!0}},t.prototype.restoreNonExportableSprites=function(){this._objectsAlreadyHidden&&(T.d(this._hiddenObjects,(function(e){e.show(0)})),this._hiddenObjects=[],this._objectsAlreadyHidden=!1)},t.prototype.awaitValidSprites=function(){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(t){switch(t.label){case 0:return e=[],this.validateSprites.length&&T.d(this.validateSprites,(function(t,i){t.invalid&&e.push(new Promise((function(e,i){t.events.once("validated",(function(t){e()}))})))})),e.length?[4,Promise.all(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.processConfig=function(t){v.b.registeredClasses.ExportMenu=a.a,t&&(k.d(t.menu)&&!k.d(t.menu.type)&&(t.menu.type="ExportMenu"),k.d(t.dataFields)&&k.i(t.dataFields)&&(this.dataFields=t.dataFields,delete t.dataFields)),e.prototype.processConfig.call(this,t)},t.XLINK="http://www.w3.org/1999/xlink",t}(m.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i(2),r=i(96),a=i(85),o=i(93),s=i(26),l=i(32),u=i(53),c=i(74),h=i(3),p=i(0),d=i(11),f=function(e){function t(t,i){var n=e.call(this)||this;return n.adapter=new l.a(n),n._requestOptions={},n._incremental=!1,n._incrementalParams={},n._keepCount=!1,n._updateCurrentData=!1,n.showPreloader=!0,n.className="DataSource",t&&(n.url=t),i&&(n.parser="string"==typeof i?r.a.getParserByType(i):i),n}return Object(n.c)(t,e),t.prototype.processData=function(e,t){if(this.dispatchImmediately("parsestarted"),this.parser||(this.parser=r.a.getParserByData(e,t),this.parser)){if(this.parser.options=this.adapter.apply("parserOptions",this.parser.options),this.parser.options.dateFields=this.adapter.apply("dateFields",this.parser.options.dateFields||[]),this.parser.options.numberFields=this.adapter.apply("numberFields",this.parser.options.numberFields||[]),this.parser.options.dateFields&&!this.parser.options.dateFormatter&&(this.parser.options.dateFormatter=this.dateFormatter),this.data=this.adapter.apply("parsedData",this.parser.parse(this.adapter.apply("unparsedData",e))),!p.d(this.data)&&this.events.isEnabled("parseerror")){var i={type:"parseerror",message:this.language.translate("Error parsing file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",i)}this.dispatchImmediately("parseended"),p.d(this.data)&&this.dispatchImmediately("done",{data:this.data}),this.lastLoad=new Date}else{if(this.events.isEnabled("parseerror")){var n={type:"parseerror",message:this.language.translate("No parser available for file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",n)}this.dispatchImmediately("parseended")}},Object.defineProperty(t.prototype,"url",{get:function(){var e=this.disableCache?this.timestampUrl(this._url):this._url;return this.incremental&&this.component.data.length&&(e=this.addUrlParams(e,this.incrementalParams)),this.adapter.apply("url",e)},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestOptions",{get:function(){return this.adapter.apply("requestOptions",this._requestOptions)},set:function(e){this._requestOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this._parser||(this._parser=new a.a),this.adapter.apply("parser",this._parser)},set:function(e){this._parser=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reloadFrequency",{get:function(){return this.adapter.apply("reloadTimeout",this._reloadFrequency)},set:function(e){var t=this;this._reloadFrequency!=e&&(this._reloadFrequency=e,e?p.d(this._reloadDisposer)||(this._reloadDisposer=this.events.on("ended",(function(e){t._reloadTimeout=setTimeout((function(){t.load()}),t.reloadFrequency)}))):p.d(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"incremental",{get:function(){return this.adapter.apply("incremental",this._incremental)},set:function(e){this._incremental=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"incrementalParams",{get:function(){return this.adapter.apply("incrementalParams",this._incrementalParams)},set:function(e){this._incrementalParams=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepCount",{get:function(){return this.adapter.apply("keepCount",this._keepCount)},set:function(e){this._keepCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateCurrentData",{get:function(){return this.adapter.apply("updateCurrentData",this._updateCurrentData)},set:function(e){this._updateCurrentData=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){return this._language?this._language:this.component?(this._language=this.component.language,this._language):(this.language=new u.a,this.language)},set:function(e){this._language=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.component?(this._dateFormatter=this.component.dateFormatter,this._dateFormatter):(this.dateFormatter=new c.a,this.dateFormatter)},set:function(e){this._dateFormatter=e},enumerable:!0,configurable:!0}),t.prototype.timestampUrl=function(e){var t={};return t[(new Date).getTime().toString()]="",this.addUrlParams(e,t)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._reloadTimeout&&clearTimeout(this._reloadTimeout),p.d(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0)},t.prototype.load=function(){this.url&&(this._reloadTimeout&&clearTimeout(this._reloadTimeout),r.a.load(this))},t.prototype.addUrlParams=function(e,t){var i=e.match(/\?/)?"&":"?",n=[];return d.d(t,(function(e,t){""!=t?n.push(e+"="+encodeURIComponent(t)):n.push(e)})),n.length?e+i+n.join("&"):e},t.prototype.processConfig=function(t){h.b.registeredClasses.json=a.a,h.b.registeredClasses.JSONParser=a.a,h.b.registeredClasses.csv=o.a,h.b.registeredClasses.CSVParser=o.a,e.prototype.processConfig.call(this,t)},t}(s.b)},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(2),r=i(137),a=i(1),o=function(e){function t(){var t=e.call(this)||this;return t.className="PointedRectangle",t.element=t.paper.add("path"),t.cornerRadius=6,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.cornerRadius,i=this.innerWidth,n=this.innerHeight;if(i>0&&n>0){var r,o,s=this.pointerX,l=this.pointerY,u=this.pointerBaseWidth/2,c=a.C(i/2,n/2),h=a.i(t,0,c),p=a.i(t,0,c),d=a.i(t,0,c),f=a.i(t,0,c),m=void 0,y=void 0,v=void 0,g=void 0,_=(s-0)*(n-0)-(l-0)*(i-0),b=(s-0)*(0-n)-(l-n)*(i-0);if(_>0&&b>0)m="M"+h+",0 L"+((r=a.i(s,h+u,i-u-p))-u)+",0 L"+s+","+(l=a.i(l,-1/0,0))+" L"+(r+u)+",0 L"+(i-p)+",0";else m="M"+h+",0 L"+(i-p)+",0";if(_<0&&b<0)v=" L"+(i-d)+","+n+" L"+((r=a.i(s,f+u,i-u-d))+u)+","+n+" L"+s+","+(l=a.i(l,n,1/0))+" L"+(r-u)+","+n+" L"+f+","+n;else v=" L"+f+","+n;if(_<0&&b>0)g=" L0,"+(n-f)+" L0,"+((o=a.i(l,h+u,n-f-u))+u)+" L"+(s=a.i(s,-1/0,0))+","+l+" L0,"+(o-u)+" L0,"+h;else g=" L0,"+h;if(_>0&&b<0)y=" L"+i+","+p+" L"+i+","+((o=a.i(l,p+u,n-u-d))-u)+" L"+(s=a.i(s,i,1/0))+","+l+" L"+i+","+(o+u)+" L"+i+","+(n-d);else y=" L"+i+","+(n-d);var x=" a"+p+","+p+" 0 0 1 "+p+","+p,w=" a"+d+","+d+" 0 0 1 -"+d+","+d,k=" a"+f+","+f+" 0 0 1 -"+f+",-"+f,P=" a"+h+","+h+" 0 0 1 "+h+",-"+h;this.path=m+x+y+w+v+k+g+P}},Object.defineProperty(t.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(e){this.setPropertyValue("cornerRadius",e,!0)},enumerable:!0,configurable:!0}),t}(r.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(2),r=i(16),a=i(0),o=function(e){function t(){var t=e.call(this)||this;return t.className="PointedShape",t.pointerBaseWidth=15,t.pointerLength=10,t.pointerY=0,t.pointerX=0,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),a.h(this.pointerX)||(this.pointerX=this.pixelWidth/2),a.h(this.pointerY)||(this.pointerY=this.pixelHeight+10)},Object.defineProperty(t.prototype,"pointerBaseWidth",{get:function(){return this.getPropertyValue("pointerBaseWidth")},set:function(e){this.setPropertyValue("pointerBaseWidth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerLength",{get:function(){return this.getPropertyValue("pointerLength")},set:function(e){this.setPropertyValue("pointerLength",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerX",{get:function(){return this.getPropertyValue("pointerX")},set:function(e){this.setPropertyValue("pointerX",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerY",{get:function(){return this.getPropertyValue("pointerY")},set:function(e){this.setPropertyValue("pointerY",e,!0)},enumerable:!0,configurable:!0}),t}(r.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(2),r=i(65),a=i(13),o=i(3),s=function(e){function t(){var t=e.call(this)||this;return t.className="DropShadowFilter",t.color=Object(a.b)("#000"),t.feGaussianBlur=t.paper.add("feGaussianBlur"),t.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),t.filterPrimitives.push(t.feGaussianBlur),t.feOffset=t.paper.add("feOffset"),t.feOffset.attr({result:"offsetBlur"}),t.filterPrimitives.push(t.feOffset),t.feFlood=t.paper.add("feFlood"),t.feFlood.attr({"flood-color":t.color}),t.filterPrimitives.push(t.feFlood),t.feComposite=t.paper.add("feComposite"),t.feComposite.attr({in2:"offsetBlur",operator:"in"}),t.filterPrimitives.push(t.feComposite),t.feMerge=t.paper.addGroup("feMerge"),t.feMerge.add(t.paper.add("feMergeNode")),t.feMerge.add(t.paper.add("feMergeNode").attr({in:"SourceGraphic"})),t.filterPrimitives.push(t.feMerge),t.width=200,t.height=200,t.blur=1.5,t.dx=3,t.dy=3,t.opacity=.5,t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"color",{get:function(){return this.properties.color},set:function(e){this.properties.color=e,this.feFlood&&this.feFlood.attr({"flood-color":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(e){this.properties.opacity=e,this.feFlood.attr({"flood-opacity":e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dx",{get:function(){return this.properties.dx},set:function(e){this.properties.dx=e,this.feOffset.attr({dx:e/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dy",{get:function(){return this.properties.dy},set:function(e){this.properties.dy=e,this.feOffset.attr({dy:e/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blur",{get:function(){return this.properties.blur},set:function(e){this.properties.blur=e,this.feGaussianBlur.attr({stdDeviation:e/this.scale})},enumerable:!0,configurable:!0}),t.prototype.updateScale=function(){this.dx=this.dx,this.dy=this.dy,this.blur=this.blur},t}(r.a);o.b.registeredClasses.DropShadowFilter=s},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(2),r=i(16),a=i(9),o=i(3),s=i(6),l=i(0),u=i(4),c=function(e){function t(){var t=e.call(this)||this;return t.className="Trapezoid",t.element=t.paper.add("path"),t.topSide=Object(a.c)(100),t.bottomSide=Object(a.c)(100),t.leftSide=Object(a.c)(100),t.rightSide=Object(a.c)(100),t.isMeasured=!1,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.pixelWidth,i=this.pixelHeight,n=s.E(this.topSide,t),r=s.E(this.bottomSide,t),a=s.E(this.leftSide,i),o=s.E(this.rightSide,i),c=(t-n)/2,h=(i-a)/2,p=t-(t-n)/2,d=(i-o)/2,f=t-(t-r)/2,m=i-(i-o)/2,y=(t-r)/2,v=i-(i-a)/2,g="",_="",b="",x="";if(l.d(this.horizontalNeck)){var w=this.horizontalNeck.value;g=u.f({x:t*w,y:Math.max(h,d)}),b=u.f({x:t*w,y:Math.min(m,v)})}if(l.d(this.verticalNeck)){var k=this.verticalNeck.value;_=u.f({x:Math.min(p,f),y:i*k}),x=u.f({x:Math.max(c,y),y:i*k})}var P=u.g({x:c,y:h})+g+u.f({x:p,y:d})+_+u.f({x:f,y:m})+b+u.f({x:y,y:v})+x;this.path=P},Object.defineProperty(t.prototype,"topSide",{get:function(){return this.getPropertyValue("topSide")},set:function(e){this.setPercentProperty("topSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomSide",{get:function(){return this.getPropertyValue("bottomSide")},set:function(e){this.setPercentProperty("bottomSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftSide",{get:function(){return this.getPropertyValue("leftSide")},set:function(e){this.setPercentProperty("leftSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightSide",{get:function(){return this.getPropertyValue("rightSide")},set:function(e){this.setPercentProperty("rightSide",e,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalNeck",{get:function(){return this.getPropertyValue("horizontalNeck")},set:function(e){this.setPropertyValue("horizontalNeck",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalNeck",{get:function(){return this.getPropertyValue("verticalNeck")},set:function(e){this.setPropertyValue("verticalNeck",e,!0)},enumerable:!0,configurable:!0}),t}(r.a);o.b.registeredClasses.Trapezoid=c},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(2),r=i(59),a=i(16),o=i(3),s=i(20),l=i(4),u=i(0),c=function(e){function t(){var t=e.call(this)||this;t.className="ZoomOutButton",t.padding(9,9,9,9),t.showSystemTooltip=!0;var i=new s.a,n=t.background;n.cornerRadius(20,20,20,20),n.fill=i.getFor("primaryButton"),n.stroke=i.getFor("primaryButtonStroke"),n.strokeOpacity=0,n.states.getKey("hover").properties.fill=i.getFor("primaryButtonHover"),n.states.getKey("down").properties.fill=i.getFor("primaryButtonActive");var r=new a.a;r.element=t.paper.add("path");var o=l.g({x:0,y:0});return o+=l.f({x:11,y:0}),r.path=o,r.pixelPerfect=!0,r.padding(8,3,8,3),r.stroke=i.getFor("primaryButtonText"),t.icon=r,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),u.d(this.readerTitle)||(this.readerTitle=this.language.translate("Zoom Out"))},t}(r.a);o.b.registeredClasses.ZoomOutButton=c},function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i(2),r=i(18),a=i(16),o=i(117),s=i(98),l=i(9),u=i(11),c=i(4),h=function(e){function t(){var t=e.call(this)||this;return t.className="Cone",t.angle=30,t.radius=Object(l.c)(100),t.topRadius=Object(l.c)(100),t.top=t.createChild(o.a),t.top.shouldClone=!1,t.bottom=t.createChild(o.a),t.bottom.shouldClone=!1,t.body=t.createChild(a.a),t.body.shouldClone=!1,t.body.setElement(t.paper.add("path")),t.layout="none",t.bodyFillModifier=new s.a,t.bodyFillModifier.lightnesses=[0,-.25,0],t.body.fillModifier=t.bodyFillModifier,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this),u.c(this,this.top,a.b),u.c(this,this.bottom,a.b),u.c(this,this.body,a.b);var t,i,n,r=this.innerWidth,o=this.innerHeight,s=this.bottom,l=this.top,h=this.angle;"horizontal"==this.orientation?(t=o/2,s.y=o/2,l.y=o/2,l.x=r,i=(90-h)/90,n=0,this.bodyFillModifier.gradient.rotation=90):(i=0,n=(90-h)/90,t=r/2,s.y=o,s.x=r/2,l.x=r/2,this.bodyFillModifier.gradient.rotation=0);var p,d=this.radius.value*t,f=this.topRadius.value*t;s.radius=d-d*i,s.radiusY=d-d*n,l.radius=f-f*i,l.radiusY=f-f*n,p="horizontal"==this.orientation?c.g({x:0,y:o/2-s.radiusY})+c.b(-90,-180,s.radius,s.radiusY)+c.f({x:r,y:o/2+l.radiusY})+c.b(90,180,l.radius,l.radiusY)+c.d():c.g({x:r/2-l.radius,y:0})+c.b(180,-180,l.radius,l.radiusY)+c.f({x:r/2+s.radius,y:o})+c.b(0,180,s.radius,s.radiusY)+c.d(),this.body.path=p},Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(e){this.setPropertyValue("radius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRadius",{get:function(){return this.getPropertyValue("topRadius")},set:function(e){this.setPropertyValue("topRadius",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(e){this.setPropertyValue("orientation",e,!0)},enumerable:!0,configurable:!0}),t}(r.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(2),r=i(26),a=i(3),o=function(e){function t(){var t=e.call(this)||this;return t.className="ColorModifier",t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.modify=function(e){return e},t}(r.a);a.b.registeredClasses.ColorModifier=o},function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(2),r=i(18),a=i(16),o=i(1),s=i(4),l=i(13),u=i(66),c=i(44),h=i(108),p=i(0),d=function(e){function t(){var t=e.call(this)||this;t.angle=30,t.depth=30,t.className="Rectangle3D",t.layout="none";var i=t.createChild(a.a);i.shouldClone=!1,i.setElement(t.paper.add("path")),i.isMeasured=!1,t.sideBack=i,t._disposers.push(t.sideBack);var n=t.createChild(a.a);n.shouldClone=!1,n.setElement(t.paper.add("path")),n.isMeasured=!1,t.sideBottom=n,t._disposers.push(t.sideBottom);var r=t.createChild(a.a);r.shouldClone=!1,r.setElement(t.paper.add("path")),r.isMeasured=!1,t.sideLeft=r,t._disposers.push(t.sideLeft);var o=t.createChild(a.a);o.shouldClone=!1,o.setElement(t.paper.add("path")),o.isMeasured=!1,t.sideRight=o,t._disposers.push(t.sideRight);var s=t.createChild(a.a);s.shouldClone=!1,s.setElement(t.paper.add("path")),s.isMeasured=!1,t.sideTop=s,t._disposers.push(t.sideTop);var l=t.createChild(a.a);return l.shouldClone=!1,l.setElement(t.paper.add("path")),l.isMeasured=!1,t.sideFront=l,t._disposers.push(t.sideFront),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.draw=function(){e.prototype.draw.call(this);var t=this.innerWidth,i=this.innerHeight,n=this.depth,r=this.angle,a=o.F(r),l=o.g(r),u={x:0,y:0},c={x:t,y:0},h={x:t,y:i},p={x:0,y:i},d={x:n*l,y:-n*a},f={x:n*l+t,y:-n*a},m={x:n*l+t,y:-n*a+i},y={x:n*l,y:-n*a+i};this.sideFront.path=s.g(u)+s.f(c)+s.f(h)+s.f(p)+s.d(),this.sideBack.path=s.g(d)+s.f(f)+s.f(m)+s.f(y)+s.d(),this.sideLeft.path=s.g(u)+s.f(d)+s.f(y)+s.f(p)+s.d(),this.sideRight.path=s.g(c)+s.f(f)+s.f(m)+s.f(h)+s.d(),this.sideBottom.path=s.g(p)+s.f(y)+s.f(m)+s.f(h)+s.d(),this.sideTop.path=s.g(u)+s.f(d)+s.f(f)+s.f(c)+s.d()},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(e){this.setPropertyValue("angle",e,!0)},enumerable:!0,configurable:!0}),t.prototype.setFill=function(t){var i;if(e.prototype.setFill.call(this,t),p.i(t)&&!("r"in t)||(t=Object(l.c)(t)),t instanceof l.a)i=t.hex;else if(t instanceof c.a||t instanceof u.a)i=t.stops.getIndex(0).color.hex;else{var n=new h.a;n.lightness=-.2,this.sideBack.filters.push(n);var r=n.clone();r.lightness=-.4,this.sideLeft.filters.push(r);var a=n.clone();a.lightness=-.2,this.sideRight.filters.push(a);var o=n.clone();o.lightness=-.1,this.sideTop.filters.push(o);var s=n.clone();s.lightness=-.5,this.sideBottom.filters.push(s)}i&&(this.sideBack.fill=Object(l.b)(i).lighten(-.2),this.sideLeft.fill=Object(l.b)(i).lighten(-.4),this.sideRight.fill=Object(l.b)(i).lighten(-.2),this.sideTop.fill=Object(l.b)(i).lighten(-.1),this.sideBottom.fill=Object(l.b)(i).lighten(-.5))},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.sideBack.copyFrom(t.sideBack),this.sideLeft.copyFrom(t.sideLeft),this.sideRight.copyFrom(t.sideRight),this.sideTop.copyFrom(t.sideTop),this.sideBottom.copyFrom(t.sideBottom)},t}(r.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(2),r=i(68),a=i(16),o=i(1),s=i(4),l=i(0),u=i(13),c=i(66),h=i(44),p=i(108),d=function(e){function t(){var t=e.call(this)||this;t.className="Slice3D",t.layout="none";var i=t.createChild(a.a);t.edge=i,i.shouldClone=!1,i.isMeasured=!1,i.toBack(),t.angle=30,t.depth=20;var n=t.createChild(a.a);t.sideA=n,n.shouldClone=!1,n.isMeasured=!1;var r=t.createChild(a.a);return t.sideB=r,r.shouldClone=!1,r.isMeasured=!1,t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.setFill=function(t){var i;if(e.prototype.setFill.call(this,t),t instanceof u.a)i=t.hex;else if(t instanceof h.a||t instanceof c.a)i=t.stops.getIndex(0).color.hex;else{var n=new p.a;n.lightness=-.25,this.edge.filters.push(n),this.sideA.filters.push(n.clone()),this.sideB.filters.push(n.clone())}if(i){var r=Object(u.b)(i).lighten(-.25);this.edge.fill=r,this.sideA.fill=r,this.sideB.fill=r,this.edge.stroke=r,this.sideA.stroke=r,this.sideB.stroke=r}},t.prototype.draw=function(){if(this.cornerRadius=0,this.innerCornerRadius=0,e.prototype.draw.call(this),0!==this.arc&&this.radius>0&&this.depth>0){this.sideB.show(0),this.sideA.show(0),this.edge.show(0);for(var t=this.startAngle,i=this.arc,n=this.pixelInnerRadius||0,r=this.radiusY||0,a=this.radius,l=t+i,u=r/a*n,c={x:o.g(t)*n,y:o.F(t)*u},h={x:o.g(t)*a,y:o.F(t)*r},p={x:o.g(l)*a,y:o.F(l)*r},d={x:o.g(l)*n,y:o.F(l)*u},f=this.depth,m={x:c.x,y:c.y-f},y={x:h.x,y:h.y-f},v={x:p.x,y:p.y-f},g={x:d.x,y:d.y-f},_="",b=Math.ceil(i/5),x=i/b,w=t,k=y,P=0;P<b;P++)if((w+=x)>0&&w<180){_+=s.g(k);var S={x:o.g(w)*a,y:o.F(w)*r-f};_+=s.f({x:k.x,y:k.y+f}),_+=s.c({x:S.x,y:S.y+f},a,r,!0),_+=s.f(S),_+=s.c(k,a,r),_+="z",k=S}else{_+=s.g(k);S={x:o.g(w)*a,y:o.F(w)*r-f};_+=s.c(S,a,r,!0),_+=s.f({x:S.x,y:S.y+f}),_+=s.c({x:k.x,y:k.y+f},a,r),_+=s.f(k),_+="z",k=S}k=m,w=t;for(P=0;P<b;P++)if((w+=x)>0&&w<180){_+=s.g(k);S={x:o.g(w)*n,y:o.F(w)*u-f};_+=s.f({x:k.x,y:k.y+f}),_+=s.c({x:S.x,y:S.y+f},n,u,!0),_+=s.f(S),_+=s.c(k,n,u),_+="z",k=S}else{_+=s.g(k);S={x:o.g(w)*n,y:o.F(w)*u-f};_+=s.c(S,n,u,!0),_+=s.f({x:S.x,y:S.y+f}),_+=s.c({x:k.x,y:k.y+f},n,u),_+=s.f(k),_+="z",k=S}this.edge.path=_,this.sideA.path=s.g(c)+s.f(h)+s.f(y)+s.f(m)+s.d(),this.sideB.path=s.g(p)+s.f(d)+s.f(g)+s.f(v)+s.d(),this.startAngle<90?this.sideA.toBack():this.sideA.toFront(),this.startAngle+this.arc>90?this.sideB.toBack():this.sideB.toFront(),this.slice.dy=-f}else this.sideA.hide(0),this.sideB.hide(0),this.edge.hide(0)},Object.defineProperty(t.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(e){this.setPropertyValue("depth",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){var e=this.getPropertyValue("angle");return l.h(e)||(e=0),e},set:function(e){this.setPropertyValue("angle",e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radiusY",{get:function(){var e=this.getPropertyValue("radiusY");return l.h(e)||(e=this.radius-this.radius*this.angle/90),e},set:function(e){this.setPropertyValue("radiusY",e,!0)},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this.edge.copyFrom(t.edge),this.sideA.copyFrom(t.sideA),this.sideB.copyFrom(t.sideB)},t}(r.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i(2),r=i(14),a=i(20),o=i(24),s=i(15),l=new o.a,u=i(32),c=i(12),h=i(22),p=i(53),d=i(104),f=i(50),m=i(6),y=i(8),v=i(0),g=function(e){function t(){var t=e.call(this)||this;return t.adapter=new u.a(t),t.closeDelay=1e3,t.closeOnClick=!0,t._language=new s.d,t._menuTag="ul",t._itemTag="li",t._labelTag="a",t._iconTag="img",t._classPrefix="amexport",t._defaultStyles=!0,t._align="right",t._verticalAlign="top",t._tabindex=0,t._ignoreNextClose=!1,t._items=[{label:"...",menu:[{label:"Image",menu:[{type:"png",label:"PNG"},{type:"jpg",label:"JPG"},{type:"svg",label:"SVG"},{type:"pdf",label:"PDF"}]},{label:"Data",menu:[{type:"json",label:"JSON"},{type:"csv",label:"CSV"},{type:"xlsx",label:"XLSX"},{type:"html",label:"HTML"},{type:"pdfdata",label:"PDF"}]},{label:"Print",type:"print"}]}],t.className="ExportMenu",t._disposers.push(t._language),t.invalidate(),t.applyTheme(),t}return Object(n.c)(t,e),t.prototype.validate=function(){this.draw(),e.prototype.validate.call(this)},t.prototype.draw=function(){var e=this;this._element?(this._element.innerHTML="",this._element.className=this.getMenuItemClass(0)):this._element=this.createMenuElement(0),this.defaultStyles&&(this._element.style.display="none"),v.b(this._container).appendChild(this._element);for(var t=this.adapter.apply("items",{items:this._items}).items,i=t.length,n=0;n<i;n++)this.drawBranch(this._element,t[n],0);this._element=this.adapter.apply("menuElement",{menuElement:this._element}).menuElement,this._disposers.push(Object(h.a)().body.events.on("down",(function(t){t.pointer.touch||(e._ignoreNextClose=!1),e.close()}))),this._disposers.push(Object(h.a)().body.events.on("keydown",(function(t){var i=f.a.getEventKey(t.event);switch(i){case"esc":e.close();break;case"up":case"down":case"left":case"right":e._currentSelection&&t.event.preventDefault(),e.moveSelection(i)}}))),this.defaultStyles&&this.loadDefaultCSS()},t.prototype.drawBranch=function(e,t,i){var n=this;if(!0!==(t=this.adapter.apply("branch",{branch:t,level:i}).branch).unsupported){t.ascendants||(t.ascendants=new c.a);var r,a=t.type,o=this.createItemElement(i,a);t.icon?((r=this.createIconElement(i,a)).src=t.icon,(t.label||t.title)&&(r.title=t.title||t.label)):t.svg?(r=this.createSvgElement(i,a,t.svg),(t.label||t.title)&&(r.title=t.title||t.label)):((r=this.createLabelElement(i,a)).innerHTML=t.label?this.language.translate(t.label):"",t.title&&(r.title=t.title));var s=this.getReaderLabel(t,r.innerHTML);r.setAttribute("aria-label",s),o.appendChild(r),t.interactions=Object(h.a)().getInteraction(o),t.element=o,this.typeClickable(a)&&(t.interactions.events.on("hit",(function(e){if(n.events.isEnabled("hit")&&!n.isDisposed()){var i={type:"hit",event:e.event,target:n,branch:t};n.events.dispatchImmediately("hit",i)}})),t.interactions.events.on("keyup",(function(e){if(f.a.isKey(e.event,"enter")&&n.events.isEnabled("enter")){var i={type:"enter",event:e.event,target:n,branch:t};n.events.dispatchImmediately("enter",i)}})));var l=this.getSubMenu(t);null!=l&&(t.interactions.events.on("keyup",(function(e){f.a.isKey(e.event,"enter")&&(n.selectBranch(l[0]),n.setFocus(l[0]))})),t.interactions.events.on("hit",(function(e){n.selectBranch(t)}))),t.interactions.events.on("over",(function(e){if(e.pointer.touch&&(n._ignoreNextClose=!0),n.selectBranch(t),n.events.isEnabled("over")){var i={type:"over",event:e.event,target:n,branch:t};n.events.dispatchImmediately("over",i)}})),t.interactions.events.on("out",(function(e){if(!n.isDisposed()&&(e.pointer.touch||n.delayUnselectBranch(t),n.events.isEnabled("out"))){var i={type:"out",event:e.event,target:n,branch:t};n.events.dispatchImmediately("out",i)}})),t.interactions.events.on("focus",(function(e){n.selectBranch(t)})),t.interactions.events.on("blur",(function(e){n.delayUnselectBranch(t)}));var u=i+1;if(t.menu){var p=this.createMenuElement(u);t.submenuElement=p;for(var d=t.menu.length,m=0;m<d;m++){var y=new c.a;t.menu[m].ascendants=y,t.ascendants.length&&y.copyFrom(t.ascendants),y.push(t),this.drawBranch(p,t.menu[m],u)}if(""==p.innerHTML)return;o.appendChild(p)}t.hidden&&this.hideBranch(t),t.id&&o.setAttribute("id",t.id),t.color&&(o.style.backgroundColor=t.color.hex),e.appendChild(o)}},t.prototype.createMenuElement=function(e){var t=document.createElement(this.menuTag);return t.className=this.getMenuItemClass(e),0===e?t.setAttribute("role","menubar"):t.setAttribute("role","menu"),t},t.prototype.getMenuItemClass=function(e){var t=this.classPrefix+"-menu "+this.classPrefix+"-menu-level-"+e;return 0===e&&(t+=" "+this.classPrefix+"-menu-root "+this.classPrefix+"-"+this.align+" "+this.classPrefix+"-"+this.verticalAlign),this.adapter.apply("menuClass",{className:t,level:e}).className},t.prototype.createItemElement=function(e,t){var i=document.createElement(this.itemTag),n=this.classPrefix+"-item "+this.classPrefix+"-item-level-"+e+" "+this.classPrefix+"-item-"+(t||"blank");return i.className=this.adapter.apply("itemClass",{className:n,level:e,type:t}).className,i.setAttribute("role","menuitem"),i.setAttribute("tabindex",this.tabindex.toString()),i},t.prototype.createLabelElement=function(e,t){var i=document.createElement(this.labelTag),n=this.classPrefix+"-label "+this.classPrefix+"-label-level-"+e+" "+this.classPrefix+"-item-"+(t||"blank");return this.typeClickable(t)&&(n+=" "+this.classPrefix+"-clickable"),i.className=this.adapter.apply("labelClass",{className:n,level:e,type:t}).className,i},t.prototype.createIconElement=function(e,t){var i=document.createElement(this.iconTag),n=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+e+" "+this.classPrefix+"-item-"+(t||"blank");return this.typeClickable(t)&&(n+=" "+this.classPrefix+"-clickable"),i.className=this.adapter.apply("labelClass",{className:n,level:e,type:t}).className,i.setAttribute("tabindex",this.tabindex.toString()),i.setAttribute("role","menuitem"),i},t.prototype.createSvgElement=function(e,t,i){var n=(new DOMParser).parseFromString(i,"image/svg+xml").documentElement,r=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+e+" "+this.classPrefix+"-item-"+(t||"blank");return this.typeClickable(t)&&(r+=" "+this.classPrefix+"-clickable"),n.setAttribute("class",this.adapter.apply("labelClass",{className:r,level:e,type:t}).className),n.setAttribute("tabindex",this.tabindex.toString()),n.setAttribute("role","menuitem"),n},t.prototype.dispose=function(){this._disposed||(e.prototype.dispose.call(this),this._element&&this._element.parentNode&&this._element.parentNode.removeChild(this._element))},t.prototype.typeClickable=function(e){return v.d(e)},t.prototype.hasSubMenu=function(e){return!(!e.menu||!e.menu.length)},t.prototype.getSubMenu=function(e){if(e.menu&&e.menu.length)return e.menu},t.prototype.getReaderLabel=function(e,t){return t=m.M(t),0==e.ascendants.length?(t="..."==t?this.language.translate("Export"):t,t+=" ["+this.language.translate("Press ENTER or use arrow keys to navigate")+"]"):this.hasSubMenu(e)?t+=" ["+this.language.translate("Click, tap or press ENTER to open")+"]":"print"==e.type?t=this.language.translate("Click, tap or press ENTER to print."):this.typeClickable(e.type)&&(t=this.language.translate("Click, tap or press ENTER to export as %1.",void 0,t)),this.adapter.apply("rederLabel",{label:t,branch:e}).label},Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(e){this._container=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tag",{set:function(e){this._menuTag=e,this._itemTag="ul"==e?"li":"div",this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"menuTag",{get:function(){return this.adapter.apply("menuTag",{tag:this._menuTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemTag",{get:function(){return this.adapter.apply("itemTag",{tag:this._itemTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelTag",{get:function(){return this.adapter.apply("labelTag",{tag:this._labelTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconTag",{get:function(){return this.adapter.apply("iconTag",{tag:this._iconTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this.adapter.apply("align",{align:this._align}).align},set:function(e){this._align=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",{verticalAlign:this._verticalAlign}).verticalAlign},set:function(e){this._verticalAlign=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",{classPrefix:this._classPrefix}).classPrefix},set:function(e){this._classPrefix=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",{defaultStyles:this._defaultStyles}).defaultStyles},set:function(e){this._defaultStyles!=e&&(this._defaultStyles=e,e&&this.loadDefaultCSS()),this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.loadDefaultCSS=function(){this._disposers.push(function(e,t){var i=t||"amexport",n=new a.a;return l.insertKeyIfEmpty(i,(function(){var t=new s.c([new r.b(e,"."+i+"-menu *",{"box-sizing":"border-box"}),new r.b(e,"."+i+"-menu-level-0",{position:"absolute",top:"5px",right:"5px"}),new r.b(e,"."+i+"-menu-level-0."+i+"-left",{right:"auto",left:"5px"}),new r.b(e,"."+i+"-menu-level-0."+i+"-right",{right:"5px",left:"auto"}),new r.b(e,"."+i+"-menu-level-0."+i+"-top",{top:"5px",bottom:"auto"}),new r.b(e,"."+i+"-menu-level-0."+i+"-bottom",{top:"auto",bottom:"5px"}),new r.b(e,"."+i+"-item."+i+"-item-level-0",{opacity:"0.3",width:"30px","min-height":"30px",transition:"all 100ms ease-in-out"}),new r.b(e,"div:hover > div > ."+i+"-menu ."+i+"-item."+i+"-item-level-0, ."+i+"-item."+i+"-item-level-0.active",{opacity:"0.9"}),new r.b(e,"."+i+"-item."+i+"-item-level-0 > a",{padding:"0","text-align":"center",overflow:"hidden"}),new r.b(e,"."+i+"-item."+i+"-item-level-0:before",{display:"block"}),new r.b(e,"."+i+"-item",{position:"relative",display:"block",opacity:"0","z-index":"1","border-radius":"3px","background-color":n.getFor("secondaryButton").hex,padding:"0",margin:"1px 1px 0 0",color:n.getFor("secondaryButton").alternative.hex,transition:"all 100ms ease-in-out, opacity 0.5s ease 0.5s"}),new r.b(e,"."+i+"-left ."+i+"-item",{margin:"1px 0 0 1px"}),new r.b(e,"."+i+"-item:hover, ."+i+"-item.active",{background:n.getFor("secondaryButtonHover").hex,color:n.getFor("secondaryButtonText").hex}),new r.b(e,"."+i+"-item > ."+i+"-menu",{position:"absolute",top:"-1px",right:"0","margin-right":"100%"}),new r.b(e,"."+i+"-left ."+i+"-item > ."+i+"-menu",{left:"0",right:"auto","margin-left":"100%","margin-right":"auto"}),new r.b(e,"."+i+"-right ."+i+"-item > ."+i+"-menu",{left:"auto",right:"0","margin-left":"auto","margin-right":"100%"}),new r.b(e,"."+i+"-top ."+i+"-item > ."+i+"-menu",{top:"-1px",bottom:"auto"}),new r.b(e,"."+i+"-bottom ."+i+"-item > ."+i+"-menu",{top:"auto",bottom:"0"}),new r.b(e,"."+i+"-item > ."+i+"-menu",{display:"none"}),new r.b(e,"."+i+"-item:hover > ."+i+"-menu, ."+i+"-item.active > ."+i+"-menu",{display:"block"}),new r.b(e,"."+i+"-item:hover > ."+i+"-menu > ."+i+"-item, ."+i+"-item.active > ."+i+"-menu > ."+i+"-item",{opacity:"1"}),new r.b(e,"."+i+"-menu",{display:"block","list-style":"none",margin:"0",padding:"0"}),new r.b(e,"."+i+"-label",{display:"block",cursor:"default",padding:"0.5em 1em"}),new r.b(e,"."+i+"-icon",{display:"block",cursor:"default",padding:"0.2em 0.4em",width:"1.2em",height:"1.2em","min-width":"32px","min-height":"32px",margin:"auto auto","border-radius":"3px"}),new r.b(e,"."+i+"-item-level-0 > ."+i+"-icon",{padding:"0.1em 0.2em"}),new r.b(e,"."+i+"-clickable",{cursor:"pointer"})]);return new s.a((function(){l.removeKey(i),t.dispose()}))})).increment()}(r.p(this.container),this.classPrefix)),this._element&&(this._element.style.display="")},Object.defineProperty(t.prototype,"tabindex",{get:function(){return this.adapter.apply("tabindex",{tabindex:this._tabindex}).tabindex},set:function(e){this._tabindex=e,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"language",{get:function(){var e=this,t=this._language.get();return null==t&&(t=new p.a,this._language.set(t,t.events.on("localechanged",(function(t){e.invalidate()})))),t},set:function(e){var t=this;this._language.set(e,e.events.on("localechanged",(function(e){t.invalidate()}))),this.invalidate()},enumerable:!0,configurable:!0}),t.prototype.close=function(){var e=this;if(!this.isDisposed())if(this._ignoreNextClose)this._ignoreNextClose=!1;else{if(this.closeOnClick&&(this._element.style.pointerEvents="none",setTimeout((function(){e._element.style.pointerEvents="auto"}),100)),this._currentSelection&&(this.setBlur(this._currentSelection),this._currentSelection=void 0),this._element)for(var t=this._element.getElementsByClassName("active"),i=t.length-1;i>=0;i--)t[i]&&r.s(t[i],"active");this.events.dispatchImmediately("closed",{type:"closed",target:this})}},t.prototype.selectBranch=function(e){var t=this;if(!this.isDisposed()&&(e.closeTimeout&&(this.removeDispose(e.closeTimeout),e.closeTimeout=void 0),r.e(e.element,"active"),e.submenuElement&&e.submenuElement.setAttribute("aria-expanded","true"),this._currentSelection&&this._currentSelection!==e&&this._currentSelection.ascendants&&y.d(y.b(y.h([this._currentSelection]),this._currentSelection.ascendants.iterator()),(function(i){e.ascendants.contains(i)||e===i||t.unselectBranch(i,!0)})),y.d(e.ascendants.iterator(),(function(e){e.closeTimeout&&(t.removeDispose(e.closeTimeout),e.closeTimeout=void 0),r.e(e.element,"active")})),this._currentSelection=e,this.events.isEnabled("branchselected"))){var i={type:"branchselected",target:this,branch:e};this.events.dispatchImmediately("branchselected",i)}},t.prototype.unselectBranch=function(e,t){if(!this.isDisposed()&&(r.s(e.element,"active"),e.submenuElement&&e.submenuElement.removeAttribute("aria-expanded"),this._currentSelection==e&&(this._currentSelection=void 0),this.events.isEnabled("branchunselected"))){var i={type:"branchunselected",target:this,branch:e};this.events.dispatchImmediately("branchunselected",i)}},t.prototype.delayUnselectBranch=function(e,t){var i=this;this.isDisposed()||(e.closeTimeout&&(this.removeDispose(e.closeTimeout),e.closeTimeout=void 0),e.closeTimeout=this.setTimeout((function(){i.unselectBranch(e,t)}),this.closeDelay),!0!==t&&e.ascendants&&y.d(e.ascendants.iterator(),(function(e){i.delayUnselectBranch(e,!0)})))},t.prototype.moveSelection=function(e){if(!this.isDisposed()&&this._currentSelection){var t;if("up"==e)t=this.getPrevSibling(this._currentSelection);else if("down"==e)t=this.getNextSibling(this._currentSelection);else if("left"==e&&"right"==this.align||"right"==e&&"left"==this.align){var i=this.getSubMenu(this._currentSelection);null!=i&&(t=i[0])}else("right"==e&&"right"==this.align||"left"==e&&"left"==this.align)&&(t=this.getParentItem(this._currentSelection));t&&t!==this._currentSelection&&(this.selectBranch(t),this.setFocus(t),this._currentSelection=t)}},t.prototype.getSiblings=function(e){var t=this.getParentItem(e);return t&&t.menu?t.menu:[]},t.prototype.getParentItem=function(e){return e.ascendants&&e.ascendants.length?e.ascendants.getIndex(e.ascendants.length-1):void 0},t.prototype.getNextSibling=function(e){var t=this.getSiblings(e);if(t.length>1){var i=t.indexOf(e)+1;return t[i=t.length==i?0:i].unsupported?this.getNextSibling(t[i]):t[i]}return e},t.prototype.getPrevSibling=function(e){var t=this.getSiblings(e);if(t.length>1){var i=t.indexOf(e)-1;return t[i=-1==i?t.length-1:i].unsupported?this.getPrevSibling(t[i]):t[i]}return e},t.prototype.setFocus=function(e){if(e.interactions)try{e.interactions.element.focus()}catch(t){}},t.prototype.setBlur=function(e){if(e.interactions)try{e.interactions.element.blur()}catch(t){}},t.prototype.hideBranch=function(e){e.element.style.display="none"},t.prototype.showBranch=function(e){e.element.style.display=""},Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),t}(d.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(120);function r(e,t){if(e){if("string"===typeof e)return Object(n.a)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(n.a)(e,t):void 0}}},function(e,t,i){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};var i={};return Object.keys(e).filter((function(i){return i.match(/^on[A-Z]/)&&"function"===typeof e[i]&&!t.includes(i)})).forEach((function(t){i[t]=e[t]})),i}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i(60),i(10);var n=i(116),r=(i(84),{xs:0,sm:600,md:960,lg:1280,xl:1920}),a={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function o(e,t,i){if(Array.isArray(t)){var r=e.theme.breakpoints||a;return t.reduce((function(e,n,a){return e[r.up(r.keys[a])]=i(t[a]),e}),{})}if("object"===Object(n.a)(t)){var o=e.theme.breakpoints||a;return Object.keys(t).reduce((function(e,n){return e[o.up(n)]=i(t[n]),e}),{})}return i(t)}},function(e,t,i){"use strict";function n(){return/apple/i.test(navigator.vendor)}function r(){return/MSIE |Trident\//.test(navigator.userAgent)}i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(2),r=i(142),a=i(3),o=i(1),s=i(0),l=function(e){function t(){var t=e.call(this)||this;return t.lightnesses=[],t.brightnesses=[],t.opacities=[],t.offsets=[],t.className="GradientModifier",t.applyTheme(),t}return Object(n.c)(t,e),Object.defineProperty(t.prototype,"lightnesses",{get:function(){return this._lightnesses},set:function(e){this._lightnesses=e,this._brightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"brightnesses",{get:function(){return this._brightnesses},set:function(e){this._brightnesses=e,this._lightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacities",{get:function(){return this._opacities},set:function(e){this._opacities=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return this._offsets},set:function(e){this._offsets=e},enumerable:!0,configurable:!0}),t.prototype.modify=function(e){this.gradient.clear();var t=0;this.opacities&&(t=o.B(t,this.opacities.length)),this.lightnesses&&(t=o.B(t,this.lightnesses.length)),this.brightnesses&&(t=o.B(t,this.brightnesses.length));for(var i,n,r=1,a=0;a<t;a++){var l=e;this.opacities&&s.h(this.opacities[a])&&(r=this.opacities[a]),this.lightnesses&&s.h(this.lightnesses[a])&&(i=this.lightnesses[a],n=void 0),this.brightnesses&&s.h(this.brightnesses[a])&&(n=this.brightnesses[a],i=void 0),s.h(n)?l=e.brighten(this.brightnesses[a]):s.h(i)&&(l=e.lighten(this.lightnesses[a]));var u=this.offsets[a];this.gradient.addColor(l,r,u)}return this.gradient},t.prototype.copyFrom=function(t){e.prototype.copyFrom.call(this,t),this._offsets=t.offsets,this._brightnesses=t.brightnesses,this._lightnesses=t.lightnesses,this._opacities=t.opacities},t}(r.a);a.b.registeredClasses.GradientModifier=l},function(e,t,i){var n=i(197).default,r=i(164).default,a=i(168).default,o=i(198).default,s=i(123).default,l=i(165).default,u=i(233).default,c=i(199).default,h=i(200).default,p=i(237).default,d=i(238).default,f=i(201).default,m=i(240).default,y=i(202).default,v=i(203).default;e.exports=function(){"use strict";var e,t,i;function g(n,r){if(e)if(t){var a="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",o={};e(o),i=r(o),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(i.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=r;else e=r}return g(["exports"],(function(e){var t="2.7.0",i=n;function n(e,t,i,n){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=i,this.p2y=n}n.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},n.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},n.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},n.prototype.solveCurveX=function(e,t){var i,n,r,a,o;for(void 0===t&&(t=1e-6),r=e,o=0;o<8;o++){if(a=this.sampleCurveX(r)-e,Math.abs(a)<t)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=a/s}if((r=e)<(i=0))return i;if(r>(n=1))return n;for(;i<n;){if(a=this.sampleCurveX(r),Math.abs(a-e)<t)return r;e>a?i=r:n=r,r=.5*(n-i)+i}return r},n.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var g=_;function _(e,t){this.x=e,this.y=t}_.prototype={clone:function(){return new _(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),n=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=n,this},_rotateAround:function(e,t){var i=Math.cos(e),n=Math.sin(e),r=t.y+n*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-n*(this.y-t.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},_.convert=function(e){return e instanceof _?e:Array.isArray(e)?new _(e[0],e[1]):e};var b="undefined"!=typeof self?self:{},x=1e-6,w="undefined"!=typeof Float32Array?Float32Array:Array;function k(){var e=new w(9);return w!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function P(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t,i){var n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],p=t[9],d=t[10],f=t[11],m=t[12],y=t[13],v=t[14],g=t[15],_=i[0],b=i[1],x=i[2],w=i[3];return e[0]=_*n+b*s+x*h+w*m,e[1]=_*r+b*l+x*p+w*y,e[2]=_*a+b*u+x*d+w*v,e[3]=_*o+b*c+x*f+w*g,e[4]=(_=i[4])*n+(b=i[5])*s+(x=i[6])*h+(w=i[7])*m,e[5]=_*r+b*l+x*p+w*y,e[6]=_*a+b*u+x*d+w*v,e[7]=_*o+b*c+x*f+w*g,e[8]=(_=i[8])*n+(b=i[9])*s+(x=i[10])*h+(w=i[11])*m,e[9]=_*r+b*l+x*p+w*y,e[10]=_*a+b*u+x*d+w*v,e[11]=_*o+b*c+x*f+w*g,e[12]=(_=i[12])*n+(b=i[13])*s+(x=i[14])*h+(w=i[15])*m,e[13]=_*r+b*l+x*p+w*y,e[14]=_*a+b*u+x*d+w*v,e[15]=_*o+b*c+x*f+w*g,e}function T(e,t,i){var n,r,a,o,s,l,u,c,h,p,d,f,m=i[0],y=i[1],v=i[2];return t===e?(e[12]=t[0]*m+t[4]*y+t[8]*v+t[12],e[13]=t[1]*m+t[5]*y+t[9]*v+t[13],e[14]=t[2]*m+t[6]*y+t[10]*v+t[14],e[15]=t[3]*m+t[7]*y+t[11]*v+t[15]):(r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],p=t[9],d=t[10],f=t[11],e[0]=n=t[0],e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=h,e[9]=p,e[10]=d,e[11]=f,e[12]=n*m+s*y+h*v+t[12],e[13]=r*m+l*y+p*v+t[13],e[14]=a*m+u*y+d*v+t[14],e[15]=o*m+c*y+f*v+t[15]),e}function C(e,t,i){var n=i[0],r=i[1],a=i[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function O(e,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*r+u*n,e[5]=o*r+c*n,e[6]=s*r+h*n,e[7]=l*r+p*n,e[8]=u*r-a*n,e[9]=c*r-o*n,e[10]=h*r-s*n,e[11]=p*r-l*n,e}function I(e,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r-u*n,e[1]=o*r-c*n,e[2]=s*r-h*n,e[3]=l*r-p*n,e[8]=a*n+u*r,e[9]=o*n+c*r,e[10]=s*n+h*r,e[11]=l*n+p*r,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var E=S;function A(){var e=new w(3);return w!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function M(e){var t=new w(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function D(e){return Math.hypot(e[0],e[1],e[2])}function j(e,t,i){var n=new w(3);return n[0]=e,n[1]=t,n[2]=i,n}function F(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function L(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function R(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function z(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function V(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function B(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e}function N(e,t){var i=t[0],n=t[1],r=t[2],a=i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function U(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function W(e,t,i){var n=t[0],r=t[1],a=t[2],o=i[0],s=i[1],l=i[2];return e[0]=r*l-a*s,e[1]=a*o-n*l,e[2]=n*s-r*o,e}function G(e,t,i){var n=t[0],r=t[1],a=t[2],o=i[3]*n+i[7]*r+i[11]*a+i[15];return e[0]=(i[0]*n+i[4]*r+i[8]*a+i[12])/(o=o||1),e[1]=(i[1]*n+i[5]*r+i[9]*a+i[13])/o,e[2]=(i[2]*n+i[6]*r+i[10]*a+i[14])/o,e}function H(e,t,i){var n=i[0],r=i[1],a=i[2],o=t[0],s=t[1],l=t[2],u=r*l-a*s,c=a*o-n*l,h=n*s-r*o,p=r*h-a*c,d=a*u-n*h,f=n*c-r*u,m=2*i[3];return c*=m,h*=m,d*=2,f*=2,e[0]=o+(u*=m)+(p*=2),e[1]=s+c+d,e[2]=l+h+f,e}var X,Y=L,q=R,Z=D;function K(e,t,i){var n=t[0],r=t[1],a=t[2],o=t[3];return e[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*o,e[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*o,e[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*o,e[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*o,e}function $(){var e=new w(4);return w!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function J(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Q(e,t,i){i*=.5;var n=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(i),l=Math.cos(i);return e[0]=n*l+o*s,e[1]=r*l+a*s,e[2]=a*l-r*s,e[3]=o*l-n*s,e}function ee(e,t){return e[0]===t[0]&&e[1]===t[1]}A(),X=new w(4),w!=Float32Array&&(X[0]=0,X[1]=0,X[2]=0,X[3]=0),A(),j(1,0,0),j(0,1,0),$(),$(),k(),function(){var e;e=new w(2),w!=Float32Array&&(e[0]=0,e[1]=0)}();var te=Math.PI/180,ie=180/Math.PI;function ne(e){return e*te}function re(e){return e*ie}var ae=[[0,0],[1,0],[1,1],[0,1]];function oe(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)}function se(e,t,n,r){var a=new i(e,t,n,r);return function(e){return a.solve(e)}}var le=se(.25,.1,.25,1);function ue(e,t,i){return Math.min(i,Math.max(t,e))}function ce(e,t,i){return(i=ue((i-e)/(t-e),0,1))*i*(3-2*i)}function he(e,t,i){var n=i-t,r=((e-t)%n+n)%n+t;return r===t?i:r}function pe(e,t,i){if(!e.length)return i(null,[]);var n=e.length,r=new Array(e.length),a=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(a=e),r[o]=t,0==--n&&i(a,r)}))}))}function de(e){var t=[];for(var i in e)t.push(e[i]);return t}function fe(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=0,a=i;r<a.length;r++){var o=a[r];for(var s in o)e[s]=o[s]}return e}var me=1;function ye(){return me++}function ve(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function ge(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function _e(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function be(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function xe(e,t){return-1!==e.indexOf(t,e.length-t.length)}function we(e,t,i){var n={};for(var r in e)n[r]=t.call(i||this,e[r],r,e);return n}function ke(e,t,i){var n={};for(var r in e)t.call(i||this,e[r],r,e)&&(n[r]=e[r]);return n}function Pe(e){return Array.isArray(e)?e.map(Pe):"object"==typeof e&&e?we(e,Pe):e}var Se={};function Te(e){Se[e]||("undefined"!=typeof console&&console.warn(e),Se[e]=!0)}function Ce(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function Oe(e){for(var t,i,n=0,r=0,a=e.length,o=a-1;r<a;o=r++)t=e[r],n+=((i=e[o]).x-t.x)*(t.y+i.y);return n}function Ie(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Ee(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,i,n,r){var a=n||r;return t[i]=!a||a.toLowerCase(),""})),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var Ae,Me,De,je=null;function Fe(e){if(null==je){var t=e.navigator?e.navigator.userAgent:null;je=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return je}function Le(e){try{var t=b[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var Re,ze,Ve,Be={now:function(){return void 0!==De?De:b.performance.now()},setNow:function(e){De=e},restoreNow:function(){De=void 0},frame:function(e){var t=b.requestAnimationFrame(e);return{cancel:function(){return b.cancelAnimationFrame(t)}}},getImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=b.document.createElement("canvas"),n=i.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return Ae||(Ae=b.document.createElement("a")),Ae.href=e,Ae.href},get devicePixelRatio(){return b.devicePixelRatio},get prefersReducedMotion(){return!!b.matchMedia&&(null==Me&&(Me=b.matchMedia("(prefers-reduced-motion: reduce)")),Me.matches)}},Ne={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==Re){var e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Re=null!=Object({NODE_ENV:"production",PUBLIC_URL:"/Overlay",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL_REGEX?new RegExp(Object({NODE_ENV:"production",PUBLIC_URL:"/Overlay",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL_REGEX):e}catch(t){Re=e}}return Re},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ue={supported:!1,testSupport:function(e){!We&&Ve&&(Ge?He(e):ze=e)}},We=!1,Ge=!1;function He(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Ve),e.isContextLost())return;Ue.supported=!0}catch(e){}e.deleteTexture(t),We=!0}b.document&&((Ve=b.document.createElement("img")).onload=function(){ze&&He(ze),ze=null,Ge=!0},Ve.onerror=function(){We=!0,ze=null},Ve.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Xe="01",Ye="NO_ACCESS_TOKEN";function qe(e){return 0===e.indexOf("mapbox:")}function Ze(e){return Ne.API_URL_REGEX.test(e)}var Ke=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function $e(e){var t=e.match(Ke);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Je(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}function Qe(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(b.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var et,tt,it=function(){function e(t){y(this,e),this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return v(e,[{key:"getStorageKey",value:function(e){var t=Qe(Ne.ACCESS_TOKEN),i="";return i=t&&t.u?b.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):Ne.ACCESS_TOKEN||"",e?"mapbox.eventData.".concat(e,":").concat(i):"mapbox.eventData:".concat(i)}},{key:"fetchEventData",value:function(){var e=Le("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var n=b.localStorage.getItem(t);n&&(this.eventData=JSON.parse(n));var r=b.localStorage.getItem(i);r&&(this.anonId=r)}catch(e){Te("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var e=Le("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{b.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&b.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){Te("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(e){}},{key:"postEvent",value:function(e,i,n,r){var a=this;if(Ne.EVENTS_URL){var o=$e(Ne.EVENTS_URL);o.params.push("access_token=".concat(r||Ne.ACCESS_TOKEN||""));var s={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:t,skuId:Xe,userId:this.anonId},l=i?fe(s,i):s,u={url:Je(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([l])};this.pendingRequest=xt(u,(function(e){a.pendingRequest=null,n(e),a.saveEventData(),a.processRequests(r)}))}}},{key:"queueRequest",value:function(e,t){this.queue.push(e),this.processRequests(t)}}]),e}(),nt=new(function(e){f(i,e);var t=m(i);function i(e){var n;return y(this,i),(n=t.call(this,"appUserTurnstile"))._customAccessToken=e,n}return v(i,[{key:"postTurnstileEvent",value:function(e,t){Ne.EVENTS_URL&&Ne.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return qe(e)||Ze(e)}))&&this.queueRequest(Date.now(),t)}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=Qe(Ne.ACCESS_TOKEN),n=i?i.u:Ne.ACCESS_TOKEN,r=n!==this.eventData.tokenU;_e(this.anonId)||(this.anonId=ve(),r=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),l=(a-this.eventData.lastSuccess)/864e5;r=r||l>=1||l<-1||o.getDate()!==s.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=a,t.eventData.tokenU=n)}),e)}}}]),i}(it)),rt=nt.postTurnstileEvent.bind(nt),at=new(function(e){f(i,e);var t=m(i);function i(){var e;return y(this,i),(e=t.call(this,"map.load")).success={},e.skuToken="",e}return v(i,[{key:"postMapLoadEvent",value:function(e,t,i,n){this.skuToken=t,this.errorCb=n,Ne.EVENTS_URL&&(i||Ne.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},i):this.errorCb(new Error(Ye)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),n=i.id,r=i.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),_e(this.anonId)||(this.anonId=ve()),this.postEvent(r,{skuToken:this.skuToken},(function(e){e?t.errorCb(e):n&&(t.success[n]=!0)}),e))}}}]),i}(it)),ot=at.postMapLoadEvent.bind(at),st=new(function(e){f(i,e);var t=m(i);function i(){var e;return y(this,i),(e=t.call(this,"map.auth")).success={},e.skuToken="",e}return v(i,[{key:"getSession",value:function(e,t,i,n){var r=this;if(Ne.API_URL&&Ne.SESSION_PATH){var a=$e(Ne.API_URL+Ne.SESSION_PATH);a.params.push("sku=".concat(t||"")),a.params.push("access_token=".concat(n||Ne.ACCESS_TOKEN||""));var o={url:Je(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=wt(o,(function(e){r.pendingRequest=null,i(e),r.saveEventData(),r.processRequests(n)}))}}},{key:"getSessionAPI",value:function(e,t,i,n){this.skuToken=t,this.errorCb=n,Ne.SESSION_PATH&&Ne.API_URL&&(i||Ne.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},i):this.errorCb(new Error(Ye)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),n=i.id,r=i.timestamp;n&&this.success[n]||this.getSession(r,this.skuToken,(function(e){e?t.errorCb(e):n&&(t.success[n]=!0)}),e)}}}]),i}(it)),lt=st.getSessionAPI.bind(st),ut=new Set,ct="mapbox-tiles",ht=500,pt=50;function dt(){b.caches&&!et&&(et=b.caches.open(ct))}function ft(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var mt=1/0,yt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(yt);var vt=function(e){f(i,e);var t=m(i);function i(e,n,r){var a;return y(this,i),401===n&&Ze(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),(a=t.call(this,e)).status=n,a.url=r,a}return v(i,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),i}(d(Error)),gt=Ie()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===b.location.protocol?b.parent:b).location.href},_t=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(gt())&&!/^\w+:/.test(i))){if(b.fetch&&b.Request&&b.AbortController&&b.Request.prototype.hasOwnProperty("signal"))return function(e,t){var i,n=new b.AbortController,r=new b.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:gt(),signal:n.signal}),a=!1,o=!1,s=(i=r.url).indexOf("sku=")>0&&Ze(i);"json"===e.type&&r.headers.set("Accept","application/json");var l=function(i,n,a){if(!o){if(i&&"SecurityError"!==i.message&&Te(i),n&&a)return u(n);var l=Date.now();b.fetch(r).then((function(i){if(i.ok){var n=s?i.clone():null;return u(i,n,l)}return t(new vt(i.statusText,i.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))}},u=function(i,n,s){("arrayBuffer"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text()).then((function(e){o||(n&&s&&function(e,t,i){if(dt(),et){var n={status:t.status,statusText:t.statusText,headers:new b.Headers};t.headers.forEach((function(e,t){return n.headers.set(t,e)}));var r=Ee(t.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&n.headers.set("Expires",new Date(i+1e3*r["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-i<42e4||function(e,t){if(void 0===tt)try{new Response(new ReadableStream),tt=!0}catch(e){tt=!1}tt?t(e.body):e.blob().then(t)}(t,(function(t){var i=new b.Response(t,n);dt(),et&&et.then((function(t){return t.put(ft(e.url),i)})).catch((function(e){return Te(e.message)}))})))}}(r,n,s),a=!0,t(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((function(e){o||t(new Error(e.message))}))};return s?function(e,t){if(dt(),!et)return t(null);var i=ft(e.url);et.then((function(e){e.match(i).then((function(n){var r=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),i=Ee(e.headers.get("Cache-Control")||"");return t>Date.now()&&!i["no-cache"]}(n);e.delete(i),r&&e.put(i,n.clone()),t(null,n,r)})).catch(t)})).catch(t)}(r,l):l(null,null),{cancel:function(){o=!0,a||n.abort()}}}(e,t);if(Ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(e,t){var i=new b.XMLHttpRequest;for(var n in i.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(i.responseType="arraybuffer"),e.headers)i.setRequestHeader(n,e.headers[n]);return"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=function(){t(new Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var n=i.response;if("json"===e.type)try{n=JSON.parse(i.response)}catch(e){return t(e)}t(null,n,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else t(new vt(i.statusText,i.status,e.url))},i.send(e.body),{cancel:function(){return i.abort()}}}(e,t)},bt=function(e,t){return _t(fe(e,{type:"arrayBuffer"}),t)},xt=function(e,t){return _t(fe(e,{method:"POST"}),t)},wt=function(e,t){return _t(fe(e,{method:"GET"}),t)};function kt(e){var t=b.document.createElement("a");return t.href=e,t.protocol===b.document.location.protocol&&t.host===b.document.location.host}var Pt,St,Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Pt=[],St=0;var Ct=function e(t,i){if(Ue.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),St>=Ne.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:t,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return Pt.push(n),n}St++;var r=!1,a=function(){if(!r)for(r=!0,St--;Pt.length&&St<Ne.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Pt.shift(),i=t.requestParameters,n=t.callback;t.cancelled||(t.cancel=e(i,n).cancel)}},o=bt(t,(function(e,t,n,r){a(),e?i(e):t&&(b.createImageBitmap?function(e,t){var i=new b.Blob([new Uint8Array(e)],{type:"image/png"});b.createImageBitmap(i).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(t,(function(e,t){return i(e,t,n,r)})):function(e,t){var i=new b.Image,n=b.URL;i.onload=function(){t(null,i),n.revokeObjectURL(i.src),i.onload=null,b.requestAnimationFrame((function(){i.src=Tt}))},i.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var r=new b.Blob([new Uint8Array(e)],{type:"image/png"});i.src=e.byteLength?n.createObjectURL(r):Tt}(t,(function(e,t){return i(e,t,n,r)})))}));return{cancel:function(){o.cancel(),a()}}};function Ot(e,t,i){i[e]&&-1!==i[e].indexOf(t)||(i[e]=i[e]||[],i[e].push(t))}function It(e,t,i){if(i&&i[e]){var n=i[e].indexOf(t);-1!==n&&i[e].splice(n,1)}}var Et=v((function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,e),fe(this,i),this.type=t})),At=function(e){f(i,e);var t=m(i);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y(this,i),t.call(this,"error",fe({error:e},n))}return v(i)}(Et),Mt=function(){function e(){y(this,e)}return v(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},Ot(e,t,this._listeners),this}},{key:"off",value:function(e,t){return It(e,t,this._listeners),It(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){var i=this;return t?(this._oneTimeListeners=this._oneTimeListeners||{},Ot(e,t,this._oneTimeListeners),this):new Promise((function(t){return i.once(e,t)}))}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new Et(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;var n,r=this._listeners&&this._listeners[i]?this._listeners[i].slice():[],a=p(r);try{for(a.s();!(n=a.n()).done;)n.value.call(this,e)}catch(h){a.e(h)}finally{a.f()}var o,s=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[],l=p(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;It(i,u,this._oneTimeListeners),u.call(this,e)}}catch(h){l.e(h)}finally{l.f()}var c=this._eventedParent;c&&(fe(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(e))}else e instanceof At&&console.error(e.error);return this}},{key:"listens",value:function(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),Dt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":0.1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}'),jt=v((function e(t,i,n,r){y(this,e),this.message=(t?"".concat(t,": "):"")+n,r&&(this.identifier=r),null!=i&&i.__line__&&(this.line=i.__line__)}));function Ft(e){var t=e.value;return t?[new jt(e.key,t,"constants have been deprecated as of v8")]:[]}function Lt(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=0,a=i;r<a.length;r++){var o=a[r];for(var s in o)e[s]=o[s]}return e}function Rt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function zt(e){if(Array.isArray(e))return e.map(zt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=zt(e[i]);return t}return Rt(e)}var Vt=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,n)).message=n,r.key=e,r}return v(i)}(d(Error)),Bt=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];y(this,e),this.parent=t,this.bindings={};var n,r=p(i);try{for(r.s();!(n=r.n()).done;){var a=h(n.value,2),o=a[0],s=a[1];this.bindings[o]=s}}catch(l){r.e(l)}finally{r.f()}}return v(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),Nt={kind:"null"},Ut={kind:"number"},Wt={kind:"string"},Gt={kind:"boolean"},Ht={kind:"color"},Xt={kind:"object"},Yt={kind:"value"},qt={kind:"collator"},Zt={kind:"formatted"},Kt={kind:"resolvedImage"};function $t(e,t){return{kind:"array",itemType:e,N:t}}function Jt(e){if("array"===e.kind){var t=Jt(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var Qt=[Nt,Ut,Wt,Gt,Ht,Zt,Xt,$t(Yt),Kt];function ei(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!ei(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind){var i,n=p(Qt);try{for(n.s();!(i=n.n()).done;)if(!ei(i.value,t))return null}catch(r){n.e(r)}finally{n.f()}}}return"Expected ".concat(Jt(e)," but found ").concat(Jt(t)," instead.")}function ti(e,t){return t.some((function(t){return t.kind===e.kind}))}function ii(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}function ni(e){var t={exports:{}};return e(t,t.exports),t.exports}var ri=ni((function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(e){return(e=Math.round(e))<0?0:e>255?255:e}function r(e){return n("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function o(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in i)return i[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=s.indexOf("("),u=s.indexOf(")");if(-1!==l&&u+1===s.length){var c=s.substr(0,l),h=s.substr(l+1,u-(l+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=a(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),p];case"hsla":if(4!==h.length)return null;p=a(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,f=a(h[1]),m=a(h[2]),y=m<=.5?m*(f+1):m+f-m*f,v=2*m-y;return[n(255*o(v,y,d+1/3)),n(255*o(v,y,d)),n(255*o(v,y,d-1/3)),p];default:return null}}return null}}catch(e){}})),ai=function(){function e(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;y(this,e),this.r=t,this.g=i,this.b=n,this.a=r}return v(e,[{key:"toString",value:function(){var e=this.toArray(),t=h(e,4),i=t[0],n=t[1],r=t[2],a=t[3];return"rgba(".concat(Math.round(i),",").concat(Math.round(n),",").concat(Math.round(r),",").concat(a,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,i=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*e/n,255*t/n,255*i/n,n]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var i=ri.parseCSSColor(t);return i?new e(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}}}}]),e}();ai.black=new ai(0,0,0,1),ai.white=new ai(1,1,1,1),ai.transparent=new ai(0,0,0,0),ai.red=new ai(1,0,0,1),ai.blue=new ai(0,0,1,1);var oi=function(){function e(t,i,n){y(this,e),this.sensitivity=t?i?"variant":"case":i?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return v(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),si=v((function e(t,i,n,r,a){y(this,e),this.text=t.normalize?t.normalize():t,this.image=i,this.scale=n,this.fontStack=r,this.textColor=a})),li=function(){function e(t){y(this,e),this.sections=t}return v(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}},{key:"serialize",value:function(){var e,t=["format"],i=p(this.sections);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n.image)t.push(["image",n.image.name]);else{t.push(n.text);var r={};n.fontStack&&(r["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(r["font-scale"]=n.scale),n.textColor&&(r["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(r)}}}catch(a){i.e(a)}finally{i.f()}return t}}],[{key:"fromString",value:function(t){return new e([new si(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),ui=function(){function e(t){y(this,e),this.name=t.name,this.available=t.available}return v(e,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function ci(e,t,i,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value [".concat([e,t,i,n].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof n?[e,t,i,n]:[e,t,i]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function hi(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof ai)return!0;if(e instanceof oi)return!0;if(e instanceof li)return!0;if(e instanceof ui)return!0;if(Array.isArray(e)){var t,i=p(e);try{for(i.s();!(t=i.n()).done;)if(!hi(t.value))return!1}catch(r){i.e(r)}finally{i.f()}return!0}if("object"==typeof e){for(var n in e)if(!hi(e[n]))return!1;return!0}return!1}function pi(e){if(null===e)return Nt;if("string"==typeof e)return Wt;if("boolean"==typeof e)return Gt;if("number"==typeof e)return Ut;if(e instanceof ai)return Ht;if(e instanceof oi)return qt;if(e instanceof li)return Zt;if(e instanceof ui)return Kt;if(Array.isArray(e)){var t,i,n=e.length,r=p(e);try{for(r.s();!(i=r.n()).done;){var a=pi(i.value);if(t){if(t===a)continue;t=Yt;break}t=a}}catch(o){r.e(o)}finally{r.f()}return $t(t||Yt,n)}return Xt}function di(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof ai||e instanceof li||e instanceof ui?e.toString():JSON.stringify(e)}var fi=function(){function e(t,i){y(this,e),this.type=t,this.value=i}return v(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ai?["rgba"].concat(this.value.toArray()):this.value instanceof li?this.value.serialize():this.value}}],[{key:"parse",value:function(t,i){if(2!==t.length)return i.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!hi(t[1]))return i.error("invalid value");var n=t[1],r=pi(n),a=i.expectedType;return"array"!==r.kind||0!==r.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(r=a),new e(r,n)}}]),e}(),mi=function(){function e(t){y(this,e),this.name="ExpressionEvaluationError",this.message=t}return v(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),yi={string:Wt,number:Ut,boolean:Gt,object:Xt},vi=function(){function e(t,i){y(this,e),this.type=t,this.args=i}return v(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!ei(this.type,pi(i)))return i;if(t===this.args.length-1)throw new mi("Expected value to be of type ".concat(Jt(this.type),", but found ").concat(Jt(pi(i))," instead."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var i=e.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){t.push(i.kind);var n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,i){if(t.length<2)return i.error("Expected at least one argument.");var n,r=1,a=t[0];if("array"===a){var o,s;if(t.length>2){var l=t[1];if("string"!=typeof l||!(l in yi)||"object"===l)return i.error('The item type argument of "array" must be one of string, number, boolean',1);o=yi[l],r++}else o=Yt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return i.error('The length argument to "array" must be a positive integer literal',2);s=t[2],r++}n=$t(o,s)}else n=yi[a];for(var u=[];r<t.length;r++){var c=i.parse(t[r],r,Yt);if(!c)return null;u.push(c)}return new e(n,u)}}]),e}(),gi=function(){function e(t){y(this,e),this.type=Zt,this.sections=t}return v(e,[{key:"evaluate",value:function(e){return new li(this.sections.map((function(t){var i=t.content.evaluate(e);return pi(i)===Kt?new si("",i,null,null,null):new si(di(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,i=p(this.sections);try{for(i.s();!(t=i.n()).done;){var n=t.value;e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}}catch(r){i.e(r)}finally{i.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],i=p(this.sections);try{for(i.s();!(e=i.n()).done;){var n=e.value;t.push(n.content.serialize());var r={};n.scale&&(r["font-scale"]=n.scale.serialize()),n.font&&(r["text-font"]=n.font.serialize()),n.textColor&&(r["text-color"]=n.textColor.serialize()),t.push(r)}}catch(a){i.e(a)}finally{i.f()}return t}}],[{key:"parse",value:function(t,i){if(t.length<2)return i.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return i.error("First argument must be an image or text section.");for(var r=[],a=!1,o=1;o<=t.length-1;++o){var s=t[o];if(a&&"object"==typeof s&&!Array.isArray(s)){a=!1;var l=null;if(s["font-scale"]&&!(l=i.parse(s["font-scale"],1,Ut)))return null;var u=null;if(s["text-font"]&&!(u=i.parse(s["text-font"],1,$t(Wt))))return null;var c=null;if(s["text-color"]&&!(c=i.parse(s["text-color"],1,Ht)))return null;var h=r[r.length-1];h.scale=l,h.font=u,h.textColor=c}else{var p=i.parse(t[o],1,Yt);if(!p)return null;var d=p.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,r.push({content:p,scale:null,font:null,textColor:null})}}return new e(r)}}]),e}(),_i=function(){function e(t){y(this,e),this.type=Kt,this.input=t}return v(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),i=ui.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(t,i){if(2!==t.length)return i.error("Expected two arguments.");var n=i.parse(t[1],1,Wt);return n?new e(n):i.error("No image name provided.")}}]),e}(),bi={"to-boolean":Gt,"to-color":Ht,"to-number":Ut,"to-string":Wt},xi=function(){function e(t,i){y(this,e),this.type=t,this.args=i}return v(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,i,n,r=p(this.args);try{for(r.s();!(n=r.n()).done;){if(t=n.value.evaluate(e),i=null,t instanceof ai)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):ci(t[0],t[1],t[2],t[3])))return new ai(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(c){r.e(c)}finally{r.f()}throw new mi(i||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var o,s=null,l=p(this.args);try{for(l.s();!(o=l.n()).done;){if(null===(s=o.value.evaluate(e)))return 0;var u=Number(s);if(!isNaN(u))return u}}catch(c){l.e(c)}finally{l.f()}throw new mi("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?li.fromString(di(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?ui.fromString(di(this.args[0].evaluate(e))):di(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new gi([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new _i(this.args[0]).serialize();var e=["to-".concat(this.type.kind)];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,i){if(t.length<2)return i.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return i.error("Expected one argument.");for(var r=bi[n],a=[],o=1;o<t.length;o++){var s=i.parse(t[o],o,Yt);if(!s)return null;a.push(s)}return new e(r,a)}}]),e}(),wi=["Unknown","Point","LineString","Polygon"],ki=function(){function e(){y(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}return v(e,[{key:"id",value:function(){return this.feature&&"id"in this.feature?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?wi[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,t=this.featureDistanceData.scale,i=this.featureTileCoord,n=i.x,r=i.y;return this.featureDistanceData.bearing[0]*(n*t-e[0])+this.featureDistanceData.bearing[1]*(r*t-e[1])}return 0}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ai.parse(e)),t}}]),e}(),Pi=function(){function e(t,i,n,r){y(this,e),this.name=t,this.type=i,this._evaluate=n,this.args=r}return v(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,i){var n,r=t[0],a=e.definitions[r];if(!a)return i.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,s=Array.isArray(a)?a[0]:a.type,l=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,u=l.filter((function(e){var i=h(e,1)[0];return!Array.isArray(i)||i.length===t.length-1})),d=null,f=p(u);try{for(f.s();!(o=f.n()).done;){var m=h(o.value,2),y=m[0],v=m[1];d=new Yi(i.registry,i.path,null,i.scope);for(var g=[],_=!1,b=1;b<t.length;b++){var x=t[b],w=Array.isArray(y)?y[b-1]:y.type,k=d.parse(x,1+g.length,w);if(!k){_=!0;break}g.push(k)}if(!_)if(Array.isArray(y)&&y.length!==g.length)d.error("Expected ".concat(y.length," arguments, but found ").concat(g.length," instead."));else{for(var P=0;P<g.length;P++){var S=Array.isArray(y)?y[P]:y.type,T=g[P];d.concat(P+1).checkSubtype(S,T.type)}if(0===d.errors.length)return new e(r,s,v,g)}}}catch(A){f.e(A)}finally{f.f()}if(1===u.length)(n=i.errors).push.apply(n,c(d.errors));else{for(var C=(u.length?u:l).map((function(e){var t;return t=h(e,1)[0],Array.isArray(t)?"(".concat(t.map(Jt).join(", "),")"):"(".concat(Jt(t.type),"...)")})).join(" | "),O=[],I=1;I<t.length;I++){var E=i.parse(t[I],1+O.length);if(!E)return null;O.push(Jt(E.type))}i.error("Expected arguments of type ".concat(C,", but found (").concat(O.join(", "),") instead."))}return null}},{key:"register",value:function(t,i){for(var n in e.definitions=i,i)t[n]=e}}]),e}(),Si=function(){function e(t,i,n){y(this,e),this.type=qt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=i}return v(e,[{key:"evaluate",value:function(e){return new oi(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,i){if(2!==t.length)return i.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return i.error("Collator options argument must be an object.");var r=i.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Gt);if(!r)return null;var a=i.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Gt);if(!a)return null;var o=null;return n.locale&&!(o=i.parse(n.locale,1,Wt))?null:new e(r,a,o)}}]),e}(),Ti=8192;function Ci(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Oi(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Ii(e,t){var i=(180+e[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,r=Math.pow(2,t.z);return[Math.round(i*r*Ti),Math.round(n*r*Ti)]}function Ei(e,t,i){var n=e[0]-t[0],r=e[1]-t[1],a=e[0]-i[0],o=e[1]-i[1];return n*o-a*r==0&&n*a<=0&&r*o<=0}function Ai(e,t){for(var i,n,r,a=!1,o=0,s=t.length;o<s;o++)for(var l=t[o],u=0,c=l.length;u<c-1;u++){if(Ei(e,l[u],l[u+1]))return!1;(n=l[u])[1]>(i=e)[1]!=(r=l[u+1])[1]>i[1]&&i[0]<(r[0]-n[0])*(i[1]-n[1])/(r[1]-n[1])+n[0]&&(a=!a)}return a}function Mi(e,t){for(var i=0;i<t.length;i++)if(Ai(e,t[i]))return!0;return!1}function Di(e,t,i,n){var r=n[0]-i[0],a=n[1]-i[1],o=(e[0]-i[0])*a-r*(e[1]-i[1]),s=(t[0]-i[0])*a-r*(t[1]-i[1]);return o>0&&s<0||o<0&&s>0}function ji(e,t,i){var n,r,a,o,s,l,u,c=p(i);try{for(c.s();!(n=c.n()).done;)for(var h=n.value,d=0;d<h.length-1;++d)if(0!=(l=[(s=h[d+1])[0]-(o=h[d])[0],s[1]-o[1]])[0]*(u=[(a=t)[0]-(r=e)[0],a[1]-r[1]])[1]-l[1]*u[0]&&Di(r,a,o,s)&&Di(o,s,r,a))return!0}catch(f){c.e(f)}finally{c.f()}return!1}function Fi(e,t){for(var i=0;i<e.length;++i)if(!Ai(e[i],t))return!1;for(var n=0;n<e.length-1;++n)if(ji(e[n],e[n+1],t))return!1;return!0}function Li(e,t){for(var i=0;i<t.length;i++)if(Fi(e,t[i]))return!0;return!1}function Ri(e,t,i){for(var n=[],r=0;r<e.length;r++){for(var a=[],o=0;o<e[r].length;o++){var s=Ii(e[r][o],i);Ci(t,s),a.push(s)}n.push(a)}return n}function zi(e,t,i){for(var n=[],r=0;r<e.length;r++){var a=Ri(e[r],t,i);n.push(a)}return n}function Vi(e,t,i,n){if(e[0]<i[0]||e[0]>i[2]){var r=.5*n,a=e[0]-i[0]>r?-n:i[0]-e[0]>r?n:0;0===a&&(a=e[0]-i[2]>r?-n:i[2]-e[0]>r?n:0),e[0]+=a}Ci(t,e)}function Bi(e,t,i,n){var r,a=Math.pow(2,n.z)*Ti,o=[n.x*Ti,n.y*Ti],s=[],l=p(e);try{for(l.s();!(r=l.n()).done;){var u,c=r.value,h=p(c);try{for(h.s();!(u=h.n()).done;){var d=u.value,f=[d.x+o[0],d.y+o[1]];Vi(f,t,i,a),s.push(f)}}catch(m){h.e(m)}finally{h.f()}}}catch(m){l.e(m)}finally{l.f()}return s}function Ni(e,t,i,n){var r,a,o=Math.pow(2,n.z)*Ti,s=[n.x*Ti,n.y*Ti],l=[],u=p(e);try{for(u.s();!(r=u.n()).done;){var c,h=r.value,d=[],f=p(h);try{for(f.s();!(c=f.n()).done;){var m=c.value,y=[m.x+s[0],m.y+s[1]];Ci(t,y),d.push(y)}}catch(w){f.e(w)}finally{f.f()}l.push(d)}}catch(w){u.e(w)}finally{u.f()}if(t[2]-t[0]<=o/2){(a=t)[0]=a[1]=1/0,a[2]=a[3]=-1/0;var v,g=p(l);try{for(g.s();!(v=g.n()).done;){var _,b=v.value,x=p(b);try{for(x.s();!(_=x.n()).done;)Vi(_.value,t,i,o)}catch(w){x.e(w)}finally{x.f()}}}catch(w){g.e(w)}finally{g.f()}}return l}var Ui=function(){function e(t,i){y(this,e),this.type=Gt,this.geojson=t,this.geometries=i}return v(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){var a=Ri(t.coordinates,n,r),o=Bi(e.geometry(),i,n,r);if(!Oi(i,n))return!1;var s,l=p(o);try{for(l.s();!(s=l.n()).done;)if(!Ai(s.value,a))return!1}catch(f){l.e(f)}finally{l.f()}}if("MultiPolygon"===t.type){var u=zi(t.coordinates,n,r),c=Bi(e.geometry(),i,n,r);if(!Oi(i,n))return!1;var h,d=p(c);try{for(d.s();!(h=d.n()).done;)if(!Mi(h.value,u))return!1}catch(f){d.e(f)}finally{d.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if("Polygon"===t.type){var a=Ri(t.coordinates,n,r),o=Ni(e.geometry(),i,n,r);if(!Oi(i,n))return!1;var s,l=p(o);try{for(l.s();!(s=l.n()).done;)if(!Fi(s.value,a))return!1}catch(f){l.e(f)}finally{l.f()}}if("MultiPolygon"===t.type){var u=zi(t.coordinates,n,r),c=Ni(e.geometry(),i,n,r);if(!Oi(i,n))return!1;var h,d=p(c);try{for(d.s();!(h=d.n()).done;)if(!Li(h.value,u))return!1}catch(f){d.e(f)}finally{d.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,i){if(2!==t.length)return i.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(hi(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var a=n.features[r].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(n,n.features[r].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new e(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new e(n,n)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}();function Wi(e){if(e instanceof Pi){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Ui)return!1;var t=!0;return e.eachChild((function(e){t&&!Wi(e)&&(t=!1)})),t}function Gi(e){if(e instanceof Pi&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Gi(e)&&(t=!1)})),t}function Hi(e,t){if(e instanceof Pi&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild((function(e){i&&!Hi(e,t)&&(i=!1)})),i}var Xi=function(){function e(t,i){y(this,e),this.type=i.type,this.name=t,this.boundExpression=i}return v(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,i){if(2!==t.length||"string"!=typeof t[1])return i.error("'var' expression requires exactly one string literal argument.");var n=t[1];return i.scope.has(n)?new e(n,i.scope.get(n)):i.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),Yi=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Bt,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];y(this,e),this.registry=t,this.path=i,this.key=i.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=r,this.errors=a,this.expectedType=n}return v(e,[{key:"parse",value:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,i,n)._parse(e,r):this._parse(e,r)}},{key:"_parse",value:function(e,t){function i(e,t,i){return"assert"===i?new vi(t,[e]):"coerce"===i?new xi(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=e[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found ".concat(typeof n,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var r=this.registry[n];if(r){var a=r.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=i(a,o,t.typeAnnotation||"coerce");else a=i(a,o,t.typeAnnotation||"assert")}if(!(a instanceof fi)&&"resolvedImage"!==a.type.kind&&qi(a)){var l=new ki;try{a=new fi(a.type,a.evaluate(l))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,i,n){var r="number"==typeof t?this.path.concat(t):this.path,a=n?this.scope.concat(n):this.scope;return new e(this.registry,r,i||null,a,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r="".concat(this.key).concat(i.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new Vt(r,e))}},{key:"checkSubtype",value:function(e,t){var i=ei(e,t);return i&&this.error(i),i}}]),e}();function qi(e){if(e instanceof Xi)return qi(e.boundExpression);if(e instanceof Pi&&"error"===e.name)return!1;if(e instanceof Si)return!1;if(e instanceof Ui)return!1;var t=e instanceof xi||e instanceof vi,i=!0;return e.eachChild((function(e){i=t?i&&qi(e):i&&e instanceof fi})),!!i&&Wi(e)&&Hi(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Zi(e,t){for(var i,n,r=e.length-1,a=0,o=r,s=0;a<=o;)if(i=e[s=Math.floor((a+o)/2)],n=e[s+1],i<=t){if(s===r||t<n)return s;a=s+1}else{if(!(i>t))throw new mi("Input is not a number.");o=s-1}return 0}var Ki=function(){function e(t,i,n){y(this,e),this.type=t,this.input=i,this.labels=[],this.outputs=[];var r,a=p(n);try{for(a.s();!(r=a.n()).done;){var o=h(r.value,2),s=o[0],l=o[1];this.labels.push(s),this.outputs.push(l)}}catch(u){a.e(u)}finally{a.f()}}return v(e,[{key:"evaluate",value:function(e){var t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return i[0].evaluate(e);var r=t.length;return n>=t[r-1]?i[r-1].evaluate(e):i[Zi(t,n)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,i=p(this.outputs);try{for(i.s();!(t=i.n()).done;)e(t.value)}catch(n){i.e(n)}finally{i.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,i){if(t.length-1<4)return i.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");var n=i.parse(t[1],1,Ut);if(!n)return null;var r=[],a=null;i.expectedType&&"value"!==i.expectedType.kind&&(a=i.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],l=t[o+1],u=o,c=o+1;if("number"!=typeof s)return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=s)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=i.parse(l,c,a);if(!h)return null;a=a||h.type,r.push([s,h])}return new e(a,n,r)}}]),e}();function $i(e,t,i){return e*(1-i)+t*i}var Ji=Object.freeze({__proto__:null,number:$i,color:function(e,t,i){return new ai($i(e.r,t.r,i),$i(e.g,t.g,i),$i(e.b,t.b,i),$i(e.a,t.a,i))},array:function(e,t,i){return e.map((function(e,n){return $i(e,t[n],i)}))}}),Qi=.95047,en=1.08883,tn=4/29,nn=6/29,rn=3*nn*nn,an=Math.PI/180,on=180/Math.PI;function sn(e){return e>.008856451679035631?Math.pow(e,1/3):e/rn+tn}function ln(e){return e>nn?e*e*e:rn*(e-tn)}function un(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function cn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hn(e){var t=cn(e.r),i=cn(e.g),n=cn(e.b),r=sn((.4124564*t+.3575761*i+.1804375*n)/Qi),a=sn((.2126729*t+.7151522*i+.072175*n)/1);return{l:116*a-16,a:500*(r-a),b:200*(a-sn((.0193339*t+.119192*i+.9503041*n)/en)),alpha:e.a}}function pn(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=1*ln(t),i=Qi*ln(i),n=en*ln(n),new ai(un(3.2404542*i-1.5371385*t-.4985314*n),un(-.969266*i+1.8760108*t+.041556*n),un(.0556434*i-.2040259*t+1.0572252*n),e.alpha)}function dn(e,t,i){var n=t-e;return e+i*(n>180||n<-180?n-360*Math.round(n/360):n)}var fn={forward:hn,reverse:pn,interpolate:function(e,t,i){return{l:$i(e.l,t.l,i),a:$i(e.a,t.a,i),b:$i(e.b,t.b,i),alpha:$i(e.alpha,t.alpha,i)}}},mn={forward:function(e){var t=hn(e),i=t.l,n=t.a,r=t.b,a=Math.atan2(r,n)*on;return{h:a<0?a+360:a,c:Math.sqrt(n*n+r*r),l:i,alpha:e.a}},reverse:function(e){var t=e.h*an,i=e.c;return pn({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:dn(e.h,t.h,i),c:$i(e.c,t.c,i),l:$i(e.l,t.l,i),alpha:$i(e.alpha,t.alpha,i)}}},yn=Object.freeze({__proto__:null,lab:fn,hcl:mn}),vn=function(){function e(t,i,n,r,a){y(this,e),this.type=t,this.operator=i,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];var o,s=p(a);try{for(s.s();!(o=s.n()).done;){var l=h(o.value,2),u=l[0],c=l[1];this.labels.push(u),this.outputs.push(c)}}catch(d){s.e(d)}finally{s.f()}}return v(e,[{key:"evaluate",value:function(t){var i=this.labels,n=this.outputs;if(1===i.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=i[0])return n[0].evaluate(t);var a=i.length;if(r>=i[a-1])return n[a-1].evaluate(t);var o=Zi(i,r),s=e.interpolationFactor(this.interpolation,r,i[o],i[o+1]),l=n[o].evaluate(t),u=n[o+1].evaluate(t);return"interpolate"===this.operator?Ji[this.type.kind.toLowerCase()](l,u,s):"interpolate-hcl"===this.operator?mn.reverse(mn.interpolate(mn.forward(l),mn.forward(u),s)):fn.reverse(fn.interpolate(fn.forward(l),fn.forward(u),s))}},{key:"eachChild",value:function(e){e(this.input);var t,i=p(this.outputs);try{for(i.s();!(t=i.n()).done;)e(t.value)}catch(n){i.e(n)}finally{i.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,n,r){var a=0;if("exponential"===e.name)a=gn(t,e.base,n,r);else if("linear"===e.name)a=gn(t,1,n,r);else if("cubic-bezier"===e.name){var o=e.controlPoints;a=new i(o[0],o[1],o[2],o[3]).solve(gn(t,1,n,r))}return a}},{key:"parse",value:function(t,i){var n=u(t),r=n[0],a=n[1],o=n[2],s=n.slice(3);if(!Array.isArray(a)||0===a.length)return i.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return i.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return i.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(e){return"number"!=typeof e||e<0||e>1})))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(t.length-1<4)return i.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(o=i.parse(o,2,Ut)))return null;var h=[],p=null;"interpolate-hcl"===r||"interpolate-lab"===r?p=Ht:i.expectedType&&"value"!==i.expectedType.kind&&(p=i.expectedType);for(var d=0;d<s.length;d+=2){var f=s[d],m=s[d+1],y=d+3,v=d+4;if("number"!=typeof f)return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(h.length&&h[h.length-1][0]>=f)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',y);var g=i.parse(m,v,p);if(!g)return null;p=p||g.type,h.push([f,g])}return"number"===p.kind||"color"===p.kind||"array"===p.kind&&"number"===p.itemType.kind&&"number"==typeof p.N?new e(p,r,a,o,h):i.error("Type ".concat(Jt(p)," is not interpolatable."))}}]),e}();function gn(e,t,i,n){var r=n-i,a=e-i;return 0===r?0:1===t?a/r:(Math.pow(t,a)-1)/(Math.pow(t,r)-1)}var _n=function(){function e(t,i){y(this,e),this.type=t,this.args=i}return v(e,[{key:"evaluate",value:function(e){var t,i,n=null,r=0,a=p(this.args);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(r++,(n=o.evaluate(e))&&n instanceof ui&&!n.available&&(t||(t=n),n=null,r===this.args.length))return t;if(null!==n)break}}catch(s){a.e(s)}finally{a.f()}return n}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,i){if(t.length<2)return i.error("Expectected at least one argument.");var n=null,r=i.expectedType;r&&"value"!==r.kind&&(n=r);var a,o=[],s=p(t.slice(1));try{for(s.s();!(a=s.n()).done;){var l=a.value,u=i.parse(l,1+o.length,n,void 0,{typeAnnotation:"omit"});if(!u)return null;n=n||u.type,o.push(u)}}catch(h){s.e(h)}finally{s.f()}var c=r&&o.some((function(e){return ei(r,e.type)}));return new e(c?Yt:n,o)}}]),e}(),bn=function(){function e(t,i){y(this,e),this.type=i.type,this.bindings=[].concat(t),this.result=i}return v(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,i=p(this.bindings);try{for(i.s();!(t=i.n()).done;)e(t.value[1])}catch(n){i.e(n)}finally{i.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],i=p(this.bindings);try{for(i.s();!(e=i.n()).done;){var n=h(e.value,2),r=n[0],a=n[1];t.push(r,a.serialize())}}catch(o){i.e(o)}finally{i.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,i){if(t.length<4)return i.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var n=[],r=1;r<t.length-1;r+=2){var a=t[r];if("string"!=typeof a)return i.error("Expected string, but found ".concat(typeof a," instead."),r);if(/[^a-zA-Z0-9_]/.test(a))return i.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=i.parse(t[r+1],r+1);if(!o)return null;n.push([a,o])}var s=i.parse(t[t.length-1],t.length-1,i.expectedType,n);return s?new e(n,s):null}}]),e}(),xn=function(){function e(t,i,n){y(this,e),this.type=t,this.index=i,this.input=n}return v(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new mi("Array index out of bounds: ".concat(t," < 0."));if(t>=i.length)throw new mi("Array index out of bounds: ".concat(t," > ").concat(i.length-1,"."));if(t!==Math.floor(t))throw new mi("Array index must be an integer, but found ".concat(t," instead."));return i[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,i){if(3!==t.length)return i.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var n=i.parse(t[1],1,Ut),r=i.parse(t[2],2,$t(i.expectedType||Yt));return n&&r?new e(r.type.itemType,n,r):null}}]),e}(),wn=function(){function e(t,i){y(this,e),this.type=Gt,this.needle=t,this.haystack=i}return v(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!ii(t,["boolean","string","number","null"]))throw new mi("Expected first argument to be of type boolean, string, number or null, but found ".concat(Jt(pi(t))," instead."));if(!ii(i,["string","array"]))throw new mi("Expected second argument to be of type array or string, but found ".concat(Jt(pi(i))," instead."));return i.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,i){if(3!==t.length)return i.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var n=i.parse(t[1],1,Yt),r=i.parse(t[2],2,Yt);return n&&r?ti(n.type,[Gt,Wt,Ut,Nt,Yt])?new e(n,r):i.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Jt(n.type)," instead")):null}}]),e}(),kn=function(){function e(t,i,n){y(this,e),this.type=Ut,this.needle=t,this.haystack=i,this.fromIndex=n}return v(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!ii(t,["boolean","string","number","null"]))throw new mi("Expected first argument to be of type boolean, string, number or null, but found ".concat(Jt(pi(t))," instead."));if(!ii(i,["string","array"]))throw new mi("Expected second argument to be of type array or string, but found ".concat(Jt(pi(i))," instead."));if(this.fromIndex){var n=this.fromIndex.evaluate(e);return i.indexOf(t,n)}return i.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,i){if(t.length<=2||t.length>=5)return i.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var n=i.parse(t[1],1,Yt),r=i.parse(t[2],2,Yt);if(!n||!r)return null;if(!ti(n.type,[Gt,Wt,Ut,Nt,Yt]))return i.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Jt(n.type)," instead"));if(4===t.length){var a=i.parse(t[3],3,Ut);return a?new e(n,r,a):null}return new e(n,r)}}]),e}(),Pn=function(){function e(t,i,n,r,a,o){y(this,e),this.inputType=t,this.type=i,this.input=n,this.cases=r,this.outputs=a,this.otherwise=o}return v(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(pi(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,i=["match",this.input.serialize()],n=Object.keys(this.cases).sort(),r=[],a={},o=p(n);try{for(o.s();!(e=o.n()).done;){var s=e.value,l=a[this.cases[s]];void 0===l?(a[this.cases[s]]=r.length,r.push([this.cases[s],[s]])):r[l][1].push(s)}}catch(v){o.e(v)}finally{o.f()}for(var u=function(e){return"number"===t.inputType.kind?Number(e):e},c=0,d=r;c<d.length;c++){var f=h(d[c],2),m=f[0],y=f[1];i.push(1===y.length?u(y[0]):y.map(u)),i.push(this.outputs[m].serialize())}return i.push(this.otherwise.serialize()),i}}],[{key:"parse",value:function(t,i){if(t.length<5)return i.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return i.error("Expected an even number of arguments.");var n,r;i.expectedType&&"value"!==i.expectedType.kind&&(r=i.expectedType);for(var a={},o=[],s=2;s<t.length-1;s+=2){var l=t[s],u=t[s+1];Array.isArray(l)||(l=[l]);var c=i.concat(s);if(0===l.length)return c.error("Expected at least one branch label.");var h,d=p(l);try{for(d.s();!(h=d.n()).done;){var f=h.value;if("number"!=typeof f&&"string"!=typeof f)return c.error("Branch labels must be numbers or strings.");if("number"==typeof f&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof f&&Math.floor(f)!==f)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,pi(f)))return null}else n=pi(f);if(void 0!==a[String(f)])return c.error("Branch labels must be unique.");a[String(f)]=o.length}}catch(g){d.e(g)}finally{d.f()}var m=i.parse(u,s,r);if(!m)return null;r=r||m.type,o.push(m)}var y=i.parse(t[1],1,Yt);if(!y)return null;var v=i.parse(t[t.length-1],t.length-1,r);return v?"value"!==y.type.kind&&i.concat(1).checkSubtype(n,y.type)?null:new e(n,r,y,a,o,v):null}}]),e}(),Sn=function(){function e(t,i,n){y(this,e),this.type=t,this.branches=i,this.otherwise=n}return v(e,[{key:"evaluate",value:function(e){var t,i=p(this.branches);try{for(i.s();!(t=i.n()).done;){var n=h(t.value,2),r=n[0],a=n[1];if(r.evaluate(e))return a.evaluate(e)}}catch(o){i.e(o)}finally{i.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,i=p(this.branches);try{for(i.s();!(t=i.n()).done;){var n=h(t.value,2),r=n[0],a=n[1];e(r),e(a)}}catch(o){i.e(o)}finally{i.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=h(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,i){if(t.length<4)return i.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return i.error("Expected an odd number of arguments.");var n;i.expectedType&&"value"!==i.expectedType.kind&&(n=i.expectedType);for(var r=[],a=1;a<t.length-1;a+=2){var o=i.parse(t[a],a,Gt);if(!o)return null;var s=i.parse(t[a+1],a+1,n);if(!s)return null;r.push([o,s]),n=n||s.type}var l=i.parse(t[t.length-1],t.length-1,n);return l?new e(n,r,l):null}}]),e}(),Tn=function(){function e(t,i,n,r){y(this,e),this.type=t,this.input=i,this.beginIndex=n,this.endIndex=r}return v(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!ii(t,["string","array"]))throw new mi("Expected first argument to be of type array or string, but found ".concat(Jt(pi(t))," instead."));if(this.endIndex){var n=this.endIndex.evaluate(e);return t.slice(i,n)}return t.slice(i)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,i){if(t.length<=2||t.length>=5)return i.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var n=i.parse(t[1],1,Yt),r=i.parse(t[2],2,Ut);if(!n||!r)return null;if(!ti(n.type,[$t(Yt),Wt,Yt]))return i.error("Expected first argument to be of type array or string, but found ".concat(Jt(n.type)," instead"));if(4===t.length){var a=i.parse(t[3],3,Ut);return a?new e(n.type,n,r,a):null}return new e(n.type,n,r)}}]),e}();function Cn(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function On(e,t,i,n){return 0===n.compare(t,i)}function In(e,t,i){var n="=="!==e&&"!="!==e;return function(){function r(e,t,i){y(this,r),this.type=Gt,this.lhs=e,this.rhs=t,this.collator=i,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return v(r,[{key:"evaluate",value:function(r){var a=this.lhs.evaluate(r),o=this.rhs.evaluate(r);if(n&&this.hasUntypedArgument){var s=pi(a),l=pi(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new mi('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(l.kind,") instead."))}if(this.collator&&!n&&this.hasUntypedArgument){var u=pi(a),c=pi(o);if("string"!==u.kind||"string"!==c.kind)return t(r,a,o)}return this.collator?i(r,a,o,this.collator.evaluate(r)):t(r,a,o)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var i=e[0],a=t.parse(e[1],1,Yt);if(!a)return null;if(!Cn(i,a.type))return t.concat(1).error('"'.concat(i,"\" comparisons are not supported for type '").concat(Jt(a.type),"'."));var o=t.parse(e[2],2,Yt);if(!o)return null;if(!Cn(i,o.type))return t.concat(2).error('"'.concat(i,"\" comparisons are not supported for type '").concat(Jt(o.type),"'."));if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '".concat(Jt(a.type),"' and '").concat(Jt(o.type),"'."));n&&("value"===a.type.kind&&"value"!==o.type.kind?a=new vi(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new vi(a.type,[o])));var s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,qt)))return null}return new r(a,o,s)}}]),r}()}var En=In("==",(function(e,t,i){return t===i}),On),An=In("!=",(function(e,t,i){return t!==i}),(function(e,t,i,n){return!On(0,t,i,n)})),Mn=In("<",(function(e,t,i){return t<i}),(function(e,t,i,n){return n.compare(t,i)<0})),Dn=In(">",(function(e,t,i){return t>i}),(function(e,t,i,n){return n.compare(t,i)>0})),jn=In("<=",(function(e,t,i){return t<=i}),(function(e,t,i,n){return n.compare(t,i)<=0})),Fn=In(">=",(function(e,t,i){return t>=i}),(function(e,t,i,n){return n.compare(t,i)>=0})),Ln=function(){function e(t,i,n,r,a){y(this,e),this.type=Wt,this.number=t,this.locale=i,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=a}return v(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,i){if(3!==t.length)return i.error("Expected two arguments.");var n=i.parse(t[1],1,Ut);if(!n)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return i.error("NumberFormat options argument must be an object.");var a=null;if(r.locale&&!(a=i.parse(r.locale,1,Wt)))return null;var o=null;if(r.currency&&!(o=i.parse(r.currency,1,Wt)))return null;var s=null;if(r["min-fraction-digits"]&&!(s=i.parse(r["min-fraction-digits"],1,Ut)))return null;var l=null;return r["max-fraction-digits"]&&!(l=i.parse(r["max-fraction-digits"],1,Ut))?null:new e(n,a,o,s,l)}}]),e}(),Rn=function(){function e(t){y(this,e),this.type=Ut,this.input=t}return v(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new mi("Expected value to be of type string or array, but found ".concat(Jt(pi(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,i){if(2!==t.length)return i.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var n=i.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?i.error("Expected argument of type string or array, but found ".concat(Jt(n.type)," instead.")):new e(n):null}}]),e}(),zn={"==":En,"!=":An,">":Dn,"<":Mn,">=":Fn,"<=":jn,array:vi,at:xn,boolean:vi,case:Sn,coalesce:_n,collator:Si,format:gi,image:_i,in:wn,"index-of":kn,interpolate:vn,"interpolate-hcl":vn,"interpolate-lab":vn,length:Rn,let:bn,literal:fi,match:Pn,number:vi,"number-format":Ln,object:vi,slice:Tn,step:Ki,string:vi,"to-boolean":xi,"to-color":xi,"to-number":xi,"to-string":xi,var:Xi,within:Ui};function Vn(e,t){var i=h(t,4),n=i[0],r=i[1],a=i[2],o=i[3];n=n.evaluate(e),r=r.evaluate(e),a=a.evaluate(e);var s=o?o.evaluate(e):1,l=ci(n,r,a,s);if(l)throw new mi(l);return new ai(n/255*s,r/255*s,a/255*s,s)}function Bn(e,t){return e in t}function Nn(e,t){var i=t[e];return void 0===i?null:i}function Un(e){return{type:e}}function Wn(e){return{result:"success",value:e}}function Gn(e){return{result:"error",value:e}}function Hn(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Xn(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Yn(e){return!!e.expression&&e.expression.interpolated}function qn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Zn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Kn(e){return e}function $n(e,t){var i,n,r,a="color"===t.type,o=e.stops&&"object"==typeof e.stops[0][0],s=o||!(o||void 0!==e.property),l=e.type||(Yn(t)?"exponential":"interval");if(a&&((e=Lt({},e)).stops&&(e.stops=e.stops.map((function(e){return[e[0],ai.parse(e[1])]}))),e.default=ai.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!yn[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));if("exponential"===l)i=tr;else if("interval"===l)i=er;else if("categorical"===l){i=Qn,n=Object.create(null);var u,c=p(e.stops);try{for(c.s();!(u=c.n()).done;){var h=u.value;n[h[0]]=h[1]}}catch(P){c.e(P)}finally{c.f()}r=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'.concat(l,'"'));i=ir}if(o){for(var d={},f=[],m=0;m<e.stops.length;m++){var y=e.stops[m],v=y[0].zoom;void 0===d[v]&&(d[v]={zoom:v,type:e.type,property:e.property,default:e.default,stops:[]},f.push(v)),d[v].stops.push([y[0].value,y[1]])}for(var g=[],_=0,b=f;_<b.length;_++){var x=b[_];g.push([d[x].zoom,$n(d[x],t)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:vn.interpolationFactor.bind(void 0,w),zoomStops:g.map((function(e){return e[0]})),evaluate:function(i,n){var r=i.zoom;return tr({stops:g,base:e.base},t,r).evaluate(r,n)}}}if(s){var k="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:vn.interpolationFactor.bind(void 0,k),zoomStops:e.stops.map((function(e){return e[0]})),evaluate:function(a){var o=a.zoom;return i(e,t,o,n,r)}}}return{kind:"source",evaluate:function(a,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?Jn(e.default,t.default):i(e,t,s,n,r)}}}function Jn(e,t,i){return void 0!==e?e:void 0!==t?t:void 0!==i?i:void 0}function Qn(e,t,i,n,r){return Jn(typeof i===r?n[i]:void 0,e.default,t.default)}function er(e,t,i){if("number"!==qn(i))return Jn(e.default,t.default);var n=e.stops.length;if(1===n)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[n-1][0])return e.stops[n-1][1];var r=Zi(e.stops.map((function(e){return e[0]})),i);return e.stops[r][1]}function tr(e,t,i){var n=void 0!==e.base?e.base:1;if("number"!==qn(i))return Jn(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[r-1][0])return e.stops[r-1][1];var a=Zi(e.stops.map((function(e){return e[0]})),i),o=function(e,t,i,n){var r=n-i,a=e-i;return 0===r?0:1===t?a/r:(Math.pow(t,a)-1)/(Math.pow(t,r)-1)}(i,n,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],l=e.stops[a+1][1],u=Ji[t.type]||Kn;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=yn[e.colorSpace];u=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=s.evaluate.apply(void 0,t),r=l.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return u(n,r,o)}}:u(s,l,o)}function ir(e,t,i){return"color"===t.type?i=ai.parse(i):"formatted"===t.type?i=li.fromString(i.toString()):"resolvedImage"===t.type?i=ui.fromString(i.toString()):qn(i)===t.type||"enum"===t.type&&t.values[i]||(i=void 0),Jn(i,e.default,t.default)}Pi.register(zn,{error:[{kind:"error"},[Wt],function(e,t){var i=h(t,1)[0];throw new mi(i.evaluate(e))}],typeof:[Wt,[Yt],function(e,t){return Jt(pi(h(t,1)[0].evaluate(e)))}],"to-rgba":[$t(Ut,4),[Ht],function(e,t){return h(t,1)[0].evaluate(e).toArray()}],rgb:[Ht,[Ut,Ut,Ut],Vn],rgba:[Ht,[Ut,Ut,Ut,Ut],Vn],has:{type:Gt,overloads:[[[Wt],function(e,t){return Bn(h(t,1)[0].evaluate(e),e.properties())}],[[Wt,Xt],function(e,t){var i=h(t,2),n=i[0],r=i[1];return Bn(n.evaluate(e),r.evaluate(e))}]]},get:{type:Yt,overloads:[[[Wt],function(e,t){return Nn(h(t,1)[0].evaluate(e),e.properties())}],[[Wt,Xt],function(e,t){var i=h(t,2),n=i[0],r=i[1];return Nn(n.evaluate(e),r.evaluate(e))}]]},"feature-state":[Yt,[Wt],function(e,t){return Nn(h(t,1)[0].evaluate(e),e.featureState||{})}],properties:[Xt,[],function(e){return e.properties()}],"geometry-type":[Wt,[],function(e){return e.geometryType()}],id:[Yt,[],function(e){return e.id()}],zoom:[Ut,[],function(e){return e.globals.zoom}],pitch:[Ut,[],function(e){return e.globals.pitch||0}],"distance-from-center":[Ut,[],function(e){return e.distanceFromCenter()}],"heatmap-density":[Ut,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Ut,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[Ut,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[Yt,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Ut,Un(Ut),function(e,t){var i,n=0,r=p(t);try{for(r.s();!(i=r.n()).done;)n+=i.value.evaluate(e)}catch(a){r.e(a)}finally{r.f()}return n}],"*":[Ut,Un(Ut),function(e,t){var i,n=1,r=p(t);try{for(r.s();!(i=r.n()).done;)n*=i.value.evaluate(e)}catch(a){r.e(a)}finally{r.f()}return n}],"-":{type:Ut,overloads:[[[Ut,Ut],function(e,t){var i=h(t,2),n=i[0],r=i[1];return n.evaluate(e)-r.evaluate(e)}],[[Ut],function(e,t){return-h(t,1)[0].evaluate(e)}]]},"/":[Ut,[Ut,Ut],function(e,t){var i=h(t,2),n=i[0],r=i[1];return n.evaluate(e)/r.evaluate(e)}],"%":[Ut,[Ut,Ut],function(e,t){var i=h(t,2),n=i[0],r=i[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[Ut,[],function(){return Math.LN2}],pi:[Ut,[],function(){return Math.PI}],e:[Ut,[],function(){return Math.E}],"^":[Ut,[Ut,Ut],function(e,t){var i=h(t,2),n=i[0],r=i[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.sqrt(i.evaluate(e))}],log10:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.log(i.evaluate(e))/Math.LN10}],ln:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.log(i.evaluate(e))}],log2:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.log(i.evaluate(e))/Math.LN2}],sin:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.sin(i.evaluate(e))}],cos:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.cos(i.evaluate(e))}],tan:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.tan(i.evaluate(e))}],asin:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.asin(i.evaluate(e))}],acos:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.acos(i.evaluate(e))}],atan:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.atan(i.evaluate(e))}],min:[Ut,Un(Ut),function(e,t){return Math.min.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],max:[Ut,Un(Ut),function(e,t){return Math.max.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],abs:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.abs(i.evaluate(e))}],round:[Ut,[Ut],function(e,t){var i=h(t,1)[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.floor(i.evaluate(e))}],ceil:[Ut,[Ut],function(e,t){var i=h(t,1)[0];return Math.ceil(i.evaluate(e))}],"filter-==":[Gt,[Wt,Yt],function(e,t){var i=h(t,2),n=i[0],r=i[1];return e.properties()[n.value]===r.value}],"filter-id-==":[Gt,[Yt],function(e,t){var i=h(t,1)[0];return e.id()===i.value}],"filter-type-==":[Gt,[Wt],function(e,t){var i=h(t,1)[0];return e.geometryType()===i.value}],"filter-<":[Gt,[Wt,Yt],function(e,t){var i=h(t,2),n=i[0],r=i[1],a=e.properties()[n.value],o=r.value;return typeof a==typeof o&&a<o}],"filter-id-<":[Gt,[Yt],function(e,t){var i=h(t,1)[0],n=e.id(),r=i.value;return typeof n==typeof r&&n<r}],"filter->":[Gt,[Wt,Yt],function(e,t){var i=h(t,2),n=i[0],r=i[1],a=e.properties()[n.value],o=r.value;return typeof a==typeof o&&a>o}],"filter-id->":[Gt,[Yt],function(e,t){var i=h(t,1)[0],n=e.id(),r=i.value;return typeof n==typeof r&&n>r}],"filter-<=":[Gt,[Wt,Yt],function(e,t){var i=h(t,2),n=i[0],r=i[1],a=e.properties()[n.value],o=r.value;return typeof a==typeof o&&a<=o}],"filter-id-<=":[Gt,[Yt],function(e,t){var i=h(t,1)[0],n=e.id(),r=i.value;return typeof n==typeof r&&n<=r}],"filter->=":[Gt,[Wt,Yt],function(e,t){var i=h(t,2),n=i[0],r=i[1],a=e.properties()[n.value],o=r.value;return typeof a==typeof o&&a>=o}],"filter-id->=":[Gt,[Yt],function(e,t){var i=h(t,1)[0],n=e.id(),r=i.value;return typeof n==typeof r&&n>=r}],"filter-has":[Gt,[Yt],function(e,t){return h(t,1)[0].value in e.properties()}],"filter-has-id":[Gt,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Gt,[$t(Wt)],function(e,t){return h(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Gt,[$t(Yt)],function(e,t){return h(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[Gt,[Wt,$t(Yt)],function(e,t){var i=h(t,2),n=i[0];return i[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[Gt,[Wt,$t(Yt)],function(e,t){var i=h(t,2),n=i[0],r=i[1];return function(e,t,i,n){for(;i<=n;){var r=i+n>>1;if(t[r]===e)return!0;t[r]>e?n=r-1:i=r+1}return!1}(e.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:Gt,overloads:[[[Gt,Gt],function(e,t){var i=h(t,2),n=i[0],r=i[1];return n.evaluate(e)&&r.evaluate(e)}],[Un(Gt),function(e,t){var i,n=p(t);try{for(n.s();!(i=n.n()).done;)if(!i.value.evaluate(e))return!1}catch(r){n.e(r)}finally{n.f()}return!0}]]},any:{type:Gt,overloads:[[[Gt,Gt],function(e,t){var i=h(t,2),n=i[0],r=i[1];return n.evaluate(e)||r.evaluate(e)}],[Un(Gt),function(e,t){var i,n=p(t);try{for(n.s();!(i=n.n()).done;)if(i.value.evaluate(e))return!0}catch(r){n.e(r)}finally{n.f()}return!1}]]},"!":[Gt,[Gt],function(e,t){return!h(t,1)[0].evaluate(e)}],"is-supported-script":[Gt,[Wt],function(e,t){var i=h(t,1)[0],n=e.globals&&e.globals.isSupportedScript;return!n||n(i.evaluate(e))}],upcase:[Wt,[Wt],function(e,t){return h(t,1)[0].evaluate(e).toUpperCase()}],downcase:[Wt,[Wt],function(e,t){return h(t,1)[0].evaluate(e).toLowerCase()}],concat:[Wt,Un(Yt),function(e,t){return t.map((function(t){return di(t.evaluate(e))})).join("")}],"resolved-locale":[Wt,[qt],function(e,t){return h(t,1)[0].evaluate(e).resolvedLocale()}]});var nr=function(){function e(t,i){y(this,e),this.expression=t,this._warningHistory={},this._evaluator=new ki,this._defaultValue=i?function(e){return"color"===e.type&&Zn(e.default)?new ai(0,0,0,0):"color"===e.type?ai.parse(e.default)||null:void 0===e.default?null:e.default}(i):null,this._enumValues=i&&"enum"===i.type?i.values:null}return v(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,i,n,r,a,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,i,n,r,a,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new mi("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(l)," instead."));return l}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function rr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in zn}function ar(e,t){var i=new Yi(zn,[],t?function(e){var t={color:Ht,string:Wt,number:Ut,enum:Wt,boolean:Gt,formatted:Zt,resolvedImage:Kt};return"array"===e.type?$t(t[e.value]||Yt,e.length):t[e.type]}(t):void 0),n=i.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?Wn(new nr(n,t)):Gn(i.errors)}var or=function(){function e(t,i){y(this,e),this.kind=t,this._styleExpression=i,this.isStateDependent="constant"!==t&&!Gi(i.expression)}return v(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,i,n,r,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,n,r,a)}},{key:"evaluate",value:function(e,t,i,n,r,a){return this._styleExpression.evaluate(e,t,i,n,r,a)}}]),e}(),sr=function(){function e(t,i,n,r){y(this,e),this.kind=t,this.zoomStops=n,this._styleExpression=i,this.isStateDependent="camera"!==t&&!Gi(i.expression),this.interpolationType=r}return v(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,i,n,r,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,n,r,a)}},{key:"evaluate",value:function(e,t,i,n,r,a){return this._styleExpression.evaluate(e,t,i,n,r,a)}},{key:"interpolationFactor",value:function(e,t,i){return this.interpolationType?vn.interpolationFactor(this.interpolationType,e,t,i):0}}]),e}();function lr(e,t){if("error"===(e=ar(e,t)).result)return e;var i=e.value.expression,n=Wi(i);if(!n&&!Hn(t))return Gn([new Vt("","data expressions not supported")]);var r=Hi(i,["zoom","pitch","distance-from-center"]);if(!r&&!Xn(t))return Gn([new Vt("","zoom expressions not supported")]);var a=cr(i);return a||r?a instanceof Vt?Gn([a]):a instanceof vn&&!Yn(t)?Gn([new Vt("",'"interpolate" expressions cannot be used with this property')]):Wn(a?new sr(n?"camera":"composite",e.value,a.labels,a instanceof vn?a.interpolation:void 0):new or(n?"constant":"source",e.value)):Gn([new Vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var ur=function(){function e(t,i){y(this,e),this._parameters=t,this._specification=i,Lt(this,$n(this._parameters,this._specification))}return v(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function cr(e){var t=null;if(e instanceof bn)t=cr(e.result);else if(e instanceof _n){var i,n=p(e.args);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(t=cr(r))break}}catch(a){n.e(a)}finally{n.f()}}else(e instanceof Ki||e instanceof vn)&&e.input instanceof Pi&&"zoom"===e.input.name&&(t=e);return t instanceof Vt||e.eachChild((function(e){var i=cr(e);i instanceof Vt?t=i:!t&&i?t=new Vt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&i&&t!==i&&(t=new Vt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function hr(e){var t=e.key,i=e.value,n=e.valueSpec||{},r=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],l=qn(i);if("object"!==l)return[new jt(t,i,"object expected, ".concat(l," found"))];for(var u in i){var c=u.split(".")[0],h=n[c]||n["*"],p=void 0;if(r[c])p=r[c];else if(n[c])p=Gr;else if(r["*"])p=r["*"];else{if(!n["*"]){s.push(new jt(t,i[u],'unknown property "'.concat(u,'"')));continue}p=Gr}s=s.concat(p({key:(t?"".concat(t,"."):t)+u,value:i[u],valueSpec:h,style:a,styleSpec:o,object:i,objectKey:u},i))}for(var d in n)r[d]||n[d].required&&void 0===n[d].default&&void 0===i[d]&&s.push(new jt(t,i,'missing required property "'.concat(d,'"')));return s}function pr(e){var t=e.value,i=e.valueSpec,n=e.style,r=e.styleSpec,a=e.key,o=e.arrayElementValidator||Gr;if("array"!==qn(t))return[new jt(a,t,"array expected, ".concat(qn(t)," found"))];if(i.length&&t.length!==i.length)return[new jt(a,t,"array length ".concat(i.length," expected, length ").concat(t.length," found"))];if(i["min-length"]&&t.length<i["min-length"])return[new jt(a,t,"array length at least ".concat(i["min-length"]," expected, length ").concat(t.length," found"))];var s={type:i.value,values:i.values,minimum:i.minimum,maximum:i.maximum};r.$version<7&&(s.function=i.function),"object"===qn(i.value)&&(s=i.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(o({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:n,styleSpec:r,key:"".concat(a,"[").concat(u,"]")}));return l}function dr(e){var t=e.key,i=e.value,n=e.valueSpec,r=qn(i);if("number"===r&&i!=i&&(r="NaN"),"number"!==r)return[new jt(t,i,"number expected, ".concat(r," found"))];if("minimum"in n){var a=n.minimum;if("array"===qn(n.minimum)&&(a=n.minimum[e.arrayIndex]),i<a)return[new jt(t,i,"".concat(i," is less than the minimum value ").concat(a))]}if("maximum"in n){var o=n.maximum;if("array"===qn(n.maximum)&&(o=n.maximum[e.arrayIndex]),i>o)return[new jt(t,i,"".concat(i," is greater than the maximum value ").concat(o))]}return[]}function fr(e){var t,i,n,r=e.valueSpec,a=Rt(e.value.type),o={},s="categorical"!==a&&void 0===e.value.property,l=!s,u="array"===qn(e.value.stops)&&"array"===qn(e.value.stops[0])&&"object"===qn(e.value.stops[0][0]),c=hr({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new jt(e.key,e.value,'identity function may not have a "stops" property')];var t=[],i=e.value;return t=t.concat(pr({key:e.key,value:i,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===qn(i)&&0===i.length&&t.push(new jt(e.key,i,"array must have at least one stop")),t},default:function(e){return Gr({key:e.key,value:e.value,valueSpec:r,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&s&&c.push(new jt(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||c.push(new jt(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!Yn(e.valueSpec)&&c.push(new jt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Hn(e.valueSpec)?c.push(new jt(e.key,e.value,"property functions not supported")):s&&!Xn(e.valueSpec)&&c.push(new jt(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!u||void 0!==e.value.property||c.push(new jt(e.key,e.value,'"property" property is required')),c;function h(e){var t=[],a=e.value,s=e.key;if("array"!==qn(a))return[new jt(s,a,"array expected, ".concat(qn(a)," found"))];if(2!==a.length)return[new jt(s,a,"array length 2 expected, length ".concat(a.length," found"))];if(u){if("object"!==qn(a[0]))return[new jt(s,a,"object expected, ".concat(qn(a[0])," found"))];if(void 0===a[0].zoom)return[new jt(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new jt(s,a,"object stop key must have value")];if(n&&n>Rt(a[0].zoom))return[new jt(s,a[0].zoom,"stop zoom values must appear in ascending order")];Rt(a[0].zoom)!==n&&(n=Rt(a[0].zoom),i=void 0,o={}),t=t.concat(hr({key:"".concat(s,"[0]"),value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:dr,value:p}}))}else t=t.concat(p({key:"".concat(s,"[0]"),value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return rr(zt(a[1]))?t.concat([new jt("".concat(s,"[1]"),a[1],"expressions are not allowed in function stops.")]):t.concat(Gr({key:"".concat(s,"[1]"),value:a[1],valueSpec:r,style:e.style,styleSpec:e.styleSpec}))}function p(e,n){var s=qn(e.value),l=Rt(e.value),u=null!==e.value?e.value:n;if(t){if(s!==t)return[new jt(e.key,u,"".concat(s," stop domain type must match previous stop domain type ").concat(t))]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new jt(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var c="number expected, ".concat(s," found");return Hn(r)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new jt(e.key,u,c)]}return"categorical"!==a||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==a&&"number"===s&&void 0!==i&&l<i?[new jt(e.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===a&&l in o?[new jt(e.key,u,"stop domain values must be unique")]:(o[l]=!0,[])):[new jt(e.key,u,"integer expected, found ".concat(l))]}}function mr(e){var t=("property"===e.expressionContext?lr:ar)(zt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new jt("".concat(e.key).concat(t.key),e.value,t.message)}));var i=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!i.outputDefined())return[new jt(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Gi(i))return[new jt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return yr(i,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Hi(i,["zoom","feature-state"]))return[new jt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Wi(i))return[new jt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function yr(e,t){var i,n=new Set(["zoom","feature-state","pitch","distance-from-center"]),r=p(t.valueSpec.expression.parameters);try{for(r.s();!(i=r.n()).done;){var a=i.value;n.delete(a)}}catch(s){r.e(s)}finally{r.f()}if(0===n.size)return[];var o=[];return e instanceof Pi&&n.has(e.name)?[new jt(t.key,t.value,'["'.concat(e.name,'"] expression is not supported in a filter for a ').concat(t.object.type," layer with id: ").concat(t.object.id))]:(e.eachChild((function(e){o.push.apply(o,c(yr(e,t)))})),o)}function vr(e){var t=e.key,i=e.value,n=e.valueSpec,r=[];return Array.isArray(n.values)?-1===n.values.indexOf(Rt(i))&&r.push(new jt(t,i,"expected one of [".concat(n.values.join(", "),"], ").concat(JSON.stringify(i)," found"))):-1===Object.keys(n.values).indexOf(Rt(i))&&r.push(new jt(t,i,"expected one of [".concat(Object.keys(n.values).join(", "),"], ").concat(JSON.stringify(i)," found"))),r}function gr(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,i=p(e.slice(1));try{for(i.s();!(t=i.n()).done;){var n=t.value;if(!gr(n)&&"boolean"!=typeof n)return!1}}catch(r){i.e(r)}finally{i.f()}return!0;default:return!0}}function _r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==e)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};gr(e)||(e=Tr(e));var i=e,n=!0;try{n=function(e){if(!wr(e))return e;var t=zt(e);return xr(t),t=br(t)}(i)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(i,null,2),"\n        "))}var r=Dt["filter_".concat(t)],a=ar(n,r),o=null;if("error"===a.result)throw new Error(a.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));o=function(e,t,i){return a.value.evaluate(e,t,{},i)};var s=null,l=null;if(n!==i){var u=ar(i,r);if("error"===u.result)throw new Error(u.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));s=function(e,t,i,n,r){return u.value.evaluate(e,t,{},i,void 0,void 0,n,r)},l=!Wi(u.value.expression)}return{filter:o=o,dynamicFilter:s||void 0,needGeometry:Sr(n),needFeature:!!l}}function br(e){if(!Array.isArray(e))return e;var t=function(e){if(kr.has(e[0]))for(var t=1;t<e.length;t++)if(wr(e[t]))return!0;return e}(e);return!0===t?t:t.map((function(e){return br(e)}))}function xr(e){var t=!1,i=[];if("case"===e[0]){for(var n=1;n<e.length-1;n+=2)t=t||wr(e[n]),i.push(e[n+1]);i.push(e[e.length-1])}else if("match"===e[0]){t=t||wr(e[1]);for(var r=2;r<e.length-1;r+=2)i.push(e[r+1]);i.push(e[e.length-1])}else if("step"===e[0]){t=t||wr(e[1]);for(var a=1;a<e.length-1;a+=2)i.push(e[a+1])}t&&(e.length=0,e.push.apply(e,["any"].concat(i)));for(var o=1;o<e.length;o++)xr(e[o])}function wr(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;for(var t,i=1;i<e.length;i++)if(wr(e[i]))return!0;return!1}var kr=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Pr(e,t){return e<t?-1:e>t?1:0}function Sr(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(Sr(e[t]))return!0;return!1}function Tr(e){if(!e)return!0;var t,i=e[0];return e.length<=1?"any"!==i:"=="===i?Cr(e[1],e[2],"=="):"!="===i?Er(Cr(e[1],e[2],"==")):"<"===i||">"===i||"<="===i||">="===i?Cr(e[1],e[2],i):"any"===i?(t=e.slice(1),["any"].concat(t.map(Tr))):"all"===i?["all"].concat(e.slice(1).map(Tr)):"none"===i?["all"].concat(e.slice(1).map(Tr).map(Er)):"in"===i?Or(e[1],e.slice(2)):"!in"===i?Er(Or(e[1],e.slice(2))):"has"===i?Ir(e[1]):"!has"===i?Er(Ir(e[1])):"within"!==i||e}function Cr(e,t,i){switch(e){case"$type":return["filter-type-".concat(i),t];case"$id":return["filter-id-".concat(i),t];default:return["filter-".concat(i),e,t]}}function Or(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(Pr)]]:["filter-in-small",e,["literal",t]]}}function Ir(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Er(e){return["!",e]}function Ar(e){if(gr(zt(e.value))){var t=zt(e.layerType);return mr(Lt({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_".concat(t||"fill")]}))}return Mr(e)}function Mr(e){var t=e.value,i=e.key;if("array"!==qn(t))return[new jt(i,t,"array expected, ".concat(qn(t)," found"))];var n,r=e.styleSpec,a=[];if(t.length<1)return[new jt(i,t,"filter array must have at least 1 element")];switch(a=a.concat(vr({key:"".concat(i,"[0]"),value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),Rt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Rt(t[1])&&a.push(new jt(i,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&a.push(new jt(i,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&"string"!==(n=qn(t[1]))&&a.push(new jt("".concat(i,"[1]"),t[1],"string expected, ".concat(n," found")));for(var o=2;o<t.length;o++)n=qn(t[o]),"$type"===Rt(t[1])?a=a.concat(vr({key:"".concat(i,"[").concat(o,"]"),value:t[o],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&a.push(new jt("".concat(i,"[").concat(o,"]"),t[o],"string, number, or boolean expected, ".concat(n," found")));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)a=a.concat(Mr({key:"".concat(i,"[").concat(s,"]"),value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=qn(t[1]),2!==t.length?a.push(new jt(i,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==n&&a.push(new jt("".concat(i,"[1]"),t[1],"string expected, ".concat(n," found")));break;case"within":n=qn(t[1]),2!==t.length?a.push(new jt(i,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==n&&a.push(new jt("".concat(i,"[1]"),t[1],"object expected, ".concat(n," found")))}return a}function Dr(e,t){var i=e.key,n=e.style,r=e.styleSpec,a=e.value,o=e.objectKey,s=r["".concat(t,"_").concat(e.layerType)];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Gr({key:i,value:a,valueSpec:r.transition,style:n,styleSpec:r});var u,c=e.valueSpec||s[o];if(!c)return[new jt(i,a,'unknown property "'.concat(o,'"'))];if("string"===qn(a)&&Hn(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new jt(i,a,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(u[1])," }`."))];var h=[];return"symbol"===e.layerType&&("text-field"===o&&n&&!n.glyphs&&h.push(new jt(i,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Zn(zt(a))&&"identity"===Rt(a.type)&&h.push(new jt(i,a,'"text-font" does not support identity functions'))),h.concat(Gr({key:e.key,value:a,valueSpec:c,style:n,styleSpec:r,expressionContext:"property",propertyType:t,propertyKey:o}))}function jr(e){return Dr(e,"paint")}function Fr(e){return Dr(e,"layout")}function Lr(e){var t=[],i=e.value,n=e.key,r=e.style,a=e.styleSpec;i.type||i.ref||t.push(new jt(n,i,'either "type" or "ref" is required'));var o,s=Rt(i.type),l=Rt(i.ref);if(i.id)for(var u=Rt(i.id),c=0;c<e.arrayIndex;c++){var h=r.layers[c];Rt(h.id)===u&&t.push(new jt(n,i.id,'duplicate layer id "'.concat(i.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach((function(e){e in i&&t.push(new jt(n,i[e],'"'.concat(e,'" is prohibited for ref layers')))})),r.layers.forEach((function(e){Rt(e.id)===l&&(o=e)})),o?o.ref?t.push(new jt(n,i.ref,"ref cannot reference another ref layer")):s=Rt(o.type):t.push(new jt(n,i.ref,'ref layer "'.concat(l,'" not found')));else if("background"!==s&&"sky"!==s)if(i.source){var p=r.sources&&r.sources[i.source],d=p&&Rt(p.type);p?"vector"===d&&"raster"===s?t.push(new jt(n,i.source,'layer "'.concat(i.id,'" requires a raster source'))):"raster"===d&&"raster"!==s?t.push(new jt(n,i.source,'layer "'.concat(i.id,'" requires a vector source'))):"vector"!==d||i["source-layer"]?"raster-dem"===d&&"hillshade"!==s?t.push(new jt(n,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===d&&p.lineMetrics||t.push(new jt(n,i,'layer "'.concat(i.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new jt(n,i,'layer "'.concat(i.id,'" must specify a "source-layer"'))):t.push(new jt(n,i.source,'source "'.concat(i.source,'" not found')))}else t.push(new jt(n,i,'missing required property "source"'));return t=t.concat(hr({key:n,value:i,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Gr({key:"".concat(n,".type"),value:i.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:function(e){return Ar(Lt({layerType:s},e))},layout:function(e){return hr({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Fr(Lt({layerType:s},e))}}})},paint:function(e){return hr({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return jr(Lt({layerType:s},e))}}})}}})),t}function Rr(e){var t=e.value,i=e.key,n=qn(t);return"string"!==n?[new jt(i,t,"string expected, ".concat(n," found"))]:[]}var zr={promoteId:function(e){var t=e.key,i=e.value;if("string"===qn(i))return Rr({key:t,value:i});var n=[];for(var r in i)n.push.apply(n,c(Rr({key:"".concat(t,".").concat(r),value:i[r]})));return n}};function Vr(e){var t=e.value,i=e.key,n=e.styleSpec,r=e.style;if(!t.type)return[new jt(i,t,'"type" is required')];var a,o=Rt(t.type);switch(o){case"vector":case"raster":case"raster-dem":return a=hr({key:i,value:t,valueSpec:n["source_".concat(o.replace("-","_"))],style:e.style,styleSpec:n,objectElementValidators:zr});case"geojson":if(a=hr({key:i,value:t,valueSpec:n.source_geojson,style:r,styleSpec:n,objectElementValidators:zr}),t.cluster)for(var s in t.clusterProperties){var l,u,p=h(t.clusterProperties[s],2),d=p[0],f=p[1],m="string"==typeof d?[d,["accumulated"],["get",s]]:d;(l=a).push.apply(l,c(mr({key:"".concat(i,".").concat(s,".map"),value:f,expressionContext:"cluster-map"}))),(u=a).push.apply(u,c(mr({key:"".concat(i,".").concat(s,".reduce"),value:m,expressionContext:"cluster-reduce"})))}return a;case"video":return hr({key:i,value:t,valueSpec:n.source_video,style:r,styleSpec:n});case"image":return hr({key:i,value:t,valueSpec:n.source_image,style:r,styleSpec:n});case"canvas":return[new jt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vr({key:"".concat(i,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:n})}}function Br(e){var t=e.value,i=e.styleSpec,n=i.light,r=e.style,a=[],o=qn(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new jt("light",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&n[l[1]]&&n[l[1]].transition?Gr({key:s,value:t[s],valueSpec:i.transition,style:r,styleSpec:i}):n[s]?Gr({key:s,value:t[s],valueSpec:n[s],style:r,styleSpec:i}):[new jt(s,t[s],'unknown property "'.concat(s,'"'))])}return a}function Nr(e){var t=e.value,i=e.key,n=e.style,r=e.styleSpec,a=r.terrain,o=[],s=qn(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new jt("terrain",t,"object expected, ".concat(s," found"))]);for(var l in t){var u=l.match(/^(.*)-transition$/);o=o.concat(u&&a[u[1]]&&a[u[1]].transition?Gr({key:l,value:t[l],valueSpec:r.transition,style:n,styleSpec:r}):a[l]?Gr({key:l,value:t[l],valueSpec:a[l],style:n,styleSpec:r}):[new jt(l,t[l],'unknown property "'.concat(l,'"'))])}if(t.source){var c=n.sources&&n.sources[t.source],h=c&&Rt(c.type);c?"raster-dem"!==h&&o.push(new jt(i,t.source,"terrain cannot be used with a source of type ".concat(h,', it only be used with a "raster-dem" source type'))):o.push(new jt(i,t.source,'source "'.concat(t.source,'" not found')))}else o.push(new jt(i,t,'terrain is missing required property "source"'));return o}function Ur(e){var t=e.value,i=e.style,n=e.styleSpec,r=n.fog,a=[],o=qn(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new jt("fog",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&r[l[1]]&&r[l[1]].transition?Gr({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Gr({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new jt(s,t[s],'unknown property "'.concat(s,'"'))])}return a}var Wr={"*":function(){return[]},array:pr,boolean:function(e){var t=e.value,i=e.key,n=qn(t);return"boolean"!==n?[new jt(i,t,"boolean expected, ".concat(n," found"))]:[]},number:dr,color:function(e){var t=e.key,i=e.value,n=qn(i);return"string"!==n?[new jt(t,i,"color expected, ".concat(n," found"))]:null===ri.parseCSSColor(i)?[new jt(t,i,'color expected, "'.concat(i,'" found'))]:[]},constants:Ft,enum:vr,filter:Ar,function:fr,layer:Lr,object:hr,source:Vr,light:Br,terrain:Nr,fog:Ur,string:Rr,formatted:function(e){return 0===Rr(e).length?[]:mr(e)},resolvedImage:function(e){return 0===Rr(e).length?[]:mr(e)},projection:function(e){var t=e.value,i=e.styleSpec,n=i.projection,r=e.style,a=[],o=qn(t);if("object"===o)for(var s in t)a=a.concat(Gr({key:s,value:t[s],valueSpec:n[s],style:r,styleSpec:i}));else"string"!==o&&(a=a.concat([new jt("projection",t,"object or string expected, ".concat(o," found"))]));return a}};function Gr(e){var t=e.value,i=e.valueSpec,n=e.styleSpec;return i.expression&&Zn(Rt(t))?fr(e):i.expression&&rr(zt(t))?mr(e):i.type&&Wr[i.type]?Wr[i.type](e):hr(Lt({},e,{valueSpec:i.type?n[i.type]:i}))}function Hr(e){var t=e.value,i=e.key,n=Rr(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new jt(i,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new jt(i,t,'"glyphs" url must include a "{range}" token'))),n}function Xr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dt,i=[];return i=i.concat(Gr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Hr,"*":function(){return[]}}})),e.constants&&(i=i.concat(Ft({key:"constants",value:e.constants,style:e,styleSpec:t}))),Yr(i)}function Yr(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function qr(e){return function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return Yr(e.apply(this,i))}}Xr.source=qr(Vr),Xr.light=qr(Br),Xr.terrain=qr(Nr),Xr.fog=qr(Ur),Xr.layer=qr(Lr),Xr.filter=qr(Ar),Xr.paintProperty=qr(jr),Xr.layoutProperty=qr(Fr);var Zr=Xr,Kr=Zr.light,$r=Zr.fog,Jr=Zr.paintProperty,Qr=Zr.layoutProperty;function ea(e,t){var i=!1;if(t&&t.length){var n,r=p(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.fire(new At(new Error(a.message))),i=!0}}catch(o){r.e(o)}finally{r.f()}}return i}var ta=ia;function ia(e,t,i){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var r=new Int32Array(this.arrayBuffer);e=r[0],this.d=(t=r[1])+2*(i=r[2]);for(var a=0;a<this.d*this.d;a++){var o=r[3+a],s=r[3+a+1];n.push(o===s?null:r.subarray(o,s))}var l=r[3+n.length+1];this.keys=r.subarray(r[3+n.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var u=0;u<this.d*this.d;u++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var c=i/t*e;this.min=-c,this.max=e+c}ia.prototype.insert=function(e,t,i,n,r){this._forEachCell(t,i,n,r,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)},ia.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ia.prototype._insertCell=function(e,t,i,n,r,a){this.cells[r].push(a)},ia.prototype.query=function(e,t,i,n,r){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=i&&o<=n&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,i,n,this._queryCell,s,{},r),s},ia.prototype._queryCell=function(e,t,i,n,r,a,o,s){var l=this.cells[r];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===o[p]){var d=4*p;(s?s(c[d+0],c[d+1],c[d+2],c[d+3]):e<=c[d+2]&&t<=c[d+3]&&i>=c[d+0]&&n>=c[d+1])?(o[p]=!0,a.push(u[p])):o[p]=!1}}},ia.prototype._forEachCell=function(e,t,i,n,r,a,o,s){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(i),h=this._convertToCellCoord(n),p=l;p<=c;p++)for(var d=u;d<=h;d++){var f=this.d*d+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(d),this._convertFromCellCoord(p+1),this._convertFromCellCoord(d+1)))&&r.call(this,e,t,i,n,f,a,o,s))return}},ia.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},ia.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},ia.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,n=0;n<this.cells.length;n++)i+=this.cells[n].length;var r=new Int32Array(t+i+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];r[3+o]=a,r.set(s,a),a+=s.length}return r[3+e.length]=a,r.set(this.keys,a),r[3+e.length+1]=a+=this.keys.length,r.set(this.bboxes,a),a+=this.bboxes.length,r.buffer};var na=b.ImageData,ra=b.ImageBitmap,aa={};function oa(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),aa[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var sa in oa("Object",Object),ta.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},ta.deserialize=function(e){return new ta(e.buffer)},oa("Grid",ta),oa("Color",ai),oa("Error",Error),oa("ResolvedImage",ui),oa("StylePropertyFunction",ur),oa("StyleExpression",nr,{omit:["_evaluator"]}),oa("ZoomDependentExpression",sr),oa("ZoomConstantExpression",or),oa("CompoundExpression",Pi,{omit:["_evaluate"]}),zn)zn[sa]._classRegistryKey||oa("Expression_".concat(sa),zn[sa]);function la(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function ua(e){return ra&&e instanceof ra}function ca(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(la(e)||ua(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof na)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var n,r=[],a=p(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.push(ca(o,t))}}catch(d){a.e(d)}finally{a.f()}return r}if("object"==typeof e){var s=e.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var u=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)if(e.hasOwnProperty(c)&&!(aa[l].omit.indexOf(c)>=0)){var h=e[c];u[c]=aa[l].shallow.indexOf(c)>=0?h:ca(h,t)}e instanceof Error&&(u.message=e.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof e)}function ha(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||la(e)||ua(e)||ArrayBuffer.isView(e)||e instanceof na)return e;if(Array.isArray(e))return e.map(ha);if("object"==typeof e){var t=e.$name||"Object",i=aa[t].klass;if(!i)throw new Error("can't deserialize unregistered class ".concat(t));if(i.deserialize)return i.deserialize(e);for(var n=Object.create(i.prototype),r=0,a=Object.keys(e);r<a.length;r++){var o=a[r];if("$name"!==o){var s=e[o];n[o]=aa[t].shallow.indexOf(o)>=0?s:ha(s)}}return n}throw new Error("can't deserialize object of type "+typeof e)}var pa=function(){function e(){y(this,e),this.first=!0}return v(e,[{key:"update",value:function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))}}]),e}(),da=function(e){return e>=1536&&e<=1791},fa=function(e){return e>=1872&&e<=1919},ma=function(e){return e>=2208&&e<=2303},ya=function(e){return e>=11904&&e<=12031},va=function(e){return e>=12032&&e<=12255},ga=function(e){return e>=12272&&e<=12287},_a=function(e){return e>=12288&&e<=12351},ba=function(e){return e>=12352&&e<=12447},xa=function(e){return e>=12448&&e<=12543},wa=function(e){return e>=12544&&e<=12591},ka=function(e){return e>=12704&&e<=12735},Pa=function(e){return e>=12736&&e<=12783},Sa=function(e){return e>=12784&&e<=12799},Ta=function(e){return e>=12800&&e<=13055},Ca=function(e){return e>=13056&&e<=13311},Oa=function(e){return e>=13312&&e<=19903},Ia=function(e){return e>=19968&&e<=40959},Ea=function(e){return e>=40960&&e<=42127},Aa=function(e){return e>=42128&&e<=42191},Ma=function(e){return e>=44032&&e<=55215},Da=function(e){return e>=63744&&e<=64255},ja=function(e){return e>=64336&&e<=65023},Fa=function(e){return e>=65040&&e<=65055},La=function(e){return e>=65072&&e<=65103},Ra=function(e){return e>=65104&&e<=65135},za=function(e){return e>=65136&&e<=65279},Va=function(e){return e>=65280&&e<=65519};function Ba(e){var t,i=p(e);try{for(i.s();!(t=i.n()).done;)if(Wa(t.value.charCodeAt(0)))return!0}catch(n){i.e(n)}finally{i.f()}return!1}function Na(e){var t,i=p(e);try{for(i.s();!(t=i.n()).done;)if(!Ua(t.value.charCodeAt(0)))return!1}catch(n){i.e(n)}finally{i.f()}return!0}function Ua(e){return!(da(e)||fa(e)||ma(e)||ja(e)||za(e))}function Wa(e){return!(746!==e&&747!==e&&(e<4352||!(ka(e)||wa(e)||La(e)&&!(e>=65097&&e<=65103)||Da(e)||Ca(e)||ya(e)||Pa(e)||!(!_a(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Oa(e)||Ia(e)||Ta(e)||function(e){return e>=12592&&e<=12687}(e)||function(e){return e>=43360&&e<=43391}(e)||function(e){return e>=55216&&e<=55295}(e)||function(e){return e>=4352&&e<=4607}(e)||Ma(e)||ba(e)||ga(e)||function(e){return e>=12688&&e<=12703}(e)||va(e)||Sa(e)||xa(e)&&12540!==e||!(!Va(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Ra(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||function(e){return e>=5120&&e<=5759}(e)||function(e){return e>=6320&&e<=6399}(e)||Fa(e)||function(e){return e>=19904&&e<=19967}(e)||Ea(e)||Aa(e))))}function Ga(e){return!(Wa(e)||function(e){return!!(function(e){return e>=128&&e<=255}(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||function(e){return e>=8192&&e<=8303}(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||function(e){return e>=8448&&e<=8527}(e)||function(e){return e>=8528&&e<=8591}(e)||function(e){return e>=8960&&e<=9215}(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||function(e){return e>=9216&&e<=9279}(e)&&9251!==e||function(e){return e>=9280&&e<=9311}(e)||function(e){return e>=9312&&e<=9471}(e)||function(e){return e>=9632&&e<=9727}(e)||function(e){return e>=9728&&e<=9983}(e)&&!(e>=9754&&e<=9759)||function(e){return e>=11008&&e<=11263}(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||_a(e)||xa(e)||function(e){return e>=57344&&e<=63743}(e)||La(e)||Ra(e)||Va(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Ha(e){return e>=1424&&e<=2303||ja(e)||za(e)}function Xa(e,t){return!(!t&&Ha(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||function(e){return e>=6016&&e<=6143}(e))}function Ya(e){var t,i=p(e);try{for(i.s();!(t=i.n()).done;)if(Ha(t.value.charCodeAt(0)))return!0}catch(n){i.e(n)}finally{i.f()}return!1}var qa="deferred",Za="loading",Ka="loaded",$a=null,Ja="unavailable",Qa=null,eo=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Ja="error"),$a&&$a(e)};function to(){io.fire(new Et("pluginStateChange",{pluginStatus:Ja,pluginURL:Qa}))}var io=new Mt,no=function(){return Ja},ro=function(){if(Ja!==qa||!Qa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ja=Za,to(),Qa&&bt({url:Qa},(function(e){e?eo(e):(Ja=Ka,to())}))},ao={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ja===Ka||null!=ao.applyArabicShaping},isLoading:function(){return Ja===Za},setState:function(e){Ja=e.pluginStatus,Qa=e.pluginURL},isParsed:function(){return null!=ao.applyArabicShaping&&null!=ao.processBidirectionalText&&null!=ao.processStyledBidirectionalText},getPluginURL:function(){return Qa}},oo=function(){function e(t,i){y(this,e),this.zoom=t,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition,this.pitch=i.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new pa,this.transition={},this.pitch=0)}return v(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var i,n=p(e);try{for(n.s();!(i=n.n()).done;)if(!Xa(i.value.charCodeAt(0),t))return!1}catch(r){n.e(r)}finally{n.f()}return!0}(e,ao.isLoaded())}},{key:"crossFadingFactor",value:function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}},{key:"getCrossfadeParameters",value:function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}}}]),e}(),so=function(){function e(t,i){y(this,e),this.property=t,this.value=i,this.expression=function(e,t){if(Zn(e))return new ur(e,t);if(rr(e)){var i=lr(e,t);if("error"===i.result)throw new Error(i.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return i.value}var n=e;return"string"==typeof e&&"color"===t.type&&(n=ai.parse(e)),{kind:"constant",evaluate:function(){return n}}}(void 0===i?t.specification.default:i,t.specification)}return v(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)}}]),e}(),lo=function(){function e(t){y(this,e),this.property=t,this.value=new so(t,void 0)}return v(e,[{key:"transitioned",value:function(e,t){return new co(this.property,this.value,t,fe({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new co(this.property,this.value,null,{},0)}}]),e}(),uo=function(){function e(t){y(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return v(e,[{key:"getValue",value:function(e){return Pe(this._values[e].value.value)}},{key:"setValue",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new lo(this._values[e].property)),this._values[e].value=new so(this._values[e].property,null===t?void 0:Pe(t))}},{key:"getTransition",value:function(e){return Pe(this._values[e].transition)}},{key:"setTransition",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new lo(this._values[e].property)),this._values[e].transition=Pe(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t++){var n=i[t],r=this.getValue(n);void 0!==r&&(e[n]=r);var a=this.getTransition(n);void 0!==a&&(e["".concat(n,"-transition")]=a)}return e}},{key:"transitioned",value:function(e,t){for(var i=new ho(this._properties),n=0,r=Object.keys(this._values);n<r.length;n++){var a=r[n];i._values[a]=this._values[a].transitioned(e,t._values[a])}return i}},{key:"untransitioned",value:function(){for(var e=new ho(this._properties),t=0,i=Object.keys(this._values);t<i.length;t++){var n=i[t];e._values[n]=this._values[n].untransitioned()}return e}}]),e}(),co=function(){function e(t,i,n,r,a){y(this,e);var o=r.delay||0,s=r.duration||0;a=a||0,this.property=t,this.value=i,this.begin=a+o,this.end=this.begin+s,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}return v(e,[{key:"possiblyEvaluate",value:function(e,t,i){var n=e.now||0,r=this.value.possiblyEvaluate(e,t,i),a=this.prior;if(a){if(n>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(n<this.begin)return a.possiblyEvaluate(e,t,i);var o=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,i),r,oe(o))}return r}}]),e}(),ho=function(){function e(t){y(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return v(e,[{key:"possiblyEvaluate",value:function(e,t,i){for(var n=new mo(this._properties),r=0,a=Object.keys(this._values);r<a.length;r++){var o=a[r];n._values[o]=this._values[o].possiblyEvaluate(e,t,i)}return n}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var i=t[e];if(this._values[i].prior)return!0}return!1}}]),e}(),po=function(){function e(t){y(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return v(e,[{key:"getValue",value:function(e){return Pe(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new so(this._values[e].property,null===t?void 0:Pe(t))}},{key:"serialize",value:function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t++){var n=i[t],r=this.getValue(n);void 0!==r&&(e[n]=r)}return e}},{key:"possiblyEvaluate",value:function(e,t,i){for(var n=new mo(this._properties),r=0,a=Object.keys(this._values);r<a.length;r++){var o=a[r];n._values[o]=this._values[o].possiblyEvaluate(e,t,i)}return n}}]),e}(),fo=function(){function e(t,i,n){y(this,e),this.property=t,this.value=i,this.parameters=n}return v(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,i,n){return this.property.evaluate(this.value,this.parameters,e,t,i,n)}}]),e}(),mo=function(){function e(t){y(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return v(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),yo=function(){function e(t){y(this,e),this.specification=t}return v(e,[{key:"possiblyEvaluate",value:function(e,t){return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,i){var n=Ji[this.specification.type];return n?n(e,t,i):e}}]),e}(),vo=function(){function e(t,i){y(this,e),this.specification=t,this.overrides=i}return v(e,[{key:"possiblyEvaluate",value:function(e,t,i,n){return new fo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},i,n)}:e.expression,t)}},{key:"interpolate",value:function(e,t,i){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new fo(this,{kind:"constant",value:void 0},e.parameters);var n=Ji[this.specification.type];return n?new fo(this,{kind:"constant",value:n(e.value.value,t.value.value,i)},e.parameters):e}},{key:"evaluate",value:function(e,t,i,n,r,a){return"constant"===e.kind?e.value:e.evaluate(t,i,n,r,a)}}]),e}(),go=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"possiblyEvaluate",value:function(e,t,i,n){if(void 0===e.value)return new fo(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var r=e.expression.evaluate(t,null,{},i,n),a="resolvedImage"===e.property.specification.type&&"string"!=typeof r?r.name:r,o=this._calculate(a,a,a,t);return new fo(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new fo(this,{kind:"constant",value:s},t)}return new fo(this,e.expression,t)}},{key:"evaluate",value:function(e,t,i,n,r,a){if("source"===e.kind){var o=e.evaluate(t,i,n,r,a);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},i,n),e.evaluate({zoom:Math.floor(t.zoom)},i,n),e.evaluate({zoom:Math.floor(t.zoom)+1},i,n),t):e.value}},{key:"_calculate",value:function(e,t,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t,other:i}:{from:i,to:t,other:e}}},{key:"interpolate",value:function(e){return e}}]),i}(vo),_o=function(){function e(t){y(this,e),this.specification=t}return v(e,[{key:"possiblyEvaluate",value:function(e,t,i,n){if(void 0!==e.value){if("constant"===e.expression.kind){var r=e.expression.evaluate(t,null,{},i,n);return this._calculate(r,r,r,t)}return this._calculate(e.expression.evaluate(new oo(Math.floor(t.zoom-1),t)),e.expression.evaluate(new oo(Math.floor(t.zoom),t)),e.expression.evaluate(new oo(Math.floor(t.zoom+1),t)),t)}}},{key:"_calculate",value:function(e,t,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}},{key:"interpolate",value:function(e){return e}}]),e}(),bo=function(){function e(t){y(this,e),this.specification=t}return v(e,[{key:"possiblyEvaluate",value:function(e,t,i,n){return!!e.expression.evaluate(t,null,{},i,n)}},{key:"interpolate",value:function(){return!1}}]),e}(),xo=v((function e(t){for(var i in y(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[i];n.specification.overridable&&this.overridableProperties.push(i);var r=this.defaultPropertyValues[i]=new so(n,void 0),a=this.defaultTransitionablePropertyValues[i]=new lo(n);this.defaultTransitioningPropertyValues[i]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=r.possiblyEvaluate({})}}));function wo(e,t){return 256*(e=ue(Math.floor(e),0,255))+ue(Math.floor(t),0,255)}oa("DataDrivenProperty",vo),oa("DataConstantProperty",yo),oa("CrossFadedDataDrivenProperty",go),oa("CrossFadedProperty",_o),oa("ColorRampProperty",bo);var ko={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Po=v((function e(t,i){y(this,e),this._structArray=t,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),So=function(){function e(){y(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return v(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function To(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=0,n=0;return{members:e.map((function(e){var r=ko[e.type].BYTES_PER_ELEMENT,a=i=Co(i,Math.max(t,r)),o=e.components||1;return n=Math.max(n,r),i+=r*o,{name:e.name,type:e.type,components:o,offset:a}})),size:Co(i,Math.max(n,t)),alignment:t}}function Co(e,t){return Math.ceil(e/t)*t}var Oo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)}},{key:"emplace",value:function(e,t,i){var n=2*e;return this.int16[n+0]=t,this.int16[n+1]=i,e}}]),i}(So);Oo.prototype.bytesPerElement=4,oa("StructArrayLayout2i4",Oo);var Io=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i,n)}},{key:"emplace",value:function(e,t,i,n,r){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=i,this.int16[a+2]=n,this.int16[a+3]=r,e}}]),i}(So);Io.prototype.bytesPerElement=8,oa("StructArrayLayout4i8",Io);var Eo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n,r,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,n,r,a,o)}},{key:"emplace",value:function(e,t,i,n,r,a,o,s){var l=6*e,u=12*e,c=3*e;return this.int16[l+0]=t,this.int16[l+1]=i,this.uint8[u+4]=n,this.uint8[u+5]=r,this.uint8[u+6]=a,this.uint8[u+7]=o,this.float32[c+2]=s,e}}]),i}(So);Eo.prototype.bytesPerElement=12,oa("StructArrayLayout2i4ub1f12",Eo);var Ao=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i)}},{key:"emplace",value:function(e,t,i,n){var r=3*e;return this.float32[r+0]=t,this.float32[r+1]=i,this.float32[r+2]=n,e}}]),i}(So);Ao.prototype.bytesPerElement=12,oa("StructArrayLayout3f12",Ao);var Mo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n,r,a,o,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,i,n,r,a,o,s,l,u)}},{key:"emplace",value:function(e,t,i,n,r,a,o,s,l,u,c){var h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=i,this.uint16[h+2]=n,this.uint16[h+3]=r,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,e}}]),i}(So);Mo.prototype.bytesPerElement=20,oa("StructArrayLayout10ui20",Mo);var Do=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n,r,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,i,n,r,a,o,s)}},{key:"emplace",value:function(e,t,i,n,r,a,o,s,l){var u=8*e;return this.uint16[u+0]=t,this.uint16[u+1]=i,this.uint16[u+2]=n,this.uint16[u+3]=r,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=s,this.uint16[u+7]=l,e}}]),i}(So);Do.prototype.bytesPerElement=16,oa("StructArrayLayout8ui16",Do);var jo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m){var y=this.length;return this.resize(y+1),this.emplace(y,e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m)}},{key:"emplace",value:function(e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m,y){var v=16*e;return this.int16[v+0]=t,this.int16[v+1]=i,this.int16[v+2]=n,this.int16[v+3]=r,this.uint16[v+4]=a,this.uint16[v+5]=o,this.uint16[v+6]=s,this.uint16[v+7]=l,this.int16[v+8]=u,this.int16[v+9]=c,this.int16[v+10]=h,this.int16[v+11]=p,this.int16[v+12]=d,this.int16[v+13]=f,this.int16[v+14]=m,this.int16[v+15]=y,e}}]),i}(So);jo.prototype.bytesPerElement=32,oa("StructArrayLayout4i4ui4i4i32",jo);var Fo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),i}(So);Fo.prototype.bytesPerElement=4,oa("StructArrayLayout1ul4",Fo);var Lo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n,r,a,o,s,l,u,c,h,p){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,i,n,r,a,o,s,l,u,c,h,p)}},{key:"emplace",value:function(e,t,i,n,r,a,o,s,l,u,c,h,p,d){var f=20*e,m=10*e;return this.int16[f+0]=t,this.int16[f+1]=i,this.int16[f+2]=n,this.int16[f+3]=r,this.int16[f+4]=a,this.float32[m+3]=o,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=u,this.int16[f+14]=c,this.uint32[m+8]=h,this.uint16[f+18]=p,this.uint16[f+19]=d,e}}]),i}(So);Lo.prototype.bytesPerElement=40,oa("StructArrayLayout5i4f1i1ul2ui40",Lo);var Ro=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n,r,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,n,r,a,o)}},{key:"emplace",value:function(e,t,i,n,r,a,o,s){var l=8*e;return this.int16[l+0]=t,this.int16[l+1]=i,this.int16[l+2]=n,this.int16[l+4]=r,this.int16[l+5]=a,this.int16[l+6]=o,this.int16[l+7]=s,e}}]),i}(So);Ro.prototype.bytesPerElement=16,oa("StructArrayLayout3i2i2i16",Ro);var zo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n,r){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,n,r)}},{key:"emplace",value:function(e,t,i,n,r,a){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=i,this.float32[o+2]=n,this.int16[s+6]=r,this.int16[s+7]=a,e}}]),i}(So);zo.prototype.bytesPerElement=16,oa("StructArrayLayout2f1f2i16",zo);var Vo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i,n)}},{key:"emplace",value:function(e,t,i,n,r){var a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=i,this.float32[o+1]=n,this.float32[o+2]=r,e}}]),i}(So);Vo.prototype.bytesPerElement=12,oa("StructArrayLayout2ub2f12",Vo);var Bo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i)}},{key:"emplace",value:function(e,t,i,n){var r=3*e;return this.uint16[r+0]=t,this.uint16[r+1]=i,this.uint16[r+2]=n,e}}]),i}(So);Bo.prototype.bytesPerElement=6,oa("StructArrayLayout3ui6",Bo);var No=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m,y,v,g,_,b){var x=this.length;return this.resize(x+1),this.emplace(x,e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m,y,v,g,_,b)}},{key:"emplace",value:function(e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m,y,v,g,_,b,x){var w=30*e,k=15*e,P=60*e;return this.int16[w+0]=t,this.int16[w+1]=i,this.int16[w+2]=n,this.float32[k+2]=r,this.float32[k+3]=a,this.uint16[w+8]=o,this.uint16[w+9]=s,this.uint32[k+5]=l,this.uint32[k+6]=u,this.uint32[k+7]=c,this.uint16[w+16]=h,this.uint16[w+17]=p,this.uint16[w+18]=d,this.float32[k+10]=f,this.float32[k+11]=m,this.uint8[P+48]=y,this.uint8[P+49]=v,this.uint8[P+50]=g,this.uint32[k+13]=_,this.int16[w+28]=b,this.uint8[P+58]=x,e}}]),i}(So);No.prototype.bytesPerElement=60,oa("StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60",No);var Uo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m,y,v,g,_,b,x,w,k,P,S,T,C,O,I){var E=this.length;return this.resize(E+1),this.emplace(E,e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m,y,v,g,_,b,x,w,k,P,S,T,C,O,I)}},{key:"emplace",value:function(e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m,y,v,g,_,b,x,w,k,P,S,T,C,O,I,E){var A=38*e,M=19*e;return this.int16[A+0]=t,this.int16[A+1]=i,this.int16[A+2]=n,this.float32[M+2]=r,this.float32[M+3]=a,this.int16[A+8]=o,this.int16[A+9]=s,this.int16[A+10]=l,this.int16[A+11]=u,this.int16[A+12]=c,this.int16[A+13]=h,this.uint16[A+14]=p,this.uint16[A+15]=d,this.uint16[A+16]=f,this.uint16[A+17]=m,this.uint16[A+18]=y,this.uint16[A+19]=v,this.uint16[A+20]=g,this.uint16[A+21]=_,this.uint16[A+22]=b,this.uint16[A+23]=x,this.uint16[A+24]=w,this.uint16[A+25]=k,this.uint16[A+26]=P,this.uint16[A+27]=S,this.uint16[A+28]=T,this.uint32[M+15]=C,this.float32[M+16]=O,this.float32[M+17]=I,this.float32[M+18]=E,e}}]),i}(So);Uo.prototype.bytesPerElement=76,oa("StructArrayLayout3i2f6i15ui1ul3f76",Uo);var Wo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),i}(So);Wo.prototype.bytesPerElement=4,oa("StructArrayLayout1f4",Wo);var Go=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i)}},{key:"emplace",value:function(e,t,i,n){var r=3*e;return this.int16[r+0]=t,this.int16[r+1]=i,this.int16[r+2]=n,e}}]),i}(So);Go.prototype.bytesPerElement=6,oa("StructArrayLayout3i6",Go);var Ho=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n,r,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,n,r,a,o)}},{key:"emplace",value:function(e,t,i,n,r,a,o,s){var l=7*e;return this.float32[l+0]=t,this.float32[l+1]=i,this.float32[l+2]=n,this.float32[l+3]=r,this.float32[l+4]=a,this.float32[l+5]=o,this.float32[l+6]=s,e}}]),i}(So);Ho.prototype.bytesPerElement=28,oa("StructArrayLayout7f28",Ho);var Xo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i,n)}},{key:"emplace",value:function(e,t,i,n,r){var a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=i,this.uint16[a+3]=n,this.uint16[a+4]=r,e}}]),i}(So);Xo.prototype.bytesPerElement=12,oa("StructArrayLayout1ul3ui12",Xo);var Yo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)}},{key:"emplace",value:function(e,t,i){var n=2*e;return this.uint16[n+0]=t,this.uint16[n+1]=i,e}}]),i}(So);Yo.prototype.bytesPerElement=4,oa("StructArrayLayout2ui4",Yo);var qo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),i}(So);qo.prototype.bytesPerElement=2,oa("StructArrayLayout1ui2",qo);var Zo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)}},{key:"emplace",value:function(e,t,i){var n=2*e;return this.float32[n+0]=t,this.float32[n+1]=i,e}}]),i}(So);Zo.prototype.bytesPerElement=8,oa("StructArrayLayout2f8",Zo);var Ko=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,i,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i,n)}},{key:"emplace",value:function(e,t,i,n,r){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=i,this.float32[a+2]=n,this.float32[a+3]=r,e}}]),i}(So);Ko.prototype.bytesPerElement=16,oa("StructArrayLayout4f16",Ko);var $o=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"tileAnchorY",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+5]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+6]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+14]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+8]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+19]}}]),i}(Po);$o.prototype.size=40;var Jo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"get",value:function(e){return new $o(this,e)}}]),i}(Lo);oa("CollisionBoxArray",Jo);var Qo=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+5]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+7]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+10]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+11]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+48]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+49]},set:function(e){this._structArray.uint8[this._pos1+49]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+50]},set:function(e){this._structArray.uint8[this._pos1+50]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+13]},set:function(e){this._structArray.uint32[this._pos4+13]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+28]}},{key:"flipState",get:function(){return this._structArray.uint8[this._pos1+58]},set:function(e){this._structArray.uint8[this._pos1+58]=e}}]),i}(Po);Qo.prototype.size=60;var es=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"get",value:function(e){return new Qo(this,e)}}]),i}(No);oa("PlacedSymbolArray",es);var ts=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+8]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+9]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+11]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+12]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+13]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+23]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+24]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+25]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+26]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+27]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+28]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+15]},set:function(e){this._structArray.uint32[this._pos4+15]=e}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+16]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+17]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+18]}}]),i}(Po);ts.prototype.size=76;var is=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"get",value:function(e){return new ts(this,e)}}]),i}(Uo);oa("SymbolInstanceArray",is);var ns=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),i}(Wo);oa("GlyphOffsetArray",ns);var rs=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getx",value:function(e){return this.int16[3*e+0]}},{key:"gety",value:function(e){return this.int16[3*e+1]}},{key:"gettileUnitDistanceFromAnchor",value:function(e){return this.int16[3*e+2]}}]),i}(Go);oa("SymbolLineVertexArray",rs);var as=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"layoutVertexArrayOffset",get:function(){return this._structArray.uint16[this._pos2+4]}}]),i}(Po);as.prototype.size=12;var os=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"get",value:function(e){return new as(this,e)}}]),i}(Xo);oa("FeatureIndexArray",os);var ss=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"a_centroid_pos0",get:function(){return this._structArray.uint16[this._pos2+0]}},{key:"a_centroid_pos1",get:function(){return this._structArray.uint16[this._pos2+1]}}]),i}(Po);ss.prototype.size=4;var ls=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"get",value:function(e){return new ss(this,e)}}]),i}(Yo);oa("FillExtrusionCentroidArray",ls);var us=To([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),cs=To([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]),hs=ni((function(e){e.exports=function(e,t){var i,n,r,a,o,s,l,u;for(n=e.length-(i=3&e.length),r=t,o=3432918353,s=461845907,u=0;u<n;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,r=27492+(65535&(a=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),ps=ni((function(e){e.exports=function(e,t){for(var i,n=e.length,r=t^n,a=0;n>=4;)i=1540483477*(65535&(i=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(i>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),ds=hs,fs=ps;ds.murmur3=hs,ds.murmur2=fs;var ms=function(){function e(){y(this,e),this.ids=[],this.positions=[],this.indexed=!1}return v(e,[{key:"add",value:function(e,t,i,n){this.ids.push(ys(e)),this.positions.push(t,i,n)}},{key:"getPositions",value:function(e){for(var t=ys(e),i=0,n=this.ids.length-1;i<n;){var r=i+n>>1;this.ids[r]>=t?n=r:i=r+1}for(var a=[];this.ids[i]===t;)a.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return a}}],[{key:"serialize",value:function(e,t){var i=new Float64Array(e.ids),n=new Uint32Array(e.positions);return vs(i,n,0,i.length-1),t&&t.push(i.buffer,n.buffer),{ids:i,positions:n}}},{key:"deserialize",value:function(t){var i=new e;return i.ids=t.ids,i.positions=t.positions,i.indexed=!0,i}}]),e}();function ys(e){var t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:ds(String(e))}function vs(e,t,i,n){for(;i<n;){for(var r=e[i+n>>1],a=i-1,o=n+1;;){do{a++}while(e[a]<r);do{o--}while(e[o]>r);if(a>=o)break;gs(e,a,o),gs(t,3*a,3*o),gs(t,3*a+1,3*o+1),gs(t,3*a+2,3*o+2)}o-i<n-o?(vs(e,t,i,o),i=o+1):(vs(e,t,o+1,n),n=o)}}function gs(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}oa("FeaturePositionMap",ms);var _s=v((function e(t,i){y(this,e),this.gl=t.gl,this.location=i})),bs=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,e,n)).current=0,r}return v(i,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}]),i}(_s),xs=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,e,n)).current=[0,0,0,0],r}return v(i,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}]),i}(_s),ws=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,e,n)).current=ai.transparent,r}return v(i,[{key:"set",value:function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}]),i}(_s),ks=new Float32Array(16),Ps=new Float32Array(9),Ss=new Float32Array(4);function Ts(e){return[wo(255*e.r,255*e.g),wo(255*e.b,255*e.a)]}var Cs=function(){function e(t,i,n){y(this,e),this.value=t,this.uniformNames=i.map((function(e){return"u_".concat(e)})),this.type=n}return v(e,[{key:"setUniform",value:function(e,t,i){e.set(i.constantOr(this.value))}},{key:"getBinding",value:function(e,t,i){return"color"===this.type?new ws(e,t):new bs(e,t)}}]),e}(),Os=function(){function e(t,i){y(this,e),this.uniformNames=i.map((function(e){return"u_".concat(e)})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}return v(e,[{key:"setConstantPatternPositions",value:function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tl.concat(t.br),this.patternTo=e.tl.concat(e.br)}},{key:"setUniform",value:function(e,t,i,n){var r="u_pattern_to"===n||"u_dash_to"===n?this.patternTo:"u_pattern_from"===n||"u_dash_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;r&&e.set(r)}},{key:"getBinding",value:function(e,t,i){return"u_pattern_from"===i||"u_pattern_to"===i||"u_dash_from"===i||"u_dash_to"===i?new xs(e,t):new bs(e,t)}}]),e}(),Is=function(){function e(t,i,n,r){y(this,e),this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=i.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new r}return v(e,[{key:"populatePaintArray",value:function(e,t,i,n,r,a){var o=this.paintVertexArray.length,s=this.expression.evaluate(new oo(0),t,{},r,n,a);this.paintVertexArray.resize(e),this._setPaintValue(o,e,s)}},{key:"updatePaintArray",value:function(e,t,i,n,r){var a=this.expression.evaluate({zoom:0},i,n,void 0,r);this._setPaintValue(e,t,a)}},{key:"_setPaintValue",value:function(e,t,i){if("color"===this.type)for(var n=Ts(i),r=e;r<t;r++)this.paintVertexArray.emplace(r,n[0],n[1]);else{for(var a=e;a<t;a++)this.paintVertexArray.emplace(a,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),Es=function(){function e(t,i,n,r,a,o){y(this,e),this.expression=t,this.uniformNames=i.map((function(e){return"u_".concat(e,"_t")})),this.type=n,this.useIntegerZoom=r,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=i.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o}return v(e,[{key:"populatePaintArray",value:function(e,t,i,n,r,a){var o=this.expression.evaluate(new oo(this.zoom),t,{},r,n,a),s=this.expression.evaluate(new oo(this.zoom+1),t,{},r,n,a),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,o,s)}},{key:"updatePaintArray",value:function(e,t,i,n,r){var a=this.expression.evaluate({zoom:this.zoom},i,n,void 0,r),o=this.expression.evaluate({zoom:this.zoom+1},i,n,void 0,r);this._setPaintValue(e,t,a,o)}},{key:"_setPaintValue",value:function(e,t,i,n){if("color"===this.type)for(var r=Ts(i),a=Ts(n),o=e;o<t;o++)this.paintVertexArray.emplace(o,r[0],r[1],a[0],a[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,i,n);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(n))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,n=ue(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(n)}},{key:"getBinding",value:function(e,t,i){return new bs(e,t)}}]),e}(),As=function(){function e(t,i,n,r,a,o,s){y(this,e),this.expression=t,this.type=n,this.useIntegerZoom=r,this.zoom=a,this.layerId=s,this.paintVertexAttributes=("array"===n?cs:us).members;for(var l=0;l<i.length;++l);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}return v(e,[{key:"populatePaintArray",value:function(e,t,i){var n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(n,e,t.patterns&&t.patterns[this.layerId],i)}},{key:"updatePaintArray",value:function(e,t,i,n,r,a){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],a)}},{key:"_setPaintValues",value:function(e,t,i,n){if(n&&i){var r=i.min,a=i.mid,o=i.max,s=n[r],l=n[a],u=n[o];if(s&&l&&u)for(var c=e;c<t;c++)this._setPaintValue(this.zoomInPaintVertexArray,c,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,c,l,u)}}},{key:"_setPaintValue",value:function(e,t,i,n){e.emplace(t,i.tl[0],i.tl[1],i.br[0],i.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],i.pixelRatio,n.pixelRatio)}},{key:"upload",value:function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}]),e}(),Ms=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};y(this,e),this.binders={},this._buffers=[];var r=[];for(var a in t.paint._values)if(n(a)){var o=t.paint.get(a);if(o instanceof fo&&Hn(o.property.specification)){var s=Fs(a,t.type),l=o.value,u=o.property.specification.type,c=o.property.useIntegerZoom,h=o.property.specification["property-type"],p="cross-faded"===h||"cross-faded-data-driven"===h,d="line-dasharray"===String(a)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==l.kind||d)if("source"===l.kind||d||p){var f=zs(a,u,"source");this.binders[a]=p?new As(l,s,u,c,i,f,t.id):new Is(l,s,u,f),r.push("/a_".concat(a))}else{var m=zs(a,u,"composite");this.binders[a]=new Es(l,s,u,c,i,m),r.push("/z_".concat(a))}else this.binders[a]=p?new Os(l.value,s):new Cs(l.value,s,u),r.push("/u_".concat(a))}}this.cacheKey=r.sort().join("")}return v(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof Is||t instanceof Es?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,i,n,r,a){for(var o in this.binders){var s=this.binders[o];(s instanceof Is||s instanceof Es||s instanceof As)&&s.populatePaintArray(e,t,i,n,r,a)}}},{key:"setConstantPatternPositions",value:function(e,t){for(var i in this.binders){var n=this.binders[i];n instanceof Os&&n.setConstantPatternPositions(e,t)}}},{key:"updatePaintArrays",value:function(e,t,i,n,r,a){var o=!1;for(var s in e){var l,u=t.getPositions(s),c=p(u);try{for(c.s();!(l=c.n()).done;){var h=l.value,d=i.feature(h.index);for(var f in this.binders){var m=this.binders[f];if((m instanceof Is||m instanceof Es||m instanceof As)&&!0===m.expression.isStateDependent){var y=n.paint.get(f);m.expression=y.value,m.updatePaintArray(h.start,h.end,d,e[s],r,a),o=!0}}}}catch(v){c.e(v)}finally{c.f()}}return o}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Cs||i instanceof Os)&&e.push.apply(e,c(i.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Is||i instanceof Es||i instanceof As)for(var n=0;n<i.paintVertexAttributes.length;n++)e.push(i.paintVertexAttributes[n].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Cs||i instanceof Os||i instanceof Es){var n,r=p(i.uniformNames);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.push(a)}}catch(o){r.e(o)}finally{r.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e,t){var i=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof Cs||r instanceof Os||r instanceof Es){var a,o=p(r.uniformNames);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t[s]){var l=r.getBinding(e,t[s],s);i.push({name:s,property:n,binding:l})}}}catch(u){o.e(u)}finally{o.f()}}}return i}},{key:"setUniforms",value:function(e,t,i,n){var r,a=p(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.name,l=o.property,u=o.binding;this.binders[l].setUniform(u,n,i.get(l),s)}}catch(c){a.e(c)}finally{a.f()}}},{key:"updatePaintBuffers",value:function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof As){var n=2===e.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;n&&this._buffers.push(n)}else(i instanceof Is||i instanceof Es)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof Is||i instanceof Es||i instanceof As)&&i.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Is||t instanceof Es||t instanceof As)&&t.destroy()}}}]),e}(),Ds=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};y(this,e),this.programConfigurations={};var r,a=p(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.programConfigurations[o.id]=new Ms(o,i,n)}}catch(s){a.e(s)}finally{a.f()}this.needsUpload=!1,this._featureMap=new ms,this._bufferOffset=0}return v(e,[{key:"populatePaintArrays",value:function(e,t,i,n,r,a,o){for(var s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,n,r,a,o);void 0!==t.id&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,i,n,r){var a,o=p(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(e,this._featureMap,t,s,n,r)||this.needsUpload}}catch(l){o.e(l)}finally{o.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}(),js={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Fs(e,t){return js[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}var Ls={"line-pattern":{source:Mo,composite:Mo},"fill-pattern":{source:Mo,composite:Mo},"fill-extrusion-pattern":{source:Mo,composite:Mo},"line-dasharray":{source:Do,composite:Do}},Rs={color:{source:Zo,composite:Ko},number:{source:Wo,composite:Zo}};function zs(e,t,i){var n=Ls[e];return n&&n[i]||Rs[t][i]}oa("ConstantBinder",Cs),oa("CrossFadedConstantBinder",Os),oa("SourceExpressionBinder",Is),oa("CrossFadedCompositeBinder",As),oa("CompositeExpressionBinder",Es),oa("ProgramConfiguration",Ms,{omit:["_buffers"]}),oa("ProgramConfigurationSet",Ds);var Vs="-transition",Bs=function(e){f(i,e);var t=m(i);function i(e,n){var r;if(y(this,i),(r=t.call(this)).id=e.id,r.type=e.type,r._featureFilter={filter:function(){return!0},needGeometry:!1,needFeature:!1},r._filterCompiled=!1,"custom"!==e.type&&(r.metadata=(e=e).metadata,r.minzoom=e.minzoom,r.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(r.source=e.source,r.sourceLayer=e["source-layer"],r.filter=e.filter),n.layout&&(r._unevaluatedLayout=new po(n.layout)),n.paint)){for(var a in r._transitionablePaint=new uo(n.paint),e.paint)r.setPaintProperty(a,e.paint[a],{validate:!1});for(var o in e.layout)r.setLayoutProperty(o,e.layout[o],{validate:!1});r._transitioningPaint=r._transitionablePaint.untransitioned(),r.paint=new mo(n.paint)}return l(r)}return v(i,[{key:"getCrossfadeParameters",value:function(){return this._crossfadeParameters}},{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(Qr,"layers.".concat(this.id,".layout.").concat(e),e,t,i)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return xe(e,Vs)?this._transitionablePaint.getTransition(e.slice(0,-Vs.length)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(Jr,"layers.".concat(this.id,".paint.").concat(e),e,t,i))return!1;if(xe(e,Vs))return this._transitionablePaint.setTransition(e.slice(0,-Vs.length),t||void 0),!1;var n=this._transitionablePaint._values[e],r="cross-faded-data-driven"===n.property.specification["property-type"],a=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||a||r||this._handleOverridablePaintPropertyUpdate(e,o,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(e){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,i){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),ke(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!r||!1!==r.validate)&&ea(this,e.call(Zr,{key:t,layerType:this.type,objectKey:i,value:n,styleSpec:Dt,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof fo&&Hn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}},{key:"compileFilter",value:function(){this._filterCompiled||(this._featureFilter=_r(this.filter),this._filterCompiled=!0)}},{key:"invalidateCompiledFilter",value:function(){this._filterCompiled=!1}},{key:"dynamicFilter",value:function(){return this._featureFilter.dynamicFilter}},{key:"dynamicFilterNeedsFeature",value:function(){return this._featureFilter.needFeature}}]),i}(Mt),Ns=To([{name:"a_pos",components:2,type:"Int16"}],4).members,Us=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,e),this.segments=t}return v(e,[{key:"prepareSegment",value:function(t,i,n,r){var a=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&Te("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!a||a.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==r)&&(a={vertexOffset:i.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(a.sortKey=r),this.segments.push(a)),a}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=p(this.segments);try{for(t.s();!(e=t.n()).done;){var i=e.value;for(var n in i.vaos)i.vaos[n].destroy()}}catch(r){t.e(r)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,i,n,r){return new e([{vertexOffset:t,primitiveOffset:i,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}]),e}();Us.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,oa("SegmentVector",Us);var Ws=8192,Gs=function(){function e(t,i){y(this,e),t&&(i?this.setSouthWest(t).setNorthEast(i):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return v(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof Xs?new Xs(e.lng,e.lat):Xs.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof Xs?new Xs(e.lng,e.lat):Xs.convert(e),this}},{key:"extend",value:function(t){var i,n,r=this._sw,a=this._ne;if(t instanceof Xs)i=t,n=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(Xs.convert(t)):this;if(i=t._sw,n=t._ne,!i||!n)return this}return r||a?(r.lng=Math.min(i.lng,r.lng),r.lat=Math.min(i.lat,r.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new Xs(i.lng,i.lat),this._ne=new Xs(n.lng,n.lat)),this}},{key:"getCenter",value:function(){return new Xs((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new Xs(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Xs(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=Xs.convert(e),i=t.lng,n=t.lat,r=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}}],[{key:"convert",value:function(t){return!t||t instanceof e?t:new e(t)}}]),e}(),Hs=6371008.8,Xs=function(){function e(t,i){if(y(this,e),isNaN(t)||isNaN(i))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(i,")"));if(this.lng=+t,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return v(e,[{key:"wrap",value:function(){return new e(he(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,i=this.lat*t,n=e.lat*t,r=Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos((e.lng-this.lng)*t);return Hs*Math.acos(Math.min(r,1))}},{key:"toBounds",value:function(){var t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Gs(new e(this.lng-i,this.lat-t),new e(this.lng+i,this.lat+t))}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),Ys=2*Math.PI*Hs;function qs(e){return Ys*Math.cos(e*Math.PI/180)}function Zs(e){return(180+e)/360}function Ks(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function $s(e,t){return e/qs(t)}function Js(e){return 360*e-180}function Qs(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function el(e,t){return e*qs(Qs(t))}var tl=85.051129,il=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;y(this,e),this.x=+t,this.y=+i,this.z=+n}return v(e,[{key:"toLngLat",value:function(){return new Xs(Js(this.x),Qs(this.y))}},{key:"toAltitude",value:function(){return el(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/Ys*(e=Qs(this.y),1/Math.cos(e*Math.PI/180));var e}}],[{key:"fromLngLat",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Xs.convert(t);return new e(Zs(n.lng),Ks(n.lat),$s(i,n.lat))}}]),e}();function nl(e,t,i,n,r,a,o,s,l){var u=(t+n)/2,c=(i+r)/2,h=new g(u,c);s(h),function(e,t,i,n,r,a){var o=i-r,s=n-a;return Math.abs((n-t)*o-(i-e)*s)/Math.hypot(o,s)}(h.x,h.y,a.x,a.y,o.x,o.y)>=l?(nl(e,t,i,u,c,a,h,s,l),nl(e,u,c,n,r,h,o,s,l)):e.push(o)}function rl(e,t,i){var n,r,a,o,s=[],l=p(e);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=u.x,h=u.y;t(u),a?nl(s,n,r,c,h,a,u,t,i):s.push(u),n=c,r=h,a=u}}catch(d){l.e(d)}finally{l.f()}return s}var al=Math.pow(2,14)-1,ol=-al-1;function sl(e,t){var i=Math.round(e.x*t),n=Math.round(e.y*t);return e.x=ue(i,ol,al),e.y=ue(n,ol,al),(i<e.x||i>e.x+1||n<e.y||n>e.y+1)&&Te("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function ll(e,t,i){var n=e.loadGeometry(),r=e.extent,a=Ws/r;if(t&&i&&i.projection.isReprojectedInTileSpace)for(var o=1<<t.z,s=i.scale,l=i.x,u=i.y,c=i.projection,h=function(e){var i=Js((t.x+e.x/r)/o),n=Qs((t.y+e.y/r)/o),a=c.project(i,n);e.x=(a.x*s-l)*r,e.y=(a.y*s-u)*r},d=0;d<n.length;d++)if(1!==e.type)n[d]=rl(n[d],h,1);else{var f,m=[],y=p(n[d]);try{for(y.s();!(f=y.n()).done;){var v=f.value;v.x<0||v.x>=r||v.y<0||v.y>=r||(h(v),m.push(v))}}catch(k){y.e(k)}finally{y.f()}n[d]=m}var g,_=p(n);try{for(_.s();!(g=_.n()).done;){var b,x=g.value,w=p(x);try{for(w.s();!(b=w.n()).done;)sl(b.value,a)}catch(k){w.e(k)}finally{w.f()}}}catch(k){_.e(k)}finally{_.f()}return n}function ul(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?ll(e):[]}}function cl(e,t,i,n,r){e.emplaceBack(2*t+(n+1)/2,2*i+(r+1)/2)}var hl=function(){function e(t){y(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Oo,this.indexArray=new Bo,this.segments=new Us,this.programConfigurations=new Ds(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return v(e,[{key:"populate",value:function(e,t,i,n){var r=this.layers[0],a=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));var s,l=p(e);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.feature,h=u.id,d=u.index,f=u.sourceLayerIndex,m=this.layers[0]._featureFilter.needGeometry,y=ul(c,m);if(this.layers[0]._featureFilter.filter(new oo(this.zoom),y,i)){var v=o?o.evaluate(y,{},i):void 0,g={id:h,properties:c.properties,type:c.type,sourceLayerIndex:f,index:d,geometry:m?y.geometry:ll(c,i,n),patterns:{},sortKey:v};a.push(g)}}}catch(T){l.e(T)}finally{l.f()}o&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var _=0,b=a;_<b.length;_++){var x=b[_],w=x.geometry,k=x.index,P=x.sourceLayerIndex,S=e[k].feature;this.addFeature(x,w,k,t.availableImages,i),t.featureIndex.insert(S,w,k,P,this.index)}}},{key:"update",value:function(e,t,i,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ns),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,i,n,r){var a,o=p(t);try{for(o.s();!(a=o.n()).done;){var s,l=a.value,u=p(l);try{for(u.s();!(s=u.n()).done;){var c=s.value,h=c.x,d=c.y;if(!(h<0||h>=Ws||d<0||d>=Ws)){var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),m=f.vertexLength;cl(this.layoutVertexArray,h,d,-1,-1),cl(this.layoutVertexArray,h,d,1,-1),cl(this.layoutVertexArray,h,d,1,1),cl(this.layoutVertexArray,h,d,-1,1),this.indexArray.emplaceBack(m,m+1,m+2),this.indexArray.emplaceBack(m,m+3,m+2),f.vertexLength+=4,f.primitiveLength+=2}}}catch(y){u.e(y)}finally{u.f()}}}catch(y){o.e(y)}finally{o.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},n,r)}}]),e}();function pl(e,t){for(var i=0;i<e.length;i++)if(xl(t,e[i]))return!0;for(var n=0;n<t.length;n++)if(xl(e,t[n]))return!0;return!!yl(e,t)}function dl(e,t,i){return!!xl(e,t)||!!gl(t,e,i)}function fl(e,t){if(1===e.length)return bl(t,e[0]);for(var i=0;i<t.length;i++)for(var n=t[i],r=0;r<n.length;r++)if(xl(e,n[r]))return!0;for(var a=0;a<e.length;a++)if(bl(t,e[a]))return!0;for(var o=0;o<t.length;o++)if(yl(e,t[o]))return!0;return!1}function ml(e,t,i){if(e.length>1){if(yl(e,t))return!0;for(var n=0;n<t.length;n++)if(gl(t[n],e,i))return!0}for(var r=0;r<e.length;r++)if(gl(e[r],t,i))return!0;return!1}function yl(e,t){if(0===e.length||0===t.length)return!1;for(var i=0;i<e.length-1;i++)for(var n=e[i],r=e[i+1],a=0;a<t.length-1;a++)if(vl(n,r,t[a],t[a+1]))return!0;return!1}function vl(e,t,i,n){return Ce(e,i,n)!==Ce(t,i,n)&&Ce(e,t,i)!==Ce(e,t,n)}function gl(e,t,i){var n=i*i;if(1===t.length)return e.distSqr(t[0])<n;for(var r=1;r<t.length;r++)if(_l(e,t[r-1],t[r])<n)return!0;return!1}function _l(e,t,i){var n=t.distSqr(i);if(0===n)return e.distSqr(t);var r=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/n;return e.distSqr(r<0?t:r>1?i:i.sub(t)._mult(r)._add(t))}function bl(e,t){for(var i,n,r,a=!1,o=0;o<e.length;o++)for(var s=0,l=(i=e[o]).length-1;s<i.length;l=s++)n=i[s],r=i[l],n.y>t.y!=r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(a=!a);return a}function xl(e,t){for(var i=!1,n=0,r=e.length-1;n<e.length;r=n++){var a=e[n],o=e[r];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(i=!i)}return i}function wl(e,t,i,n,r){var a,o=p(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t<=s.x&&i<=s.y&&n>=s.x&&r>=s.y)return!0}}catch(d){o.e(d)}finally{o.f()}var l=[new g(t,i),new g(t,r),new g(n,r),new g(n,i)];if(e.length>2){var u,c=p(l);try{for(c.s();!(u=c.n()).done;)if(xl(e,u.value))return!0}catch(d){c.e(d)}finally{c.f()}}for(var h=0;h<e.length-1;h++)if(kl(e[h],e[h+1],l))return!0;return!1}function kl(e,t,i){var n=i[0],r=i[2];if(e.x<n.x&&t.x<n.x||e.x>r.x&&t.x>r.x||e.y<n.y&&t.y<n.y||e.y>r.y&&t.y>r.y)return!1;var a=Ce(e,t,i[0]);return a!==Ce(e,t,i[1])||a!==Ce(e,t,i[2])||a!==Ce(e,t,i[3])}function Pl(e,t,i){var n=t.paint.get(e).value;return"constant"===n.kind?n.value:i.programConfigurations.get(t.id).getMaxValue(e)}function Sl(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Tl(e,t,i,n,r){if(!t[0]&&!t[1])return e;var a=g.convert(t)._mult(r);"viewport"===i&&a._rotate(-n);for(var o=[],s=0;s<e.length;s++)o.push(e[s].sub(a));return o}function Cl(e,t,i,n){var r=g.convert(e)._mult(n);return"viewport"===t&&r._rotate(-i),r}oa("CircleBucket",hl,{omit:["layers"]});var Ol=new xo({"circle-sort-key":new vo(Dt.layout_circle["circle-sort-key"])}),Il={paint:new xo({"circle-radius":new vo(Dt.paint_circle["circle-radius"]),"circle-color":new vo(Dt.paint_circle["circle-color"]),"circle-blur":new vo(Dt.paint_circle["circle-blur"]),"circle-opacity":new vo(Dt.paint_circle["circle-opacity"]),"circle-translate":new yo(Dt.paint_circle["circle-translate"]),"circle-translate-anchor":new yo(Dt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yo(Dt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yo(Dt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vo(Dt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vo(Dt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vo(Dt.paint_circle["circle-stroke-opacity"])}),layout:Ol},El=function(){function e(t,i){y(this,e),this.points=t,this.planes=i}return v(e,null,[{key:"fromInvProjectionMatrix",value:function(t,i,n,r){var a=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var n=K([],e,t),o=1/n[3]/i*a;return function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}(n,n,[o,o,r?1/n[3]:o,o])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var t=N([],W([],Y([],o[e[0]],o[e[1]]),Y([],o[e[2]],o[e[1]]))),i=-U(t,o[e[1]]);return t.concat(i)}));return new e(o,s)}}]),e}(),Al=function(){function e(t,i){y(this,e),this.min=t,this.max=i,this.center=V([],F([],this.min,this.max),.5)}return v(e,[{key:"quadrant",value:function(t){for(var i=[t%2==0,t<2],n=M(this.min),r=M(this.max),a=0;a<i.length;a++)n[a]=i[a]?this.min[a]:this.center[a],r[a]=i[a]?this.center[a]:this.max[a];return r[2]=this.max[2],new e(n,r)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"distanceZ",value:function(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}},{key:"getCorners",value:function(){var e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}},{key:"intersects",value:function(e){for(var t=this.getCorners(),i=!0,n=0;n<e.planes.length;n++){for(var r=e.planes[n],a=0,o=0;o<t.length;o++)a+=U(r,t[o])+r[3]>=0;if(0===a)return 0;a!==t.length&&(i=!1)}if(i)return 2;for(var s=0;s<3;s++){for(var l=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=0;c<e.points.length;c++){var h=e.points[c][s]-this.min[s];l=Math.min(l,h),u=Math.max(u,h)}if(u<0||l>this.max[s]-this.min[s])return 0}return 1}}]),e}();function Ml(e,t,i,n,r,a,o,s,l){if(a&&e.queryGeometry.isAboveHorizon)return!1;a&&(l*=e.pixelToTileUnitsFactor);var u,c=p(t);try{for(c.s();!(u=c.n()).done;){var h,d=u.value,f=p(d);try{var m=function(){var t=h.value,u=t.add(s),c=r&&i.elevation?i.elevation.exaggeration()*r.getElevationAt(u.x,u.y,!0):0,p=a?u:Dl(u,c,n),d=a?e.tilespaceRays.map((function(e){return Ll(e,c)})):e.queryGeometry.screenGeometry,f=K([],[t.x,t.y,c,1],n);if(!o&&a?l*=f[3]/i.cameraToCenterDistance:o&&!a&&(l*=i.cameraToCenterDistance/f[3]),dl(d,p,l))return{v:!0}};for(f.s();!(h=f.n()).done;){var y=m();if("object"===typeof y)return y.v}}catch(v){f.e(v)}finally{f.f()}}}catch(v){c.e(v)}finally{c.f()}return!1}function Dl(e,t,i){var n=K([],[e.x,e.y,t,1],i);return new g(n[0]/n[3],n[1]/n[3])}var jl=j(0,0,0),Fl=j(0,0,1);function Ll(e,t){var i=A();return jl[2]=t,e.intersectsPlane(jl,Fl,i),new g(i[0],i[1])}var Rl=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i)}(hl);function zl(e,t,i,n){var r=t.width,a=t.height;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==r*a*i)throw new RangeError("mismatched image size")}else n=new Uint8Array(r*a*i);return e.width=r,e.height=a,e.data=n,e}function Vl(e,t,i){var n=t.width,r=t.height;if(n!==e.width||r!==e.height){var a=zl({},{width:n,height:r},i);Bl(e,a,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,n),height:Math.min(e.height,r)},i),e.width=n,e.height=r,e.data=a.data}}function Bl(e,t,i,n,r,a){if(0===r.width||0===r.height)return t;if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,l=0;l<r.height;l++)for(var u=((i.y+l)*e.width+i.x)*a,c=((n.y+l)*t.width+n.x)*a,h=0;h<r.width*a;h++)s[c+h]=o[u+h];return t}oa("HeatmapBucket",Rl,{omit:["layers"]});var Nl=function(){function e(t,i){y(this,e),zl(this,t,1,i)}return v(e,[{key:"resize",value:function(e){Vl(this,e,1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,i,n,r){Bl(e,t,i,n,r,1)}}]),e}(),Ul=function(){function e(t,i){y(this,e),zl(this,t,4,i)}return v(e,[{key:"resize",value:function(e){Vl(this,e,4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,i,n,r){Bl(e,t,i,n,r,4)}}]),e}();oa("AlphaImage",Nl),oa("RGBAImage",Ul);var Wl={paint:new xo({"heatmap-radius":new vo(Dt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vo(Dt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yo(Dt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bo(Dt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yo(Dt.paint_heatmap["heatmap-opacity"])})};function Gl(e){var t={},i=e.resolution||256,n=e.clips?e.clips.length:1,r=e.image||new Ul({width:i,height:n}),a=function(i,n,a){t[e.evaluationKey]=a;var o=e.expression.evaluate(t);r.data[i+n+0]=Math.floor(255*o.r/o.a),r.data[i+n+1]=Math.floor(255*o.g/o.a),r.data[i+n+2]=Math.floor(255*o.b/o.a),r.data[i+n+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<n;++o,s+=4*i)for(var l=0,u=0;l<i;l++,u+=4){var c=l/(i-1),h=e.clips[o];a(s,u,h.start*(1-c)+h.end*c)}else for(var p=0,d=0;p<i;p++,d+=4)a(0,d,p/(i-1));return r}var Hl={paint:new xo({"hillshade-illumination-direction":new yo(Dt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yo(Dt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yo(Dt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yo(Dt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yo(Dt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yo(Dt.paint_hillshade["hillshade-accent-color"])})},Xl=To([{name:"a_pos",components:2,type:"Int16"}],4).members,Yl=Zl,ql=Zl;function Zl(e,t,i){i=i||2;var n,r,a,o,s,l,u,c=t&&t.length,h=c?t[0]*i:e.length,p=Kl(e,0,h,i,!0),d=[];if(!p||p.next===p.prev)return d;if(c&&(p=function(e,t,i,n){var r,a,o,s=[];for(r=0,a=t.length;r<a;r++)(o=Kl(e,t[r]*n,r<a-1?t[r+1]*n:e.length,n,!1))===o.next&&(o.steiner=!0),s.push(su(o));for(s.sort(nu),r=0;r<s.length;r++)i=$l(i=ru(s[r],i),i.next);return i}(e,t,p,i)),e.length>80*i){n=a=e[0],r=o=e[1];for(var f=i;f<h;f+=i)(s=e[f])<n&&(n=s),(l=e[f+1])<r&&(r=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-n,o-r))?1/u:0}return Jl(p,d,i,n,r,u),d}function Kl(e,t,i,n,r){var a,o;if(r===bu(e,t,i,n)>0)for(a=t;a<i;a+=n)o=vu(a,e[a],e[a+1],o);else for(a=i-n;a>=t;a-=n)o=vu(a,e[a],e[a+1],o);return o&&hu(o,o.next)&&(gu(o),o=o.next),o}function $l(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!hu(n,n.next)&&0!==cu(n.prev,n,n.next))n=n.next;else{if(gu(n),(n=t=n.prev)===n.next)break;i=!0}}while(i||n!==t);return t}function Jl(e,t,i,n,r,a,o){if(e){!o&&a&&function(e,t,i,n){var r=e;do{null===r.z&&(r.z=ou(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,i,n,r,a,o,s,l,u=1;do{for(i=e,e=null,a=null,o=0;i;){for(o++,n=i,s=0,t=0;t<u&&(s++,n=n.nextZ);t++);for(l=u;s>0||l>0&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,s--):(r=n,n=n.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;i=n}a.nextZ=null,u*=2}while(o>1)}(r)}(e,n,r,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?eu(e,n,r,a):Ql(e))t.push(s.i/i),t.push(e.i/i),t.push(l.i/i),gu(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?Jl(e=tu($l(e),t,i),t,i,n,r,a,2):2===o&&iu(e,t,i,n,r,a):Jl($l(e),t,i,n,r,a,1);break}}}function Ql(e){var t=e.prev,i=e,n=e.next;if(cu(t,i,n)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(lu(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&cu(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function eu(e,t,i,n){var r=e.prev,a=e,o=e.next;if(cu(r,a,o)>=0)return!1;for(var s=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,l=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,u=ou(r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,t,i,n),c=ou(s,l,t,i,n),h=e.prevZ,p=e.nextZ;h&&h.z>=u&&p&&p.z<=c;){if(h!==e.prev&&h!==e.next&&lu(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&cu(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==e.prev&&p!==e.next&&lu(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&cu(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=u;){if(h!==e.prev&&h!==e.next&&lu(r.x,r.y,a.x,a.y,o.x,o.y,h.x,h.y)&&cu(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=c;){if(p!==e.prev&&p!==e.next&&lu(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&cu(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function tu(e,t,i){var n=e;do{var r=n.prev,a=n.next.next;!hu(r,a)&&pu(r,n,n.next,a)&&mu(r,a)&&mu(a,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(a.i/i),gu(n),gu(n.next),n=e=a),n=n.next}while(n!==e);return $l(n)}function iu(e,t,i,n,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&uu(o,s)){var l=yu(o,s);return o=$l(o,o.next),l=$l(l,l.next),Jl(o,t,i,n,r,a),void Jl(l,t,i,n,r,a)}s=s.next}o=o.next}while(o!==e)}function nu(e,t){return e.x-t.x}function ru(e,t){var i=function(e,t){var i,n=t,r=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>o){if(o=s,s===r){if(a===n.y)return n;if(a===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!i)return null;if(r===o)return i;var l,u=i,c=i.x,h=i.y,p=1/0;n=i;do{r>=n.x&&n.x>=c&&r!==n.x&&lu(a<h?r:o,a,c,h,a<h?o:r,a,n.x,n.y)&&(l=Math.abs(a-n.y)/(r-n.x),mu(n,e)&&(l<p||l===p&&(n.x>i.x||n.x===i.x&&au(i,n)))&&(i=n,p=l)),n=n.next}while(n!==u);return i}(e,t);if(!i)return t;var n=yu(i,e),r=$l(i,i.next);return $l(n,n.next),t===i?r:t}function au(e,t){return cu(e.prev,e,t.prev)<0&&cu(t.next,e,e.next)<0}function ou(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function su(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function lu(e,t,i,n,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(i-o)*(t-s)>=0&&(i-o)*(a-s)-(r-o)*(n-s)>=0}function uu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&pu(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(mu(e,t)&&mu(t,e)&&function(e,t){var i=e,n=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)&&(cu(e.prev,e,t.prev)||cu(e,t.prev,t))||hu(e,t)&&cu(e.prev,e,e.next)>0&&cu(t.prev,t,t.next)>0)}function cu(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function hu(e,t){return e.x===t.x&&e.y===t.y}function pu(e,t,i,n){var r=fu(cu(e,t,i)),a=fu(cu(e,t,n)),o=fu(cu(i,n,e)),s=fu(cu(i,n,t));return r!==a&&o!==s||!(0!==r||!du(e,i,t))||!(0!==a||!du(e,n,t))||!(0!==o||!du(i,e,n))||!(0!==s||!du(i,t,n))}function du(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function fu(e){return e>0?1:e<0?-1:0}function mu(e,t){return cu(e.prev,e,e.next)<0?cu(e,t,e.next)>=0&&cu(e,e.prev,t)>=0:cu(e,t,e.prev)<0||cu(e,e.next,t)<0}function yu(e,t){var i=new _u(e.i,e.x,e.y),n=new _u(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function vu(e,t,i,n){var r=new _u(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function gu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _u(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bu(e,t,i,n){for(var r=0,a=t,o=i-n;a<i;a+=n)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}function xu(e,t,i,n,r){wu(e,t,i||0,n||e.length-1,r||Pu)}function wu(e,t,i,n,r){for(;n>i;){if(n-i>600){var a=n-i+1,o=t-i+1,s=Math.log(a),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);wu(e,t,Math.max(i,Math.floor(t-o*l/a+u)),Math.min(n,Math.floor(t+(a-o)*l/a+u)),r)}var c=e[t],h=i,p=n;for(ku(e,i,t),r(e[n],c)>0&&ku(e,i,n);h<p;){for(ku(e,h,p),h++,p--;r(e[h],c)<0;)h++;for(;r(e[p],c)>0;)p--}0===r(e[i],c)?ku(e,i,p):ku(e,++p,n),p<=t&&(i=p+1),t<=p&&(n=p-1)}}function ku(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function Pu(e,t){return e<t?-1:e>t?1:0}function Su(e,t){var i=e.length;if(i<=1)return[e];for(var n,r,a=[],o=0;o<i;o++){var s=Oe(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===r&&(r=s<0),r===s<0?(n&&a.push(n),n=[e[o]]):n.push(e[o]))}if(n&&a.push(n),t>1)for(var l=0;l<a.length;l++)a[l].length<=t||(xu(a[l],t,1,a[l].length-1,Tu),a[l]=a[l].slice(0,t));return a}function Tu(e,t){return t.area-e.area}function Cu(e,t,i){var n,r=i.patternDependencies,a=!1,o=p(t);try{for(o.s();!(n=o.n()).done;){var s=n.value.paint.get("".concat(e,"-pattern"));s.isConstant()||(a=!0);var l=s.constantOr(null);l&&(a=!0,r[l.to]=!0,r[l.from]=!0)}}catch(u){o.e(u)}finally{o.f()}return a}function Ou(e,t,i,n,r){var a,o=r.patternDependencies,s=p(t);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.paint.get("".concat(e,"-pattern")).value;if("constant"!==u.kind){var c=u.evaluate({zoom:n-1},i,{},r.availableImages),h=u.evaluate({zoom:n},i,{},r.availableImages),d=u.evaluate({zoom:n+1},i,{},r.availableImages);c=c&&c.name?c.name:c,h=h&&h.name?h.name:h,d=d&&d.name?d.name:d,o[c]=!0,o[h]=!0,o[d]=!0,i.patterns[l.id]={min:c,mid:h,max:d}}}}catch(f){s.e(f)}finally{s.f()}return i}Zl.deviation=function(e,t,i,n){var r=t&&t.length,a=Math.abs(bu(e,0,r?t[0]*i:e.length,i));if(r)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(bu(e,t[o]*i,o<s-1?t[o+1]*i:e.length,i));var l=0;for(o=0;o<n.length;o+=3){var u=n[o]*i,c=n[o+1]*i,h=n[o+2]*i;l+=Math.abs((e[u]-e[h])*(e[c+1]-e[u+1])-(e[u]-e[c])*(e[h+1]-e[u+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},Zl.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},n=0,r=0;r<e.length;r++){for(var a=0;a<e[r].length;a++)for(var o=0;o<t;o++)i.vertices.push(e[r][a][o]);r>0&&i.holes.push(n+=e[r-1].length)}return i},Yl.default=ql;var Iu=function(){function e(t){y(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Oo,this.indexArray=new Bo,this.indexArray2=new Yo,this.programConfigurations=new Ds(t.layers,t.zoom),this.segments=new Us,this.segments2=new Us,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return v(e,[{key:"populate",value:function(e,t,i,n){this.hasPattern=Cu("fill",this.layers,t);var r,a=this.layers[0].layout.get("fill-sort-key"),o=[],s=p(e);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=l.feature,c=l.id,h=l.index,d=l.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,m=ul(u,f);if(this.layers[0]._featureFilter.filter(new oo(this.zoom),m,i)){var y=a?a.evaluate(m,{},i,t.availableImages):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:d,index:h,geometry:f?m.geometry:ll(u,i,n),patterns:{},sortKey:y};o.push(v)}}}catch(S){s.e(S)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var g=0,_=o;g<_.length;g++){var b=_[g],x=b.geometry,w=b.index,k=b.sourceLayerIndex;if(this.hasPattern){var P=Ou("fill",this.layers,b,this.zoom,t);this.patternFeatures.push(P)}else this.addFeature(b,x,w,i,{},t.availableImages);t.featureIndex.insert(e[w].feature,x,w,k,this.index)}}},{key:"update",value:function(e,t,i,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i,n)}},{key:"addFeatures",value:function(e,t,i,n){var r,a=p(this.patternFeatures);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.addFeature(o,o.geometry,o.index,t,i,n)}}catch(s){a.e(s)}finally{a.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Xl),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,i,n,r){var a,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=p(Su(t,500));try{for(s.s();!(a=s.n()).done;){var l,u=a.value,c=0,h=p(u);try{for(h.s();!(l=h.n()).done;)c+=l.value.length}catch(S){h.e(S)}finally{h.f()}var d,f=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),m=f.vertexLength,y=[],v=[],g=p(u);try{for(g.s();!(d=g.n()).done;){var _=d.value;if(0!==_.length){_!==u[0]&&v.push(y.length/2);var b=this.segments2.prepareSegment(_.length,this.layoutVertexArray,this.indexArray2),x=b.vertexLength;this.layoutVertexArray.emplaceBack(_[0].x,_[0].y),this.indexArray2.emplaceBack(x+_.length-1,x),y.push(_[0].x),y.push(_[0].y);for(var w=1;w<_.length;w++)this.layoutVertexArray.emplaceBack(_[w].x,_[w].y),this.indexArray2.emplaceBack(x+w-1,x+w),y.push(_[w].x),y.push(_[w].y);b.vertexLength+=_.length,b.primitiveLength+=_.length}}}catch(S){g.e(S)}finally{g.f()}for(var k=Yl(y,v),P=0;P<k.length;P+=3)this.indexArray.emplaceBack(m+k[P],m+k[P+1],m+k[P+2]);f.vertexLength+=c,f.primitiveLength+=k.length/3}}catch(S){s.e(S)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,r,o,n)}}]),e}();oa("FillBucket",Iu,{omit:["layers","patternFeatures"]});var Eu=new xo({"fill-sort-key":new vo(Dt.layout_fill["fill-sort-key"])}),Au={paint:new xo({"fill-antialias":new yo(Dt.paint_fill["fill-antialias"]),"fill-opacity":new vo(Dt.paint_fill["fill-opacity"]),"fill-color":new vo(Dt.paint_fill["fill-color"]),"fill-outline-color":new vo(Dt.paint_fill["fill-outline-color"]),"fill-translate":new yo(Dt.paint_fill["fill-translate"]),"fill-translate-anchor":new yo(Dt.paint_fill["fill-translate-anchor"]),"fill-pattern":new go(Dt.paint_fill["fill-pattern"])}),layout:Eu},Mu=To([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Du=To([{name:"a_centroid_pos",components:2,type:"Uint16"}]),ju=Mu.members,Fu=Lu;function Lu(e,t,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=r,e.readFields(Ru,this,t)}function Ru(e,t,i){1==e?t.id=i.readVarint():2==e?function(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var n=t._keys[e.readVarint()],r=t._values[e.readVarint()];t.properties[n]=r}}(i,t):3==e?t.type=i.readVarint():4==e&&(t._geometry=i.pos)}function zu(e){for(var t,i,n=0,r=0,a=e.length,o=a-1;r<a;o=r++)n+=((i=e[o]).x-(t=e[r]).x)*(t.y+i.y);return n}Lu.types=["Unknown","Point","LineString","Polygon"],Lu.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,n=1,r=0,a=0,o=0,s=[];e.pos<i;){if(r<=0){var l=e.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)a+=e.readSVarint(),o+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new g(a,o));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Lu.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,n=0,r=0,a=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(n<=0){var c=e.readVarint();i=7&c,n=c>>3}if(n--,1===i||2===i)(r+=e.readSVarint())<o&&(o=r),r>s&&(s=r),(a+=e.readSVarint())<l&&(l=a),a>u&&(u=a);else if(7!==i)throw new Error("unknown command "+i)}return[o,l,s,u]},Lu.prototype.toGeoJSON=function(e,t,i){var n,r,a=this.extent*Math.pow(2,i),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=Lu.types[this.type];function c(e){for(var t=0;t<e.length;t++){var i=e[t];e[t]=[360*(i.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(n=0;n<l.length;n++)h[n]=l[n][0];c(l=h);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var i,n,r=[],a=0;a<t;a++){var o=zu(e[a]);0!==o&&(void 0===n&&(n=o<0),n===o<0?(i&&r.push(i),i=[e[a]]):i.push(e[a]))}return i&&r.push(i),r}(l),n=0;n<l.length;n++)for(r=0;r<l[n].length;r++)c(l[n][r])}1===l.length?l=l[0]:u="Multi"+u;var p={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var Vu=Bu;function Bu(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Nu,this,t),this.length=this._features.length}function Nu(e,t,i){15===e?t.version=i.readVarint():1===e?t.name=i.readString():5===e?t.extent=i.readVarint():2===e?t._features.push(i.pos):3===e?t._keys.push(i.readString()):4===e&&t._values.push(function(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(i))}function Uu(e,t,i){if(3===e){var n=new Vu(i,i.readVarint()+i.pos);n.length&&(t[n.name]=n)}}Bu.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Fu(this._pbf,t,this.extent,this._keys,this._values)};var Wu={VectorTile:function(e,t){this.layers=e.readFields(Uu,{},t)},VectorTileFeature:Fu,VectorTileLayer:Vu},Gu=Wu.VectorTileFeature.types,Hu=Math.pow(2,13);function Xu(e,t,i,n,r,a,o,s){e.emplaceBack((t<<1)+o,(i<<1)+a,(Math.floor(n*Hu)<<1)+r,Math.round(s))}var Yu=function(){function e(){y(this,e),this.acc=new g(0,0),this.polyCount=[]}return v(e,[{key:"startRing",value:function(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new g(e.x,e.y),this.max=new g(e.x,e.y))}},{key:"append",value:function(e,t){this.currentPolyCount.edges++,this.acc._add(e);var i=!!this.borders,n=this.min,r=this.max;e.x<n.x?(n.x=e.x,i=!0):e.x>r.x&&(r.x=e.x,i=!0),e.y<n.y?(n.y=e.y,i=!0):e.y>r.y&&(r.y=e.y,i=!0),((0===e.x||e.x===Ws)&&e.x===t.x)!=((0===e.y||e.y===Ws)&&e.y===t.y)&&this.processBorderOverlap(e,t),i&&this.checkBorderIntersection(e,t)}},{key:"checkBorderIntersection",value:function(e,t){t.x<0!=e.x<0&&this.addBorderIntersection(0,$i(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Ws!=e.x>Ws&&this.addBorderIntersection(1,$i(t.y,e.y,(Ws-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,$i(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Ws!=e.y>Ws&&this.addBorderIntersection(3,$i(t.x,e.x,(Ws-t.y)/(e.y-t.y)))}},{key:"addBorderIntersection",value:function(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var i=this.borders[e];t<i[0]&&(i[0]=t),t>i[1]&&(i[1]=t)}},{key:"processBorderOverlap",value:function(e,t){if(e.x===t.x){if(e.y===t.y)return;var i=0===e.x?0:1;this.addBorderIntersection(i,t.y),this.addBorderIntersection(i,e.y)}else{var n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}},{key:"centroid",value:function(){var e=this.polyCount.reduce((function(e,t){return e+t.edges}),0);return 0!==e?this.acc.div(e)._round():new g(0,0)}},{key:"span",value:function(){return new g(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(e,t){return e+ +(t[0]!==Number.MAX_VALUE)}),0)}}]),e}(),qu=function(){function e(t){y(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Io,this.centroidVertexArray=new ls,this.indexArray=new Bo,this.programConfigurations=new Ds(t.layers,t.zoom),this.segments=new Us,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.enableTerrain=t.enableTerrain}return v(e,[{key:"populate",value:function(e,t,i,n){this.features=[],this.hasPattern=Cu("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(e){var t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Ws/(1<<e.z)}(i);var r,a=p(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.feature,l=o.id,u=o.index,c=o.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d=ul(s,h);if(this.layers[0]._featureFilter.filter(new oo(this.zoom),d,i)){var f={id:l,sourceLayerIndex:c,index:u,geometry:h?d.geometry:ll(s,i,n),properties:s.properties,type:s.type,patterns:{}},m=this.layoutVertexArray.length;this.hasPattern?this.features.push(Ou("fill-extrusion",this.layers,f,this.zoom,t)):this.addFeature(f,f.geometry,u,i,{},t.availableImages),t.featureIndex.insert(s,f.geometry,u,c,this.index,m)}}}catch(y){a.e(y)}finally{a.f()}this.sortBorders()}},{key:"addFeatures",value:function(e,t,i,n){var r,a=p(this.features);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.geometry;this.addFeature(o,s,o.index,t,i,n)}}catch(l){a.e(l)}finally{a.f()}this.sortBorders()}},{key:"update",value:function(e,t,i,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ju),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"uploadCentroid",value:function(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Du.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,i,n,r,a){var o,s,l=this.enableTerrain?new Yu:null,u=p(Su(t,500));try{for(u.s();!(o=u.n()).done;){var c=o.value,h=0,d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(!(0===c.length||(s=c[0]).every((function(e){return e.x<=0}))||s.every((function(e){return e.x>=Ws}))||s.every((function(e){return e.y<=0}))||s.every((function(e){return e.y>=Ws})))){for(var f=0;f<c.length;f++){var m=c[f];if(0!==m.length){h+=m.length;var y=0;l&&l.startRing(m[0]);for(var v=0;v<m.length;v++){var g=m[v];if(v>=1){var _=m[v-1];if(!Zu(g,_)){l&&l.append(g,_),d.vertexLength+4>Us.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var b=g.sub(_)._perp(),x=b.x/(Math.abs(b.x)+Math.abs(b.y)),w=b.y>0?1:0,k=_.dist(g);y+k>32768&&(y=0),Xu(this.layoutVertexArray,g.x,g.y,x,w,0,0,y),Xu(this.layoutVertexArray,g.x,g.y,x,w,0,1,y),y+=k,Xu(this.layoutVertexArray,_.x,_.y,x,w,0,0,y),Xu(this.layoutVertexArray,_.x,_.y,x,w,0,1,y);var P=d.vertexLength;this.indexArray.emplaceBack(P,P+2,P+1),this.indexArray.emplaceBack(P+1,P+2,P+3),d.vertexLength+=4,d.primitiveLength+=2}}}}}if(d.vertexLength+h>Us.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(h,this.layoutVertexArray,this.indexArray)),"Polygon"===Gu[e.type]){for(var S=[],T=[],C=d.vertexLength,O=0;O<c.length;O++){var I=c[O];if(0!==I.length){I!==c[0]&&T.push(S.length/2);for(var E=0;E<I.length;E++){var A=I[E];Xu(this.layoutVertexArray,A.x,A.y,0,0,1,1,0),S.push(A.x),S.push(A.y),l&&l.currentPolyCount.top++}}}for(var M=Yl(S,T),D=0;D<M.length;D+=3)this.indexArray.emplaceBack(C+M[D],C+M[D+2],C+M[D+1]);d.primitiveLength+=M.length/3,d.vertexLength+=h}}}}catch(R){u.e(R)}finally{u.f()}if(l&&l.polyCount.length>0){if(l.borders){l.vertexArrayOffset=this.centroidVertexArray.length;for(var j=l.borders,F=this.featuresOnBorder.push(l)-1,L=0;L<4;L++)j[L][0]!==Number.MAX_VALUE&&this.borders[L].push(F)}this.encodeCentroid(l.borders?void 0:l.centroid(),l)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,r,a,n)}},{key:"sortBorders",value:function(){for(var e=this,t=function(t){e.borders[t].sort((function(i,n){return e.featuresOnBorder[i].borders[t][0]-e.featuresOnBorder[n].borders[t][0]}))},i=0;i<4;i++)t(i)}},{key:"encodeCentroid",value:function(e,t){var i,n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){var a=t.span()._mult(this.tileToMeter);i=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(a.x/10)),n=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(a.y/10))}else i=Math.ceil(7*(e.x+450)),n=0;else i=0,n=+r;var o,s=r?this.centroidVertexArray.length:t.vertexArrayOffset,l=p(t.polyCount);try{for(l.s();!(o=l.n()).done;){var u=o.value;r&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*u.edges+u.top);for(var c=0;c<2*u.edges;c++)this.centroidVertexArray.emplace(s++,0,n),this.centroidVertexArray.emplace(s++,i,n);for(var h=0;h<u.top;h++)this.centroidVertexArray.emplace(s++,i,n)}}catch(d){l.e(d)}finally{l.f()}}}]),e}();function Zu(e,t){return e.x===t.x&&(e.x<0||e.x>Ws)||e.y===t.y&&(e.y<0||e.y>Ws)}oa("FillExtrusionBucket",qu,{omit:["layers","features"]}),oa("PartMetadata",Yu);var Ku={paint:new xo({"fill-extrusion-opacity":new yo(Dt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vo(Dt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yo(Dt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yo(Dt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new go(Dt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vo(Dt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vo(Dt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yo(Dt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function $u(e,t){return e.x*t.x+e.y*t.y}function Ju(e,t){if(1===e.length){for(var i,n=0,r=t[n++];!i||r.equals(i);)if(!(i=t[n++]))return 1/0;for(;n<t.length;n++){var a=t[n],o=e[0],s=i.sub(r),l=a.sub(r),u=o.sub(r),c=$u(s,s),h=$u(s,l),d=$u(l,l),f=$u(u,s),m=$u(u,l),y=c*d-h*h,v=(d*f-h*m)/y,g=(c*m-h*f)/y,_=r.z*(1-v-g)+i.z*v+a.z*g;if(isFinite(_))return _}return 1/0}var b,x=1/0,w=p(t);try{for(w.s();!(b=w.n()).done;){var k=b.value;x=Math.min(x,k.z)}}catch(P){w.e(P)}finally{w.f()}return x}function Qu(e){var t=new g(e[0],e[1]);return t.z=e[2],t}function ec(e,t,i,n,r,a,o,s){var l=o*r.getElevationAt(e,t,!0,!0),u=0!==a[0],c=u?0===a[1]?o*(a[0]/7-450):o*function(e,t,i){var n=Math.floor(t[0]/8),r=Math.floor(t[1]/8),a=10*(t[0]-8*n),o=10*(t[1]-8*r),s=e.getElevationAt(n,r,!0,!0),l=e.getMeterToDEM(i),u=Math.floor(.5*(a*l-1)),c=Math.floor(.5*(o*l-1)),h=e.tileCoordToPixel(n,r),p=2*u+1,d=2*c+1,f=function(e,t,i,n,r){return[e.getElevationAtPixel(t,i,!0),e.getElevationAtPixel(t+r,i,!0),e.getElevationAtPixel(t,i+r,!0),e.getElevationAtPixel(t+n,i+r,!0)]}(e,h.x-u,h.y-c,p,d),m=Math.abs(f[0]-f[1]),y=Math.abs(f[2]-f[3]),v=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),g=Math.min(.25,.5*l*(m+y)/p),_=Math.min(.25,.5*l*v/d);return s+Math.max(g*a,_*o)}(r,a,s):l;return{base:l+(0===i)?-1:i,top:u?Math.max(c+n,l+i+2):l+n}}var tc=To([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,ic=To([{name:"a_packed",components:3,type:"Float32"}]).members,nc=Wu.VectorTileFeature.types,rc=Math.cos(Math.PI/180*37.5),ac=function(){function e(t){var i=this;y(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){i.gradients[e.id]={}})),this.layoutVertexArray=new Eo,this.layoutVertexArray2=new Ao,this.indexArray=new Bo,this.programConfigurations=new Ds(t.layers,t.zoom),this.segments=new Us,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return v(e,[{key:"populate",value:function(e,t,i,n){this.hasPattern=Cu("line",this.layers,t);var r,a=this.layers[0].layout.get("line-sort-key"),o=[],s=p(e);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=l.feature,c=l.id,h=l.index,d=l.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,m=ul(u,f);if(this.layers[0]._featureFilter.filter(new oo(this.zoom),m,i)){var y=a?a.evaluate(m,{},i):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:d,index:h,geometry:f?m.geometry:ll(u,i,n),patterns:{},sortKey:y};o.push(v)}}}catch(O){s.e(O)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var g=t.lineAtlas,_=t.featureIndex,b=this.addConstantDashes(g),x=0,w=o;x<w.length;x++){var k=w[x],P=k.geometry,S=k.index,T=k.sourceLayerIndex;if(b&&this.addFeatureDashes(k,g),this.hasPattern){var C=Ou("line",this.layers,k,this.zoom,t);this.patternFeatures.push(C)}else this.addFeature(k,P,S,i,g.positions,t.availableImages);_.insert(e[S].feature,P,S,T,this.index)}}},{key:"addConstantDashes",value:function(e){var t,i=!1,n=p(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"!==a.kind||"constant"!==o.kind)i=!0;else{var s=o.value,l=a.value;if(!l)continue;e.addDash(l.from,s),e.addDash(l.to,s),l.other&&e.addDash(l.other,s)}}}catch(u){n.e(u)}finally{n.f()}return i}},{key:"addFeatureDashes",value:function(e,t){var i,n=this.zoom,r=p(this.layers);try{for(r.s();!(i=r.n()).done;){var a=i.value,o=a.paint.get("line-dasharray").value,s=a.layout.get("line-cap").value;if("constant"!==o.kind||"constant"!==s.kind){var l=void 0,u=void 0,c=void 0,h=void 0,d=void 0,f=void 0;if("constant"===o.kind){var m=o.value;if(!m)continue;l=m.other||m.to,u=m.to,c=m.from}else l=o.evaluate({zoom:n-1},e),u=o.evaluate({zoom:n},e),c=o.evaluate({zoom:n+1},e);"constant"===s.kind?h=d=f=s.value:(h=s.evaluate({zoom:n-1},e),d=s.evaluate({zoom:n},e),f=s.evaluate({zoom:n+1},e)),t.addDash(l,h),t.addDash(u,d),t.addDash(c,f);var y=t.getKey(l,h),v=t.getKey(u,d),g=t.getKey(c,f);e.patterns[a.id]={min:y,mid:v,max:g}}}}catch(_){r.e(_)}finally{r.f()}}},{key:"update",value:function(e,t,i,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i,n)}},{key:"addFeatures",value:function(e,t,i,n){var r,a=p(this.patternFeatures);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.addFeature(o,o.geometry,o.index,t,i,n)}}catch(s){a.e(s)}finally{a.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ic)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,tc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,i,n,r,a){var o=this.layers[0].layout,s=o.get("line-join").evaluate(e,{}),l=o.get("line-cap").evaluate(e,{}),u=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var h,d=p(t);try{for(d.s();!(h=d.n()).done;){var f=h.value;this.addLine(f,e,s,l,u,c)}}catch(m){d.e(m)}finally{d.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,r,a,n)}},{key:"addLine",value:function(e,t,i,n,r,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===nc[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var u=0;u<l-1&&e[u].equals(e[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===i&&(r=1.05);var c,h,p,d,f,m=this.overscaling<=16?122880/(512*this.overscaling):0,y=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(c=e[l-2],f=e[u].sub(c)._unit()._perp());for(var v=u;v<l;v++)if(!(p=v===l-1?s?e[u+1]:void 0:e[v+1])||!e[v].equals(p)){f&&(d=f),c&&(h=c),c=e[v],f=p?p.sub(c)._unit()._perp():d;var g=(d=d||f).add(f);0===g.x&&0===g.y||g._unit();var _=d.x*f.x+d.y*f.y,b=g.x*f.x+g.y*f.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),k=b<rc&&h&&p,P=d.x*f.y-d.y*f.x>0;if(k&&v>u){var S=c.dist(h);if(S>2*m){var T=c.sub(c.sub(h)._mult(m/S)._round());this.updateDistance(h,T),this.addCurrentVertex(T,d,0,0,y),h=T}}var C=h&&p,O=C?i:s?"butt":n;if(C&&"round"===O&&(x<a?O="miter":x<=2&&(O="fakeround")),"miter"===O&&x>r&&(O="bevel"),"bevel"===O&&(x>2&&(O="flipbevel"),x<r&&(O="miter")),h&&this.updateDistance(h,c),"miter"===O)g._mult(x),this.addCurrentVertex(c,g,0,0,y);else if("flipbevel"===O){if(x>100)g=f.mult(-1);else{var I=x*d.add(f).mag()/d.sub(f).mag();g._perp()._mult(I*(P?-1:1))}this.addCurrentVertex(c,g,0,0,y),this.addCurrentVertex(c,g.mult(-1),0,0,y)}else if("bevel"===O||"fakeround"===O){var E=-Math.sqrt(x*x-1),A=P?E:0,M=P?0:E;if(h&&this.addCurrentVertex(c,d,A,M,y),"fakeround"===O)for(var D=Math.round(180*w/Math.PI/20),j=1;j<D;j++){var F=j/D;if(.5!==F){var L=F-.5;F+=F*L*(F-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*L*L+(.848013+_*(.215638*_-1.06021)))}var R=f.sub(d)._mult(F)._add(d)._unit()._mult(P?-1:1);this.addHalfVertex(c,R.x,R.y,!1,P,0,y)}p&&this.addCurrentVertex(c,f,-A,-M,y)}else if("butt"===O)this.addCurrentVertex(c,g,0,0,y);else if("square"===O){var z=h?1:-1;h||this.addCurrentVertex(c,g,z,z,y),this.addCurrentVertex(c,g,0,0,y),h&&this.addCurrentVertex(c,g,z,z,y)}else"round"===O&&(h&&(this.addCurrentVertex(c,d,0,0,y),this.addCurrentVertex(c,d,1,1,y,!0)),p&&(this.addCurrentVertex(c,f,-1,-1,y,!0),this.addCurrentVertex(c,f,0,0,y)));if(k&&v<l-1){var V=c.dist(p);if(V>2*m){var B=c.add(p.sub(c)._mult(m/V)._round());this.updateDistance(c,B),this.addCurrentVertex(B,f,0,0,y),c=B}}}}}},{key:"addCurrentVertex",value:function(e,t,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t.y*n-t.x,s=-t.y-t.x*n;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,a,!1,i,r),this.addHalfVertex(e,o,s,a,!0,-n,r)}},{key:"addHalfVertex",value:function(e,t,i,n,r,a,o){var s=e.x,l=e.y;this.layoutVertexArray.emplaceBack((s<<1)+(n?1:0),(l<<1)+(r?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineSoFar);var u=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),o.primitiveLength++),r?this.e2=u:this.e1=u}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();oa("LineBucket",ac,{omit:["layers","patternFeatures"]});var oc=new xo({"line-cap":new vo(Dt.layout_line["line-cap"]),"line-join":new vo(Dt.layout_line["line-join"]),"line-miter-limit":new yo(Dt.layout_line["line-miter-limit"]),"line-round-limit":new yo(Dt.layout_line["line-round-limit"]),"line-sort-key":new vo(Dt.layout_line["line-sort-key"])}),sc={paint:new xo({"line-opacity":new vo(Dt.paint_line["line-opacity"]),"line-color":new vo(Dt.paint_line["line-color"]),"line-translate":new yo(Dt.paint_line["line-translate"]),"line-translate-anchor":new yo(Dt.paint_line["line-translate-anchor"]),"line-width":new vo(Dt.paint_line["line-width"]),"line-gap-width":new vo(Dt.paint_line["line-gap-width"]),"line-offset":new vo(Dt.paint_line["line-offset"]),"line-blur":new vo(Dt.paint_line["line-blur"]),"line-dasharray":new go(Dt.paint_line["line-dasharray"]),"line-pattern":new go(Dt.paint_line["line-pattern"]),"line-gradient":new bo(Dt.paint_line["line-gradient"])}),layout:oc},lc=new(function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"possiblyEvaluate",value:function(e,t){return t=new oo(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),o(s(i.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,n,r){return t=fe({},t,{zoom:Math.floor(t.zoom)}),o(s(i.prototype),"evaluate",this).call(this,e,t,n,r)}}]),i}(vo))(sc.paint.properties["line-width"].specification);function uc(e,t){return t>0?t+2*e:e}lc.useIntegerZoom=!0;var cc=To([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"},{name:"a_z_tile_anchor",components:4,type:"Int16"}],4),hc=To([{name:"a_projected_pos",components:3,type:"Float32"}],4);To([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var pc=To([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),dc=To([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);To([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var fc=To([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),mc=To([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);To([{name:"triangle",components:3,type:"Uint16"}]),To([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),To([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),To([{type:"Float32",name:"offsetX"}]),To([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var yc=24,vc=128;function gc(e,t){var i=t.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new oo(e+1))};if("source"===i.kind)return{kind:"source"};for(var n=i.zoomStops,r=i.interpolationType,a=0;a<n.length&&n[a]<=e;)a++;for(var o=a=Math.max(0,a-1);o<n.length&&n[o]<e+1;)o++;o=Math.min(n.length-1,o);var s=n[a],l=n[o];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:l,minSize:i.evaluate(new oo(s)),maxSize:i.evaluate(new oo(l)),interpolationType:r}}function _c(e,t,i){var n=t.uSize,r=t.uSizeT,a=i.lowerSize,o=i.upperSize;return"source"===e.kind?a/vc:"composite"===e.kind?$i(a/vc,o/vc,r):n}function bc(e,t){var i=0,n=0;if("constant"===e.kind)n=e.layoutSize;else if("source"!==e.kind){var r=e.interpolationType,a=e.minZoom,o=e.maxZoom,s=r?ue(vn.interpolationFactor(r,t,a,o),0,1):0;"camera"===e.kind?n=$i(e.minSize,e.maxSize,s):i=s}return{uSizeT:i,uSize:n}}var xc=Object.freeze({__proto__:null,getSizeData:gc,evaluateSizeForFeature:_c,evaluateSizeForZoom:bc,SIZE_PACK_FACTOR:vc});function wc(e,t,i){return e.sections.forEach((function(e){e.text=function(e,t,i){var n=t.layout.get("text-transform").evaluate(i,{});return"uppercase"===n?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),ao.applyArabicShaping&&(e=ao.applyArabicShaping(e)),e}(e.text,t,i)})),e}var kc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function Pc(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function Sc(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var Tc=function(e,t,i,n,r){var a,o,s=8*r-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=i?r-1:0,p=i?-1:1,d=e[t+h];for(h+=p,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=p,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+h],h+=p,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=u}return(d?-1:1)*o*Math.pow(2,a-n)},Cc=function(e,t,i,n,r,a){var o,s,l,u=8*a-r-1,c=(1<<u)-1,h=c>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*l-1)*Math.pow(2,r),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;e[i+d]=255&s,d+=f,s/=256,r-=8);for(o=o<<r|s,u+=r;u>0;e[i+d]=255&o,d+=f,o/=256,u-=8);e[i+d-f]|=128*m},Oc=Ic;function Ic(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Ic.Varint=0,Ic.Fixed64=1,Ic.Bytes=2,Ic.Fixed32=5;var Ec=4294967296,Ac=1/Ec,Mc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Dc(e){return e.type===Ic.Bytes?e.readVarint()+e.pos:e.pos+1}function jc(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Fc(e,t,i){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=e;r--)i.buf[r+n]=i.buf[r]}function Lc(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function Rc(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function zc(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function Vc(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function Bc(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function Nc(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function Uc(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function Wc(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function Gc(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Hc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Xc(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function Yc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function qc(e,t,i){t.glyphs=[],1===e&&i.readMessage(Zc,t)}function Zc(e,t,i){if(3===e){var n=i.readMessage(Kc,{}),r=n.id,a=n.bitmap,o=n.width,s=n.height,l=n.left,u=n.top,c=n.advance;t.glyphs.push({id:r,bitmap:new Nl({width:o+6,height:s+6},a),metrics:{width:o,height:s,left:l,top:u,advance:c}})}else 4===e?t.ascender=i.readSVarint():5===e&&(t.descender=i.readSVarint())}function Kc(e,t,i){1===e?t.id=i.readVarint():2===e?t.bitmap=i.readBytes():3===e?t.width=i.readVarint():4===e?t.height=i.readVarint():5===e?t.left=i.readSVarint():6===e?t.top=i.readSVarint():7===e&&(t.advance=i.readVarint())}function $c(e){var t,i=0,n=0,r=p(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;i+=a.w*a.h,n=Math.max(n,a.w)}}catch(y){r.e(y)}finally{r.f()}e.sort((function(e,t){return t.h-e.h}));var o,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),n),h:1/0}],l=0,u=0,c=p(e);try{for(c.s();!(o=c.n()).done;)for(var h=o.value,d=s.length-1;d>=0;d--){var f=s[d];if(!(h.w>f.w||h.h>f.h)){if(h.x=f.x,h.y=f.y,u=Math.max(u,h.y+h.h),l=Math.max(l,h.x+h.w),h.w===f.w&&h.h===f.h){var m=s.pop();d<s.length&&(s[d]=m)}else h.h===f.h?(f.x+=h.w,f.w-=h.w):h.w===f.w?(f.y+=h.h,f.h-=h.h):(s.push({x:f.x+h.w,y:f.y,w:f.w-h.w,h:h.h}),f.y+=h.h,f.h-=h.h);break}}}catch(y){c.e(y)}finally{c.f()}return{w:l,h:u,fill:i/(l*u)||0}}Ic.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,a=this.pos;this.type=7&n,e(r,t,this),this.pos===a&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Hc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Yc(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Hc(this.buf,this.pos)+Hc(this.buf,this.pos+4)*Ec;return this.pos+=8,e},readSFixed64:function(){var e=Hc(this.buf,this.pos)+Yc(this.buf,this.pos+4)*Ec;return this.pos+=8,e},readFloat:function(){var e=Tc(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Tc(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,n=this.buf;return t=127&(i=n[this.pos++]),i<128?t:(t|=(127&(i=n[this.pos++]))<<7,i<128?t:(t|=(127&(i=n[this.pos++]))<<14,i<128?t:(t|=(127&(i=n[this.pos++]))<<21,i<128?t:function(e,t,i){var n,r,a=i.buf;if(n=(112&(r=a[i.pos++]))>>4,r<128)return jc(e,n,t);if(n|=(127&(r=a[i.pos++]))<<3,r<128)return jc(e,n,t);if(n|=(127&(r=a[i.pos++]))<<10,r<128)return jc(e,n,t);if(n|=(127&(r=a[i.pos++]))<<17,r<128)return jc(e,n,t);if(n|=(127&(r=a[i.pos++]))<<24,r<128)return jc(e,n,t);if(n|=(1&(r=a[i.pos++]))<<31,r<128)return jc(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Mc?function(e,t,i){return Mc.decode(e.subarray(t,i))}(this.buf,t,e):function(e,t,i){for(var n="",r=t;r<i;){var a,o,s,l=e[r],u=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c>i)break;1===c?l<128&&(u=l):2===c?128==(192&(a=e[r+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(o=e[r+2],128==(192&(a=e[r+1]))&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[r+2],s=e[r+3],128==(192&(a=e[r+1]))&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),r+=c}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Ic.Bytes)return e.push(this.readVarint(t));var i=Dc(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Ic.Bytes)return e.push(this.readSVarint());var t=Dc(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Ic.Bytes)return e.push(this.readBoolean());var t=Dc(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Ic.Bytes)return e.push(this.readFloat());var t=Dc(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Ic.Bytes)return e.push(this.readDouble());var t=Dc(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Ic.Bytes)return e.push(this.readFixed32());var t=Dc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Ic.Bytes)return e.push(this.readSFixed32());var t=Dc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Ic.Bytes)return e.push(this.readFixed64());var t=Dc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Ic.Bytes)return e.push(this.readSFixed64());var t=Dc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Ic.Varint)for(;this.buf[this.pos++]>127;);else if(t===Ic.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ic.Fixed32)this.pos+=4;else{if(t!==Ic.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Xc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Xc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Xc(this.buf,-1&e,this.pos),Xc(this.buf,Math.floor(e*Ac),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Xc(this.buf,-1&e,this.pos),Xc(this.buf,Math.floor(e*Ac),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var i,n;if(e>=0?(i=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,i.buf[i.pos]=127&(e>>>=7)}(i,0,t),function(e,t){var i=(7&e)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,i){for(var n,r,a=0;a<t.length;a++){if((n=t.charCodeAt(a))>55295&&n<57344){if(!r){n>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):r=n;continue}if(n<56320){e[i++]=239,e[i++]=191,e[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(e[i++]=239,e[i++]=191,e[i++]=189,r=null);n<128?e[i++]=n:(n<2048?e[i++]=n>>6|192:(n<65536?e[i++]=n>>12|224:(e[i++]=n>>18|240,e[i++]=n>>12&63|128),e[i++]=n>>6&63|128),e[i++]=63&n|128)}return i}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&Fc(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Cc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Cc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var n=this.pos-i;n>=128&&Fc(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,i){this.writeTag(e,Ic.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Lc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Rc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Bc,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,zc,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Vc,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Nc,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Uc,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Wc,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Gc,t)},writeBytesField:function(e,t){this.writeTag(e,Ic.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Ic.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Ic.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Ic.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Ic.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Ic.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Ic.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Ic.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Ic.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Ic.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Jc=function(){function e(t,i){var n=i.pixelRatio,r=i.version,a=i.stretchX,o=i.stretchY,s=i.content;y(this,e),this.paddedRect=t,this.pixelRatio=n,this.stretchX=a,this.stretchY=o,this.content=s,this.version=r}return v(e,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),e}(),Qc=function(){function e(t,i){y(this,e);var n={},r={};this.haveRenderCallbacks=[];var a=[];this.addImages(t,n,a),this.addImages(i,r,a);var o=$c(a),s=o.w,l=o.h,u=new Ul({width:s||1,height:l||1});for(var c in t){var h=t[c],p=n[c].paddedRect;Ul.copy(h.data,u,{x:0,y:0},{x:p.x+1,y:p.y+1},h.data)}for(var d in i){var f=i[d],m=r[d].paddedRect,v=m.x+1,g=m.y+1,_=f.data.width,b=f.data.height;Ul.copy(f.data,u,{x:0,y:0},{x:v,y:g},f.data),Ul.copy(f.data,u,{x:0,y:b-1},{x:v,y:g-1},{width:_,height:1}),Ul.copy(f.data,u,{x:0,y:0},{x:v,y:g+b},{width:_,height:1}),Ul.copy(f.data,u,{x:_-1,y:0},{x:v-1,y:g},{width:1,height:b}),Ul.copy(f.data,u,{x:0,y:0},{x:v+_,y:g},{width:1,height:b})}this.image=u,this.iconPositions=n,this.patternPositions=r}return v(e,[{key:"addImages",value:function(e,t,i){for(var n in e){var r=e[n],a={x:0,y:0,w:r.data.width+2,h:r.data.height+2};i.push(a),t[n]=new Jc(a,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}},{key:"patchUpdatedImages",value:function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)}},{key:"patchUpdatedImage",value:function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var n=h(e.tl,2),r=n[0],a=n[1];i.update(t.data,void 0,{x:r,y:a})}}}]),e}();oa("ImagePosition",Jc),oa("ImageAtlas",Qc);var eh={horizontal:1,vertical:2,horizontalOnly:3},th=function(){function e(){y(this,e),this.scale=1,this.fontStack="",this.imageName=null}return v(e,null,[{key:"forText",value:function(t,i){var n=new e;return n.scale=t||1,n.fontStack=i,n}},{key:"forImage",value:function(t){var i=new e;return i.imageName=t,i}}]),e}(),ih=function(){function e(){y(this,e),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return v(e,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(e){return this.sections[this.sectionIndex[e]]}},{key:"getSections",value:function(){return this.sections}},{key:"getSectionIndex",value:function(e){return this.sectionIndex[e]}},{key:"getCharCode",value:function(e){return this.text.charCodeAt(e)}},{key:"verticalizePunctuation",value:function(e){this.text=function(e,t){for(var i="",n=0;n<e.length;n++){var r=e.charCodeAt(n+1)||null,a=e.charCodeAt(n-1)||null;i+=!t&&(r&&Ga(r)&&!kc[e[n+1]]||a&&Ga(a)&&!kc[e[n-1]])||!kc[e[n]]?e[n]:kc[e[n]]}return i}(this.text,e)}},{key:"trim",value:function(){for(var e=0,t=0;t<this.text.length&&rh[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,n=this.text.length-1;n>=0&&n>=e&&rh[this.text.charCodeAt(n)];n--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)}},{key:"substring",value:function(t,i){var n=new e;return n.text=this.text.substring(t,i),n.sectionIndex=this.sectionIndex.slice(t,i),n.sections=this.sections,n}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var e=this;return this.sectionIndex.reduce((function(t,i){return Math.max(t,e.sections[i].scale)}),0)}},{key:"addTextSection",value:function(e,t){this.text+=e.text,this.sections.push(th.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,n=0;n<e.text.length;++n)this.sectionIndex.push(i)}},{key:"addImageSection",value:function(e){var t=e.image?e.image.name:"";if(0!==t.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(th.forImage(t)),this.sectionIndex.push(this.sections.length-1)):Te("Reached maximum number of images 6401")}else Te("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(t,i){for(var n=new e,r=0;r<t.sections.length;r++){var a=t.sections[r];a.image?n.addImageSection(a):n.addTextSection(a,i)}return n}}]),e}();function nh(e,t,i,n,r,a,o,s,l,u,c,h,d,f,m,y){var v,g=ih.fromFeature(e,r);h===eh.vertical&&g.verticalizePunctuation(d);var _=ao.processBidirectionalText,b=ao.processStyledBidirectionalText;if(_&&1===g.sections.length){v=[];var x,w=_(g.toString(),hh(g,u,a,t,n,f,m)),k=p(w);try{for(k.s();!(x=k.n()).done;){var P=x.value,S=new ih;S.text=P,S.sections=g.sections;for(var T=0;T<P.length;T++)S.sectionIndex.push(0);v.push(S)}}catch(j){k.e(j)}finally{k.f()}}else if(b){v=[];var C,O=b(g.text,g.sectionIndex,hh(g,u,a,t,n,f,m)),I=p(O);try{for(I.s();!(C=I.n()).done;){var E=C.value,A=new ih;A.text=E[0],A.sectionIndex=E[1],A.sections=g.sections,v.push(A)}}catch(j){I.e(j)}finally{I.f()}}else v=function(e,t){var i,n=[],r=e.text,a=0,o=p(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;n.push(e.substring(a,s)),a=s}}catch(j){o.e(j)}finally{o.f()}return a<r.length&&n.push(e.substring(a,r.length)),n}(g,hh(g,u,a,t,n,f,m));var M=[],D={positionedLines:M,text:g.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,i,n,r,a,o,s,l,u,c,h){var d,f=0,m=0,y=0,v="right"===s?1:"left"===s?0:.5,g=!1,_=p(r);try{for(_.s();!(d=_.n()).done;){var b,x=d.value.getSections(),w=p(x);try{for(w.s();!(b=w.n()).done;){var k=b.value;if(!k.imageName){var P=t[k.fontStack];if(P&&!(g=void 0!==P.ascender&&void 0!==P.descender))break}}}catch(j){w.e(j)}finally{w.f()}if(!g)break}}catch(j){_.e(j)}finally{_.f()}var S,T,C=0,O=p(r);try{for(O.s();!(S=O.n()).done;){var I=S.value;I.trim();var E=I.getMaxScale(),A=(E-1)*yc,M={positionedGlyphs:[],lineOffset:0};e.positionedLines[C]=M;var D=M.positionedGlyphs,F=0;if(I.length()){for(var L=0,R=0,z=0;z<I.length();z++){var V=I.getSection(z),B=I.getSectionIndex(z),N=I.getCharCode(z),U=V.scale,W=null,G=null,H=null,X=yc,Y=0,q=!(l===eh.horizontal||!c&&!Wa(N)||c&&(rh[N]||(T=N,da(T)||fa(T)||ma(T)||ja(T)||za(T))));if(V.imageName){var Z=n[V.imageName];if(!Z)continue;H=V.imageName,e.iconsInText=e.iconsInText||!0,G=Z.paddedRect;var K=Z.displaySize;U=U*yc/h,W={width:K[0],height:K[1],left:1,top:-3,advance:q?K[1]:K[0],localGlyph:!1},Y=g?-W.height*U:E*yc-17-K[1]*U,X=W.advance;var $=(q?K[0]:K[1])*U-yc*E;$>0&&$>F&&(F=$)}else{var J=i[V.fontStack];if(!J)continue;J[N]&&(G=J[N]);var Q=t[V.fontStack];if(!Q)continue;var ee=Q.glyphs[N];if(!ee)continue;if(W=ee.metrics,X=8203!==N?yc:0,g){var te=void 0!==Q.ascender?Math.abs(Q.ascender):0,ie=void 0!==Q.descender?Math.abs(Q.descender):0,ne=(te+ie)*U;L<ne&&(L=ne,R=(te-ie)/2*U),Y=-te*U}else Y=(E-U)*yc-17}q?(e.verticalizable=!0,D.push({glyph:N,imageName:H,x:f,y:m+Y,vertical:q,scale:U,localGlyph:W.localGlyph,fontStack:V.fontStack,sectionIndex:B,metrics:W,rect:G}),f+=X*U+u):(D.push({glyph:N,imageName:H,x:f,y:m+Y,vertical:q,scale:U,localGlyph:W.localGlyph,fontStack:V.fontStack,sectionIndex:B,metrics:W,rect:G}),f+=W.advance*U+u)}0!==D.length&&(y=Math.max(f-u,y),g?dh(D,v,F,R,a*E/2):dh(D,v,F,0,a/2)),f=0;var re=a*E+F;M.lineOffset=Math.max(F,A),m+=re,++C}else m+=a,++C}}catch(j){O.e(j)}finally{O.f()}var ae=m,oe=ph(o),se=oe.horizontalAlign,le=oe.verticalAlign;(function(e,t,i,n,r,a){var o,s=(t-i)*r,l=-a*n,u=p(e);try{for(u.s();!(o=u.n()).done;){var c,h=o.value,d=p(h.positionedGlyphs);try{for(d.s();!(c=d.n()).done;){var f=c.value;f.x+=s,f.y+=l}}catch(j){d.e(j)}finally{d.f()}}}catch(j){u.e(j)}finally{u.f()}})(e.positionedLines,v,se,le,y,ae),e.top+=-le*ae,e.bottom=e.top+ae,e.left+=-se*y,e.right=e.left+y,e.hasBaseline=g}(D,t,i,n,v,o,s,l,h,u,d,y),!function(e){var t,i=p(e);try{for(i.s();!(t=i.n()).done;)if(0!==t.value.positionedGlyphs.length)return!1}catch(j){i.e(j)}finally{i.f()}return!0}(M)&&D}var rh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ah={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function oh(e,t,i,n,r,a){if(t.imageName){var o=n[t.imageName];return o?o.displaySize[0]*t.scale*yc/a+r:0}var s=i[t.fontStack],l=s&&s.glyphs[e];return l?l.metrics.advance*t.scale+r:0}function sh(e,t,i,n){var r=Math.pow(e-t,2);return n?e<t?r/2:2*r:r+Math.abs(i)*i}function lh(e,t,i){var n=0;return 10===e&&(n-=1e4),i&&(n+=150),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function uh(e,t,i,n,r,a){var o,s=null,l=sh(t,i,r,a),u=p(n);try{for(u.s();!(o=u.n()).done;){var c=o.value,h=sh(t-c.x,i,r,a)+c.badness;h<=l&&(s=c,l=h)}}catch(d){u.e(d)}finally{u.f()}return{index:e,x:t,priorBreak:s,badness:l}}function ch(e){return e?ch(e.priorBreak).concat(e.index):[]}function hh(e,t,i,n,r,a,o){if("point"!==a)return[];if(!e)return[];for(var s,l=[],u=function(e,t,i,n,r,a){for(var o=0,s=0;s<e.length();s++){var l=e.getSection(s);o+=oh(e.getCharCode(s),l,n,r,t,a)}return o/Math.max(1,Math.ceil(o/i))}(e,t,i,n,r,o),c=e.text.indexOf("\u200b")>=0,h=0,p=0;p<e.length();p++){var d=e.getSection(p),f=e.getCharCode(p);if(rh[f]||(h+=oh(f,d,n,r,t,o)),p<e.length()-1){var m=!((s=f)<11904||!(ka(s)||wa(s)||La(s)||Da(s)||Ca(s)||ya(s)||Pa(s)||_a(s)||Oa(s)||Ia(s)||Ta(s)||Va(s)||ba(s)||ga(s)||va(s)||Sa(s)||xa(s)||Fa(s)||Aa(s)||Ea(s)));(ah[f]||m||d.imageName)&&l.push(uh(p+1,h,u,l,lh(f,e.getCharCode(p+1),m&&c),!1))}}return ch(uh(e.length(),h,u,l,0,!0))}function ph(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function dh(e,t,i,n,r){if(t||i||n||r)for(var a=e.length-1,o=e[a],s=(o.x+o.metrics.advance*o.scale)*t,l=0;l<=a;l++)e[l].x-=s,e[l].y+=i+n+r}function fh(e,t,i){var n=ph(i),r=n.horizontalAlign,a=n.verticalAlign,o=t[0]-e.displaySize[0]*r,s=t[1]-e.displaySize[1]*a;return{image:e,top:s,bottom:s+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function mh(e,t,i,n,r,a){var o,s=e.image;if(s.content){var l=s.content,u=s.pixelRatio||1;o=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,h,p,d,f=t.left*a,m=t.right*a;"width"===i||"both"===i?(d=r[0]+f-n[3],h=r[0]+m+n[1]):h=(d=r[0]+(f+m-s.displaySize[0])/2)+s.displaySize[0];var y=t.top*a,v=t.bottom*a;return"height"===i||"both"===i?(c=r[1]+y-n[0],p=r[1]+v+n[2]):p=(c=r[1]+(y+v-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:p,left:d,collisionPadding:o}}var yh=function(e){f(i,e);var t=m(i);function i(e,n,r,a,o){var s;return y(this,i),(s=t.call(this,e,n)).angle=a,s.z=r,void 0!==o&&(s.segment=o),s}return v(i,[{key:"clone",value:function(){return new i(this.x,this.y,this.z,this.angle,this.segment)}}]),i}(g);function vh(e,t,i,n,r){if(void 0===t.segment)return!0;for(var a=t,o=t.segment+1,s=0;s>-i/2;){if(--o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],u=0;s<i/2;){var c=e[o],h=e[o+1];if(!h)return!1;var p=e[o-1].angleTo(c)-c.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:p}),u+=p;s-l[0].distance>n;)u-=l.shift().angleDelta;if(u>r)return!1;o++,s+=c.dist(h)}return!0}function gh(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function _h(e,t,i){return e?.6*t*i:0}function bh(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function xh(e,t,i,n,r,a){for(var o=_h(i,r,a),s=bh(i,n)*a,l=0,u=gh(e)/2,c=0;c<e.length-1;c++){var h=e[c],p=e[c+1],d=h.dist(p);if(l+d>u){var f=(u-l)/d,m=$i(h.x,p.x,f),y=$i(h.y,p.y,f),v=new yh(m,y,0,p.angleTo(h),c);return!o||vh(e,v,s,o,t)?v:void 0}l+=d}}function wh(e,t,i,n,r,a,o,s,l){var u=_h(n,a,o),c=bh(n,r),h=c*o,p=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),kh(e,p?t/2*s%t:(c/2+2*a)*o*s%t,t,u,i,h,p,!1,l)}function kh(e,t,i,n,r,a,o,s,l){for(var u=a/2,c=gh(e),h=0,p=t-i,d=[],f=0;f<e.length-1;f++){for(var m=e[f],y=e[f+1],v=m.dist(y),g=y.angleTo(m);p+i<h+v;){var _=((p+=i)-h)/v,b=$i(m.x,y.x,_),x=$i(m.y,y.y,_);if(b>=0&&b<l&&x>=0&&x<l&&p-u>=0&&p+u<=c){var w=new yh(b,x,0,g,f);w._round(),n&&!vh(e,w,a,n,r)||d.push(w)}}h+=v}return s||d.length||o||(d=kh(e,h/2,i,n,r,a,o,!0,l)),d}function Ph(e,t,i,n,r){for(var a=[],o=0;o<e.length;o++)for(var s=e[o],l=void 0,u=0;u<s.length-1;u++){var c=s[u],h=s[u+1];c.x<t&&h.x<t||(c.x<t?c=new g(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<t&&(h=new g(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<i&&h.y<i||(c.y<i?c=new g(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round():h.y<i&&(h=new g(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round()),c.x>=n&&h.x>=n||(c.x>=n?c=new g(n,c.y+(n-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=n&&(h=new g(n,c.y+(n-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=r&&h.y>=r||(c.y>=r?c=new g(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r)._round():h.y>=r&&(h=new g(c.x+(r-c.y)/(h.y-c.y)*(h.x-c.x),r)._round()),l&&c.equals(l[l.length-1])||(l=[c],a.push(l)),l.push(h)))))}return a}oa("Anchor",yh);var Sh=1e20;function Th(e,t,i,n,r,a,o,s,l){for(var u=t;u<t+n;u++)Ch(e,i*a+u,a,r,o,s,l);for(var c=i;c<i+r;c++)Ch(e,c*a+t,1,n,o,s,l)}function Ch(e,t,i,n,r,a,o){a[0]=0,o[0]=-Sh,o[1]=Sh,r[0]=e[t];for(var s=1,l=0,u=0;s<n;s++){r[s]=e[t+s*i];var c=s*s;do{var h=a[l];u=(r[s]-r[h]+c-h*h)/(s-h)/2}while(u<=o[l]&&--l>-1);a[++l]=s,o[l]=u,o[l+1]=Sh}for(var p=0,d=0;p<n;p++){for(;o[d+1]<p;)d++;var f=a[d],m=p-f;e[t+p*i]=r[f]+m*m}}var Oh={none:0,ideographs:1,all:2},Ih=function(){function e(t,i,n){y(this,e),this.requestManager=t,this.localGlyphMode=i,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}return v(e,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(t,i){var n=this,r=[];for(var a in t){var o,s=p(t[a]);try{for(s.s();!(o=s.n()).done;){var l=o.value;r.push({stack:a,id:l})}}catch(u){s.e(u)}finally{s.f()}}pe(r,(function(t,i){var r=t.stack,a=t.id,o=n.entries[r];o||(o=n.entries[r]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});var s=o.glyphs[a];if(void 0===s){if(s=n._tinySDF(o,r,a))return o.glyphs[a]=s,void i(null,{stack:r,id:a,glyph:s});var l=Math.floor(a/256);if(256*l>65535)i(new Error("glyphs > 65535 not supported"));else if(o.ranges[l])i(null,{stack:r,id:a,glyph:s});else{var c=o.requests[l];c||(c=o.requests[l]=[],e.loadGlyphRange(r,l,n.url,n.requestManager,(function(e,t){if(t){for(var i in o.ascender=t.ascender,o.descender=t.descender,t.glyphs)n._doesCharSupportLocalGlyph(+i)||(o.glyphs[+i]=t.glyphs[+i]);o.ranges[l]=!0}var r,a=p(c);try{for(a.s();!(r=a.n()).done;)(0,r.value)(e,t)}catch(u){a.e(u)}finally{a.f()}delete o.requests[l]}))),c.push((function(e,t){e?i(e):t&&i(null,{stack:r,id:a,glyph:t.glyphs[a]||null})}))}}else i(null,{stack:r,id:a,glyph:s})}),(function(e,t){if(e)i(e);else if(t){var r,a={},o=p(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,l=s.stack,c=s.id,h=s.glyph;void 0===a[l]&&(a[l]={}),void 0===a[l].glyphs&&(a[l].glyphs={}),a[l].glyphs[c]=h&&{id:h.id,bitmap:h.bitmap.clone(),metrics:h.metrics},a[l].ascender=n.entries[l].ascender,a[l].descender=n.entries[l].descender}}catch(u){o.e(u)}finally{o.f()}i(null,a)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return this.localGlyphMode!==Oh.none&&(this.localGlyphMode===Oh.all?!!this.localFontFamily:!!this.localFontFamily&&(Ia(e)||Ma(e)||ba(e)||xa(e))||_a(e))}},{key:"_tinySDF",value:function(t,i,n){var r=this.localFontFamily;if(r&&this._doesCharSupportLocalGlyph(n)){var a=t.tinySDF;if(!a){var o="400";/bold/i.test(i)?o="900":/medium/i.test(i)?o="500":/light/i.test(i)&&(o="200"),(a=t.tinySDF=new e.TinySDF({fontFamily:r,fontWeight:o,fontSize:48,buffer:6,radius:16})).fontWeight=o}if(this.localGlyphs[a.fontWeight][n])return this.localGlyphs[a.fontWeight][n];var s=String.fromCharCode(n),l=a.draw(s),u=l.data,c=l.width,h=l.height,p=l.glyphWidth,d=l.glyphHeight,f=l.glyphLeft,m=l.glyphTop,y=l.glyphAdvance;return this.localGlyphs[a.fontWeight][n]={id:n,bitmap:new Nl({width:c,height:h},u),metrics:{width:p/2,height:d/2,left:f/2,top:m/2-27,advance:y/2,localGlyph:!0}}}}}]),e}();function Eh(e,t,i,n){var r=[],a=e.image,o=a.pixelRatio,s=a.paddedRect.w-2,l=a.paddedRect.h-2,u=e.right-e.left,c=e.bottom-e.top,h=a.stretchX||[[0,s]],p=a.stretchY||[[0,l]],d=function(e,t){return e+t[1]-t[0]},f=h.reduce(d,0),m=p.reduce(d,0),y=s-f,v=l-m,_=0,b=f,x=0,w=m,k=0,P=y,S=0,T=v;if(a.content&&n){var C=a.content;_=Ah(h,0,C[0]),x=Ah(p,0,C[1]),b=Ah(h,C[0],C[2]),w=Ah(p,C[1],C[3]),k=C[0]-_,S=C[1]-x,P=C[2]-C[0]-b,T=C[3]-C[1]-w}var O=function(n,r,s,l){var h=Dh(n.stretch-_,b,u,e.left),p=jh(n.fixed-k,P,n.stretch,f),d=Dh(r.stretch-x,w,c,e.top),y=jh(r.fixed-S,T,r.stretch,m),v=Dh(s.stretch-_,b,u,e.left),C=jh(s.fixed-k,P,s.stretch,f),O=Dh(l.stretch-x,w,c,e.top),I=jh(l.fixed-S,T,l.stretch,m),E=new g(h,d),A=new g(v,d),M=new g(v,O),D=new g(h,O),j=new g(p/o,y/o),F=new g(C/o,I/o),L=t*Math.PI/180;if(L){var R=Math.sin(L),z=Math.cos(L),V=[z,-R,R,z];E._matMult(V),A._matMult(V),D._matMult(V),M._matMult(V)}var B=n.stretch+n.fixed,N=r.stretch+r.fixed;return{tl:E,tr:A,bl:D,br:M,tex:{x:a.paddedRect.x+1+B,y:a.paddedRect.y+1+N,w:s.stretch+s.fixed-B,h:l.stretch+l.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:j,pixelOffsetBR:F,minFontScaleX:P/o/u,minFontScaleY:T/o/c,isSDF:i}};if(n&&(a.stretchX||a.stretchY))for(var I=Mh(h,y,f),E=Mh(p,v,m),A=0;A<I.length-1;A++)for(var M=I[A],D=I[A+1],j=0;j<E.length-1;j++)r.push(O(M,E[j],D,E[j+1]));else r.push(O({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return r}function Ah(e,t,i){var n,r=0,a=p(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;r+=Math.max(t,Math.min(i,o[1]))-Math.max(t,Math.min(i,o[0]))}}catch(s){a.e(s)}finally{a.f()}return r}function Mh(e,t,i){var n,r=[{fixed:-1,stretch:0}],a=p(e);try{for(a.s();!(n=a.n()).done;){var o=h(n.value,2),s=o[0],l=o[1],u=r[r.length-1];r.push({fixed:s-u.stretch,stretch:u.stretch}),r.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}}catch(c){a.e(c)}finally{a.f()}return r.push({fixed:t+1,stretch:i}),r}function Dh(e,t,i,n){return e/t*i+n}function jh(e,t,i,n){return e-t*i/n}function Fh(e,t,i,n){var r=t+e.positionedLines[n].lineOffset;return 0===n?i+r/2:i+(r+(t+e.positionedLines[n-1].lineOffset))/2}Ih.loadGlyphRange=function(e,t,i,n,r){var a=256*t,o=a+255,s=n.transformRequest(n.normalizeGlyphsURL(i).replace("{fontstack}",e).replace("{range}","".concat(a,"-").concat(o)),yt.Glyphs);bt(s,(function(e,t){if(e)r(e);else if(t){var i,n={},a=function(e){return new Oc(e).readFields(qc,{})}(t),o=p(a.glyphs);try{for(o.s();!(i=o.n()).done;){var s=i.value;n[s.id]=s}}catch(l){o.e(l)}finally{o.f()}r(null,{glyphs:n,ascender:a.ascender,descender:a.descender})}}))},Ih.TinySDF=function(){function e(t){var i=t.fontSize,n=void 0===i?24:i,r=t.buffer,a=void 0===r?3:r,o=t.radius,s=void 0===o?8:o,l=t.cutoff,u=void 0===l?.25:l,c=t.fontFamily,h=void 0===c?"sans-serif":c,p=t.fontWeight,d=void 0===p?"normal":p,f=t.fontStyle,m=void 0===f?"normal":f;y(this,e),this.buffer=a,this.cutoff=u,this.radius=s;var v=this.size=n+4*a,g=this._createCanvas(v),_=this.ctx=g.getContext("2d",{willReadFrequently:!0});_.font="".concat(m," ").concat(d," ").concat(n,"px ").concat(h),_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(v*v),this.gridInner=new Float64Array(v*v),this.f=new Float64Array(v),this.z=new Float64Array(v+1),this.v=new Uint16Array(v)}return v(e,[{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return t.width=t.height=e,t}},{key:"draw",value:function(e){var t=this.ctx.measureText(e),i=t.width,n=t.actualBoundingBoxAscent,r=t.actualBoundingBoxDescent,a=t.actualBoundingBoxLeft,o=t.actualBoundingBoxRight,s=Math.floor(n),l=Math.min(this.size-this.buffer,Math.ceil(o-a)),u=Math.min(this.size-this.buffer,Math.ceil(n)+Math.ceil(r)),c=l+2*this.buffer,h=u+2*this.buffer,p=c*h,d=new Uint8ClampedArray(p),f={data:d,width:c,height:h,glyphWidth:l,glyphHeight:u,glyphTop:s,glyphLeft:0,glyphAdvance:i};if(0===l||0===u)return f;var m=this.ctx,y=this.buffer,v=this.gridInner,g=this.gridOuter;m.clearRect(y,y,l,u),m.fillText(e,y,y+s+1);var _=m.getImageData(y,y,l,u);g.fill(Sh,0,p),v.fill(0,0,p);for(var b=0;b<u;b++)for(var x=0;x<l;x++){var w=_.data[4*(b*l+x)+3]/255;if(0!==w){var k=(b+y)*c+x+y;if(1===w)g[k]=0,v[k]=Sh;else{var P=.5-w;g[k]=P>0?P*P:0,v[k]=P<0?P*P:0}}}Th(g,0,0,c,h,c,this.f,this.v,this.z),Th(v,y,y,l,u,c,this.f,this.v,this.z);for(var S=0;S<p;S++){var T=Math.sqrt(g[S])-Math.sqrt(v[S]);d[S]=Math.round(255-255*(T/this.radius+this.cutoff))}return f}}]),e}();var Lh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rh;if(y(this,e),this.data=t,this.length=this.data.length,this.compare=i,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}return v(e,[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,i=this.compare,n=t[e];e>0;){var r=e-1>>1,a=t[r];if(i(n,a)>=0)break;t[e]=a,e=r}t[e]=n}},{key:"_down",value:function(e){for(var t=this.data,i=this.compare,n=this.length>>1,r=t[e];e<n;){var a=1+(e<<1),o=t[a],s=a+1;if(s<this.length&&i(t[s],o)<0&&(a=s,o=t[s]),i(o,r)>=0)break;t[e]=o,e=a}t[e]=r}}]),e}();function Rh(e,t){return e<t?-1:e>t?1:0}function zh(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=1/0,r=1/0,a=-1/0,o=-1/0,s=e[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<n)&&(n=u.x),(!l||u.y<r)&&(r=u.y),(!l||u.x>a)&&(a=u.x),(!l||u.y>o)&&(o=u.y)}var c=Math.min(a-n,o-r),h=c/2,p=new Lh([],Vh);if(0===c)return new g(n,r);for(var d=n;d<a;d+=c)for(var f=r;f<o;f+=c)p.push(new Bh(d+h,f+h,h,e));for(var m=function(e){for(var t=0,i=0,n=0,r=e[0],a=0,o=r.length,s=o-1;a<o;s=a++){var l=r[a],u=r[s],c=l.x*u.y-u.x*l.y;i+=(l.x+u.x)*c,n+=(l.y+u.y)*c,t+=3*c}return new Bh(i/t,n/t,0,e)}(e),y=p.length;p.length;){var v=p.pop();(v.d>m.d||!m.d)&&(m=v,i&&console.log("found best %d after %d probes",Math.round(1e4*v.d)/1e4,y)),v.max-m.d<=t||(h=v.h/2,p.push(new Bh(v.p.x-h,v.p.y-h,h,e)),p.push(new Bh(v.p.x+h,v.p.y-h,h,e)),p.push(new Bh(v.p.x-h,v.p.y+h,h,e)),p.push(new Bh(v.p.x+h,v.p.y+h,h,e)),y+=4)}return i&&(console.log("num probes: ".concat(y)),console.log("best distance: ".concat(m.d))),m.p}function Vh(e,t){return t.max-e.max}function Bh(e,t,i,n){this.p=new g(e,t),this.h=i,this.d=function(e,t){for(var i=!1,n=1/0,r=0;r<t.length;r++)for(var a=t[r],o=0,s=a.length,l=s-1;o<s;l=o++){var u=a[o],c=a[l];u.y>e.y!=c.y>e.y&&e.x<(c.x-u.x)*(e.y-u.y)/(c.y-u.y)+u.x&&(i=!i),n=Math.min(n,_l(e,u,c))}return(i?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}var Nh=Number.POSITIVE_INFINITY,Uh=Math.sqrt(2);function Wh(e,t){return t[1]!==Nh?function(e,t,i){var n=0,r=0;switch(t=Math.abs(t),i=Math.abs(i),e){case"top-right":case"top-left":case"top":r=i-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-i}switch(e){case"top-right":case"bottom-right":case"right":n=-t;break;case"top-left":case"bottom-left":case"left":n=t}return[n,r]}(e,t[0],t[1]):function(e,t){var i=0,n=0;t<0&&(t=0);var r=t/Uh;switch(e){case"top-right":case"top-left":n=r-7;break;case"bottom-right":case"bottom-left":n=7-r;break;case"bottom":n=7-t;break;case"top":n=t-7}switch(e){case"top-right":case"bottom-right":i=-r;break;case"top-left":case"bottom-left":i=r;break;case"left":i=t;break;case"right":i=-t}return[i,n]}(e,t[0])}function Gh(e,t,i,n,r,a,o,s,l,u){e.createArrays(),e.tilePixelRatio=Ws/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var c=e.layers[0].layout,h=e.layers[0]._unevaluatedLayout._values,d={};if("composite"===e.textSizeData.kind){var f=e.textSizeData,m=f.minZoom,y=f.maxZoom;d.compositeTextSizes=[h["text-size"].possiblyEvaluate(new oo(m),s),h["text-size"].possiblyEvaluate(new oo(y),s)]}if("composite"===e.iconSizeData.kind){var v=e.iconSizeData,g=v.minZoom,_=v.maxZoom;d.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new oo(g),s),h["icon-size"].possiblyEvaluate(new oo(_),s)]}d.layoutTextSize=h["text-size"].possiblyEvaluate(new oo(l+1),s),d.layoutIconSize=h["icon-size"].possiblyEvaluate(new oo(l+1),s),d.textMaxSize=h["text-size"].possiblyEvaluate(new oo(18),s);var b,x="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),w=c.get("text-size"),k=p(e.features);try{var P=function(){var a=b.value,l=c.get("text-font").evaluate(a,{},s).join(","),h=w.evaluate(a,{},s),p=d.layoutTextSize.evaluate(a,{},s),f=(d.layoutIconSize.evaluate(a,{},s),{horizontal:{},vertical:void 0}),m=a.text,y=void 0,v=[0,0];if(m){var g=m.toString(),_=c.get("text-letter-spacing").evaluate(a,{},s)*yc,k=c.get("text-line-height").evaluate(a,{},s)*yc,P=Na(g)?_:0,S=c.get("text-anchor").evaluate(a,{},s),T=c.get("text-variable-anchor");if(!T){var C=c.get("text-radial-offset").evaluate(a,{},s);v=C?Wh(S,[C*yc,Nh]):c.get("text-offset").evaluate(a,{},s).map((function(e){return e*yc}))}var O=x?"center":c.get("text-justify").evaluate(a,{},s),I=c.get("symbol-placement"),E="point"===I,A="point"===I?c.get("text-max-width").evaluate(a,{},s)*yc:0,M=function(n){e.allowVerticalPlacement&&Ba(g)&&(f.vertical=nh(m,t,i,r,l,A,k,S,n,P,v,eh.vertical,!0,I,p,h))};if(!x&&T){for(var D="auto"===O?T.map((function(e){return Hh(e)})):[O],j=!1,F=0;F<D.length;F++){var L=D[F];if(!f.horizontal[L])if(j)f.horizontal[L]=f.horizontal[0];else{var R=nh(m,t,i,r,l,A,k,"center",L,P,v,eh.horizontal,!1,I,p,h);R&&(f.horizontal[L]=R,j=1===R.positionedLines.length)}}M("left")}else{if("auto"===O&&(O=Hh(S)),E||c.get("text-writing-mode").indexOf("horizontal")>=0||!Ba(g)){var z=nh(m,t,i,r,l,A,k,S,O,P,v,eh.horizontal,!1,I,p,h);z&&(f.horizontal[O]=z)}M("point"===I?"left":O)}}var V=!1;if(a.icon&&a.icon.name){var B=n[a.icon.name];B&&(y=fh(r[a.icon.name],c.get("icon-offset").evaluate(a,{},s),c.get("icon-anchor").evaluate(a,{},s)),V=B.sdf,void 0===e.sdfIcons?e.sdfIcons=B.sdf:e.sdfIcons!==B.sdf&&Te("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(B.pixelRatio!==e.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var N=Zh(f.horizontal)||f.vertical;e.iconsInText||(e.iconsInText=!!N&&N.iconsInText),(N||y)&&Xh(e,a,f,y,n,d,p,0,v,V,o,s,u)};for(k.s();!(b=k.n()).done;)P()}catch(S){k.e(S)}finally{k.f()}a&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function Hh(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Xh(e,t,i,n,r,a,o,s,l,u,c,d,f){var m=a.textMaxSize.evaluate(t,{},d);void 0===m&&(m=o);var y,v=e.layers[0].layout,g=v.get("icon-offset").evaluate(t,{},d),_=Zh(i.horizontal)||i.vertical,b=o/24,x=e.tilePixelRatio*m/24,w=e.tilePixelRatio*v.get("symbol-spacing"),k=v.get("text-padding")*e.tilePixelRatio,P=v.get("icon-padding")*e.tilePixelRatio,S=ne(v.get("text-max-angle")),T="map"===v.get("text-rotation-alignment")&&"point"!==v.get("symbol-placement"),C="map"===v.get("icon-rotation-alignment")&&"point"!==v.get("symbol-placement"),O=v.get("symbol-placement"),I=w/2,E=v.get("icon-text-fit");n&&"none"!==E&&(e.allowVerticalPlacement&&i.vertical&&(y=mh(n,i.vertical,E,v.get("icon-text-fit-padding"),g,b)),_&&(n=mh(n,_,E,v.get("icon-text-fit-padding"),g,b)));var A=function(o,s,p){if(!(s.x<0||s.x>=Ws||s.y<0||s.y>=Ws)){var m=f.projectTilePoint(s.x,s.y,p),v=m.x,_=m.y,b=m.z,x=new yh(v,_,b,0,void 0);!function(e,t,i,n,r,a,o,s,l,u,c,p,d,f,m,y,v,g,_,b,x,w,k,P,S){var T,C,O,I,E,A,M,D,j,F=e.addToLineVertexArray(t,n),L=0,R=0,z=0,V=0,B=-1,N=-1,U={},W=ds(""),G=0,H=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?(T=l.layout.get("text-offset").evaluate(x,{},S).map((function(e){return e*yc})),G=(C=h(T,2))[0],H=C[1]):(G=l.layout.get("text-radial-offset").evaluate(x,{},S)*yc,H=Nh),e.allowVerticalPlacement&&r.vertical){var X=r.vertical;if(m)D=$h(X),s&&(j=$h(s));else{var Y=l.layout.get("text-rotate").evaluate(x,{},S)+90;E=Kh(u,i,t,c,p,d,X,f,Y,y),s&&(A=Kh(u,i,t,c,p,d,s,g,Y))}}if(a){var q=l.layout.get("icon-rotate").evaluate(x,{},S),Z="none"!==l.layout.get("icon-text-fit"),K=Eh(a,q,k,Z),$=s?Eh(s,q,k,Z):void 0;I=Kh(u,i,t,c,p,d,a,g,q),L=4*K.length;var J=e.iconSizeData,Q=null;"source"===J.kind?(Q=[vc*l.layout.get("icon-size").evaluate(x,{},S)])[0]>Yh&&Te("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===J.kind&&((Q=[vc*w.compositeIconSizes[0].evaluate(x,{},S),vc*w.compositeIconSizes[1].evaluate(x,{},S)])[0]>Yh||Q[1]>Yh)&&Te("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')),e.addSymbols(e.icon,K,Q,b,_,x,!1,i,t,F.lineStartIndex,F.lineLength,-1,P,S),B=e.icon.placedSymbolArray.length-1,$&&(R=4*$.length,e.addSymbols(e.icon,$,Q,b,_,x,eh.vertical,i,t,F.lineStartIndex,F.lineLength,-1,P,S),N=e.icon.placedSymbolArray.length-1)}for(var ee in r.horizontal){var te=r.horizontal[ee];O||(W=ds(te.text),m?M=$h(te):O=Kh(u,i,t,c,p,d,te,f,l.layout.get("text-rotate").evaluate(x,{},S),y));var ie=1===te.positionedLines.length;if(z+=qh(e,i,t,te,o,l,m,x,y,F,r.vertical?eh.horizontal:eh.horizontalOnly,ie?Object.keys(r.horizontal):[ee],U,B,w,P,S),ie)break}r.vertical&&(V+=qh(e,i,t,r.vertical,o,l,m,x,y,F,eh.vertical,["vertical"],U,N,w,P,S));var ne=-1,re=function(e,t){return e?Math.max(e,t):t};ne=re(M,ne),ne=re(D,ne);var ae=(ne=re(j,ne))>-1?1:0;e.glyphOffsetArray.length>=op.MAX_GLYPHS&&Te("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,x.sortKey),e.symbolInstances.emplaceBack(i.x,i.y,i.z,t.x,t.y,U.right>=0?U.right:-1,U.center>=0?U.center:-1,U.left>=0?U.left:-1,U.vertical>=0?U.vertical:-1,B,N,W,void 0!==O?O:e.collisionBoxArray.length,void 0!==O?O+1:e.collisionBoxArray.length,void 0!==E?E:e.collisionBoxArray.length,void 0!==E?E+1:e.collisionBoxArray.length,void 0!==I?I:e.collisionBoxArray.length,void 0!==I?I+1:e.collisionBoxArray.length,A||e.collisionBoxArray.length,A?A+1:e.collisionBoxArray.length,c,z,V,L,R,ae,0,G,H,ne)}(e,s,x,o,i,n,r,y,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,k,T,l,0,P,C,g,t,a,u,c,d)}};if("line"===O){var M,D=p(Ph(t.geometry,0,0,Ws,Ws));try{for(D.s();!(M=D.n()).done;){var j,F=M.value,L=wh(F,w,S,i.vertical||_,n,24,x,e.overscaling,Ws),R=p(L);try{for(R.s();!(j=R.n()).done;){var z=j.value;_&&Jh(e,_.text,I,z)||A(F,z,d)}}catch(ie){R.e(ie)}finally{R.f()}}}catch(ie){D.e(ie)}finally{D.f()}}else if("line-center"===O){var V,B=p(t.geometry);try{for(B.s();!(V=B.n()).done;){var N=V.value;if(N.length>1){var U=xh(N,S,i.vertical||_,n,24,x);U&&A(N,U,d)}}}catch(ie){B.e(ie)}finally{B.f()}}else if("Polygon"===t.type){var W,G=p(Su(t.geometry,0));try{for(G.s();!(W=G.n()).done;){var H=W.value,X=zh(H,16);A(H[0],new yh(X.x,X.y,0,0,void 0),d)}}catch(ie){G.e(ie)}finally{G.f()}}else if("LineString"===t.type){var Y,q=p(t.geometry);try{for(q.s();!(Y=q.n()).done;){var Z=Y.value;A(Z,new yh(Z[0].x,Z[0].y,0,0,void 0),d)}}catch(ie){q.e(ie)}finally{q.f()}}else if("Point"===t.type){var K,$=p(t.geometry);try{for($.s();!(K=$.n()).done;){var J,Q=K.value,ee=p(Q);try{for(ee.s();!(J=ee.n()).done;){var te=J.value;A([te],new yh(te.x,te.y,0,0,void 0),d)}}catch(ie){ee.e(ie)}finally{ee.f()}}}catch(ie){$.e(ie)}finally{$.f()}}}var Yh=32640;function qh(e,t,i,n,r,o,s,l,u,h,d,f,m,y,v,_,b){var x=function(e,t,i,n,r,o,s,l){var u=[];if(0===t.positionedLines.length)return u;var h,d=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,f=function(e){var t=e[0],i=e[1],n=t*i;return n>0?[t,-i]:n<0?[-t,i]:0===t?[i,t]:[i,-t]}(i),m=Math.abs(t.top-t.bottom),y=p(t.positionedLines);try{for(y.s();!(h=y.n()).done;)m-=h.value.lineOffset}catch(ae){y.e(ae)}finally{y.f()}for(var v=t.positionedLines.length,_=m/v,b=t.top-i[1],x=0;x<v;++x){var w=t.positionedLines[x];b=Fh(t,_,b,x);var k,P=p(w.positionedGlyphs);try{for(P.s();!(k=P.n()).done;){var S=k.value;if(S.rect){var T=S.rect||{},C=4,O=!0,I=1,E=0;if(S.imageName){var A=s[S.imageName];if(!A)continue;if(A.sdf){Te("SDF images are not supported in formatted text and will be ignored.");continue}O=!1,C=1/(I=A.pixelRatio)}var M=(r||l)&&S.vertical,D=S.metrics.advance*S.scale/2,j=S.metrics,F=S.rect;if(null!==F){l&&t.verticalizable&&(E=S.imageName?D-S.metrics.width*S.scale/2:0);var L=r?[S.x+D,S.y]:[0,0],R=[0,0],z=[0,0],V=!1;r||(M?(z=[S.x+D+f[0],S.y+f[1]-E],V=!0):R=[S.x+D+i[0],S.y+i[1]-E]);var B=F.w*S.scale/(I*(S.localGlyph?2:1)),N=F.h*S.scale/(I*(S.localGlyph?2:1)),U=void 0,W=void 0,G=void 0,H=void 0;if(M){var X=S.y-b,Y=new g(-D,D-X),q=-Math.PI/2,Z=a(g,c(z));(U=new g(-D+R[0],R[1]))._rotateAround(q,Y)._add(Z),U.x+=-X+D,U.y-=(j.left-C)*S.scale;var K=S.imageName?j.advance*S.scale:yc*S.scale,$=String.fromCharCode(S.glyph);Pc($)?U.x+=(1-C)*S.scale:Sc($)?U.x+=K-j.height*S.scale+(-C-1)*S.scale:U.x+=S.imageName||j.width+2*C===F.w&&j.height+2*C===F.h?(K-N)/2:(K-(j.height+2*C)*S.scale)/2,W=new g(U.x,U.y-B),G=new g(U.x+N,U.y),H=new g(U.x+N,U.y-B)}else{var J=(j.left-C)*S.scale-D+R[0],Q=(-j.top-C)*S.scale+R[1],ee=J+B,te=Q+N;U=new g(J,Q),W=new g(ee,Q),G=new g(J,te),H=new g(ee,te)}if(d){var ie=void 0;ie=r?new g(0,0):V?new g(f[0],f[1]):new g(i[0],i[1]),U._rotateAround(d,ie),W._rotateAround(d,ie),G._rotateAround(d,ie),H._rotateAround(d,ie)}var ne=new g(0,0),re=new g(0,0);u.push({tl:U,tr:W,bl:G,br:H,tex:T,writingMode:t.writingMode,glyphOffset:L,sectionIndex:S.sectionIndex,isSDF:O,pixelOffsetTL:ne,pixelOffsetBR:re,minFontScaleX:0,minFontScaleY:0})}}}}catch(ae){P.e(ae)}finally{P.f()}}return u}(0,n,u,o,s,l,r,e.allowVerticalPlacement),w=e.textSizeData,k=null;"source"===w.kind?(k=[vc*o.layout.get("text-size").evaluate(l,{},b)])[0]>Yh&&Te("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===w.kind&&((k=[vc*v.compositeTextSizes[0].evaluate(l,{},b),vc*v.compositeTextSizes[1].evaluate(l,{},b)])[0]>Yh||k[1]>Yh)&&Te("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')),e.addSymbols(e.text,x,k,u,s,l,d,t,i,h.lineStartIndex,h.lineLength,y,_,b);var P,S=p(f);try{for(S.s();!(P=S.n()).done;)m[P.value]=e.text.placedSymbolArray.length-1}catch(T){S.e(T)}finally{S.f()}return 4*x.length}function Zh(e){for(var t in e)return e[t];return null}function Kh(e,t,i,n,r,a,o,s,l,u){var c=o.top,h=o.bottom,p=o.left,d=o.right,f=o.collisionPadding;if(f&&(p-=f[0],c-=f[1],d+=f[2],h+=f[3]),l){var m=new g(p,c),y=new g(d,c),v=new g(p,h),_=new g(d,h),b=ne(l),x=new g(0,0);u&&(x=new g(u[0],u[1])),m._rotateAround(b,x),y._rotateAround(b,x),v._rotateAround(b,x),_._rotateAround(b,x),p=Math.min(m.x,y.x,v.x,_.x),d=Math.max(m.x,y.x,v.x,_.x),c=Math.min(m.y,y.y,v.y,_.y),h=Math.max(m.y,y.y,v.y,_.y)}return e.emplaceBack(t.x,t.y,t.z,i.x,i.y,p,c,d,h,s,n,r,a),e.length-1}function $h(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);var t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Jh(e,t,i,n){var r=e.compareText;if(t in r){for(var a=r[t],o=a.length-1;o>=0;o--)if(n.dist(a[o])<i)return!0}else r[t]=[];return r[t].push(n),!1}var Qh=Wu.VectorTileFeature.types,ep=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tp(e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m){var y=c?Math.min(Yh,Math.round(c[0])):0,v=c?Math.min(Yh,Math.round(c[1])):0;e.emplaceBack(t,i,Math.round(32*o),Math.round(32*s),l,u,(y<<1)+(h?1:0),v,16*p,16*d,256*f,256*m,n,r,a,0)}function ip(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function np(e){var t,i=p(e.sections);try{for(i.s();!(t=i.n()).done;)if(Ya(t.value.text))return!0}catch(n){i.e(n)}finally{i.f()}return!1}var rp=function(){function e(t){y(this,e),this.layoutVertexArray=new jo,this.indexArray=new Bo,this.programConfigurations=t,this.segments=new Us,this.dynamicLayoutVertexArray=new Ao,this.opacityVertexArray=new Fo,this.placedSymbolArray=new es}return v(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,i,n){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,cc.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,hc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,ep,!0),this.opacityVertexBuffer.itemSize=1),(i||n)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}]),e}();oa("SymbolBuffers",rp);var ap=function(){function e(t,i,n){y(this,e),this.layoutVertexArray=new t,this.layoutAttributes=i,this.indexArray=new n,this.segments=new Us,this.collisionVertexArray=new Vo,this.collisionVertexArrayExt=new Ao}return v(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,pc.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,dc.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),e}();oa("CollisionBuffers",ap);var op=function(){function e(t){y(this,e),this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=P([]),this.placementViewportMatrix=P([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gc(this.zoom,i["text-size"]),this.iconSizeData=gc(this.zoom,i["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),a=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((function(e){return eh[e]})),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=t.sourceID}return v(e,[{key:"createArrays",value:function(){this.text=new rp(new Ds(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new rp(new Ds(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new ns,this.lineVertexArray=new rs,this.symbolInstances=new is}},{key:"calculateGlyphDependencies",value:function(e,t,i,n,r){for(var a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,n&&r){var o=kc[e.charAt(a)];o&&(t[o.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,t,i,n){var r=this.layers[0],a=r.layout,o=a.get("text-font"),s=a.get("text-field"),l=a.get("icon-image"),u=("constant"!==s.value.kind||s.value.value instanceof li&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=a.get("symbol-sort-key");if(this.features=[],u||c){var d,f=t.iconDependencies,m=t.glyphDependencies,y=t.availableImages,v=new oo(this.zoom),g=p(e);try{for(g.s();!(d=g.n()).done;){var _=d.value,b=_.feature,x=_.id,w=_.index,k=_.sourceLayerIndex,P=r._featureFilter.needGeometry,S=ul(b,P);if(r._featureFilter.filter(v,S,i)){var T=void 0,C=void 0;if(P||(S.geometry=ll(b,i,n)),u){var O=r.getValueAndResolveTokens("text-field",S,i,y),I=li.factory(O);np(I)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===no()||this.hasRTLText&&ao.isParsed())&&(T=wc(I,r,S))}if(c){var E=r.getValueAndResolveTokens("icon-image",S,i,y);C=E instanceof ui?E:ui.fromString(E)}if(T||C){var A=this.sortFeaturesByKey?h.evaluate(S,{},i):void 0;if(this.features.push({id:x,text:T,icon:C,index:w,sourceLayerIndex:k,geometry:S.geometry,properties:b.properties,type:Qh[b.type],sortKey:A}),C&&(f[C.name]=!0),T){var M=o.evaluate(S,{},i).join(","),D="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(eh.vertical)>=0;var j,F=p(T.sections);try{for(F.s();!(j=F.n()).done;){var L=j.value;if(L.image)f[L.image.name]=!0;else{var R=Ba(T.toString()),z=L.fontStack||M,V=m[z]=m[z]||{};this.calculateGlyphDependencies(L.text,V,D,this.allowVerticalPlacement,R)}}}catch(B){F.e(B)}finally{F.f()}}}}}}catch(B){g.e(B)}finally{g.f()}"line"===a.get("symbol-placement")&&(this.features=function(e){var t={},i={},n=[],r=0;function a(t){n.push(e[t]),r++}function o(e,t,r){var a=i[e];return delete i[e],i[t]=a,n[a].geometry[0].pop(),n[a].geometry[0]=n[a].geometry[0].concat(r[0]),a}function s(e,i,r){var a=t[i];return delete t[i],t[e]=a,n[a].geometry[0].shift(),n[a].geometry[0]=r[0].concat(n[a].geometry[0]),a}function l(e,t,i){var n=i?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(n.x,":").concat(n.y)}for(var u=0;u<e.length;u++){var c=e[u],h=c.geometry,p=c.text?c.text.toString():null;if(p){var d=l(p,h),f=l(p,h,!0);if(d in i&&f in t&&i[d]!==t[f]){var m=s(d,f,h),y=o(d,f,n[m].geometry);delete t[d],delete i[f],i[l(p,n[y].geometry,!0)]=y,n[m].geometry=null}else d in i?o(d,f,h):f in t?s(d,f,h):(a(u),t[d]=r-1,i[f]=r-1)}else a(u)}return n.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,i,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i,n))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var i=this.lineVertexArray.length;if(void 0!==e.segment){for(var n=e.dist(t[e.segment+1]),r=e.dist(t[e.segment]),a={},o=e.segment+1;o<t.length;o++)a[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:n},o<t.length-1&&(n+=t[o+1].dist(t[o]));for(var s=e.segment||0;s>=0;s--)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:r},s>0&&(r+=t[s-1].dist(t[s]));for(var l=0;l<t.length;l++){var u=a[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}},{key:"addSymbols",value:function(e,t,i,n,r,a,o,s,l,u,c,h,p,d){for(var f=e.indexArray,m=e.layoutVertexArray,y=e.segments.prepareSegment(4*t.length,m,f,this.canOverlap?a.sortKey:void 0),v=this.glyphOffsetArray.length,g=y.vertexLength,_=this.allowVerticalPlacement&&o===eh.vertical?Math.PI/2:0,b=a.text&&a.text.sections,x=0;x<t.length;x++){var w=t[x],k=w.tl,P=w.tr,S=w.bl,T=w.br,C=w.tex,O=w.pixelOffsetTL,I=w.pixelOffsetBR,E=w.minFontScaleX,A=w.minFontScaleY,M=w.glyphOffset,D=w.isSDF,j=w.sectionIndex,F=y.vertexLength,L=M[1];tp(m,s.x,s.y,s.z,l.x,l.y,k.x,L+k.y,C.x,C.y,i,D,O.x,O.y,E,A),tp(m,s.x,s.y,s.z,l.x,l.y,P.x,L+P.y,C.x+C.w,C.y,i,D,I.x,O.y,E,A),tp(m,s.x,s.y,s.z,l.x,l.y,S.x,L+S.y,C.x,C.y+C.h,i,D,O.x,I.y,E,A),tp(m,s.x,s.y,s.z,l.x,l.y,T.x,L+T.y,C.x+C.w,C.y+C.h,i,D,I.x,I.y,E,A),ip(e.dynamicLayoutVertexArray,s,_),f.emplaceBack(F,F+1,F+2),f.emplaceBack(F+1,F+2,F+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(M[0]),x!==t.length-1&&j===t[x+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,a,a.index,{},p,d,b&&b[j])}e.placedSymbolArray.emplaceBack(s.x,s.y,s.z,l.x,l.y,v,this.glyphOffsetArray.length-v,g,u,c,l.segment,i?i[0]:0,i?i[1]:0,n[0],n[1],o,0,!1,0,h,0)}},{key:"_commitLayoutVertex",value:function(e,t,i,n,r,a,o){e.emplaceBack(t,i,n,r,a,Math.round(o.x),Math.round(o.y))}},{key:"_addCollisionDebugVertices",value:function(e,t,i,n,r,a,o){for(var s=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=s.vertexLength,u=o.tileAnchorX,c=o.tileAnchorY,h=0;h<4;h++)i.collisionVertexArray.emplaceBack(0,0,0,0);i.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),i.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),i.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),i.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(i.layoutVertexArray,n,r,a,u,c,new g(e.x1,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,n,r,a,u,c,new g(e.x2,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,n,r,a,u,c,new g(e.x2,e.y2)),this._commitLayoutVertex(i.layoutVertexArray,n,r,a,u,c,new g(e.x1,e.y2)),s.vertexLength+=4;var p=i.indexArray;p.emplaceBack(l,l+1),p.emplaceBack(l+1,l+2),p.emplaceBack(l+2,l+3),p.emplaceBack(l+3,l),s.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(e,t,i,n,r,a){for(var o=n;o<r;o++){var s=i.get(o),l=this.getSymbolInstanceTextSize(e,a,t,o);this._addCollisionDebugVertices(s,l,this.textCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"_addIconDebugCollisionBoxes",value:function(e,t,i,n,r,a){for(var o=n;o<r;o++){var s=i.get(o),l=this.getSymbolInstanceIconSize(e,t,o);this._addCollisionDebugVertices(s,l,this.iconCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"generateCollisionDebugBuffers",value:function(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ap(Ro,fc.members,Yo),this.iconCollisionBox=new ap(Ro,fc.members,Yo);for(var i=bc(this.iconSizeData,e),n=bc(this.textSizeData,e),r=0;r<this.symbolInstances.length;r++){var a=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(n,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(n,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(i,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(i,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}},{key:"getSymbolInstanceTextSize",value:function(e,t,i,n){var r=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:n),a=_c(this.textSizeData,e,r)/yc;return this.tilePixelRatio*a}},{key:"getSymbolInstanceIconSize",value:function(e,t,i){var n=this.icon.placedSymbolArray.get(i),r=_c(this.iconSizeData,e,n);return this.tilePixelRatio*r}},{key:"_commitDebugCollisionVertexUpdate",value:function(e,t,i){e.emplaceBack(t,-i,-i),e.emplaceBack(t,i,-i),e.emplaceBack(t,i,i),e.emplaceBack(t,-i,i)}},{key:"_updateTextDebugCollisionBoxes",value:function(e,t,i,n,r,a){for(var o=n;o<r;o++){var s=i.get(o),l=this.getSymbolInstanceTextSize(e,a,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,l,s.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(e,t,i,n,r){for(var a=n;a<r;a++){var o=i.get(a),s=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,s,o.padding)}}},{key:"updateCollisionDebugBuffers",value:function(e,t){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var i=bc(this.iconSizeData,e),n=bc(this.textSizeData,e),r=0;r<this.symbolInstances.length;r++){var a=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(n,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(n,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(i,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(i,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,i,n,r,a,o,s,l){for(var u={},c=t;c<i;c++){var h=e.get(c);u.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,padding:h.padding,projectedAnchorX:h.projectedAnchorX,projectedAnchorY:h.projectedAnchorY,projectedAnchorZ:h.projectedAnchorZ,tileAnchorX:h.tileAnchorX,tileAnchorY:h.tileAnchorY},u.textFeatureIndex=h.featureIndex;break}for(var p=n;p<r;p++){var d=e.get(p);u.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,padding:d.padding,projectedAnchorX:d.projectedAnchorX,projectedAnchorY:d.projectedAnchorY,projectedAnchorZ:d.projectedAnchorZ,tileAnchorX:d.tileAnchorX,tileAnchorY:d.tileAnchorY},u.verticalTextFeatureIndex=d.featureIndex;break}for(var f=a;f<o;f++){var m=e.get(f);u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,padding:m.padding,projectedAnchorX:m.projectedAnchorX,projectedAnchorY:m.projectedAnchorY,projectedAnchorZ:m.projectedAnchorZ,tileAnchorX:m.tileAnchorX,tileAnchorY:m.tileAnchorY},u.iconFeatureIndex=m.featureIndex;break}for(var y=s;y<l;y++){var v=e.get(y);u.verticalIconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,padding:v.padding,projectedAnchorX:v.projectedAnchorX,projectedAnchorY:v.projectedAnchorY,projectedAnchorZ:v.projectedAnchorZ,tileAnchorX:v.tileAnchorX,tileAnchorY:v.tileAnchorY},u.verticalIconFeatureIndex=v.featureIndex;break}return u}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var i=e.placedSymbolArray.get(t),n=i.vertexStartIndex+4*i.numGlyphs,r=i.vertexStartIndex;r<n;r+=4)e.indexArray.emplaceBack(r,r+1,r+2),e.indexArray.emplaceBack(r+1,r+2,r+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),n=[],r=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);n.push(0|Math.round(t*s.tileAnchorX+i*s.tileAnchorY)),r.push(s.featureIndex)}return a.sort((function(e,t){return n[e]-n[t]||r[t]-r[e]})),a}},{key:"addToSortKeyRanges",value:function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var i,n=p(this.symbolInstanceIndexes);try{for(n.s();!(i=n.n()).done;){var r=i.value,a=this.symbolInstances.get(r);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e,i,n){e>=0&&n.indexOf(e)===i&&t.addIndicesForPlacedSymbol(t.text,e)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}}catch(o){n.e(o)}finally{n.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();oa("SymbolBucket",op,{omit:["layers","collisionBoxArray","features","compareText"]}),op.MAX_GLYPHS=65535,op.addDynamicAttributes=ip;var sp=new xo({"symbol-placement":new yo(Dt.layout_symbol["symbol-placement"]),"symbol-spacing":new yo(Dt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yo(Dt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vo(Dt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yo(Dt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yo(Dt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new yo(Dt.layout_symbol["icon-ignore-placement"]),"icon-optional":new yo(Dt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yo(Dt.layout_symbol["icon-rotation-alignment"]),"icon-size":new vo(Dt.layout_symbol["icon-size"]),"icon-text-fit":new yo(Dt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yo(Dt.layout_symbol["icon-text-fit-padding"]),"icon-image":new vo(Dt.layout_symbol["icon-image"]),"icon-rotate":new vo(Dt.layout_symbol["icon-rotate"]),"icon-padding":new yo(Dt.layout_symbol["icon-padding"]),"icon-keep-upright":new yo(Dt.layout_symbol["icon-keep-upright"]),"icon-offset":new vo(Dt.layout_symbol["icon-offset"]),"icon-anchor":new vo(Dt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yo(Dt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yo(Dt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yo(Dt.layout_symbol["text-rotation-alignment"]),"text-field":new vo(Dt.layout_symbol["text-field"]),"text-font":new vo(Dt.layout_symbol["text-font"]),"text-size":new vo(Dt.layout_symbol["text-size"]),"text-max-width":new vo(Dt.layout_symbol["text-max-width"]),"text-line-height":new vo(Dt.layout_symbol["text-line-height"]),"text-letter-spacing":new vo(Dt.layout_symbol["text-letter-spacing"]),"text-justify":new vo(Dt.layout_symbol["text-justify"]),"text-radial-offset":new vo(Dt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yo(Dt.layout_symbol["text-variable-anchor"]),"text-anchor":new vo(Dt.layout_symbol["text-anchor"]),"text-max-angle":new yo(Dt.layout_symbol["text-max-angle"]),"text-writing-mode":new yo(Dt.layout_symbol["text-writing-mode"]),"text-rotate":new vo(Dt.layout_symbol["text-rotate"]),"text-padding":new yo(Dt.layout_symbol["text-padding"]),"text-keep-upright":new yo(Dt.layout_symbol["text-keep-upright"]),"text-transform":new vo(Dt.layout_symbol["text-transform"]),"text-offset":new vo(Dt.layout_symbol["text-offset"]),"text-allow-overlap":new yo(Dt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new yo(Dt.layout_symbol["text-ignore-placement"]),"text-optional":new yo(Dt.layout_symbol["text-optional"])}),lp={paint:new xo({"icon-opacity":new vo(Dt.paint_symbol["icon-opacity"]),"icon-color":new vo(Dt.paint_symbol["icon-color"]),"icon-halo-color":new vo(Dt.paint_symbol["icon-halo-color"]),"icon-halo-width":new vo(Dt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vo(Dt.paint_symbol["icon-halo-blur"]),"icon-translate":new yo(Dt.paint_symbol["icon-translate"]),"icon-translate-anchor":new yo(Dt.paint_symbol["icon-translate-anchor"]),"text-opacity":new vo(Dt.paint_symbol["text-opacity"]),"text-color":new vo(Dt.paint_symbol["text-color"],{runtimeType:Ht,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new vo(Dt.paint_symbol["text-halo-color"]),"text-halo-width":new vo(Dt.paint_symbol["text-halo-width"]),"text-halo-blur":new vo(Dt.paint_symbol["text-halo-blur"]),"text-translate":new yo(Dt.paint_symbol["text-translate"]),"text-translate-anchor":new yo(Dt.paint_symbol["text-translate-anchor"])}),layout:sp},up=function(){function e(t){y(this,e),this.type=t.property.overrides?t.property.overrides.runtimeType:Nt,this.defaultValue=t}return v(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();oa("FormatSectionOverride",up,{omit:["defaultValue"]});var cp=function(e){f(i,e);var t=m(i);function i(e){return y(this,i),t.call(this,e,lp)}return v(i,[{key:"recalculate",value:function(e,t){o(s(i.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));var n=this.layout.get("text-writing-mode");if(n){var r,a=[],l=p(n);try{for(l.s();!(r=l.n()).done;){var u=r.value;a.indexOf(u)<0&&a.push(u)}}catch(c){l.e(c)}finally{l.f()}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,i,n){var r=this.layout.get(e).evaluate(t,{},i,n),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||rr(a.value)||!r?r:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,i){return i in e?String(e[i]):""}))}(t.properties,r)}},{key:"createBucket",value:function(e){return new op(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var e,t=p(lp.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(i.hasPaintOverride(this.layout,n)){var r=this.paint.get(n),a=new up(r),o=new nr(a,r.property.specification),s=null;s="constant"===r.value.kind||"source"===r.value.kind?new or("source",o):new sr("composite",o,r.value.zoomStops,r.value._interpolationType),this.paint._values[n]=new fo(r.property,s,r.parameters)}}}catch(l){t.e(l)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&i.hasPaintOverride(this.layout,e)}},{key:"getProgramConfiguration",value:function(e){return new Ms(this,e)}}],[{key:"hasPaintOverride",value:function(e,t){var i=e.get("text-field"),n=lp.paint.properties[t],r=!1,a=function(e){var t,i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(n.overrides&&n.overrides.hasOverride(a))return void(r=!0)}}catch(o){i.e(o)}finally{i.f()}};if("constant"===i.value.kind&&i.value.value instanceof li)a(i.value.value.sections);else if("source"===i.value.kind){var o=function e(t){r||(t instanceof fi&&pi(t.value)===Zt?a(t.value.sections):t instanceof gi?a(t.sections):t.eachChild(e))},s=i.value;s._styleExpression&&o(s._styleExpression.expression)}return r}}]),i}(Bs),hp={paint:new xo({"background-color":new yo(Dt.paint_background["background-color"]),"background-pattern":new _o(Dt.paint_background["background-pattern"]),"background-opacity":new yo(Dt.paint_background["background-opacity"])})},pp={paint:new xo({"raster-opacity":new yo(Dt.paint_raster["raster-opacity"]),"raster-hue-rotate":new yo(Dt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yo(Dt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yo(Dt.paint_raster["raster-brightness-max"]),"raster-saturation":new yo(Dt.paint_raster["raster-saturation"]),"raster-contrast":new yo(Dt.paint_raster["raster-contrast"]),"raster-resampling":new yo(Dt.paint_raster["raster-resampling"]),"raster-fade-duration":new yo(Dt.paint_raster["raster-fade-duration"])})},dp=function(e){f(i,e);var t=m(i);function i(e){var n;return y(this,i),(n=t.call(this,e,{})).implementation=e,n}return v(i,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}},{key:"onRemove",value:function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}]),i}(Bs),fp={paint:new xo({"sky-type":new yo(Dt.paint_sky["sky-type"]),"sky-atmosphere-sun":new yo(Dt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new yo(Dt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new yo(Dt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new yo(Dt.paint_sky["sky-gradient-radius"]),"sky-gradient":new bo(Dt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new yo(Dt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new yo(Dt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new yo(Dt.paint_sky["sky-opacity"])})};function mp(e,t,i){var n=j(0,0,1),r=J($());return function(e,t,i){i*=.5;var n=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(i),l=Math.cos(i);e[0]=n*l-a*s,e[1]=r*l+o*s,e[2]=a*l+n*s,e[3]=o*l-r*s}(r,r,i?-ne(e)+Math.PI:ne(e)),Q(r,r,-ne(t)),H(n,n,r),N(n,n)}var yp={circle:function(e){f(i,e);var t=m(i);function i(e){return y(this,i),t.call(this,e,Il)}return v(i,[{key:"createBucket",value:function(e){return new hl(e)}},{key:"queryRadius",value:function(e){var t=e;return Pl("circle-radius",this,t)+Pl("circle-stroke-width",this,t)+Sl(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,i,n,r,a,o,s){var l=Cl(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(t,i)+this.paint.get("circle-stroke-width").evaluate(t,i);return Ml(e,n,a,o,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,u)}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(e){return new Ms(this,e)}}]),i}(Bs),heatmap:function(e){f(i,e);var t=m(i);function i(e){var n;return y(this,i),(n=t.call(this,e,Wl))._updateColorRamp(),n}return v(i,[{key:"createBucket",value:function(e){return new Rl(e)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=Gl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(e){return Pl("heatmap-radius",this,e)}},{key:"queryIntersectsFeature",value:function(e,t,i,n,r,a,o,s){var l=this.paint.get("heatmap-radius").evaluate(t,i);return Ml(e,n,a,o,s,!0,!0,new g(0,0),l)}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(e){return new Ms(this,e)}}]),i}(Bs),hillshade:function(e){f(i,e);var t=m(i);function i(e){return y(this,i),t.call(this,e,Hl)}return v(i,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}},{key:"getProgramConfiguration",value:function(e){return new Ms(this,e)}}]),i}(Bs),fill:function(e){f(i,e);var t=m(i);function i(e){return y(this,i),t.call(this,e,Au)}return v(i,[{key:"getProgramIds",value:function(){var e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),i=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}},{key:"getProgramConfiguration",value:function(e){return new Ms(this,e)}},{key:"recalculate",value:function(e,t){o(s(i.prototype),"recalculate",this).call(this,e,t);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new Iu(e)}},{key:"queryRadius",value:function(){return Sl(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,i,n,r,a){return!e.queryGeometry.isAboveHorizon&&fl(Tl(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),n)}},{key:"isTileClipped",value:function(){return!0}}]),i}(Bs),"fill-extrusion":function(e){f(i,e);var t=m(i);function i(e){return y(this,i),t.call(this,e,Ku)}return v(i,[{key:"createBucket",value:function(e){return new qu(e)}},{key:"queryRadius",value:function(){return Sl(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(e){return new Ms(this,e)}},{key:"queryIntersectsFeature",value:function(e,t,i,n,r,a,o,s,l){var u=Cl(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(t,i),h=this.paint.get("fill-extrusion-base").evaluate(t,i),d=[0,0],f=s&&a.elevation,m=a.elevation?a.elevation.exaggeration():1;if(f){var y=e.tile.getBucket(this).centroidVertexArray,v=l+1;if(v<y.length){var _=y.get(v);d[0]=_.a_centroid_pos0,d[1]=_.a_centroid_pos1}}if(0===d[0]&&1===d[1])return!1;var b=function(e,t,i,n,r,a,o,s,l){return a?function(e,t,i,n,r,a,o,s,l){var u,c=[],h=[],d=[0,0,0,1],f=p(e);try{for(f.s();!(u=f.n()).done;){var m,y=u.value,v=[],g=[],_=p(y);try{for(_.s();!(m=_.n()).done;){var b=m.value,x=b.x+n.x,w=b.y+n.y,k=ec(x,w,t,i,a,o,s,l);d[0]=x,d[1]=w,d[2]=k.base,d[3]=1,K(d,d,r),d[3]=Math.max(d[3],1e-5);var P=Qu([d[0]/d[3],d[1]/d[3],d[2]/d[3]]);d[0]=x,d[1]=w,d[2]=k.top,d[3]=1,K(d,d,r),d[3]=Math.max(d[3],1e-5);var S=Qu([d[0]/d[3],d[1]/d[3],d[2]/d[3]]);v.push(P),g.push(S)}}catch(T){_.e(T)}finally{_.f()}c.push(v),h.push(g)}}catch(T){f.e(T)}finally{f.f()}return[c,h]}(e,t,i,n,r,a,o,s,l):function(e,t,i,n,r){var a,o=[],s=[],l=r[8]*t,u=r[9]*t,c=r[10]*t,h=r[11]*t,d=r[8]*i,f=r[9]*i,m=r[10]*i,y=r[11]*i,v=p(e);try{for(v.s();!(a=v.n()).done;){var _,b=a.value,x=[],w=[],k=p(b);try{for(k.s();!(_=k.n()).done;){var P=_.value,S=P.x+n.x,T=P.y+n.y,C=r[0]*S+r[4]*T+r[12],O=r[1]*S+r[5]*T+r[13],I=r[2]*S+r[6]*T+r[14],E=r[3]*S+r[7]*T+r[15],A=C+l,M=O+u,D=I+c,j=Math.max(E+h,1e-5),F=C+d,L=O+f,R=I+m,z=Math.max(E+y,1e-5),V=new g(A/j,M/j);V.z=D/j,x.push(V);var B=new g(F/z,L/z);B.z=R/z,w.push(B)}}catch(N){k.e(N)}finally{k.f()}o.push(x),s.push(w)}}catch(N){v.e(N)}finally{v.f()}return[o,s]}(e,t,i,n,r)}(n,h,c,u,o,f?s:null,d,m,a.center.lat),x=e.queryGeometry;return function(e,t,i){var n=1/0;fl(i,t)&&(n=Ju(i,t[0]));for(var r=0;r<t.length;r++)for(var a=t[r],o=e[r],s=0;s<a.length-1;s++){var l=a[s],u=[l,a[s+1],o[s+1],o[s],l];pl(i,u)&&(n=Math.min(n,Ju(i,u)))}return n!==1/0&&n}(b[0],b[1],x.isPointQuery()?x.screenBounds:x.screenGeometry)}}]),i}(Bs),line:function(e){f(i,e);var t=m(i);function i(e){var n;return y(this,i),(n=t.call(this,e,sc)).gradientVersion=0,n}return v(i,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){if("line-gradient"===e){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Ki,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"recalculate",value:function(e,t){o(s(i.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=lc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new ac(e)}},{key:"getProgramIds",value:function(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}},{key:"getProgramConfiguration",value:function(e){return new Ms(this,e)}},{key:"queryRadius",value:function(e){var t=e,i=uc(Pl("line-width",this,t),Pl("line-gap-width",this,t)),n=Pl("line-offset",this,t);return i/2+Math.abs(n)+Sl(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,i,n,r,a){if(e.queryGeometry.isAboveHorizon)return!1;var o=Tl(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*uc(this.paint.get("line-width").evaluate(t,i),this.paint.get("line-gap-width").evaluate(t,i)),l=this.paint.get("line-offset").evaluate(t,i);return l&&(n=function(e,t){for(var i=[],n=new g(0,0),r=0;r<e.length;r++){for(var a=e[r],o=[],s=0;s<a.length;s++){var l=a[s-1],u=a[s],c=a[s+1],h=0===s?n:u.sub(l)._unit()._perp(),p=s===a.length-1?n:c.sub(u)._unit()._perp(),d=h._add(p)._unit();d._mult(1/(d.x*p.x+d.y*p.y)),o.push(d._mult(t)._add(u))}i.push(o)}return i}(n,l*e.pixelToTileUnitsFactor)),function(e,t,i){for(var n=0;n<t.length;n++){var r=t[n];if(e.length>=3)for(var a=0;a<r.length;a++)if(xl(e,r[a]))return!0;if(ml(e,r,i))return!0}return!1}(o,n,s)}},{key:"isTileClipped",value:function(){return!0}}]),i}(Bs),symbol:cp,background:function(e){f(i,e);var t=m(i);function i(e){return y(this,i),t.call(this,e,hp)}return v(i,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),i}(Bs),raster:function(e){f(i,e);var t=m(i);function i(e){return y(this,i),t.call(this,e,pp)}return v(i,[{key:"getProgramIds",value:function(){return["raster"]}}]),i}(Bs),sky:function(e){f(i,e);var t=m(i);function i(e){var n;return y(this,i),(n=t.call(this,e,fp))._updateColorRamp(),n}return v(i,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=Gl({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}}},{key:"getCenter",value:function(e,t){var i=this.paint.get("sky-type");if("atmosphere"===i){var n=this.paint.get("sky-atmosphere-sun"),r=!n,a=e.style.light,o=a.properties.get("position");return r&&"viewport"===a.properties.get("anchor")&&Te("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?mp(o.azimuthal,90-o.polar,t):mp(n[0],90-n[1],t)}if("gradient"===i){var s=this.paint.get("sky-gradient-center");return mp(s[0],90-s[1],t)}}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}]),i}(Bs)},vp=b.HTMLImageElement,gp=b.HTMLCanvasElement,_p=b.HTMLVideoElement,bp=b.ImageData,xp=b.ImageBitmap,wp=function(){function e(t,i,n,r){y(this,e),this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(i,r)}return v(e,[{key:"update",value:function(e,t,i){var n=e.width,r=e.height,a=this.context,o=a.gl;if(o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!t||!1!==t.premultiply)),i||this.size&&this.size[0]===n&&this.size[1]===r){var s=i||{x:0,y:0},l=s.x,u=s.y;e instanceof vp||e instanceof gp||e instanceof _p||e instanceof bp||xp&&e instanceof xp?o.texSubImage2D(o.TEXTURE_2D,0,l,u,o.RGBA,o.UNSIGNED_BYTE,e):o.texSubImage2D(o.TEXTURE_2D,0,l,u,n,r,o.RGBA,o.UNSIGNED_BYTE,e.data)}else this.size=[n,r],e instanceof vp||e instanceof gp||e instanceof _p||e instanceof bp||xp&&e instanceof xp?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,e):o.texImage2D(o.TEXTURE_2D,0,this.format,n,r,0,this.format,o.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(t&&t.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&o.generateMipmap(o.TEXTURE_2D)}},{key:"bind",value:function(e,t){var i=this.context.gl;i.bindTexture(i.TEXTURE_2D,this.texture),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,this.useMipmap?e===i.NEAREST?i.NEAREST_MIPMAP_NEAREST:i.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}(),kp=function(){function e(t,i){y(this,e),this.width=t,this.height=i,this.nextRow=0,this.image=new Nl({width:t,height:i}),this.positions={},this.uploaded=!1}return v(e,[{key:"getDash",value:function(e,t){var i=this.getKey(e,t);return this.positions[i]}},{key:"trim",value:function(){var e=this.width,t=this.height=ge(this.nextRow);this.image.resize({width:e,height:t})}},{key:"getKey",value:function(e,t){return e.join(",")+t}},{key:"getDashRanges",value:function(e,t,i){var n=[],r=e.length%2==1?-e[e.length-1]*i:0,a=e[0]*i,o=!0;n.push({left:r,right:a,isDash:o,zeroLength:0===e[0]});for(var s=e[0],l=1;l<e.length;l++){o=!o;var u=e[l];r=s*i,a=(s+=u)*i,n.push({left:r,right:a,isDash:o,zeroLength:0===u})}return n}},{key:"addRoundDash",value:function(e,t,i){for(var n=t/2,r=-i;r<=i;r++)for(var a=this.width*(this.nextRow+i+r),o=0,s=e[o],l=0;l<this.width;l++){l/s.right>1&&(s=e[++o]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),h=Math.min(u,c),p=void 0,d=r/i*(n+1);if(s.isDash){var f=n-Math.abs(d);p=Math.sqrt(h*h+f*f)}else p=n-Math.sqrt(h*h+d*d);this.image.data[a+l]=Math.max(0,Math.min(255,p+128))}}},{key:"addRegularDash",value:function(e,t){for(var i=e.length-1;i>=0;--i){var n=e[i],r=e[i+1];n.zeroLength?e.splice(i,1):r&&r.isDash===n.isDash&&(r.left=n.left,e.splice(i,1))}var a=e[0],o=e[e.length-1];a.isDash===o.isDash&&(a.left=o.left-this.width,o.right=a.right+this.width);for(var s=this.width*this.nextRow,l=0,u=e[l],c=0;c<this.width;c++){c/u.right>1&&(u=e[++l]);var h=Math.abs(c-u.left),p=Math.abs(c-u.right),d=Math.min(h,p);this.image.data[s+c]=Math.max(0,Math.min(255,(u.isDash?d:-d)+t+128))}}},{key:"addDash",value:function(e,t){var i=this.getKey(e,t);if(this.positions[i])return this.positions[i];var n="round"===t,r=n?7:0,a=2*r+1;if(this.nextRow+a>this.height)return Te("LineAtlas out of space"),null;0===e.length&&e.push(1);for(var o=0,s=0;s<e.length;s++)e[s]<0&&(Te("Negative value is found in line dasharray, replacing values with 0"),e[s]=0),o+=e[s];if(0!==o){var l=this.width/o,u=this.getDashRanges(e,this.width,l);n?this.addRoundDash(u,l,r):this.addRegularDash(u,"square"===t?.5*l:0)}var c=this.nextRow+r;this.nextRow+=a;var h={tl:[c,r],br:[o,0]};return this.positions[i]=h,h}}]),e}();oa("LineAtlas",kp);var Pp=function(){function e(t){var i=this;y(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})}return v(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){delete this._channel,this._callback=function(){}}}]),e}(),Sp=b.performance;function Tp(e){var t=e?e.url.toString():void 0;return Sp.getEntriesByName(t)}var Cp=function(){function e(){y(this,e),this.tasks={},this.taskQueue=[],be(["process"],this),this.invoker=new Pp(this.process),this.nextId=0}return v(e,[{key:"add",value:function(e,t){var i=this,n=this.nextId++,r=function(e){var t=e.type,i=e.isSymbolTile,n=e.zoom;return n=n||0,"message"===t?0:"maybePrepare"!==t||i?"parseTile"!==t||i?"parseTile"===t&&i?300-n:"maybePrepare"===t&&i?400-n:500:200-n:100-n}(t);if(0===r){Ie();try{e()}finally{}return{cancel:function(){}}}return this.tasks[n]={fn:e,metadata:t,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:function(){delete i.tasks[n]}}}},{key:"process",value:function(){var e=this;Ie();try{if(this.taskQueue=this.taskQueue.filter((function(t){return!!e.tasks[t]})),!this.taskQueue.length)return;var t=this.pick();if(null===t)return;var i=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!i)return;i.fn()}finally{}}},{key:"pick",value:function(){for(var e=null,t=1/0,i=0;i<this.taskQueue.length;i++){var n=this.tasks[this.taskQueue[i]];n.priority<t&&(t=n.priority,e=i)}if(null===e)return null;var r=this.taskQueue[e];return this.taskQueue.splice(e,1),r}},{key:"remove",value:function(){this.invoker.remove()}}]),e}();function Op(e,t,i){var n=2*Math.PI*6378137/256/Math.pow(2,i);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}var Ip=function(){function e(t,i,n){y(this,e),this.z=t,this.x=i,this.y=n,this.key=Mp(0,t,t,i,n)}return v(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t){var i=function(e,t,i){var n=Op(256*e,256*(t=Math.pow(2,i)-t-1),i),r=Op(256*(e+1),256*(t+1),i);return n[0]+","+n[1]+","+r[0]+","+r[1]}(this.x,this.y,this.z),n=function(e,t,i){for(var n,r="",a=e;a>0;a--)r+=(t&(n=1<<a-1)?1:0)+(i&n?2:0);return r}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",n).replace("{bbox-epsg-3857}",i)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),Ep=v((function e(t,i){y(this,e),this.wrap=t,this.canonical=i,this.key=Mp(t,i.z,i.z,i.x,i.y)})),Ap=function(){function e(t,i,n,r,a){y(this,e),this.overscaledZ=t,this.wrap=i,this.canonical=new Ip(n,+r,+a),this.key=0===i&&t===n?this.canonical.key:Mp(i,t,n,r,a)}return v(e,[{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){var i=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>i,this.canonical.y>>i)}},{key:"calculateScaledKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Mp(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);var i=this.canonical.z-e;return Mp(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new e(i,this.wrap,i,n,r),new e(i,this.wrap,i,n+1,r),new e(i,this.wrap,i,n,r+1),new e(i,this.wrap,i,n+1,r+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new Ep(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}]),e}();function Mp(e,t,i,n,r){var a=1<<Math.min(i,22),o=a*(r%a)+n%a;return e&&i<22&&(o+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-i)))),16*(32*o+i)+(t-i)}oa("CanonicalTileID",Ip),oa("OverscaledTileID",Ap,{omit:["projMatrix"]});var Dp=v((function e(t,i,n){y(this,e),this.func=t,this.mask=i,this.range=n}));Dp.ReadOnly=!1,Dp.ReadWrite=!0,Dp.disabled=new Dp(519,Dp.ReadOnly,[0,1]);var jp=7680,Fp=v((function e(t,i,n,r,a,o){y(this,e),this.test=t,this.ref=i,this.mask=n,this.fail=r,this.depthFail=a,this.pass=o}));Fp.disabled=new Fp({func:519,mask:0},0,0,jp,jp,jp);var Lp=v((function e(t,i,n){y(this,e),this.blendFunction=t,this.blendColor=i,this.mask=n}));Lp.Replace=[1,0],Lp.disabled=new Lp(Lp.Replace,ai.transparent,[!1,!1,!1,!1]),Lp.unblended=new Lp(Lp.Replace,ai.transparent,[!0,!0,!0,!0]),Lp.alphaBlended=new Lp([1,771],ai.transparent,[!0,!0,!0,!0]);var Rp=1029,zp=2305,Vp=v((function e(t,i,n){y(this,e),this.enable=t,this.mode=i,this.frontFace=n}));Vp.disabled=new Vp(!1,Rp,zp),Vp.backCCW=new Vp(!0,Rp,zp),Vp.backCW=new Vp(!0,Rp,2304),Vp.frontCW=new Vp(!0,1028,2304),Vp.frontCCW=new Vp(!0,1028,zp);var Bp=function(){function e(t){y(this,e),this._stringToNumber={},this._numberToString=[];for(var i=0;i<t.length;i++){var n=t[i];this._stringToNumber[n]=i,this._numberToString[i]=n}}return v(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){return this._numberToString[e]}}]),e}(),Np=function(){function e(t,i,n,r,a){y(this,e),this.type="Feature",this._vectorTileFeature=t,t._z=i,t._x=n,t._y=r,this.properties=t.properties,this.id=a}return v(e,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set:function(e){this._geometry=e}},{key:"toJSON",value:function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}]),e}(),Up=function(){function e(){y(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return v(e,[{key:"updateState",value:function(e,t,i){var n=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},fe(this.stateChanges[e][n],i),null===this.deletedStates[e])for(var r in this.deletedStates[e]={},this.state[e])r!==n&&(this.deletedStates[e][r]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][n])for(var a in this.deletedStates[e][n]={},this.state[e][n])i[a]||(this.deletedStates[e][n][a]=null);else for(var o in i)this.deletedStates[e]&&this.deletedStates[e][n]&&null===this.deletedStates[e][n][o]&&delete this.deletedStates[e][n][o]}},{key:"removeFeatureState",value:function(e,t,i){if(null!==this.deletedStates[e]){var n=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&void 0!==t)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][i]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][n])for(i in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][i]=null;else this.deletedStates[e][n]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(e,t){var i=String(t),n=fe({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var r=this.deletedStates[e][t];if(null===r)return{};for(var a in r)delete n[a]}return n}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(e,t){var i={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var r={};for(var a in this.stateChanges[n])this.state[n][a]||(this.state[n][a]={}),fe(this.state[n][a],this.stateChanges[n][a]),r[a]=this.state[n][a];i[n]=r}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var l in this.state[o])s[l]={},this.state[o][l]={};else for(var u in this.deletedStates[o]){if(null===this.deletedStates[o][u])this.state[o][u]={};else for(var c=0,h=Object.keys(this.deletedStates[o][u]);c<h.length;c++){var p=h[c];delete this.state[o][u][p]}s[u]=this.state[o][u]}i[o]=i[o]||{},fe(i[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var d in e)e[d].setFeatureState(i,t)}}]),e}(),Wp=function(){function e(t){y(this,e),this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}return v(e,[{key:"getElevation",value:function(e,t){var i=this.toIdx(e,t);return{min:this.minimums[i],max:this.maximums[i]}}},{key:"isLeaf",value:function(e,t){return this.leaves[this.toIdx(e,t)]}},{key:"toIdx",value:function(e,t){return t*this.size+e}}]),e}();function Gp(e,t,i,n){for(var r=0,a=Number.MAX_VALUE,o=0;o<3;o++)if(Math.abs(n[o])<1e-15){if(i[o]<e[o]||i[o]>t[o])return null}else{var s=1/n[o],l=(e[o]-i[o])*s,u=(t[o]-i[o])*s;if(l>u){var c=l;l=u,u=c}if(l>r&&(r=l),u<a&&(a=u),r>a)return null}return r}function Hp(e,t,i,n,r,a,o,s,l,u,c){var h=n-e,p=r-t,d=a-i,f=o-e,m=s-t,y=l-i,v=c[1]*y-c[2]*m,g=c[2]*f-c[0]*y,_=c[0]*m-c[1]*f,b=h*v+p*g+d*_;if(Math.abs(b)<1e-15)return null;var x=1/b,w=u[0]-e,k=u[1]-t,P=u[2]-i,S=(w*v+k*g+P*_)*x;if(S<0||S>1)return null;var T=k*d-P*p,C=P*h-w*d,O=w*p-k*h,I=(c[0]*T+c[1]*C+c[2]*O)*x;return I<0||S+I>1?null:(f*T+m*C+y*O)*x}function Xp(e,t,i){return(e-t)/(i-t)}function Yp(e,t,i,n,r,a,o,s,l){var u=1<<i,c=a-n,h=o-r,p=(e+1)/u*c+n,d=(t+0)/u*h+r,f=(t+1)/u*h+r;s[0]=(e+0)/u*c+n,s[1]=d,l[0]=p,l[1]=f}var qp=function(){function e(t){if(y(this,e),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var i=function(e){for(var t=Math.ceil(Math.log2(e.dim/8)),i=[],n=Math.ceil(Math.pow(2,t)),r=1/n,a=function(e,t,i,n,r){var a=n?1:0,o=(e+1)*i-a,s=t*i,l=(t+1)*i-a;r[0]=e*i,r[1]=s,r[2]=o,r[3]=l},o=new Wp(n),s=[],l=0;l<n*n;l++){a(l%n,Math.floor(l/n),r,!1,s);var u=Kp(s[0],s[1],e),c=Kp(s[2],s[1],e),h=Kp(s[2],s[3],e),p=Kp(s[0],s[3],e);o.minimums.push(Math.min(u,c,h,p)),o.maximums.push(Math.max(u,c,h,p)),o.leaves.push(1)}for(i.push(o),n/=2;n>=1;n/=2){var d=i[i.length-1];o=new Wp(n);for(var f=0;f<n*n;f++){a(f%n,Math.floor(f/n),2,!0,s);var m=d.getElevation(s[0],s[1]),y=d.getElevation(s[2],s[1]),v=d.getElevation(s[2],s[3]),g=d.getElevation(s[0],s[3]),_=d.isLeaf(s[0],s[1]),b=d.isLeaf(s[2],s[1]),x=d.isLeaf(s[2],s[3]),w=d.isLeaf(s[0],s[3]),k=Math.min(m.min,y.min,v.min,g.min),P=Math.max(m.max,y.max,v.max,g.max),S=_&&b&&x&&w;o.maximums.push(P),o.minimums.push(k),o.leaves.push(P-k<=5&&S?1:0)}i.push(o)}return i}(this.dem),n=i.length-1,r=i[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(i,0,0,n,0)}}return v(e,[{key:"raycastRoot",value:function(e,t,i,n,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Gp([e,t,-100],[i,n,this.maximums[0]*o],r,a)}},{key:"raycast",value:function(e,t,i,n,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var s=this.raycastRoot(e,t,i,n,r,a,o);if(null==s)return null;for(var l=[],u=[],c=[],h=[],p=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];p.length>0;){var d=p.pop(),f=d.idx,m=d.t,y=d.nodex,v=d.nodey,g=d.depth;if(this.leaves[f]){Yp(y,v,g,e,t,i,n,c,h);var _=1<<g,b=(y+0)/_,x=(y+1)/_,w=(v+0)/_,k=(v+1)/_,P=Kp(b,w,this.dem)*o,S=Kp(x,w,this.dem)*o,T=Kp(x,k,this.dem)*o,C=Kp(b,k,this.dem)*o,O=Hp(c[0],c[1],P,h[0],c[1],S,h[0],h[1],T,r,a),I=Hp(h[0],h[1],T,c[0],h[1],C,c[0],c[1],P,r,a),E=Math.min(null!==O?O:Number.MAX_VALUE,null!==I?I:Number.MAX_VALUE);if(E!==Number.MAX_VALUE)return E;var A=B([],r,a,m);if(Zp(P,S,C,T,Xp(A[0],c[0],h[0]),Xp(A[1],c[1],h[1]))>=A[2])return m}else{for(var M=0,D=0;D<this._siblingOffset.length;D++){Yp((y<<1)+this._siblingOffset[D][0],(v<<1)+this._siblingOffset[D][1],g+1,e,t,i,n,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[f]+D]*o;var j=Gp(c,h,r,a);if(null!=j){var F=j;l[D]=F;for(var L=!1,R=0;R<M&&!L;R++)F>=l[u[R]]&&(u.splice(R,0,D),L=!0);L||(u[M]=D),M++}}for(var z=0;z<M;z++){var V=u[z];p.push({idx:this.childOffsets[f]+V,t:l[V],nodex:(y<<1)+this._siblingOffset[V][0],nodey:(v<<1)+this._siblingOffset[V][1],depth:g+1})}}}return null}},{key:"_addNode",value:function(e,t,i){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(i),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(e,t,i,n,r){if(1!==e[n].isLeaf(t,i)){this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);for(var a,o=n-1,s=e[o],l=0,u=0;u<this._siblingOffset.length;u++){var c=2*t+this._siblingOffset[u][0],h=2*i+this._siblingOffset[u][1],p=s.getElevation(c,h),d=s.isLeaf(c,h),f=this._addNode(p.min,p.max,d);d&&(l|=1<<u),a||(a=f)}for(var m=0;m<this._siblingOffset.length;m++)l&1<<m||this._construct(e,2*t+this._siblingOffset[m][0],2*i+this._siblingOffset[m][1],o,a+m)}}}]),e}();function Zp(e,t,i,n,r,a){return $i($i(e,i,a),$i(t,n,a),r)}function Kp(e,t,i){var n=i.dim,r=ue(e*n-.5,0,n-1),a=ue(t*n-.5,0,n-1),o=Math.floor(r),s=Math.floor(a),l=Math.min(o+1,n-1),u=Math.min(s+1,n-1);return Zp(i.get(o,s),i.get(l,s),i.get(o,u),i.get(l,u),r-o,a-s)}var $p={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]},Jp=function(){function e(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(y(this,e),this.uid=t,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return Te('"'.concat(n,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=i.height;var o=this.dim=i.height-2;if(this.data=new Uint32Array(i.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(var s=0;s<o;s++)this.data[this._idx(-1,s)]=this.data[this._idx(0,s)],this.data[this._idx(o,s)]=this.data[this._idx(o-1,s)],this.data[this._idx(s,-1)]=this.data[this._idx(s,0)],this.data[this._idx(s,o)]=this.data[this._idx(s,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],a&&this._buildQuadTree()}}return v(e,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}},{key:"_buildQuadTree",value:function(){this._tree=new qp(this)}},{key:"get",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new Uint8Array(this.data.buffer);i&&(e=ue(e,-1,this.dim),t=ue(t,-1,this.dim));var r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])}},{key:"unpackVector",get:function(){return $p[this.encoding]}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"_unpackMapbox",value:function(e,t,i){return(256*e*256+256*t+i)/10-1e4}},{key:"_unpackTerrarium",value:function(e,t,i){return 256*e+t+i/256-32768}},{key:"getPixels",value:function(){return new Ul({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}},{key:"backfillBorder",value:function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var n=t*this.dim,r=t*this.dim+this.dim,a=i*this.dim,o=i*this.dim+this.dim;switch(t){case-1:n=r-1;break;case 1:r=n+1}switch(i){case-1:a=o-1;break;case 1:o=a+1}for(var s=-t*this.dim,l=-i*this.dim,u=a;u<o;u++)for(var c=n;c<r;c++)this.data[this._idx(c,u)]=e.data[this._idx(c+s,u+l)]}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}}],[{key:"getUnpackVector",value:function(e){return $p[e]}},{key:"pack",value:function(t,i){var n=[0,0,0,0],r=e.getUnpackVector(i),a=Math.floor((t+r[3])/r[2]);return n[2]=a%256,a=Math.floor(a/256),n[1]=a%256,a=Math.floor(a/256),n[0]=a,n}}]),e}();oa("DEMData",Jp),oa("DemMinMaxQuadTree",qp,{omit:["dem"]});var Qp=function(){function e(t,i){y(this,e),this.max=t,this.onRemove=i,this.reset()}return v(e,[{key:"reset",value:function(){for(var e in this.data){var t,i=p(this.data[e]);try{for(i.s();!(t=i.n()).done;){var n=t.value;n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}}catch(r){i.e(r)}finally{i.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,i){var n=this,r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var a={value:t,timeout:void 0};if(void 0!==i&&(a.timeout=setTimeout((function(){n.remove(e,a)}),i)),this.data[r].push(a),this.order.push(r),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var i=e.wrapped().key,n=void 0===t?0:this.data[i].indexOf(t),r=this.data[i][n];return this.data[i].splice(n,1),r.timeout&&clearTimeout(r.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(r.value),this.order.splice(this.order.indexOf(i),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var i in this.data){var n,r=p(this.data[i]);try{for(r.s();!(n=r.n()).done;){var a=n.value;e(a.value)||t.push(a)}}catch(u){r.e(u)}finally{r.f()}}for(var o=0,s=t;o<s.length;o++){var l=s[o];this.remove(l.value.tileID,l)}}}]),e}(),ed=function(e){f(i,e);var t=m(i);function i(e,n,a){var o;return y(this,i),(o=t.call(this)).id=e,o._onlySymbols=a,n.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),n.on("error",(function(){o._sourceErrored=!0})),o._source=n,o._tiles={},o._cache=new Qp(0,o._unloadTile.bind(r(o))),o._timers={},o._cacheTimers={},o._minTileCacheSize=null,o._maxTileCacheSize=null,o._loadedParentTiles={},o._coveredTiles={},o._state=new Up,o}return v(i,[{key:"onAdd",value:function(e){this.map=e,this._minTileCacheSize=e?e._minTileCacheSize:null,this._maxTileCacheSize=e?e._maxTileCacheSize:null}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[t];i.upload(e),i.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return de(this._tiles).map((function(e){return e.tileID})).sort(td).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(e){var t=this,i=[];for(var n in this._tiles)this._isIdRenderable(+n,e)&&i.push(this._tiles[n]);return e?i.sort((function(e,i){var n=e.tileID,r=i.tileID,a=new g(n.canonical.x,n.canonical.y)._rotate(t.transform.angle),o=new g(r.canonical.x,r.canonical.y)._rotate(t.transform.angle);return n.overscaledZ-r.overscaledZ||o.y-a.y||o.x-a.x})).map((function(e){return e.tileID.key})):i.map((function(e){return e.tileID})).sort(td).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}},{key:"_reloadTile",value:function(e,t){var i=this._tiles[e];i&&("loading"!==i.state&&(i.state=t),this._loadTile(i,this._tileLoaded.bind(this,i,e,t)))}},{key:"_tileLoaded",value:function(e,t,i,n){if(n)if(e.state="errored",404!==n.status)this._source.fire(new At(n,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){var r=this.map.painter.terrain;this.update(this.transform,r.getScaledDemTileSize(),!0),r.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Be.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Et("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),i=0;i<t.length;i++){var n=t[i];if(e.neighboringTiles&&e.neighboringTiles[n]){var r=this.getTileByID(n);a(e,r),a(r,e)}}function a(e,t){if(e.dem&&!e.dem.borderReady){e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;var i=t.tileID.canonical.x-e.tileID.canonical.x,n=t.tileID.canonical.y-e.tileID.canonical.y,r=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===i&&0===n||Math.abs(n)>1||(Math.abs(i)>1&&(1===Math.abs(i+r)?i+=r:1===Math.abs(i-r)&&(i-=r)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,i,n),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,i,n){for(var r in this._tiles){var a=this._tiles[r];if(!(n[r]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>i)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var l=o;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){n[o.key]=o;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var i=this._loadedParentTiles[e.key];return i&&i.tileID.overscaledZ>=t?i:null}for(var n=e.overscaledZ-1;n>=t;n--){var r=e.scaledTo(n),a=this._getLoadedTile(r);if(a)return a}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}},{key:"updateCacheSize",value:function(e,t){t=t||this._source.tileSize;var i=Math.ceil(e.width/t)+1,n=Math.ceil(e.height/t)+1,r=Math.floor(i*n*5),a="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,r):r,o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(o)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var i={};for(var n in this._tiles){var r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),i[r.tileID.key]=r}for(var a in this._tiles=i,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(+o,this._tiles[o])}}},{key:"update",value:function(e,t,n){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||n)){var a;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new Ap(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(a=a.filter((function(e){return r._source.hasTile(e)})))):a=[];var o=this._updateRetainedTiles(a);if(id(this._source.type)&&0!==a.length){for(var s={},l={},u=0,c=Object.keys(o);u<c.length;u++){var h=c[u],d=o[h],f=this._tiles[h];if(f&&!(f.fadeEndTime&&f.fadeEndTime<=Be.now())){var m=this.findLoadedParent(d,Math.max(d.overscaledZ-i.maxOverzooming,this._source.minzoom));m&&(this._addTile(m.tileID),s[m.tileID.key]=m.tileID),l[h]=d}}var y=a[a.length-1].overscaledZ;for(var v in this._tiles){var g=this._tiles[v];if(!o[v]&&g.hasData())for(var _=g.tileID;_.overscaledZ>y;){_=_.scaledTo(_.overscaledZ-1);var b=this._tiles[_.key];if(b&&b.hasData()&&l[_.key]){o[v]=g.tileID;break}}}for(var x in s)o[x]||(this._coveredTiles[x]=!0,o[x]=s[x])}for(var w in o)this._tiles[w].clearFadeHold();var k,P=function(e,t){var i=[];for(var n in e)n in t||i.push(n);return i}(this._tiles,o),S=p(P);try{for(S.s();!(k=S.n()).done;){var T=k.value,C=this._tiles[T];C.hasSymbolBuckets&&!C.holdingForFade()?C.setHoldDuration(this.map._fadeDuration):C.hasSymbolBuckets&&!C.symbolFadeFinished()||this._removeTile(+T)}}catch(O){S.e(O)}finally{S.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}},{key:"_updateRetainedTiles",value:function(e){var t={};if(0===e.length)return t;var n,r={},a=e.reduce((function(e,t){return Math.min(e,t.overscaledZ)}),1/0),o=e[0].overscaledZ,s=Math.max(o-i.maxOverzooming,this._source.minzoom),l=Math.max(o+i.maxUnderzooming,this._source.minzoom),u={},c=p(e);try{for(c.s();!(n=c.n()).done;){var h=n.value,d=this._addTile(h);t[h.key]=h,d.hasData()||a<this._source.maxzoom&&(u[h.key]=h)}}catch(P){c.e(P)}finally{c.f()}this._retainLoadedChildren(u,a,l,t);var f,m=p(e);try{for(m.s();!(f=m.n()).done;){var y=f.value,v=this._tiles[y.key];if(!v.hasData()){if(y.canonical.z>=this._source.maxzoom){var g=y.children(this._source.maxzoom)[0],_=this.getTile(g);if(_&&_.hasData()){t[g.key]=g;continue}}else{var b=y.children(this._source.maxzoom);if(t[b[0].key]&&t[b[1].key]&&t[b[2].key]&&t[b[3].key])continue}for(var x=v.wasRequested(),w=y.overscaledZ-1;w>=s;--w){var k=y.scaledTo(w);if(r[k.key])break;if(r[k.key]=!0,!(v=this.getTile(k))&&x&&(v=this._addTile(k)),v&&(t[k.key]=k,x=v.wasRequested(),v.hasData()))break}}}}catch(P){m.e(P)}finally{m.f()}return t}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],i=void 0,n=this._tiles[e].tileID;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){i=this._loadedParentTiles[n.key];break}t.push(n.key);var r=n.scaledTo(n.overscaledZ-1);if(i=this._getLoadedTile(r))break;n=r}for(var a=0,o=t;a<o.length;a++){var s=o[a];this._loadedParentTiles[s]=i}}}},{key:"_addTile",value:function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var i=Boolean(t);if(!i){var n=this.map?this.map.painter:null,r="raster"===this._source.type||"raster-dem"===this._source.type;t=new Od(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,n,r),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,i||this._source.fire(new Et("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}},{key:"_setTileReloadTimer",value:function(e,t){var i=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((function(){i._reloadTile(e,"expired"),delete i._timers[e]}),n))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset()}},{key:"tilesIn",value:function(e,t,i){var n=[],r=this.transform;if(!r)return n;for(var a in this._tiles){var o=this._tiles[a];if(i&&o.clearQueryDebugViz(),!o.holdingForFade()){var s=e.containsTile(o,r,t);s&&n.push(s)}}return n}},{key:"getVisibleCoordinates",value:function(e){var t,i=this,n=this.getRenderableIds(e).map((function(e){return i._tiles[e].tileID})),r=p(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(id(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Be.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,i){this._state.updateState(e=e||"_geojsonTileLayer",t,i)}},{key:"removeFeatureState",value:function(e,t,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,i)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,i){var n=this._tiles[e];n&&n.setDependencies(t,i)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var i in this._tiles)this._tiles[i].hasDependency(e,t)&&this._reloadTile(+i,"reloading");this._cache.filter((function(i){return!i.hasDependency(e,t)}))}},{key:"_preloadTiles",value:function(e,t){var i,n=this,r=new Map,a=Array.isArray(e)?e:[e],o=this.map.painter.terrain,s=this.usedForTerrain&&o?o.getScaledDemTileSize():this._source.tileSize,l=p(a);try{for(l.s();!(i=l.n()).done;){var u,c=i.value,h=c.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),d=p(h);try{for(d.s();!(u=d.n()).done;){var f=u.value;r.set(f.key,f)}}catch(v){d.e(v)}finally{d.f()}this.usedForTerrain&&c.updateElevation(!1)}}catch(v){l.e(v)}finally{l.f()}var m=Array.from(r.values()),y="raster"===this._source.type||"raster-dem"===this._source.type;pe(m,(function(e,t){var i=new Od(e,n._source.tileSize*e.overscaleFactor(),n.transform.tileZoom,n.map.painter,y);n._loadTile(i,(function(e){"raster-dem"===n._source.type&&i.dem&&n._backfillDEM(i),t(e,i)}))}),t)}}]),i}(Mt);function td(e,t){var i=Math.abs(2*e.wrap)-+(e.wrap<0),n=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-i||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function id(e){return"raster"===e||"image"===e||"video"===e}ed.maxOverzooming=10,ed.maxUnderzooming=3;var nd=function(){function e(t,i,n){y(this,e),this._demTile=t,this._dem=this._demTile.dem,this._scale=i,this._offset=n}return v(e,[{key:"tileCoordToPixel",value:function(e,t){var i=t*this._scale+this._offset[1],n=Math.floor(e*this._scale+this._offset[0]),r=Math.floor(i);return new g(n,r)}},{key:"getElevationAt",value:function(e,t,i,n){var r=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],o=Math.floor(r),s=Math.floor(a),l=this._dem;return n=!!n,i?$i($i(l.get(o,s,n),l.get(o,s+1,n),a-s),$i(l.get(o+1,s,n),l.get(o+1,s+1,n),a-s),r-o):l.get(o,s,n)}},{key:"getElevationAtPixel",value:function(e,t,i){return this._dem.get(e,t,!!i)}},{key:"getMeterToDEM",value:function(e){return(1<<this._demTile.tileID.canonical.z)*$s(1,e)*this._dem.stride}}],[{key:"create",value:function(t,i,n){var r=n||t.findDEMTileFor(i);if(r&&r.dem){var a=r.dem,o=r.tileID,s=1<<i.canonical.z-o.canonical.z;return new e(r,r.tileSize/Ws/s,[(i.canonical.x/s-o.canonical.x)*a.dim,(i.canonical.y/s-o.canonical.y)*a.dim])}}}]),e}(),rd=function(){function e(t,i){y(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ta(Ws,16,0),this.featureIndexArray=new os,this.promoteId=i}return v(e,[{key:"insert",value:function(e,t,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,n,r,a);for(var s=this.grid,l=0;l<t.length;l++){for(var u=t[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var p=u[h];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<Ws&&c[1]<Ws&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}}},{key:"loadVTLayers",value:function(){if(!this.vtLayers)for(var e in this.vtLayers=new Wu.VectorTile(new Oc(this.rawTileData)).layers,this.sourceLayerCoder=new Bp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={},this.vtLayers)this.vtFeatures[e]=[];return this.vtLayers}},{key:"query",value:function(e,t,i,n){var r=this;this.loadVTLayers();var a=e.params||{},o=_r(a.filter),s=e.tileResult,l=e.transform,u=s.bufferedTilespaceBounds,c=this.grid.query(u.min.x,u.min.y,u.max.x,u.max.y,(function(e,t,i,n){return wl(s.bufferedTilespaceGeometry,e,t,i,n)}));c.sort(od);var h=null;l.elevation&&c.length>0&&(h=nd.create(l.elevation,this.tileID));for(var p,d={},f=function(l){var u=c[l];if(u===p)return"continue";p=u;var f=r.featureIndexArray.get(u),m=null;r.loadMatchingFeature(d,f,o,a.layers,a.availableImages,t,i,n,(function(t,i,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=ll(t,r.tileID.canonical,e.tileTransform)),i.queryIntersectsFeature(s,t,n,m,r.z,e.transform,e.pixelPosMatrix,h,a)}))},m=0;m<c.length;m++)f(m);return d}},{key:"loadMatchingFeature",value:function(e,t,i,n,r,a,o,s,l){var u=t.featureIndex,c=t.bucketIndex,h=t.sourceLayerIndex,p=t.layoutVertexArrayOffset,d=this.bucketLayerIDs[c];if(!n||function(e,t){for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>=0)return!0;return!1}(n,d)){var f=this.sourceLayerCoder.decode(h),m=this.vtLayers[f].feature(u);if(i.needGeometry){var y=ul(m,!0);if(!i.filter(new oo(this.tileID.overscaledZ),y,this.tileID.canonical))return}else if(!i.filter(new oo(this.tileID.overscaledZ),m))return;for(var v=this.getId(m,f),g=0;g<d.length;g++){var _=d[g];if(!(n&&n.indexOf(_)<0)){var b=a[_];if(b){var x={};void 0!==v&&s&&(x=s.getState(b.sourceLayer||"_geojsonTileLayer",v));var w=fe({},o[_]);w.paint=ad(w.paint,b.paint,m,x,r),w.layout=ad(w.layout,b.layout,m,x,r);var k=!l||l(m,b,x,p);if(k){var P=new Np(m,this.z,this.x,this.y,v);P.layer=w;var S=e[_];void 0===S&&(S=e[_]=[]),S.push({featureIndex:u,feature:P,intersectionZ:k})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,i,n,r,a,o,s){var l={};this.loadVTLayers();var u,c=_r(r),h=p(e);try{for(h.s();!(u=h.n()).done;){var d=u.value;this.loadMatchingFeature(l,{bucketIndex:i,sourceLayerIndex:n,featureIndex:d,layoutVertexArrayOffset:0},c,a,o,s,t)}}catch(f){h.e(f)}finally{h.f()}return l}},{key:"loadFeature",value:function(e){var t=e.featureIndex,i=e.sourceLayerIndex;this.loadVTLayers();var n=this.sourceLayerCoder.decode(i),r=this.vtFeatures[n];if(r[t])return r[t];var a=this.vtLayers[n].feature(t);return r[t]=a,a}},{key:"hasLayer",value:function(e){var t,i=p(this.bucketLayerIDs);try{for(i.s();!(t=i.n()).done;){var n,r=t.value,a=p(r);try{for(a.s();!(n=a.n()).done;)if(e===n.value)return!0}catch(o){a.e(o)}finally{a.f()}}}catch(o){i.e(o)}finally{i.f()}return!1}},{key:"getId",value:function(e,t){var i=e.id;return this.promoteId&&"boolean"==typeof(i=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(i=Number(i)),i}}]),e}();function ad(e,t,i,n,r){return we(e,(function(e,a){var o=t instanceof mo?t.get(a):null;return o&&o.evaluate?o.evaluate(i,n,r):o}))}function od(e,t){return t-e}oa("FeatureIndex",rd,{omit:["rawTileData","sourceLayerCoder"]});for(var sd=To([{name:"a_pos",type:"Int16",components:2}]),ld=32,ud=33,cd=new Uint16Array(8184),hd=0;hd<2046;hd++){var pd=hd+2,dd=0,fd=0,md=0,yd=0,vd=0,gd=0;for(1&pd?md=yd=vd=ld:dd=fd=gd=ld;(pd>>=1)>1;){var _d=dd+md>>1,bd=fd+yd>>1;1&pd?(md=dd,yd=fd,dd=vd,fd=gd):(dd=md,fd=yd,md=vd,yd=gd),vd=_d,gd=bd}var xd=4*hd;cd[xd+0]=dd,cd[xd+1]=fd,cd[xd+2]=md,cd[xd+3]=yd}var wd=new Uint16Array(2178),kd=new Uint8Array(1089),Pd=new Uint16Array(1089);function Sd(e){return 0===e?-.03125:32===e?.03125:0}var Td=To([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Cd={type:2,extent:Ws,loadGeometry:function(){return[[new g(0,0),new g(8193,0),new g(8193,8193),new g(0,8193),new g(0,0)]]}},Od=function(){function e(t,i,n,r,a){y(this,e),this.tileID=t,this.uid=ye(),this.uses=0,this.tileSize=i,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=a,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}return v(e,[{key:"registerFadeDuration",value:function(e){var t=e+this.timeAdded;t<Be.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"tileTransform",get:function(){return this._tileTransform||(this._tileTransform=Hd(this.tileID.canonical,this.projection)),this._tileTransform}},{key:"loadVectorData",value:function(e,t,i){if(this.unloadVectorData(),this.state="loaded",e){for(var n in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var i={};if(!t)return i;var n,r=p(e);try{var a=function(){var e=n.value,r=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==r.length){e.layers=r,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return r.filter((function(t){return t.id===e}))[0]})));var a,o=p(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;i[s.id]=e}}catch(l){o.e(l)}finally{o.f()}}};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return i}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[n];if(r instanceof op){if(this.hasSymbolBuckets=!0,!i)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof op&&o.hasRTLText){this.hasRTLText=!0,ao.isLoading()||ao.isLoaded()||"deferred"!==no()||ro();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(l))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Jo}},{key:"unloadVectorData",value:function(){if(this.hasData()){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this.globeGridBuffer&&(this.globeGridBuffer.destroy(),this.globeGridBuffer=null),this.globePoleBuffer&&(this.globePoleBuffer.destroy(),this.globePoleBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var n=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new wp(e,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new wp(e,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new wp(e,this.lineAtlas.image,n.ALPHA),this.lineAtlas.uploaded=!0)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,i,n,r,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:n,pixelPosMatrix:o,transform:a,params:r,tileTransform:this.tileTransform},e,t,i):{}}},{key:"querySourceFeatures",value:function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var n=i.loadVTLayers(),r=t?t.sourceLayer:"",a=n._geojsonTileLayer||n[r];if(a)for(var o=_r(t&&t.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,h={z:l,x:u,y:c},p=0;p<a.length;p++){var d=a.feature(p);if(o.needGeometry){var f=ul(d,!0);if(!o.filter(new oo(this.tileID.overscaledZ),f,this.tileID.canonical))continue}else if(!o.filter(new oo(this.tileID.overscaledZ),d))continue;var m=i.getId(d,r),y=new Np(d,l,u,c,m);y.tile=h,e.push(y)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var t=this.expirationTime;if(e.cacheControl){var i=Ee(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var n=Date.now(),r=!1;if(this.expirationTime>n)r=!1;else if(t)if(this.expirationTime<t)r=!0;else{var a=this.expirationTime-t;a?this.expirationTime=n+Math.max(a,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length&&t){var i=this.latestFeatureIndex.loadVTLayers(),n=t.style.listImages();for(var r in this.buckets)if(t.style.hasLayer(r)){var a=this.buckets[r],o=a.layers[0].sourceLayer||"_geojsonTileLayer",s=i[o],l=e[o];if(s&&l&&0!==Object.keys(l).length){if(a.update(l,s,n,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a instanceof ac||a instanceof Iu){var u=t.style._getSourceCache(a.layers[0].source);t._terrain&&t._terrain.enabled&&u&&a.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(u.id,this.tileID)}var c=t&&t.style&&t.style.getLayer(r);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(a)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Be.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=Be.now()+e}},{key:"setDependencies",value:function(e,t){var i,n={},r=p(t);try{for(r.s();!(i=r.n()).done;)n[i.value]=!0}catch(a){r.e(a)}finally{r.f()}this.dependencies[e]=n}},{key:"hasDependency",value:function(e,t){var i,n=p(e);try{for(n.s();!(i=n.n()).done;){var r=i.value,a=this.dependencies[r];if(a){var o,s=p(t);try{for(s.s();!(o=s.n()).done;)if(a[o.value])return!0}catch(l){s.e(l)}finally{s.f()}}}}catch(l){n.e(l)}finally{n.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}},{key:"_makeDebugTileBoundsBuffers",value:function(e,t){if(t&&"mercator"!==t.name&&!this._tileDebugBuffer){for(var i=ll(Cd,this.tileID.canonical,this.tileTransform)[0],n=new Oo,r=new qo,a=0;a<i.length;a++){var o=i[a],s=o.x,l=o.y;n.emplaceBack(s,l),r.emplaceBack(a)}r.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(r),this._tileDebugBuffer=e.createVertexBuffer(n,Td.members),this._tileDebugSegments=Us.simpleSegment(0,0,n.length,r.length)}}},{key:"_makeTileBoundsBuffers",value:function(e,t){if(!this._tileBoundsBuffer&&t&&"mercator"!==t.name){var i,n,r=ll(Cd,this.tileID.canonical,this.tileTransform)[0];if(this.isRaster){var a=function(e,t){for(var i=Hd(e,t),n=Math.pow(2,e.z),r=0;r<ud;r++)for(var a=0;a<ud;a++){var o=Js((e.x+(a+Sd(a))/ld)/n),s=Qs((e.y+(r+Sd(r))/ld)/n),l=t.project(o,s),u=r*ud+a;wd[2*u+0]=Math.round((l.x*i.scale-i.x)*Ws),wd[2*u+1]=Math.round((l.y*i.scale-i.y)*Ws)}kd.fill(0),Pd.fill(0);for(var c=2045;c>=0;c--){var h=4*c,p=cd[h+0],d=cd[h+1],f=cd[h+2],m=cd[h+3],y=p+f>>1,v=d+m>>1,g=y+v-d,_=v+p-y,b=d*ud+p,x=m*ud+f,w=v*ud+y,k=Math.hypot((wd[2*b+0]+wd[2*x+0])/2-wd[2*w+0],(wd[2*b+1]+wd[2*x+1])/2-wd[2*w+1])>=16;if(kd[w]=kd[w]||(k?1:0),c<1022){var P=(d+_>>1)*ud+(p+g>>1),S=(m+_>>1)*ud+(f+g>>1);kd[w]=kd[w]||kd[P]||kd[S]}}var T=new Io,C=new Bo,O=0;function I(e,t){var i=t*ud+e;return 0===Pd[i]&&(T.emplaceBack(wd[2*i+0],wd[2*i+1],e*Ws/ld,t*Ws/ld),Pd[i]=++O),Pd[i]-1}function E(e,t,i,n,r,a){var o=e+i>>1,s=t+n>>1;if(Math.abs(e-r)+Math.abs(t-a)>1&&kd[s*ud+o])E(r,a,e,t,o,s),E(i,n,r,a,o,s);else{var l=I(e,t),u=I(i,n),c=I(r,a);C.emplaceBack(l,u,c)}}return E(0,0,ld,ld,ld,0),E(ld,ld,0,0,0,ld),{vertices:T,indices:C}}(this.tileID.canonical,t);i=a.vertices,n=a.indices}else{i=new Io,n=new Bo;var o,s=p(r);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=l.x,c=l.y;i.emplaceBack(u,c,0,0)}}catch(f){s.e(f)}finally{s.f()}for(var h=Yl(i.int16,void 0,4),d=0;d<h.length;d+=3)n.emplaceBack(h[d],h[d+1],h[d+2])}this._tileBoundsBuffer=e.createVertexBuffer(i,Td.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(n),this._tileBoundsSegments=Us.simpleSegment(0,0,i.length,n.length)}}}]),e}(),Id=To([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_merc_pos",components:2},{type:"Float32",name:"a_uv",components:2}]),Ed=To([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),Ad=Id.members;function Md(e,t){var i=e.fovAboveCenter,n=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,r=(e._camera.position[2]*e.worldSize-n)/Math.cos(e._pitch),a=Math.sin(i)*r/Math.sin(Math.max(Math.PI/2-e._pitch-i,.01)),o=Math.sin(e._pitch)*a+r;return Math.min(1.01*o,r*(1/e._horizonShift))}var Dd=Ws/Math.PI/2,jd=-Dd,Fd=Dd,Ld=[new Al([jd,jd,jd],[Fd,Fd,Fd]),new Al([jd,jd,jd],[0,0,Fd]),new Al([0,jd,jd],[Fd,0,Fd]),new Al([jd,0,jd],[0,Fd,Fd]),new Al([0,0,jd],[Fd,Fd,Fd])];function Rd(e){if(e.z<=1)return Ld[e.z+2*e.y+e.x];for(var t=zd(e),i=h(t,2),n=i[0],r=i[1],a=[Bd(n[0],n[1]),Bd(n[0],r[1]),Bd(r[0],n[1]),Bd(r[0],r[1])],o=[Fd,Fd,Fd],s=[jd,jd,jd],l=0,u=a;l<u.length;l++){var c=u[l];o[0]=Math.min(o[0],c[0]),o[1]=Math.min(o[1],c[1]),o[2]=Math.min(o[2],c[2]),s[0]=Math.max(s[0],c[0]),s[1]=Math.max(s[1],c[1]),s[2]=Math.max(s[2],c[2])}return new Al(o,s)}function zd(e){var t=Math.pow(2,e.z),i=e.x/t,n=(e.x+1)/t,r=(e.y+1)/t;return[[Qs(e.y/t),Js(i)],[Qs(r),Js(n)]]}function Vd(e,t,i,n){return i=ne(i),n||(n=Dd),[e*Math.sin(i)*n,-t*n,e*Math.cos(i)*n]}function Bd(e,t,i){return Vd(Math.cos(ne(e)),Math.sin(ne(e)),t,i)}function Nd(e){return 16383/Math.max.apply(Math,c(Y([],e.max,e.min)))}function Ud(e){var t=P(new Float64Array(16)),i=1/Nd(e);return T(t,t,e.min),C(t,t,[i,i,i]),t}function Wd(e,t,i){var n=t/(2*Math.PI),r=function(e){var t=Ws/(2*Math.PI);return e/(2*Math.PI)/t}(t);if(!i){var a=ue(e.center.lat,-85.051129,tl);i=[Zs(e.center.lng)*t,Ks(a)*t]}var o=P(new Float64Array(16));return T(o,o,[i[0],i[1],-n]),C(o,o,[r,r,r]),O(o,o,ne(-e._center.lat)),I(o,o,ne(-e._center.lng)),o}var Gd=function(){function e(t){y(this,e);var i=this._createGridIndices();this.gridIndexBuffer=t.createIndexBuffer(i,!0),this.gridSegments=Us.simpleSegment(0,0,4225,8192);var n=this._createPoleTriangleIndices();this.poleIndexBuffer=t.createIndexBuffer(n,!0),this.poleSegments=Us.simpleSegment(0,0,66,64);var r=new Ho;r.emplaceBack(-1,1,1,0,0,0,0),r.emplaceBack(1,1,1,0,0,1,0),r.emplaceBack(1,-1,1,0,0,1,1),r.emplaceBack(-1,-1,1,0,0,0,1);var a=new Bo;a.emplaceBack(0,1,2),a.emplaceBack(2,3,0),this.atmosphereVertexBuffer=t.createVertexBuffer(r,Ed.members),this.atmosphereIndexBuffer=t.createIndexBuffer(a),this.atmosphereSegments=Us.simpleSegment(0,0,4,2)}return v(e,[{key:"destroy",value:function(){this.poleIndexBuffer.destroy(),this.gridIndexBuffer.destroy(),this.poleSegments.destroy(),this.gridSegments.destroy(),this.atmosphereVertexBuffer.destroy(),this.atmosphereIndexBuffer.destroy(),this.atmosphereSegments.destroy(),this.wireframeIndexBuffer&&(this.wireframeIndexBuffer.destroy(),this.wireframeSegments.destroy())}},{key:"_createPoleTriangleIndices",value:function(){for(var e=new Bo,t=0;t<=64;t++)e.emplaceBack(0,t+1,t+2);return e}},{key:"_createGridIndices",value:function(){for(var e=new Bo,t=function(t,i){var n=65*i+t;e.emplaceBack(n+1,n,n+65),e.emplaceBack(n+65,n+65+1,n+1)},i=0;i<64;i++)for(var n=0;n<64;n++)t(n,i);return e}},{key:"getWirefameBuffer",value:function(e){if(!this.wireframeSegments){var t=this._createWireframeGrid();this.wireframeIndexBuffer=e.createIndexBuffer(t),this.wireframeSegments=Us.simpleSegment(0,0,4096,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}},{key:"_createWireframeGrid",value:function(){for(var e=new Yo,t=function(t,i){var n=65*i+t;e.emplaceBack(n,n+1),e.emplaceBack(n,n+65),e.emplaceBack(n,n+65+1)},i=0;i<64;i++)for(var n=0;n<64;n++)t(n,i);return e}}],[{key:"createPoleTriangleVertices",value:function(e,t,i){var n=new Ho,r=t/Math.PI/2;n.emplaceBack(0,-r,0,0,0,.5,i?0:1);for(var a,o=360/e,s=Math.cos(ne(85)),l=Math.sin(ne(85)),u=0;u<=64;u++){var c=u/64,h=Vd(s,l,0*(1-(a=c))+o*a,r);n.emplaceBack(h[0],h[1],h[2],0,0,c,i?0:1)}return n}},{key:"createGridVertices",value:function(e){var t=Math.pow(2,e.z),i=function(e,t,i){return e*(1-i)+t*i},n=zd(e),r=h(n,2),a=r[0],o=r[1],s=new Ho,l=function(e){var t,i,n=P(new Float64Array(16)),r=Nd(e);return C(n,n,[r,r,r]),T(n,n,((t=[])[0]=-(i=e.min)[0],t[1]=-i[1],t[2]=-i[2],t)),n}(Rd(e));s.reserve(4096);for(var u=0;u<65;u++)for(var c=i(a[0],o[0],u/64),p=Ks(c),d=p*t-e.y,f=Math.sin(ne(c)),m=Math.cos(ne(c)),y=0;y<65;y++){var v=y/64,g=i(a[1],o[1],v),_=Vd(m,f,g);G(_,_,l);var b=Zs(g);s.emplaceBack(_[0],_[1],_[2],b,p,v,d)}return s}}]),e}();function Hd(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};var i=Math.pow(2,-e.z),n=e.x*i,r=(e.x+1)*i,a=e.y*i,o=(e.y+1)*i,s=Js(n),l=Js(r),u=Qs(a),c=Qs(o),h=t.project(s,u),p=t.project(l,u),d=t.project(l,c),f=t.project(s,c),m=Math.min(h.x,p.x,d.x,f.x),y=Math.min(h.y,p.y,d.y,f.y),v=Math.max(h.x,p.x,d.x,f.x),g=Math.max(h.y,p.y,d.y,f.y),_=i/16;function b(e,i,n,r,a,o){var s=(n+a)/2,l=(r+o)/2,u=t.project(Js(s),Qs(l)),c=Math.max(0,m-u.x,y-u.y,u.x-v,u.y-g);m=Math.min(m,u.x),v=Math.max(v,u.x),y=Math.min(y,u.y),g=Math.max(g,u.y),c>_&&(b(e,u,n,r,s,l),b(u,i,s,l,a,o))}b(h,p,n,a,r,a),b(p,d,r,a,r,o),b(d,f,r,o,n,o),b(f,h,n,o,n,a),m-=_,y-=_,v+=_,g+=_;var x=1/Math.max(v-m,g-y);return{scale:x,x:m*x,y:y*x,x2:v*x,y2:g*x,projection:t}}var Xd=v((function e(t){y(this,e);var i={},n=[];for(var r in t){var a=t[r],o=i[r]={};for(var s in a.glyphs){var l=a.glyphs[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u=l.metrics.localGlyph?2:1,c={x:0,y:0,w:l.bitmap.width+2*u,h:l.bitmap.height+2*u};n.push(c),o[s]=c}}}var h=$c(n),p=h.w,d=h.h,f=new Nl({width:p||1,height:d||1});for(var m in t){var v=t[m];for(var g in v.glyphs){var _=v.glyphs[+g];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var b=i[m][g],x=_.metrics.localGlyph?2:1;Nl.copy(_.bitmap,f,{x:0,y:0},{x:b.x+x,y:b.y+x},_.bitmap)}}}this.image=f,this.positions=i}));oa("GlyphAtlas",Xd);var Yd=function(){function e(t){y(this,e),this.tileID=new Ap(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Hd(t.tileID.canonical,t.projection),this.projection=t.projection}return v(e,[{key:"parse",value:function(e,t,i,n,r){var a=this;this.status="parsing",this.data=e,this.collisionBoxArray=new Jo;var o=new Bp(Object.keys(e.layers).sort()),s=new rd(this.tileID,this.promoteId);s.bucketLayerIDs=[];var l,u,c,h,d={},f=new kp(256,256),m={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:f,availableImages:i},y=t.familiesBySource[this.source];for(var v in y){var g=e.layers[v];if(g){var _,b=!1,x=!1,w=p(y[v]);try{for(w.s();!(_=w.n()).done;)"symbol"===_.value[0].type?b=!0:x=!0}catch(R){w.e(R)}finally{w.f()}if((!0!==this.isSymbolTile||b)&&(!1!==this.isSymbolTile||x)){1===g.version&&Te('Vector tile source "'.concat(this.source,'" layer "').concat(v,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var k=o.encode(v),P=[],S=0;S<g.length;S++){var T=g.feature(S),C=s.getId(T,v);P.push({feature:T,id:C,index:S,sourceLayerIndex:k})}var O,I=p(y[v]);try{for(I.s();!(O=I.n()).done;){var E=O.value,A=E[0];void 0!==this.isSymbolTile&&"symbol"===A.type!==this.isSymbolTile||A.minzoom&&this.zoom<Math.floor(A.minzoom)||A.maxzoom&&this.zoom>=A.maxzoom||"none"!==A.visibility&&(qd(E,this.zoom,i),(d[A.id]=A.createBucket({index:s.bucketLayerIDs.length,layers:E,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:k,sourceID:this.source,enableTerrain:this.enableTerrain,availableImages:i})).populate(P,m,this.tileID.canonical,this.tileTransform),s.bucketLayerIDs.push(E.map((function(e){return e.id}))))}}catch(R){I.e(R)}finally{I.f()}}}}f.trim();var M={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},D=we(m.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(D).length?n.send("getGlyphs",{uid:this.uid,stacks:D},(function(e,t){l||(l=e,u=t,L.call(a))}),void 0,!1,M):u={};var j=Object.keys(m.iconDependencies);j.length?n.send("getImages",{icons:j,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){l||(l=e,c=t,L.call(a))}),void 0,!1,M):c={};var F=Object.keys(m.patternDependencies);function L(){if(l)return r(l);if(u&&c&&h){var e=new Xd(u),t=new Qc(c,h);for(var n in d){var a=d[n];a instanceof op?(qd(a.layers,this.zoom,i),Gh(a,u,e.positions,c,t.iconPositions,this.showCollisionBoxes,i,this.tileID.canonical,this.tileZoom,this.projection),a.projection=this.projection.name):a.hasPattern&&(a instanceof ac||a instanceof Iu||a instanceof qu)&&(qd(a.layers,this.zoom,i),a.addFeatures(m,this.tileID.canonical,t.patternPositions,i))}this.status="done",r(null,{buckets:de(d).filter((function(e){return!e.isEmpty()})),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:f,imageAtlas:t,glyphMap:this.returnDependencies?u:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}F.length?n.send("getImages",{icons:F,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){l||(l=e,h=t,L.call(a))}),void 0,!1,M):h={},L.call(this)}}]),e}();function qd(e,t,i){var n,r=new oo(t),a=p(e);try{for(a.s();!(n=a.n()).done;)n.value.recalculate(r,i)}catch(o){a.e(o)}finally{a.f()}}var Zd=function(){function e(t){y(this,e),this.entries={},this.scheduler=t}return v(e,[{key:"request",value:function(e,t,i,n){var r=this,a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){var o=h(a.result,2),s=o[0],l=o[1];return this.scheduler?this.scheduler.add((function(){n(s,l)}),t):n(s,l),function(){}}return a.callbacks.push(n),a.cancel||(a.cancel=i((function(i,n){a.result=[i,n];var o,s=p(a.callbacks);try{var l=function(){var e=o.value;r.scheduler?r.scheduler.add((function(){e(i,n)}),t):e(i,n)};for(s.s();!(o=s.n()).done;)l()}catch(u){s.e(u)}finally{s.f()}setTimeout((function(){return delete r.entries[e]}),3e3)}))),function(){a.result||(a.callbacks=a.callbacks.filter((function(e){return e!==n})),a.callbacks.length||(a.cancel(),delete r.entries[e]))}}}]),e}();function Kd(e,t,i){var n=JSON.stringify(e.request);return e.data&&(this.deduped.entries[n]={result:[null,e.data]}),this.deduped.request(n,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(function(t){var n=bt(e.request,(function(e,n,r,a){e?t(e):n&&t(null,{vectorTile:i?void 0:new Wu.VectorTile(new Oc(n)),rawData:n,cacheControl:r,expires:a})}));return function(){n.cancel(),t()}}),t)}var $d=P(new Float64Array(16)),Jd=function(){function e(t,i){y(this,e),this._tr=t,this._worldSize=i}return v(e,[{key:"createInversionMatrix",value:function(){return $d}},{key:"createTileMatrix",value:function(e){var t,i,n,r=e.canonical,a=P(new Float64Array(16)),o=this._tr.projection;if(o.isReprojectedInTileSpace){var s=Hd(r,o);t=1,i=s.x+e.wrap*s.scale,n=s.y,C(a,a,[t/s.scale,t/s.scale,this._tr.pixelsPerMeter/this._worldSize])}else t=this._worldSize/this._tr.zoomScale(r.z),i=(r.x+Math.pow(2,r.z)*e.wrap)*t,n=r.y*t;return T(a,a,[i,n,0]),C(a,a,[t/Ws,t/Ws,1]),a}},{key:"pointCoordinate",value:function(e,t,i){var n=this._tr.horizonLineFromTop(!1),r=new g(e,Math.max(n,t));return this._tr.rayIntersectionCoordinate(this._tr.pointRayIntersection(r,i))}},{key:"upVector",value:function(){return[0,0,1]}},{key:"upVectorScale",value:function(){return 1}}]),e}(),Qd={name:"albers",range:[4,7],center:[-96,37.5],parallels:[29.5,45.5],zAxisUnit:"meters",conic:!0,isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],initializeConstants:function(){if(!this.constants||!ee(this.parallels,this.constants.parallels)){var e=Math.sin(ne(this.parallels[0])),t=(e+Math.sin(ne(this.parallels[1])))/2,i=1+e*(2*t-e),n=Math.sqrt(i)/t;this.constants={n:t,c:i,r0:n,parallels:this.parallels}}},project:function(e,t){this.initializeConstants();var i=ne(e-this.center[0]),n=ne(t),r=this.constants,a=r.n,o=r.c,s=r.r0,l=Math.sqrt(o-2*a*Math.sin(n))/a;return{x:l*Math.sin(i*a),y:l*Math.cos(i*a)-s,z:0}},unproject:function(e,t){this.initializeConstants();var i=this.constants,n=i.n,r=i.c,a=i.r0+t,o=Math.atan2(e,Math.abs(a))*Math.sign(a);a*n<0&&(o-=Math.PI*Math.sign(e)*Math.sign(a));var s=ne(this.center[0])*n,l=re((o=he(o,-Math.PI-s,Math.PI-s))/n)+this.center[0],u=Math.asin(ue((r-(e*e+a*a)*n*n)/(2*n),-1,1)),c=ue(re(u),-85.051129,tl);return new Xs(l,c)},projectTilePoint:function(e,t){return{x:e,y:t,z:0}},locationPoint:function(e,t){return e._coordinatePoint(e.locationCoordinate(t),!1)},pixelsPerMeter:function(e,t){return $s(1,e)*t},farthestPixelDistance:function(e){return Md(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:function(e,t){return new Jd(e,t)}},ef=1.340264,tf=-.081106,nf=893e-6,rf=.003796,af=Math.sqrt(3)/2,of={name:"equalEarth",center:[0,0],range:[3.5,7],zAxisUnit:"meters",isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],project:function(e,t){t=t/180*Math.PI,e=e/180*Math.PI;var i=Math.asin(af*Math.sin(t)),n=i*i,r=n*n*n;return{x:.5*(e*Math.cos(i)/(af*(ef+3*tf*n+r*(7*nf+9*rf*n)))/Math.PI+.5),y:1-.5*(i*(ef+tf*n+r*(nf+rf*n))/Math.PI+1),z:0}},unproject:function(e,t){e=(2*e-.5)*Math.PI;for(var i,n=t=(2*(1-t)-1)*Math.PI,r=n*n,a=r*r*r,o=0;o<12&&(a=(r=(n=ue(n-(i=(n*(ef+tf*r+a*(nf+rf*r))-t)/(ef+3*tf*r+a*(7*nf+9*rf*r))),-Math.PI/3,Math.PI/3))*n)*r*r,!(Math.abs(i)<1e-12));++o);var s=af*e*(ef+3*tf*r+a*(7*nf+9*rf*r))/Math.cos(n),l=Math.asin(Math.sin(n)/af),u=ue(180*s/Math.PI,-180,180),c=ue(180*l/Math.PI,-85.051129,tl);return new Xs(u,c)},projectTilePoint:function(e,t){return{x:e,y:t,z:0}},locationPoint:function(e,t){return e._coordinatePoint(e.locationCoordinate(t),!1)},pixelsPerMeter:function(e,t){return $s(1,e)*t},farthestPixelDistance:function(e){return Md(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:function(e,t){return new Jd(e,t)}},sf={name:"equirectangular",supportsWorldCopies:!0,center:[0,0],range:[3.5,7],zAxisUnit:"meters",wrap:!0,isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],project:function(e,t){return{x:.5+e/360,y:.5-t/360,z:0}},unproject:function(e,t){var i=360*(e-.5),n=ue(360*(.5-t),-85.051129,tl);return new Xs(i,n)},projectTilePoint:function(e,t){return{x:e,y:t,z:0}},locationPoint:function(e,t){return e._coordinatePoint(e.locationCoordinate(t),!1)},pixelsPerMeter:function(e,t){return $s(1,e)*t},farthestPixelDistance:function(e){return Md(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:function(e,t){return new Jd(e,t)}},lf=Math.PI/2;function uf(e){return Math.tan((lf+e)/2)}var cf={name:"lambertConformalConic",range:[3.5,7],zAxisUnit:"meters",center:[0,30],parallels:[30,30],conic:!0,isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],initializeConstants:function(){if(!this.constants||!ee(this.parallels,this.constants.parallels)){var e=ne(this.parallels[0]),t=ne(this.parallels[1]),i=Math.cos(e),n=e===t?Math.sin(e):Math.log(i/Math.cos(t))/Math.log(uf(t)/uf(e)),r=i*Math.pow(uf(e),n)/n;this.constants={n:n,f:r,parallels:this.parallels}}},project:function(e,t){this.initializeConstants(),t=ne(t),e=ne(e-this.center[0]);var i=1e-6,n=this.constants,r=n.n,a=n.f;a>0?t<-lf+i&&(t=-lf+i):t>lf-i&&(t=lf-i);var o=a/Math.pow(uf(t),r),s=o*Math.sin(r*e),l=a-o*Math.cos(r*e);return{x:.5*(s/Math.PI+.5),y:1-.5*(l/Math.PI+.5),z:0}},unproject:function(e,t){this.initializeConstants(),e=(2*e-.5)*Math.PI,t=(2*(1-t)-.5)*Math.PI;var i=this.constants,n=i.n,r=i.f,a=r-t,o=Math.sign(a),s=Math.sign(n)*Math.sqrt(e*e+a*a),l=Math.atan2(e,Math.abs(a))*o;a*n<0&&(l-=Math.PI*Math.sign(e)*o);var u=ue(re(l/n)+this.center[0],-180,180),c=ue(re(2*Math.atan(Math.pow(r/s,1/n))-lf),-85.051129,tl);return new Xs(u,c)},projectTilePoint:function(e,t){return{x:e,y:t,z:0}},locationPoint:function(e,t){return e._coordinatePoint(e.locationCoordinate(t),!1)},pixelsPerMeter:function(e,t){return $s(1,e)*t},farthestPixelDistance:function(e){return Md(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:function(e,t){return new Jd(e,t)}},hf={name:"mercator",wrap:!0,requiresDraping:!1,supportsWorldCopies:!0,supportsTerrain:!0,supportsFog:!0,supportsFreeCamera:!0,zAxisUnit:"meters",center:[0,0],project:function(e,t){return{x:Zs(e),y:Ks(t),z:0}},unproject:function(e,t){var i=Js(e),n=Qs(t);return new Xs(i,n)},projectTilePoint:function(e,t){return{x:e,y:t,z:0}},locationPoint:function(e,t){return e._coordinatePoint(e.locationCoordinate(t),!1)},pixelsPerMeter:function(e,t){return $s(1,e)*t},farthestPixelDistance:function(e){return Md(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:function(e,t){return new Jd(e,t)}},pf=ne(tl),df={name:"naturalEarth",center:[0,0],range:[3.5,7],isReprojectedInTileSpace:!0,zAxisUnit:"meters",unsupportedLayers:["custom"],project:function(e,t){var i=(t=ne(t))*t,n=i*i;return{x:.5*((e=ne(e))*(.8707-.131979*i+n*(n*(.003971*i-.001529*n)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+i*(.015085+n*(.028874*i-.044475-.005916*n)))/Math.PI+1),z:0}},unproject:function(e,t){e=(2*e-.5)*Math.PI;var i=t=(2*(1-t)-1)*Math.PI,n=25,r=0,a=i*i;do{var o=(a=i*i)*a;i=ue(i-(r=(i*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))),-pf,pf)}while(Math.abs(r)>1e-6&&--n>0);var s=ue(re(e/(.8707+(a=i*i)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979))),-180,180),l=re(i);return new Xs(s,l)},projectTilePoint:function(e,t){return{x:e,y:t,z:0}},locationPoint:function(e,t){return e._coordinatePoint(e.locationCoordinate(t),!1)},pixelsPerMeter:function(e,t){return $s(1,e)*t},farthestPixelDistance:function(e){return Md(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:function(e,t){return new Jd(e,t)}},ff=ne(tl),mf={albers:Qd,equalEarth:of,equirectangular:sf,lambertConformalConic:cf,mercator:hf,naturalEarth:df,winkelTripel:{name:"winkelTripel",center:[0,0],range:[3.5,7],zAxisUnit:"meters",isReprojectedInTileSpace:!0,unsupportedLayers:["custom"],project:function(e,t){t=ne(t),e=ne(e);var i=Math.cos(t),n=2/Math.PI,r=Math.acos(i*Math.cos(e/2)),a=Math.sin(r)/r,o=.5*(e*n+2*i*Math.sin(e/2)/a)||0,s=.5*(t+Math.sin(t)/a)||0;return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}},unproject:function(e,t){var i=e=(2*e-.5)*Math.PI,n=t=(2*(1-t)-1)*Math.PI,r=25,a=1e-6,o=0,s=0;do{var l=Math.cos(n),u=Math.sin(n),c=2*u*l,h=u*u,p=l*l,d=Math.cos(i/2),f=Math.sin(i/2),m=2*d*f,y=f*f,v=1-p*d*d,g=v?1/v:0,_=v?Math.acos(l*d)*Math.sqrt(1/v):0,b=.5*(2*_*l*f+2*i/Math.PI)-e,x=.5*(_*u+n)-t,w=.5*g*(p*y+_*l*d*h)+1/Math.PI,k=g*(m*c/4-_*u*f),P=.125*g*(c*f-_*u*p*m),S=.5*g*(h*d+_*y*l)+.5,T=k*P-S*w;s=(b*P-x*w)/T,i=ue(i-(o=(x*k-b*S)/T),-Math.PI,Math.PI),n=ue(n-s,-ff,ff)}while((Math.abs(o)>a||Math.abs(s)>a)&&--r>0);return new Xs(re(i),re(n))},projectTilePoint:function(e,t){return{x:e,y:t,z:0}},locationPoint:function(e,t){return e._coordinatePoint(e.locationCoordinate(t),!1)},pixelsPerMeter:function(e,t){return $s(1,e)*t},farthestPixelDistance:function(e){return Md(e,this.pixelsPerMeter(e.center.lat,e.worldSize))},createTileTransform:function(e,t){return new Jd(e,t)}}};e.ARRAY_TYPE=w,e.AUTH_ERR_MSG=Ye,e.Aabb=Al,e.Actor=function(){function e(t,i,n){y(this,e),this.target=t,this.parent=i,this.mapId=n,this.callbacks={},this.cancelCallbacks={},be(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ie()?t:b,this.scheduler=new Cp}return v(e,[{key:"send",value:function(e,t,i,n){var r=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=o,this.callbacks[s]=i);var l=Fe(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:e,hasCallback:!!i,targetMapId:n,mustQueue:a,sourceMapId:this.mapId,data:ca(t,l)},l),{cancel:function(){i&&delete r.callbacks[s],r.target.postMessage({id:s,type:"<cancel>",targetMapId:n,sourceMapId:r.mapId})}}}},{key:"receive",value:function(e){var t=this,i=e.data,n=i.id;if(n&&(!i.targetMapId||this.mapId===i.targetMapId))if("<cancel>"===i.type){var r=this.cancelCallbacks[n];delete this.cancelCallbacks[n],r&&r.cancel()}else if(i.mustQueue||Ie()){var a=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((function(){return t.processTask(n,i)}),a&&a.metadata||{type:"message"})}else this.processTask(n,i)}},{key:"processTask",value:function(e,t){var i=this;if("<response>"===t.type){var n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(ha(t.error)):n(null,ha(t.data)))}else{var r=Fe(this.globalScope)?void 0:[],a=t.hasCallback?function(t,n){delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:t?ca(t):null,data:ca(n,r)},r)}:function(e){},o=ha(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,o,a);else if(this.parent.getWorkerSource){var s=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,s[0],o.source)[s[1]](o,a)}else a(new Error("Could not find function ".concat(t.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}(),e.CanonicalTileID=Ip,e.Color=ai,e.ColorMode=Lp,e.CullFaceMode=Vp,e.DEMData=Jp,e.DataConstantProperty=yo,e.DedupedRequest=Zd,e.DepthMode=Dp,e.EXTENT=Ws,e.Elevation=function(){function e(){y(this,e)}return v(e,[{key:"getAtPointOrZero",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(e,t)||0}},{key:"getAtPoint",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];null==t&&(t=null);var n=this._source();if(!n)return t;if(e.y<0||e.y>1)return t;var r=n.getSource().maxzoom,a=1<<r,o=Math.floor(e.x),s=e.x-o,l=new Ap(r,o,r,Math.floor(s*a),Math.floor(e.y*a)),u=this.findDEMTileFor(l);if(!u||!u.dem)return t;var c=u.dem,h=1<<u.tileID.canonical.z,p=(s*h-u.tileID.canonical.x)*c.dim,d=(e.y*h-u.tileID.canonical.y)*c.dim,f=Math.floor(p),m=Math.floor(d);return(i?this.exaggeration():1)*$i($i(c.get(f,m),c.get(f,m+1),d-m),$i(c.get(f+1,m),c.get(f+1,m+1),d-m),p-f)}},{key:"getAtTileOffset",value:function(e,t,i){var n=1<<e.canonical.z;return this.getAtPointOrZero(new il(e.wrap+(e.canonical.x+t/Ws)/n,(e.canonical.y+i/Ws)/n))}},{key:"getAtTileOffsetFunc",value:function(e,t){var i=this;return function(n){var r=i.getAtTileOffset(e,n.x,n.y),a=t.upVector(e.canonical,n.x,n.y);return V(a,a,r*t.upVectorScale(e.canonical)),a}}},{key:"getForTilePoints",value:function(e,t,i,n){var r=this,a=nd.create(this,e,n);return!!a&&(t.forEach((function(e){e[2]=r.exaggeration()*a.getElevationAt(e[0],e[1],i)})),!0)}},{key:"getMinMaxForTile",value:function(e){var t=this.findDEMTileFor(e);if(!t||!t.dem)return null;for(var i=t.dem.tree,n=t.tileID,r=1<<e.canonical.z-n.canonical.z,a=e.canonical.x/r-n.canonical.x,o=e.canonical.y/r-n.canonical.y,s=0,l=0;l<e.canonical.z-n.canonical.z&&!i.leaves[s];l++){a*=2,o*=2;var u=2*Math.floor(o)+Math.floor(a);s=i.childOffsets[s]+u,a%=1,o%=1}return{min:this.exaggeration()*i.minimums[s],max:this.exaggeration()*i.maximums[s]}}},{key:"getMinElevationBelowMSL",value:function(){throw new Error("Pure virtual method called.")}},{key:"raycast",value:function(e,t,i){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(e){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(e){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),e}(),e.ErrorEvent=At,e.EvaluationParameters=oo,e.Event=Et,e.Evented=Mt,e.Frustum=El,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GlobeSharedBuffers=Gd,e.GlyphManager=Ih,e.ImagePosition=Jc,e.LineAtlas=kp,e.LngLat=Xs,e.LngLatBounds=Gs,e.LocalGlyphMode=Oh,e.MAX_MERCATOR_LATITUDE=tl,e.MercatorCoordinate=il,e.ONE_EM=yc,e.OverscaledTileID=Ap,e.Properties=xo,e.RGBAImage=Ul,e.Ray=function(){function e(t,i){y(this,e),this.pos=t,this.dir=i}return v(e,[{key:"intersectsPlane",value:function(e,t,i){var n=U(t,this.dir);if(Math.abs(n)<1e-6)return!1;var r=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/n;return i[0]=this.pos[0]+this.dir[0]*r,i[1]=this.pos[1]+this.dir[1]*r,i[2]=this.pos[2]+this.dir[2]*r,!0}},{key:"closestPointOnSphere",value:function(e,t,i){if(function(e,t){var i=e[0],n=e[1],r=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(i-a)<=x*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-o)<=x*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=x*Math.max(1,Math.abs(r),Math.abs(s))}(this.pos,e)||0===t)return i[0]=i[1]=i[2]=0,!1;var n=h(this.dir,3),r=n[0],a=n[1],o=n[2],s=this.pos[0]-e[0],l=this.pos[1]-e[1],u=this.pos[2]-e[2],c=r*r+a*a+o*o,p=2*(s*r+l*a+u*o),d=p*p-4*c*(s*s+l*l+u*u-t*t);if(d<0){var f=Math.max(-p/2,0),m=s+r*f,y=l+a*f,v=u+o*f,g=Math.hypot(m,y,v);return i[0]=m*t/g,i[1]=y*t/g,i[2]=v*t/g,!1}var _=(-p-Math.sqrt(d))/(2*c);if(_<0){var b=Math.hypot(s,l,u);return i[0]=s*t/b,i[1]=l*t/b,i[2]=u*t/b,!1}return i[0]=s+r*_,i[1]=l+a*_,i[2]=u+o*_,!0}}]),e}(),e.RequestManager=function(){function e(t,i,n){y(this,e),this._transformRequestFn=t,this._customAccessToken=i,this._silenceAuthErrors=!!n,this._createSkuToken()}return v(e,[{key:"_createSkuToken",value:function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Xe,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeStyleURL",value:function(e,t){if(!qe(e))return e;var i=$e(e);return i.path="/styles/v1".concat(i.path),this._makeAPIURL(i,this._customAccessToken||t)}},{key:"normalizeGlyphsURL",value:function(e,t){if(!qe(e))return e;var i=$e(e);return i.path="/fonts/v1".concat(i.path),this._makeAPIURL(i,this._customAccessToken||t)}},{key:"normalizeSourceURL",value:function(e,t){if(!qe(e))return e;var i=$e(e);return i.path="/v4/".concat(i.authority,".json"),i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)}},{key:"normalizeSpriteURL",value:function(e,t,i,n){var r=$e(e);return qe(e)?(r.path="/styles/v1".concat(r.path,"/sprite").concat(t).concat(i),this._makeAPIURL(r,this._customAccessToken||n)):(r.path+="".concat(t).concat(i),Je(r))}},{key:"normalizeTileURL",value:function(e,t,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!qe(e))return e;var n=$e(e);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||i&&"raster"!==n.authority&&512===i?"@2x":"").concat(Ue.supported?".webp":"$1")),"raster"===n.authority?n.path="/".concat(Ne.RASTER_URL_PREFIX).concat(n.path):(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/".concat(Ne.TILE_URL_VERSION).concat(n.path));var r=this._customAccessToken||function(e){var t,i=p(e);try{for(i.s();!(t=i.n()).done;){var n=t.value.match(/^access_token=(.*)$/);if(n)return n[1]}}catch(r){i.e(r)}finally{i.f()}return null}(n.params)||Ne.ACCESS_TOKEN;return Ne.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(n,r)}},{key:"canonicalizeTileURL",value:function(e,t){var i=$e(e);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return e;var n="mapbox://";i.path.match(/^\/raster\/v1\//)?n+="raster/".concat(i.path.replace("/".concat(Ne.RASTER_URL_PREFIX,"/"),"")):n+="tiles/".concat(i.path.replace("/".concat(Ne.TILE_URL_VERSION,"/"),""));var r=i.params;return t&&(r=r.filter((function(e){return!e.match(/^access_token=/)}))),r.length&&(n+="?".concat(r.join("&"))),n}},{key:"canonicalizeTileset",value:function(e,t){var i,n=!!t&&qe(t),r=[],a=p(e.tiles||[]);try{for(a.s();!(i=a.n()).done;){var o=i.value;Ze(o)?r.push(this.canonicalizeTileURL(o,n)):r.push(o)}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"_makeAPIURL",value:function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=$e(Ne.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"http"===e.protocol){var r=e.params.indexOf("secure");r>=0&&e.params.splice(r,1)}if("/"!==n.path&&(e.path="".concat(n.path).concat(e.path)),!Ne.REQUIRE_ACCESS_TOKEN)return Je(e);if(t=t||Ne.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(i));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(i))}return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token=".concat(t||"")),Je(e)}}]),e}(),e.ResourceType=yt,e.SegmentVector=Us,e.SourceCache=ed,e.StencilMode=Fp,e.StructArrayLayout1ui2=qo,e.StructArrayLayout2f1f2i16=zo,e.StructArrayLayout2i4=Oo,e.StructArrayLayout2ui4=Yo,e.StructArrayLayout3f12=Ao,e.StructArrayLayout3ui6=Bo,e.StructArrayLayout4i8=Io,e.Texture=wp,e.Tile=Od,e.Transitionable=uo,e.Uniform1f=bs,e.Uniform1i=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,e,n)).current=0,r}return v(i,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}}]),i}(_s),e.Uniform2f=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,e,n)).current=[0,0],r}return v(i,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}}]),i}(_s),e.Uniform3f=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,e,n)).current=[0,0,0],r}return v(i,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}}]),i}(_s),e.Uniform4f=xs,e.UniformColor=ws,e.UniformMatrix2f=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,e,n)).current=Ss,r}return v(i,[{key:"set",value:function(e){for(var t=0;t<4;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix2fv(this.location,!1,e);break}}}]),i}(_s),e.UniformMatrix3f=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,e,n)).current=Ps,r}return v(i,[{key:"set",value:function(e){for(var t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}}]),i}(_s),e.UniformMatrix4f=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,e,n)).current=ks,r}return v(i,[{key:"set",value:function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}}]),i}(_s),e.UnwrappedTileID=Ep,e.ValidationError=jt,e.VectorTileWorkerSource=function(e){f(i,e);var t=m(i);function i(e,n,r,a,o){var s;return y(this,i),(s=t.call(this)).actor=e,s.layerIndex=n,s.availableImages=r,s.loadVectorData=o||Kd,s.loading={},s.loaded={},s.deduped=new Zd(e.scheduler),s.isSpriteLoaded=a,s.scheduler=e.scheduler,s}return v(i,[{key:"loadTile",value:function(e,t){var i=this,n=e.uid,r=e&&e.request,a=r&&r.collectResourceTiming,o=this.loading[n]=new Yd(e);o.abort=this.loadVectorData(e,(function(s,l){var u=!i.loading[n];if(delete i.loading[n],u||s||!l)return o.status="done",u||(i.loaded[n]=o),t(s);var c=l.rawData,h={};l.expires&&(h.expires=l.expires),l.cacheControl&&(h.cacheControl=l.cacheControl),o.vectorTile=l.vectorTile||new Wu.VectorTile(new Oc(c));var p=function(){o.parse(o.vectorTile,i.layerIndex,i.availableImages,i.actor,(function(e,i){if(e||!i)return t(e);var n={};if(a){var o=Tp(r);o.length>0&&(n.resourceTiming=JSON.parse(JSON.stringify(o)))}t(null,fe({rawTileData:c.slice(0)},i,h,n))}))};i.isSpriteLoaded?p():i.once("isSpriteLoaded",(function(){i.scheduler?i.scheduler.add(p,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):p()})),i.loaded=i.loaded||{},i.loaded[n]=o}))}},{key:"reloadTile",value:function(e,t){var i=this,n=this.loaded,r=e.uid,a=this;if(n&&n[r]){var o=n[r];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection;var s=function(e,n){var r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,i.availableImages,a.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}},{key:"abortTile",value:function(e,t){var i=e.uid,n=this.loading[i];n&&(n.abort&&n.abort(),delete this.loading[i]),t()}},{key:"removeTile",value:function(e,t){var i=this.loaded,n=e.uid;i&&i[n]&&delete i[n],t()}}]),i}(Mt),e.WritingMode=eh,e.ZoomHistory=pa,e.add=F,e.addDynamicAttributes=ip,e.adjoint=function(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-s*u,e[1]=r*u-n*c,e[2]=n*s-r*o,e[3]=s*l-a*c,e[4]=i*c-r*l,e[5]=r*a-i*s,e[6]=a*u-o*l,e[7]=n*l-i*u,e[8]=i*o-n*a,e},e.asyncAll=pe,e.bezier=se,e.bindAll=be,e.boundsAttributes=Td,e.bufferConvexPolygon=function(e,t){for(var i=[],n=0;n<e.length;n++){var r=he(n-1,-1,e.length-1),a=he(n+1,-1,e.length-1),o=e[n],s=e[a],l=e[r].sub(o).unit(),u=s.sub(o).unit(),c=u.angleWithSep(l.x,l.y),h=l.add(u).unit().mult(-1*t/Math.sin(c/2));i.push(o.add(h))}return i},e.cacheEntryPossiblyAdded=function(e){++mt>pt&&(e.getActor().send("enforceCacheSizeLimit",ht),mt=0)},e.calculateGlobeMatrix=Wd,e.calculateGlobeMercatorMatrix=function(e){var t=e.worldSize,i=ue(e.center.lat,-85.051129,tl),n=new g(Zs(e.center.lng)*t,Ks(i)*t),r=$s(1,e.center.lat)*t,a=e.pixelsPerMeter,o=t/(r/e.pixelsPerMeter),s=P(new Float64Array(16));return T(s,s,[n.x,n.y,0]),C(s,s,[o,o,a]),s},e.clamp=ue,e.clearTileCache=function(e){var t=b.caches.delete(ct);e&&t.catch(e).then((function(){return e()}))},e.clipLine=Ph,e.clone=function(e){var t=new w(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=Pe,e.collisionCircleLayout=mc,e.config=Ne,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new w(16);return w!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=k,e.createExpression=ar,e.createLayout=To,e.createStyleLayer=function(e){return"custom"===e.type?new dp(e):new yp[e.type](e)},e.cross=W,e.degToRad=ne,e.div=function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e},e.dot=U,e.ease=le,e.easeCubicInOut=oe,e.emitValidationErrors=ea,e.endsWith=xe,e.enforceCacheSizeLimit=function(e){dt(),et&&et.then((function(t){t.keys().then((function(i){for(var n=0;n<i.length-e;n++)t.delete(i[n])}))}))},e.evaluateSizeForFeature=_c,e.evaluateSizeForZoom=bc,e.evaluateVariableOffset=Wh,e.evented=io,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Be,e.exported$1=Ue,e.extend=fe,e.extend$1=Lt,e.filterObject=ke,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],o=i+i,s=n+n,l=r+r,u=i*o,c=n*o,h=n*s,p=r*o,d=r*s,f=r*l,m=a*o,y=a*s,v=a*l;return e[0]=1-h-f,e[1]=c+v,e[2]=p-y,e[3]=0,e[4]=c-v,e[5]=1-u-f,e[6]=d+m,e[7]=0,e[8]=p+y,e[9]=d-m,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=i,e[2]=0,e[3]=-i,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.furthestTileCorner=function(e){var t=Math.round((e+45+360)%360/90)%4;return ae[t]},e.getAABBPointSquareDist=function(e,t,i){for(var n=0,r=0;r<2;++r){var a=i?i[r]:0;e[r]>a&&(n+=(e[r]-a)*(e[r]-a)),t[r]<a&&(n+=(a-t[r])*(a-t[r]))}return n},e.getAnchorAlignment=ph,e.getAnchorJustification=Hh,e.getBounds=function(e){var t,i=1/0,n=1/0,r=-1/0,a=-1/0,o=p(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;i=Math.min(i,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),a=Math.max(a,s.y)}}catch(l){o.e(l)}finally{o.f()}return{min:new g(i,n),max:new g(r,a)}},e.getColumn=function(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]},e.getImage=Ct,e.getJSON=function(e,t){return _t(fe(e,{type:"json"}),t)},e.getMapSessionAPI=lt,e.getPerformanceMeasurement=Tp,e.getProjection=function(e){var t=mf[e.name];if(!t)throw new Error("Invalid projection name: ".concat(e.name));return t.conic?function(e,t){if(t.parallels&&Math.abs(t.parallels[0]+t.parallels[1])<.01){var i=function(e){var t=Math.max(.01,Math.cos(ne(e))),i=1/(2*Math.max(Math.PI*t,1/t));return{wrap:!0,supportsWorldCopies:!0,unsupportedLayers:["custom"],project:function(e,n){var r=ne(e)*t,a=Math.sin(ne(n))/t;return{x:r*i+.5,y:-a*i+.5,z:0}},unproject:function(e,n){var r=-(n-.5)/i,a=ue(re((e-.5)/i)/t,-180,180),o=Math.asin(ue(r*t,-1,1)),s=ue(re(o),-85.051129,tl);return new Xs(a,s)}}}(t.parallels[0]);if("lambertConformalConic"===t.name){var n=mf.mercator;i={wrap:!0,supportsWorldCopies:!0,project:n.project,unproject:n.unproject}}return fe({},e,t,i)}return fe({},e,t)}(t,e):t},e.getRTLTextPluginStatus=no,e.getReferrer=gt,e.getTilePoint=function(e,t){var i=t.x,n=t.y;return new g(((i-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*e.scale-e.x)*Ws,(n*e.scale-e.y)*Ws)},e.getTileVec3=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return j(((t.x-i)*e.scale-e.x)*Ws,(t.y*e.scale-e.y)*Ws,el(t.z,t.y))},e.getVideo=function(e,t){var i=b.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(var n=0;n<e.length;n++){var r=b.document.createElement("source");kt(e[n])||(i.crossOrigin="Anonymous"),r.src=e[n],i.appendChild(r)}return{cancel:function(){}}},e.globeBuffersForTileMesh=function(e,t,i,n){var r=e.context,a=e.transform,o=t.globeGridBuffer,s=t.globePoleBuffer;if(!o){var l=Gd.createGridVertices(i.canonical);o=t.globeGridBuffer=r.createVertexBuffer(l,Ad,!1)}if(!s){var u=Gd.createPoleTriangleVertices(n,a.tileSize*n,0===i.canonical.y);s=t.globePoleBuffer=r.createVertexBuffer(u,Ad,!1)}return[o,s]},e.globeDenormalizeECEF=Ud,e.globeMatrixForTile=function(e,t){var i,n,r=Ud(Rd(e)),a=((i=new Float64Array(16))[0]=(n=t)[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i);return E(a,a,r),a},e.globePoleMatrixForTile=function(e,t,i){var n=P(new Float64Array(16)),r=Math.pow(2,e.z),a=(e.x-r/2)/r*Math.PI*2,o=i.point,s=i.worldSize/(i.tileSize*r);return T(n,n,[o.x,o.y,-i.worldSize/Math.PI/2]),C(n,n,[s,s,s]),O(n,n,ne(-i._center.lat)),I(n,n,ne(-i._center.lng)),I(n,n,a),t&&C(n,n,[1,-1,1]),n},e.globeTileBounds=Rd,e.globeToMercatorTransition=function(e){return ce(5,6,e)},e.identity=P,e.identity$1=J,e.invert=function(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],p=t[10],d=t[11],f=t[12],m=t[13],y=t[14],v=t[15],g=i*s-n*o,_=i*l-r*o,b=i*u-a*o,x=n*l-r*s,w=n*u-a*s,k=r*u-a*l,P=c*m-h*f,S=c*y-p*f,T=c*v-d*f,C=h*y-p*m,O=h*v-d*m,I=p*v-d*y,E=g*I-_*O+b*C+x*T-w*S+k*P;return E?(e[0]=(s*I-l*O+u*C)*(E=1/E),e[1]=(r*O-n*I-a*C)*E,e[2]=(m*k-y*w+v*x)*E,e[3]=(p*w-h*k-d*x)*E,e[4]=(l*T-o*I-u*S)*E,e[5]=(i*I-r*T+a*S)*E,e[6]=(y*b-f*k-v*_)*E,e[7]=(c*k-p*b+d*_)*E,e[8]=(o*O-s*T+u*P)*E,e[9]=(n*T-i*O-a*P)*E,e[10]=(f*w-m*b+v*g)*E,e[11]=(h*b-c*w-d*g)*E,e[12]=(s*S-o*C-l*P)*E,e[13]=(i*C-n*S+r*P)*E,e[14]=(m*_-f*x-y*g)*E,e[15]=(c*x-h*_+p*g)*E,e):null},e.isMapAuthenticated=function(e){return ut.has(e)},e.isMapboxURL=qe,e.latFromMercatorY=Qs,e.len=Z,e.length=D,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.loadVectorTile=Kd,e.makeRequest=_t,e.mercatorXfromLng=Zs,e.mercatorYfromLat=Ks,e.mercatorZfromAltitude=$s,e.mul=E,e.mul$1=q,e.multiply=function(e,t,i){var n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],p=i[0],d=i[1],f=i[2],m=i[3],y=i[4],v=i[5],g=i[6],_=i[7],b=i[8];return e[0]=p*n+d*o+f*u,e[1]=p*r+d*s+f*c,e[2]=p*a+d*l+f*h,e[3]=m*n+y*o+v*u,e[4]=m*r+y*s+v*c,e[5]=m*a+y*l+v*h,e[6]=g*n+_*o+b*u,e[7]=g*r+_*s+b*c,e[8]=g*a+_*l+b*h,e},e.multiply$1=S,e.multiply$2=R,e.nextPowerOfTwo=ge,e.normalize=N,e.normalize$1=function(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],o=i*i+n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=i*o,e[1]=n*o,e[2]=r*o,e[3]=a*o,e},e.number=$i,e.ortho=function(e,t,i,n,r,a,o){var s=1/(t-i),l=1/(n-r),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+i)*s,e[13]=(r+n)*l,e[14]=(o+a)*u,e[15]=1,e},e.pbf=Oc,e.perspective=function(e,t,i,n,r){var a,o=1/Math.tan(t/2);return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=(r+n)*(a=1/(n-r)),e[14]=2*r*n*a):(e[10]=-1,e[14]=-2*n),e},e.pick=function(e,t){for(var i={},n=0;n<t.length;n++){var r=t[n];r in e&&(i[r]=e[r])}return i},e.plugin=ao,e.pointGeometry=g,e.polygonIntersectsBox=wl,e.polygonIntersectsPolygon=pl,e.polygonizeBounds=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=new g(i,i),a=e.sub(r),o=t.add(r),s=[a,new g(o.x,a.y),o,new g(a.x,o.y)];return n&&s.push(a),s},e.posAttributes=sd,e.postMapLoadEvent=ot,e.postTurnstileEvent=rt,e.potpack=$c,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=re,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Ja,pluginURL:Qa}),io.on("pluginStateChange",e),e},e.removeAuthState=function(e){ut.delete(e)},e.renderColorRamp=Gl,e.rotateX=O,e.rotateX$1=Q,e.rotateY=I,e.rotateZ=function(e,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r+u*n,e[1]=o*r+c*n,e[2]=s*r+h*n,e[3]=l*r+p*n,e[4]=u*r-a*n,e[5]=c*r-o*n,e[6]=h*r-s*n,e[7]=p*r-l*n,e},e.rotateZ$1=function(e,t,i){i*=.5;var n=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(i),l=Math.cos(i);return e[0]=n*l+r*s,e[1]=r*l-n*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e},e.scale=C,e.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},e.scale$2=V,e.scaleAndAdd=B,e.setCacheLimits=function(e,t){ht=e,pt=t},e.setColumn=function(e,t,i){e[4*t+0]=i[0],e[4*t+1]=i[1],e[4*t+2]=i[2],e[4*t+3]=i[3]},e.setRTLTextPlugin=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ja===qa||Ja===Za||Ja===Ka)throw new Error("setRTLTextPlugin cannot be called multiple times.");Qa=Be.resolveURL(e),Ja=qa,$a=t,to(),i||ro()},e.smoothstep=ce,e.spec=Dt,e.storeAuthState=function(e,t){t?ut.add(e):ut.delete(e)},e.sub=Y,e.subtract=L,e.symbolSize=xc,e.tileAABB=function(e,t,i,n,r,a,o,s,l){if("globe"===l.name){for(var u=Rd(new Ep(a,new Ip(i,n,r)).canonical).getCorners(),c=Number.MAX_VALUE,h=[-c,-c,-c],p=[c,c,c],d=Wd(e,t),f=0;f<u.length;f++)G(u[f],u[f],d),y=p,v=u[f],(m=p)[0]=Math.min(y[0],v[0]),m[1]=Math.min(y[1],v[1]),m[2]=Math.min(y[2],v[2]),z(h,h,u[f]);return new Al(p,h)}var m,y,v,g=Hd({z:i,x:n,y:r},l);return new Al([(a+g.x/g.scale)*t,t*(g.y/g.scale),o],[(a+g.x2/g.scale)*t,t*(g.y2/g.scale),s])},e.tileTransform=Hd,e.transformMat3=function(e,t,i){var n=t[0],r=t[1],a=t[2];return e[0]=n*i[0]+r*i[3]+a*i[6],e[1]=n*i[1]+r*i[4]+a*i[7],e[2]=n*i[2]+r*i[5]+a*i[8],e},e.transformMat4=G,e.transformMat4$1=K,e.transformQuat=H,e.translate=T,e.transpose=function(e,t){if(e===t){var i=t[1],n=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=n,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=eo,e.uniqueId=ye,e.validateCustomStyleLayer=function(e){var t=[],i=e.id;return void 0===i&&t.push({message:"layers.".concat(i,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(i,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(i,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateFog=$r,e.validateLight=Kr,e.validateStyle=Zr,e.values=de,e.vectorTile=Wu,e.version=t,e.warnOnce=Te,e.window=b,e.wrap=he})),g(["./shared"],(function(e){function t(e){var i=typeof e;if("number"===i||"boolean"===i||"string"===i||null==e)return JSON.stringify(e);if(Array.isArray(e)){var n,r="[",a=p(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;r+="".concat(t(o),",")}}catch(c){a.e(c)}finally{a.f()}return"".concat(r,"]")}for(var s=Object.keys(e).sort(),l="{",u=0;u<s.length;u++)l+="".concat(JSON.stringify(s[u]),":").concat(t(e[s[u]]),",");return"".concat(l,"}")}function i(i){var n,r="",a=p(e.refProperties);try{for(a.s();!(n=a.n()).done;){var o=n.value;r+="/".concat(t(i[o]))}}catch(s){a.e(s)}finally{a.f()}return r}var n=function(){function t(e){y(this,t),this.keyCache={},e&&this.replace(e)}return v(t,[{key:"replace",value:function(e){this._layerConfigs={},this._layers={},this.update(e,[])}},{key:"update",value:function(t,n){var r,a=this,o=p(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;this._layerConfigs[s.id]=s,(this._layers[s.id]=e.createStyleLayer(s)).compileFilter(),this.keyCache[s.id]&&delete this.keyCache[s.id]}}catch(x){o.e(x)}finally{o.f()}var l,u=p(n);try{for(u.s();!(l=u.n()).done;){var c=l.value;delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}}catch(x){u.e(x)}finally{u.f()}this.familiesBySource={};var h,d=function(e,t){for(var n={},r=0;r<e.length;r++){var a=t&&t[e[r].id]||i(e[r]);t&&(t[e[r].id]=a);var o=n[a];o||(o=n[a]=[]),o.push(e[r])}var s=[];for(var l in n)s.push(n[l]);return s}(e.values(this._layerConfigs),this.keyCache),f=p(d);try{for(f.s();!(h=f.n()).done;){var m=h.value.map((function(e){return a._layers[e.id]})),y=m[0];if("none"!==y.visibility){var v=y.source||"",g=this.familiesBySource[v];g||(g=this.familiesBySource[v]={});var _=y.sourceLayer||"_geojsonTileLayer",b=g[_];b||(b=g[_]=[]),b.push(m)}}}catch(x){f.e(x)}finally{f.f()}}}]),t}(),r=e.window.ImageBitmap,a=function(){function t(){y(this,t)}return v(t,[{key:"loadTile",value:function(t,i){var n=t.uid,a=t.encoding,o=t.rawImageData,s=t.padding,l=t.buildQuadTree,u=r&&o instanceof r?this.getImageData(o,s):o;i(null,new e.DEMData(n,u,a,s<1,l))}},{key:"getImageData",value:function(t,i){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var n=this.offscreenCanvasContext.getImageData(-i,-i,t.width+2*i,t.height+2*i);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:n.width,height:n.height},n.data)}}]),t}(),l=function e(t,i){var n,r=t&&t.type;if("FeatureCollection"===r)for(n=0;n<t.features.length;n++)e(t.features[n],i);else if("GeometryCollection"===r)for(n=0;n<t.geometries.length;n++)e(t.geometries[n],i);else if("Feature"===r)e(t.geometry,i);else if("Polygon"===r)u(t.coordinates,i);else if("MultiPolygon"===r)for(n=0;n<t.coordinates.length;n++)u(t.coordinates[n],i);return t};function u(e,t){if(0!==e.length){c(e[0],t);for(var i=1;i<e.length;i++)c(e[i],!t)}}function c(e,t){for(var i=0,n=0,r=0,a=e.length,o=a-1;r<a;o=r++){var s=(e[r][0]-e[o][0])*(e[o][1]+e[r][1]),l=i+s;n+=Math.abs(i)>=Math.abs(s)?i-l+s:s-l+i,i=l}i+n>=0!=!!t&&e.reverse()}var d=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(){function t(i){y(this,t),this._feature=i,this.extent=e.EXTENT,this.type=i.type,this.properties=i.tags,"id"in i&&!isNaN(i.id)&&(this.id=parseInt(i.id,10))}return v(t,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var t,i=[],n=p(this._feature.geometry);try{for(n.s();!(t=n.n()).done;){var r=t.value;i.push([new e.pointGeometry(r[0],r[1])])}}catch(f){n.e(f)}finally{n.f()}return i}var a,o=[],s=p(this._feature.geometry);try{for(s.s();!(a=s.n()).done;){var l,u=a.value,c=[],h=p(u);try{for(h.s();!(l=h.n()).done;){var d=l.value;c.push(new e.pointGeometry(d[0],d[1]))}}catch(f){h.e(f)}finally{h.f()}o.push(c)}}catch(f){s.e(f)}finally{s.f()}return o}},{key:"toGeoJSON",value:function(e,t,i){return d.call(this,e,t,i)}}]),t}(),_=function(){function t(i){y(this,t),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=i.length,this._features=i}return v(t,[{key:"feature",value:function(e){return new g(this._features[e])}}]),t}(),b=e.vectorTile.VectorTileFeature,x=w;function w(e,t){this.options=t||{},this.features=e,this.length=e.length}function k(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}w.prototype.feature=function(e){return new k(this.features[e],this.options.extent)},k.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var i=0;i<t.length;i++){for(var n=t[i],r=[],a=0;a<n.length;a++)r.push(new e.pointGeometry(n[a][0],n[a][1]));this.geometry.push(r)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,i=-1/0,n=1/0,r=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),r=Math.max(r,l.y)}return[t,n,i,r]},k.prototype.toGeoJSON=b.prototype.toGeoJSON;var P=T,S=x;function T(t){var i=new e.pbf;return function(e,t){for(var i in e.layers)t.writeMessage(3,C,e.layers[i])}(t,i),i.finish()}function C(e,t){var i;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<e.length;i++)n.feature=e.feature(i),t.writeMessage(2,O,n);var r=n.keys;for(i=0;i<r.length;i++)t.writeStringField(3,r[i]);var a=n.values;for(i=0;i<a.length;i++)t.writeMessage(4,D,a[i])}function O(e,t){var i=e.feature;void 0!==i.id&&t.writeVarintField(1,i.id),t.writeMessage(2,I,e),t.writeVarintField(3,i.type),t.writeMessage(4,M,i)}function I(e,t){var i=e.feature,n=e.keys,r=e.values,a=e.keycache,o=e.valuecache;for(var s in i.properties){var l=i.properties[s],u=a[s];if(null!==l){void 0===u&&(n.push(s),a[s]=u=n.length-1),t.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,p=o[h];void 0===p&&(r.push(l),o[h]=p=r.length-1),t.writeVarint(p)}}}function E(e,t){return(t<<3)+(7&e)}function A(e){return e<<1^e>>31}function M(e,t){for(var i=e.loadGeometry(),n=e.type,r=0,a=0,o=i.length,s=0;s<o;s++){var l=i[s],u=1;1===n&&(u=l.length),t.writeVarint(E(1,u));for(var c=3===n?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==n&&t.writeVarint(E(2,c-1));var p=l[h].x-r,d=l[h].y-a;t.writeVarint(A(p)),t.writeVarint(A(d)),r+=p,a+=d}3===n&&t.writeVarint(E(7,1))}}function D(e,t){var i=typeof e;"string"===i?t.writeStringField(1,e):"boolean"===i?t.writeBooleanField(7,e):"number"===i&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function j(e,t,i,n,r,a){if(!(r-n<=i)){var o=n+r>>1;F(e,t,o,n,r,a%2),j(e,t,i,n,o-1,a+1),j(e,t,i,o+1,r,a+1)}}function F(e,t,i,n,r,a){for(;r>n;){if(r-n>600){var o=r-n+1,s=i-n+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);F(e,t,i,Math.max(n,Math.floor(i-s*u/o+c)),Math.min(r,Math.floor(i+(o-s)*u/o+c)),a)}var h=t[2*i+a],p=n,d=r;for(L(e,t,n,i),t[2*r+a]>h&&L(e,t,n,r);p<d;){for(L(e,t,p,d),p++,d--;t[2*p+a]<h;)p++;for(;t[2*d+a]>h;)d--}t[2*n+a]===h?L(e,t,n,d):L(e,t,++d,r),d<=i&&(n=d+1),i<=d&&(r=d-1)}}function L(e,t,i,n){R(e,i,n),R(t,2*i,2*n),R(t,2*i+1,2*n+1)}function R(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function z(e,t,i,n){var r=e-i,a=t-n;return r*r+a*a}P.fromVectorTileJs=T,P.fromGeojsonVt=function(e,t){t=t||{};var i={};for(var n in e)i[n]=new x(e[n].features,t),i[n].name=n,i[n].version=t.version,i[n].extent=t.extent;return T({layers:i})},P.GeoJSONWrapper=S;var V,B=function(e){return e[0]},N=function(e){return e[1]},U=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;y(this,e),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),l=this.coords=new a(2*t.length),u=0;u<t.length;u++)s[u]=u,l[2*u]=i(t[u]),l[2*u+1]=n(t[u]);j(s,l,r,0,s.length-1,0)}return v(e,[{key:"range",value:function(e,t,i,n){return function(e,t,i,n,r,a,o){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var h=u.pop(),p=u.pop(),d=u.pop();if(p-d<=o)for(var f=d;f<=p;f++)s=t[2*f],l=t[2*f+1],s>=i&&s<=r&&l>=n&&l<=a&&c.push(e[f]);else{var m=Math.floor((d+p)/2);s=t[2*m],l=t[2*m+1],s>=i&&s<=r&&l>=n&&l<=a&&c.push(e[m]);var y=(h+1)%2;(0===h?i<=s:n<=l)&&(u.push(d),u.push(m-1),u.push(y)),(0===h?r>=s:a>=l)&&(u.push(m+1),u.push(p),u.push(y))}}return c}(this.ids,this.coords,e,t,i,n,this.nodeSize)}},{key:"within",value:function(e,t,i){return function(e,t,i,n,r,a){for(var o=[0,e.length-1,0],s=[],l=r*r;o.length;){var u=o.pop(),c=o.pop(),h=o.pop();if(c-h<=a)for(var p=h;p<=c;p++)z(t[2*p],t[2*p+1],i,n)<=l&&s.push(e[p]);else{var d=Math.floor((h+c)/2),f=t[2*d],m=t[2*d+1];z(f,m,i,n)<=l&&s.push(e[d]);var y=(u+1)%2;(0===u?i-r<=f:n-r<=m)&&(o.push(h),o.push(d-1),o.push(y)),(0===u?i+r>=f:n+r>=m)&&(o.push(d+1),o.push(c),o.push(y))}}return s}(this.ids,this.coords,e,t,i,this.nodeSize)}}]),e}(),W={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},G=Math.fround||(V=new Float32Array(1),function(e){return V[0]=+e,V[0]}),H=function(){function e(t){y(this,e),this.options=Q(Object.create(W),t),this.trees=new Array(this.options.maxZoom+1)}return v(e,[{key:"load",value:function(e){var t=this.options,i=t.log,n=t.minZoom,r=t.maxZoom,a=t.nodeSize;i&&console.time("total time");var o="prepare ".concat(e.length," points");i&&console.time(o),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(Y(e[l],l));this.trees[r+1]=new U(s,ee,te,a,Float32Array),i&&console.timeEnd(o);for(var u=r;u>=n;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new U(s,ee,te,a,Float32Array),i&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return i&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var i=((e[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[1])),r=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,r=180;else if(i>r){var o=this.getClusters([i,n,180,a],t),s=this.getClusters([-180,n,r,a],t);return o.concat(s)}var l,u=this.trees[this._limitZoom(t)],c=u.range(K(i),$(a),K(r),$(n)),h=[],d=p(c);try{for(d.s();!(l=d.n()).done;){var f=l.value,m=u.points[f];h.push(m.numPoints?q(m):this.points[m.index])}}catch(y){d.e(y)}finally{d.f()}return h}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),i=this._getOriginZoom(e),n="No cluster with the specified id.",r=this.trees[i];if(!r)throw new Error(n);var a=r.points[t];if(!a)throw new Error(n);var o,s=this.options.radius/(this.options.extent*Math.pow(2,i-1)),l=r.within(a.x,a.y,s),u=[],c=p(l);try{for(c.s();!(o=c.n()).done;){var h=o.value,d=r.points[h];d.parentId===e&&u.push(d.numPoints?q(d):this.points[d.index])}}catch(f){c.e(f)}finally{c.f()}if(0===u.length)throw new Error(n);return u}},{key:"getLeaves",value:function(e,t,i){var n=[];return this._appendLeaves(n,e,t=t||10,i=i||0,0),n}},{key:"getTile",value:function(e,t,i){var n=this.trees[this._limitZoom(e)],r=Math.pow(2,e),a=this.options,o=a.extent,s=a.radius/o,l=(i-s)/r,u=(i+1+s)/r,c={features:[]};return this._addTileFeatures(n.range((t-s)/r,l,(t+1+s)/r,u),n.points,t,i,r,c),0===t&&this._addTileFeatures(n.range(1-s/r,l,1,u),n.points,r,i,r,c),t===r-1&&this._addTileFeatures(n.range(0,l,s/r,u),n.points,-1,i,r,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var i=this.getChildren(e);if(t++,1!==i.length)break;e=i[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,i,n,r){var a,o=this.getChildren(t),s=p(o);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.properties;if(u&&u.cluster?r+u.point_count<=n?r+=u.point_count:r=this._appendLeaves(e,u.cluster_id,i,n,r):r<n?r++:e.push(l),e.length===i)break}}catch(c){s.e(c)}finally{s.f()}return r}},{key:"_addTileFeatures",value:function(e,t,i,n,r,a){var o,s=p(e);try{for(s.s();!(o=s.n()).done;){var l=t[o.value],u=l.numPoints,c=void 0,h=void 0,d=void 0;if(u)c=Z(l),h=l.x,d=l.y;else{var f=this.points[l.index];c=f.properties,h=K(f.geometry.coordinates[0]),d=$(f.geometry.coordinates[1])}var m={type:1,geometry:[[Math.round(this.options.extent*(h*r-i)),Math.round(this.options.extent*(d*r-n))]],tags:c},y=void 0;u?y=l.id:this.options.generateId?y=l.index:this.points[l.index].id&&(y=this.points[l.index].id),void 0!==y&&(m.id=y),a.features.push(m)}}catch(v){s.e(v)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var i=[],n=this.options,r=n.radius,a=n.extent,o=n.reduce,s=n.minPoints,l=r/(a*Math.pow(2,t)),u=0;u<e.length;u++){var c=e[u];if(!(c.zoom<=t)){c.zoom=t;var h,d=this.trees[t+1],f=d.within(c.x,c.y,l),m=c.numPoints||1,y=m,v=p(f);try{for(v.s();!(h=v.n()).done;){var g=h.value,_=d.points[g];_.zoom>t&&(y+=_.numPoints||1)}}catch(D){v.e(D)}finally{v.f()}if(y>m&&y>=s){var b,x=c.x*m,w=c.y*m,k=o&&m>1?this._map(c,!0):null,P=(u<<5)+(t+1)+this.points.length,S=p(f);try{for(S.s();!(b=S.n()).done;){var T=b.value,C=d.points[T];if(!(C.zoom<=t)){C.zoom=t;var O=C.numPoints||1;x+=C.x*O,w+=C.y*O,C.parentId=P,o&&(k||(k=this._map(c,!0)),o(k,this._map(C)))}}}catch(D){S.e(D)}finally{S.f()}c.parentId=P,i.push(X(x/y,w/y,P,y,k))}else if(i.push(c),y>1){var I,E=p(f);try{for(E.s();!(I=E.n()).done;){var A=I.value,M=d.points[A];M.zoom<=t||(M.zoom=t,i.push(M))}}catch(D){E.e(D)}finally{E.f()}}}}return i}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?Q({},e.properties):e.properties;var i=this.points[e.index].properties,n=this.options.map(i);return t&&n===i?Q({},n):n}}]),e}();function X(e,t,i,n,r){return{x:G(e),y:G(t),zoom:1/0,id:i,parentId:-1,numPoints:n,properties:r}}function Y(e,t){var i=h(e.geometry.coordinates,2),n=i[0],r=i[1];return{x:G(K(n)),y:G($(r)),zoom:1/0,index:t,parentId:-1}}function q(e){return{type:"Feature",id:e.id,properties:Z(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),J(e.y)]}};var t}function Z(e){var t=e.numPoints,i=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?Math.round(t/100)/10+"k":t;return Q(Q({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:i})}function K(e){return e/360+.5}function $(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function J(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function Q(e,t){for(var i in t)e[i]=t[i];return e}function ee(e){return e.x}function te(e){return e.y}function ie(e,t,i,n){for(var r,a=n,o=i-t>>1,s=i-t,l=e[t],u=e[t+1],c=e[i],h=e[i+1],p=t+3;p<i;p+=3){var d=ne(e[p],e[p+1],l,u,c,h);if(d>a)r=p,a=d;else if(d===a){var f=Math.abs(p-o);f<s&&(r=p,s=f)}}a>n&&(r-t>3&&ie(e,t,r,n),e[r+2]=a,i-r>3&&ie(e,r,i,n))}function ne(e,t,i,n,r,a){var o=r-i,s=a-n;if(0!==o||0!==s){var l=((e-i)*o+(t-n)*s)/(o*o+s*s);l>1?(i=r,n=a):l>0&&(i+=o*l,n+=s*l)}return(o=e-i)*o+(s=t-n)*s}function re(e,t,i,n){var r={id:void 0===e?null:e,type:t,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,i=e.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)ae(e,t);else if("Polygon"===i||"MultiLineString"===i)for(var n=0;n<t.length;n++)ae(e,t[n]);else if("MultiPolygon"===i)for(n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)ae(e,t[n][r])}(r),r}function ae(e,t){for(var i=0;i<t.length;i+=3)e.minX=Math.min(e.minX,t[i]),e.minY=Math.min(e.minY,t[i+1]),e.maxX=Math.max(e.maxX,t[i]),e.maxY=Math.max(e.maxY,t[i+1])}function oe(e,t,i,n){if(t.geometry){var r=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=t.id;if(i.promoteId?l=t.properties[i.promoteId]:i.generateId&&(l=n||0),"Point"===a)se(r,s);else if("MultiPoint"===a)for(var u=0;u<r.length;u++)se(r[u],s);else if("LineString"===a)le(r,s,o,!1);else if("MultiLineString"===a){if(i.lineMetrics){for(u=0;u<r.length;u++)le(r[u],s=[],o,!1),e.push(re(l,"LineString",s,t.properties));return}ue(r,s,o,!1)}else if("Polygon"===a)ue(r,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(u=0;u<t.geometry.geometries.length;u++)oe(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},i,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<r.length;u++){var c=[];ue(r[u],c,o,!0),s.push(c)}}e.push(re(l,a,s,t.properties))}}function se(e,t){t.push(ce(e[0])),t.push(he(e[1])),t.push(0)}function le(e,t,i,n){for(var r,a,o=0,s=0;s<e.length;s++){var l=ce(e[s][0]),u=he(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(o+=n?(r*u-l*a)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(u-a,2))),r=l,a=u}var c=t.length-3;t[2]=1,ie(t,0,c,i),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function ue(e,t,i,n){for(var r=0;r<e.length;r++){var a=[];le(e[r],a,i,n),t.push(a)}}function ce(e){return e/360+.5}function he(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function pe(e,t,i,n,r,a,o,s){if(n/=t,a>=(i/=t)&&o<n)return e;if(o<i||a>=n)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],h=c.geometry,p=c.type,d=0===r?c.minX:c.minY,f=0===r?c.maxX:c.maxY;if(d>=i&&f<n)l.push(c);else if(!(f<i||d>=n)){var m=[];if("Point"===p||"MultiPoint"===p)de(h,m,i,n,r);else if("LineString"===p)fe(h,m,i,n,r,!1,s.lineMetrics);else if("MultiLineString"===p)ye(h,m,i,n,r,!1);else if("Polygon"===p)ye(h,m,i,n,r,!0);else if("MultiPolygon"===p)for(var y=0;y<h.length;y++){var v=[];ye(h[y],v,i,n,r,!0),v.length&&m.push(v)}if(m.length){if(s.lineMetrics&&"LineString"===p){for(y=0;y<m.length;y++)l.push(re(c.id,p,m[y],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===m.length?(p="LineString",m=m[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===m.length?"Point":"MultiPoint"),l.push(re(c.id,p,m,c.tags))}}}return l.length?l:null}function de(e,t,i,n,r){for(var a=0;a<e.length;a+=3){var o=e[a+r];o>=i&&o<=n&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function fe(e,t,i,n,r,a,o){for(var s,l,u=me(e),c=0===r?ge:_e,h=e.start,p=0;p<e.length-3;p+=3){var d=e[p],f=e[p+1],m=e[p+2],y=e[p+3],v=e[p+4],g=0===r?d:f,_=0===r?y:v,b=!1;o&&(s=Math.sqrt(Math.pow(d-y,2)+Math.pow(f-v,2))),g<i?_>i&&(l=c(u,d,f,y,v,i),o&&(u.start=h+s*l)):g>n?_<n&&(l=c(u,d,f,y,v,n),o&&(u.start=h+s*l)):ve(u,d,f,m),_<i&&g>=i&&(l=c(u,d,f,y,v,i),b=!0),_>n&&g<=n&&(l=c(u,d,f,y,v,n),b=!0),!a&&b&&(o&&(u.end=h+s*l),t.push(u),u=me(e)),o&&(h+=s)}var x=e.length-3;d=e[x],f=e[x+1],m=e[x+2],(g=0===r?d:f)>=i&&g<=n&&ve(u,d,f,m),x=u.length-3,a&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&ve(u,u[0],u[1],u[2]),u.length&&t.push(u)}function me(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ye(e,t,i,n,r,a){for(var o=0;o<e.length;o++)fe(e[o],t,i,n,r,a,!1)}function ve(e,t,i,n){e.push(t),e.push(i),e.push(n)}function ge(e,t,i,n,r,a){var o=(a-t)/(n-t);return e.push(a),e.push(i+(r-i)*o),e.push(1),o}function _e(e,t,i,n,r,a){var o=(a-i)/(r-i);return e.push(t+(n-t)*o),e.push(a),e.push(1),o}function be(e,t){for(var i=[],n=0;n<e.length;n++){var r,a=e[n],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)r=xe(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){r=[];for(var s=0;s<a.geometry.length;s++)r.push(xe(a.geometry[s],t))}else if("MultiPolygon"===o)for(r=[],s=0;s<a.geometry.length;s++){for(var l=[],u=0;u<a.geometry[s].length;u++)l.push(xe(a.geometry[s][u],t));r.push(l)}i.push(re(a.id,o,r,a.tags))}return i}function xe(e,t){var i=[];i.size=e.size,void 0!==e.start&&(i.start=e.start,i.end=e.end);for(var n=0;n<e.length;n+=3)i.push(e[n]+t,e[n+1],e[n+2]);return i}function we(e,t){if(e.transformed)return e;var i,n,r,a=1<<e.z,o=e.x,s=e.y;for(i=0;i<e.features.length;i++){var l=e.features[i],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(n=0;n<u.length;n+=2)l.geometry.push(ke(u[n],u[n+1],t,a,o,s));else for(n=0;n<u.length;n++){var h=[];for(r=0;r<u[n].length;r+=2)h.push(ke(u[n][r],u[n][r+1],t,a,o,s));l.geometry.push(h)}}return e.transformed=!0,e}function ke(e,t,i,n,r,a){return[Math.round(i*(e*n-r)),Math.round(i*(t*n-a))]}function Pe(e,t,i,n,r){for(var a=t===r.maxZoom?0:r.tolerance/((1<<t)*r.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,Se(o,e[s],a,r);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,h=e[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),h>o.maxY&&(o.maxY=h)}return o}function Se(e,t,i,n){var r=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<r.length;s+=3)o.push(r[s]),o.push(r[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)Te(o,r,e,i,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<r.length;s++)Te(o,r[s],e,i,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<r.length;l++){var u=r[l];for(s=0;s<u.length;s++)Te(o,u[s],e,i,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===a&&n.lineMetrics){for(var h in c={},t.tags)c[h]=t.tags[h];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var p={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==t.id&&(p.id=t.id),e.features.push(p)}}function Te(e,t,i,n,r,a){var o=n*n;if(n>0&&t.size<(r?o:n))i.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>o)&&(i.numSimplified++,s.push(t[l]),s.push(t[l+1])),i.numPoints++;r&&function(e,t){for(var i=0,n=0,r=e.length,a=r-2;n<r;a=n,n+=2)i+=(e[n]-e[a])*(e[n+1]+e[a+1]);if(i>0===t)for(n=0,r=e.length;n<r/2;n+=2){var o=e[n],s=e[n+1];e[n]=e[r-2-n],e[n+1]=e[r-1-n],e[r-2-n]=o,e[r-1-n]=s}}(s,a),e.push(s)}}function Ce(e,t){var i=(t=this.options=function(e,t){for(var i in t)e[i]=t[i];return e}(Object.create(this.options),t)).debug;if(i&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(e,t){var i=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)oe(i,e.features[n],t,n);else oe(i,"Feature"===e.type?e:{geometry:e},t);return i}(e,t);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(e,t){var i=t.buffer/t.extent,n=e,r=pe(e,1,-1-i,i,0,-1,2,t),a=pe(e,1,1-i,2+i,0,-1,2,t);return(r||a)&&(n=pe(e,1,-i,1+i,0,-1,2,t)||[],r&&(n=be(r,1).concat(n)),a&&(n=n.concat(be(a,-1)))),n}(n,t)).length&&this.splitTile(n,0,0,0),i&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Oe(e,t,i){return 32*((1<<e)*i+t)+e}function Ie(e,t){var i=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var n=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!n)return t(null,null);var r=new _(n.features),a=P(r);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:r,rawData:a.buffer})}Ce.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ce.prototype.splitTile=function(e,t,i,n,r,a,o){for(var s=[e,t,i,n],l=this.options,u=l.debug;s.length;){n=s.pop(),i=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,h=Oe(t,i,n),p=this.tiles[h];if(!p&&(u>1&&console.time("creation"),p=this.tiles[h]=Pe(e,t,i,n,l),this.tileCoords.push({z:t,x:i,y:n}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,i,n,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var d="z"+t;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(p.source=e,r){if(t===l.maxZoom||t===r)continue;var f=1<<r-t;if(i!==Math.floor(a/f)||n!==Math.floor(o/f))continue}else if(t===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==e.length){u>1&&console.time("clipping");var m,y,v,g,_,b,x=.5*l.buffer/l.extent,w=.5-x,k=.5+x,P=1+x;m=y=v=g=null,_=pe(e,c,i-x,i+k,0,p.minX,p.maxX,l),b=pe(e,c,i+w,i+P,0,p.minX,p.maxX,l),e=null,_&&(m=pe(_,c,n-x,n+k,1,p.minY,p.maxY,l),y=pe(_,c,n+w,n+P,1,p.minY,p.maxY,l),_=null),b&&(v=pe(b,c,n-x,n+k,1,p.minY,p.maxY,l),g=pe(b,c,n+w,n+P,1,p.minY,p.maxY,l),b=null),u>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*i,2*n),s.push(y||[],t+1,2*i,2*n+1),s.push(v||[],t+1,2*i+1,2*n),s.push(g||[],t+1,2*i+1,2*n+1)}}},Ce.prototype.getTile=function(e,t,i){var n=this.options,r=n.extent,a=n.debug;if(e<0||e>24)return null;var o=1<<e,s=Oe(e,t=(t%o+o)%o,i);if(this.tiles[s])return we(this.tiles[s],r);a>1&&console.log("drilling down to z%d-%d-%d",e,t,i);for(var l,u=e,c=t,h=i;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[Oe(u,c,h)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,c,h),a>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,e,t,i),a>1&&console.timeEnd("drilling down"),this.tiles[s]?we(this.tiles[s],r):null):null};var Ee=function(t){f(n,t);var i=m(n);function n(e,t,r,a,o){var s;return y(this,n),s=i.call(this,e,t,r,a,Ie),o&&(s.loadGeoJSON=o),s}return v(n,[{key:"loadData",value:function(t,i){var n=this,r=t&&t.request,a=r&&r.collectResourceTiming;this.loadGeoJSON(t,(function(o,s){if(o||!s)return i(o);if("object"!=typeof s)return i(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));l(s,!0);try{if(t.filter){var u=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===u.result)throw new Error(u.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));var c=s.features.filter((function(e){return u.value.evaluate({zoom:0},e)}));s={type:"FeatureCollection",features:c}}n._geoJSONIndex=t.cluster?new H(function(t){var i=t.superclusterOptions,n=t.clusterProperties;if(!n||!i)return i;for(var r={},a={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(n),u=0,c=l;u<c.length;u++){var d=c[u],f=h(n[d],2),m=f[0],y=f[1],v=e.createExpression(y),g=e.createExpression("string"==typeof m?[m,["accumulated"],["get",d]]:m);r[d]=v.value,a[d]=g.value}return i.map=function(e){s.properties=e;var t,i={},n=p(l);try{for(n.s();!(t=n.n()).done;){var a=t.value;i[a]=r[a].evaluate(o,s)}}catch(u){n.e(u)}finally{n.f()}return i},i.reduce=function(e,t){s.properties=t;var i,n=p(l);try{for(n.s();!(i=n.n()).done;){var r=i.value;o.accumulated=e[r],e[r]=a[r].evaluate(o,s)}}catch(u){n.e(u)}finally{n.f()}},i}(t)).load(s.features):function(e,t){return new Ce(e,t)}(s,t.geojsonVtOptions)}catch(o){return i(o)}n.loaded={};var d={};if(a){var f=e.getPerformanceMeasurement(r);f&&(d.resourceTiming={},d.resourceTiming[t.source]=JSON.parse(JSON.stringify(f)))}i(null,d)}))}},{key:"reloadTile",value:function(e,t){var i=this.loaded;return i&&i[e.uid]?o(s(n.prototype),"reloadTile",this).call(this,e,t):this.loadTile(e,t)}},{key:"loadGeoJSON",value:function(t,i){if(t.request)e.getJSON(t.request,i);else{if("string"!=typeof t.data)return i(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return i(null,JSON.parse(t.data))}catch(e){return i(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}},{key:"getClusterExpansionZoom",value:function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}},{key:"getClusterChildren",value:function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}},{key:"getClusterLeaves",value:function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}]),n}(e.VectorTileWorkerSource),Ae=function(){function t(i){var n=this;y(this,t),this.self=i,this.actor=new e.Actor(i,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Ee},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));n.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}return v(t,[{key:"clearCaches",value:function(e,t,i){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],i()}},{key:"checkIfReady",value:function(e,t,i){i()}},{key:"setReferrer",value:function(e,t){this.referrer=t}},{key:"spriteLoaded",value:function(t,i){for(var n in this.isSpriteLoaded[t]=i,this.workerSources[t]){var r=this.workerSources[t][n];for(var a in r)r[a]instanceof e.VectorTileWorkerSource&&(r[a].isSpriteLoaded=i,r[a].fire(new e.Event("isSpriteLoaded")))}}},{key:"setImages",value:function(e,t,i){for(var n in this.availableImages[e]=t,this.workerSources[e]){var r=this.workerSources[e][n];for(var a in r)r[a].availableImages=t}i()}},{key:"enableTerrain",value:function(e,t,i){this.terrain=t,i()}},{key:"setProjection",value:function(t,i){this.projections[t]=e.getProjection(i)}},{key:"setLayers",value:function(e,t,i){this.getLayerIndex(e).replace(t),i()}},{key:"updateLayers",value:function(e,t,i){this.getLayerIndex(e).update(t.layers,t.removedIds),i()}},{key:"loadTile",value:function(t,i,n){var r=this.enableTerrain?e.extend({enableTerrain:this.terrain},i):i;r.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,i.type,i.source).loadTile(r,n)}},{key:"loadDEMTile",value:function(t,i,n){var r=this.enableTerrain?e.extend({buildQuadTree:this.terrain},i):i;this.getDEMWorkerSource(t,i.source).loadTile(r,n)}},{key:"reloadTile",value:function(t,i,n){var r=this.enableTerrain?e.extend({enableTerrain:this.terrain},i):i;r.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,i.type,i.source).reloadTile(r,n)}},{key:"abortTile",value:function(e,t,i){this.getWorkerSource(e,t.type,t.source).abortTile(t,i)}},{key:"removeTile",value:function(e,t,i){this.getWorkerSource(e,t.type,t.source).removeTile(t,i)}},{key:"removeSource",value:function(e,t,i){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var n=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==n.removeSource?n.removeSource(t,i):i()}}},{key:"loadWorkerSource",value:function(e,t,i){try{this.self.importScripts(t.url),i()}catch(e){i(e.toString())}}},{key:"syncRTLPluginState",value:function(t,i,n){try{e.plugin.setState(i);var r=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=r){this.self.importScripts(r);var a=e.plugin.isParsed();n(a?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(r)),a)}}catch(e){n(e.toString())}}},{key:"getAvailableImages",value:function(e){var t=this.availableImages[e];return t||(t=[]),t}},{key:"getLayerIndex",value:function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new n),t}},{key:"getWorkerSource",value:function(e,t,i){var n=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][i]||(this.workerSources[e][t][i]=new this.workerSourceTypes[t]({send:function(t,i,r,a,o,s){n.actor.send(t,i,r,e,o,s)},scheduler:this.actor.scheduler},this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])),this.workerSources[e][t][i]}},{key:"getDEMWorkerSource",value:function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new a),this.demWorkerSources[e][t]}},{key:"enforceCacheSizeLimit",value:function(t,i){e.enforceCacheSizeLimit(i)}},{key:"getWorkerPerformanceMetrics",value:function(e,t,i){i(void 0,void 0)}}]),t}();return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Ae(self)),Ae})),g(["./shared"],(function(e){var t=i;function i(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,i=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(i);try{t=new Worker(n),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var i=t.getImageData(0,0,1,1);return i&&i.width===e.width}()?(void 0===u[t=e&&e.failIfMajorPerformanceCaveat]&&(u[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),u[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var u={};function d(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],o=i*a-r*n;return o?(e[0]=a*(o=1/o),e[1]=-n*o,e[2]=-r*o,e[3]=i*o,e):null}function g(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!g(e[i],t[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!g(e[n],t[n]))return!1;return!0}return e===t}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var _,b={create:function(t,i,n){var r=e.window.document.createElement(t);return void 0!==i&&(r.className=i),n&&n.appendChild(r),r},createSVG:function(t,i,n){for(var r=e.window.document.createElementNS("http://www.w3.org/2000/svg",t),a=0,o=Object.keys(i);a<o.length;a++){var s=o[a];r.setAttributeNS(null,s,i[s])}return n&&n.appendChild(r),r}},x=e.window.document&&e.window.document.documentElement.style,w=x&&void 0!==x.userSelect?"userSelect":"WebkitUserSelect";b.disableDrag=function(){x&&w&&(_=x[w],x[w]="none")},b.enableDrag=function(){x&&w&&(x[w]=_)};var k=function t(i){i.preventDefault(),i.stopPropagation(),e.window.removeEventListener("click",t,!0)};function P(t,i,n){var r=t.offsetWidth===i.width?1:t.offsetWidth/i.width;return new e.pointGeometry((n.clientX-i.left)*r,(n.clientY-i.top)*r)}function S(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}b.suppressClick=function(){e.window.addEventListener("click",k,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",k,!0)}),0)},b.mousePos=function(e,t){var i=e.getBoundingClientRect();return P(e,i,t)},b.touchPos=function(e,t){for(var i=e.getBoundingClientRect(),n=[],r=0;r<t.length;r++)n.push(P(e,i,t[r]));return n},b.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button};var T=function(t){f(n,t);var i=m(n);function n(){var t;return y(this,n),(t=i.call(this)).images={},t.updatedImages={},t.callbackDispatchedThisFrame={},t.loaded=!1,t.requestors=[],t.patterns={},t.atlasImage=new e.RGBAImage({width:1,height:1}),t.dirty=!0,t}return v(n,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,i=p(this.requestors);try{for(i.s();!(t=i.n()).done;){var n=t.value,r=n.ids,a=n.callback;this._notify(r,a)}}catch(o){i.e(o)}finally{i.f()}this.requestors=[]}}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(t,i){var n=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),n=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),n=!1),this._validateContent(i.content,i)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),n=!1),n}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var i,n=0,r=p(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a[0]<n||a[1]<a[0]||t<a[1])return!1;n=a[1]}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var i=!0;if(!this.isLoaded()){var n,r=p(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;this.images[a]||(i=!1)}}catch(o){r.e(o)}finally{r.f()}}this.isLoaded()||i?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(t,i){var n,r={},a=p(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?r[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'.concat(o,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(l){a.e(l)}finally{a.f()}i(null,r)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(t){var i=this.patterns[t],n=this.getImage(t);if(!n)return null;if(i&&i.position.version===n.version)return i.position;if(i)i.position.version=n.version;else{var r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},a=new e.ImagePosition(r,n);this.patterns[t]={bin:r,position:a}}return this._updatePatternAtlas(),this.patterns[t].position}},{key:"bind",value:function(t){var i=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var t=[];for(var i in this.patterns)t.push(this.patterns[i].bin);var n=e.potpack(t),r=n.w,a=n.h,o=this.atlasImage;for(var s in o.resize({width:r||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,h=this.images[s].data,p=h.width,d=h.height;e.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c},{width:p,height:d}),e.RGBAImage.copy(h,o,{x:0,y:d-1},{x:u,y:c-1},{width:p,height:1}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c+d},{width:p,height:1}),e.RGBAImage.copy(h,o,{x:p-1,y:0},{x:u-1,y:c},{width:1,height:d}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:u+p,y:c},{width:1,height:d})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var t,i=p(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(!this.callbackDispatchedThisFrame[n]){this.callbackDispatchedThisFrame[n]=!0;var r=this.images[n];S(r)&&this.updateImage(n,r)}}}catch(a){i.e(a)}finally{i.f()}}}]),n}(e.Evented),C=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new(function(){function t(){y(this,t),this.specification=e.spec.light.position}return v(t,[{key:"possiblyEvaluate",value:function(t,i){return function(t){var i=h(t,3),n=i[0],r=i[1],a=i[2],o=e.degToRad(r+90),s=e.degToRad(a);return{x:n*Math.cos(o)*Math.sin(s),y:n*Math.sin(o)*Math.sin(s),z:n*Math.cos(s),azimuthal:r,polar:a}}(t.expression.evaluate(i))}},{key:"interpolate",value:function(t,i,n){return{x:e.number(t.x,i.x,n),y:e.number(t.y,i.y,n),z:e.number(t.z,i.z,n),azimuthal:e.number(t.azimuthal,i.azimuthal,n),polar:e.number(t.polar,i.polar,n)}}}]),t}()),color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),O="-transition",I=function(t){f(n,t);var i=m(n);function n(t){var r;return y(this,n),(r=i.call(this))._transitionable=new e.Transitionable(C),r.setLight(t),r._transitioning=r._transitionable.untransitioned(),r}return v(n,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,i))for(var n in t){var r=t[n];e.endsWith(n,O)?this._transitionable.setTransition(n.slice(0,-O.length),r):this._transitionable.setValue(n,r)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,i,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),n}(e.Evented),E=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),A="-transition",M=function(t){f(n,t);var i=m(n);function n(t,r){var a;return y(this,n),(a=i.call(this))._transitionable=new e.Transitionable(E),a.set(t),a._transitioning=a._transitionable.untransitioned(),a.drapeRenderMode=r,a}return v(n,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){for(var i in t){var n=t[i];e.endsWith(i,A)?this._transitionable.setTransition(i.slice(0,-A.length),n):this._transitionable.setValue(i,n)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}}]),n}(e.Evented);function D(t,i,n,r){var a=e.smoothstep(45,65,n),o=j(t,r),s=h(o,2),l=s[0],u=s[1],c=e.length(i),p=1-Math.min(1,Math.exp((c-l)/(u-l)*-6));return p*=p*p,(p=Math.min(1,1.00747*p))*a*t.alpha}function j(e,t){var i=.5/Math.tan(.5*t);return[e.range[0]+i,e.range[1]+i]}var F=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"])}),L="-transition",R=function(t){f(n,t);var i=m(n);function n(t,r){var a;return y(this,n),(a=i.call(this))._transitionable=new e.Transitionable(F),a.set(t),a._transitioning=a._transitionable.untransitioned(),a._transform=r,a}return v(n,[{key:"state",get:function(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}},{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateFog,t,i))for(var n in t){var r=t[n];e.endsWith(n,L)?this._transitionable.setTransition(n.slice(0,-L.length),r):this._transitionable.setValue(n,r)}}},{key:"getOpacity",value:function(t){if(!this._transform.projection.supportsFog)return 0;var i=this.properties&&this.properties.get("color")||1;return e.smoothstep(45,65,t)*i.a}},{key:"getOpacityAtLatLng",value:function(t,i){return this._transform.projection.supportsFog?function(t,i,n){var r=e.MercatorCoordinate.fromLngLat(i),a=n.elevation?n.elevation.getAtPointOrZero(r):0,o=[r.x,r.y,a];return e.transformMat4(o,o,n.mercatorFogMatrix),D(t,o,n.pitch,n._fov)}(this.state,t,i):0}},{key:"getFovAdjustedRange",value:function(e){return this._transform.projection.supportsFog?j(this.state,e):[0,1]}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,i,n){return(!n||!1!==n.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),n}(e.Evented),z=function(){function t(i,n){var r=this;y(this,t),this.workerPool=i,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var a=this.workerPool.acquire(this.id),o=0;o<a.length;o++){var s=new t.Actor(a[o],n,this.id);s.name="Worker ".concat(o),this.actors.push(s)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){r.ready=!0}))}return v(t,[{key:"broadcast",value:function(t,i,n){e.asyncAll(this.actors,(function(e,n){e.send(t,i,n)}),n=n||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),t}();function V(t,i,n){return i*(e.EXTENT/(t.tileSize*Math.pow(2,n-t.tileID.overscaledZ)))}z.Actor=e.Actor;var B=function(){function e(t,i,n){y(this,e),this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete i.arrayBuffer}return v(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),N={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},U=function(){function e(t,i,n,r){y(this,e),this.length=i.length,this.attributes=n,this.itemSize=i.bytesPerElement,this.dynamicDraw=r,this.context=t;var a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,i.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete i.arrayBuffer}return v(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var i=0;i<this.attributes.length;i++){var n=t.attributes[this.attributes[i].name];void 0!==n&&e.enableVertexAttribArray(n)}}},{key:"setVertexAttribPointers",value:function(e,t,i){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],a=t.attributes[r.name];void 0!==a&&e.vertexAttribPointer(a,r.components,e[N[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),W=function(){function e(t){y(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return v(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),G=function(t){f(n,t);var i=m(n);function n(){return y(this,n),i.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),n}(W),H=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),i}(W),X=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),i}(W),Y=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),i}(W),q=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),i}(W),Z=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),i}(W),K=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),i}(W),$=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),i}(W),J=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),i}(W),Q=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),i}(W),ee=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),i}(W),te=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),i}(W),ie=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),i}(W),ne=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),i}(W),re=function(t){f(n,t);var i=m(n);function n(){return y(this,n),i.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),n}(W),ae=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),i}(W),oe=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),i}(W),se=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),i}(W),le=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),i}(W),ue=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),i}(W),ce=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),i}(W),he=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),i}(W),pe=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),i}(W),de=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),i}(W),fe=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),i}(W),me=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),i}(W),ye=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),i}(W),ve=function(e){f(i,e);var t=m(i);function i(e){var n;return y(this,i),(n=t.call(this,e)).vao=e.extVertexArrayObject,n}return v(i,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),i}(W),ge=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),i}(W),_e=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),i}(W),be=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),i}(W),xe=function(e){f(i,e);var t=m(i);function i(e,n){var r;return y(this,i),(r=t.call(this,e)).context=e,r.parent=n,r}return v(i,[{key:"getDefault",value:function(){return null}}]),i}(W),we=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),i}(xe),ke=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),i}(xe),Pe=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),i}(ke),Se=function(){function e(t,i,n,r){y(this,e),this.context=t,this.width=i,this.height=n;var a=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new we(t,a),r&&(this.depthAttachment=new ke(t,a))}return v(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var i=this.depthAttachment.get();i&&e.deleteRenderbuffer(i)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),Te=function(){function t(e){y(this,t),this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new G(this),this.clearDepth=new H(this),this.clearStencil=new X(this),this.colorMask=new Y(this),this.depthMask=new q(this),this.stencilMask=new Z(this),this.stencilFunc=new K(this),this.stencilOp=new $(this),this.stencilTest=new J(this),this.depthRange=new Q(this),this.depthTest=new ee(this),this.depthFunc=new te(this),this.blend=new ie(this),this.blendFunc=new ne(this),this.blendColor=new re(this),this.blendEquation=new ae(this),this.cullFace=new oe(this),this.cullFaceSide=new se(this),this.frontFace=new le(this),this.program=new ue(this),this.activeTexture=new ce(this),this.viewport=new he(this),this.bindFramebuffer=new pe(this),this.bindRenderbuffer=new de(this),this.bindTexture=new fe(this),this.bindVertexBuffer=new me(this),this.bindElementBuffer=new ye(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ve(this),this.pixelStoreUnpack=new ge(this),this.pixelStoreUnpackPremultiplyAlpha=new _e(this),this.pixelStoreUnpackFlipY=new be(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}return v(t,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new B(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,i){return new U(this,e,t,i)}},{key:"createRenderbuffer",value:function(e,t,i){var n=this.gl,r=n.createRenderbuffer();return this.bindRenderbuffer.set(r),n.renderbufferStorage(n.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),r}},{key:"createFramebuffer",value:function(e,t,i){return new Se(this,e,t,i)}},{key:"clear",value:function(e){var t=e.color,i=e.depth,n=e.stencil,r=this.gl,a=0;t&&(a|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(a|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),void 0!==n&&(a|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),r.clear(a)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(t){g(t.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),t}(),Ce=function(){function t(e,i,n,r){y(this,t),this.screenBounds=e,this.cameraPoint=i,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((function(e){return r.pointCoordinate3D(e)})),this.cameraGeometry=this.bufferedCameraGeometry(0)}return v(t,[{key:"isPointQuery",value:function(){return 1===this.screenBounds.length}},{key:"bufferedScreenGeometry",value:function(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}},{key:"bufferedCameraGeometry",value:function(t){var i=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],r=e.polygonizeBounds(i,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>i.x&&this.cameraPoint.x<n.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?r[2]=this.cameraPoint:this.cameraPoint.x<=i.x&&(r[3]=this.cameraPoint)),e.bufferConvexPolygon(r,t)}},{key:"containsTile",value:function(t,i,n){var r,a=t.queryPadding+1,o=t.tileID.wrap,s=n?this._bufferedCameraMercator(a,i).map((function(i){return e.getTilePoint(t.tileTransform,i,o)})):this._bufferedScreenMercator(a,i).map((function(i){return e.getTilePoint(t.tileTransform,i,o)})),l=this.screenGeometryMercator.map((function(i){return e.getTileVec3(t.tileTransform,i,o)})),u=l.map((function(t){return new e.pointGeometry(t[0],t[1])})),c=i.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),h=e.getTileVec3(t.tileTransform,c,o),p=l.map((function(t){var i=e.sub(t,t,h);return e.normalize(i,i),new e.Ray(h,i)})),d=V(t,1,i.zoom);if(e.polygonIntersectsBox(s,0,0,e.EXTENT,e.EXTENT))return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:p,bufferedTilespaceGeometry:s,bufferedTilespaceBounds:(r=e.getBounds(s),r.min.x=e.clamp(r.min.x,0,e.EXTENT),r.min.y=e.clamp(r.min.y,0,e.EXTENT),r.max.x=e.clamp(r.max.x,0,e.EXTENT),r.max.y=e.clamp(r.max.y,0,e.EXTENT),r),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:d}}},{key:"_bufferedScreenMercator",value:function(e,t){var i=Oe(e);if(this._screenRaycastCache[i])return this._screenRaycastCache[i];var n=this.bufferedScreenGeometry(e).map((function(e){return t.pointCoordinate3D(e)}));return this._screenRaycastCache[i]=n,n}},{key:"_bufferedCameraMercator",value:function(e,t){var i=Oe(e);if(this._cameraRaycastCache[i])return this._cameraRaycastCache[i];var n=this.bufferedCameraGeometry(e).map((function(e){return t.pointCoordinate3D(e)}));return this._cameraRaycastCache[i]=n,n}}],[{key:"createFromScreenPoints",value:function(i,n){var r,a;if(i instanceof e.pointGeometry||"number"==typeof i[0]){var o=e.pointGeometry.convert(i);r=[e.pointGeometry.convert(i)],a=n.isPointAboveHorizon(o)}else{var s=e.pointGeometry.convert(i[0]),l=e.pointGeometry.convert(i[1]);r=[s,l],a=e.polygonizeBounds(s,l).every((function(e){return n.isPointAboveHorizon(e)}))}return new t(r,n.getCameraPoint(),a,n)}}]),t}();function Oe(e){return 100*e|0}function Ie(t,i,n){var r=function(r,a){if(r)return n(r);if(a){var o=e.pick(e.extend(a,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(o.vectorLayers=a.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(e){return e.id}))),o.tiles=i.canonicalizeTileset(o,t.url),n(null,o)}};return t.url?e.getJSON(i.transformRequest(i.normalizeSourceURL(t.url),e.ResourceType.Source),r):e.exported.frame((function(){return r(null,t)}))}var Ee,Ae=function(){function t(i,n,r){y(this,t),this.bounds=e.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=n||0,this.maxzoom=r||24}return v(t,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(t){var i=Math.pow(2,t.z),n=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*i),r=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*i),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*i);return t.x>=n&&t.x<a&&t.y>=r&&t.y<o}}]),t}(),Me=function(t){f(n,t);var i=m(n);function n(t,a,o,s){var l;return y(this,n),(l=i.call(this)).id=t,l.dispatcher=o,l.setEventedParent(s),l.type="raster",l.minzoom=0,l.maxzoom=22,l.roundZoom=!0,l.scheme="xyz",l.tileSize=512,l._loaded=!1,l._options=e.extend({type:"raster"},a),e.extend(r(l),e.pick(a,["url","scheme","tileSize"])),l}return v(n,[{key:"load",value:function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ie(this._options,this.map._requestManager,(function(i,n){t._tileJSONRequest=null,t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):n&&(e.extend(t,n),n.bounds&&(t.tileBounds=new Ae(n.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(n.tiles),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,i){var n=this,r=e.exported.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),(function(r,a,o,s){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(r)t.state="errored",i(r);else if(a){n.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s});var l=n.map.painter.context,u=l.gl;t.texture=n.map.painter.getTileTexture(a.width),t.texture?t.texture.update(a,{useMipmap:!0}):(t.texture=new e.Texture(l,a,u.RGBA,{useMipmap:!0}),t.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),l.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(n.dispatcher),i(null)}}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}}]),n}(e.Evented);function De(t,i,n,r,a,o,s,l){var u=[t,n,a,i,r,o,1,1,1],c=[s,l,1],p=e.adjoint([],u),d=e.transformMat3(c,c,e.transpose(p,p)),f=h(d,3),m=f[0],y=f[1],v=f[2];return e.multiply(u,[m,0,0,0,y,0,0,0,v],u)}var je=function(t){f(n,t);var i=m(n);function n(e,t,r,a){var o;return y(this,n),(o=i.call(this)).id=e,o.dispatcher=r,o.coordinates=t.coordinates,o.type="image",o.minzoom=0,o.maxzoom=22,o.tileSize=512,o.tiles={},o._loaded=!1,o.setEventedParent(a),o.options=t,o}return v(n,[{key:"load",value:function(t,i){var n=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(r,a){n._loaded=!0,r?n.fire(new e.ErrorEvent(r)):a&&(n.image=e.exported.getImageData(a),n.width=n.image.width,n.height=n.image.height,t&&(n.coordinates=t),i&&i(),n._finishLoading())}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null})),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setCoordinates",value:function(t){this.coordinates=t,delete this._boundsArray;var i=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){var i,n=1/0,r=1/0,a=-1/0,o=-1/0,s=p(t);try{for(s.s();!(i=s.n()).done;){var l=i.value;n=Math.min(n,l.x),r=Math.min(r,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y)}}catch(d){s.e(d)}finally{s.f()}var u=Math.max(a-n,o-r),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),h=Math.pow(2,c);return new e.CanonicalTileID(c,Math.floor((n+a)/2*h),Math.floor((r+o)/2*h))}(i),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"_clear",value:function(){delete this._boundsArray}},{key:"_makeBoundsArray",value:function(){var t=e.tileTransform(this.tileID,this.map.transform.projection),i=this.coordinates.map((function(i){var n=t.projection.project(i[0],i[1]);return e.getTilePoint(t,n)._round()})),n=h(i,4),r=n[0],a=n[1],o=n[2],s=n[3];return this.perspectiveTransform=function(t,i,n,r,a,o,s,l,u,c){var h=De(0,0,t,0,0,i,t,i),p=De(n,r,a,o,s,l,u,c);return e.multiply(p,e.adjoint(h,h),p),[p[6]/p[8]*t/e.EXTENT,p[7]/p[8]*i/e.EXTENT]}(this.width,this.height,r.x,r.y,a.x,a.y,s.x,s.y,o.x,o.y),this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(r.x,r.y,0,0),this._boundsArray.emplaceBack(a.x,a.y,e.EXTENT,0),this._boundsArray.emplaceBack(s.x,s.y,0,e.EXTENT),this._boundsArray.emplaceBack(o.x,o.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,i=t.gl;for(var n in this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,e.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),n}(e.Evented),Fe={vector:function(t){f(n,t);var i=m(n);function n(t,a,o,s){var u;if(y(this,n),(u=i.call(this)).id=t,u.dispatcher=o,u.type="vector",u.minzoom=0,u.maxzoom=22,u.scheme="xyz",u.tileSize=512,u.reparseOverscaled=!0,u.isTileClipped=!0,u._loaded=!1,e.extend(r(u),e.pick(a,["url","scheme","tileSize","promoteId"])),u._options=e.extend({type:"vector"},a),u._collectResourceTiming=a.collectResourceTiming,512!==u.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return u.setEventedParent(s),u._tileWorkers={},u._deduped=new e.DedupedRequest,l(u)}return v(n,[{key:"load",value:function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ie(this._options,this.map._requestManager,(function(i,n){t._tileJSONRequest=null,t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):n&&(e.extend(t,n),n.bounds&&(t.tileBounds=new Ae(n.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(n.tiles,t.map._requestManager._customAccessToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setSourceProperty",value:function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();var t,i=this.map.style._getSourceCaches(this.id),n=p(i);try{for(n.s();!(t=n.n()).done;)t.value.clearTiles()}catch(r){n.e(r)}finally{n.f()}this.load()}},{key:"setTiles",value:function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this}},{key:"setUrl",value:function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"loadTile",value:function(t,i){var n=this,r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=i:t.request=t.actor.send("reloadTile",a,s.bind(this));else if(t.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",a,s.bind(this),void 0,!0);else{var o=e.loadVectorTile.call({deduped:this._deduped},a,(function(e,i){e||!i?s.call(n,e):(a.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},t.actor&&t.actor.send("loadTile",a,s.bind(n),void 0,!0))}),!0);t.request={cancel:o}}function s(n,r){return delete t.request,t.aborted?i(null):n&&404!==n.status?i(n):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}}]),n}(e.Evented),raster:Me,"raster-dem":function(t){f(n,t);var i=m(n);function n(t,r,a,o){var s;return y(this,n),(s=i.call(this,t,r,a,o)).type="raster-dem",s.maxzoom=22,s._options=e.extend({type:"raster-dem"},r),s.encoding=r.encoding||"mapbox",s}return v(n,[{key:"loadTile",value:function(t,i){var n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(e,n){e&&(t.state="errored",i(e)),n&&(t.dem=n,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",i(null))}t.request=e.getImage(this.map._requestManager.transformRequest(n,e.ResourceType.Tile),function(n,a,o,s){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(n)t.state="errored",i(n);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s});var l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&(null==Ee&&(Ee=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),Ee),u=1-(a.width-e.prevPowerOfTwo(a.width))/2;u<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));var c=l?a:e.exported.getImageData(a,u),h={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:c,encoding:this.encoding,padding:u};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",h,r.bind(this),void 0,!0))}}.bind(this))}},{key:"_getNeighboringTiles",value:function(t){var i=t.canonical,n=Math.pow(2,i.z),r=(i.x-1+n)%n,a=0===i.x?t.wrap-1:t.wrap,o=(i.x+1+n)%n,s=i.x+1===n?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,a,i.z,r,i.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y).key]={backfilled:!1},i.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,a,i.z,r,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y-1).key]={backfilled:!1}),i.y+1<n&&(l[new e.OverscaledTileID(t.overscaledZ,a,i.z,r,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y+1).key]={backfilled:!1}),l}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}}]),n}(Me),geojson:function(t){f(n,t);var i=m(n);function n(t,r,a,o){var s;y(this,n),(s=i.call(this)).id=t,s.type="geojson",s.minzoom=0,s.maxzoom=18,s.tileSize=512,s.isTileClipped=!0,s.reparseOverscaled=!0,s._loaded=!1,s.actor=a.getActor(),s.setEventedParent(o),s._data=r.data,s._options=e.extend({},r),s._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(s.maxzoom=r.maxzoom),r.type&&(s.type=r.type),r.attribution&&(s.attribution=r.attribution),s.promoteId=r.promoteId;var l=e.EXTENT/s.tileSize;return s.workerOptions=e.extend({source:s.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*l,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*l,extent:e.EXTENT,maxZoom:s.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:s.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*l,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),s}return v(n,[{key:"onAdd",value:function(e){this.map=e,this.setData(this._data)}},{key:"setData",value:function(e){return this._data=e,this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,i,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:i},n),this}},{key:"_updateWorkerData",value:function(){var t=this;if(this._pendingLoad)this._coalesce=!0;else{this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;var i=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(i.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(n),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),i,(function(i,n){if(t._loaded=!0,t._pendingLoad=null,i)t.fire(new e.ErrorEvent(i));else{var r={dataType:"source",sourceDataType:t._metadataFired?"content":"metadata"};t._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[t.id]&&(r.resourceTiming=n.resourceTiming[t.id]),t.fire(new e.Event("data",r)),t._metadataFired=!0}t._coalesce&&(t._updateWorkerData(),t._coalesce=!1)}))}}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(t,i){var n=this,r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,a){return delete t.request,t.unloadVectorData(),t.aborted?i(null):e?i(e):(t.loadVectorData(a,n.map.painter,"reloadTile"===r),i(null))}),void 0,"loadTile"===r)}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._pendingLoad&&this._pendingLoad.cancel()}},{key:"serialize",value:function(){return e.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),n}(e.Evented),video:function(t){f(n,t);var i=m(n);function n(e,t,r,a){var o;return y(this,n),(o=i.call(this,e,t,r,a)).roundZoom=!0,o.type="video",o.options=t,o}return v(n,[{key:"load",value:function(){var t=this;this._loaded=!1;var i=this.options;this.urls=[];var n,r=p(i.urls);try{for(r.s();!(n=r.n()).done;){var a=n.value;this.urls.push(this.map._requestManager.transformRequest(a,e.ResourceType.Source).url)}}catch(o){r.e(o)}finally{r.f()}e.getVideo(this.urls,(function(i,n){t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):n&&(t.video=n,t.video.loop=!0,t.video.setAttribute("playsinline",""),t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(t){if(this.video){var i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(i.start(0)," and ").concat(i.end(0),"-second mark.")))):this.video.currentTime=t}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,i=t.gl;for(var n in this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,e.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),n}(je),image:je,canvas:function(t){f(n,t);var i=m(n);function n(t,r,a,o){var s;return y(this,n),s=i.call(this,t,r,a,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),s.options=r,s.animate=void 0===r.animate||r.animate,s}return v(n,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,n=i.gl;for(var r in this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,e.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(i,this.canvas,n.RGBA,{premultiply:!0}),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var i=t[e];if(isNaN(i)||i<=0)return!0}return!1}}]),n}(je)},Le=function(t,i,n,r){var a=new Fe[i.type](t,i,n,r);if(a.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(a.id));return e.bindAll(["load","abort","unload","serialize","prepare"],a),a};function Re(t,i){var n=e.identity([]);return e.scale(n,n,[.5*t.width,.5*-t.height,1]),e.translate(n,n,[1,-1,0]),e.multiply$1(n,n,t.calculateProjMatrix(i.toUnwrapped()))}function ze(e,t,i,n,r,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=e.tilesIn(n,o,s);l.sort(Be);var u,c=[],h=p(l);try{for(h.s();!(u=h.n()).done;){var d=u.value;c.push({wrappedTileID:d.tile.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(t,i,e._state,d,r,a,Re(e.transform,d.tile.tileID),s)})}}catch(y){h.e(y)}finally{h.f()}var f=function(e){var t,i={},n={},r=p(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=a.queryResults,s=a.wrappedTileID,l=n[s]=n[s]||{};for(var u in o){var c,h=o[u],d=l[u]=l[u]||{},f=i[u]=i[u]||[],m=p(h);try{for(m.s();!(c=m.n()).done;){var v=c.value;d[v.featureIndex]||(d[v.featureIndex]=!0,f.push(v))}}catch(y){m.e(y)}finally{m.f()}}}}catch(y){r.e(y)}finally{r.f()}return i}(c);for(var m in f)f[m].forEach((function(t){var i=t.feature,n=e.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=n}));return f}function Ve(e,t){for(var i=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),n=[],r={},a=0;a<i.length;a++){var o=i[a],s=o.tileID.canonical.key;r[s]||(r[s]=!0,o.querySourceFeatures(n,t))}return n}function Be(e,t){var i=e.tileID,n=t.tileID;return i.overscaledZ-n.overscaledZ||i.canonical.y-n.canonical.y||i.wrap-n.wrap||i.canonical.x-n.canonical.x}function Ne(){return null!=ua.workerClass?new ua.workerClass:new e.window.Worker(ua.workerUrl)}var Ue,We="mapboxgl_preloaded_worker_pool",Ge=function(){function e(){y(this,e),this.active={}}return v(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new Ne);return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[We]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}();function He(){return Ue||(Ue=new Ge),Ue}function Xe(t,i){var n={};for(var r in t)"ref"!==r&&(n[r]=t[r]);return e.refProperties.forEach((function(e){e in i&&(n[e]=i[e])})),n}function Ye(e){e=e.slice();for(var t=Object.create(null),i=0;i<e.length;i++)t[e[i].id]=e[i];for(var n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Xe(e[n],t[e[n].ref]));return e}Ge.workerCount=2;var qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Ze(e,t,i){i.push({command:qe.addSource,args:[e,t[e]]})}function Ke(e,t,i){t.push({command:qe.removeSource,args:[e]}),i[e]=!0}function $e(e,t,i,n){Ke(e,i,n),Ze(e,t,i)}function Je(e,t,i){var n;for(n in e[i])if(e[i].hasOwnProperty(n)&&"data"!==n&&!g(e[i][n],t[i][n]))return!1;for(n in t[i])if(t[i].hasOwnProperty(n)&&"data"!==n&&!g(e[i][n],t[i][n]))return!1;return!0}function Qe(e,t,i,n,r,a){var o;for(o in t=t||{},e=e||{})e.hasOwnProperty(o)&&(g(e[o],t[o])||i.push({command:a,args:[n,o,t[o],r]}));for(o in t)t.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&(g(e[o],t[o])||i.push({command:a,args:[n,o,t[o],r]}))}function et(e){return e.id}function tt(e,t){return e[t.id]=t,e}var it=function(){function t(e,i){y(this,t),this.reset(e,i)}return v(t,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var i=1,n=this._distances[i],r=t*this.paddedLength+this.padding;n<r&&i<this._distances.length;)n=this._distances[++i];var a=i-1,o=this._distances[a],s=n-o,l=s>0?(r-o)/s:0;return this.points[a].mult(1-l).add(this.points[i].mult(l))}}]),t}(),nt=function(){function e(t,i,n){y(this,e);var r=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(i/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=i,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/i,this.boxUid=0,this.circleUid=0}return v(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,i,n,r){this._forEachCell(t,i,n,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)}},{key:"insertCircle",value:function(e,t,i,n){this._forEachCell(t-n,i-n,t+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(n)}},{key:"_insertBoxCell",value:function(e,t,i,n,r,a){this.boxCells[r].push(a)}},{key:"_insertCircleCell",value:function(e,t,i,n,r,a){this.circleCells[r].push(a)}},{key:"_query",value:function(e,t,i,n,r,a){if(i<0||e>this.width||n<0||t>this.height)return!r&&[];var o=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=n){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return a?o.filter(a):o}return this._forEachCell(e,t,i,n,this._queryCell,o,{hitTest:r,seenUids:{box:{},circle:{}}},a),r?o.length>0:o}},{key:"_queryCircle",value:function(e,t,i,n,r){var a=e-i,o=e+i,s=t-i,l=t+i;if(o<0||a>this.width||l<0||s>this.height)return!n&&[];var u=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,u,{hitTest:n,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},r),n?u.length>0:u}},{key:"query",value:function(e,t,i,n,r){return this._query(e,t,i,n,!1,r)}},{key:"hitTest",value:function(e,t,i,n,r){return this._query(e,t,i,n,!0,r)}},{key:"hitTestCircle",value:function(e,t,i,n){return this._queryCircle(e,t,i,!0,n)}},{key:"_queryCell",value:function(e,t,i,n,r,a,o,s){var l=o.seenUids,u=this.boxCells[r];if(null!==u){var c,h=this.bboxes,d=p(u);try{for(d.s();!(c=d.n()).done;){var f=c.value;if(!l.box[f]){l.box[f]=!0;var m=4*f;if(e<=h[m+2]&&t<=h[m+3]&&i>=h[m+0]&&n>=h[m+1]&&(!s||s(this.boxKeys[f]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[f],x1:h[m],y1:h[m+1],x2:h[m+2],y2:h[m+3]})}}}}catch(S){d.e(S)}finally{d.f()}}var y=this.circleCells[r];if(null!==y){var v,g=this.circles,_=p(y);try{for(_.s();!(v=_.n()).done;){var b=v.value;if(!l.circle[b]){l.circle[b]=!0;var x=3*b;if(this._circleAndRectCollide(g[x],g[x+1],g[x+2],e,t,i,n)&&(!s||s(this.circleKeys[b]))){if(o.hitTest)return a.push(!0),!0;var w=g[x],k=g[x+1],P=g[x+2];a.push({key:this.circleKeys[b],x1:w-P,y1:k-P,x2:w+P,y2:k+P})}}}}catch(S){_.e(S)}finally{_.f()}}}},{key:"_queryCellCircle",value:function(e,t,i,n,r,a,o,s){var l=o.circle,u=o.seenUids,c=this.boxCells[r];if(null!==c){var h,d=this.bboxes,f=p(c);try{for(f.s();!(h=f.n()).done;){var m=h.value;if(!u.box[m]){u.box[m]=!0;var y=4*m;if(this._circleAndRectCollide(l.x,l.y,l.radius,d[y+0],d[y+1],d[y+2],d[y+3])&&(!s||s(this.boxKeys[m])))return a.push(!0),!0}}}catch(k){f.e(k)}finally{f.f()}}var v=this.circleCells[r];if(null!==v){var g,_=this.circles,b=p(v);try{for(b.s();!(g=b.n()).done;){var x=g.value;if(!u.circle[x]){u.circle[x]=!0;var w=3*x;if(this._circlesCollide(_[w],_[w+1],_[w+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[x])))return a.push(!0),!0}}}catch(k){b.e(k)}finally{b.f()}}}},{key:"_forEachCell",value:function(e,t,i,n,r,a,o,s){for(var l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(i),h=this._convertToYCellCoord(n),p=l;p<=c;p++)for(var d=u;d<=h;d++)if(r.call(this,e,t,i,n,this.xCellCount*d+p,a,o,s))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,i,n,r,a){var o=n-e,s=r-t,l=i+a;return l*l>o*o+s*s}},{key:"_circleAndRectCollide",value:function(e,t,i,n,r,a,o){var s=(a-n)/2,l=Math.abs(e-(n+s));if(l>s+i)return!1;var u=(o-r)/2,c=Math.abs(t-(r+u));if(c>u+i)return!1;if(l<=s||c<=u)return!0;var h=l-s,p=c-u;return h*h+p*p<=i*i}}]),e}(),rt=Math.tan(85*Math.PI/180);function at(t,i,n,r,a,o){var s=e.create();if(n){if("globe"===a.projection.name)s=e.calculateGlobeMatrix(a,a.worldSize/a._projectionScaler,[0,0]),e.multiply$1(s,s,e.globeDenormalizeECEF(e.globeTileBounds(i)));else{var l=d([],o);s[0]=l[0],s[1]=l[1],s[4]=l[2],s[5]=l[3]}r||e.rotateZ(s,s,a.angle)}else e.multiply$1(s,a.labelPlaneMatrix,t);return s}function ot(t,i,n,r,a,o){if(n){if("globe"===a.projection.name){var s=at(t,i,n,r,a,o);return e.invert(s,s),e.multiply$1(s,t,s),s}var l=e.clone(t),u=e.identity([]);return u[0]=o[0],u[1]=o[1],u[4]=o[2],u[5]=o[3],e.multiply$1(l,l,u),r||e.rotateZ(l,l,-a.angle),l}return a.glCoordMatrix}function st(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[t.x,t.y,n,1];n?e.transformMat4$1(r,r,i):_t(r,r,i);var a=r[3];return{point:new e.pointGeometry(r[0]/a,r[1]/a),signedDistanceFromCamera:a}}function lt(e,t){return Math.min(.5+e/t*.5,1.5)}function ut(e,t){var i=e[0]/e[3],n=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&n>=-t[1]&&n<=t[1]}function ct(t,i,n,r,a,o,s,l,u,c){var h=n.transform,p=r?t.textSizeData:t.iconSizeData,d=e.evaluateSizeForZoom(p,n.transform.zoom),f=[256/n.width*2+1,256/n.height*2+1],m=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;m.clear();for(var y=t.lineVertexArray,v=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,g=n.transform.width/n.transform.height,_=!1,b=0;b<v.length;b++){var x=v.get(b);if(x.writingMode!==e.WritingMode.vertical||_||0!==b&&v.get(b-1).writingMode===e.WritingMode.horizontal||(_=!0),x.hidden||x.writingMode===e.WritingMode.vertical&&!_)gt(x.numGlyphs,m);else{_=!1;var w=new e.pointGeometry(x.tileAnchorX,x.tileAnchorY),k=u?u(w):[0,0,0],P=h.projection.projectTilePoint(w.x,w.y,c.canonical),S=[P.x+k[0],P.y+k[1],P.z+k[2]],T=[].concat(S,[1]);if(e.transformMat4$1(T,T,i),ut(T,f)){var C=lt(n.transform.cameraToCenterDistance,T[3]),O=e.evaluateSizeForFeature(p,d,x),I=s?O/C:O*C,E=st(new e.pointGeometry(S[0],S[1]),a,S[2]);if(E.signedDistanceFromCamera<=0)gt(x.numGlyphs,m);else{var A={},M=s?null:u,D=dt(x,I,!1,l,i,a,o,t.glyphOffsetArray,y,m,E.point,w,A,g,M,h.projection,c);_=D.useVertical,M&&D.needsFlipping&&(A={}),(D.notEnoughRoom||_||D.needsFlipping&&dt(x,I,!0,l,i,a,o,t.glyphOffsetArray,y,m,E.point,w,A,g,M,h.projection,c).notEnoughRoom)&&gt(x.numGlyphs,m)}}else gt(x.numGlyphs,m)}}r?t.text.dynamicLayoutVertexBuffer.updateData(m):t.icon.dynamicLayoutVertexBuffer.updateData(m)}function ht(e,t,i,n,r,a,o,s,l,u,c,h,p,d,f){var m=s.glyphStartIndex+s.numGlyphs,y=s.lineStartIndex,v=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),_=t.getoffsetX(m-1),b=yt(e*g,i,n,r,a,o,s.segment,y,v,l,u,c,h,p,!0,d,f);if(!b)return null;var x=yt(e*_,i,n,r,a,o,s.segment,y,v,l,u,c,h,p,!0,d,f);return x?{first:b,last:x}:null}function pt(t,i,n,r){return t.writingMode===e.WritingMode.horizontal&&Math.abs(n.y-i.y)>Math.abs(n.x-i.x)*r?{useVertical:!0}:t.writingMode===e.WritingMode.vertical?i.y<n.y?{needsFlipping:!0}:null:0!==t.flipState&&function(e,t,i){var n=(t.x-e.x)*i;return 0===n||Math.abs((t.y-e.y)/n)>rt}(i,n,r)?1===t.flipState?{needsFlipping:!0}:null:i.x>n.x?{needsFlipping:!0}:null}function dt(t,i,n,r,a,o,s,l,u,c,h,d,f,m,y,v,g){var _,b=i/24,x=t.lineOffsetX*b,w=t.lineOffsetY*b;if(t.numGlyphs>1){var k=t.glyphStartIndex+t.numGlyphs,P=t.lineStartIndex,S=t.lineStartIndex+t.lineLength,T=ht(b,l,x,w,n,h,d,t,u,o,f,y,!1,v,g);if(!T)return{notEnoughRoom:!0};var C=st(T.first.point,s).point,O=st(T.last.point,s).point;if(r&&!n){var I=pt(t,C,O,m);if(t.flipState=I&&I.needsFlipping?1:2,I)return I}_=[T.first];for(var E=t.glyphStartIndex+1;E<k-1;E++)_.push(yt(b*l.getoffsetX(E),x,w,n,h,d,t.segment,P,S,u,o,f,y,!1,!1,v,g));_.push(T.last)}else{if(r&&!n){var A=st(d,a).point,M=t.lineStartIndex+t.segment+1,D=new e.pointGeometry(u.getx(M),u.gety(M)),j=st(D,a),F=pt(t,A,j.signedDistanceFromCamera>0?j.point:mt(d,D,A,1,a,void 0,v,g.canonical),m);if(t.flipState=F&&F.needsFlipping?1:2,F)return F}var L=yt(b*l.getoffsetX(t.glyphStartIndex),x,w,n,h,d,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,o,f,y,!1,!1,v,g);if(!L)return{notEnoughRoom:!0};_=[L]}var R,z=p(_);try{for(z.s();!(R=z.n()).done;){var V=R.value;e.addDynamicAttributes(c,V.point,V.angle)}}catch(B){z.e(B)}finally{z.f()}return{}}function ft(t,i,n,r,a){var o=r.projectTilePoint(t.x,t.y,i);if(!a)return st(o,n,o.z);var s=a(t);return st(new e.pointGeometry(o.x+s[0],o.y+s[1]),n,o.z+s[2])}function mt(e,t,i,n,r,a,o,s){var l=ft(e.add(e.sub(t)._unit()),s,r,o,a).point,u=i.sub(l);return i.add(u._mult(n/u.mag()))}function yt(t,i,n,r,a,o,s,l,u,c,h,p,d,f,m,y,v){var g=r?t-i:t+i,_=g>0?1:-1,b=0;r&&(_*=-1,b=Math.PI),_<0&&(b+=Math.PI);for(var x=_>0?l+s:l+s+1,w=a,k=a,P=0,S=0,T=Math.abs(g),C=[],O=[],I=o,E=function(){var t=x-_;return 0===P?o:new e.pointGeometry(c.getx(t),c.gety(t))},A=function(){return mt(E(),I,k,T-P+1,h,d,y,v.canonical)};P+S<=T;){if((x+=_)<l||x>=u)return null;if(k=w,C.push(w),f&&O.push(I||E()),void 0===(w=p[x])){var M=ft(I=new e.pointGeometry(c.getx(x),c.gety(x)),v.canonical,h,y,d);w=M.signedDistanceFromCamera>0?p[x]=M.point:A()}else I=null;P+=S,S=k.dist(w)}m&&d&&(I=I||new e.pointGeometry(c.getx(x),c.gety(x)),p[x]=w=void 0===p[x]?w:A(),S=k.dist(w));var D=(T-P)/S,j=w.sub(k),F=j.mult(D)._add(k);n&&F._add(j._unit()._perp()._mult(n*_));var L=b+Math.atan2(w.y-k.y,w.x-k.x);return C.push(F),f&&(I=I||new e.pointGeometry(c.getx(x),c.gety(x)),O.push(function(t,i,n){var r=1-n;return new e.pointGeometry(t.x*r+i.x*n,t.y*r+i.y*n)}(O.length>0?O[O.length-1]:I,I,D))),{point:F,angle:L,path:C,tilePath:O}}var vt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function gt(e,t){for(var i=0;i<e;i++){var n=t.length;t.resize(n+4),t.float32.set(vt,3*n)}}function _t(e,t,i){var n=t[0],r=t[1];return e[0]=i[0]*n+i[4]*r+i[12],e[1]=i[1]*n+i[5]*r+i[13],e[3]=i[3]*n+i[7]*r+i[15],e}var bt=100,xt=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new nt(e.width+200,e.height+200,25),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new nt(e.width+200,e.height+200,25);y(this,t),this.transform=e,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+bt,this.screenBottomBoundary=e.height+bt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=i}return v(t,[{key:"placeCollisionBox",value:function(e,t,i,n,r,a,o){var s=t.projectedAnchorX,l=t.projectedAnchorY,u=t.projectedAnchorZ,c=t.elevation,h=t.tileID;if(c&&h){var p=this.transform.projection.createTileTransform(this.transform,this.transform.worldSize),d=p.upVector(h.canonical,t.tileAnchorX,t.tileAnchorY),f=p.upVectorScale(h.canonical);s+=d[0]*c*f,l+=d[1]*c*f,u+=d[2]*c*f}var m=this.projectAndGetPerspectiveRatio(a,s,l,u,t.tileID),y=r*m.perspectiveRatio,v=(t.x1*e+i.x-t.padding)*y+m.point.x,g=(t.y1*e+i.y-t.padding)*y+m.point.y,_=(t.x2*e+i.x+t.padding)*y+m.point.x,b=(t.y2*e+i.y+t.padding)*y+m.point.y,x=m.perspectiveRatio<=.55||m.aboveHorizon;return!this.isInsideGrid(v,g,_,b)||!n&&this.grid.hitTest(v,g,_,b,o)||x?{box:[],offscreen:!1}:{box:[v,g,_,b],offscreen:this.isOffscreen(v,g,_,b)}}},{key:"placeCollisionCircles",value:function(t,i,n,r,a,o,s,l,u,c,h,d,f,m){var y=[],v=this.transform.elevation,g=this.transform.projection.createTileTransform(this.transform,this.transform.worldSize),_=v?v.getAtTileOffsetFunc(m,g):function(e){return[0,0,0]},b=new e.pointGeometry(i.tileAnchorX,i.tileAnchorY),x=this.transform.projection.projectTilePoint(i.tileAnchorX,i.tileAnchorY,m.canonical),w=_(b),k=[x.x+w[0],x.y+w[1],x.z+w[2]],P=this.projectAndGetPerspectiveRatio(o,k[0],k[1],k[2],m),S=P.perspectiveRatio,T=(c?a/S:a*S)/e.ONE_EM,C=st(new e.pointGeometry(k[0],k[1]),s,k[2]).point,O=P.signedDistanceFromCamera>0?ht(T,r,i.lineOffsetX*T,i.lineOffsetY*T,!1,C,b,i,n,s,{},v&&!c?_:null,c&&!!v,this.transform.projection,m):null,I=!1,E=!1,A=!0;if(O&&!P.aboveHorizon){for(var M=.5*d*S+f,D=new e.pointGeometry(-100,-100),j=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),F=new it,L=O.first,R=O.last,z=[],V=L.path.length-1;V>=1;V--)z.push(L.path[V]);for(var B=1;B<R.path.length;B++)z.push(R.path[B]);var N=2.5*M;if(l){var U=z.map(v?function(e,t){var i=_(t<L.path.length-1?L.tilePath[L.path.length-1-t]:R.tilePath[t-L.path.length+2]);return st(e,l,i[2])}:function(e){return st(e,l)});z=U.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:U.map((function(e){return e.point}))}var W=[];if(z.length>0){for(var G=z[0].clone(),H=z[0].clone(),X=1;X<z.length;X++)G.x=Math.min(G.x,z[X].x),G.y=Math.min(G.y,z[X].y),H.x=Math.max(H.x,z[X].x),H.y=Math.max(H.y,z[X].y);W=G.x>=D.x&&H.x<=j.x&&G.y>=D.y&&H.y<=j.y?[z]:H.x<D.x||G.x>j.x||H.y<D.y||G.y>j.y?[]:e.clipLine([z],D.x,D.y,j.x,j.y)}var Y,q=p(W);try{for(q.s();!(Y=q.n()).done;){var Z=Y.value;F.reset(Z,.25*M);var K=0;K=F.length<=.5*M?1:Math.ceil(F.paddedLength/N)+1;for(var $=0;$<K;$++){var J=$/Math.max(K-1,1),Q=F.lerp(J),ee=Q.x+bt,te=Q.y+bt;y.push(ee,te,M,0);var ie=ee-M,ne=te-M,re=ee+M,ae=te+M;if(A=A&&this.isOffscreen(ie,ne,re,ae),E=E||this.isInsideGrid(ie,ne,re,ae),!t&&this.grid.hitTestCircle(ee,te,M,h)&&(I=!0,!u))return{circles:[],offscreen:!1,collisionDetected:I}}}}catch(oe){q.e(oe)}finally{q.f()}}return{circles:!u&&I||!E?[]:y,offscreen:A,collisionDetected:I}}},{key:"queryRenderedSymbols",value:function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var i,n=[],r=1/0,a=1/0,o=-1/0,s=-1/0,l=p(t);try{for(l.s();!(i=l.n()).done;){var u=i.value,c=new e.pointGeometry(u.x+bt,u.y+bt);r=Math.min(r,c.x),a=Math.min(a,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y),n.push(c)}}catch(b){l.e(b)}finally{l.f()}var h,d=this.grid.query(r,a,o,s).concat(this.ignoredGrid.query(r,a,o,s)),f={},m={},y=p(d);try{for(y.s();!(h=y.n()).done;){var v=h.value,g=v.key;if(void 0===f[g.bucketInstanceId]&&(f[g.bucketInstanceId]={}),!f[g.bucketInstanceId][g.featureIndex]){var _=[new e.pointGeometry(v.x1,v.y1),new e.pointGeometry(v.x2,v.y1),new e.pointGeometry(v.x2,v.y2),new e.pointGeometry(v.x1,v.y2)];e.polygonIntersectsPolygon(n,_)&&(f[g.bucketInstanceId][g.featureIndex]=!0,void 0===m[g.bucketInstanceId]&&(m[g.bucketInstanceId]=[]),m[g.bucketInstanceId].push(g.featureIndex))}}}catch(b){y.e(b)}finally{y.f()}return m}},{key:"insertCollisionBox",value:function(e,t,i,n,r){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:n,collisionGroupID:r},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,i,n,r){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:i,featureIndex:n,collisionGroupID:r},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])}},{key:"projectAndGetPerspectiveRatio",value:function(t,i,n,r,a){var o=[i,n,r||0,1],s=!1;if(r||this.transform.pitch>0){e.transformMat4$1(o,o,t);var l=!1;this.fogState&&a&&(l=function(t,i,n,r,a,o){var s=o.calculateFogTileMatrix(a),l=[i,n,r];return e.transformMat4(l,l,s),D(t,l,o.pitch,o._fov)}(this.fogState,i,n,r||0,a.toUnwrapped(),this.transform)>.9),s=o[2]>o[3]||l}else _t(o,o,t);return{point:new e.pointGeometry((o[0]/o[3]+1)/2*this.transform.width+bt,(-o[1]/o[3]+1)/2*this.transform.height+bt),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/o[3]*.5,1.5),signedDistanceFromCamera:o[3],aboveHorizon:s}}},{key:"isOffscreen",value:function(e,t,i,n){return i<bt||e>=this.screenRightBoundary||n<bt||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,i,n){return i>=0&&e<this.gridRightBoundary&&n>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}]),t}(),wt=function(){function e(t,i,n,r){y(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?i:-i))):r&&n?1:0,this.placed=n}return v(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),kt=function(){function e(t,i,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];y(this,e),this.text=new wt(t?t.text:null,i,n,a),this.icon=new wt(t?t.icon:null,i,r,a),this.clipped=o}return v(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),Pt=v((function e(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];y(this,e),this.text=t,this.icon=i,this.skipFade=n,this.clipped=r})),St=v((function t(){y(this,t),this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]})),Tt=v((function e(t,i,n,r,a){y(this,e),this.bucketInstanceId=t,this.featureIndex=i,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=a})),Ct=function(){function e(t){y(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return v(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function Ot(t,i,n,r,a){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*i,l=-(o.verticalAlign-.5)*n,u=e.evaluateVariableOffset(t,r);return new e.pointGeometry(s+u[0]*a,l+u[1]*a)}function It(t,i,n,r,a){var o=new e.pointGeometry(t,i);return n&&o._rotate(r?a:-a),o}var Et=function(){function t(e,i,n,r,a){y(this,t),this.transform=e.clone(),this.collisionIndex=new xt(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new Ct(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}return v(t,[{key:"getBucketParts",value:function(t,i,n,r){var a=n.getBucket(i),o=n.latestFeatureIndex;if(a&&o&&i.id===a.layerIds[0]){var s=a.layers[0].layout,l=n.collisionBoxArray,u=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/e.EXTENT,h=n.tileID.toUnwrapped(),d=this.transform.calculateProjMatrix(h),f="map"===s.get("text-pitch-alignment"),m="map"===s.get("text-rotation-alignment");i.compileFilter();var y=i.dynamicFilter(),v=i.dynamicFilterNeedsFeature(),g=this.transform.calculatePixelsToTileUnitsMatrix(n),_=at(d,n.tileID.canonical,f,m,this.transform,g),b=null;if(f){var x=ot(d,n.tileID.canonical,f,m,this.transform,g);b=e.multiply$1([],this.transform.labelPlaneMatrix,x)}var w=null;y&&n.latestFeatureIndex&&(w={unwrappedTileID:h,dynamicFilter:y,dynamicFilterNeedsFeature:v,featureIndex:n.latestFeatureIndex}),this.retainedQueryData[a.bucketInstanceId]=new Tt(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,n.tileID);var k={bucket:a,layout:s,posMatrix:d,textLabelPlaneMatrix:_,labelToScreenMatrix:b,clippingData:w,scale:u,textPixelRatio:c,holdingForFade:n.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(r){var P,S=p(a.sortKeyRanges);try{for(S.s();!(P=S.n()).done;){var T=P.value,C=T.sortKey,O=T.symbolInstanceStart,I=T.symbolInstanceEnd;t.push({sortKey:C,symbolInstanceStart:O,symbolInstanceEnd:I,parameters:k})}}catch(E){S.e(E)}finally{S.f()}}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:k})}}},{key:"attemptAnchorPlacement",value:function(e,t,i,n,r,a,o,s,l,u,c,h,p,d,f,m,y,v){var g,_=[h.textOffset0,h.textOffset1],b=Ot(e,i,n,_,r),x=this.collisionIndex.placeCollisionBox(r,t,It(b.x,b.y,a,o,this.transform.angle),c,s,l,u.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(d.getSymbolInstanceIconSize(v,this.transform.zoom,p),m,It(b.x,b.y,a,o,this.transform.angle),c,s,l,u.predicate).box.length)&&x.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(g=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:_,width:i,height:n,anchor:e,textScale:r,prevAnchor:g},this.markUsedJustification(d,e,h,f),d.allowVerticalPlacement&&(this.markUsedOrientation(d,f,h),this.placedOrientations[h.crossTileID]=f),{shift:b,placedGlyphBoxes:x}}},{key:"placeLayerBucketPart",value:function(t,i,n,r){var a=this,o=t.parameters,s=o.bucket,l=o.layout,u=o.posMatrix,c=o.textLabelPlaneMatrix,h=o.labelToScreenMatrix,d=o.clippingData,f=o.textPixelRatio,m=o.holdingForFade,y=o.collisionBoxArray,v=o.partiallyEvaluatedTextSize,g=o.partiallyEvaluatedIconSize,_=o.collisionGroup,b=l.get("text-optional"),x=l.get("icon-optional"),w=l.get("text-allow-overlap"),k=l.get("icon-allow-overlap"),P="map"===l.get("text-rotation-alignment"),S="map"===l.get("text-pitch-alignment"),T="none"!==l.get("icon-text-fit"),C="viewport-y"===l.get("symbol-z-order"),O=w&&(k||!s.hasIconData()||x),I=k&&(w||!s.hasTextData()||b);!s.collisionArrays&&y&&s.deserializeCollisionBoxes(y),n&&r&&s.updateCollisionDebugBuffers(this.transform.zoom,y);var E=function(t,r,o){if(d){var y={zoom:a.transform.zoom,pitch:a.transform.pitch},C=null;if(d.dynamicFilterNeedsFeature){var E=a.retainedQueryData[s.bucketInstanceId];C=d.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:E.bucketIndex,sourceLayerIndex:E.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,d.dynamicFilter)(y,C,a.retainedQueryData[s.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),a.transform.calculateDistanceTileData(d.unwrappedTileID)))return a.placements[t.crossTileID]=new Pt(!1,!1,!1,!0),void(i[t.crossTileID]=!0)}if(!i[t.crossTileID])if(m)a.placements[t.crossTileID]=new Pt(!1,!1,!1);else{var A=!1,M=!1,D=!0,j=null,F={box:null,offscreen:null},L={box:null,offscreen:null},R=null,z=null,V=null,B=0,N=0,U=0;o.textFeatureIndex?B=o.textFeatureIndex:t.useRuntimeCollisionCircles&&(B=t.featureIndex),o.verticalTextFeatureIndex&&(N=o.verticalTextFeatureIndex);var W=function(e){e.tileID=a.retainedQueryData[s.bucketInstanceId].tileID,(a.transform.elevation||e.elevation)&&(e.elevation=a.transform.elevation?a.transform.elevation.getAtTileOffset(a.retainedQueryData[s.bucketInstanceId].tileID,e.tileAnchorX,e.tileAnchorY):0)},G=o.textBox;if(G){W(G);var H=function(i){var n=e.WritingMode.horizontal;if(s.allowVerticalPlacement&&!i&&a.prevPlacement){var r=a.prevPlacement.placedOrientations[t.crossTileID];r&&(a.placedOrientations[t.crossTileID]=r,n=r,a.markUsedOrientation(s,n,t))}return n},X=function(i,n){if(s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&o.verticalTextBox){var r,a=p(s.writingModes);try{for(a.s();!(r=a.n()).done&&(r.value===e.WritingMode.vertical?(F=n(),L=F):F=i(),!(F&&F.box&&F.box.length)););}catch(l){a.e(l)}finally{a.f()}}else F=i()};if(l.get("text-variable-anchor")){var Y=l.get("text-variable-anchor");if(a.prevPlacement&&a.prevPlacement.variableOffsets[t.crossTileID]){var q=a.prevPlacement.variableOffsets[t.crossTileID];Y.indexOf(q.anchor)>0&&(Y=Y.filter((function(e){return e!==q.anchor})),Y.unshift(q.anchor))}var Z=function(e,i,n){var o=s.getSymbolInstanceTextSize(v,t,a.transform.zoom,r),l=(e.x2-e.x1)*o+2*e.padding,c=(e.y2-e.y1)*o+2*e.padding,h=T&&!k?i:null;h&&W(h);for(var p={box:[],offscreen:!1},d=w?2*Y.length:Y.length,m=0;m<d;++m){var y=a.attemptAnchorPlacement(Y[m%Y.length],e,l,c,o,P,S,f,u,_,m>=Y.length,t,r,s,n,h,v,g);if(y&&(p=y.placedGlyphBoxes)&&p.box&&p.box.length){A=!0,j=y.shift;break}}return p};X((function(){return Z(G,o.iconBox,e.WritingMode.horizontal)}),(function(){var i=o.verticalTextBox;return i&&W(i),s.allowVerticalPlacement&&!(F&&F.box&&F.box.length)&&t.numVerticalGlyphVertices>0&&i?Z(i,o.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),F&&(A=F.box,D=F.offscreen);var K=H(F&&F.box);if(!A&&a.prevPlacement){var $=a.prevPlacement.variableOffsets[t.crossTileID];$&&(a.variableOffsets[t.crossTileID]=$,a.markUsedJustification(s,$.anchor,t,K))}}else{var J=function(i,n){var o=s.getSymbolInstanceTextSize(v,t,a.transform.zoom,r),l=a.collisionIndex.placeCollisionBox(o,i,new e.pointGeometry(0,0),w,f,u,_.predicate);return l&&l.box&&l.box.length&&(a.markUsedOrientation(s,n,t),a.placedOrientations[t.crossTileID]=n),l};X((function(){return J(G,e.WritingMode.horizontal)}),(function(){var i=o.verticalTextBox;return s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i?(W(i),J(i,e.WritingMode.vertical)):{box:null,offscreen:null}})),H(F&&F.box&&F.box.length)}}if(A=(R=F)&&R.box&&R.box.length>0,D=R&&R.offscreen,t.useRuntimeCollisionCircles){var Q=s.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),ee=e.evaluateSizeForFeature(s.textSizeData,v,Q),te=l.get("text-padding");z=a.collisionIndex.placeCollisionCircles(w,Q,s.lineVertexArray,s.glyphOffsetArray,ee,u,c,h,n,S,_.predicate,t.collisionCircleDiameter*ee/e.ONE_EM,te,a.retainedQueryData[s.bucketInstanceId].tileID),A=w||z.circles.length>0&&!z.collisionDetected,D=D&&z.offscreen}if(o.iconFeatureIndex&&(U=o.iconFeatureIndex),o.iconBox){var ie=function(t){W(t);var i=T&&j?It(j.x,j.y,P,S,a.transform.angle):new e.pointGeometry(0,0),n=s.getSymbolInstanceIconSize(g,a.transform.zoom,r);return a.collisionIndex.placeCollisionBox(n,t,i,k,f,u,_.predicate)};M=L&&L.box&&L.box.length&&o.verticalIconBox?(V=ie(o.verticalIconBox)).box.length>0:(V=ie(o.iconBox)).box.length>0,D=D&&V.offscreen}var ne=b||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,re=x||0===t.numIconVertices;if(ne||re?re?ne||(M=M&&A):A=M&&A:M=A=M&&A,A&&R&&R.box&&a.collisionIndex.insertCollisionBox(R.box,l.get("text-ignore-placement"),s.bucketInstanceId,L&&L.box&&N?N:B,_.ID),M&&V&&a.collisionIndex.insertCollisionBox(V.box,l.get("icon-ignore-placement"),s.bucketInstanceId,U,_.ID),z&&(A&&a.collisionIndex.insertCollisionCircles(z.circles,l.get("text-ignore-placement"),s.bucketInstanceId,B,_.ID),n)){var ae=s.bucketInstanceId,oe=a.collisionCircleArrays[ae];void 0===oe&&(oe=a.collisionCircleArrays[ae]=new St);for(var se=0;se<z.circles.length;se+=4)oe.circles.push(z.circles[se+0]),oe.circles.push(z.circles[se+1]),oe.circles.push(z.circles[se+2]),oe.circles.push(z.collisionDetected?1:0)}a.placements[t.crossTileID]=new Pt(A||O,M||I,D||s.justReloaded),i[t.crossTileID]=!0}};if(C)for(var A=s.getSortedSymbolIndexes(this.transform.angle),M=A.length-1;M>=0;--M){var D=A[M];E(s.symbolInstances.get(D),D,s.collisionArrays[D])}else for(var j=t.symbolInstanceStart;j<t.symbolInstanceEnd;j++)E(s.symbolInstances.get(j),j,s.collisionArrays[j]);if(n&&s.bucketInstanceId in this.collisionCircleArrays){var F=this.collisionCircleArrays[s.bucketInstanceId];e.invert(F.invProjMatrix,u),F.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}},{key:"markUsedJustification",value:function(t,i,n,r){var a;a=r===e.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(i)];for(var o=0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];o<s.length;o++){var l=s[o];l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=a>=0&&l!==a?0:n.crossTileID)}}},{key:"markUsedOrientation",value:function(t,i,n){for(var r=i===e.WritingMode.horizontal||i===e.WritingMode.horizontalOnly?i:0,a=i===e.WritingMode.vertical?i:0,o=0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];o<s.length;o++){var l=s[o];t.text.placedSymbolArray.get(l).placedOrientation=r}n.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=a)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var n=t?t.symbolFadeChange(e):1,r=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=r[s];u?(this.opacities[s]=new kt(u,n,l.text,l.icon,null,l.clipped),i=i||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new kt(null,n,l.text,l.icon,l.skipFade,l.clipped),i=i||l.text||l.icon)}for(var c in r){var h=r[c];if(!this.opacities[c]){var p=new kt(h,n,!1,!1);p.isHidden()||(this.opacities[c]=p,i=i||h.text.placed||h.icon.placed)}}for(var d in a)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=a[d]);for(var f in o)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=o[f]);i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var i,n={},r=p(t);try{for(r.s();!(i=r.n()).done;){var a=i.value,o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,n,a.collisionBoxArray)}}catch(s){r.e(s)}finally{r.f()}}},{key:"updateBucketOpacities",value:function(t,i,n){var r=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var a=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),s=new kt(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),u=a.get("icon-allow-overlap"),c=a.get("text-variable-anchor"),h="map"===a.get("text-rotation-alignment"),p="map"===a.get("text-pitch-alignment"),d="none"!==a.get("icon-text-fit"),f=new kt(null,0,l&&(u||!t.hasIconData()||a.get("icon-optional")),u&&(l||!t.hasTextData()||a.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(n);for(var m=function(e,t,i){for(var n=0;n<t/4;n++)e.opacityVertexArray.emplaceBack(i)},y=0,v=function(n){var a=t.symbolInstances.get(n),l=a.numHorizontalGlyphVertices,u=a.numVerticalGlyphVertices,v=a.crossTileID,g=r.opacities[v];i[v]?g=s:g||(g=f,r.opacities[v]=g),i[v]=!0;var _=l>0||u>0,b=a.numIconVertices>0,x=r.placedOrientations[a.crossTileID],w=x===e.WritingMode.vertical,k=x===e.WritingMode.horizontal||x===e.WritingMode.horizontalOnly;if(!_&&!b||g.isHidden()||y++,_){var P=Vt(g.text);m(t.text,l,w?Bt:P),m(t.text,u,k?Bt:P);var S=g.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=S||w?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=S||k?1:0);var T=r.variableOffsets[a.crossTileID];T&&r.markUsedJustification(t,T.anchor,a,x);var C=r.placedOrientations[a.crossTileID];C&&(r.markUsedJustification(t,"left",a,C),r.markUsedOrientation(t,C,a))}if(b){var O=Vt(g.icon);a.placedIconSymbolIndex>=0&&(m(t.icon,a.numIconVertices,w?Bt:O),t.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=g.icon.isHidden()),a.verticalPlacedIconSymbolIndex>=0&&(m(t.icon,a.numVerticalIconVertices,k?Bt:O),t.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var I=t.collisionArrays[n];if(I){var E=new e.pointGeometry(0,0),A=!0;if(I.textBox||I.verticalTextBox){if(c){var M=r.variableOffsets[v];M?(E=Ot(M.anchor,M.width,M.height,M.textOffset,M.textScale),h&&E._rotate(p?r.transform.angle:-r.transform.angle)):A=!1}o&&(A=!g.clipped),I.textBox&&At(t.textCollisionBox.collisionVertexArray,g.text.placed,!A||w,E.x,E.y),I.verticalTextBox&&At(t.textCollisionBox.collisionVertexArray,g.text.placed,!A||k,E.x,E.y)}var D=A&&Boolean(!k&&I.verticalIconBox);I.iconBox&&At(t.iconCollisionBox.collisionVertexArray,g.icon.placed,D,d?E.x:0,d?E.y:0),I.verticalIconBox&&At(t.iconCollisionBox.collisionVertexArray,g.icon.placed,!D,d?E.x:0,d?E.y:0)}}},g=0;g<t.symbolInstances.length;g++)v(g);if(t.fullyClipped=0===y,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var _=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=_.invProjMatrix,t.placementViewportMatrix=_.viewportMatrix,t.collisionCircleArray=_.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e}},{key:"setStale",value:function(){this.stale=!0}}]),t}();function At(e,t,i,n,r){e.emplaceBack(t?1:0,i?1:0,n||0,r||0),e.emplaceBack(t?1:0,i?1:0,n||0,r||0),e.emplaceBack(t?1:0,i?1:0,n||0,r||0),e.emplaceBack(t?1:0,i?1:0,n||0,r||0)}var Mt=Math.pow(2,25),Dt=Math.pow(2,24),jt=Math.pow(2,17),Ft=Math.pow(2,16),Lt=Math.pow(2,9),Rt=Math.pow(2,8),zt=Math.pow(2,1);function Vt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*Mt+t*Dt+i*jt+t*Ft+i*Lt+t*Rt+i*zt+t}var Bt=0,Nt=function(){function e(t){y(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return v(e,[{key:"continuePlacement",value:function(e,t,i,n,r){for(var a=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(a,n,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<a.length;){var o=a[this._currentPartIndex];if(t.placeLayerBucketPart(o,this._seenCrossTileIDs,i,0===o.symbolInstanceStart),this._currentPartIndex++,r())return!0}return!1}}]),e}(),Ut=function(){function t(e,i,n,r,a,o,s,l){y(this,t),this.placement=new Et(e,a,o,s,l),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}return v(t,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(t,i,n){for(var r=this,a=e.exported.now(),o=function(){var t=e.exported.now()-a;return!r._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=i[t[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Nt(s)),this._inProgressLayer.continuePlacement(n[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),t}(),Wt=512/e.EXTENT/2,Gt=function(){function t(e,i,n){y(this,t),this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<i.length;r++){var a=i.get(r),o=a.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,e)})}}return v(t,[{key:"getScaledCoordinates",value:function(t,i){var n=Wt/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*e.EXTENT+t.tileAnchorX)*n),y:Math.floor((i.canonical.y*e.EXTENT+t.tileAnchorY)*n)}}},{key:"findMatches",value:function(e,t,i){for(var n=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),r=0;r<e.length;r++){var a=e.get(r);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o){var s,l=this.getScaledCoordinates(a,t),u=p(o);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(Math.abs(c.coord.x-l.x)<=n&&Math.abs(c.coord.y-l.y)<=n&&!i[c.crossTileID]){i[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}catch(h){u.e(h)}finally{u.f()}}}}}}]),t}(),Ht=function(){function e(){y(this,e),this.maxCrossTileID=0}return v(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),Xt=function(){function e(){y(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return v(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var i in this.indexes){var n=this.indexes[i],r={};for(var a in n){var o=n[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),r[o.tileID.key]=o}this.indexes[i]=r}this.lng=e}},{key:"addBucket",value:function(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var n=0;n<t.symbolInstances.length;n++)t.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var r=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,r)}else{var u=o[e.scaledTo(Number(a)).key];u&&u.findMatches(t.symbolInstances,e,r)}}for(var c=0;c<t.symbolInstances.length;c++){var h=t.symbolInstances.get(c);h.crossTileID||(h.crossTileID=i.generate(),r[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Gt(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){for(var i in t.indexedSymbolInstances){var n,r=p(t.indexedSymbolInstances[i]);try{for(r.s();!(n=r.n()).done;){var a=n.value;delete this.usedCrossTileIDs[e][a.crossTileID]}}catch(o){r.e(o)}finally{r.f()}}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var i in this.indexes){var n=this.indexes[i];for(var r in n)e[n[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,n[r]),delete n[r],t=!0)}return t}}]),e}(),Yt=function(){function e(){y(this,e),this.layerIndexes={},this.crossTileIDs=new Ht,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return v(e,[{key:"addLayer",value:function(e,t,i,n){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Xt);var a=!1,o={};"globe"!==n.name&&r.handleWrapJump(i);var s,l=p(t);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.getBucket(e);c&&e.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,c,this.crossTileIDs)&&(a=!0),o[c.bucketInstanceId]=!0)}}catch(h){l.e(h)}finally{l.f()}return r.removeStaleBuckets(o)&&(a=!0),a}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var i in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[i]||delete this.layerIndexes[i]}}]),e}(),qt=function(t,i){return e.emitValidationErrors(t,i&&i.filter((function(e){return"source.canvas"!==e.identifier})))},Zt=e.pick(qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Kt=e.pick(qe,["setCenter","setZoom","setBearing","setPitch"]),$t=function(){var t={},i=e.spec.$version;for(var n in e.spec.$root){var r=e.spec.$root[n];if(r.required){var a=null;null!=(a="version"===n?i:"array"===r.type?[]:{})&&(t[n]=a)}}return t}(),Jt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},Qt=function(t){f(n,t);var i=m(n);function n(t){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,n),(a=i.call(this)).map=t,a.dispatcher=new z(He(),r(a)),a.imageManager=new T,a.imageManager.setEventedParent(r(a)),a.glyphManager=new e.GlyphManager(t._requestManager,o.localFontFamily?e.LocalGlyphMode.all:o.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,o.localFontFamily||o.localIdeographFontFamily),a.lineAtlas=new e.LineAtlas(256,512),a.crossTileSymbolIndex=new Yt,a._layers={},a._num3DLayers=0,a._numSymbolLayers=0,a._numCircleLayers=0,a._serializedLayers={},a._sourceCaches={},a._otherSourceCaches={},a._symbolSourceCaches={},a.zoomHistory=new e.ZoomHistory,a._loaded=!1,a._availableImages=[],a._order=[],a._drapedFirstOrder=[],a._markersNeedUpdate=!1,a._resetUpdates(),a.dispatcher.broadcast("setReferrer",e.getReferrer());var s=r(a);return a._rtlTextPluginCallback=n.registerForPluginStateChange((function(t){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,i){if(e.triggerPluginCompletionEvent(t),i&&i.every((function(e){return e})))for(var n in s._sourceCaches){var r=s._sourceCaches[n],a=r.getSource().type;"vector"!==a&&"geojson"!==a||r.reload()}}))})),a.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=a.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(var i in a._layers){var n=a._layers[i];n.source===t.id&&a._validateLayer(n)}}})),a}return v(n,[{key:"loadURL",value:function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);var a=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,(function(t,n){i._request=null,t?i.fire(new e.ErrorEvent(t)):n&&i._load(n,r)}))}},{key:"loadJSON",value:function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((function(){i._request=null,i._load(t,!1!==n.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load($t,!1)}},{key:"_updateLayerCount",value:function(e,t){var i=t?1:-1;e.is3D()&&(this._num3DLayers+=i),"circle"===e.type&&(this._numCircleLayers+=i),"symbol"===e.type&&(this._numSymbolLayers+=i)}},{key:"_load",value:function(t,i){if(!i||!qt(this,e.validateStyle(t))){for(var n in this._loaded=!0,this.stylesheet=t,this.updateProjection(),t.sources)this.addSource(n,t.sources[n],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);var r=Ye(this.stylesheet.layers);this._order=r.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var a,o=p(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize(),this._updateLayerCount(s,!0)}}catch(l){o.e(l)}finally{o.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}}},{key:"terrainSetForDrapingOnly",value:function(){return this.terrain&&0===this.terrain.drapeRenderMode}},{key:"setProjection",value:function(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this.updateProjection()}},{key:"updateProjection",value:function(){var e=this.map.transform.projection,t=this.map.transform.setProjection(this.map._runtimeProjection||(this.stylesheet?this.stylesheet.projection:void 0)),i=this.map.transform.projection;if(this._loaded&&(i.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null)),this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),t){if(i.isReprojectedInTileSpace||e.isReprojectedInTileSpace)for(var n in this.map.painter.clearBackgroundTiles(),this._sourceCaches)this._sourceCaches[n].clearTiles();else this._forceSymbolLayerUpdate();this.map._update(!0)}}},{key:"_loadSprite",value:function(t){var i=this;this._spriteRequest=function(t,i,n){var r,a,o,s=e.exported.devicePixelRatio>1?"@2x":"",l=e.getJSON(i.transformRequest(i.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){l=null,o||(o=e,r=t,c())})),u=e.getImage(i.transformRequest(i.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){u=null,o||(o=e,a=t,c())}));function c(){if(o)n(o);else if(r&&a){var t=e.exported.getImageData(a),i={};for(var s in r){var l=r[s],u=l.width,c=l.height,h=l.x,p=l.y,d=l.sdf,f=l.pixelRatio,m=l.stretchX,y=l.stretchY,v=l.content,g=new e.RGBAImage({width:u,height:c});e.RGBAImage.copy(t,g,{x:h,y:p},{x:0,y:0},{width:u,height:c}),i[s]={data:g,pixelRatio:f,sdf:d,stretchX:m,stretchY:y,content:v}}n(null,i)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,(function(t,n){if(i._spriteRequest=null,t)i.fire(new e.ErrorEvent(t));else if(n)for(var r in n)i.imageManager.addImage(r,n[r]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.dispatcher.broadcast("spriteLoaded",!0),i.fire(new e.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(t){var i=this.getSource(t.source);if(i){var n=t.sourceLayer;n&&("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(n))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(n,'" does not exist on source "').concat(i.id,'" as specified by style layer "').concat(t.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,i=[],n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=this._layers[r];"custom"!==a.type&&i.push(a.serialize())}}catch(o){n.e(o)}finally{n.f()}return i}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(var e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"order",get:function(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}},{key:"isLayerDraped",value:function(e){return!!this.terrain&&Jt[e.type]}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(t){if(this._loaded){var i=this._changed;if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var a in(n.length||r.length)&&this._updateWorkerLayers(n,r),this._updatedSources){var o=this._updatedSources[a];"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}var l={};for(var u in this._sourceCaches){var c=this._sourceCaches[u];l[u]=c.used,c.used=!1}var h,d=p(this._order);try{for(d.s();!(h=d.n()).done;){var f=h.value,m=this._layers[f];if(m.recalculate(t,this._availableImages),!m.isHidden(t.zoom)){var y=this._getLayerSourceCache(m);y&&(y.used=!0)}var v=this.map.painter;if(v){var g=m.getProgramIds();if(!g)continue;var _,b=m.getProgramConfiguration(t.zoom),x=p(g);try{for(x.s();!(_=x.n()).done;){var w=_.value;v.useProgram(w,b)}}catch(S){x.e(S)}finally{x.f()}}}}catch(S){d.e(S)}finally{d.f()}for(var k in l){var P=this._sourceCaches[k];l[k]!==P.used&&P.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:P.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),i&&this.fire(new e.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(t){var i=this;if(this._checkLoaded(),qt(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=Ye(t.layers);var n=function(e,t){if(!e)return[{command:qe.setStyle,args:[t]}];var i=[];try{if(!g(e.version,t.version))return[{command:qe.setStyle,args:[t]}];g(e.center,t.center)||i.push({command:qe.setCenter,args:[t.center]}),g(e.zoom,t.zoom)||i.push({command:qe.setZoom,args:[t.zoom]}),g(e.bearing,t.bearing)||i.push({command:qe.setBearing,args:[t.bearing]}),g(e.pitch,t.pitch)||i.push({command:qe.setPitch,args:[t.pitch]}),g(e.sprite,t.sprite)||i.push({command:qe.setSprite,args:[t.sprite]}),g(e.glyphs,t.glyphs)||i.push({command:qe.setGlyphs,args:[t.glyphs]}),g(e.transition,t.transition)||i.push({command:qe.setTransition,args:[t.transition]}),g(e.light,t.light)||i.push({command:qe.setLight,args:[t.light]}),g(e.fog,t.fog)||i.push({command:qe.setFog,args:[t.fog]}),g(e.projection,t.projection)||i.push({command:qe.setProjection,args:[t.projection]});var n={},r=[];!function(e,t,i,n){var r;for(r in t=t||{},e=e||{})e.hasOwnProperty(r)&&(t.hasOwnProperty(r)||Ke(r,i,n));for(r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)?g(e[r],t[r])||("geojson"===e[r].type&&"geojson"===t[r].type&&Je(e,t,r)?i.push({command:qe.setGeoJSONSourceData,args:[r,t[r].data]}):$e(r,t,i,n)):Ze(r,t,i))}(e.sources,t.sources,r,n);var a=[];e.layers&&e.layers.forEach((function(e){n[e.source]?i.push({command:qe.removeLayer,args:[e.id]}):a.push(e)}));var o=e.terrain;o&&n[o.source]&&(i.push({command:qe.setTerrain,args:[void 0]}),o=void 0),i=i.concat(r),g(o,t.terrain)||i.push({command:qe.setTerrain,args:[t.terrain]}),function(e,t,i){t=t||[];var n,r,a,o,s,l,u,c=(e=e||[]).map(et),h=t.map(et),p=e.reduce(tt,{}),d=t.reduce(tt,{}),f=c.slice(),m=Object.create(null);for(n=0,r=0;n<c.length;n++)a=c[n],d.hasOwnProperty(a)?r++:(i.push({command:qe.removeLayer,args:[a]}),f.splice(f.indexOf(a,r),1));for(n=0,r=0;n<h.length;n++)a=h[h.length-1-n],f[f.length-1-n]!==a&&(p.hasOwnProperty(a)?(i.push({command:qe.removeLayer,args:[a]}),f.splice(f.lastIndexOf(a,f.length-r),1)):r++,l=f[f.length-n],i.push({command:qe.addLayer,args:[d[a],l]}),f.splice(f.length-n,0,a),m[a]=!0);for(n=0;n<h.length;n++)if(o=p[a=h[n]],s=d[a],!m[a]&&!g(o,s))if(g(o.source,s.source)&&g(o["source-layer"],s["source-layer"])&&g(o.type,s.type)){for(u in Qe(o.layout,s.layout,i,a,null,qe.setLayoutProperty),Qe(o.paint,s.paint,i,a,null,qe.setPaintProperty),g(o.filter,s.filter)||i.push({command:qe.setFilter,args:[a,s.filter]}),g(o.minzoom,s.minzoom)&&g(o.maxzoom,s.maxzoom)||i.push({command:qe.setLayerZoomRange,args:[a,s.minzoom,s.maxzoom]}),o)o.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Qe(o[u],s[u],i,a,u.slice(6),qe.setPaintProperty):g(o[u],s[u])||i.push({command:qe.setLayerProperty,args:[a,u,s[u]]}));for(u in s)s.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?Qe(o[u],s[u],i,a,u.slice(6),qe.setPaintProperty):g(o[u],s[u])||i.push({command:qe.setLayerProperty,args:[a,u,s[u]]}))}else i.push({command:qe.removeLayer,args:[a]}),l=f[f.lastIndexOf(a)+1],i.push({command:qe.addLayer,args:[s,l]})}(a,t.layers,i)}catch(e){console.warn("Unable to compute style diff:",e),i=[{command:qe.setStyle,args:[t]}]}return i}(this.serialize(),t).filter((function(e){return!(e.command in Kt)}));if(0===n.length)return!1;var r=n.filter((function(e){return!(e.command in Zt)}));if(r.length>0)throw new Error("Unimplemented: ".concat(r.map((function(e){return e.command})).join(", "),"."));return n.forEach((function(e){"setTransition"!==e.command&&i[e.command].apply(i,e.args)})),this.stylesheet=t,this.updateProjection(),!0}},{key:"addImage",value:function(t,i){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,i),this._afterImageUpdated(t)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)}},{key:"_afterImageUpdated",value:function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this._availableImages.slice()}},{key:"addSource",value:function(t,i){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(i).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(e.validateStyle.source,"sources.".concat(t),i,null,r))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var a=Le(t,i,this.dispatcher,this);a.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:a.serialize(),sourceId:t}}));var o=function(i){var r=(i?"symbol:":"other:")+t,o=n._sourceCaches[r]=new e.SourceCache(r,a,i);(i?n._symbolSourceCaches:n._otherSourceCaches)[t]=o,o.style=n,o.onAdd(n.map)};o(!1),"vector"!==i.type&&"geojson"!==i.type||o(!0),a.onAdd&&a.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(t){this._checkLoaded();var i=this.getSource(t);if(void 0===i)throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(n,'" is using it.'))));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));var r,a=this._getSourceCaches(t),o=p(a);try{for(o.s();!(r=o.n()).done;){var s=r.value;delete this._sourceCaches[s.id],delete this._updatedSources[s.id],s.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s.getSource().id})),s.setEventedParent(null),s.clearTiles()}}catch(l){o.e(l)}finally{o.f()}delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changed=!0}},{key:"setGeoJSONSourceData",value:function(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}},{key:"getSource",value:function(e){var t=this._getSourceCache(e);return t&&t.getSource()}},{key:"addLayer",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var r=t.id;if(this.getLayer(r))this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(r,'" already exists on this map'))));else{var a;if("custom"===t.type){if(qt(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(r,t.source),t=e.clone$1(t),t=e.extend(t,{source:r})),this._validate(e.validateStyle.layer,"layers.".concat(r),t,{arrayIndex:-1},n))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[a.id]=a.serialize(),this._updateLayerCount(a,!0)}var o=i?this._order.indexOf(i):this._order.length;if(i&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(i,'" does not exist on this map.'))));else{this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=a;var s=this._getLayerSourceCache(a);if(this._removedLayers[r]&&a.source&&s&&"custom"!==a.type){var l=this._removedLayers[r];delete this._removedLayers[r],l.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",s.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),this._updateDrapeFirstLayers()}}}},{key:"moveLayer",value:function(t,i){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==i){var n=this._order.indexOf(t);this._order.splice(n,1);var r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(i,'" does not exist on this map.')))):(this._order.splice(r,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(t){this._checkLoaded();var i=this._layers[t];if(i){i.setEventedParent(null),this._updateLayerCount(i,!1);var n=this._order.indexOf(t);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map),this._updateDrapeFirstLayers()}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"hasLayerType",value:function(e){for(var t in this._layers)if(this._layers[t].type===e)return!0;return!1}},{key:"setLayerZoomRange",value:function(t,i,n){this._checkLoaded();var r=this.getLayer(t);r?r.minzoom===i&&r.maxzoom===n||(null!=i&&(r.minzoom=i),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var r=this.getLayer(t);if(r){if(!g(r.filter,i))return null==i?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(e.validateStyle.filter,"layers.".concat(r.id,".filter"),i,{layerType:r.type},n)||(r.filter=e.clone$1(i),this._updateLayer(r)))}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(t){return e.clone$1(this.getLayer(t).filter)}},{key:"setLayoutProperty",value:function(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var a=this.getLayer(t);a?g(a.getLayoutProperty(i),n)||(a.setLayoutProperty(i,n,r),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(t,i){var n=this.getLayer(t);if(n)return n.getLayoutProperty(i);this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var a=this.getLayer(t);a?g(a.getPaintProperty(i),n)||(a.setPaintProperty(i,n,r)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(e,t){return this.getLayer(e).getPaintProperty(t)}},{key:"setFeatureState",value:function(t,i){this._checkLoaded();var n=t.source,r=t.sourceLayer,a=this.getSource(n);if(void 0!==a){var o=a.type;if("geojson"===o&&r)this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==o||r){void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));var s,l=this._getSourceCaches(n),u=p(l);try{for(u.s();!(s=u.n()).done;)s.value.setFeatureState(r,t.id,i)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(t,i){this._checkLoaded();var n=t.source,r=this.getSource(n);if(void 0!==r){var a=r.type,o="vector"===a?t.sourceLayer:void 0;if("vector"!==a||o)if(i&&"string"!=typeof t.id&&"number"!=typeof t.id)this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));else{var s,l=this._getSourceCaches(n),u=p(l);try{for(u.s();!(s=u.n()).done;)s.value.removeFeatureState(o,t.id,i)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(t){this._checkLoaded();var i=t.source,n=t.sourceLayer,r=this.getSource(i);if(void 0!==r){if("vector"!==r.type||n)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(i)[0].getFeatureState(n,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(i,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var t={};for(var i in this._sourceCaches){var n=this._sourceCaches[i].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0;var t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,i=function(e){return"fill-extrusion"===t._layers[e].type},n={},r=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(i(o)){n[o]=a;var s,l=p(e);try{for(l.s();!(s=l.n()).done;){var u=s.value[o];if(u){var c,h=p(u);try{for(h.s();!(c=h.n()).done;){var d=c.value;r.push(d)}}catch(S){h.e(S)}finally{h.f()}}}}catch(S){l.e(S)}finally{l.f()}}}r.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var f=[],m=this._order.length-1;m>=0;m--){var y=this._order[m];if(i(y))for(var v=r.length-1;v>=0;v--){var g=r[v].feature;if(n[g.layer.id]<m)break;f.push(g),r.pop()}else{var _,b=p(e);try{for(b.s();!(_=b.n()).done;){var x=_.value[y];if(x){var w,k=p(x);try{for(k.s();!(w=k.n()).done;){var P=w.value;f.push(P.feature)}}catch(S){k.e(S)}finally{k.f()}}}}catch(S){b.e(S)}finally{b.f()}}}return f}},{key:"queryRenderedFeatures",value:function(t,i,n){var r=this;i&&i.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var a={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var o,s=p(i.layers);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=this._layers[l];if(!u)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(l,"' does not exist in the map's style and cannot be queried for features.")))),[];a[u.source]=!0}}catch(y){s.e(y)}finally{s.f()}}var c=[];i.availableImages=this._availableImages;var h=i&&i.layers?i.layers.some((function(e){var t=r.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),d=Ce.createFromScreenPoints(t,n);for(var f in this._sourceCaches){var m=this._sourceCaches[f].getSource().id;i.layers&&!a[m]||c.push(ze(this._sourceCaches[f],this._layers,this._serializedLayers,d,i,n,h,!!this.map._showQueryGeometry))}return this.placement&&c.push(function(e,t,i,n,r,a,o){var s,l={},u=a.queryRenderedSymbols(n),c=[],h=p(Object.keys(u).map(Number));try{for(h.s();!(s=h.n()).done;){var d=s.value;c.push(o[d])}}catch(y){h.e(y)}finally{h.f()}c.sort(Be);for(var f=function(){var i=v[m],n=i.featureIndex.lookupSymbolFeatures(u[i.bucketInstanceId],t,i.bucketIndex,i.sourceLayerIndex,r.filter,r.layers,r.availableImages,e);for(var a in n){var o=l[a]=l[a]||[],s=n[a];s.sort((function(e,t){var n=i.featureSortOrder;if(n){var r=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));var c,h=p(s);try{for(h.s();!(c=h.n()).done;){var d=c.value;o.push(d)}}catch(y){h.e(y)}finally{h.f()}}},m=0,v=c;m<v.length;m++)f();var g=function(t){l[t].forEach((function(n){var r=n.feature,a=i(e[t]).getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a}))};for(var _ in l)g(_);return l}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),d.screenGeometry,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)}},{key:"querySourceFeatures",value:function(t,i){i&&i.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var n,r=this._getSourceCaches(t),a=[],o=p(r);try{for(o.s();!(n=o.n()).done;){var s=n.value;a=a.concat(Ve(s,i))}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"addSourceType",value:function(e,t,i){return n.getSourceType(e)?i(new Error('A source type called "'.concat(e,'" already exists.'))):(n.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},i):i(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var n=this.light.getLight(),r=!1;for(var a in t)if(!g(t[a],n[a])){r=!0;break}if(r){var o={now:e.exported.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,i),this.light.updateTransitions(o)}}},{key:"getTerrain",value:function(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}},{key:"setTerrainForDraping",value:function(){this.setTerrain({source:"",exaggeration:0},0)}},{key:"setTerrain",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===i){if("object"==typeof t.source){var n="terrain-dem-src";this.addSource(n,t.source),t=e.clone$1(t),t=e.extend(t,{source:n})}if(this._validate(e.validateStyle.terrain,"terrain",t))return}if(!this.terrain||this.terrain&&i!==this.terrain.drapeRenderMode)this._createTerrain(t,i);else{var r=this.terrain,a=r.get();for(var o in t)if(!g(t[o],a[o])){r.set(t),this.stylesheet.terrain=t;var s={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};r.updateTransitions(s);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}},{key:"_createFog",value:function(t){var i=this.fog=new R(t,this.map.transform);this.stylesheet.fog=t;var n={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(n)}},{key:"_updateMarkersOpacity",value:function(){var e=this;0!==this.map._markers.length&&this.map._requestDomTask((function(){var t,i=p(e.map._markers);try{for(i.s();!(t=i.n()).done;)t.value._evaluateOpacity()}catch(n){i.e(n)}finally{i.f()}}))}},{key:"getFog",value:function(){return this.fog?this.fog.get():null}},{key:"setFog",value:function(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){var i=this.fog,n=i.get();for(var r in t)if(!g(t[r],n[r])){i.set(t),this.stylesheet.fog=t;var a={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(a);break}}else this._createFog(t);this._markersNeedUpdate=!0}},{key:"_updateDrapeFirstLayers",value:function(){var e,t,i=this;if(this.map._optimizeForTerrain&&this.terrain){var n=this._order.filter((function(e){return i.isLayerDraped(i._layers[e])})),r=this._order.filter((function(e){return!i.isLayerDraped(i._layers[e])}));this._drapedFirstOrder=[],(e=this._drapedFirstOrder).push.apply(e,c(n)),(t=this._drapedFirstOrder).push.apply(t,c(r))}}},{key:"_createTerrain",value:function(t,i){var n=this.terrain=new M(t,i);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();var r={now:e.exported.now(),transition:e.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r)}},{key:"_force3DLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}},{key:"_forceSymbolLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}},{key:"_validate",value:function(t,i,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!a||!1!==a.validate)&&qt(this,t.call(e.validateStyle,e.extend({key:i,style:this.serialize(),value:n,styleSpec:e.spec},r)))}},{key:"_remove",value:function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){var t,i=this._getSourceCaches(e),n=p(i);try{for(n.s();!(t=n.n()).done;)t.value.clearTiles()}catch(r){n.e(r)}finally{n.f()}}},{key:"_reloadSource",value:function(e){var t,i=this._getSourceCaches(e),n=p(i);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.resume(),r.reload()}}catch(a){n.e(a)}finally{n.f()}}},{key:"_updateSources",value:function(e){for(var t in this._sourceCaches)this._sourceCaches[t].update(e)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this._sourceCaches){var t=this._sourceCaches[e];t.resume(),t.reload()}}},{key:"_updatePlacement",value:function(t,i,n,r){var a,o=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=!1,u=!1,c={},h=p(this._order);try{for(h.s();!(a=h.n()).done;){var d=a.value,f=this._layers[d];if("symbol"===f.type){if(!c[f.source]){var m=function(){var e=o._getLayerSourceCache(f);if(!e)return"continue";c[f.source]=e.getRenderableIds(!0).map((function(t){return e.getTileByID(t)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}();if("continue"===m)continue}var y=this.crossTileSymbolIndex.addLayer(f,c[f.source],t.center.lng,t.projection);l=l||y}}}catch(x){h.e(x)}finally{h.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Ut(t,this._order,s,i,n,r,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),u=!0),l&&this.pauseablePlacement.placement.setStale()),u||l){var v,g=p(this._order);try{for(g.s();!(v=g.n()).done;){var _=v.value,b=this._layers[_];"symbol"===b.type&&this.placement.updateLayerOpacities(b,c[b.source])}}catch(x){g.e(x)}finally{g.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,i){this.imageManager.getImages(t.icons,i),this._updateTilesForChangedImages();var n=function(e){e&&e.setDependencies(t.tileID.key,t.type,t.icons)};n(this._otherSourceCaches[t.source]),n(this._symbolSourceCaches[t.source])}},{key:"getGlyphs",value:function(e,t,i){this.glyphManager.getGlyphs(t.stacks,i)}},{key:"getResource",value:function(t,i,n){return e.makeRequest(i,n)}},{key:"_getSourceCache",value:function(e){return this._otherSourceCaches[e]}},{key:"_getLayerSourceCache",value:function(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}},{key:"_getSourceCaches",value:function(e){var t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}},{key:"hasSymbolLayers",value:function(){return this._numSymbolLayers>0}},{key:"hasCircleLayers",value:function(){return this._numCircleLayers>0}},{key:"_clearWorkerCaches",value:function(){this.dispatcher.broadcast("clearCaches")}},{key:"destroy",value:function(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}]),n}(e.Evented);Qt.getSourceType=function(e){return Fe[e]},Qt.setSourceType=function(e,t){Fe[e]=t},Qt.registerForPluginStateChange=e.registerForPluginStateChange;var ei="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",ti="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ii={},ni={};ii=si("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),ni=si("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);var ri=si("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef TERRAIN\nhighp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#endif","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#if defined(PROJECTION_GLOBE_VIEW) && !defined(PROJECTED_POS_ON_VIEWPORT)\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {\n#if defined(PROJECTION_GLOBE_VIEW) && !defined(PROJECTED_POS_ON_VIEWPORT)\nreturn mix(globe,mercator,t);\n#else\nreturn globe;\n#endif\n}\n#ifdef PROJECTION_GLOBE_VIEW\nmat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ai=ei,oi={background:si("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:si("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:si("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec2 scaled_extrude=extrude*a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=scaled_extrude.x*surface_vectors[0]+scaled_extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);\n#else \nmat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\n#if defined(SCALE_WITH_MAP) && defined(PROJECTION_GLOBE_VIEW)\nview_scale*=a_scale;\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:si("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:si("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nextrude*=a_scale;vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:si("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:si("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:si("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:si("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:si("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:si("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:si("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:si("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(pos.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:si("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:si("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:si("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:si("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nvec4 out_color=texture2D(u_gradient_image,v_uv);\n#else\nvec4 out_color=color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#ifdef RENDER_LINE_GRADIENT\nattribute vec3 a_packed;\n#else\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];float a_linesofar=a_packed[2];highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:si("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:si("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:si("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:si("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_tile_id;uniform float u_zoom_transition;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:si("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:si("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:si("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:si("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",ti),skyboxGradient:si("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",ti),skyboxCapture:si("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:si("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;attribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;varying vec2 v_pos0;const float wireframeOffset=1e3;void main() {v_pos0=a_uv;vec2 uv=a_uv*EXTENT;vec4 up_vector=vec4(elevationVector(uv),1.0);float height=elevation(uv);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nvec4 globe=u_globe_matrix*vec4(a_globe_pos+up_vector.xyz*height,1.0);vec4 mercator=vec4(0.0);if (u_zoom_transition > 0.0) {mercator=vec4(a_merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;}vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);}"),globeAtmosphere:si("uniform vec2 u_center;uniform float u_radius;uniform vec2 u_screen_size;uniform float u_opacity;uniform highp float u_fadeout_range;uniform vec3 u_start_color;uniform vec3 u_end_color;uniform float u_pixel_ratio;void main() {highp vec2 fragCoord=gl_FragCoord.xy/u_pixel_ratio;fragCoord.y=u_screen_size.y-fragCoord.y;float distFromCenter=length(fragCoord-u_center);float normDistFromCenter=length(fragCoord-u_center)/u_radius;if (normDistFromCenter < 1.0)\ndiscard;float t=clamp(1.0-sqrt(normDistFromCenter-1.0)/u_fadeout_range,0.0,1.0);vec3 color=mix(u_start_color,u_end_color,1.0-t);gl_FragColor=vec4(color*t*u_opacity,u_opacity);}","attribute vec3 a_pos;void main() {gl_Position=vec4(a_pos,1.0);}")};function si(e,t,i){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,a=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),o=e.match(r),s=t.match(r),l=ei.match(r),u=s?s.concat(o):o;i||(ii.staticUniforms&&(u=ii.staticUniforms.concat(u)),ni.staticUniforms&&(u=ni.staticUniforms.concat(u))),u&&(u=u.concat(l));var c={};return{fragmentSource:e=e.replace(n,(function(e,t,i,n,r){return c[r]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nvarying ").concat(i," ").concat(n," ").concat(r,";\n#else\nuniform ").concat(i," ").concat(n," u_").concat(r,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(r,"\n    ").concat(i," ").concat(n," ").concat(r," = u_").concat(r,";\n#endif\n")})),vertexSource:t=t.replace(n,(function(e,t,i,n,r){var a="float"===n?"vec2":"vec4",o=r.match(/color/)?"color":a;return c[r]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(i," ").concat(a," a_").concat(r,";\nvarying ").concat(i," ").concat(n," ").concat(r,";\n#else\nuniform ").concat(i," ").concat(n," u_").concat(r,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = a_").concat(r,";\n#else\n    ").concat(i," ").concat(n," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(r," = unpack_mix_").concat(o,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(i," ").concat(n," ").concat(r," = u_").concat(r,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\nuniform lowp float u_").concat(r,"_t;\nattribute ").concat(i," ").concat(a," a_").concat(r,";\n#else\nuniform ").concat(i," ").concat(n," u_").concat(r,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(i," ").concat(n," ").concat(r," = a_").concat(r,";\n#else\n    ").concat(i," ").concat(n," ").concat(r," = u_").concat(r,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(r,"\n    ").concat(i," ").concat(n," ").concat(r," = unpack_mix_").concat(o,"(a_").concat(r,", u_").concat(r,"_t);\n#else\n    ").concat(i," ").concat(n," ").concat(r," = u_").concat(r,";\n#endif\n")})),staticAttributes:a,staticUniforms:u}}var li=function(){function e(){y(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}return v(e,[{key:"bind",value:function(e,t,i,n,r,a,o,s){this.context=e;for(var l=this.boundPaintVertexBuffers.length!==n.length,u=0;!l&&u<n.length;u++)this.boundPaintVertexBuffers[u]!==n[u]&&(l=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===r&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(t,i,n,r,a,o,s)}},{key:"freshBind",value:function(e,t,i,n,r,a,o){var s,l=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=n,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=u.currentNumAttributes||0;for(var h=l;h<s;h++)c.disableVertexAttribArray(h)}t.enableAttributes(c,e);var d,f=p(i);try{for(f.s();!(d=f.n()).done;)d.value.enableAttributes(c,e)}catch(g){f.e(g)}finally{f.f()}a&&a.enableAttributes(c,e),o&&o.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r);var m,y=p(i);try{for(y.s();!(m=y.n()).done;){var v=m.value;v.bind(),v.setVertexAttribPointers(c,e,r)}}catch(g){y.e(g)}finally{y.f()}a&&(a.bind(),a.setVertexAttribPointers(c,e,r)),n&&n.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,e,r)),u.currentNumAttributes=l}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function ui(t,i){var n=Math.pow(2,i.canonical.z),r=i.canonical.y;return[new e.MercatorCoordinate(0,r/n).toLngLat().lat,new e.MercatorCoordinate(0,(r+1)/n).toLngLat().lat]}function ci(t,i,n,r,a,o,s){var l=t.context,u=l.gl,c=n.fbo;if(c){t.prepareDrawTile(i);var h=t.useProgram("hillshade");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());var p=function(e,t,i,n){var r=i.paint.get("hillshade-shadow-color"),a=i.paint.get("hillshade-highlight-color"),o=i.paint.get("hillshade-accent-color"),s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l=!e.options.moving;return{u_matrix:n||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:ui(0,t.tileID),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:a,u_accent:o}}(t,n,r,t.terrain?i.projMatrix:null);t.prepareDrawProgram(l,h,i.toUnwrapped());var d=t.getTileBoundsBuffers(n),f=d.tileBoundsBuffer,m=d.tileBoundsIndexBuffer,y=d.tileBoundsSegments;h.draw(l,u.TRIANGLES,a,o,s,e.CullFaceMode.disabled,p,r.id,f,m,y)}}function hi(t,i,n){if(i.needsDEMTextureUpload){var r=t.context,a=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(n.stride);var o=n.getPixels();i.demTexture?i.demTexture.update(o,{premultiply:!1}):i.demTexture=new e.Texture(r,o,a.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}}function pi(t,i,n,r,a,o){var s=t.context,l=s.gl;if(i.dem){var u=i.dem;if(s.activeTexture.set(l.TEXTURE1),hi(t,i,u),i.demTexture){i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);var c=u.dim;s.activeTexture.set(l.TEXTURE0);var h=i.fbo;if(!h){var p=new e.Texture(s,{width:c,height:c,data:null},l.RGBA);p.bind(l.LINEAR,l.CLAMP_TO_EDGE),(h=i.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(p.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,c,c]);var d=t.getMercatorTileBoundsBuffers(),f=d.tileBoundsBuffer,m=d.tileBoundsIndexBuffer,y=d.tileBoundsSegments;t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,r,a,o,e.CullFaceMode.disabled,function(t,i){var n=i.stride,r=e.create();return e.ortho(r,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(r,r,[0,-e.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[n,n],u_zoom:t.overscaledZ,u_unpack:i.unpackVector}}(i.tileID,u),n.id,f,m,y),i.needsHillshadePrepare=!1}}}var di=function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image0:new e.Uniform1i(t,i.u_image0),u_skirt_height:new e.Uniform1f(t,i.u_skirt_height)}},fi=function(e,t){return{u_matrix:e,u_image0:0,u_skirt_height:t}},mi=function(e,t,i,n,r){return{u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_merc_matrix:i,u_zoom_transition:n,u_merc_center:r,u_image0:0}};function yi(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}var vi=new(function(){function e(){y(this,e),this.operations={}}return v(e,[{key:"newMorphing",value:function(e,t,i,n,r){if(e in this.operations){var a=this.operations[e];a.to.tileID.key!==i.tileID.key&&(a.queued=i)}else this.operations[e]={startTime:n,phase:0,duration:r,from:t,to:i,queued:null}}},{key:"getMorphValuesForProxy",value:function(e){if(!(e in this.operations))return null;var t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}},{key:"update",value:function(e){for(var t in this.operations){var i=this.operations[t];for(i.phase=(e-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,e)){delete this.operations[t];break}}}},{key:"_nextOp",value:function(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}},{key:"_validOp",value:function(e){return e.from.hasData()&&e.to.hasData()}}]),e}()),gi={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function _i(e,t){var i=1<<e.z;return!t&&(0===e.x||e.x===i-1)||0===e.y||e.y===i-1}var bi=function(e){return{u_matrix:e}};function xi(t,i,n,r,a){if(a>0){var o=e.exported.now(),s=(o-t.timeAdded)/a,l=i?(o-i.timeAdded)/a:-1,u=n.getSource(),c=r.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!i||Math.abs(i.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),p=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var wi=function(e){f(i,e);var t=m(i);function i(e){var n;y(this,i);var a={type:"raster-dem",maxzoom:e.transform.maxZoom},o=new z(He(),null),s=Le("mock-dem",a,o,e.style);return n=t.call(this,"mock-dem",s,!1),s.setEventedParent(r(n)),n._sourceLoaded=!0,n}return v(i,[{key:"_loadTile",value:function(e,t){e.state="loaded",t(null)}}]),i}(e.SourceCache),ki=function(t){f(n,t);var i=m(n);function n(e){var t;y(this,n);var a=Le("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new z(He(),null),e.style);return t=i.call(this,"proxy",a,!1),a.setEventedParent(r(t)),t.map=t.getSource().map=e,t.used=t._sourceLoaded=!0,t.renderCache=[],t.renderCachePool=[],t.proxyCachedFBO={},t}return v(n,[{key:"update",value:function(t,i,n){var r=this;if(!t.freezeTileCoverage){this.transform=t;var a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((function(i,n){if(i[n.key]="",!r._tiles[n.key]){var a=new e.Tile(n,r._source.tileSize*n.overscaleFactor(),t.tileZoom);a.state="loaded",r._tiles[n.key]=a}return i}),{});for(var o in this._tiles)o in a||(this.freeFBO(o),this._tiles[o].unloadVectorData(),delete this._tiles[o])}}},{key:"freeFBO",value:function(e){var t=this.proxyCachedFBO[e];if(void 0!==t){var i,n=Object.values(t);(i=this.renderCachePool).push.apply(i,c(n)),delete this.proxyCachedFBO[e]}}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(e){return e.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),n}(e.SourceCache),Pi=function(e){f(i,e);var t=m(i);function i(e,n,r){var a;return y(this,i),(a=t.call(this,e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)).proxyTileKey=n,a.projMatrix=r,a}return v(i)}(e.OverscaledTileID),Si=function(t){f(n,t);var i=m(n);function n(t,r){var a;y(this,n),(a=i.call(this)).painter=t,a.terrainTileForTile={},a.prevTerrainTileForTile={};var o=function(t){var i=new e.StructArrayLayout4i8,n=new e.StructArrayLayout3ui6,r=131;i.reserve(17161),n.reserve(33800);for(var a=e.EXTENT/128,o=e.EXTENT+a/2,s=o+a,l=-a;l<s;l+=a)for(var u=-a;u<s;u+=a){var c=u<0||u>o||l<0||l>o?24575:0,h=e.clamp(Math.round(u),0,e.EXTENT),p=e.clamp(Math.round(l),0,e.EXTENT);i.emplaceBack(h+c,p,h,p)}for(var d=function(e,t){var i=t*r+e;n.emplaceBack(i+1,i,i+r),n.emplaceBack(i+r,i+r+1,i+1)},f=1;f<129;f++)for(var m=1;m<129;m++)d(m,f);return[0,129].forEach((function(e){for(var t=0;t<130;t++)d(t,e),d(e,t)})),[i,n,32768]}(),s=h(o,3),l=s[0],u=s[1],c=s[2],p=t.context;a.gridBuffer=p.createVertexBuffer(l,e.boundsAttributes.members),a.gridIndexBuffer=p.createIndexBuffer(u),a.gridSegments=e.SegmentVector.simpleSegment(0,0,l.length,u.length),a.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,l.length,c),a.proxyCoords=[],a.proxiedCoords={},a._visibleDemTiles=[],a._drapedRenderBatches=[],a._sourceTilesOverlap={},a.proxySourceCache=new ki(r.map),a.orthoMatrix=e.create(),e.ortho(a.orthoMatrix,0,e.EXTENT,0,e.EXTENT,0,1);var d=p.gl;return a._overlapStencilMode=new e.StencilMode({func:d.GEQUAL,mask:255},0,255,d.KEEP,d.KEEP,d.REPLACE),a._previousZoom=t.transform.zoom,a.pool=[],a._findCoveringTileCache={},a._tilesDirty={},a.style=r,a._useVertexMorphing=!0,a._exaggeration=1,a._mockSourceCache=new wi(r.map),a}return v(n,[{key:"style",set:function(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}},{key:"update",value:function(t,i,n){var r=this;if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;var a=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(a.get("source")),this._exaggeration=a.get("exaggeration");var o=function(){r.sourceCache.used&&e.warnOnce("Raster DEM source '".concat(r.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));var t=r.getScaledDemTileSize();r.sourceCache.update(i,t,!0),r.resetTileLookupCache(r.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),i.updateElevation(!n),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(i),this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"resetTileLookupCache",value:function(e){this._findCoveringTileCache[e]={}}},{key:"getScaledDemTileSize",value:function(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}},{key:"_checkRenderCacheEfficiency",value:function(){var t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce("Terrain render cache efficiency is not optimal (".concat(t.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(t.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}},{key:"_onStyleDataEvent",value:function(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(var e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((function(e){return e.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}},{key:"useVertexMorphing",set:function(e){this._useVertexMorphing=e}},{key:"updateTileBinding",value:function(t){var i=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);var a=this.proxyCoords=n.getIds().map((function(e){var t=n.getTileByID(e).tileID;return t.projMatrix=r.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,i){var n=i.transform.pointCoordinate(i.transform.getCameraPoint()),r=new e.pointGeometry(n.x,n.y);t.sort((function(t,i){if(i.overscaledZ-t.overscaledZ)return i.overscaledZ-t.overscaledZ;var n=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=new e.pointGeometry(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),o=r.mult(1<<t.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(n)-o.distSqr(a)}))}(a,this.painter),this._previousZoom=r.zoom;var o=this.proxyToSource||{};this.proxyToSource={},a.forEach((function(e){i.proxyToSource[e.key]={}})),this.terrainTileForTile={};var s=this._style._sourceCaches;for(var l in s){var u=s[l];if(u.used&&(u!==this.sourceCache&&this.resetTileLookupCache(u.id),this._setupProxiedCoordsForOrtho(u,t[l],o),!u.usedForTerrain)){var c=t[l];u.getSource().reparseOverscaled&&this._assignTerrainTiles(c)}}this.proxiedCoords[n.id]=a.map((function(e){return new Pi(e,e.key,i.orthoMatrix)})),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();var h={};this._visibleDemTiles=[];var d,f=p(this.proxyCoords);try{for(f.s();!(d=f.n()).done;){var m=d.value,y=this.terrainTileForTile[m.key];if(y){var v=y.tileID.key;v in h||(this._visibleDemTiles.push(y),h[v]=v)}}}catch(g){f.e(g)}finally{f.f()}}}},{key:"_assignTerrainTiles",value:function(e){var t=this;this._initializing||e.forEach((function(e){if(!t.terrainTileForTile[e.key]){var i=t._findTileCoveringTileID(e,t.sourceCache);i&&(t.terrainTileForTile[e.key]=i)}}))}},{key:"_prepareDEMTextures",value:function(){var e=this.painter.context,t=e.gl;for(var i in this.terrainTileForTile){var n=this.terrainTileForTile[i],r=n.dem;!r||n.demTexture&&!n.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),hi(this.painter,n,r))}}},{key:"_prepareDemTileUniforms",value:function(e,t,i,n){if(!t||null==t.demTexture)return!1;var r=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-r.z),o=n||"";return i["u_dem_tl".concat(o)]=[r.x*a%1,r.y*a%1],i["u_dem_scale".concat(o)]=a,!0}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}},{key:"emptyDepthBufferTexture",get:function(){var t=this.painter.context,i=t.gl;if(!this._emptyDepthBufferTexture){var n={width:1,height:1,data:new Uint8Array([255,255,255,255])};this._emptyDepthBufferTexture=new e.Texture(t,n,i.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}},{key:"_getLoadedAreaMinimum",value:function(){var e=0,t=this._visibleDemTiles.reduce((function(t,i){if(!i.dem)return t;var n=i.dem.tree.minimums[0];return n>0&&e++,t+n}),0);return e?t/e:0}},{key:"_updateEmptyDEMTexture",value:function(){var t=this.painter.context,i=t.gl;t.activeTexture.set(i.TEXTURE2);var n=this._getLoadedAreaMinimum(),r={width:1,height:1,data:new Uint8Array(e.DEMData.pack(n,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;var a=this._emptyDEMTexture;return a?a.update(r,{premultiply:!1}):a=this._emptyDEMTexture=new e.Texture(t,r,i.RGBA,{premultiply:!1}),a}},{key:"setupElevationDraw",value:function(t,i,n){var r,a=this.painter.context,o=a.gl,s=(r=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(r),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();var l=this.painter.transform,u=l.projection.createTileTransform(l,l.worldSize),c=t.tileID.canonical;s.u_tile_tl_up=u.upVector(c,0,0),s.u_tile_tr_up=u.upVector(c,e.EXTENT,0),s.u_tile_br_up=u.upVector(c,e.EXTENT,e.EXTENT),s.u_tile_bl_up=u.upVector(c,0,e.EXTENT),s.u_tile_up_scale=u.upVectorScale(c);var h=null,p=null,d=1;if(n&&n.morphing&&this._useVertexMorphing){var f=n.morphing.srcDemTile,m=n.morphing.dstDemTile;d=n.morphing.phase,f&&m&&(this._prepareDemTileUniforms(t,f,s,"_prev")&&(p=f),this._prepareDemTileUniforms(t,m,s)&&(h=m))}if(p&&h?(a.activeTexture.set(o.TEXTURE2),h.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.activeTexture.set(o.TEXTURE4),p.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),s.u_dem_lerp=d):(h=this.terrainTileForTile[t.tileID.key],a.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,h,s)?h.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),a.activeTexture.set(o.TEXTURE3),n&&n.useDepthForOcclusion?(this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),n&&n.useMeterToDem&&h){var y=(1<<h.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=y}n&&n.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),i.setTerrainUniformValues(a,s)}},{key:"renderToBackBuffer",value:function(t){var i=this.painter,n=this.painter.context;0!==t.length&&(n.bindFramebuffer.set(null),n.viewport.set([0,0,i.width,i.height]),this.renderingToTexture=!1,function(t,i,n,r,a){if("globe"===t.transform.projection.name)!function(t,i,n,r,a){var o,s,l=t.context,u=l.gl,c=t.options.showTerrainWireframe?2:0,d=function(e,i){if(s!==e){var n=[];i&&n.push(gi[c]),n.push(gi[e]),n.push("PROJECTION_GLOBE_VIEW"),o=t.useProgram("globeRaster",null,n),s=e}},f=t.colorModeForRenderPass(),m=new e.DepthMode(u.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);vi.update(a);var y=t.transform,v=e.calculateGlobeMatrix(y,y.worldSize),g=e.calculateGlobeMercatorMatrix(y),_=[e.mercatorXfromLng(y.center.lng),e.mercatorYfromLat(y.center.lat)],b=t.globeSharedBuffers;(c?[!1,!0]:[!1]).forEach((function(c){s=-1;var x,w=c?u.LINES:u.TRIANGLES,k=p(r);try{for(k.s();!(x=k.n()).done;){var P=x.value,S=n.getTile(P),T=Math.pow(2,P.canonical.z),C=e.globeBuffersForTileMesh(t,S,P,T),O=h(C,2),I=O[0],E=O[1],A=e.StencilMode.disabled,M=i.prevTerrainTileForTile[P.key],D=i.terrainTileForTile[P.key];yi(M,D)&&vi.newMorphing(P.key,M,D,a,250),l.activeTexture.set(u.TEXTURE0),S.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE);var j=vi.getMorphValuesForProxy(P.key),F=j?1:0,L={};j&&e.extend$1(L,{morphing:{srcDemTile:j.from,dstDemTile:j.to,phase:e.easeCubicInOut(j.phase)}});var R=e.globeMatrixForTile(P.canonical,v),z=mi(y.projMatrix,R,g,e.globeToMercatorTransition(y.zoom),_);if(d(F,c),i.setupElevationDraw(S,o,L),t.prepareDrawProgram(l,o,P.toUnwrapped()),b){var V=c?b.getWirefameBuffer(t.context):[b.gridIndexBuffer,b.gridSegments],B=h(V,2),N=B[0],U=B[1];o.draw(l,w,m,A,f,e.CullFaceMode.backCCW,z,"globe_raster",I,N,U)}if(!c)for(var W=[0===P.canonical.y?e.globePoleMatrixForTile(P.canonical,!1,y):null,P.canonical.y===T-1?e.globePoleMatrixForTile(P.canonical,!0,y):null],G=0,H=W;G<H.length;G++){var X=H[G];if(X){var Y=mi(y.projMatrix,X,X,0,_);b&&o.draw(l,w,m,A,f,e.CullFaceMode.disabled,Y,"globe_pole_raster",E,b.poleIndexBuffer,b.poleSegments)}}}}catch(q){k.e(q)}finally{k.f()}}))}(t,i,n,r,a);else{var o,s,l=t.context,u=l.gl,c=t.options.showTerrainWireframe?2:0,d=function(e,i){if(s!==e){var n=[gi[e]];i&&n.push(gi[c]),o=t.useProgram("terrainRaster",null,n),s=e}},f=t.colorModeForRenderPass(),m=new e.DepthMode(u.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);vi.update(a);var y=t.transform,v=6*Math.pow(1.5,22-y.zoom)*i.exaggeration();(c?[!1,!0]:[!1]).forEach((function(c){s=-1;var g,_=c?u.LINES:u.TRIANGLES,b=c?i.getWirefameBuffer():[i.gridIndexBuffer,i.gridSegments],x=h(b,2),w=x[0],k=x[1],P=p(r);try{for(P.s();!(g=P.n()).done;){var S=g.value,T=n.getTile(S),C=e.StencilMode.disabled,O=i.prevTerrainTileForTile[S.key],I=i.terrainTileForTile[S.key];yi(O,I)&&vi.newMorphing(S.key,O,I,a,250),l.activeTexture.set(u.TEXTURE0),T.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST);var E=vi.getMorphValuesForProxy(S.key),A=E?1:0,M=void 0;E&&(M={morphing:{srcDemTile:E.from,dstDemTile:E.to,phase:e.easeCubicInOut(E.phase)}});var D=fi(S.projMatrix,_i(S.canonical,y.renderWorldCopies)?v/10:v);d(A,c),i.setupElevationDraw(T,o,M),t.prepareDrawProgram(l,o,S.toUnwrapped()),o.draw(l,_,m,C,f,e.CullFaceMode.backCCW,D,"terrain_raster",i.gridBuffer,w,k)}}catch(j){P.e(j)}finally{P.f()}}))}}(i,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,t.splice(0,t.length))}},{key:"renderBatch",value:function(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;var i,n=this.painter,r=this.painter.context,a=this.proxySourceCache,o=this.proxiedCoords[a.id],s=this._drapedRenderBatches.shift(),l=[],u=n.style.order,c=0,h=p(o);try{for(h.s();!(i=h.n()).done;){var d=i.value,f=a.getTileByID(d.proxyTileKey),m=a.proxyCachedFBO[d.key]?a.proxyCachedFBO[d.key][t]:void 0,y=void 0!==m?a.renderCache[m]:this.pool[c++],v=void 0!==m;if(f.texture=y.tex,!v||y.dirty){var g=void 0;r.bindFramebuffer.set(y.fb.framebuffer),this.renderedToTile=!1,y.dirty&&(r.clear({color:e.Color.transparent,stencil:0}),y.dirty=!1);for(var _=s.start;_<=s.end;++_){var b=n.style._layers[u[_]];if(!b.isHidden(n.transform.zoom)){var x=n.style._getLayerSourceCache(b),w=x?this.proxyToSource[d.key][x.id]:[d];if(w){var k=w;r.viewport.set([0,0,y.fb.width,y.fb.height]),g!==(x?x.id:null)&&(this._setupStencil(y,w,b,x),g=x?x.id:null),n.renderLayer(n,x,b,k)}}}this.renderedToTile?(y.dirty=!0,l.push(f.tileID)):v||--c,5===c&&(c=0,this.renderToBackBuffer(l))}else l.push(f.tileID)}}catch(P){h.e(P)}finally{h.f()}return this.renderToBackBuffer(l),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),s.end+1}},{key:"postRender",value:function(){}},{key:"renderCacheEfficiency",value:function(e){var t=e.order.length;if(0===t)return{efficiency:100};for(var i,n=0,r=0,a=!1,o=0;o<t;++o){var s=e._layers[e.order[o]];this._style.isLayerDraped(s)?(a&&++n,++r):a||(a=!0,i=s.id)}return 0===r?{efficiency:100}:{efficiency:100*(1-n/r),firstUndrapedLayer:i}}},{key:"getMinElevationBelowMSL",value:function(){var e=0;return this._visibleDemTiles.filter((function(e){return e.dem})).forEach((function(t){e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}},{key:"raycast",value:function(e,t,i){if(!this._visibleDemTiles)return null;var n=this._visibleDemTiles.filter((function(e){return e.dem})).map((function(n){var r=n.tileID,a=Math.pow(2,r.overscaledZ),o=r.canonical,s=o.x,l=o.y,u=s/a,c=(s+1)/a,h=l/a,p=(l+1)/a;return{minx:u,miny:h,maxx:c,maxy:p,t:n.dem.tree.raycastRoot(u,h,c,p,e,t,i),tile:n}}));n.sort((function(e,t){return(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)}));var r,a=p(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(null==o.t)return null;var s=o.tile.dem.tree.raycast(o.minx,o.miny,o.maxx,o.maxy,e,t,i);if(null!=s)return s}}catch(l){a.e(l)}finally{a.f()}return null}},{key:"_createFBO",value:function(){var t=this.painter.context,i=t.gl,n=this.drapeBufferSize;t.activeTexture.set(i.TEXTURE0);var r=new e.Texture(t,{width:n[0],height:n[1],data:null},i.RGBA);r.bind(i.LINEAR,i.CLAMP_TO_EDGE);var a=t.createFramebuffer(n[0],n[1],!1);return a.colorAttachment.set(r.texture),a.depthAttachment=new Pe(t,a.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,n[0],n[1]),this._stencilRef=0,a.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):a.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&i.texParameterf(i.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:a,tex:r,dirty:!1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var e=this;if(this._style.light&&this._style.light.hasTransition())return!0;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((function(t){var i=e._style._layers[t],n=i.isHidden(e.painter.transform.zoom),r=i.getCrossfadeParameters(),a=!!r&&1!==r.t,o=i.hasTransition();return"custom"!==i.type&&!n&&(a||o)}))}},{key:"_clearRasterFadeFromRenderCache",value:function(){var e=!1;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Me){e=!0;break}if(e)for(var i=0;i<this._style.order.length;++i){var n=this._style._layers[this._style.order[i]],r=n.isHidden(this.painter.transform.zoom),a=this._style._getLayerSourceCache(n);if("raster"===n.type&&!r&&a){var o,s=n.paint.get("raster-fade-duration"),l=p(this.proxyCoords);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=this.proxyToSource[u.key][a.id];if(c){var h,d=p(c);try{for(d.s();!(h=d.n()).done;){var f=h.value,m=xi(a.getTile(f),a.findLoadedParent(f,0),a,this.painter.transform,s);(1!==m.opacity||0!==m.mix)&&this._clearRenderCacheForTile(a.id,f)}}catch(y){d.e(y)}finally{d.f()}}}}catch(y){l.e(y)}finally{l.f()}}}}},{key:"_setupDrapedRenderBatches",value:function(){var e=this._style.order,t=e.length;if(0!==t){for(var i,n=[],r=0,a=this._style._layers[e[r]];!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++r<t;)a=this._style._layers[e[r]];for(;r<t;++r){var o=this._style._layers[e[r]];o.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(o)?void 0===i&&(i=r):void 0!==i&&(n.push({start:i,end:r-1}),i=void 0))}void 0!==i&&n.push({start:i,end:r-1}),this._drapedRenderBatches=n}}},{key:"_setupRenderCache",value:function(e){var t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){var i=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(var n=0;n<i.length;++n){var r,a=Object.values(i[n]);(r=t.renderCachePool).push.apply(r,c(a))}}}else{this._clearRasterFadeFromRenderCache();for(var o=this.proxyCoords,s=this._tilesDirty,l=o.length-1;l>=0;l--){var u=o[l];if(t.getTileByID(u.key),void 0!==t.proxyCachedFBO[u.key]){var h=e[u.key],d=this.proxyToSource[u.key],f=0,m=function(e){var t=d[e],i=h[e];if(!i||i.length!==t.length||t.some((function(t,n){return t!==i[n]||s[e]&&s[e].hasOwnProperty(t.key)})))return f=-1,"break";++f};for(var y in d)if("break"===m(y))break;for(var v in t.proxyCachedFBO[u.key])t.renderCache[t.proxyCachedFBO[u.key][v]].dirty=f<0||f!==Object.values(h).length}}var g=c(this._drapedRenderBatches);g.sort((function(e,t){return t.end-t.start-(e.end-e.start)}));var _,b=p(g);try{for(b.s();!(_=b.n()).done;){var x,w=_.value,k=p(o);try{for(k.s();!(x=k.n()).done;){var P=x.value;if(!t.proxyCachedFBO[P.key]){var S=t.renderCachePool.pop();void 0===S&&t.renderCache.length<50&&(S=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==S&&(t.proxyCachedFBO[P.key]={},t.proxyCachedFBO[P.key][w.start]=S,t.renderCache[S].dirty=!0)}}}catch(T){k.e(T)}finally{k.f()}}}catch(T){b.e(T)}finally{b.f()}this._tilesDirty={}}}},{key:"_setupStencil",value:function(e,t,i,n){if(n&&this._sourceTilesOverlap[n.id]){var r=this.painter.context,a=r.gl;if(t.length<=1)this._overlapStencilType=!1;else{var o;if(i.isTileClipped())o=t.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(r.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,i.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"clipOrMaskOverlapStencilType",value:function(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}},{key:"stencilModeForRTTOverlap",value:function(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}},{key:"_renderTileClippingMasks",value:function(t,i){var n=this.painter,r=this.painter.context,a=r.gl;n._tileClippingMaskIDs={},r.setColorMode(e.ColorMode.disabled),r.setDepthMode(e.DepthMode.disabled);var o,s=n.useProgram("clippingMask"),l=p(t);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=n._tileClippingMaskIDs[u.key]=--i;s.draw(r,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},c,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,bi(u.projMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}catch(h){l.e(h)}finally{l.f()}}},{key:"pointCoordinate",value:function(t){var i=this.painter.transform;if(t.x<0||t.x>i.width||t.y<0||t.y>i.height)return null;var n=[t.x,t.y,1,1];e.transformMat4$1(n,n,i.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),n[0]/=i.worldSize,n[1]/=i.worldSize;var r=i._camera.position,a=e.mercatorZfromAltitude(1,i.center.lat),o=[r[0],r[1],r[2]/a,0],s=e.subtract([],n.slice(0,3),o);e.normalize(s,s);var l=this.raycast(o,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(o,o,s,l),o[3]=o[2],o[2]*=a,o):null}},{key:"drawDepth",value:function(){var t=this.painter,i=t.context,n=this.proxySourceCache,r=Math.ceil(t.width),a=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===a||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){var o=i.gl,s=i.createFramebuffer(r,a,!0);i.activeTexture.set(o.TEXTURE0);var l=new e.Texture(i,{width:r,height:a,data:null},o.RGBA);l.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.colorAttachment.set(l.texture);var u=i.createRenderbuffer(i.gl.DEPTH_COMPONENT16,r,a);s.depthAttachment.set(u),this._depthFBO=s,this._depthTexture=l}i.bindFramebuffer.set(this._depthFBO.framebuffer),i.viewport.set([0,0,r,a]),function(t,i,n,r){if("globe"!==t.transform.projection.name){var a=t.context,o=a.gl;a.clear({depth:1});var s,l=t.useProgram("terrainDepth"),u=new e.DepthMode(o.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D),c=p(r);try{for(c.s();!(s=c.n()).done;){var h=s.value,d=n.getTile(h),f=fi(h.projMatrix,0);i.setupElevationDraw(d,l),l.draw(a,o.TRIANGLES,u,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,f,"terrain_depth",i.gridBuffer,i.gridIndexBuffer,i.gridNoSkirtSegments)}}catch(m){c.e(m)}finally{c.f()}}}(t,this,n,this.proxyCoords)}},{key:"_setupProxiedCoordsForOrtho",value:function(e,t,i){if(e.getSource()instanceof je)return this._setupProxiedCoordsForImageSource(e,t,i);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};for(var n=this.proxiedCoords[e.id]=[],r=this.proxyCoords,a=0;a<r.length;a++){var o=r[a],s=this._findTileCoveringTileID(o,e);if(s){var l=this._createProxiedId(o,s,i[o.key]&&i[o.key][e.id]);n.push(l),this.proxyToSource[o.key][e.id]=[l]}}for(var u=!1,c=0;c<t.length;c++){var h=e.getTile(t[c]);if(h&&h.hasData()){var p=this._findTileCoveringTileID(h.tileID,this.proxySourceCache);if(p&&p.tileID.canonical.z!==h.tileID.canonical.z){var d=this.proxyToSource[p.tileID.key][e.id],f=this._createProxiedId(p.tileID,h,i[p.tileID.key]&&i[p.tileID.key][e.id]);d?d.splice(d.length-1,0,f):this.proxyToSource[p.tileID.key][e.id]=[f],n.push(f),u=!0}}}this._sourceTilesOverlap[e.id]=u}},{key:"_setupProxiedCoordsForImageSource",value:function(t,i,n){if(t.getSource().loaded())for(var r=this.proxiedCoords[t.id]=[],a=this.proxyCoords,o=t.getSource(),s=new e.pointGeometry(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((function(e,t){return e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e}),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=function(t,i){var n=t.wrap+t.canonical.x/(1<<t.canonical.z),r=t.canonical.y/(1<<t.canonical.z),a=e.EXTENT/(1<<t.canonical.z),o=i.wrap+i.canonical.x/(1<<i.canonical.z),s=i.canonical.y/(1<<i.canonical.z);return n+a<o+l.min.x||n>o+l.max.x||r+a<s+l.min.y||r>s+l.max.y},c=0;c<a.length;c++)for(var h=a[c],p=0;p<i.length;p++){var d=t.getTile(i[p]);if(d&&d.hasData()&&!u(h,d.tileID)){var f=this._createProxiedId(h,d,n[h.key]&&n[h.key][t.id]),m=this.proxyToSource[h.key][t.id];m?m.push(f):this.proxyToSource[h.key][t.id]=[f],r.push(f)}}}},{key:"_createProxiedId",value:function(t,i,n){var r=this.orthoMatrix;if(n){var a=n.find((function(e){return e.key===i.tileID.key}));if(a)return a}if(i.tileID.key!==t.key){var o,s,l,u=t.canonical.z-i.tileID.canonical.z;r=e.create();var c=i.tileID.wrap-t.wrap<<t.overscaledZ;u>0?(s=(o=e.EXTENT>>u)*((i.tileID.canonical.x<<u)-t.canonical.x+c),l=o*((i.tileID.canonical.y<<u)-t.canonical.y)):(o=e.EXTENT<<-u,s=e.EXTENT*(i.tileID.canonical.x-(t.canonical.x+c<<-u)),l=e.EXTENT*(i.tileID.canonical.y-(t.canonical.y<<-u))),e.ortho(r,0,o,0,o,0,1),e.translate(r,r,[s,l,0])}return new Pi(i.tileID,t.key,r)}},{key:"_findTileCoveringTileID",value:function(t,i){var n=i.getTile(t);if(n&&n.hasData())return n;var r=this._findCoveringTileCache[i.id],a=r[t.key];if((n=a?i.getTileByID(a):null)&&n.hasData()||null===a)return n;var o=n?n.tileID:t,s=o.overscaledZ,l=i.getSource().minzoom,u=[];if(!a){var c=i.getSource().maxzoom;if(t.canonical.z>=c){var h=t.canonical.z-c;i.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,i.transform.tileZoom),o=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h)):0!==h&&(s=c,o=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h))}o.key!==t.key&&(u.push(o.key),n=i.getTile(o))}var p=function(e){u.forEach((function(t){r[t]=e})),u.length=0};for(s-=1;s>=l&&(!n||!n.hasData());s--){n&&p(n.tileID.key);var d=o.calculateScaledKey(s);if((n=i.getTileByID(d))&&n.hasData())break;var f=r[d];if(null===f)break;void 0===f?u.push(d):n=i.getTileByID(f)}return p(n?n.tileID.key:null),n&&n.hasData()?n:null}},{key:"findDEMTileFor",value:function(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}},{key:"prepareDrawTile",value:function(e){this.renderedToTile=!0}},{key:"_clearRenderCacheForTile",value:function(e,t){var i=this._tilesDirty[e];i||(i=this._tilesDirty[e]={}),i[t.key]=!0}},{key:"getWirefameBuffer",value:function(){if(!this.wireframeSegments){var t=function(t){var i,n,r,a=new e.StructArrayLayout2ui4,o=131;for(n=1;n<129;n++){for(i=1;i<129;i++)r=n*o+i,a.emplaceBack(r,r+1),a.emplaceBack(r,r+o),a.emplaceBack(r+1,r+o),128===n&&a.emplaceBack(r+o,r+o+1);a.emplaceBack(r+1,r+1+o)}return a}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}]),n}(e.Elevation);function Ti(e){for(var t=[],i=0;i<e.length;i++)if(null!==e[i]){var n=e[i].split(" ");t.push(n.pop())}return t}var Ci=function(){function t(i,n,r,a,o,s){y(this,t);var l=i.gl;this.program=l.createProgram();var u,c=Ti(r.staticAttributes),h=a?a.getBinderAttributes():[],d=c.concat(h),f=r.staticUniforms?Ti(r.staticUniforms):[],m=a?a.getBinderUniforms():[],v=f.concat(m),g=[],_=p(v);try{for(_.s();!(u=_.n()).done;){var b=u.value;g.indexOf(b)<0&&g.push(b)}}catch(A){_.e(A)}finally{_.f()}var x=a?a.defines():[];x=x.concat(s.map((function(e){return"#define ".concat(e)})));var w=x.concat("\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ai,ri.fragmentSource,ni.fragmentSource,r.fragmentSource).join("\n"),k=x.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ai,ri.vertexSource,ni.vertexSource,ii.vertexSource,r.vertexSource).join("\n"),P=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(P,w),l.compileShader(P),l.attachShader(this.program,P);var S=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(S,k),l.compileShader(S),l.attachShader(this.program,S),this.attributes={};var T={};this.numAttributes=d.length;for(var C=0;C<this.numAttributes;C++)d[C]&&(l.bindAttribLocation(this.program,C,d[C]),this.attributes[d[C]]=C);l.linkProgram(this.program),l.deleteShader(S),l.deleteShader(P);for(var O=0;O<g.length;O++){var I=g[O];if(I&&!T[I]){var E=l.getUniformLocation(this.program,I);E&&(T[I]=E)}}this.fixedUniforms=o(i,T),this.binderUniforms=a?a.getUniforms(i,T):[],-1!==s.indexOf("TERRAIN")&&(this.terrainUniforms=function(t,i){return{u_dem:new e.Uniform1i(t,i.u_dem),u_dem_prev:new e.Uniform1i(t,i.u_dem_prev),u_dem_unpack:new e.Uniform4f(t,i.u_dem_unpack),u_dem_tl:new e.Uniform2f(t,i.u_dem_tl),u_dem_scale:new e.Uniform1f(t,i.u_dem_scale),u_dem_tl_prev:new e.Uniform2f(t,i.u_dem_tl_prev),u_dem_scale_prev:new e.Uniform1f(t,i.u_dem_scale_prev),u_dem_size:new e.Uniform1f(t,i.u_dem_size),u_dem_lerp:new e.Uniform1f(t,i.u_dem_lerp),u_exaggeration:new e.Uniform1f(t,i.u_exaggeration),u_depth:new e.Uniform1i(t,i.u_depth),u_depth_size_inv:new e.Uniform2f(t,i.u_depth_size_inv),u_meter_to_dem:new e.Uniform1f(t,i.u_meter_to_dem),u_label_plane_matrix_inv:new e.UniformMatrix4f(t,i.u_label_plane_matrix_inv),u_tile_tl_up:new e.Uniform3f(t,i.u_tile_tl_up),u_tile_tr_up:new e.Uniform3f(t,i.u_tile_tr_up),u_tile_br_up:new e.Uniform3f(t,i.u_tile_br_up),u_tile_bl_up:new e.Uniform3f(t,i.u_tile_bl_up),u_tile_up_scale:new e.Uniform1f(t,i.u_tile_up_scale)}}(i,T)),-1!==s.indexOf("FOG")&&(this.fogUniforms=function(t,i){return{u_fog_matrix:new e.UniformMatrix4f(t,i.u_fog_matrix),u_fog_range:new e.Uniform2f(t,i.u_fog_range),u_fog_color:new e.Uniform4f(t,i.u_fog_color),u_fog_horizon_blend:new e.Uniform1f(t,i.u_fog_horizon_blend),u_fog_temporal_offset:new e.Uniform1f(t,i.u_fog_temporal_offset)}}(i,T))}}}return v(t,[{key:"setTerrainUniformValues",value:function(e,t){if(this.terrainUniforms){var i=this.terrainUniforms;if(!this.failedToCreate)for(var n in e.program.set(this.program),t)i[n].set(t[n])}}},{key:"setFogUniformValues",value:function(e,t){if(this.fogUniforms){var i=this.fogUniforms;if(!this.failedToCreate)for(var n in e.program.set(this.program),t)i[n].location&&i[n].set(t[n])}}},{key:"draw",value:function(e,t,i,r,a,o,s,l,u,c,h,d,f,m,y,v){var g,_=e.gl;if(!this.failedToCreate){e.program.set(this.program),e.setDepthMode(i),e.setStencilMode(r),e.setColorMode(a),e.setCullFace(o);for(var b=0,x=Object.keys(this.fixedUniforms);b<x.length;b++){var w=x[b];this.fixedUniforms[w].set(s[w])}m&&m.setUniforms(e,this.binderUniforms,d,{zoom:f});var k,P=(g={},n(g,_.LINES,2),n(g,_.TRIANGLES,3),n(g,_.LINE_STRIP,1),g)[t],S=p(h.get());try{for(S.s();!(k=S.n()).done;){var T=k.value,C=T.vaos||(T.vaos={});(C[l]||(C[l]=new li)).bind(e,this,u,m?m.getPaintVertexBuffers():[],c,T.vertexOffset,y,v),_.drawElements(t,T.primitiveLength*P,_.UNSIGNED_SHORT,T.primitiveOffset*P*2)}}catch(O){S.e(O)}finally{S.f()}}}}],[{key:"cacheKey",value:function(e,t,i){var n,r="".concat(e).concat(i?i.cacheKey:""),a=p(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;r+="/".concat(o)}}catch(s){a.e(s)}finally{a.f()}return r}}]),t}();function Oi(e,t,i){var n=1/V(i,1,t.transform.tileZoom),r=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,t.transform.tileZoom)/r,o=a*(i.tileID.canonical.x+i.tileID.wrap*r),s=a*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[n,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}var Ii=function(t,i,n,r){var a=i.style.light,o=a.properties.get("position"),s=[o.x,o.y,o.z],l=e.create$1();"viewport"===a.properties.get("anchor")&&(e.fromRotation(l,-i.transform.angle),e.transformMat3(s,s,l));var u=a.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+n,u_opacity:r}},Ei=function(t,i,n,r,a,o,s){return e.extend(Ii(t,i,n,r),Oi(o,i,s),{u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8})},Ai=function(e){return{u_matrix:e}},Mi=function(t,i,n,r){return e.extend(Ai(t),Oi(n,i,r))},Di=function(e,t){return{u_matrix:e,u_world:t}},ji=function(t,i,n,r,a){return e.extend(Mi(t,i,n,r),{u_world:a})},Fi=function(t,i,n,r){var a,o=t.transform;return a="map"===r.paint.get("circle-pitch-alignment")?o.calculatePixelsToTileUnitsMatrix(n):new Float32Array([o.pixelsToGLUnits[0],0,0,o.pixelsToGLUnits[1]]),{u_camera_to_center_distance:o.cameraToCenterDistance,u_matrix:t.translatePosMatrix(i.projMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:a}},Li=function(e){var t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Ri=function(t,i,n){var r=e.EXTENT/n.tileSize;return{u_matrix:t,u_camera_to_center_distance:i.cameraToCenterDistance,u_extrude_scale:[i.pixelsToGLUnits[0]/r,i.pixelsToGLUnits[1]/r]}},zi=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Vi=function(e,t,i,n){return{u_matrix:e,u_extrude_scale:V(t,1,i),u_intensity:n}},Bi=function(t,i,n,r,a,o){var s=t.transform,l=s.calculatePixelsToTileUnitsMatrix(i),u={u_matrix:Wi(t,i,n,a),u_pixels_to_tile_units:l,u_device_pixel_ratio:e.exported.devicePixelRatio,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:o,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0};if(Gi(n)){var c=Ui(i,t.transform);u.u_texsize=i.lineAtlasTexture.size,u.u_scale=[c,r.fromScale,r.toScale],u.u_mix=r.t}return u},Ni=function(t,i,n,r,a){var o=t.transform,s=Ui(i,o);return{u_matrix:Wi(t,i,n,a),u_texsize:i.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:e.exported.devicePixelRatio,u_image:0,u_scale:[s,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ui(e,t){return 1/V(e,1,t.tileZoom)}function Wi(e,t,i,n){return e.translatePosMatrix(n||t.tileID.projMatrix,t,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}function Gi(e){var t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}var Hi=function(e,t,i,n,r,a){return{u_matrix:e,u_tl_parent:t,u_scale_parent:i,u_fade_t:n.mix,u_opacity:n.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(s=r.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Xi(r.paint.get("raster-hue-rotate")),u_perspective_transform:a};var o,s};function Xi(e){e*=Math.PI/180;var t=Math.sin(e),i=Math.cos(e);return[(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}var Yi,qi=function(e,t,i,n,r,a,o,s,l,u,c,h,p,d){var f=r.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:f.width/f.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:u,u_tile_id:c,u_zoom_transition:h,u_inv_rot_matrix:p,u_merc_center:d,u_texture:0}},Zi=function(t,i,n,r,a,o,s,l,u,c,h,p,d,f,m){var y=a.transform,v=y.cameraToCenterDistance,g=y._pitch;return e.extend(qi(t,i,n,r,a,o,s,l,u,c,p,d,f,m),{u_gamma_scale:r?v*Math.cos(a.terrain?0:g):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+h})},Ki=function(t,i,n,r,a,o,s,l,u,c,h,p,d,f){return e.extend(Zi(t,i,n,r,a,o,s,l,!0,u,!0,h,p,d,f),{u_texsize_icon:c,u_texture_icon:1})},$i=function(e,t,i){return{u_matrix:e,u_opacity:t,u_color:i}},Ji=function(t,i,n,r,a,o){return e.extend(function(e,t,i,n){var r=i.imageManager.getPattern(e.from.toString()),a=i.imageManager.getPattern(e.to.toString()),o=i.imageManager.getPixelSize(),s=o.width,l=o.height,u=Math.pow(2,n.tileID.overscaledZ),c=n.tileSize*Math.pow(2,i.transform.tileZoom)/u,h=c*(n.tileID.canonical.x+n.tileID.wrap*u),p=c*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:t.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/V(n,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(r,o,n,a),{u_matrix:t,u_opacity:i})},Qi={fillExtrusion:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_opacity:new e.Uniform1f(t,i.u_opacity)}},fillExtrusionPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,i.u_height_factor),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade),u_opacity:new e.Uniform1f(t,i.u_opacity)}},fill:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},fillPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},fillOutline:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world)}},fillOutlinePattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},circle:function(t,i){return{u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_extrude_scale:new e.UniformMatrix2f(t,i.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},collisionBox:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale)}},collisionCircle:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,i.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,i.u_viewport_size)}},debug:function(t,i){return{u_color:new e.UniformColor(t,i.u_color),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_overlay:new e.Uniform1i(t,i.u_overlay),u_overlay_scale:new e.Uniform1f(t,i.u_overlay_scale)}},clippingMask:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},heatmap:function(t,i){return{u_extrude_scale:new e.Uniform1f(t,i.u_extrude_scale),u_intensity:new e.Uniform1f(t,i.u_intensity),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},heatmapTexture:function(t,i){return{u_image:new e.Uniform1i(t,i.u_image),u_color_ramp:new e.Uniform1i(t,i.u_color_ramp),u_opacity:new e.Uniform1f(t,i.u_opacity)}},hillshade:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_latrange:new e.Uniform2f(t,i.u_latrange),u_light:new e.Uniform2f(t,i.u_light),u_shadow:new e.UniformColor(t,i.u_shadow),u_highlight:new e.UniformColor(t,i.u_highlight),u_accent:new e.UniformColor(t,i.u_accent)}},hillshadePrepare:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_dimension:new e.Uniform2f(t,i.u_dimension),u_zoom:new e.Uniform1f(t,i.u_zoom),u_unpack:new e.Uniform4f(t,i.u_unpack)}},line:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_pixels_to_tile_units:new e.UniformMatrix2f(t,i.u_pixels_to_tile_units),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_dash_image:new e.Uniform1i(t,i.u_dash_image),u_gradient_image:new e.Uniform1i(t,i.u_gradient_image),u_image_height:new e.Uniform1f(t,i.u_image_height),u_texsize:new e.Uniform2f(t,i.u_texsize),u_scale:new e.Uniform3f(t,i.u_scale),u_mix:new e.Uniform1f(t,i.u_mix),u_alpha_discard_threshold:new e.Uniform1f(t,i.u_alpha_discard_threshold)}},linePattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixels_to_tile_units:new e.UniformMatrix2f(t,i.u_pixels_to_tile_units),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_image:new e.Uniform1i(t,i.u_image),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade),u_alpha_discard_threshold:new e.Uniform1f(t,i.u_alpha_discard_threshold)}},raster:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_tl_parent:new e.Uniform2f(t,i.u_tl_parent),u_scale_parent:new e.Uniform1f(t,i.u_scale_parent),u_fade_t:new e.Uniform1f(t,i.u_fade_t),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image0:new e.Uniform1i(t,i.u_image0),u_image1:new e.Uniform1i(t,i.u_image1),u_brightness_low:new e.Uniform1f(t,i.u_brightness_low),u_brightness_high:new e.Uniform1f(t,i.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,i.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,i.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,i.u_spin_weights),u_perspective_transform:new e.Uniform2f(t,i.u_perspective_transform)}},symbolIcon:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_tile_id:new e.Uniform3f(t,i.u_tile_id),u_zoom_transition:new e.Uniform1f(t,i.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,i.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,i.u_merc_center),u_texture:new e.Uniform1i(t,i.u_texture)}},symbolSDF:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_tile_id:new e.Uniform3f(t,i.u_tile_id),u_zoom_transition:new e.Uniform1f(t,i.u_zoom_transition),u_inv_rot_matrix:new e.UniformMatrix4f(t,i.u_inv_rot_matrix),u_merc_center:new e.Uniform2f(t,i.u_merc_center),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}},symbolTextAndIcon:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texsize_icon:new e.Uniform2f(t,i.u_texsize_icon),u_texture:new e.Uniform1i(t,i.u_texture),u_texture_icon:new e.Uniform1i(t,i.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}},background:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_color:new e.UniformColor(t,i.u_color)}},backgroundPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image:new e.Uniform1i(t,i.u_image),u_pattern_tl_a:new e.Uniform2f(t,i.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,i.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,i.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,i.u_pattern_br_b),u_texsize:new e.Uniform2f(t,i.u_texsize),u_mix:new e.Uniform1f(t,i.u_mix),u_pattern_size_a:new e.Uniform2f(t,i.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,i.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,i.u_scale_a),u_scale_b:new e.Uniform1f(t,i.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,i.u_tile_units_to_pixels)}},terrainRaster:di,terrainDepth:di,skybox:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_sun_direction:new e.Uniform3f(t,i.u_sun_direction),u_cubemap:new e.Uniform1i(t,i.u_cubemap),u_opacity:new e.Uniform1f(t,i.u_opacity),u_temporal_offset:new e.Uniform1f(t,i.u_temporal_offset)}},skyboxGradient:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_color_ramp:new e.Uniform1i(t,i.u_color_ramp),u_center_direction:new e.Uniform3f(t,i.u_center_direction),u_radius:new e.Uniform1f(t,i.u_radius),u_opacity:new e.Uniform1f(t,i.u_opacity),u_temporal_offset:new e.Uniform1f(t,i.u_temporal_offset)}},skyboxCapture:function(t,i){return{u_matrix_3f:new e.UniformMatrix3f(t,i.u_matrix_3f),u_sun_direction:new e.Uniform3f(t,i.u_sun_direction),u_sun_intensity:new e.Uniform1f(t,i.u_sun_intensity),u_color_tint_r:new e.Uniform4f(t,i.u_color_tint_r),u_color_tint_m:new e.Uniform4f(t,i.u_color_tint_m),u_luminance:new e.Uniform1f(t,i.u_luminance)}},globeRaster:function(t,i){return{u_proj_matrix:new e.UniformMatrix4f(t,i.u_proj_matrix),u_globe_matrix:new e.UniformMatrix4f(t,i.u_globe_matrix),u_merc_matrix:new e.UniformMatrix4f(t,i.u_merc_matrix),u_zoom_transition:new e.Uniform1f(t,i.u_zoom_transition),u_merc_center:new e.Uniform2f(t,i.u_merc_center),u_image0:new e.Uniform1i(t,i.u_image0)}},globeAtmosphere:function(t,i){return{u_center:new e.Uniform2f(t,i.u_center),u_radius:new e.Uniform1f(t,i.u_radius),u_screen_size:new e.Uniform2f(t,i.u_screen_size),u_pixel_ratio:new e.Uniform1f(t,i.u_pixel_ratio),u_opacity:new e.Uniform1f(t,i.u_opacity),u_fadeout_range:new e.Uniform1f(t,i.u_fadeout_range),u_start_color:new e.Uniform3f(t,i.u_start_color),u_end_color:new e.Uniform3f(t,i.u_end_color)}}};function en(t,i,n,r,a,o,s){for(var l=t.context,u=l.gl,c=t.useProgram("collisionBox"),h=[],p=0,d=0,f=0;f<r.length;f++){var m=r[f],y=i.getTile(m),v=y.getBucket(n);if(v){var g=m.projMatrix;0===a[0]&&0===a[1]||(g=t.translatePosMatrix(m.projMatrix,y,a,o));var _=s?v.textCollisionBox:v.iconCollisionBox,b=v.collisionCircleArray;if(b.length>0){var x=e.create(),w=g;e.mul(x,v.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(x,x,v.placementViewportMatrix),h.push({circleArray:b,circleOffset:d,transform:w,invTransform:x}),d=p+=b.length/4}_&&(t.terrain&&t.terrain.setupElevationDraw(y,c),c.draw(l,u.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Ri(g,t.transform,y),n.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,t.transform.zoom,null,_.collisionVertexBuffer,_.collisionVertexBufferExt))}}if(s&&h.length){var k=t.useProgram("collisionCircle"),P=new e.StructArrayLayout2f1f2i16;P.resize(4*p),P._trim();for(var S=0,T=0,C=h;T<C.length;T++)for(var O=C[T],I=0;I<O.circleArray.length/4;I++){var E=4*I,A=O.circleArray[E+0],M=O.circleArray[E+1],D=O.circleArray[E+2],j=O.circleArray[E+3];P.emplace(S++,A,M,D,j,0),P.emplace(S++,A,M,D,j,1),P.emplace(S++,A,M,D,j,2),P.emplace(S++,A,M,D,j,3)}(!Yi||Yi.length<2*p)&&(Yi=function(t){var i=2*t,n=new e.StructArrayLayout3ui6;n.resize(i),n._trim();for(var r=0;r<i;r++){var a=6*r;n.uint16[a+0]=4*r+0,n.uint16[a+1]=4*r+1,n.uint16[a+2]=4*r+2,n.uint16[a+3]=4*r+2,n.uint16[a+4]=4*r+3,n.uint16[a+5]=4*r+0}return n}(p));for(var F,L=l.createIndexBuffer(Yi,!0),R=l.createVertexBuffer(P,e.collisionCircleLayout.members,!0),z=0,V=h;z<V.length;z++){var B=V[z],N={u_matrix:B.transform,u_inv_matrix:B.invTransform,u_camera_to_center_distance:(F=t.transform).cameraToCenterDistance,u_viewport_size:[F.width,F.height]};k.draw(l,u.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,N,n.id,R,L,e.SegmentVector.simpleSegment(0,2*B.circleOffset,B.circleArray.length,B.circleArray.length/2),null,t.transform.zoom,null,null,null)}R.destroy(),L.destroy()}}var tn=e.identity(new Float32Array(16));function nn(t,i,n,r,a,o){var s=e.getAnchorAlignment(t),l=-(s.horizontalAlign-.5)*i,u=-(s.verticalAlign-.5)*n,c=e.evaluateVariableOffset(t,r);return new e.pointGeometry((l/a+c[0])*o,(u/a+c[1])*o)}function rn(t,i,n,r,a,o,s,l,u,c,h,p){var d=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,m=t.icon.dynamicLayoutVertexArray,y={},v=l.projMatrix,g=o.elevation,_=g?g.getAtTileOffsetFunc(l,p):function(e){return[0,0,0]};f.clear();for(var b=0;b<d.length;b++){var x=d.get(b),w=t.allowVerticalPlacement&&!x.placedOrientation,k=x.hidden||!x.crossTileID||w?null:r[x.crossTileID];if(k){var P=new e.pointGeometry(x.tileAnchorX,x.tileAnchorY),S=_(P),T=st(P,n?v:s,S[2]),C=lt(o.cameraToCenterDistance,T.signedDistanceFromCamera),O=a.evaluateSizeForFeature(t.textSizeData,c,x)*C/e.ONE_EM;n&&(O*=t.tilePixelRatio/u);for(var I=k.width,E=k.height,A=nn(k.anchor,I,E,k.textOffset,k.textScale,O),M=n?st(P.add(A),s,S[2]).point:T.point.add(i?A.rotate(-o.angle):A),D=t.allowVerticalPlacement&&x.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,j=0;j<x.numGlyphs;j++)e.addDynamicAttributes(f,M,D);h&&x.associatedIconIndex>=0&&(y[x.associatedIconIndex]={shiftedAnchor:M,angle:D})}else gt(x.numGlyphs,f)}if(h){m.clear();for(var F=t.icon.placedSymbolArray,L=0;L<F.length;L++){var R=F.get(L);if(R.hidden)gt(R.numGlyphs,m);else{var z=y[L];if(z)for(var V=0;V<R.numGlyphs;V++)e.addDynamicAttributes(m,z.shiftedAnchor,z.angle);else gt(R.numGlyphs,m)}}t.icon.dynamicLayoutVertexBuffer.updateData(m)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function an(e,t,i){return i.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function on(t,i,n,r,a,o,s,l,u,c,h,d){var f=t.context,m=f.gl,y=t.transform,v=y.projection.createTileTransform(y,y.worldSize),g="map"===l,_="map"===u,b=g&&"point"!==n.layout.get("symbol-placement"),x=g&&!_&&!b,w=void 0!==n.layout.get("symbol-sort-key").constantOr(1),k=!1,P=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),S=[e.mercatorXfromLng(y.center.lng),e.mercatorYfromLat(y.center.lat)],T=n.layout.get("text-variable-anchor"),C="globe"===y.projection.name,O=C?e.globeToMercatorTransition(y.zoom):0,I=[],E=[];t.terrain&&_&&E.push("PITCH_WITH_MAP_TERRAIN"),C&&E.push("PROJECTION_GLOBE_VIEW"),b&&E.push("PROJECTED_POS_ON_VIEWPORT");var A,M=p(r);try{for(M.s();!(A=M.n()).done;){var D=A.value,j=i.getTile(D),F=j.getBucket(n);if(F&&F.projection===y.projection.name){var L=a?F.text:F.icon;if(L&&!F.fullyClipped&&L.segments.get().length){var R=L.programConfigurations.get(n.id),z=a||F.sdfIcons,V=a?F.textSizeData:F.iconSizeData,B=_||0!==y.pitch,N=t.useProgram(an(z,a,F),R,E),U=e.evaluateSizeForZoom(V,y.zoom),W=[D.canonical.x,D.canonical.y,1<<D.canonical.z],G=void 0,H=void 0,X=void 0,Y=void 0,q=[0,0],Z=null;if(a){if(H=j.glyphAtlasTexture,X=m.LINEAR,G=j.glyphAtlasTexture.size,F.iconsInText){q=j.imageAtlasTexture.size,Z=j.imageAtlasTexture;var K="composite"===V.kind||"camera"===V.kind;Y=B||t.options.rotating||t.options.zooming||K?m.LINEAR:m.NEAREST}}else{var $=1!==n.layout.get("icon-size").constantOr(0)||F.iconsNeedLinear;H=j.imageAtlasTexture,X=z||t.options.rotating||t.options.zooming||$||B?m.LINEAR:m.NEAREST,G=j.imageAtlasTexture.size}var J=t.transform.calculatePixelsToTileUnitsMatrix(j),Q=at(D.projMatrix,j.tileID.canonical,_,g,t.transform,J),ee=t.terrain&&_&&b?e.invert(new Float32Array(16),Q):tn,te=ot(D.projMatrix,j.tileID.canonical,_,g,t.transform,J),ie=T&&F.hasTextData(),ne="none"!==n.layout.get("icon-text-fit")&&ie&&F.hasIconData();if(b){var re=y.elevation,ae=re?re.getAtTileOffsetFunc(D,v):function(e){return[0,0,0]};ct(F,D.projMatrix,t,a,Q,te,_,c,ae,D)}var oe=t.translatePosMatrix(D.projMatrix,j,o,s),se=b||a&&T||ne?tn:Q,le=t.translatePosMatrix(te,j,o,s,!0),ue=z&&0!==n.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),ce=v.createInversionMatrix(D.toUnwrapped()),he={program:N,buffers:L,uniformValues:z?F.iconsInText?Ki(V.kind,U,x,_,t,oe,se,le,G,q,W,O,ce,S):Zi(V.kind,U,x,_,t,oe,se,le,a,G,!0,W,O,ce,S):qi(V.kind,U,x,_,t,oe,se,le,a,G,W,O,ce,S),atlasTexture:H,atlasTextureIcon:Z,atlasInterpolation:X,atlasInterpolationIcon:Y,isSDF:z,hasHalo:ue,tile:j,labelPlaneMatrixInv:ee};if(w&&F.canOverlap){k=!0;var pe,de=L.segments.get(),fe=p(de);try{for(fe.s();!(pe=fe.n()).done;){var me=pe.value;I.push({segments:new e.SegmentVector([me]),sortKey:me.sortKey,state:he})}}catch(xe){fe.e(xe)}finally{fe.f()}}else I.push({segments:L.segments,sortKey:0,state:he})}}}}catch(xe){M.e(xe)}finally{M.f()}k&&I.sort((function(e,t){return e.sortKey-t.sortKey}));for(var ye=0,ve=I;ye<ve.length;ye++){var ge=ve[ye],_e=ge.state;if(t.terrain&&t.terrain.setupElevationDraw(_e.tile,_e.program,{useDepthForOcclusion:!C,labelPlaneMatrixInv:_e.labelPlaneMatrixInv}),f.activeTexture.set(m.TEXTURE0),_e.atlasTexture.bind(_e.atlasInterpolation,m.CLAMP_TO_EDGE),_e.atlasTextureIcon&&(f.activeTexture.set(m.TEXTURE1),_e.atlasTextureIcon&&_e.atlasTextureIcon.bind(_e.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),_e.isSDF){var be=_e.uniformValues;_e.hasHalo&&(be.u_is_halo=1,sn(_e.buffers,ge.segments,n,t,_e.program,P,h,d,be)),be.u_is_halo=0}sn(_e.buffers,ge.segments,n,t,_e.program,P,h,d,_e.uniformValues)}}function sn(t,i,n,r,a,o,s,l,u){var c=r.context;a.draw(c,c.gl.TRIANGLES,o,s,l,e.CullFaceMode.disabled,u,n.id,t.layoutVertexBuffer,t.indexBuffer,i,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function ln(t,i,n,r,a,o,s){var l,u,c,h,d,f=t.context.gl,m=n.paint.get("fill-pattern"),y=m&&m.constantOr(1),v=n.getCrossfadeParameters();s?(u=y&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",l=f.LINES):(u=y?"fillPattern":"fill",l=f.TRIANGLES);var g,_=p(r);try{for(_.s();!(g=_.n()).done;){var b=g.value,x=i.getTile(b);if(!y||x.patternsLoaded()){var w=x.getBucket(n);if(w){t.prepareDrawTile(b);var k=w.programConfigurations.get(n.id),P=t.useProgram(u,k);y&&(t.context.activeTexture.set(f.TEXTURE0),x.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),k.updatePaintBuffers(v));var S=m.constantOr(null);if(S&&x.imageAtlas){var T=x.imageAtlas,C=T.patternPositions[S.to.toString()],O=T.patternPositions[S.from.toString()];C&&O&&k.setConstantPatternPositions(C,O)}var I=t.translatePosMatrix(b.projMatrix,x,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(s){h=w.indexBuffer2,d=w.segments2;var E=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[f.drawingBufferWidth,f.drawingBufferHeight];c="fillOutlinePattern"===u&&y?ji(I,t,v,x,E):Di(I,E)}else h=w.indexBuffer,d=w.segments,c=y?Mi(I,t,v,x):Ai(I);t.prepareDrawProgram(t.context,P,b.toUnwrapped()),P.draw(t.context,l,a,t.stencilModeForClipping(b),o,e.CullFaceMode.disabled,c,n.id,w.layoutVertexBuffer,h,d,n.paint,t.transform.zoom,k)}}}}catch(A){_.e(A)}finally{_.f()}}function un(t,i,n,r,a,o,s){var l,u=t.context,c=u.gl,h=n.paint.get("fill-extrusion-pattern"),d=h.constantOr(1),f=n.getCrossfadeParameters(),m=n.paint.get("fill-extrusion-opacity"),y=p(r);try{for(y.s();!(l=y.n()).done;){var v=l.value,g=i.getTile(v),_=g.getBucket(n);if(_){var b=_.programConfigurations.get(n.id),x=t.useProgram(d?"fillExtrusionPattern":"fillExtrusion",b);if(t.terrain){var w=t.terrain;if(!_.enableTerrain)continue;if(w.setupElevationDraw(g,x,{useMeterToDem:!0}),cn(u,i,v,_,n,w),!_.centroidVertexBuffer){var k=x.attributes.a_centroid_pos;void 0!==k&&c.vertexAttrib2f(k,0,0)}}d&&(t.context.activeTexture.set(c.TEXTURE0),g.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),b.updatePaintBuffers(f));var P=h.constantOr(null);if(P&&g.imageAtlas){var S=g.imageAtlas,T=S.patternPositions[P.to.toString()],C=S.patternPositions[P.from.toString()];T&&C&&b.setConstantPatternPositions(T,C)}var O=t.translatePosMatrix(v.projMatrix,g,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),I=n.paint.get("fill-extrusion-vertical-gradient"),E=d?Ei(O,t,I,m,v,f,g):Ii(O,t,I,m);t.prepareDrawProgram(u,x,v.toUnwrapped()),x.draw(u,u.gl.TRIANGLES,a,o,s,e.CullFaceMode.backCCW,E,n.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,n.paint,t.transform.zoom,b,t.terrain?_.centroidVertexBuffer:null)}}}catch(A){y.e(A)}finally{y.f()}}function cn(t,i,n,r,a,o){for(var s,l,u,c=[function(t){var i=t.canonical.x-1,n=t.wrap;return i<0&&(i=(1<<t.canonical.z)-1,n--),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,i,t.canonical.y)},function(t){var i=t.canonical.x+1,n=t.wrap;return i===1<<t.canonical.z&&(i=0,n++),new e.OverscaledTileID(t.overscaledZ,n,t.canonical.z,i,t.canonical.y)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)}],h=function(e){var t,n,r,o=i.getSource().maxzoom,s=function(e){var t=i.getTileByID(e);if(t&&t.hasData())return t.getBucket(a)};return(e.overscaledZ===e.canonical.z||e.overscaledZ>=o)&&(t=s(e.key)),e.overscaledZ>=o&&(n=s(e.calculateScaledKey(e.overscaledZ+1))),e.overscaledZ>o&&(r=s(e.calculateScaledKey(e.overscaledZ-1))),t||n||r},p=[0,0,0],d=function(t,i){return p[0]=Math.min(t.min.y,i.min.y),p[1]=Math.max(t.max.y,i.max.y),p[2]=e.EXTENT-i.min.x>t.max.x?i.min.x-e.EXTENT:t.max.x,p},f=function(t,i){return p[0]=Math.min(t.min.x,i.min.x),p[1]=Math.max(t.max.x,i.max.x),p[2]=e.EXTENT-i.min.y>t.max.y?i.min.y-e.EXTENT:t.max.y,p},m=[function(e,t){return d(e,t)},function(e,t){return d(t,e)},function(e,t){return f(e,t)},function(e,t){return f(t,e)}],y=new e.pointGeometry(0,0),v=function(t,i,r,a,c){var h=[[a?r:t,a?t:r,0],[a?r:i,a?i:r,0]],p=c<0?e.EXTENT+c:c,d=[a?p:(t+i)/2,a?(t+i)/2:p,0];return 0===r&&c<0||0!==r&&c>0?o.getForTilePoints(u,[d],!0,l):h.push(d),o.getForTilePoints(n,h,!0,s),Math.max(h[0][2],h[1][2],d[2])/o.exaggeration()},g=0;g<4;g++){var _=r.borders[g];if(0===_.length&&(r.borderDone[g]=!0),!r.borderDone[g]){var b=u=c[g](n),x=h(b);if(x&&x.enableTerrain&&(l=o.findDEMTileFor(b))&&l.dem){if(!s){var w=o.findDEMTileFor(n);if(!w||!w.dem)return;s=w}for(var k=(g<2?1:5)-g,P=x.borders[k],S=0,T=0;T<_.length;T++){for(var C=r.featuresOnBorder[_[T]],O=C.borders[g],I=void 0;S<P.length&&!((I=x.featuresOnBorder[P[S]]).borders[k][1]>O[0]+3);)x.borderDone[k]||x.encodeCentroid(void 0,I,!1),S++;if(I&&S<P.length){for(var E=S,A=0;!(I.borders[k][0]>O[1]-3)&&(A++,++S!==P.length);)I=x.featuresOnBorder[P[S]];if(I=x.featuresOnBorder[P[E]],C.intersectsCount()>1||I.intersectsCount()>1||1!==A){1!==A&&(S=E),r.encodeCentroid(void 0,C,!1),x.borderDone[k]||x.encodeCentroid(void 0,I,!1);continue}var M=m[g](C,I),D=g%2?e.EXTENT-1:0;y.x=v(M[0],Math.min(e.EXTENT-1,M[1]),D,g<2,M[2]),y.y=0,r.encodeCentroid(y,C,!1),x.borderDone[k]||x.encodeCentroid(y,I,!1)}else r.encodeCentroid(void 0,C,!1)}r.borderDone[g]=r.needsCentroidUpdate=!0,x.borderDone[k]||(x.borderDone[k]=x.needsCentroidUpdate=!0)}}}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(t)}var hn=new e.Color(1,0,0,1),pn=new e.Color(0,1,0,1),dn=new e.Color(0,0,1,1),fn=new e.Color(1,0,1,1),mn=new e.Color(0,1,1,1);function yn(e,t,i,n){gn(e,0,t+i/2,e.transform.width,i,n)}function vn(e,t,i,n){gn(e,t-i/2,0,i,e.transform.height,n)}function gn(t,i,n,r,a,o){var s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*e.exported.devicePixelRatio,n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}function _n(t,i,n){var r=t.context,a=r.gl,o=n.projMatrix,s=t.useProgram("debug"),l=i.getTileByID(n.key);t.terrain&&t.terrain.setupElevationDraw(l,s);var u=e.DepthMode.disabled,c=e.StencilMode.disabled,h=t.colorModeForRenderPass(),p="$debug";r.activeTexture.set(a.TEXTURE0),t.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),l._makeDebugTileBoundsBuffers(t.context,t.transform.projection);var d=l._tileDebugBuffer||t.debugBuffer,f=l._tileDebugIndexBuffer||t.debugIndexBuffer,m=l._tileDebugSegments||t.debugSegments;s.draw(r,a.LINE_STRIP,u,c,h,e.CullFaceMode.disabled,zi(o,e.Color.red),p,d,f,m);var y=l.latestRawTileData,v=Math.floor((y&&y.byteLength||0)/1024),g=i.getTile(n).tileSize,_=512/Math.min(g,512)*(n.overscaledZ/t.transform.zoom)*.5,b=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(b+=" => ".concat(n.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var i=e.debugOverlayCanvas,n=e.context.gl,r=e.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,i.width,i.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(t,5,5),r.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(t,"".concat(b," ").concat(v,"kb")),s.draw(r,a.TRIANGLES,u,c,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,zi(o,e.Color.transparent,_),p,t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}var bn=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function xn(e,t,i,n){e.emplaceBack(t,i,n)}var wn=v((function t(i){y(this,t),this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,xn(this.vertexArray,-1,-1,1),xn(this.vertexArray,1,-1,1),xn(this.vertexArray,-1,1,1),xn(this.vertexArray,1,1,1),xn(this.vertexArray,-1,-1,-1),xn(this.vertexArray,1,-1,-1),xn(this.vertexArray,-1,1,-1),xn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,bn),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}));function kn(t,i,n,r,a,o){var s=t.gl,l=i.paint.get("sky-atmosphere-color"),u=i.paint.get("sky-atmosphere-halo-color"),c=i.paint.get("sky-atmosphere-sun-intensity"),h=function(e,t,i,n,r){return{u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:i,u_color_tint_r:[n.r,n.g,n.b,n.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}}(e.fromMat4([],r),a,c,l,u);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+o,i.skyboxTexture,0),n.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}var Pn={symbol:function(t,i,n,r,a){if("translucent"===t.renderPass){var o=e.StencilMode.disabled,s=t.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(t,i,n,r,a,o,s){var l,u=i.transform,c="map"===a,h="map"===o,d=u.projection.createTileTransform(u,u.worldSize),f=p(t);try{for(f.s();!(l=f.n()).done;){var m=l.value,y=r.getTile(m),v=y.getBucket(n);if(v&&v.projection===u.projection.name&&v.text&&v.text.segments.get().length){var g=e.evaluateSizeForZoom(v.textSizeData,u.zoom),_=i.transform.calculatePixelsToTileUnitsMatrix(y),b=at(m.projMatrix,y.tileID.canonical,h,c,i.transform,_),x="none"!==n.layout.get("icon-text-fit")&&v.hasIconData();if(g){var w=Math.pow(2,u.zoom-y.tileID.overscaledZ);rn(v,c,h,s,e.symbolSize,u,b,m,w,g,x,d)}}}}catch(k){f.e(k)}finally{f.f()}}(r,t,n,i,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),a),0!==n.paint.get("icon-opacity").constantOr(1)&&on(t,i,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),o,s),0!==n.paint.get("text-opacity").constantOr(1)&&on(t,i,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),o,s),i.map.showCollisionBoxes&&(en(t,i,n,r,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),en(t,i,n,r,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))}},circle:function(t,i,n,r){if("translucent"===t.renderPass){var a=n.paint.get("circle-opacity"),o=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var u=t.context,c=u.gl,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),d=e.StencilMode.disabled,f=t.colorModeForRenderPass(),m=[],y=0;y<r.length;y++){var v=r[y],g=i.getTile(v),_=g.getBucket(n);if(_){var b=_.programConfigurations.get(n.id),x=Li(n),w={programConfiguration:b,program:t.useProgram("circle",b,x),layoutVertexBuffer:_.layoutVertexBuffer,indexBuffer:_.indexBuffer,uniformValues:Fi(t,v,g,n),tile:g};if(l){var k,P=_.segments.get(),S=p(P);try{for(S.s();!(k=S.n()).done;){var T=k.value;m.push({segments:new e.SegmentVector([T]),sortKey:T.sortKey,state:w})}}catch(V){S.e(V)}finally{S.f()}}else m.push({segments:_.segments,sortKey:0,state:w})}}l&&m.sort((function(e,t){return e.sortKey-t.sortKey}));for(var C={useDepthForOcclusion:!("globe"===t.transform.projection.name)},O=0,I=m;O<I.length;O++){var E=I[O],A=E.state,M=A.programConfiguration,D=A.program,j=A.layoutVertexBuffer,F=A.indexBuffer,L=A.uniformValues,R=A.tile,z=E.segments;t.terrain&&t.terrain.setupElevationDraw(R,D,C),t.prepareDrawProgram(u,D,R.tileID.toUnwrapped()),D.draw(u,c.TRIANGLES,h,d,f,e.CullFaceMode.disabled,L,n.id,j,F,z,n.paint,t.transform.zoom,M)}}}},heatmap:function(t,i,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var a=t.context,o=a.gl,s=e.StencilMode.disabled,l=new e.ColorMode([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,i){var n=e.gl;e.activeTexture.set(n.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var r=i.heatmapFbo;if(r)n.bindTexture(n.TEXTURE_2D,r.colorAttachment.get()),e.bindFramebuffer.set(r.framebuffer);else{var a=n.createTexture();n.bindTexture(n.TEXTURE_2D,a),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),r=i.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,i,n){var r=e.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t.width/4,t.height/4,0,r.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),n.colorAttachment.set(i)}(e,t,a,r)}}(a,t,n),a.clear({color:e.Color.transparent});for(var u=0;u<r.length;u++){var c=r[u];if(!i.hasRenderableParent(c)){var h=i.getTile(c),p=h.getBucket(n);if(p){var d=p.programConfigurations.get(n.id),f=t.useProgram("heatmap",d),m=t.transform.zoom;t.terrain&&t.terrain.setupElevationDraw(h,f),t.prepareDrawProgram(a,f,c.toUnwrapped()),f.draw(a,o.TRIANGLES,e.DepthMode.disabled,s,l,e.CullFaceMode.disabled,Vi(c.projMatrix,h,m,n.paint.get("heatmap-intensity")),n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,n.paint,t.transform.zoom,d)}}}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){var n=t.context,r=n.gl,a=i.heatmapFbo;if(a){n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);var o=i.colorRampTexture;o||(o=i.colorRampTexture=new e.Texture(n,i.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(n,r.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,function(e,t,i,n){return{u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}}(0,i),i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom)}}(t,n))},line:function(t,i,n,r){if("translucent"===t.renderPass){var a=n.paint.get("line-opacity"),o=n.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),u=n.paint.get("line-dasharray"),c=u.constantOr(1),h=n.layout.get("line-cap"),d=n.paint.get("line-pattern"),f=d.constantOr(1),m=n.paint.get("line-gradient"),y=n.getCrossfadeParameters(),v=f?"linePattern":"line",g=t.context,_=g.gl,b=function(e){var t=[];Gi(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");var i=e.paint.get("line-pattern").constantOr(1),n=1!==e.paint.get("line-opacity").constantOr(1);return!i&&n&&t.push("RENDER_LINE_ALPHA_DISCARD"),t}(n),x=b.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(x=!1);var w,k=p(r);try{var P=function(){var r=w.value,a=i.getTile(r);if(f&&!a.patternsLoaded())return"continue";var o=a.getBucket(n);if(!o)return"continue";t.prepareDrawTile(r);var p=o.programConfigurations.get(n.id),k=t.useProgram(v,p,b),P=d.constantOr(null);if(P&&a.imageAtlas){var S=a.imageAtlas,T=S.patternPositions[P.to.toString()],C=S.patternPositions[P.from.toString()];T&&C&&p.setConstantPatternPositions(T,C)}var O=u.constantOr(null),I=h.constantOr(null);if(!f&&O&&I&&a.lineAtlas){var E=a.lineAtlas,A=E.getDash(O.to,I),M=E.getDash(O.from,I);A&&M&&p.setConstantPatternPositions(A,M)}var D=t.terrain?r.projMatrix:null,j=f?Ni(t,a,n,y,D):Bi(t,a,n,y,D,o.lineClipsArray.length);if(m){var F=o.gradients[n.id],L=F.texture;if(n.gradientVersion!==F.version){var R=256;if(n.stepInterpolant){var z=i.getSource().maxzoom,V=r.canonical.z===z?Math.ceil(1<<t.transform.maxZoom-r.canonical.z):1;R=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*V),256,g.maxTextureSize)}F.gradient=e.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:F.gradient||void 0,clips:o.lineClipsArray}),F.texture?F.texture.update(F.gradient):F.texture=new e.Texture(g,F.gradient,_.RGBA),F.version=n.gradientVersion,L=F.texture}g.activeTexture.set(_.TEXTURE1),L.bind(n.stepInterpolant?_.NEAREST:_.LINEAR,_.CLAMP_TO_EDGE)}c&&(g.activeTexture.set(_.TEXTURE0),a.lineAtlasTexture.bind(_.LINEAR,_.REPEAT),p.updatePaintBuffers(y)),f&&(g.activeTexture.set(_.TEXTURE0),a.imageAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),p.updatePaintBuffers(y)),t.prepareDrawProgram(g,k,r.toUnwrapped());var B=function(i){k.draw(g,_.TRIANGLES,s,i,l,e.CullFaceMode.disabled,j,n.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,n.paint,t.transform.zoom,p,o.layoutVertexBuffer2)};if(x){var N=t.stencilModeForClipping(r).ref;0===N&&t.terrain&&g.clear({stencil:0});var U={func:_.EQUAL,mask:255};j.u_alpha_discard_threshold=.8,B(new e.StencilMode(U,N,255,_.KEEP,_.KEEP,_.INVERT)),j.u_alpha_discard_threshold=0,B(new e.StencilMode(U,N,255,_.KEEP,_.KEEP,_.KEEP))}else B(t.stencilModeForClipping(r))};for(k.s();!(w=k.n()).done;)P()}catch(S){k.e(S)}finally{k.f()}x&&(t.resetStencilClippingMasks(),t.terrain&&g.clear({stencil:0}))}}},fill:function(t,i,n,r){var a=n.paint.get("fill-color"),o=n.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===u){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);ln(t,i,n,r,c,s,!1)}if("translucent"===t.renderPass&&n.paint.get("fill-antialias")){var h=t.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);ln(t,i,n,r,h,s,!0)}}},"fill-extrusion":function(t,i,n,r){var a=n.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){var o=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==a||n.paint.get("fill-extrusion-pattern").constantOr(1))un(t,i,n,r,o,e.StencilMode.disabled,e.ColorMode.disabled),un(t,i,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{var s=t.colorModeForRenderPass();un(t,i,n,r,o,e.StencilMode.disabled,s)}}},hillshade:function(t,i,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var a,o=t.context,s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),u=t.terrain&&t.terrain.renderingToTexture,c="translucent"!==t.renderPass||u?[{},r]:t.stencilConfigForOverlap(r),d=h(c,2),f=d[0],m=d[1],y=p(m);try{for(y.s();!(a=y.n()).done;){var v=a.value,g=i.getTile(v);if(g.needsHillshadePrepare&&"offscreen"===t.renderPass)pi(t,g,n,s,e.StencilMode.disabled,l);else if("translucent"===t.renderPass){var _=u&&t.terrain?t.terrain.stencilModeForRTTOverlap(v):f[v.overscaledZ];ci(t,v,g,n,s,_,l)}}}catch(b){y.e(b)}finally{y.f()}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()}},raster:function(t,i,n,r,a,o){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&r.length){var s,l=t.context,u=l.gl,c=i.getSource(),d=t.useProgram("raster"),f=t.colorModeForRenderPass(),m=t.terrain&&t.terrain.renderingToTexture,y=c instanceof je||m?[{},r]:t.stencilConfigForOverlap(r),v=h(y,2),g=v[0],_=v[1],b=_[_.length-1].overscaledZ,x=!t.options.moving,w=p(_);try{for(w.s();!(s=w.n()).done;){var k=s.value,P=m?e.DepthMode.disabled:t.depthModeForSublayer(k.overscaledZ-b,1===n.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,u.LESS),S=k.toUnwrapped(),T=i.getTile(k);if(!m||T&&T.hasData()){var C=m?k.projMatrix:t.transform.calculateProjMatrix(S,x),O=t.terrain&&m?t.terrain.stencilModeForRTTOverlap(k):g[k.overscaledZ],I=o?0:n.paint.get("raster-fade-duration");T.registerFadeDuration(I);var E=i.findLoadedParent(k,0),A=xi(T,E,i,t.transform,I),M=void 0,D=void 0;t.terrain&&t.terrain.prepareDrawTile(k);var j="nearest"===n.paint.get("raster-resampling")?u.NEAREST:u.LINEAR;l.activeTexture.set(u.TEXTURE0),T.texture.bind(j,u.CLAMP_TO_EDGE),l.activeTexture.set(u.TEXTURE1),E?(E.texture.bind(j,u.CLAMP_TO_EDGE),M=Math.pow(2,E.tileID.overscaledZ-T.tileID.overscaledZ),D=[T.tileID.canonical.x*M%1,T.tileID.canonical.y*M%1]):T.texture.bind(j,u.CLAMP_TO_EDGE);var F=Hi(C,D||[0,0],M||1,A,n,c instanceof je?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(l,d,S),c instanceof je)d.draw(l,u.TRIANGLES,P,e.StencilMode.disabled,f,e.CullFaceMode.disabled,F,n.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{var L=t.getTileBoundsBuffers(T),R=L.tileBoundsBuffer,z=L.tileBoundsIndexBuffer,V=L.tileBoundsSegments;d.draw(l,u.TRIANGLES,P,O,f,e.CullFaceMode.disabled,F,n.id,R,z,V)}}}}catch(B){w.e(B)}finally{w.f()}t.resetStencilClippingMasks()}},background:function(t,i,n,r){var a=n.paint.get("background-color"),o=n.paint.get("background-opacity");if(0!==o){var s=t.context,l=s.gl,u=t.transform,c=u.tileSize,h=n.paint.get("background-pattern");if(!t.isPatternMissing(h)){var d=!h&&1===a.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===d){var f,m=e.StencilMode.disabled,y=t.depthModeForSublayer(0,"opaque"===d?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),v=t.colorModeForRenderPass(),g=t.useProgram(h?"backgroundPattern":"background"),_=r;_||(f=t.getBackgroundTiles(),_=Object.values(f).map((function(e){return e.tileID}))),h&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));var b,x=n.getCrossfadeParameters(),w=p(_);try{for(w.s();!(b=w.n()).done;){var k=b.value,P=k.toUnwrapped(),S=r?k.projMatrix:t.transform.calculateProjMatrix(P);t.prepareDrawTile(k);var T=i?i.getTile(k):f?f[k.key]:new e.Tile(k,c,u.zoom,t),C=h?Ji(S,o,t,h,{tileID:k,tileSize:c},x):$i(S,o,a);t.prepareDrawProgram(s,g,P);var O=t.getTileBoundsBuffers(T),I=O.tileBoundsBuffer,E=O.tileBoundsIndexBuffer,A=O.tileBoundsSegments;g.draw(s,l.TRIANGLES,y,m,v,e.CullFaceMode.disabled,C,n.id,I,E,A)}}catch(M){w.e(M)}finally{w.f()}}}}},sky:function(t,i,n){var r=t.transform,a="mercator"===r.projection.name||"globe"===r.projection.name?1:e.smoothstep(7,8,r.zoom),o=n.paint.get("sky-opacity")*a;if(0!==o){var s=t.context,l=n.paint.get("sky-type"),u=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),c=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?n.needsSkyboxCapture(t)&&(function(t,i,n,r){var a=t.context,o=a.gl,s=i.skyboxFbo;if(!s){s=i.skyboxFbo=a.createFramebuffer(32,32,!1),i.skyboxGeometry=new wn(a),i.skyboxTexture=a.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,i.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(var l=0;l<6;++l)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}a.bindFramebuffer.set(s.framebuffer),a.viewport.set([0,0,32,32]);var u=i.getCenter(t,!0),c=t.useProgram("skyboxCapture"),h=new Float64Array(16);e.identity(h),e.rotateY(h,h,.5*-Math.PI),kn(a,i,c,h,u,0),e.identity(h),e.rotateY(h,h,.5*Math.PI),kn(a,i,c,h,u,1),e.identity(h),e.rotateX(h,h,.5*-Math.PI),kn(a,i,c,h,u,2),e.identity(h),e.rotateX(h,h,.5*Math.PI),kn(a,i,c,h,u,3),e.identity(h),kn(a,i,c,h,u,4),e.identity(h),e.rotateY(h,h,Math.PI),kn(a,i,c,h,u,5),a.viewport.set([0,0,t.width,t.height])}(t,n),n.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,i,n,r,a){var o=t.context,s=o.gl,l=t.transform,u=t.useProgram("skybox");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,i.skyboxTexture);var c=function(e,t,i,n,r){return{u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:n,u_temporal_offset:r}}(l.skyboxMatrix,i.getCenter(t,!1),0,r,a);t.prepareDrawProgram(o,u),u.draw(o,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,c,"skybox",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(t,n,u,o,c):"gradient"===l&&"sky"===t.renderPass&&function(t,i,n,r,a){var o=t.context,s=o.gl,l=t.transform,u=t.useProgram("skyboxGradient");i.skyboxGeometry||(i.skyboxGeometry=new wn(o)),o.activeTexture.set(s.TEXTURE0);var c=i.colorRampTexture;c||(c=i.colorRampTexture=new e.Texture(o,i.colorRamp,s.RGBA)),c.bind(s.LINEAR,s.CLAMP_TO_EDGE);var h=function(t,i,n,r,a){return{u_matrix:t,u_color_ramp:0,u_center_direction:i,u_radius:e.degToRad(n),u_opacity:r,u_temporal_offset:a}}(l.skyboxMatrix,i.getCenter(t,!1),i.paint.get("sky-gradient-radius"),r,a);t.prepareDrawProgram(o,u),u.draw(o,s.TRIANGLES,n,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(t,n,u,o,c)}},debug:function(e,t,i){for(var n=0;n<i.length;n++)_n(e,t,i[n])},custom:function(t,i,n){var r=t.context,a=n.implementation;if(t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes("custom"))e.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===t.renderPass){var o=a.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(a,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(e.StencilMode.disabled);var s="3d"===a.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);r.setDepthMode(s),a.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},Sn=function(){function t(i,n){y(this,t),this.context=new Te(i),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Yt,this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}return v(t,[{key:"updateTerrain",value:function(e,t){var i=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(i||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new Si(this,e));var n=this._terrain;this.transform.elevation=i?n:null,n.update(e,this.transform,t)}}},{key:"_updateFog",value:function(e){var t=e.fog;if(!t||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)this.transform.fogCullDistSq=null;else{var i=t.getFovAdjustedRange(this.transform._fov),n=h(i,2),r=n[0],a=n[1];if(r>a)this.transform.fogCullDistSq=null;else{var o=r+.78*(a-r);this.transform.fogCullDistSq=o*o}}}},{key:"terrain",get:function(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}},{key:"resize",value:function(t,i){if(this.width=t*e.exported.devicePixelRatio,this.height=i*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var n,r=p(this.style.order);try{for(r.s();!(n=r.n()).done;){var a=n.value;this.style._layers[a].resize()}}catch(o){r.e(o)}finally{r.f()}}}},{key:"setup",value:function(){var t=this.context,i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var r=new e.StructArrayLayout2i4;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(-1,1),r.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(o);for(var s=new e.StructArrayLayout1ui2,l=0,u=[0,1,3,2,0];l<u.length;l++){var c=u[l];s.emplaceBack(c)}this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA),this.identityMat=e.create();var h=this.context.gl;this.stencilClearMode=new e.StencilMode({func:h.ALWAYS,mask:0},0,255,h.ZERO,h.ZERO,h.ZERO),this.loadTimeStamps.push(e.window.performance.now())}},{key:"getMercatorTileBoundsBuffers",value:function(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}},{key:"getTileBoundsBuffers",value:function(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}},{key:"clearStencil",value:function(){var t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,i.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,bi(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"resetStencilClippingMasks",value:function(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}},{key:"_renderTileClippingMasks",value:function(t,i,n){if(i&&this.currentStencilSource!==i.id&&t.isTileClipped()&&n&&0!==n.length){if(this._tileClippingMaskIDs&&!this.terrain){var r,a=!1,o=p(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;if(void 0===this._tileClippingMaskIDs[s.key]){a=!0;break}}}catch(x){o.e(x)}finally{o.f()}if(!a)return}this.currentStencilSource=i.id;var l=this.context,u=l.gl;this.nextStencilID+n.length>256&&this.clearStencil(),l.setColorMode(e.ColorMode.disabled),l.setDepthMode(e.DepthMode.disabled);var c=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var h,d=p(n);try{for(d.s();!(h=d.n()).done;){var f=h.value,m=i.getTile(f),y=this._tileClippingMaskIDs[f.key]=this.nextStencilID++,v=this.getTileBoundsBuffers(m),g=v.tileBoundsBuffer,_=v.tileBoundsIndexBuffer,b=v.tileBoundsSegments;c.draw(l,u.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:u.ALWAYS,mask:0},y,255,u.KEEP,u.KEEP,u.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,bi(f.projMatrix),"$clipping",g,_,b)}}catch(x){d.e(x)}finally{d.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,i=this.context.gl;return new e.StencilMode({func:i.NOTEQUAL,mask:255},t,255,i.KEEP,i.KEEP,i.REPLACE)}},{key:"stencilModeForClipping",value:function(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);var i=this.context.gl;return new e.StencilMode({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,i.KEEP,i.KEEP,i.REPLACE)}},{key:"stencilConfigForOverlap",value:function(t){var i=this.context.gl,r=t.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),a=r[r.length-1].overscaledZ,o=r[0].overscaledZ-a+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var s={},l=0;l<o;l++)s[l+a]=new e.StencilMode({func:i.GEQUAL,mask:255},l+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[s,r]}return[n({},a,e.StencilMode.disabled),r]}},{key:"colorModeForRenderPass",value:function(){var t=this.context.gl;if(this._showOverdrawInspector){var i=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}},{key:"depthModeForSublayer",value:function(t,i,n){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(n||this.context.gl.LEQUAL,i,[r,r])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(t,i){var n=this;this.style=t,this.options=i,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();var r=this.style.order,a=this.style._sourceCaches;for(var o in a){var s=a[o];s.used&&s.prepare(this.context)}var l={},u={},c={};for(var h in a){var d=a[h];l[h]=d.getVisibleCoordinates(),u[h]=l[h].slice().reverse(),c[h]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var f=0;f<r.length;f++)if(this.style._layers[r[f]].is3D()){this.opaquePassCutoff=f;break}if(this.terrain&&(this.terrain.updateTileBinding(c),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),e.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";var m,y=p(r);try{for(y.s();!(m=y.n()).done;){var v=m.value,g=this.style._layers[v],_=t._getLayerSourceCache(g);if(g.hasOffscreenPass()&&!g.isHidden(this.transform.zoom)){var b=_?u[_.id]:void 0;("custom"===g.type||g.isSky()||b&&b.length)&&this.renderLayer(this,_,g,b)}}}catch(A){y.e(A)}finally{y.f()}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);var x=e.Color.transparent;if(this.style.fog&&this.style.fog.getOpacity(this.transform.pitch)&&(x=this.style.fog.properties.get("color")),this.context.clear({color:i.showOverdrawInspector?e.Color.black:x,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var w=this.style._layers[r[this.currentLayer]],k=t._getLayerSourceCache(w);if(!w.isSky()){var P=k?u[k.id]:void 0;this._renderTileClippingMasks(w,k,P),this.renderLayer(this,k,w,P)}}if(this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var S=this.style._layers[r[this.currentLayer]],T=t._getLayerSourceCache(S);S.isSky()&&this.renderLayer(this,T,S,T?u[T.id]:void 0)}for("globe"===this.transform.projection.name&&function(t){var i=t.context,n=i.gl,r=t.transform,a=new e.DepthMode(n.LEQUAL,e.DepthMode.ReadOnly,[0,1]),o=t.useProgram("globeAtmosphere"),s=r._camera.getWorldToCamera(r.worldSize,1),l=r._camera.getCameraToClipPerspective(r._fov,r.width/r.height,r._nearZ,r._farZ),u=e.mul([],s,e.calculateGlobeMatrix(r,r.worldSize)),c=e.mul([],r.labelPlaneMatrix,l),h=e.transformMat4([],[0,0,0],u),p=e.add([],h,[r.worldSize/Math.PI/2,0,0]),d=e.transformMat4([],h,c),f=e.transformMat4([],p,c),m=e.length(e.sub([],f,d)),y=1-e.globeToMercatorTransition(r.zoom),v={u_center:d,u_radius:m,u_screen_size:[r.width,r.height],u_pixel_ratio:e.exported.devicePixelRatio,u_opacity:y,u_fadeout_range:2,u_start_color:[1,1,1],u_end_color:[.0118,.7451,.9882]};t.prepareDrawProgram(i,o);var g=t.globeSharedBuffers;g&&o.draw(i,n.TRIANGLES,a,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,v,"skybox",g.atmosphereVertexBuffer,g.atmosphereIndexBuffer,g.atmosphereSegments)}(this),this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){var C=this.style._layers[r[this.currentLayer]],O=t._getLayerSourceCache(C);if(C.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(C)){if(C.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer)}else{var I=O?("symbol"===C.type?c:u)[O.id]:void 0;this._renderTileClippingMasks(C,O,O?l[O.id]:void 0),this.renderLayer(this,O,C,I),++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){var E=null;e.values(this.style._layers).forEach((function(e){var i=t._getLayerSourceCache(e);i&&!e.isHidden(n.transform.zoom)&&(!E||E.getSource().maxzoom<i.getSource().maxzoom)&&(E=i)})),E&&this.options.showTileBoundaries&&Pn.debug(this,E,E.getVisibleCoordinates())}this.options.showPadding&&function(e){var t=e.transform.padding;yn(e,e.transform.height-(t.top||0),3,hn),yn(e,t.bottom||0,3,pn),vn(e,t.left||0,3,dn),vn(e,e.transform.width-(t.right||0),3,fn);var i=e.transform.centerPoint;!function(e,t,i,n){gn(e,t-1,i-10,2,20,n),gn(e,t-10,i-1,20,2,n)}(e,i.x,e.transform.height-i.y,mn)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}}},{key:"renderLayer",value:function(e,t,i,n){i.isHidden(this.transform.zoom)||("background"===i.type||"sky"===i.type||"custom"===i.type||n&&n.length)&&(this.id=i.id,this.gpuTimingStart(i),e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes(i.type)||Pn[i.type](e,t,i,n,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,i=this.gpuTimers[e.id];i||(i=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),i.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,i.query)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"queryGpuTimers",value:function(e){var t={};for(var i in e){var n=e[i],r=this.context.extTimerQuery,a=r.getQueryObjectEXT(n.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n.query),t[i]=a}return t}},{key:"translatePosMatrix",value:function(t,i,n,r,a){if(!n[0]&&!n[1])return t;var o=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);n=[n[0]*l-n[1]*s,n[0]*s+n[1]*l]}var u=[a?n[0]:V(i,n[0],this.transform.zoom),a?n[1]:V(i,n[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,u),c}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),i=this.imageManager.getPattern(e.to.toString());return!t||!i}},{key:"currentGlobalDefines",value:function(){var e=this.terrain&&this.terrain.renderingToTexture,t=this.style&&this.style.fog,i=[];return this.terrain&&!this.terrain.renderingToTexture&&i.push("TERRAIN"),t&&!e&&0!==t.getOpacity(this.transform.pitch)&&i.push("FOG"),e&&i.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&i.push("OVERDRAW_INSPECTOR"),i}},{key:"useProgram",value:function(e,t,i){this.cache=this.cache||{};var n=i||[],r=this.currentGlobalDefines().concat(n),a=Ci.cacheKey(e,r,t);return this.cache[a]||(this.cache[a]=new Ci(this.context,e,oi[e],t,Qi[e],r)),this.cache[a]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}},{key:"prepareDrawTile",value:function(e){this.terrain&&this.terrain.prepareDrawTile(e)}},{key:"prepareDrawProgram",value:function(e,t,i){if(!this.terrain||!this.terrain.renderingToTexture){var n=this.style.fog;if(n){var r=n.getOpacity(this.transform.pitch);0!==r&&t.setFogUniformValues(e,function(e,t,i,n){var r=t.properties.get("color"),a=e.frameCounter/1e3%1,o=[r.r/r.a,r.g/r.a,r.b/r.a,n];return{u_fog_matrix:i?e.transform.calculateFogTileMatrix(i):e.identityMat,u_fog_range:t.getFovAdjustedRange(e.transform._fov),u_fog_color:o,u_fog_horizon_blend:t.properties.get("horizon-blend"),u_fog_temporal_offset:a}}(this,n,i,r))}}}},{key:"setTileLoadedFlag",value:function(e){this.tileLoaded=e}},{key:"saveCanvasCopy",value:function(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}},{key:"canvasCopy",value:function(){var e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}},{key:"averageElevationNeedsEasing",value:function(){if(!this.transform._elevation)return!1;var e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}},{key:"getBackgroundTiles",value:function(){var t,i=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512}),a=p(r);try{for(a.s();!(t=a.n()).done;){var o=t.value;n[o.key]=i[o.key]||new e.Tile(o,512,this.transform.tileZoom,this)}}catch(s){a.e(s)}finally{a.f()}return n}},{key:"clearBackgroundTiles",value:function(){this._backgroundTiles={}}}]),t}(),Tn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(y(this,t),isNaN(e)||e<0||isNaN(i)||i<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=i,this.left=n,this.right=r}return v(t,[{key:"interpolate",value:function(t,i,n){return null!=i.top&&null!=t.top&&(this.top=e.number(t.top,i.top,n)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,i.bottom,n)),null!=i.left&&null!=t.left&&(this.left=e.number(t.left,i.left,n)),null!=i.right&&null!=t.right&&(this.right=e.number(t.right,i.right,n)),this}},{key:"getCenter",value:function(t,i){var n=e.clamp((this.left+t-this.right)/2,0,t),r=e.clamp((this.top+i-this.bottom)/2,0,i);return new e.pointGeometry(n,r)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}();function Cn(t,i){var n=e.getColumn(t,3);e.fromQuat(t,i),e.setColumn(t,3,n)}function On(t,i){e.setColumn(t,3,[i[0],i[1],i[2],1])}function In(t,i){var n=e.identity$1([]);return e.rotateZ$1(n,n,-i),e.rotateX$1(n,n,-t),n}function En(t,i){var n=[t[0],t[1],0],r=[i[0],i[1],0];if(e.length(n)>=1e-15){var a=e.normalize([],n);e.scale$2(r,a,e.dot(r,a)),i[0]=r[0],i[1]=r[1]}var o=e.cross([],i,t);if(e.len(o)<1e-15)return null;var s=Math.atan2(-o[1],o[0]);return In(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),s)}var An=function(){function t(e,i){y(this,t),this.position=e,this.orientation=i}return v(t,[{key:"position",get:function(){return this._position},set:function(t){this._position=this._renderWorldCopies?function(t){if(t){var i=Array.isArray(t)?new e.MercatorCoordinate(t[0],t[1],t[2]):t;return i.x=e.wrap(i.x,0,1),i}}(t):t}},{key:"lookAtPoint",value:function(t,i){if(this.orientation=null,this.position){var n=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,r=this.position,a=e.MercatorCoordinate.fromLngLat(t,n),o=[a.x-r.x,a.y-r.y,a.z-r.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=En(o,i)}}},{key:"setPitchBearing",value:function(t,i){this.orientation=In(e.degToRad(t),e.degToRad(-i))}}]),t}(),Mn=function(){function t(i,n){y(this,t),this._transform=e.identity([]),this._orientation=e.identity$1([]),n&&(this._orientation=n,Cn(this._transform,this._orientation)),i&&On(this._transform,i)}return v(t,[{key:"mercatorPosition",get:function(){var t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}},{key:"position",get:function(){var t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]},set:function(e){On(this._transform,e)}},{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation=e,Cn(this._transform,this._orientation)}},{key:"getPitchBearing",value:function(){var e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}},{key:"setPitchBearing",value:function(e,t){this._orientation=In(e,t),Cn(this._transform,this._orientation)}},{key:"forward",value:function(){var t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}},{key:"up",value:function(){var t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}},{key:"right",value:function(){var t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}},{key:"getCameraToWorld",value:function(t,i){var n=new Float64Array(16);return e.invert(n,this.getWorldToCamera(t,i)),n}},{key:"getWorldToCameraPosition",value:function(t,i,n){var r=this.position;e.scale$2(r,r,-t);var a=new Float64Array(16);return e.fromScaling(a,[n,n,n]),e.translate(a,a,r),a[10]*=i,a}},{key:"getWorldToCamera",value:function(t,i){var n=new Float64Array(16),r=new Float64Array(4),a=this.position;return e.conjugate(r,this._orientation),e.scale$2(a,a,-t),e.fromQuat(n,r),e.translate(n,n,a),n[1]*=-1,n[5]*=-1,n[9]*=-1,n[13]*=-1,n[8]*=i,n[9]*=i,n[10]*=i,n[11]*=i,n}},{key:"getCameraToClipPerspective",value:function(t,i,n,r){var a=new Float64Array(16);return e.perspective(a,t,i,n,r),a}},{key:"getDistanceToElevation",value:function(t){var i=0===t?0:e.mercatorZfromAltitude(t,this.position[1]),n=this.forward();return(i-this.position[2])/n[2]}},{key:"clone",value:function(){return new t(c(this.position),c(this.orientation))}}]),t}();function Dn(t,i){var n=Fn(t),r=function(t,i,n,r,a){var o=new e.LngLat(n.lng-180*Ln,n.lat),s=new e.LngLat(n.lng+180*Ln,n.lat),l=t.project(o.lng,o.lat),u=t.project(s.lng,s.lat),c=-Math.atan2(u.y-l.y,u.x-l.x),h=e.MercatorCoordinate.fromLngLat(n);h.y=e.clamp(h.y,-.999975,.999975);var p=h.toLngLat(),d=t.project(p.lng,p.lat),f=e.MercatorCoordinate.fromLngLat(p);f.x+=Ln;var m=f.toLngLat(),y=t.project(m.lng,m.lat),v=zn(y.x-d.x,y.y-d.y,c),g=e.MercatorCoordinate.fromLngLat(p);g.y+=Ln;var _=g.toLngLat(),b=t.project(_.lng,_.lat),x=zn(b.x-d.x,b.y-d.y,c),w=Math.abs(v.x)/Math.abs(x.y),k=e.identity([]);e.rotateZ(k,k,-c*(1-(a?0:r)));var P=e.identity([]);return e.scale(P,P,[1,1-(1-w)*r,1]),P[4]=-x.x/x.y*r,e.rotateZ(P,P,c),e.multiply$1(P,k,P),P}(t.projection,0,t.center,n,i),a=jn(t);return e.scale(r,r,[a,a,1]),r}function jn(t){var i=t.projection,n=Fn(t),r=Rn(i,t.center),a=Rn(i,e.LngLat.convert(i.center));return Math.pow(2,r*n+(1-n)*a)}function Fn(t){var i=t.projection.range;if(!i)return 0;var n=Math.max(t.width,t.height),r=Math.log(n/1024)/Math.LN2;return e.smoothstep(i[0]+r,i[1]+r,t.zoom)}var Ln=1/4e4;function Rn(t,i){var n=e.clamp(i.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=new e.LngLat(i.lng-180*Ln,n),a=new e.LngLat(i.lng+180*Ln,n),o=t.project(r.lng,n),s=t.project(a.lng,n),l=e.MercatorCoordinate.fromLngLat(r),u=e.MercatorCoordinate.fromLngLat(a),c=s.x-o.x,h=s.y-o.y,p=u.x-l.x,d=u.y-l.y,f=Math.sqrt((p*p+d*d)/(c*c+h*h));return Math.log(f)/Math.LN2}function zn(e,t,i){var n=Math.cos(i),r=Math.sin(i);return{x:e*n-t*r,y:e*r+t*n}}var Vn=function(){function t(i,n,r,a,o){y(this,t),this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=i||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==a?60:a,this.setProjection(),this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Tn,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Mn,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._projectionScaler=1,this._horizonShift=.1}return v(t,[{key:"clone",value:function(){var e=new t(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.setProjection(this.getProjection()),e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e.tileSize=this.tileSize,e.setMaxBounds(this.getMaxBounds()),e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._cameraZoom=this._cameraZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e}},{key:"elevation",get:function(){return this._elevation},set:function(e){this._elevation!==e&&(this._elevation=e,e?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}},{key:"updateElevation",value:function(e){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),e&&this._constrainCameraAltitude(),this._calcMatrices()}},{key:"getProjection",value:function(){return e.pick(this.projection,["name","center","parallels"])}},{key:"setProjection",value:function(t){null==t&&(t={name:"mercator"}),this.projectionOptions=t;var i=this.projection?this.getProjection():void 0;return this.projection=e.getProjection(t),!g(i,this.getProjection())&&(this._calcMatrices(),!0)}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"cameraWorldSize",get:function(){var e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}},{key:"pixelsPerMeter",get:function(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}},{key:"cameraPixelsPerMeter",get:function(){return this.projection.pixelsPerMeter(this.center.lat,this.cameraWorldSize)}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new e.pointGeometry(this.width,this.height)}},{key:"bearing",get:function(){return e.wrap(this.rotation,-180,180)},set:function(e){this.rotation=e}},{key:"rotation",get:function(){return-this.angle/Math.PI*180},set:function(t){var i,n=-t*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(i=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i),function(e,t,i){var n=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(i),l=Math.cos(i);e[0]=n*l+a*s,e[1]=r*l+o*s,e[2]=n*-s+a*l,e[3]=r*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var i=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}},{key:"averageElevation",get:function(){return this._averageElevation},set:function(e){this._averageElevation=e,this._calcFogMatrices()}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}},{key:"_setZoom",value:function(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"_updateCenterElevation",value:function(){if(!this._elevation)return!1;var e=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center),-1);return-1===e?(this._cameraZoom=null,!1):(this._centerAltitude=e,!0)}},{key:"_updateCameraOnTerrain",value:function(){this._cameraZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize)}},{key:"sampleAverageElevation",value:function(){if(!this._elevation)return 0;for(var t=this._elevation,i=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],n=this.horizonLineFromTop(),r=0,a=0,o=0;o<i.length;o++){var s=new e.pointGeometry(i[o][0]*this.width,n+i[o][1]*(this.height-n)),l=t.pointCoordinate(s);if(l){var u=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*u,a+=u}}return 0===a?NaN:r/a}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._cameraZoom&&this._elevation){var e=this._cameraZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),i=this.pixelsPerMeter/this.worldSize*t,n=this._mercatorZfromZoom(e),r=this._mercatorZfromZoom(this._maxZoom),a=Math.max(n-i,r);this._setZoom(this._zoomFromMercatorZ(a))}}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"computeZoomRelativeTo",value:function(t){var i,n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));i=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];var r=e.length(e.sub([],this._camera.position,i));return e.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(t){if(this.height&&(t.position||t.orientation)){this._updateCameraState();var i=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(t.orientation)),t.position){var n=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(n,this._camera.position)||(this._setCameraPosition(n),i=!0)}i&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var t=this._camera.position,i=new An;return i.position=new e.MercatorCoordinate(t[0],t[1],t[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this.renderWorldCopies,i}},{key:"_setCameraOrientation",value:function(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);var i=e.transformQuat([],[0,0,-1],t),n=e.transformQuat([],[0,-1,0],t);if(n[2]<0)return!1;var r=En(i,n);return!!r&&(this._camera.orientation=r,!0)}},{key:"_setCameraPosition",value:function(t){var i=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;t[2]=e.clamp(t[2],r/n,r/i),this._camera.position=t}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(t){var i=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies)for(var n=this.pointCoordinate(new e.pointGeometry(0,0)),r=this.pointCoordinate(new e.pointGeometry(this.width,0)),a=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),o=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(n.x,r.x,a.x,o.x)),l=Math.floor(Math.max(n.x,r.x,a.x,o.x)),u=1,c=s-u;c<=l+u;c++)0!==c&&i.push(new e.UnwrappedTileID(c,t));return i}},{key:"coveringTiles",value:function(t){var i=this,n=this.coveringZoomLevel(t),r=n,a=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);var s=this.locationCoordinate(this.center),l=1<<n,u=[l*s.x,l*s.y,0],c=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,"globe"!==this.projection.name),h=this.pointCoordinate(this.getCameraPoint()),p=l*e.mercatorZfromAltitude(1,this.center.lat),d=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),f=[l*h.x,l*h.y,d],m=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),y=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,v=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,g=t.isTerrainDEM?-v:this._elevation?this._elevation.getMinElevationBelowMSL():0,_=this.projection.isReprojectedInTileSpace?jn(this):1,b=function(t){var n=1/4e4,r=new e.MercatorCoordinate(t.x+n,t.y,t.z),a=new e.MercatorCoordinate(t.x,t.y+n,t.z),o=t.toLngLat(),s=r.toLngLat(),l=a.toLngLat(),u=i.locationCoordinate(o),c=i.locationCoordinate(s),h=i.locationCoordinate(l),p=Math.hypot(c.x-u.x,c.y-u.y),d=Math.hypot(h.x-u.x,h.y-u.y);return Math.sqrt(p*d)*_/n},x=function(t){var n=v,r=g;return{aabb:e.tileAABB(i,l,0,0,0,t,r,n,i.projection),zoom:0,x:0,y:0,minZ:r,maxZ:n,wrap:t,fullyVisible:!1}},w=[],k=[],P=n,S=t.reparseOverscaled?r:n,T=function(e){return e*e},C=T((d-this._centerAltitude)*p),O=function(e){if(i._elevation&&e.tileID&&o){var t=i._elevation.getMinMaxForTile(e.tileID),n=e.aabb;t?(n.min[2]=t.min,n.max[2]=t.max,n.center[2]=(n.min[2]+n.max[2])/2):(e.shouldSplit=I(e),e.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=i._centerAltitude))}},I=function(t){if(t.zoom<y)return!0;if(t.zoom===P)return!1;if(null!=t.shouldSplit)return t.shouldSplit;var n=t.aabb.distanceX(f),o=t.aabb.distanceY(f),s=C;a&&(s=T(t.aabb.distanceZ(f)*p));var l=1;if(i.projection.isReprojectedInTileSpace&&r<=5){var u=Math.pow(2,t.zoom),c=b(new e.MercatorCoordinate((t.x+.5)/u,(t.y+.5)/u));l=c>.85?1:c}var h=n*n+o*o+s;return h<T((1<<P-t.zoom)*m*l*function(e,t){if(t*T(.707)<e)return 1;var i=Math.sqrt(t/e);return i/(1.4144271570014144+(Math.pow(1.1,i-1.4144271570014144+1)-1)/(1.1-1)-1)}(Math.max(s,C),h))};if(this.renderWorldCopies)for(var E=1;E<=3;E++)w.push(x(-E)),w.push(x(E));for(w.push(x(0));w.length>0;){var A=w.pop(),M=A.x,D=A.y,j=A.fullyVisible;if(!j){var F=A.aabb.intersects(c);if(0===F)continue;j=2===F}if(A.zoom!==P&&I(A))for(var L=0;L<4;L++){var R=(M<<1)+L%2,z=(D<<1)+(L>>1),V={aabb:o?A.aabb.quadrant(L):e.tileAABB(this,l,A.zoom+1,R,z,A.wrap,A.minZ,A.maxZ,this.projection),zoom:A.zoom+1,x:R,y:z,wrap:A.wrap,fullyVisible:j,tileID:void 0,shouldSplit:void 0,minZ:A.minZ,maxZ:A.maxZ};a&&(V.tileID=new e.OverscaledTileID(A.zoom+1===P?S:A.zoom+1,A.wrap,A.zoom+1,R,z),O(V)),w.push(V)}else{var B=A.zoom===P?S:A.zoom;if(t.minzoom&&t.minzoom>B)continue;var N=u[0]-(.5+M+(A.wrap<<A.zoom))*(1<<n-A.zoom),U=u[1]-.5-D,W=A.tileID?A.tileID:new e.OverscaledTileID(B,A.wrap,A.zoom,M,D);k.push({tileID:W,distanceSq:N*N+U*U})}}if(this.fogCullDistSq){var G=this.fogCullDistSq,H=this.horizonLineFromTop();k=k.filter((function(n){var r=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],o=i.calculateFogTileMatrix(n.tileID.toUnwrapped());e.transformMat4$1(r,r,o),e.transformMat4$1(a,a,o);var s=e.getAABBPointSquareDist(r,a);if(0===s)return!0;var l=!1,u=i._elevation;if(u&&s>G&&0!==H){var c,h=i.calculateProjMatrix(n.tileID.toUnwrapped());t.isTerrainDEM||(c=u.getMinMaxForTile(n.tileID)),c||(c={min:g,max:v});var p=e.furthestTileCorner(i.rotation),d=[p[0]*e.EXTENT,p[1]*e.EXTENT,c.max];e.transformMat4(d,d,h),l=(1-d[1])*i.height*.5<H}return s<G||l}))}return k.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(t){var i=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),n=this.projection.project(t.lng,i);return new e.pointGeometry(n.x*this.worldSize,n.y*this.worldSize)}},{key:"unproject",value:function(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}},{key:"point",get:function(){return this.project(this.center)}},{key:"setLocationAtPoint",value:function(t,i){var n=this.pointCoordinate(i),r=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(a.x-(n.x-r.x),a.y-(n.y-r.y)))}},{key:"setLocation",value:function(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e){return this.projection.locationPoint(this,e)}},{key:"locationPoint3D",value:function(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"pointLocation3D",value:function(e){return this.coordinateLocation(this.pointCoordinate3D(e))}},{key:"locationCoordinate",value:function(t,i){var n=i?e.mercatorZfromAltitude(i,t.lat):void 0,r=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(r.x,r.y,n)}},{key:"coordinateLocation",value:function(e){return this.projection.unproject(e.x,e.y)}},{key:"pointRayIntersection",value:function(t,i){var n=null!=i?i:this._centerAltitude,r=[t.x,t.y,0,1],a=[t.x,t.y,1,1];e.transformMat4$1(r,r,this.pixelMatrixInverse),e.transformMat4$1(a,a,this.pixelMatrixInverse);var o=a[3];e.scale$1(r,r,1/r[3]),e.scale$1(a,a,1/o);var s=r[2],l=a[2];return{p0:r,p1:a,t:s===l?0:(n-s)/(l-s)}}},{key:"screenPointToMercatorRay",value:function(t){var i=[t.x,t.y,0,1],n=[t.x,t.y,1,1];return e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(n,n,this.pixelMatrixInverse),e.scale$1(i,i,1/i[3]),e.scale$1(n,n,1/n[3]),i[2]=e.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,e.scale$1(i,i,1/this.worldSize),e.scale$1(n,n,1/this.worldSize),new e.Ray([i[0],i[1],i[2]],e.normalize([],e.sub([],n,i)))}},{key:"rayIntersectionCoordinate",value:function(t){var i=t.p0,n=t.p1,r=t.t,a=e.mercatorZfromAltitude(i[2],this._center.lat),o=e.mercatorZfromAltitude(n[2],this._center.lat);return new e.MercatorCoordinate(e.number(i[0],n[0],r)/this.worldSize,e.number(i[1],n[1],r)/this.worldSize,e.number(a,o,r))}},{key:"pointCoordinate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.createTileTransform(this,this.worldSize).pointCoordinate(e.x,e.y,t)}},{key:"pointCoordinate3D",value:function(t){if(!this.elevation)return this.pointCoordinate(t);var i=this.elevation,n=this.elevation.pointCoordinate(t);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);var r=0,a=this.horizonLineFromTop();if(t.y>a)return this.pointCoordinate(t);for(var o=.02*a,s=t.clone(),l=0;l<10&&a-r>o;l++){s.y=e.number(r,a,.66);var u=i.pointCoordinate(s);u?(a=s.y,n=u):r=s.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}},{key:"isPointAboveHorizon",value:function(e){if(this.elevation)return!this.elevation.pointCoordinate(e);var t=this.horizonLineFromTop();return e.y<t}},{key:"_coordinatePoint",value:function(t,i){var n=i&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,r=[t.x*this.worldSize,t.y*this.worldSize,n+t.toAltitude(),1];return e.transformMat4$1(r,r,this.pixelMatrix),r[3]>0?new e.pointGeometry(r[0]/r[3],r[1]/r[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"_getBounds",value:function(t,i){var n=new e.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),r=new e.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),a=new e.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),o=new e.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom),s=this.pointCoordinate(n,t),l=this.pointCoordinate(r,t),u=this.pointCoordinate(a,i),c=this.pointCoordinate(o,i),h=function(e,t){return(t.y-e.y)/(t.x-e.x)};return s.y>1&&l.y>=0?s=new e.MercatorCoordinate((1-c.y)/h(c,s)+c.x,1):s.y<0&&l.y<=1&&(s=new e.MercatorCoordinate(-c.y/h(c,s)+c.x,0)),l.y>1&&s.y>=0?l=new e.MercatorCoordinate((1-u.y)/h(u,l)+u.x,1):l.y<0&&s.y<=1&&(l=new e.MercatorCoordinate(-u.y/h(u,l)+u.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(s)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(c)).extend(this.coordinateLocation(u))}},{key:"_getBounds3D",value:function(){var e=this.elevation;if(!e.visibleDemTiles.length)return this._getBounds(0,0);var t=e.visibleDemTiles.reduce((function(e,t){if(t.dem){var i=t.dem.tree;e.min=Math.min(e.min,i.minimums[0]),e.max=Math.max(e.max,i.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBounds(t.min*e.exaggeration(),t.max*e.exaggeration())}},{key:"getBounds",value:function(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}},{key:"horizonLineFromTop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,i=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,i):i}},{key:"getMaxBounds",value:function(){return this.maxBounds}},{key:"setMaxBounds",value:function(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}},{key:"calculatePosMatrix",value:function(e,t){return this.projection.createTileTransform(this,t).createTileMatrix(e)}},{key:"calculateDistanceTileData",value:function(t){var i=t.key,n=this._distanceTileDataCache;if(n[i])return n[i];var r=t.canonical,a=1/this.height,o=this.cameraWorldSize/this.zoomScale(r.z),s=(r.x+Math.pow(2,r.z)*t.wrap)*o,l=r.y*o,u=this.point,c=this.angle,h=Math.sin(-c),p=-Math.cos(-c);return n[i]={bearing:[h,p],center:[(u.x-s)*a,(u.y-l)*a],scale:o/e.EXTENT*a},n[i]}},{key:"calculateFogTileMatrix",value:function(t){var i=t.key,n=this._fogTileMatrixCache;if(n[i])return n[i];var r=this.calculatePosMatrix(t,this.cameraWorldSize);return e.multiply$1(r,this.worldToFogMatrix,r),n[i]=new Float32Array(r),n[i]}},{key:"calculateProjMatrix",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.key,r=i?this._alignedProjMatrixCache:this._projMatrixCache;if(r[n])return r[n];var a=this.calculatePosMatrix(t,this.worldSize);return e.multiply$1(a,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:i?this.alignedProjMatrix:this.projMatrix,a),r[n]=new Float32Array(a),r[n]}},{key:"calculatePixelsToTileUnitsMatrix",value:function(t){var i=t.tileID.key,n=this._pixelsToTileUnitsCache;if(n[i])return n[i];var r=function(t,i){var n,r,a,o,s,l,u,c,h=t.tileTransform.scale*e.EXTENT/(t.tileSize*Math.pow(2,i.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return n=new Float32Array(4),o=(r=i.inverseAdjustmentMatrix)[1],s=r[2],l=r[3],c=(a=[h,h])[1],n[0]=r[0]*(u=a[0]),n[1]=o*u,n[2]=s*c,n[3]=l*c,n}(t,this);return n[i]=r,n[i]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"recenterOnTerrain",value:function(){if(this._elevation){var t=this._elevation;this._updateCameraState();var i=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(i),r=this._camera.forward(),a=e.mercatorZfromAltitude(1,this._center.lat);n[2]/=a,r[2]/=a,e.normalize(r,r);var o=t.raycast(n,r,t.exaggeration());if(o){var s=e.scaleAndAdd([],n,r,o),l=new e.MercatorCoordinate(s[0],s[1],e.mercatorZfromAltitude(s[2],e.latFromMercatorY(s[1]))),u=(l.z+e.length([l.x-n[0],l.y-n[1],l.z-n[2]*a]))*this._projectionScaler;this._cameraZoom=this._zoomFromMercatorZ(u),this._centerAltitude=l.toAltitude(),this._center=this.coordinateLocation(l),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}},{key:"_constrainCameraAltitude",value:function(){if(this._elevation){var t=this._elevation;this._updateCameraState();var i=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(i),r=t.getAtPointOrZero(a(e.MercatorCoordinate,c(n))),o=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),s=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*r;if(s<o){var l=this.locationCoordinate(this._center,this._centerAltitude),u=[l.x-n[0],l.y-n[1],l.z-n[2]],h=e.length(u);u[2]-=(o-s)/this._projectionScaler;var p=e.length(u);if(0===p)return;e.scale$2(u,u,h/p*this._projectionScaler),this._camera.position=[l.x-u[0],l.y-u[1],l.z*this._projectionScaler-u[2]],this._camera.orientation=En(u,this._camera.up()),this._updateStateFromCamera()}}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){if(this._constraining=!0,this.projection.isReprojectedInTileSpace){var t=this.center;return t.lat=e.clamp(t.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(t.lng=e.clamp(t.lng,this.minLng,this.maxLng)),this.center=t,void(this._constraining=!1)}var i=this._unmodified,n=this.point,r=n.x,a=n.y,o=0,s=r,l=a,u=this.width/2,c=this.height/2,h=this.worldMinY*this.scale,p=this.worldMaxY*this.scale;if(a-c<h&&(l=h+c),a+c>p&&(l=p-c),p-h<this.height&&(o=Math.max(o,this.height/(p-h)),l=(p+h)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){var d=this.worldMinX*this.scale,f=this.worldMaxX*this.scale,m=this.worldSize/2-(d+f)/2;(s=(r+m+this.worldSize)%this.worldSize-m)-u<d&&(s=d+u),s+u>f&&(s=f-u),f-d<this.width&&(o=Math.max(o,this.width/(f-d)),s=(f+d)/2)}s===r&&l===a||(this.center=this.unproject(new e.pointGeometry(s,l))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCameraAltitude(),this._unmodified=i,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var t=this._fov/2,i=this.centerOffset,n=this.pixelsPerMeter;this._projectionScaler=n/(e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize),this.cameraToCenterDistance=.5/Math.tan(t)*this.height*this._projectionScaler,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;var r=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?n:1),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-i.x/this.width,a[9]=2*i.y/this.height;var o=e.mul([],a,r);if(this.projection.isReprojectedInTileSpace){var s=this.locationCoordinate(this.center),l=e.identity([]);e.translate(l,l,[s.x*this.worldSize,s.y*this.worldSize,0]),e.multiply$1(l,l,Dn(this)),e.translate(l,l,[-s.x*this.worldSize,-s.y*this.worldSize,0]),e.multiply$1(o,o,l),this.inverseAdjustmentMatrix=function(e){var t=Dn(e,!0);return d([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],o,[this.worldSize,this.worldSize,this.worldSize/n,1]),this.projMatrix=o,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);var u=new Float32Array(16);e.identity(u),e.scale(u,u,[1,-1,1]),e.rotateX(u,u,this._pitch),e.rotateZ(u,u,this.angle);var c=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),h=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;c[8]=2*-i.x/this.width,c[9]=2*(i.y+h)/this.height,this.skyboxMatrix=e.multiply$1(u,c,u);var p=this.point,f=p.x,m=p.y,y=this.width%2/2,v=this.height%2/2,g=Math.cos(this.angle),_=Math.sin(this.angle),b=f-Math.round(f)+g*y+_*v,x=m-Math.round(m)+g*v+_*y,w=new Float64Array(o);if(e.translate(w,w,[b>.5?b-1:b,x>.5?x-1:x,0]),this.alignedProjMatrix=w,o=e.create(),e.scale(o,o,[this.width/2,-this.height/2,1]),e.translate(o,o,[1,-1,0]),this.labelPlaneMatrix=o,o=e.create(),e.scale(o,o,[1,-1,1]),e.translate(o,o,[-1,-1,0]),e.scale(o,o,[2/this.width,2/this.height,1]),this.glCoordMatrix=o,this.pixelMatrix=e.multiply$1(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},!(o=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=o,this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}}},{key:"_calcFogMatrices",value:function(){this._fogTileMatrixCache={};var t=this.cameraWorldSize,i=this.cameraPixelsPerMeter,n=this._camera.position,r=1/this.height,a=[t,t,i];e.scale$2(a,a,r),e.scale$2(n,n,-1),e.multiply$2(n,n,a);var o=e.create();e.translate(o,o,n),e.scale(o,o,a),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,i,r)}},{key:"_computeCameraPosition",value:function(e){var t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,i=this._camera.forward(),n=this.point,r=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[n.x/this.worldSize-i[0]*r,n.y/this.worldSize-i[1]*r,e/this.worldSize*this._centerAltitude-i[2]*r]}},{key:"_updateCameraState",value:function(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}},{key:"_translateCameraConstrained",value:function(t){var i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=t[2],r=1;n>0&&(r=Math.min((i-this._camera.position[2])/n,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,r),this._updateStateFromCamera()}},{key:"_updateStateFromCamera",value:function(){var t=this._camera.position,i=this._camera.forward(),n=this._camera.getPitchBearing(),r=n.pitch,a=n.bearing,o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._projectionScaler,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),l=Math.max((t[2]-o)/Math.cos(r),s),u=this._zoomFromMercatorZ(l);e.scaleAndAdd(t,t,i,l),this._pitch=e.clamp(r,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(a,-Math.PI,Math.PI),this._setZoom(e.clamp(u,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(e){return Math.pow(2,e)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}},{key:"_minimumHeightOverTerrain",value:function(){var e=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}},{key:"_zoomFromMercatorZ",value:function(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}},{key:"_terrainEnabled",value:function(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator to enable terrain."),1))}},{key:"anyCornerOffEdge",value:function(t,i){var n=Math.min(t.x,i.x),r=Math.max(t.x,i.x),a=Math.min(t.y,i.y),o=Math.max(t.y,i.y);if(a<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;for(var s=[new e.pointGeometry(n,a),new e.pointGeometry(r,o),new e.pointGeometry(n,o),new e.pointGeometry(r,a)],l=this.renderWorldCopies?-3:0,u=this.renderWorldCopies?4:1,c=0,h=s;c<h.length;c++){var p=h[c],d=this.pointRayIntersection(p);if(d.t<0)return!0;var f=this.rayIntersectionCoordinate(d);if(f.x<l||f.y<0||f.x>u||f.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(t,i){var n=e.length(e.sub([],this._camera.position,t)),r=this._zoomFromMercatorZ(n)+i;return n-this._mercatorZfromZoom(r)}},{key:"getCameraPoint",value:function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}}]),t}();function Bn(e,t){var i=!1,n=null,r=function r(){n=null,i&&(e(),n=setTimeout(r,t),i=!1)};return function(){return i=!0,n||r(),n}}var Nn=function(){function t(i){y(this,t),this._hashName=i&&encodeURIComponent(i),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Bn(this._updateHashUnthrottled.bind(this),300)}return v(t,[{key:"addTo",value:function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}},{key:"getHashString",value:function(t){var i=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,r),o=Math.round(i.lng*a)/a,s=Math.round(i.lat*a)/a,l=this._map.getBearing(),u=this._map.getPitch(),c="";if(c+=t?"/".concat(o,"/").concat(s,"/").concat(n):"".concat(n,"/").concat(s,"/").concat(o),(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/".concat(Math.round(u))),this._hashName){var h=this._hashName,p=!1,d=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===h?(p=!0,"".concat(t,"=").concat(c)):e})).filter((function(e){return e}));return p||d.push("".concat(h,"=").concat(c)),"#".concat(d.join("&"))}return"#".concat(c)}},{key:"_getCurrentHash",value:function(){var t,i=this,n=e.window.location.hash.replace("#","");return this._hashName?(n.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===i._hashName&&(t=e)})),(t&&t[1]||"").split("/")):n.split("/")}},{key:"_onHashChange",value:function(){var e=this._getCurrentHash();if(e.length>=3&&!e.some((function(e){return isNaN(e)}))){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}]),t}(),Un={linearity:.3,easing:e.bezier(0,0,.3,1)},Wn=e.extend({deceleration:2500,maxSpeed:1400},Un),Gn=e.extend({deceleration:20,maxSpeed:1400},Un),Hn=e.extend({deceleration:1e3,maxSpeed:360},Un),Xn=e.extend({deceleration:1e3,maxSpeed:90},Un),Yn=function(){function t(e){y(this,t),this._map=e,this.clear()}return v(t,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertiaBuffer,i=e.exported.now();t.length>0&&i-t[0].time>160;)t.shift()}},{key:"_onMoveEnd",value:function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var i,n={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0},r=p(this._inertiaBuffer);try{for(r.s();!(i=r.n()).done;){var a=i.value.settings;n.zoom+=a.zoomDelta||0,n.bearing+=a.bearingDelta||0,n.pitch+=a.pitchDelta||0,a.panDelta&&n.pan._add(a.panDelta),a.around&&(n.around=a.around),a.pinchAround&&(n.pinchAround=a.pinchAround)}}catch(f){r.e(f)}finally{r.f()}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(n.pan.mag()){var l=Zn(n.pan.mag(),o,e.extend({},Wn,t||{}));s.offset=n.pan.mult(l.amount/n.pan.mag()),s.center=this._map.transform.center,qn(s,l)}if(n.zoom){var u=Zn(n.zoom,o,Gn);s.zoom=this._map.transform.zoom+u.amount,qn(s,u)}if(n.bearing){var c=Zn(n.bearing,o,Hn);s.bearing=this._map.transform.bearing+e.clamp(c.amount,-179,179),qn(s,c)}if(n.pitch){var h=Zn(n.pitch,o,Xn);s.pitch=this._map.transform.pitch+h.amount,qn(s,h)}if(s.zoom||s.bearing){var d=void 0===n.pinchAround?n.around:n.pinchAround;s.around=d?this._map.unproject(d):this._map.getCenter()}return this.clear(),e.extend(s,{noMoveStart:!0})}}}]),t}();function qn(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Zn(t,i,n){var r=n.maxSpeed,a=n.linearity,o=n.deceleration,s=e.clamp(t*a/(i/1e3),-r,r),l=Math.abs(s)/(o*a);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}var Kn=function(t){f(n,t);var i=m(n);function n(t,r,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};y(this,n);var l=b.mousePos(r.getCanvasContainer(),a),u=r.unproject(l);return(o=i.call(this,t,e.extend({point:l,lngLat:u,originalEvent:a},s)))._defaultPrevented=!1,o.target=r,o}return v(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(e.Event),$n=function(t){f(n,t);var i=m(n);function n(t,r,a){var o;y(this,n);var s="touchend"===t?a.changedTouches:a.touches,l=b.touchPos(r.getCanvasContainer(),s),u=l.map((function(e){return r.unproject(e)})),c=l.reduce((function(e,t,i,n){return e.add(t.div(n.length))}),new e.pointGeometry(0,0));return(o=i.call(this,t,{points:l,point:c,lngLats:u,lngLat:r.unproject(c),originalEvent:a}))._defaultPrevented=!1,o}return v(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(e.Event),Jn=function(e){f(i,e);var t=m(i);function i(e,n,r){var a;return y(this,i),(a=t.call(this,e,{originalEvent:r}))._defaultPrevented=!1,a}return v(i,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),i}(e.Event),Qn=function(){function t(e,i){y(this,t),this._map=e,this._clickTolerance=i.clickTolerance}return v(t,[{key:"reset",value:function(){delete this._mousedownPos}},{key:"wheel",value:function(e){return this._firePreventable(new Jn(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new Kn(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new Kn(e.type,this._map,e))}},{key:"preclick",value:function(t){var i=e.extend({},t);i.type="preclick",this._map.fire(new Kn(i.type,this._map,i))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new Kn(e.type,this._map,e)))}},{key:"dblclick",value:function(e){return this._firePreventable(new Kn(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new Kn(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new Kn(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new $n(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new $n(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new $n(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new $n(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),er=function(){function e(t){y(this,e),this._map=t}return v(e,[{key:"reset",value:function(){this._delayContextMenu=!1,delete this._contextMenuEvent}},{key:"mousemove",value:function(e){this._map.fire(new Kn(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Kn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Kn(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),tr=function(){function t(e,i){y(this,t),this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=i.clickTolerance||1}return v(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(b.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){var i=this;if(this._active){var n=t;if(!(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=n,this._box||(this._box=b.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var a=Math.min(r.x,n.x),o=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);this._map._requestDomTask((function(){i._box&&(i._box.style.transform="translate(".concat(a,"px,").concat(s,"px)"),i._box.style.width=o-a+"px",i._box.style.height=l-s+"px")}))}}}},{key:"mouseupWindow",value:function(t,i){var n=this;if(this._active&&0===t.button){var r=this._startPos,a=i;if(this.reset(),b.suppressClick(),r.x!==a.x||r.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(r,a,n._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",t)}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(t,i){return this._map.fire(new e.Event(t,{originalEvent:i}))}}]),t}();function ir(e,t){for(var i={},n=0;n<e.length;n++)i[e[n].identifier]=t[n];return i}var nr=function(){function t(e){y(this,t),this.reset(),this.numTouches=e.numTouches}return v(t,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(t,i,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),n.length===this.numTouches&&(this.centroid=function(t){var i,n=new e.pointGeometry(0,0),r=p(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;n._add(a)}}catch(o){r.e(o)}finally{r.f()}return n.div(t.length)}(i),this.touches=ir(n,i)))}},{key:"touchmove",value:function(e,t,i){if(!this.aborted&&this.centroid){var n=ir(i,t);for(var r in this.touches){var a=this.touches[r],o=n[r];(!o||o.dist(a)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var n=!this.aborted&&this.centroid;if(this.reset(),n)return n}}}]),t}(),rr=function(){function e(t){y(this,e),this.singleTap=new nr(t),this.numTaps=t.numTaps,this.reset()}return v(e,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,i){this.singleTap.touchstart(e,t,i)}},{key:"touchmove",value:function(e,t,i){this.singleTap.touchmove(e,t,i)}},{key:"touchend",value:function(e,t,i){var n=this.singleTap.touchend(e,t,i);if(n){var r=e.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(n)<30;if(r&&a||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}]),e}(),ar=function(){function e(){y(this,e),this._zoomIn=new rr({numTouches:1,numTaps:2}),this._zoomOut=new rr({numTouches:2,numTaps:1}),this.reset()}return v(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i)}},{key:"touchmove",value:function(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i)}},{key:"touchend",value:function(e,t,i){var n=this,r=this._zoomIn.touchend(e,t,i),a=this._zoomOut.touchend(e,t,i);return r?(this._active=!0,e.preventDefault(),setTimeout((function(){return n.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}}):a?(this._active=!0,e.preventDefault(),setTimeout((function(){return n.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),or={0:1,2:2},sr=function(){function e(t){y(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return v(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var i=b.mouseButton(e);this._correctButton(e,i)&&(this._lastPoint=t,this._eventButton=i)}}},{key:"mousemoveWindow",value:function(e,t){var i=this._lastPoint;if(i)if(e.preventDefault(),function(e,t){var i=or[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&b.mouseButton(e)===this._eventButton&&(this._moved&&b.suppressClick(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),lr=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"mousedown",value:function(e,t){o(s(i.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),i}(sr),ur=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var i=.8*(t.x-e.x);if(i)return this._active=!0,{bearingDelta:i}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),i}(sr),cr=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var i=-.5*(t.y-e.y);if(i)return this._active=!0,{pitchDelta:i}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),i}(sr),hr=function(){function t(i,n){y(this,t),this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}return v(t,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}},{key:"touchstart",value:function(e,t,i){return this._calculateTransform(e,t,i)}},{key:"touchmove",value:function(e,t,i){if(this._active&&!(i.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===i.length)return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return e.preventDefault(),this._calculateTransform(e,t,i)}}},{key:"touchend",value:function(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(t,i,n){n.length>0&&(this._active=!0);var r=ir(n,i),a=new e.pointGeometry(0,0),o=new e.pointGeometry(0,0),s=0;for(var l in r){var u=r[l],c=this._touches[l];c&&(a._add(u),o._add(u.sub(c)),s++,r[l]=u)}if(this._touches=r,!(s<this._minTouches)&&o.mag()){var h=o.div(s);return this._sum._add(h),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:h}}}},{key:"enable",value:function(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}},{key:"disable",value:function(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"_addTouchPanBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=b.create("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showTouchPanBlockerAlert",value:function(){var e=this;"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")}),500)}}]),t}(),pr=function(){function e(){y(this,e),this.reset()}return v(e,[{key:"reset",value:function(){this._active=!1,delete this._firstTwoTouches}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,i){return{}}},{key:"touchstart",value:function(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,i){if(this._firstTwoTouches){e.preventDefault();var n=h(this._firstTwoTouches,2),r=n[0],a=n[1],o=dr(i,t,r),s=dr(i,t,a);if(o&&s){var l=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],l,e)}}}},{key:"touchend",value:function(e,t,i){if(this._firstTwoTouches){var n=h(this._firstTwoTouches,2),r=n[0],a=n[1],o=dr(i,t,r),s=dr(i,t,a);o&&s||(this._active&&b.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function dr(e,t,i){for(var n=0;n<e.length;n++)if(e[n].identifier===i)return t[n]}function fr(e,t){return Math.log(e/t)/Math.LN2}var mr=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"reset",value:function(){o(s(i.prototype),"reset",this).call(this),delete this._distance,delete this._startDistance}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(fr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:fr(this._distance,i),pinchAround:t}}}]),i}(pr);function yr(e,t){return 180*e.angleWith(t)/Math.PI}var vr=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i,[{key:"reset",value:function(){o(s(i.prototype),"reset",this).call(this),delete this._minDiameter,delete this._startVector,delete this._vector}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:yr(this._vector,i),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,i=yr(e,this._startVector);return Math.abs(i)<t}}]),i}(pr);function gr(e){return Math.abs(e.y)>Math.abs(e.x)}var _r=function(e){f(i,e);var t=m(i);function i(e){var n;return y(this,i),(n=t.call(this))._map=e,n}return v(i,[{key:"reset",value:function(){o(s(i.prototype),"reset",this).call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints}},{key:"_start",value:function(e){this._lastPoints=e,gr(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(e,t,i){var n=e[0].sub(this._lastPoints[0]),r=e[1].sub(this._lastPoints[1]);if(!(this._map._cooperativeGestures&&i.touches.length<3)&&(this._valid=this.gestureBeginsVertically(n,r,i.timeStamp),this._valid))return this._lastPoints=e,this._active=!0,{pitchDelta:(n.y+r.y)/2*-.5}}},{key:"gestureBeginsVertically",value:function(e,t,i){if(void 0!==this._valid)return this._valid;var n=e.mag()>=2,r=t.mag()>=2;if(n||r){if(!n||!r)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var a=e.y>0==t.y>0;return gr(e)&&gr(t)&&a}}}]),i}(pr),br={panStep:100,bearingStep:15,pitchStep:10},xr=function(){function e(){y(this,e);var t=br;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return v(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var i=0,n=0,r=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:wr,zoom:i?Math.round(l)+i*(e.shiftKey?2:1):l,bearing:s.getBearing()+n*t._bearingStep,pitch:s.getPitch()+r*t._pitchStep,offset:[-a*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function wr(e){return e*(2-e)}var kr=4.000244140625,Pr=function(){function t(i,n){y(this,t),this._map=i,this._el=i.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}return v(t,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}},{key:"wheel",value:function(t){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}var i=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,n=e.exported.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==i&&i%kr==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),t.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=t,this._delta-=i,this._active||this._start(t)),t.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var t=b.mousePos(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform,n=function(){return i._terrainEnabled()&&t._aroundCoord?i.computeZoomRelativeTo(t._aroundCoord):i.zoom};if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>kr?this._wheelZoomRate:this._defaultZoomRate,a=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==a&&(a=1/a);var o=n(),s=Math.pow(2,o),l="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(l*a))),"wheel"===this._type&&(this._startZoom=n(),this._easing=this._smoothOutEasing(200)),this._delta=0}var u,c="number"==typeof this._targetZoom?this._targetZoom:n(),h=this._startZoom,p=this._easing,d=!1;if("wheel"===this._type&&h&&p){var f=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),m=p(f);u=e.number(h,c,m),f<1?this._frameId||(this._frameId=!0):d=!0}else u=c,d=!0;return this._active=!0,d&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!d,zoomDelta:u-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(t){var i=e.ease;if(this._prevEase){var n=this._prevEase,r=(e.exported.now()-n.start)/n.duration,a=n.easing(r+.01)-n.easing(r),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);i=e.bezier(o,s,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:i},i}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"_addScrollZoomBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=b.create("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_isFullscreen",value:function(){return!!e.window.document.fullscreenElement}},{key:"_showBlockerAlert",value:function(){var e=this;"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")}),200)}}]),t}(),Sr=function(){function e(t,i){y(this,e),this._clickZoom=t,this._tapZoom=i}return v(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),Tr=function(){function e(){y(this,e),this.reset()}return v(e,[{key:"reset",value:function(){this._active=!1}},{key:"blur",value:function(){this.reset()}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(e.shiftKey?-1:1),around:i.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Cr=function(){function e(){y(this,e),this._tap=new rr({numTouches:1,numTaps:1}),this.reset()}return v(e,[{key:"reset",value:function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}},{key:"touchstart",value:function(e,t,i){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i))}},{key:"touchmove",value:function(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var n=t[0],r=n.y-this._swipePoint.y;return this._swipePoint=n,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(e,t,i)}},{key:"touchend",value:function(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Or=function(){function e(t,i,n){y(this,e),this._el=t,this._mousePan=i,this._touchPan=n}return v(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),Ir=function(){function e(t,i,n){y(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=i,this._mousePitch=n}return v(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),Er=function(){function e(t,i,n,r){y(this,e),this._el=t,this._touchZoom=i,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}return v(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),Ar=function(e){return e.zoom||e.drag||e.pitch||e.rotate},Mr=function(e){f(i,e);var t=m(i);function i(){return y(this,i),t.apply(this,arguments)}return v(i)}(e.Event),Dr=function(){function t(){y(this,t),this.constants=[1,1,.01],this.radius=0}return v(t,[{key:"setup",value:function(t,i){var n=e.sub([],i,t);this.radius=e.length(n[2]<0?e.div([],n,this.constants):[n[0],n[1],0])}},{key:"projectRay",value:function(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);var i=e.scale$2([],t,this.radius);if(i[2]>0){var n=e.scale$2([],[0,0,1],e.dot(i,[0,0,1])),r=e.scale$2([],e.normalize([],[i[0],i[1],0]),this.radius),a=e.add([],i,e.scale$2([],e.sub([],e.add([],r,n),i),2));i[0]=a[0],i[1]=a[1]}return i}}]),t}();function jr(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var Fr=function(){function t(i,n){y(this,t),this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yn(i),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Dr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[e.window,"blur",void 0]];var a,o=p(this._listeners);try{for(o.s();!(a=o.n()).done;){var s=h(a.value,3),l=s[0],u=s[1],c=s[2];l.addEventListener(u,l===e.window.document?this.handleWindowEvent:this.handleEvent,c)}}catch(d){o.e(d)}finally{o.f()}}return v(t,[{key:"destroy",value:function(){var t,i=p(this._listeners);try{for(i.s();!(t=i.n()).done;){var n=h(t.value,3),r=n[0],a=n[1],o=n[2];r.removeEventListener(a,r===e.window.document?this.handleWindowEvent:this.handleEvent,o)}}catch(s){i.e(s)}finally{i.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,i=t.getCanvasContainer();this._add("mapEvent",new Qn(t,e));var n=t.boxZoom=new tr(t,e);this._add("boxZoom",n);var r=new ar,a=new Tr;t.doubleClickZoom=new Sr(a,r),this._add("tapZoom",r),this._add("clickZoom",a);var o=new Cr;this._add("tapDragZoom",o);var s=t.touchPitch=new _r(t);this._add("touchPitch",s);var l=new ur(e),u=new cr(e);t.dragRotate=new Ir(e,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new lr(e),h=new hr(t,e);t.dragPan=new Or(i,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var p=new vr,d=new mr;t.touchZoomRotate=new Er(i,d,p,o),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),this._add("blockableMapEvent",new er(t));var f=t.scrollZoom=new Pr(t,this);this._add("scrollZoom",f,["mousePan"]);var m=t.keyboard=new xr;this._add("keyboard",m);for(var y=0,v=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];y<v.length;y++){var g=v[y];e.interactive&&e[g]&&t[g].enable(e[g])}}},{key:"_add",value:function(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,i=p(this._handlers);try{for(i.s();!(t=i.n()).done;)t.value.handler.reset()}catch(n){i.e(n)}finally{i.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=p(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(i){t.e(i)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(Ar(this._eventsInProgress))||this.isZooming()}},{key:"_blockedByActive",value:function(e,t,i){for(var n in e)if(n!==i&&(!t||t.indexOf(n)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,i=[],n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._el.contains(r.target)&&i.push(r)}}catch(a){n.e(a)}finally{n.f()}return i}},{key:"handleEvent",value:function(e,t){this._updatingCamera=!0;var i,n="renderFrame"===e.type,r=n?void 0:e,a={needsRenderFrame:!1},o={},s={},l=e.touches?this._getMapTouches(e.touches):void 0,u=l?b.touchPos(this._el,l):n?void 0:b.mousePos(this._el,e),c=p(this._handlers);try{for(c.s();!(i=c.n()).done;){var h=i.value,d=h.handlerName,f=h.handler,m=h.allowed;if(f.isEnabled()){var y=void 0;this._blockedByActive(s,m,d)?f.reset():f[t||e.type]&&(y=f[t||e.type](e,u,l),this.mergeHandlerResult(a,o,y,d,r),y&&y.needsRenderFrame&&this._triggerRenderFrame()),(y||f.isActive())&&(s[d]=f)}}}catch(x){c.e(x)}finally{c.f()}var v={};for(var g in this._previousActiveHandlers)s[g]||(v[g]=r);this._previousActiveHandlers=s,(Object.keys(v).length||jr(a))&&(this._changes.push([a,o,v]),this._triggerRenderFrame()),(Object.keys(s).length||jr(a))&&this._map._stop(!0),this._updatingCamera=!1;var _=a.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}},{key:"mergeHandlerResult",value:function(t,i,n,r,a){if(n){e.extend(t,n);var o={handlerName:r,originalEvent:n.originalEvent||a};void 0!==n.zoomDelta&&(i.zoom=o),void 0!==n.panDelta&&(i.drag=o),void 0!==n.pitchDelta&&(i.pitch=o),void 0!==n.bearingDelta&&(i.rotate=o)}}},{key:"_applyChanges",value:function(){var t,i={},n={},r={},a=p(this._changes);try{for(a.s();!(t=a.n()).done;){var o=h(t.value,3),s=o[0],l=o[1],u=o[2];s.panDelta&&(i.panDelta=(i.panDelta||new e.pointGeometry(0,0))._add(s.panDelta)),s.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(i.around=s.around),void 0!==s.aroundCoord&&(i.aroundCoord=s.aroundCoord),void 0!==s.pinchAround&&(i.pinchAround=s.pinchAround),s.noInertia&&(i.noInertia=s.noInertia),e.extend(n,l),e.extend(r,u)}}catch(c){a.e(c)}finally{a.f()}this._updateMapTransform(i,n,r),this._changes=[]}},{key:"_updateMapTransform",value:function(t,i,n){var r=this,a=this._map,o=a.transform,s=function(e){return[e.x,e.y,e.z]};if(function(e){var t=r._eventsInProgress.drag;return t&&!r._handlersById[t.handlerName].isActive()}()&&!jr(t)){var l=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",l!==o.zoom&&this._map._update(!0)}if(!jr(t))return this._fireEvents(i,n,!0);var u=t.panDelta,c=t.zoomDelta,h=t.bearingDelta,p=t.pitchDelta,d=t.around,f=t.aroundCoord,m=t.pinchAround;void 0!==m&&(d=m),i.drag&&!r._eventsInProgress.drag&&d&&(this._dragOrigin=s(o.pointCoordinate3D(d)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",a._stop(!0),d=d||a.transform.centerPoint,h&&(o.bearing+=h),p&&(o.pitch+=p),o._updateCameraState();var y=[0,0,0];if(u){var v=o.pointCoordinate(d),g=o.pointCoordinate(d.sub(u));v&&g&&(y[0]=g.x-v.x,y[1]=g.y-v.y)}var _=o.zoom,b=[0,0,0];if(c){var x=s(f||o.pointCoordinate3D(d)),w={dir:e.normalize([],e.sub([],x,o._camera.position))};if(w.dir[2]<0){var k=o.zoomDeltaToMovement(x,c);e.scale$2(b,w.dir,k)}}var P=e.add(y,y,b);o._translateCameraConstrained(P),c&&Math.abs(o.zoom-_)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(i,n,!0)}},{key:"_fireEvents",value:function(t,i,n){var r=this,a=Ar(this._eventsInProgress),o=Ar(t),s={};for(var l in t){var u=t[l].originalEvent;this._eventsInProgress[l]||(s["".concat(l,"start")]=u),this._eventsInProgress[l]=t[l]}for(var c in!a&&o&&this._fireEvent("movestart",o.originalEvent),s)this._fireEvent(c,s[c]);for(var h in o&&this._fireEvent("move",o.originalEvent),t){var p=t[h].originalEvent;this._fireEvent(h,p)}var d,f={};for(var m in this._eventsInProgress){var y=this._eventsInProgress[m],v=y.handlerName,g=y.originalEvent;this._handlersById[v].isActive()||(delete this._eventsInProgress[m],d=i[v]||g,f["".concat(m,"end")]=d)}for(var _ in f)this._fireEvent(_,f[_]);var b=Ar(this._eventsInProgress);if(n&&(a||o)&&!b){this._updatingCamera=!0;var x=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),w=function(e){return 0!==e&&-r._bearingSnap<e&&e<r._bearingSnap};x?(w(x.bearing||this._map.getBearing())&&(x.bearing=0),this._map.easeTo(x,{originalEvent:d})):(this._map.fire(new e.Event("moveend",{originalEvent:d})),w(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(t,i){this._map.fire(new e.Event(t,i?{originalEvent:i}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){delete e._frameId,e.handleEvent(new Mr("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),t}(),Lr="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.",Rr=function(t){f(n,t);var i=m(n);function n(t,a){var o;return y(this,n),(o=i.call(this))._moving=!1,o._zooming=!1,o.transform=t,o._bearingSnap=a.bearingSnap,e.bindAll(["_renderFrameCallback"],r(o)),o}return v(n,[{key:"getCenter",value:function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(t,i,n){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},i),n)}},{key:"panTo",value:function(t,i,n){return this.easeTo(e.extend({center:t},i),n)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(t,i,n){return this.easeTo(e.extend({zoom:t},i),n)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(t,i,n){return this.easeTo(e.extend({bearing:t},i),n)}},{key:"resetNorth",value:function(t,i){return this.rotateTo(0,e.extend({duration:1e3},t),i),this}},{key:"resetNorthPitch",value:function(t,i){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),i),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(t,i){t=e.LngLatBounds.convert(t);var n=i&&i.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),n,i)}},{key:"_extendCameraOptions",value:function(t){var i={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){var n=t.padding;t.padding={top:n,bottom:n,right:n,left:n}}return t.padding=e.extend(i,t.padding),t}},{key:"_cameraForBoxAndBearing",value:function(t,i,n,r){var a=this._extendCameraOptions(r),o=this.transform,s=o.padding,l=o.project(e.LngLat.convert(t)),u=o.project(e.LngLat.convert(i)),c=l.rotate(-e.degToRad(n)),h=u.rotate(-e.degToRad(n)),p=new e.pointGeometry(Math.max(c.x,h.x),Math.max(c.y,h.y)),d=new e.pointGeometry(Math.min(c.x,h.x),Math.min(c.y,h.y)),f=p.sub(d),m=(o.width-(s.left+s.right+a.padding.left+a.padding.right))/f.x,y=(o.height-(s.top+s.bottom+a.padding.top+a.padding.bottom))/f.y;if(!(y<0||m<0)){var v=Math.min(o.scaleZoom(o.scale*Math.min(m,y)),a.maxZoom),g="number"==typeof a.offset.x?new e.pointGeometry(a.offset.x,a.offset.y):e.pointGeometry.convert(a.offset),_=new e.pointGeometry((a.padding.left-a.padding.right)/2,(a.padding.top-a.padding.bottom)/2).rotate(n*Math.PI/180),b=g.add(_).mult(o.scale/o.zoomScale(v));return{center:o.unproject(l.add(u).div(2).sub(b)),zoom:v,bearing:n}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"_cameraForBox",value:function(t,i,n,r,a){var o=this._extendCameraOptions(a);n=n||0,r=r||0,t=e.LngLat.convert(t),i=e.LngLat.convert(i);var s=this.transform.clone();s.padding=o.padding;var l=this.getFreeCameraOptions(),u=new e.LngLat(.5*(t.lng+i.lng),.5*(t.lat+i.lat)),c=.5*(n+r);if(!(s._camera.position[2]<e.mercatorZfromAltitude(c,u.lat))){l.lookAtPoint(u),s.setFreeCameraOptions(l);var h,p,d=e.MercatorCoordinate.fromLngLat(t),f=e.MercatorCoordinate.fromLngLat(i),m=s.pointRayIntersection(s.centerPoint,c),y=[(h=s.rayIntersectionCoordinate(m)).x,h.y,h.z],v=s.screenPointToMercatorRay(s.centerPoint),g="globe"!==s.projection.name,_=0;do{var b=Math.floor(s.zoom),x=1<<b,w=Math.min(x*d.x,x*f.x),k=Math.min(x*d.y,x*f.y),P=Math.max(x*d.x,x*f.x),S=Math.max(x*d.y,x*f.y),T=new e.Aabb([w,k,n],[P,S,r]),C=e.Frustum.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,b,g);if(2!==T.intersects(C)){p&&(s._camera.position=e.scaleAndAdd([],s._camera.position,v.dir,-p),s._updateStateFromCamera());break}var O=e.sub([],s._camera.position,y);p=.5*e.length(O),s._camera.position=e.scaleAndAdd([],s._camera.position,v.dir,p);try{s._updateStateFromCamera()}catch(t){return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++_<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"fitBounds",value:function(e,t,i){return this._fitInternal(this.cameraForBounds(e,t),t,i)}},{key:"_raycastElevationBox",value:function(t,i){var n=this.transform.elevation;if(n){var r=new e.pointGeometry(t.x,i.y),a=new e.pointGeometry(i.x,t.y),o=n.pointCoordinate(t);if(o){var s=n.pointCoordinate(i);if(s){var l=n.pointCoordinate(r);if(l){var u=n.pointCoordinate(a);if(u){var c=new e.MercatorCoordinate(o[0],o[1]).toLngLat(),h=new e.MercatorCoordinate(s[0],s[1]).toLngLat(),p=new e.MercatorCoordinate(l[0],l[1]).toLngLat(),d=new e.MercatorCoordinate(u[0],u[1]).toLngLat(),f=Math.min(c.lng,Math.min(h.lng,Math.min(p.lng,d.lng))),m=Math.min(c.lat,Math.min(h.lat,Math.min(p.lat,d.lat))),y=Math.max(c.lng,Math.max(h.lng,Math.max(p.lng,d.lng))),v=Math.max(c.lat,Math.max(h.lat,Math.max(p.lat,d.lat))),g=Math.min(o[3],Math.min(s[3],Math.min(l[3],u[3]))),_=Math.max(o[3],Math.max(s[3],Math.max(l[3],u[3])));return{minLngLat:new e.LngLat(f,m),maxLngLat:new e.LngLat(y,v),minAltitude:g,maxAltitude:_}}}}}}}},{key:"fitScreenCoordinates",value:function(t,i,n,r,a){var o,s,l,u,c=e.pointGeometry.convert(t),h=e.pointGeometry.convert(i),p=this._raycastElevationBox(c,h);if(p)o=p.minLngLat,s=p.maxLngLat,l=p.minAltitude,u=p.maxAltitude;else{if(this.transform.anyCornerOffEdge(c,h))return this;o=this.transform.pointLocation(c),s=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(e.pointGeometry.convert(t)),this.transform.pointLocation(e.pointGeometry.convert(i)),n,r):this._cameraForBox(o,s,l,u,r),r,a)}},{key:"_fitInternal",value:function(t,i,n){return t?(delete(i=e.extend(t,i)).padding,i.linear?this.easeTo(i,n):this.flyTo(i,n)):this}},{key:"jumpTo",value:function(t,i){this.stop();var n=t.preloadOnly?this.transform.clone():this.transform,r=!1,a=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(r=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=e.LngLat.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(a=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),null==t.padding||n.isPaddingEqual(t.padding)||(n.padding=t.padding),t.preloadOnly?(this._preloadTiles(n),this):(this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),r&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),a&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),o&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i)))}},{key:"getFreeCameraOptions",value:function(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Lr),this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(t,i){var n=this.transform;if(n.projection.supportsFreeCamera){this.stop();var r=n.zoom,a=n.pitch,o=n.bearing;n.setFreeCameraOptions(t);var s=r!==n.zoom,l=a!==n.pitch,u=o!==n.bearing;return this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),s&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),u&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),l&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i)),this}e.warnOnce(Lr)}},{key:"easeTo",value:function(t,i){var n=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);var r=this.transform,a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l=this.getPadding(),u="zoom"in t?+t.zoom:a,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,h="pitch"in t?+t.pitch:s,p="padding"in t?t.padding:r.padding,d=e.pointGeometry.convert(t.offset),f=r.centerPoint.add(d),m="globe"===r.projection.name?r.pointCoordinate(f).toLngLat():r.pointLocation(f),y=e.LngLat.convert(t.center||m);this._normalizeCenter(y);var v,g,_=r.project(m),b=r.project(y).sub(_),x=r.zoomScale(u-a);t.around&&(v=e.LngLat.convert(t.around),g=r.locationPoint(v));var w=this._zooming||u!==a,k=this._rotating||o!==c,P=this._pitching||h!==s,S=!r.isPaddingEqual(p),T=function(r){return function(m){if(w&&(r.zoom=e.number(a,u,m)),k&&(r.bearing=e.number(o,c,m)),P&&(r.pitch=e.number(s,h,m)),S&&(r.interpolatePadding(l,p,m),f=r.centerPoint.add(d)),v)r.setLocationAtPoint(v,g);else{var y=r.zoomScale(r.zoom-a),T=u>a?Math.min(2,x):Math.max(.5,x),C=Math.pow(T,1-m),O=r.unproject(_.add(b.mult(m*C)).mult(y));r.setLocationAtPoint(r.renderWorldCopies?O.wrap():O,f)}return t.preloadOnly||n._fireMoveEvents(i),r}};if(t.preloadOnly){var C=this._emulate(T,t.duration,r);return this._preloadTiles(C),this}var O={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=w,this._rotating=k,this._pitching=P,this._padding=S,this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,O),this._ease(T(r),(function(e){r.recenterOnTerrain(),n._afterEase(i,e)}),t),this}},{key:"_prepareEase",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",i||n.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!n.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!n.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!n.pitching&&this.fire(new e.Event("pitchstart",t))}},{key:"_fireMoveEvents",value:function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}},{key:"_afterEase",value:function(t,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId,this.transform.cameraElevationReference="ground";var n=this._zooming,r=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new e.Event("zoomend",t)),r&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}}},{key:"flyTo",value:function(t,i){var n=this;if(!t.essential&&e.exported.prefersReducedMotion){var r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,i)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var a=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,a.minZoom,a.maxZoom):o,h="bearing"in t?this._normalizeBearing(t.bearing,s):s,p="pitch"in t?+t.pitch:l,d="padding"in t?t.padding:a.padding,f=a.zoomScale(c-o),m=e.pointGeometry.convert(t.offset),y=a.centerPoint.add(m),v=a.pointLocation(y),g=e.LngLat.convert(t.center||v);this._normalizeCenter(g);var _=a.project(v),b=a.project(g).sub(_),x=t.curve,w=Math.max(a.width,a.height),k=w/f,P=b.mag();if("minZoom"in t){var S=e.clamp(Math.min(t.minZoom,o,c),a.minZoom,a.maxZoom),T=w/a.zoomScale(S-o);x=Math.sqrt(T/P*2)}var C=x*x;function O(e){var t=(k*k-w*w+(e?-1:1)*C*C*P*P)/(2*(e?k:w)*C*P);return Math.log(Math.sqrt(t*t+1)-t)}function I(e){return(Math.exp(e)-Math.exp(-e))/2}function E(e){return(Math.exp(e)+Math.exp(-e))/2}var A=O(0),M=function(e){return E(A)/E(A+x*e)},D=function(e){return w*((E(A)*(I(t=A+x*e)/E(t))-I(A))/C)/P;var t},j=(O(1)-A)/x;if(Math.abs(P)<1e-6||!isFinite(j)){if(Math.abs(w-k)<1e-6)return this.easeTo(t,i);var F=k<w?-1:1;j=Math.abs(Math.log(k/w))/x,D=function(){return 0},M=function(e){return Math.exp(F*x*e)}}t.duration="duration"in t?+t.duration:1e3*j/("screenSpeed"in t?+t.screenSpeed/x:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);var L=s!==h,R=p!==l,z=!a.isPaddingEqual(d),V=function(r){return function(a){var f=a*j,v=1/M(f);r.zoom=1===a?c:o+r.scaleZoom(v),L&&(r.bearing=e.number(s,h,a)),R&&(r.pitch=e.number(l,p,a)),z&&(r.interpolatePadding(u,d,a),y=r.centerPoint.add(m));var x=1===a?g:r.unproject(_.add(b.mult(D(f))).mult(v));return r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,y),r._updateCenterElevation(),t.preloadOnly||n._fireMoveEvents(i),r}};if(t.preloadOnly){var B=this._emulate(V,t.duration,a);return this._preloadTiles(B),this}return this._zooming=!0,this._rotating=L,this._pitching=R,this._padding=z,this._prepareEase(i,!1),this._ease(V(a),(function(){return n._afterEase(i)}),t),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,t)}if(!e){var n=this.handlers;n&&n.stop(!1)}return this}},{key:"_ease",value:function(t,i,n){!1===n.animate||0===n.duration?(t(1),i()):(this._easeStart=e.exported.now(),this._easeOptions=n,this._onEaseFrame=t,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(t,i){t=e.wrap(t,-180,180);var n=Math.abs(t-i);return Math.abs(t-360-i)<n&&(t-=360),Math.abs(t+360-i)<n&&(t+=360),t}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.maxBounds){var i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0}}},{key:"_emulate",value:function(e,t,i){for(var n=Math.ceil(15*t/1e3),r=[],a=e(i.clone()),o=0;o<=n;o++){var s=a(o/n);r.push(s.clone())}return r}}]),n}(e.Evented),zr=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(this,t),this.options=i,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return v(t,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=b.create("button","mapboxgl-ctrl-attrib-button",this._container),b.create("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden",!0),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var i=this._map._getUIString("AttributionControl.".concat(t));e.setAttribute("aria-label",i),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",i)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}},{key:"_updateEditLink",value:function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var n=i.reduce((function(e,t,n){return t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(n<i.length-1?"&":"")),e}),"?");t.href="".concat(e.config.FEEDBACK_URL,"/").concat(n).concat(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var i=this._map.style._sourceCaches;for(var n in i){var r=i[n];if(r.used){var a=r.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length})),e=e.filter((function(t,i){for(var n=i+1;n<e.length;n++)if(e[n].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[].concat(c(this.options.customAttribution),c(e)):e.unshift(this.options.customAttribution));var o=e.join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),t}(),Vr=function(){function t(){y(this,t),e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)}return v(t,[{key:"onAdd",value:function(e){this._map=e,this._container=b.create("div","mapboxgl-ctrl");var t=b.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(!this._map.style)return!0;var e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(var t in e){var i=e[t].getSource();if(i.hasOwnProperty("mapbox_logo")&&!i.mapbox_logo)return!1}return!0}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}]),t}(),Br=function(){function e(){y(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return v(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,i=this._currentlyRunning,n=i?this._queue.concat(i):this._queue,r=p(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.id===e)return void(a.cancelled=!0)}}catch(o){r.e(o)}finally{r.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._currentlyRunning=this._queue;this._queue=[];var i,n=p(t);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(!r.cancelled&&(r.callback(e),this._cleared))break}}catch(a){n.e(a)}finally{n.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}();function Nr(t,i,n){if(t=new e.LngLat(t.lng,t.lat),i){var r=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),o=360*Math.ceil(Math.abs(t.lng-n.center.lng)/360),s=n.locationPoint(t).distSqr(i),l=i.x<0||i.y<0||i.x>n.width||i.y>n.height;n.locationPoint(r).distSqr(i)<s&&(l||Math.abs(r.lng-n.center.lng)<o)?t=r:n.locationPoint(a).distSqr(i)<s&&(l||Math.abs(a.lng-n.center.lng)<o)&&(t=a)}for(;Math.abs(t.lng-n.center.lng)>180;){var u=n.locationPoint(t);if(u.x>=0&&u.y>=0&&u.x<=n.width&&u.y<=n.height)break;t.lng>n.center.lng?t.lng-=360:t.lng+=360}return t}var Ur={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Wr=function(t){f(n,t);var i=m(n);function n(t,a){var o;if(y(this,n),o=i.call(this),(t instanceof e.window.HTMLElement||a)&&(t=e.extend({element:t},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],r(o)),o._anchor=t&&t.anchor||"center",o._color=t&&t.color||"#3FB1CE",o._scale=t&&t.scale||1,o._draggable=t&&t.draggable||!1,o._clickTolerance=t&&t.clickTolerance||0,o._isDragging=!1,o._state="inactive",o._rotation=t&&t.rotation||0,o._rotationAlignment=t&&t.rotationAlignment||"auto",o._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:o._rotationAlignment,o._updateMoving=function(){return o._update(!0)},t&&t.element)o._element=t.element,o._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{o._defaultMarker=!0,o._element=b.create("div");var s=41,u=27,c=b.createSVG("svg",{display:"block",height:s*o._scale+"px",width:u*o._scale+"px",viewBox:"0 0 ".concat(u," ").concat(s)},o._element),h=b.createSVG("radialGradient",{id:"shadowGradient"},b.createSVG("defs",{},c));b.createSVG("stop",{offset:"10%","stop-opacity":.4},h),b.createSVG("stop",{offset:"100%","stop-opacity":.05},h),b.createSVG("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c),b.createSVG("path",{fill:o._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),b.createSVG("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),b.createSVG("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),o._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}o._element.hasAttribute("aria-label")||o._element.setAttribute("aria-label","Map marker"),o._element.classList.add("mapboxgl-marker"),o._element.addEventListener("dragstart",(function(e){e.preventDefault()})),o._element.addEventListener("mousedown",(function(e){e.preventDefault()}));var p=o._element.classList;for(var d in Ur)p.remove("mapboxgl-marker-anchor-".concat(d));return p.add("mapboxgl-marker-anchor-".concat(o._anchor)),o._popup=null,l(o)}return v(n,[{key:"addTo",value:function(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick)),this}},{key:"remove",value:function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._updateMoving),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=38.1,i=13.5,n=Math.sqrt(Math.pow(i,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[n,-1*(t-i+n)],"bottom-right":[-n,-1*(t-i+n)],left:[i,-1*(t-i)],right:[-i,-1*(t-i)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,i=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==i&&13!==i||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}},{key:"_evaluateOpacity",value:function(){var e=this._pos?this._pos.sub(this._transformedOffset()):null;if(this._withinScreenBounds(e)){var t=this._map.unproject(e),i=!1;if(this._map.transform._terrainEnabled()&&this._map.getTerrain()){var n=this._map.getFreeCameraOptions();if(n.position){var r=n.position.toLngLat();i=r.distanceTo(t)<.9*r.distanceTo(this._lngLat)}}var a=(1-this._map._queryFogOpacity(t))*(i?.2:1);this._element.style.opacity="".concat(a),this._popup&&this._popup._setOpacity("".concat(a)),this._fadeTimer=null}else this._clearFadeTimer()}},{key:"_clearFadeTimer",value:function(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}},{key:"_withinScreenBounds",value:function(e){var t=this._map.transform;return!!e&&e.x>=0&&e.x<t.width&&e.y>=0&&e.y<t.height}},{key:"_updateDOM",value:function(){var t=this._pos||new e.pointGeometry(0,0),i=this._calculatePitch(),n=this._calculateRotation();this._element.style.transform="".concat(Ur[this._anchor]," translate(").concat(t.x,"px, ").concat(t.y,"px) rotateX(").concat(i,"deg) rotateZ(").concat(n,"deg)")}},{key:"_calculatePitch",value:function(){return"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?0:"map"===this._pitchAlignment?this._map.getPitch():0}},{key:"_calculateRotation",value:function(){return"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?this._rotation:"map"===this._rotationAlignment?this._rotation-this._map.getBearing():0}},{key:"_update",value:function(t){var i=this;e.window.cancelAnimationFrame(this._updateFrameId),this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Nr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),!0===t?this._updateFrameId=e.window.requestAnimationFrame((function(){i._element&&i._pos&&i._anchor&&(i._pos=i._pos.round(),i._updateDOM())})):this._pos=this._pos.round(),this._map._requestDomTask((function(){i._map&&(i._element&&i._pos&&i._anchor&&i._updateDOM(),!i._map.getTerrain()&&!i._map.getFog()||i._fadeTimer||(i._fadeTimer=setTimeout(i._evaluateOpacity.bind(i),60)))})))}},{key:"_transformedOffset",value:function(){if(!this._defaultMarker)return this._offset;var e=this._map.transform,t=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&t._rotate(e.angle),"map"===this._pitchAlignment&&(t.y*=Math.cos(e._pitch)),t}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}},{key:"_onMove",value:function(t){if(!this._isDragging){var i=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=i}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}},{key:"getPitchAlignment",value:function(){return this._pitchAlignment}}]),n}(e.Evented),Gr=function(){function t(e){y(this,t),this.jumpTo(e)}return v(t,[{key:"getValue",value:function(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;var i=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-i)+this._end*i}},{key:"isEasing",value:function(e){return e>=this._startTime&&e<=this._endTime}},{key:"jumpTo",value:function(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}},{key:"easeTo",value:function(e,t,i){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+i}}]),t}(),Hr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Xr=e.window,Yr=Xr.HTMLImageElement,qr=Xr.HTMLElement,Zr=Xr.ImageBitmap,Kr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function $r(e){e.parentNode&&e.parentNode.removeChild(e)}var Jr,Qr={showCompass:!0,showZoom:!0,visualizePitch:!1},ea=function(){function t(i,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];y(this,t),this._clickTolerance=10,this.element=n,this.mouseRotate=new ur({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,r&&(this.mousePitch=new cr({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}return v(t,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),b.disableDrag()}},{key:"move",value:function(e,t){var i=this.map,n=this.mouseRotate.mousemoveWindow(e,t);if(n&&n.bearingDelta&&i.setBearing(i.getBearing()+n.bearingDelta),this.mousePitch){var r=this.mousePitch.mousemoveWindow(e,t);r&&r.pitchDelta&&i.setPitch(i.getPitch()+r.pitchDelta)}}},{key:"off",value:function(){var e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){b.enableDrag(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}},{key:"mousedown",value:function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),b.mousePos(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,b.mousePos(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=b.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),t}(),ta={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},ia=0,na=!1,ra={maxWidth:100,unit:"metric"};function aa(e,t,i){var n=i&&i.maxWidth||100,r=e._containerHeight/2,a=e.unproject([0,r]),o=e.unproject([n,r]),s=a.distanceTo(o);if(i&&"imperial"===i.unit){var l=3.2808*s;l>5280?oa(t,n,l/5280,e._getUIString("ScaleControl.Miles"),e):oa(t,n,l,e._getUIString("ScaleControl.Feet"),e)}else i&&"nautical"===i.unit?oa(t,n,s/1852,e._getUIString("ScaleControl.NauticalMiles"),e):s>=1e3?oa(t,n,s/1e3,e._getUIString("ScaleControl.Kilometers"),e):oa(t,n,s,e._getUIString("ScaleControl.Meters"),e)}function oa(e,t,i,n,r){var a=function(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(i),t*i}(i),o=a/i;r._requestDomTask((function(){e.style.width=t*o+"px",e.innerHTML="".concat(a,"&nbsp;").concat(n)}))}var sa={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},la=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ua={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:function(i){f(c,i);var a=m(c);function c(t){var i;if(y(this,c),null!=(t=e.extend({},Kr,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if((i=a.call(this,new Vn(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t))._interactive=t.interactive,i._minTileCacheSize=t.minTileCacheSize,i._maxTileCacheSize=t.maxTileCacheSize,i._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,i._preserveDrawingBuffer=t.preserveDrawingBuffer,i._antialias=t.antialias,i._trackResize=t.trackResize,i._bearingSnap=t.bearingSnap,i._refreshExpiredTiles=t.refreshExpiredTiles,i._fadeDuration=t.fadeDuration,i._isInitialLoad=!0,i._crossSourceCollisions=t.crossSourceCollisions,i._crossFadingFactor=1,i._collectResourceTiming=t.collectResourceTiming,i._optimizeForTerrain=t.optimizeForTerrain,i._renderTaskQueue=new Br,i._domRenderTaskQueue=new Br,i._controls=[],i._markers=[],i._mapId=e.uniqueId(),i._locale=e.extend({},Hr,t.locale),i._clickTolerance=t.clickTolerance,i._cooperativeGestures=t.cooperativeGestures,i._containerWidth=0,i._containerHeight=0,i._averageElevationLastSampledAt=-1/0,i._averageElevation=new Gr(0),i._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),i._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(i._container=e.window.document.getElementById(t.container),!i._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof qr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");i._container=t.container}if(i._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&i.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],r(i)),i._setupContainer(),i._setupPainter(),void 0===i.painter)throw new Error("Failed to initialize WebGL.");return i.on("move",(function(){return i._update(!1)})),i.on("moveend",(function(){return i._update(!1)})),i.on("zoom",(function(){return i._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",i._onWindowOnline,!1),e.window.addEventListener("resize",i._onWindowResize,!1),e.window.addEventListener("orientationchange",i._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",i._onWindowResize,!1)),i.handlers=new Fr(r(i),t),i._localFontFamily=t.localFontFamily,i._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&i.setStyle(t.style,{localFontFamily:i._localFontFamily,localIdeographFontFamily:i._localIdeographFontFamily}),t.projection&&i.setProjection(t.projection),i._hash=t.hash&&new Nn("string"==typeof t.hash&&t.hash||void 0).addTo(r(i)),i._hash&&i._hash._onHashChange()||(i.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(i.resize(),i.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),i.resize(),t.attributionControl&&i.addControl(new zr({customAttribution:t.customAttribution})),i._logoControl=new Vr,i.addControl(i._logoControl,t.logoPosition),i.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),i.on("data",(function(t){i._update("style"===t.dataType),i.fire(new e.Event("".concat(t.dataType,"data"),t))})),i.on("dataloading",(function(t){i.fire(new e.Event("".concat(t.dataType,"dataloading"),t))})),l(i)}return v(c,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(t,i){if(void 0===i&&(i=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var n=t.onAdd(this);this._controls.push(t);var r=this._controlPositions[i];return-1!==i.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this}},{key:"removeControl",value:function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"resize",value:function(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));var i=!this._moving;return i&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),i&&this.fire(new e.Event("moveend",t)),this}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()||null}},{key:"setMaxBounds",value:function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}},{key:"setMinZoom",value:function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this._update()}},{key:"getProjection",value:function(){return this.transform.getProjection()}},{key:"setProjection",value:function(e){return this._lazyInitEmptyStyle(),"string"==typeof e&&(e={name:e}),this._runtimeProjection=e,this.style.updateProjection(),this._transitionFromGlobe=!1,this}},{key:"project",value:function(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()}},{key:"_createDelegatedListener",value:function(e,t,i){var r=this;if("mouseenter"===e||"mouseover"===e){var a=!1,o=function(n){var o=t.filter((function(e){return r.getLayer(e)})),s=o.length?r.queryRenderedFeatures(n.point,{layers:o}):[];s.length?a||(a=!0,i.call(r,new Kn(e,r,n.originalEvent,{features:s}))):a=!1},s=function(){a=!1};return{layers:new Set(t),listener:i,delegates:{mousemove:o,mouseout:s}}}if("mouseleave"===e||"mouseout"===e){var l=!1,u=function(n){var a=t.filter((function(e){return r.getLayer(e)}));(a.length?r.queryRenderedFeatures(n.point,{layers:a}):[]).length?l=!0:l&&(l=!1,i.call(r,new Kn(e,r,n.originalEvent)))},c=function(t){l&&(l=!1,i.call(r,new Kn(e,r,t.originalEvent)))};return{layers:new Set(t),listener:i,delegates:{mousemove:u,mouseout:c}}}var h=function(e){var n=t.filter((function(e){return r.getLayer(e)})),a=n.length?r.queryRenderedFeatures(e.point,{layers:n}):[];a.length&&(e.features=a,i.call(r,e),delete e.features)};return{layers:new Set(t),listener:i,delegates:n({},e,h)}}},{key:"on",value:function(e,t,i){if(void 0===i)return o(s(c.prototype),"on",this).call(this,e,t);Array.isArray(t)||(t=[t]);var n=this._createDelegatedListener(e,t,i);for(var r in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n),n.delegates)this.on(r,n.delegates[r]);return this}},{key:"once",value:function(e,t,i){if(void 0===i)return o(s(c.prototype),"once",this).call(this,e,t);Array.isArray(t)||(t=[t]);var n=this._createDelegatedListener(e,t,i);for(var r in n.delegates)this.once(r,n.delegates[r]);return this}},{key:"off",value:function(e,t,i){var n=this;if(void 0===i)return o(s(c.prototype),"off",this).call(this,e,t);t=new Set(Array.isArray(t)?t:[t]);var r=function(e,t){if(e.size!==t.size)return!1;var i,n=p(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(!t.has(r))return!1}}catch(a){n.e(a)}finally{n.f()}return!0},a=this._delegatedListeners?this._delegatedListeners[e]:void 0;return a&&function(e){for(var a=0;a<e.length;a++){var o=e[a];if(o.listener===i&&r(o.layers,t)){for(var s in o.delegates)n.off(s,o.delegates[s]);return e.splice(a,1),n}}}(a),this}},{key:"queryRenderedFeatures",value:function(t,i){return this.style?(void 0!==i||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(i=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"queryTerrainElevation",value:function(t,i){var n=this.transform.elevation;return n?(i=e.extend({},{exaggerated:!0},i),n.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,i.exaggerated)):null}},{key:"setStyle",value:function(t,i){return!1!==(i=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(t,i))}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),e&&(this.style=new Qt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new Qt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(t,i){var n=this;if("string"==typeof t){var r=this._requestManager.normalizeStyleURL(t),a=this._requestManager.transformRequest(r,e.ResourceType.Style);e.getJSON(a,(function(t,r){t?n.fire(new e.ErrorEvent(t)):r&&n._updateDiff(r,i)}))}else"object"==typeof t&&this._updateDiff(t,i)}},{key:"_updateDiff",value:function(t,i){try{this.style.setState(t)&&this._update(!0)}catch(u){e.warnOnce("Unable to perform style diff: ".concat(u.message||u.error||u,".  Rebuilding the style from scratch.")),this._updateStyle(t,i)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(t){var i=this.style&&this.style._getSourceCaches(t);if(0!==i.length)return i.every((function(e){return e.loaded()}));this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'"))))}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style._sourceCaches;for(var t in e){var i=e[t]._tiles;for(var n in i){var r=i[n];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.pixelRatio,a=void 0===r?1:r,o=n.sdf,s=void 0!==o&&o,l=n.stretchX,u=n.stretchY,c=n.content;if(this._lazyInitEmptyStyle(),i instanceof Yr||Zr&&i instanceof Zr){var h=e.exported.getImageData(i),p=h.width,d=h.height,f=h.data;this.style.addImage(t,{data:new e.RGBAImage({width:p,height:d},f),pixelRatio:a,stretchX:l,stretchY:u,content:c,sdf:s,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var m=i.width,y=i.height,v=i.data,g=i;this.style.addImage(t,{data:new e.RGBAImage({width:m,height:y},new Uint8Array(v)),pixelRatio:a,stretchX:l,stretchY:u,content:c,sdf:s,version:0,userImage:g}),g.onAdd&&g.onAdd(this,t)}}},{key:"updateImage",value:function(t,i){var n=this.style.getImage(t);if(!n)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=i instanceof Yr||Zr&&i instanceof Zr?e.exported.getImageData(i):i,a=r.width,o=r.height,s=r.data;return void 0===a||void 0===o?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):a!==n.data.width||o!==n.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(n.data.replace(s,!(i instanceof Yr||Zr&&i instanceof Zr)),void this.style.updateImage(t,n))}},{key:"hasImage",value:function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(t,i){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),(function(t,n){i(t,n instanceof Yr?e.exported.getImageData(n):n)}))}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)}},{key:"setFilter",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,i),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,i,n),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,i,n),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}},{key:"_updateProjection",value:function(){"globe"===this.transform.projection.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX&&!this._transitionFromGlobe&&(this.setProjection({name:"mercator"}),this._transitionFromGlobe=!0)}},{key:"getTerrain",value:function(){return this.style?this.style.getTerrain():null}},{key:"setFog",value:function(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}},{key:"getFog",value:function(){return this.style?this.style.getFog():null}},{key:"_queryFogOpacity",value:function(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"_updateContainerDimensions",value:function(){if(this._container){for(var t,i=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300,r=this._container;r&&!t;){var a=e.window.getComputedStyle(r).transform;a&&"none"!==a&&(t=a.match(/matrix.*\((.+)\)/)[1].split(", ")),r=r.parentElement}t?(this._containerWidth=t[0]&&"0"!==t[0]?Math.abs(i/t[0]):i,this._containerHeight=t[3]&&"0"!==t[3]?Math.abs(n/t[3]):n):(this._containerWidth=i,this._containerHeight=n)}}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=b.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=b.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=b.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);var i=this._controlContainer=b.create("div","mapboxgl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){n[e]=b.create("div","mapboxgl-ctrl-".concat(e),i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(t,i){var n=e.exported.devicePixelRatio||1;this._canvas.width=n*Math.ceil(t),this._canvas.height=n*Math.ceil(i),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(i,"px")}},{key:"_addMarker",value:function(e){this._markers.push(e)}},{key:"_removeMarker",value:function(e){var t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}},{key:"_setupPainter",value:function(){var i=this,n=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(e.storeAuthState(r,!0),this.painter=new Sn(r,this.transform),this.on("data",(function(e){"source"===e.dataType&&i.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}},{key:"_contextRestored",value:function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_requestDomTask",value:function(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}},{key:"_render",value:function(t){var i,n=this,r=this.painter.context.extTimerQuery,a=e.exported.now();this.listens("gpu-timing-frame")&&(i=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,i));var o=this._updateAverageElevation(a);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),!this._removed){this._updateProjection();var s=!1,l=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var u=this.transform.zoom,c=this.transform.pitch,h=e.exported.now();this.style.zoomHistory.update(u,h);var p=new e.EvaluationParameters(u,{now:h,fadeDuration:l,pitch:c,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),d=p.crossFadingFactor();1===d&&d===this._crossFadingFactor||(s=!0,this._crossFadingFactor=d),this.style.update(p)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform),this._forceMarkerUpdate()),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,l,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||s)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var f=e.exported.now()-a;r.endQueryEXT(r.TIME_ELAPSED_EXT,i),setTimeout((function(){var t=r.getQueryObjectEXT(i,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i),n.fire(new e.Event("gpu-timing-frame",{cpuTime:f,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var m=this.painter.collectGpuTimers();setTimeout((function(){var t=n.painter.queryGpuTimers(m);n.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}var y=this._sourcesDirty||this._styleDirty||this._placementDirty||o;if(y||this._repaint)this.triggerRepaint();else{var v=!this.isMoving()&&this.loaded();if(v&&(o=this._updateAverageElevation(a,!0)),o)this.triggerRepaint();else if(this._triggerFrame(!1),v&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){var g=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:g})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||y||(this._fullyLoaded=!0,this._authenticate()),this}}},{key:"_forceMarkerUpdate",value:function(){var e,t=p(this._markers);try{for(t.s();!(e=t.n()).done;)e.value._update()}catch(i){t.e(i)}finally{t.f()}}},{key:"_updateAverageElevation",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){return t.transform.averageElevation=e,t._update(!1),!0};if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((i||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){var r=this.transform.averageElevation,a=this.transform.sampleAverageElevation();isNaN(a)?a=0:this._averageElevationLastSampledAt=e;var o=Math.abs(r-a);if(o>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(a),n(a);this._averageElevation.easeTo(a,e,300)}else if(o>1e-4)return this._averageElevation.jumpTo(a),n(a)}return!!this._averageElevation.isEasing(e)&&n(this._averageElevation.getValue(e))}},{key:"_authenticate",value:function(){var t=this;e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(i){if(i&&(i.message===e.AUTH_ERR_MSG||401===i.status)){var n=t.painter.context.gl;e.storeAuthState(n,!1),t._logoControl instanceof Vr&&t._logoControl._updateLogo(),n&&n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT|n.STENCIL_BUFFER_BIT),t._silenceAuthErrors||t.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}},{key:"_calculateSpeedIndex",value:function(){var e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());var i=this.painter.context.gl,n=i.createFramebuffer();function r(e){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0);var t=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,t),t}return i.bindFramebuffer(i.FRAMEBUFFER,n),this._canvasPixelComparison(r(e),t.canvasCopies.map(r),t.timeStamps)}},{key:"_canvasPixelComparison",value:function(e,t,i){for(var n=i[1]-i[0],r=e.length/4,a=0;a<t.length;a++){for(var o=t[a],s=0,l=0;l<o.length;l+=4)o[l]===e[l]&&o[l+1]===e[l+1]&&o[l+2]===e[l+2]&&o[l+3]===e[l+3]&&(s+=1);n+=(i[a+2]-i[a+1])*(1-s/r)}return n}},{key:"remove",value:function(){this._hash&&this._hash.remove();var t,i=p(this._controls);try{for(i.s();!(t=i.n()).done;)t.value.onRemove(this)}catch(r){i.e(r)}finally{i.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),$r(this._canvasContainer),$r(this._controlContainer),$r(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(t){var i=this;this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((function(e){var t=!!i._renderNextFrame;i._frame=null,i._renderNextFrame=null,t&&i._render(e)})))}},{key:"_preloadTiles",value:function(t){var i=this,n=this.style&&Object.values(this.style._sourceCaches)||[];return e.asyncAll(n,(function(e,i){return e._preloadTiles(t,i)}),(function(){i.triggerRepaint()})),this}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"showTerrainWireframe",get:function(){return!!this._showTerrainWireframe},set:function(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"_setCacheLimits",value:function(t,i){e.setCacheLimits(t,i)}},{key:"version",get:function(){return e.version}}]),c}(Rr),NavigationControl:function(){function t(i){var n=this;y(this,t),this.options=e.extend({},Qr,i),this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){return n._map.zoomIn({},{originalEvent:e})})),b.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){return n._map.zoomOut({},{originalEvent:e})})),b.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){n.options.visualizePitch?n._map.resetNorthPitch({},{originalEvent:e}):n._map.resetNorth({},{originalEvent:e})})),this._compassIcon=b.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}return v(t,[{key:"_updateZoomButtons",value:function(){var e=this._map.getZoom(),t=e===this._map.getMaxZoom(),i=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}},{key:"_rotateCompassArrow",value:function(){var e=this,t=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(this._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(this._map.transform.angle*(180/Math.PI),"deg)");this._map._requestDomTask((function(){e._compassIcon&&(e._compassIcon.style.transform=t)}))}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ea(this._map,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){this._container.remove(),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}},{key:"_createButton",value:function(e,t){var i=b.create("button",e,this._container);return i.type="button",i.addEventListener("click",t),i}},{key:"_setButtonTitle",value:function(e,t){var i=this._map._getUIString("NavigationControl.".concat(t));e.setAttribute("aria-label",i),e.firstElementChild&&e.firstElementChild.setAttribute("title",i)}}]),t}(),GeolocateControl:function(t){f(n,t);var i=m(n);function n(t){var a;return y(this,n),(a=i.call(this)).options=e.extend({},ta,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],r(a)),a._onDeviceOrientationListener=a._onDeviceOrientation.bind(r(a)),a._updateMarkerRotationThrottled=Bn(a._updateMarkerRotation,20),a}return v(n,[{key:"onAdd",value:function(t){var i;return this._map=t,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,void 0!==Jr?i(Jr):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){Jr="denied"!==e.state,i(Jr)})):(Jr=!!e.window.navigator.geolocation,i(Jr)),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,ia=0,na=!1}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),i=e.coords;return t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}},{key:"_updateCamera",value:function(t){var i=new e.LngLat(t.coords.longitude,t.coords.latitude),n=t.coords.accuracy,r=this._map.getBearing(),a=e.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(n),a,{geolocateSource:!0})}},{key:"_updateMarker",value:function(t){if(t){var i=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var e=this._map._containerHeight/2,t=this._map.unproject([0,e]),i=this._map.unproject([100,e]),n=t.distanceTo(i)/100,r=Math.ceil(2*this._accuracy/n);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_updateMarkerRotation",value:function(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}},{key:"_onError",value:function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&na)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(t){var i=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=b.create("button","mapboxgl-ctrl-geolocate",this._container),b.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n)}else{var r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","mapboxgl-user-location"),this._dotElement.appendChild(b.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(b.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Wr({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=b.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Wr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==i._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(i._watchState="BACKGROUND",i._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),i._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),i.fire(new e.Event("trackuserlocationend")))}))}},{key:"_onDeviceOrientation",value:function(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}},{key:"trigger",value:function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ia--,na=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ia>1?(t={maximumAge:6e5,timeout:0},na=!0):(t=this.options.positionOptions,na=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_addDeviceOrientationListener",value:function(){var t=this,i=function(){e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",t._onDeviceOrientationListener)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e&&i()})).catch(console.error):i()}},{key:"_clearWatch",value:function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),n}(e.Evented),AttributionControl:zr,ScaleControl:function(){function t(i){y(this,t),this.options=e.extend({},ra,i),e.bindAll(["_onMove","setUnit"],this)}return v(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_onMove",value:function(){aa(this._map,this._container,this.options)}},{key:"onAdd",value:function(e){return this._map=e,this._container=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("move",this._onMove),this._map=void 0}},{key:"setUnit",value:function(e){this.options.unit=e,aa(this._map,this._container,this.options)}}]),t}(),FullscreenControl:function(){function t(i){y(this,t),this._fullscreen=!1,i&&i.container&&(i.container instanceof e.window.HTMLElement?this._container=i.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}return v(t,[{key:"onAdd",value:function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var t=this._fullscreenButton=b.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);b.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),t}(),Popup:function(t){f(n,t);var i=m(n);function n(t){var a;return y(this,n),(a=i.call(this)).options=e.extend(Object.create(sa),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],r(a)),a._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[]),a}return v(n,[{key:"addTo",value:function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("preclick",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){return this._content&&this._content.remove(),this._container&&(this._container.remove(),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(t){return this.setDOMContent(e.window.document.createTextNode(t))}},{key:"setHTML",value:function(t){var i,n=e.window.document.createDocumentFragment(),r=e.window.document.createElement("body");for(r.innerHTML=t;i=r.firstChild;)n.appendChild(i);return this.setDOMContent(n)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){return this._classList.add(e),this._container&&this._updateClassList(),this}},{key:"removeClassName",value:function(e){return this._classList.delete(e),this._container&&this._updateClassList(),this}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){var t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._container&&this._updateClassList(),t}},{key:"_createCloseButton",value:function(){this.options.closeButton&&(this._closeButton=b.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.setAttribute("aria-hidden","true"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}},{key:"_onMouseUp",value:function(e){this._update(e.point)}},{key:"_onMouseMove",value:function(e){this._update(e.point)}},{key:"_onDrag",value:function(e){this._update(e.point)}},{key:"_getAnchor",value:function(e){if(this.options.anchor)return this.options.anchor;var t,i=this._pos,n=this._container.offsetWidth,r=this._container.offsetHeight;return t=i.y+e.bottom.y<r?["top"]:i.y>this._map.transform.height-r?["bottom"]:[],i.x<n/2?t.push("left"):i.x>this._map.transform.width-n/2&&t.push("right"),0===t.length?"bottom":t.join("-")}},{key:"_updateClassList",value:function(){var e=c(this._classList);e.push("mapboxgl-popup"),this._anchor&&e.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&e.push("mapboxgl-popup-track-pointer"),this._container.className=e.join(" ")}},{key:"_update",value:function(t){var i=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content){if(this._container||(this._container=b.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=b.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Nr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t){var n=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),r=function(t){if(t||(t=new e.pointGeometry(0,0)),"number"==typeof t){var i=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new e.pointGeometry(0,0),top:new e.pointGeometry(0,t),"top-left":new e.pointGeometry(i,i),"top-right":new e.pointGeometry(-i,i),bottom:new e.pointGeometry(0,-t),"bottom-left":new e.pointGeometry(i,-i),"bottom-right":new e.pointGeometry(-i,-i),left:new e.pointGeometry(t,0),right:new e.pointGeometry(-t,0)}}if(t instanceof e.pointGeometry||Array.isArray(t)){var n=e.pointGeometry.convert(t);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:e.pointGeometry.convert(t.center||[0,0]),top:e.pointGeometry.convert(t.top||[0,0]),"top-left":e.pointGeometry.convert(t["top-left"]||[0,0]),"top-right":e.pointGeometry.convert(t["top-right"]||[0,0]),bottom:e.pointGeometry.convert(t.bottom||[0,0]),"bottom-left":e.pointGeometry.convert(t["bottom-left"]||[0,0]),"bottom-right":e.pointGeometry.convert(t["bottom-right"]||[0,0]),left:e.pointGeometry.convert(t.left||[0,0]),right:e.pointGeometry.convert(t.right||[0,0])}}(this.options.offset),a=this._anchor=this._getAnchor(r),o=n.add(r[a]).round();this._map._requestDomTask((function(){i._container&&a&&(i._container.style.transform="".concat(Ur[a]," translate(").concat(o.x,"px,").concat(o.y,"px)"))}))}this._updateClassList()}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(la);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}},{key:"_setOpacity",value:function(e){this._content&&(this._content.style.opacity=e),this._tip&&(this._tip.style.opacity=e)}}]),n}(e.Evented),Marker:Wr,Style:Qt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:An,Evented:e.Evented,config:e.config,prewarm:function(){He().acquire(We)},clearPrewarmedResources:function(){var e=Ue;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(We),Ue=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Ge.workerCount},set workerCount(e){Ge.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return ua})),i}()},function(e,t,i){"use strict";e.exports=i(243)},,,,,function(e,t,i){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}()?Object.assign:function(e,t){for(var i,s,l=o(e),u=1;u<arguments.length;u++){for(var c in i=Object(arguments[u]))r.call(i,c)&&(l[c]=i[c]);if(n){s=n(i);for(var h=0;h<s.length;h++)a.call(i,s[h])&&(l[s[h]]=i[s[h]])}}return l}},,function(e,t){function i(t,n){return e.exports=i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,i(t,n)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){"use strict";function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e,t){"function"===typeof e?e(t):e&&(e.current=t)}i.d(t,"a",(function(){return n}))},function(e,t,i){var n=i(228);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=p;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var i,n=[],a=0,o=0,s="",c=t&&t.delimiter||"/";null!=(i=r.exec(e));){var h=i[0],p=i[1],d=i.index;if(s+=e.slice(o,d),o=d+h.length,p)s+=p[1];else{var f=e[o],m=i[2],y=i[3],v=i[4],g=i[5],_=i[6],b=i[7];s&&(n.push(s),s="");var x=null!=m&&null!=f&&f!==m,w="+"===_||"*"===_,k="?"===_||"*"===_,P=i[2]||c,S=v||g;n.push({name:y||a++,prefix:m||"",delimiter:P,optional:k,repeat:w,partial:x,asterisk:!!b,pattern:S?u(S):b?".*":"[^"+l(P)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&n.push(s),n}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var i=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(i[r]=new RegExp("^(?:"+e[r].pattern+")$",h(t)));return function(t,r){for(var a="",s=t||{},l=(r||{}).pretty?o:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if("string"!==typeof c){var h,p=s[c.name];if(null==p){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(n(p)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<p.length;d++){if(h=l(p[d]),!i[u].test(h))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(h)+"`");a+=(0===d?c.prefix:c.delimiter)+h}}else{if(h=c.asterisk?encodeURI(p).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(p),!i[u].test(h))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+h+'"');a+=c.prefix+h}}else a+=c}return a}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function p(e,t,i){n(t)||(i=t||i,t=[]);for(var r=(i=i||{}).strict,a=!1!==i.end,o="",s=0;s<e.length;s++){var u=e[s];if("string"===typeof u)o+=l(u);else{var p=l(u.prefix),d="(?:"+u.pattern+")";t.push(u),u.repeat&&(d+="(?:"+p+d+")*"),o+=d=u.optional?u.partial?p+"("+d+")?":"(?:"+p+"("+d+"))?":p+"("+d+")"}}var f=l(i.delimiter||"/"),m=o.slice(-f.length)===f;return r||(o=(m?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),o+=a?"$":r&&m?"":"(?="+f+"|$)",c(new RegExp("^"+o,h(i)),t)}function d(e,t,i){return n(t)||(i=t||i,t=[]),i=i||{},e instanceof RegExp?function(e,t){var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(e,t):n(e)?function(e,t,i){for(var n=[],r=0;r<e.length;r++)n.push(d(e[r],t,i).source);return c(new RegExp("(?:"+n.join("|")+")",h(i)),t)}(e,t,i):function(e,t,i){return p(a(e,i),t,i)}(e,t,i)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(181),r={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function a(e,t){return r[t]||"".concat(n.a.generate(e),"-").concat(t)}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var n=i(232).default,r=i(164);e.exports=function(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},,,function(e,t,i){var n=i(159),r=i(169);function a(t,i,o){return r()?(e.exports=a=Reflect.construct,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,i){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return i&&n(a,i.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=i(251)},function(e,t,i){"use strict";function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e){if(Array.isArray(e))return e}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e){for(var t="https://mui.com/production-error/?code="+e,i=1;i<arguments.length;i+=1)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"b",(function(){return a}));var n=i(163),r=i(194);function a(e){return Object(n.a)("TabUnstyled",e)}var o=Object(r.a)("TabUnstyled",["root","selected","disabled"]);t.a=o},function(e,t,i){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.a=r},function(e,t,i){"use strict";i.d(t,"d",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s}));var n=i(5),r=n.createContext(null);function a(){return n.useContext(r)}function o(e,t){return null===e.idPrefix?null:"".concat(e.idPrefix,"-P-").concat(t)}function s(e,t){return null===e.idPrefix?null:"".concat(e.idPrefix,"-T-").concat(t)}t.a=r},function(e,t,i){"use strict";function n(e){return e&&e.ownerDocument||document}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";(function(e){var n=i(5),r=i.n(n),a=i(52),o=i(39),s=i.n(o),l=1073741823,u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function c(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(i,n){e=i,t.forEach((function(t){return t(e,n)}))}}}var h=r.a.createContext||function(e,t){var i,r,o="__create-react-context-"+function(){var e="__global_unique_id__";return u[e]=(u[e]||0)+1}()+"__",h=function(e){function i(){var t;return(t=e.apply(this,arguments)||this).emitter=c(t.props.value),t}Object(a.a)(i,e);var n=i.prototype;return n.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},n.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var i,n=this.props.value,r=e.value;((a=n)===(o=r)?0!==a||1/a===1/o:a!==a&&o!==o)?i=0:(i="function"===typeof t?t(n,r):l,0!==(i|=0)&&this.emitter.set(e.value,i))}var a,o},n.render=function(){return this.props.children},i}(n.Component);h.childContextTypes=((i={})[o]=s.a.object.isRequired,i);var p=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,i){0!==((0|e.observedBits)&i)&&e.setState({value:e.getValue()})},e}Object(a.a)(i,t);var n=i.prototype;return n.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?l:t},n.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?l:e},n.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},n.getValue=function(){return this.context[o]?this.context[o].get():e},n.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},i}(n.Component);return p.contextTypes=((r={})[o]=s.a.object,r),{Provider:h,Consumer:p}};t.a=h}).call(this,i(196))},,function(e,t,i){"use strict";var n=i(174);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(175)),a=i(17),o=(0,r.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.default=o},function(e,t,i){"use strict";var n=i(174);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i(175)),a=i(17),o=(0,r.default)((0,a.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove");t.default=o},,,function(e,t,i){"use strict";i.d(t,"b",(function(){return Kt})),i.d(t,"a",(function(){return Jt}));var n=i(60),r=i(35),a=i(10),o=i(29),s=(i(221),i(5));var l=function(e){var t=Object.create(null);return function(i){return void 0===t[i]&&(t[i]=e(i)),t[i]}},u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,c=l((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var h=function(){function e(e){var t=this;this._insertTag=function(e){var i;i=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,i),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{i.insertRule(e,i.cssRules.length)}catch(p){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),p="-ms-",d="-moz-",f="-webkit-",m="comm",y="rule",v="decl",g="@keyframes",_=Math.abs,b=String.fromCharCode,x=Object.assign;function w(e){return e.trim()}function k(e,t,i){return e.replace(t,i)}function P(e,t){return e.indexOf(t)}function S(e,t){return 0|e.charCodeAt(t)}function T(e,t,i){return e.slice(t,i)}function C(e){return e.length}function O(e){return e.length}function I(e,t){return t.push(e),e}function E(e,t){return e.map(t).join("")}var A=1,M=1,D=0,j=0,F=0,L="";function R(e,t,i,n,r,a,o){return{value:e,root:t,parent:i,type:n,props:r,children:a,line:A,column:M,length:o,return:""}}function z(e,t){return x(R("",null,null,"",null,null,0),e,{length:-e.length},t)}function V(){return F=j>0?S(L,--j):0,M--,10===F&&(M=1,A--),F}function B(){return F=j<D?S(L,j++):0,M++,10===F&&(M=1,A++),F}function N(){return S(L,j)}function U(){return j}function W(e,t){return T(L,e,t)}function G(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function H(e){return A=M=1,D=C(L=e),j=0,[]}function X(e){return L="",e}function Y(e){return w(W(j-1,K(91===e?e+2:40===e?e+1:e)))}function q(e){for(;(F=N())&&F<33;)B();return G(e)>2||G(F)>3?"":" "}function Z(e,t){for(;--t&&B()&&!(F<48||F>102||F>57&&F<65||F>70&&F<97););return W(e,U()+(t<6&&32==N()&&32==B()))}function K(e){for(;B();)switch(F){case e:return j;case 34:case 39:34!==e&&39!==e&&K(F);break;case 40:41===e&&K(e);break;case 92:B()}return j}function $(e,t){for(;B()&&e+F!==57&&(e+F!==84||47!==N()););return"/*"+W(t,j-1)+"*"+b(47===e?e:B())}function J(e){for(;!G(N());)B();return W(e,j)}function Q(e){return X(ee("",null,null,null,[""],e=H(e),0,[0],e))}function ee(e,t,i,n,r,a,o,s,l){for(var u=0,c=0,h=o,p=0,d=0,f=0,m=1,y=1,v=1,g=0,_="",x=r,w=a,S=n,T=_;y;)switch(f=g,g=B()){case 40:if(108!=f&&58==T.charCodeAt(h-1)){-1!=P(T+=k(Y(g),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:T+=Y(g);break;case 9:case 10:case 13:case 32:T+=q(f);break;case 92:T+=Z(U()-1,7);continue;case 47:switch(N()){case 42:case 47:I(ie($(B(),U()),t,i),l);break;default:T+="/"}break;case 123*m:s[u++]=C(T)*v;case 125*m:case 59:case 0:switch(g){case 0:case 125:y=0;case 59+c:d>0&&C(T)-h&&I(d>32?ne(T+";",n,i,h-1):ne(k(T," ","")+";",n,i,h-2),l);break;case 59:T+=";";default:if(I(S=te(T,t,i,u,c,r,s,_,x=[],w=[],h),a),123===g)if(0===c)ee(T,t,S,S,x,a,h,s,w);else switch(p){case 100:case 109:case 115:ee(e,S,S,n&&I(te(e,S,S,0,0,r,s,_,r,x=[],h),w),r,w,h,s,n?x:w);break;default:ee(T,S,S,S,[""],w,0,s,w)}}u=c=d=0,m=v=1,_=T="",h=o;break;case 58:h=1+C(T),d=f;default:if(m<1)if(123==g)--m;else if(125==g&&0==m++&&125==V())continue;switch(T+=b(g),g*m){case 38:v=c>0?1:(T+="\f",-1);break;case 44:s[u++]=(C(T)-1)*v,v=1;break;case 64:45===N()&&(T+=Y(B())),p=N(),c=h=C(_=T+=J(U())),g++;break;case 45:45===f&&2==C(T)&&(m=0)}}return a}function te(e,t,i,n,r,a,o,s,l,u,c){for(var h=r-1,p=0===r?a:[""],d=O(p),f=0,m=0,v=0;f<n;++f)for(var g=0,b=T(e,h+1,h=_(m=o[f])),x=e;g<d;++g)(x=w(m>0?p[g]+" "+b:k(b,/&\f/g,p[g])))&&(l[v++]=x);return R(e,t,i,0===r?y:s,l,u,c)}function ie(e,t,i){return R(e,t,i,m,b(F),T(e,2,-2),0)}function ne(e,t,i,n){return R(e,t,i,v,T(e,0,n),T(e,n+1,-1),n)}function re(e,t){switch(function(e,t){return(((t<<2^S(e,0))<<2^S(e,1))<<2^S(e,2))<<2^S(e,3)}(e,t)){case 5103:return f+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return f+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return f+e+d+e+p+e+e;case 6828:case 4268:return f+e+p+e+e;case 6165:return f+e+p+"flex-"+e+e;case 5187:return f+e+k(e,/(\w+).+(:[^]+)/,f+"box-$1$2"+p+"flex-$1$2")+e;case 5443:return f+e+p+"flex-item-"+k(e,/flex-|-self/,"")+e;case 4675:return f+e+p+"flex-line-pack"+k(e,/align-content|flex-|-self/,"")+e;case 5548:return f+e+p+k(e,"shrink","negative")+e;case 5292:return f+e+p+k(e,"basis","preferred-size")+e;case 6060:return f+"box-"+k(e,"-grow","")+f+e+p+k(e,"grow","positive")+e;case 4554:return f+k(e,/([^-])(transform)/g,"$1"+f+"$2")+e;case 6187:return k(k(k(e,/(zoom-|grab)/,f+"$1"),/(image-set)/,f+"$1"),e,"")+e;case 5495:case 3959:return k(e,/(image-set\([^]*)/,f+"$1$`$1");case 4968:return k(k(e,/(.+:)(flex-)?(.*)/,f+"box-pack:$3"+p+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+f+e+e;case 4095:case 3583:case 4068:case 2532:return k(e,/(.+)-inline(.+)/,f+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(C(e)-1-t>6)switch(S(e,t+1)){case 109:if(45!==S(e,t+4))break;case 102:return k(e,/(.+:)(.+)-([^]+)/,"$1"+f+"$2-$3$1"+d+(108==S(e,t+3)?"$3":"$2-$3"))+e;case 115:return~P(e,"stretch")?re(k(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==S(e,t+1))break;case 6444:switch(S(e,C(e)-3-(~P(e,"!important")&&10))){case 107:return k(e,":",":"+f)+e;case 101:return k(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+f+(45===S(e,14)?"inline-":"")+"box$3$1"+f+"$2$3$1"+p+"$2box$3")+e}break;case 5936:switch(S(e,t+11)){case 114:return f+e+p+k(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return f+e+p+k(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return f+e+p+k(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return f+e+p+e+e}return e}function ae(e,t){for(var i="",n=O(e),r=0;r<n;r++)i+=t(e[r],r,e,t)||"";return i}function oe(e,t,i,n){switch(e.type){case"@import":case v:return e.return=e.return||e.value;case m:return"";case g:return e.return=e.value+"{"+ae(e.children,n)+"}";case y:e.value=e.props.join(",")}return C(i=ae(e.children,n))?e.return=e.value+"{"+i+"}":""}function se(e){return function(t){t.root||(t=t.return)&&e(t)}}var le=function(e,t,i){for(var n=0,r=0;n=r,r=N(),38===n&&12===r&&(t[i]=1),!G(r);)B();return W(e,j)},ue=function(e,t){return X(function(e,t){var i=-1,n=44;do{switch(G(n)){case 0:38===n&&12===N()&&(t[i]=1),e[i]+=le(j-1,t,i);break;case 2:e[i]+=Y(n);break;case 4:if(44===n){e[++i]=58===N()?"&\f":"",t[i]=e[i].length;break}default:e[i]+=b(n)}}while(n=B());return e}(H(e),t))},ce=new WeakMap,he=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,i=e.parent,n=e.column===i.column&&e.line===i.line;"rule"!==i.type;)if(!(i=i.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ce.get(i))&&!n){ce.set(e,!0);for(var r=[],a=ue(t,r),o=i.props,s=0,l=0;s<a.length;s++)for(var u=0;u<o.length;u++,l++)e.props[l]=r[s]?a[s].replace(/&\f/g,o[u]):o[u]+" "+a[s]}}},pe=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},de=[function(e,t,i,n){if(e.length>-1&&!e.return)switch(e.type){case v:e.return=re(e.value,e.length);break;case g:return ae([z(e,{value:k(e.value,"@","@"+f)})],n);case y:if(e.length)return E(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ae([z(e,{props:[k(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return ae([z(e,{props:[k(t,/:(plac\w+)/,":"+f+"input-$1")]}),z(e,{props:[k(t,/:(plac\w+)/,":-moz-$1")]}),z(e,{props:[k(t,/:(plac\w+)/,p+"input-$1")]})],n)}return""}))}}],fe=function(e){var t=e.key;if("css"===t){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n=e.stylisPlugins||de;var r,a,o={},s=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),i=1;i<t.length;i++)o[t[i]]=!0;s.push(e)}));var l=[he,pe];var u,c=[oe,se((function(e){u.insert(e)}))],p=function(e){var t=O(e);return function(i,n,r,a){for(var o="",s=0;s<t;s++)o+=e[s](i,n,r,a)||"";return o}}(l.concat(n,c));a=function(e,t,i,n){u=i,ae(Q(e?e+"{"+t.styles+"}":t.styles),p),n&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new h({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return d.sheet.hydrate(s),d};i(90);function me(e,t,i){var n="";return i.split(" ").forEach((function(i){void 0!==e[i]?t.push(e[i]+";"):n+=i+" "})),n}var ye=function(e,t,i){var n=e.key+"-"+t.name;if(!1===i&&void 0===e.registered[n]&&(e.registered[n]=t.styles),void 0===e.inserted[t.name]){var r=t;do{e.insert(t===r?"."+n:"",r,e.sheet,!0);r=r.next}while(void 0!==r)}};var ve=function(e){for(var t,i=0,n=0,r=e.length;r>=4;++n,r-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),i=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&i)+(59797*(i>>>16)<<16);switch(r){case 3:i^=(255&e.charCodeAt(n+2))<<16;case 2:i^=(255&e.charCodeAt(n+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(n)))+(59797*(i>>>16)<<16)}return(((i=1540483477*(65535&(i^=i>>>13))+(59797*(i>>>16)<<16))^i>>>15)>>>0).toString(36)},ge={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_e=/[A-Z]|^ms/g,be=/_EMO_([^_]+?)_([^]*?)_EMO_/g,xe=function(e){return 45===e.charCodeAt(1)},we=function(e){return null!=e&&"boolean"!==typeof e},ke=l((function(e){return xe(e)?e:e.replace(_e,"-$&").toLowerCase()})),Pe=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(be,(function(e,t,i){return Te={name:t,styles:i,next:Te},t}))}return 1===ge[e]||xe(e)||"number"!==typeof t||0===t?t:t+"px"};function Se(e,t,i){if(null==i)return"";if(void 0!==i.__emotion_styles)return i;switch(typeof i){case"boolean":return"";case"object":if(1===i.anim)return Te={name:i.name,styles:i.styles,next:Te},i.name;if(void 0!==i.styles){var n=i.next;if(void 0!==n)for(;void 0!==n;)Te={name:n.name,styles:n.styles,next:Te},n=n.next;return i.styles+";"}return function(e,t,i){var n="";if(Array.isArray(i))for(var r=0;r<i.length;r++)n+=Se(e,t,i[r])+";";else for(var a in i){var o=i[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?n+=a+"{"+t[o]+"}":we(o)&&(n+=ke(a)+":"+Pe(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=Se(e,t,o);switch(a){case"animation":case"animationName":n+=ke(a)+":"+s+";";break;default:n+=a+"{"+s+"}"}}else for(var l=0;l<o.length;l++)we(o[l])&&(n+=ke(a)+":"+Pe(a,o[l])+";")}return n}(e,t,i);case"function":if(void 0!==e){var r=Te,a=i(e);return Te=r,Se(e,t,a)}}if(null==t)return i;var o=t[i];return void 0!==o?o:i}var Te,Ce=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Oe=function(e,t,i){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,r="";Te=void 0;var a=e[0];null==a||void 0===a.raw?(n=!1,r+=Se(i,t,a)):r+=a[0];for(var o=1;o<e.length;o++)r+=Se(i,t,e[o]),n&&(r+=a[o]);Ce.lastIndex=0;for(var s,l="";null!==(s=Ce.exec(r));)l+="-"+s[1];return{name:ve(r)+l,styles:r,next:Te}},Ie=Object(s.createContext)("undefined"!==typeof HTMLElement?fe({key:"css"}):null);Ie.Provider;var Ee=function(e){return Object(s.forwardRef)((function(t,i){var n=Object(s.useContext)(Ie);return e(t,n,i)}))},Ae=Object(s.createContext)({});var Me=c,De=function(e){return"theme"!==e},je=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Me:De},Fe=function(e,t,i){var n;if(t){var r=t.shouldForwardProp;n=e.__emotion_forwardProp&&r?function(t){return e.__emotion_forwardProp(t)&&r(t)}:r}return"function"!==typeof n&&i&&(n=e.__emotion_forwardProp),n},Le=function(){return null},Re=function e(t,i){var n,r,o=t.__emotion_real===t,l=o&&t.__emotion_base||t;void 0!==i&&(n=i.label,r=i.target);var u=Fe(t,i,o),c=u||je(l),h=!c("as");return function(){var p=arguments,d=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==n&&d.push("label:"+n+";"),null==p[0]||void 0===p[0].raw)d.push.apply(d,p);else{0,d.push(p[0][0]);for(var f=p.length,m=1;m<f;m++)d.push(p[m],p[0][m])}var y=Ee((function(e,t,i){var n=h&&e.as||l,a="",o=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=Object(s.useContext)(Ae)}"string"===typeof e.className?a=me(t.registered,o,e.className):null!=e.className&&(a=e.className+" ");var m=Oe(d.concat(o),t.registered,p);ye(t,m,"string"===typeof n);a+=t.key+"-"+m.name,void 0!==r&&(a+=" "+r);var y=h&&void 0===u?je(n):c,v={};for(var g in e)h&&"as"===g||y(g)&&(v[g]=e[g]);v.className=a,v.ref=i;var _=Object(s.createElement)(n,v),b=Object(s.createElement)(Le,null);return Object(s.createElement)(s.Fragment,null,b,_)}));return y.displayName=void 0!==n?n:"Styled("+("string"===typeof l?l:l.displayName||l.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=l,y.__emotion_styles=d,y.__emotion_forwardProp=u,Object.defineProperty(y,"toString",{value:function(){return"."+r}}),y.withComponent=function(t,n){return e(t,Object(a.a)({},i,n,{shouldForwardProp:Fe(y,n,!0)})).apply(void 0,d)},y}},ze=Re.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){ze[e]=ze(e)}));var Ve=ze;function Be(e,t){return Ve(e,t)}var Ne=i(296),Ue=i(33),We=i(77),Ge=i(21);var He=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.reduce((function(e,t){return t.filterProps.forEach((function(i){e[i]=t})),e}),{}),r=function(e){return Object.keys(e).reduce((function(t,i){return n[i]?Object(We.a)(t,n[i](e)):t}),{})};return r.propTypes={},r.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),r},Xe=i(62),Ye=i(56);function qe(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var Ze=Object(Ge.a)({prop:"border",themeKey:"borders",transform:qe}),Ke=Object(Ge.a)({prop:"borderTop",themeKey:"borders",transform:qe}),$e=Object(Ge.a)({prop:"borderRight",themeKey:"borders",transform:qe}),Je=Object(Ge.a)({prop:"borderBottom",themeKey:"borders",transform:qe}),Qe=Object(Ge.a)({prop:"borderLeft",themeKey:"borders",transform:qe}),et=Object(Ge.a)({prop:"borderColor",themeKey:"palette"}),tt=Object(Ge.a)({prop:"borderTopColor",themeKey:"palette"}),it=Object(Ge.a)({prop:"borderRightColor",themeKey:"palette"}),nt=Object(Ge.a)({prop:"borderBottomColor",themeKey:"palette"}),rt=Object(Ge.a)({prop:"borderLeftColor",themeKey:"palette"}),at=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=Object(Xe.b)(e.theme,"shape.borderRadius",4,"borderRadius");return Object(Ye.b)(e,e.borderRadius,(function(e){return{borderRadius:Object(Xe.d)(t,e)}}))}return null};at.propTypes={},at.filterProps=["borderRadius"];var ot=He(Ze,Ke,$e,Je,Qe,et,tt,it,nt,rt,at),st=He(Object(Ge.a)({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),Object(Ge.a)({prop:"display"}),Object(Ge.a)({prop:"overflow"}),Object(Ge.a)({prop:"textOverflow"}),Object(Ge.a)({prop:"visibility"}),Object(Ge.a)({prop:"whiteSpace"})),lt=He(Object(Ge.a)({prop:"flexBasis"}),Object(Ge.a)({prop:"flexDirection"}),Object(Ge.a)({prop:"flexWrap"}),Object(Ge.a)({prop:"justifyContent"}),Object(Ge.a)({prop:"alignItems"}),Object(Ge.a)({prop:"alignContent"}),Object(Ge.a)({prop:"order"}),Object(Ge.a)({prop:"flex"}),Object(Ge.a)({prop:"flexGrow"}),Object(Ge.a)({prop:"flexShrink"}),Object(Ge.a)({prop:"alignSelf"}),Object(Ge.a)({prop:"justifyItems"}),Object(Ge.a)({prop:"justifySelf"})),ut=function(e){if(void 0!==e.gap&&null!==e.gap){var t=Object(Xe.b)(e.theme,"spacing",8,"gap");return Object(Ye.b)(e,e.gap,(function(e){return{gap:Object(Xe.d)(t,e)}}))}return null};ut.propTypes={},ut.filterProps=["gap"];var ct=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=Object(Xe.b)(e.theme,"spacing",8,"columnGap");return Object(Ye.b)(e,e.columnGap,(function(e){return{columnGap:Object(Xe.d)(t,e)}}))}return null};ct.propTypes={},ct.filterProps=["columnGap"];var ht=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=Object(Xe.b)(e.theme,"spacing",8,"rowGap");return Object(Ye.b)(e,e.rowGap,(function(e){return{rowGap:Object(Xe.d)(t,e)}}))}return null};ht.propTypes={},ht.filterProps=["rowGap"];var pt=He(ut,ct,ht,Object(Ge.a)({prop:"gridColumn"}),Object(Ge.a)({prop:"gridRow"}),Object(Ge.a)({prop:"gridAutoFlow"}),Object(Ge.a)({prop:"gridAutoColumns"}),Object(Ge.a)({prop:"gridAutoRows"}),Object(Ge.a)({prop:"gridTemplateColumns"}),Object(Ge.a)({prop:"gridTemplateRows"}),Object(Ge.a)({prop:"gridTemplateAreas"}),Object(Ge.a)({prop:"gridArea"})),dt=He(Object(Ge.a)({prop:"position"}),Object(Ge.a)({prop:"zIndex",themeKey:"zIndex"}),Object(Ge.a)({prop:"top"}),Object(Ge.a)({prop:"right"}),Object(Ge.a)({prop:"bottom"}),Object(Ge.a)({prop:"left"})),ft=He(Object(Ge.a)({prop:"color",themeKey:"palette"}),Object(Ge.a)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),Object(Ge.a)({prop:"backgroundColor",themeKey:"palette"})),mt=Object(Ge.a)({prop:"boxShadow",themeKey:"shadows"});function yt(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var vt=Object(Ge.a)({prop:"width",transform:yt}),gt=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return Object(Ye.b)(e,e.maxWidth,(function(t){var i,n,r;return{maxWidth:(null==(i=e.theme)||null==(n=i.breakpoints)||null==(r=n.values)?void 0:r[t])||Ye.d[t]||yt(t)}}))}return null};gt.filterProps=["maxWidth"];var _t=Object(Ge.a)({prop:"minWidth",transform:yt}),bt=Object(Ge.a)({prop:"height",transform:yt}),xt=Object(Ge.a)({prop:"maxHeight",transform:yt}),wt=Object(Ge.a)({prop:"minHeight",transform:yt}),kt=(Object(Ge.a)({prop:"size",cssProperty:"width",transform:yt}),Object(Ge.a)({prop:"size",cssProperty:"height",transform:yt}),He(vt,gt,_t,bt,xt,wt,Object(Ge.a)({prop:"boxSizing"}))),Pt=Object(Ge.a)({prop:"fontFamily",themeKey:"typography"}),St=Object(Ge.a)({prop:"fontSize",themeKey:"typography"}),Tt=Object(Ge.a)({prop:"fontStyle",themeKey:"typography"}),Ct=Object(Ge.a)({prop:"fontWeight",themeKey:"typography"}),Ot=Object(Ge.a)({prop:"letterSpacing"}),It=Object(Ge.a)({prop:"textTransform"}),Et=Object(Ge.a)({prop:"lineHeight"}),At=Object(Ge.a)({prop:"textAlign"}),Mt=He(Object(Ge.a)({prop:"typography",cssProperty:!1,themeKey:"typography"}),Pt,St,Tt,Ct,Ot,Et,At,It),Dt={borders:ot.filterProps,display:st.filterProps,flexbox:lt.filterProps,grid:pt.filterProps,positions:dt.filterProps,palette:ft.filterProps,shadows:mt.filterProps,sizing:kt.filterProps,spacing:Xe.c.filterProps,typography:Mt.filterProps},jt={borders:ot,display:st,flexbox:lt,grid:pt,positions:dt,palette:ft,shadows:mt,sizing:kt,spacing:Xe.c,typography:Mt},Ft=Object.keys(Dt).reduce((function(e,t){return Dt[t].forEach((function(i){e[i]=jt[t]})),e}),{});var Lt=function(e,t,i){var n,r=(n={},Object(Ue.a)(n,e,t),Object(Ue.a)(n,"theme",i),n),a=Ft[e];return a?a(r):Object(Ue.a)({},e,t)};function Rt(e){var t=e||{},i=t.sx,n=t.theme,r=void 0===n?{}:n;if(!i)return null;function a(e){var t=e;if("function"===typeof e)t=e(r);else if("object"!==typeof e)return e;var i=Object(Ye.a)(r.breakpoints),n=Object.keys(i),a=i;return Object.keys(t).forEach((function(e){var i,n,o=(i=t[e],n=r,"function"===typeof i?i(n):i);if(null!==o&&void 0!==o)if("object"===typeof o)if(Ft[e])a=Object(We.a)(a,Lt(e,o,r));else{var s=Object(Ye.b)({theme:r},o,(function(t){return Object(Ue.a)({},e,t)}));!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),r=new Set(n);return t.every((function(e){return r.size===Object.keys(e).length}))}(s,o)?a=Object(We.a)(a,s):a[e]=Rt({sx:o,theme:r})}else a=Object(We.a)(a,Lt(e,o,r))})),Object(Ye.c)(n,a)}return Array.isArray(i)?i.map(a):a(i)}Rt.filterProps=["sx"];var zt=Rt,Vt=i(253),Bt=["variant"];function Nt(e){return 0===e.length}function Ut(e){var t=e.variant,i=Object(o.a)(e,Bt),n=t||"";return Object.keys(i).sort().forEach((function(t){n+="color"===t?Nt(n)?e[t]:Object(Vt.a)(e[t]):"".concat(Nt(n)?t:Object(Vt.a)(t)).concat(Object(Vt.a)(e[t].toString()))})),n}var Wt=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Gt=["theme"],Ht=["theme"];function Xt(e){return 0===Object.keys(e).length}var Yt=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},qt=function(e,t){var i=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(i=t.components[e].variants);var n={};return i.forEach((function(e){var t=Ut(e.props);n[t]=e.style})),n},Zt=function(e,t,i,n){var r,a,o=e.ownerState,s=void 0===o?{}:o,l=[],u=null==i||null==(r=i.components)||null==(a=r[n])?void 0:a.variants;return u&&u.forEach((function(i){var n=!0;Object.keys(i.props).forEach((function(t){s[t]!==i.props[t]&&e[t]!==i.props[t]&&(n=!1)})),n&&l.push(t[Ut(i.props)])})),l};function Kt(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var $t=Object(Ne.a)();function Jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,i=void 0===t?$t:t,s=e.rootShouldForwardProp,l=void 0===s?Kt:s,u=e.slotShouldForwardProp,c=void 0===u?Kt:u;return function(e){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=s.name,h=s.slot,p=s.skipVariantsResolver,d=s.skipSx,f=s.overridesResolver,m=Object(o.a)(s,Wt),y=void 0!==p?p:h&&"Root"!==h||!1,v=d||!1;var g=Kt;"Root"===h?g=l:h&&(g=c);var _=Be(e,Object(a.a)({shouldForwardProp:g,label:t},m)),b=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),l=1;l<t;l++)s[l-1]=arguments[l];var c=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var n=t.theme,r=Object(o.a)(t,Gt);return e(Object(a.a)({theme:Xt(n)?i:n},r))}:e})):[],h=e;u&&f&&c.push((function(e){var t=Xt(e.theme)?i:e.theme,n=Yt(u,t);if(n){var a={};return Object.entries(n).forEach((function(t){var i=Object(r.a)(t,2),n=i[0],o=i[1];a[n]="function"===typeof o?o(e):o})),f(e,a)}return null})),u&&!y&&c.push((function(e){var t=Xt(e.theme)?i:e.theme;return Zt(e,qt(u,t),t,u)})),v||c.push((function(e){var t=Xt(e.theme)?i:e.theme;return zt(Object(a.a)({},e,{theme:t}))}));var p=c.length-s.length;if(Array.isArray(e)&&p>0){var d=new Array(p).fill("");(h=[].concat(Object(n.a)(e),Object(n.a)(d))).raw=[].concat(Object(n.a)(e.raw),Object(n.a)(d))}else"function"===typeof e&&(h=function(t){var n=t.theme,r=Object(o.a)(t,Ht);return e(Object(a.a)({theme:Xt(n)?i:n},r))});var m=_.apply(void 0,[h].concat(Object(n.a)(c)));return m};return _.withConfig&&(b.withConfig=_.withConfig),b}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(10);var r=function(e){return"string"===typeof e};function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return r(e)?t:Object(n.a)({},t,{ownerState:Object(n.a)({},t.ownerState,i)})}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(10);function r(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function a(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},o=i.clone?Object(n.a)({},e):e;return r(e)&&r(t)&&Object.keys(t).forEach((function(n){"__proto__"!==n&&(r(t[n])&&n in e&&r(e[n])?o[n]=a(e[n],t[n],i):o[n]=t[n])})),o}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(163);function r(e,t){var i={};return t.forEach((function(t){i[t]=Object(n.a)(e,t)})),i}},function(e,t,i){"use strict";function n(e){for(var t="https://material-ui.com/production-error/?code="+e,i=1;i<arguments.length;i+=1)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}i.d(t,"a",(function(){return n}))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}e.exports=i},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var n=i(231);function r(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=r=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=r=function(e,t,i){var r=n(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:i):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),r.apply(this,arguments)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var n=i(234),r=i(171),a=i(127),o=i(235);e.exports=function(e){return n(e)||r(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var n=i(170),r=i(236),a=i(127),o=i(173);e.exports=function(e,t){return n(e)||r(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var n=i(159);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},,,,,,,,,,,function(e,t,i){"use strict";var n=i(157),r=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var p="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function y(e,t,i){this.props=e,this.context=t,this.refs=m,this.updater=i||f}function v(){}function g(e,t,i){this.props=e,this.context=t,this.refs=m,this.updater=i||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var _=g.prototype=new v;_.constructor=g,n(_,y.prototype),_.isPureReactComponent=!0;var b={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,i){var n,a={},o=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,n)&&!w.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(1===l)a.children=i;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===a[n]&&(a[n]=l[n]);return{$$typeof:r,type:e,key:o,ref:s,props:a,_owner:b.current}}function P(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,n,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case a:l=!0}}if(l)return o=o(l=e),e=""===n?"."+T(l,0):n,Array.isArray(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(P(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(l=0,n=""===n?".":n+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=n+T(s=e[u],u);l+=C(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=C(s=s.value,t,i,c=n+T(s,u++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function O(e,t,i){if(null==e)return e;var n=[],r=0;return C(e,n,"","",(function(e){return t.call(i,e,r++)})),n}function I(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var E={current:null};function A(){var e=E.current;if(null===e)throw Error(d(321));return e}var M={ReactCurrentDispatcher:E,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:O,forEach:function(e,t,i){O(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!P(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error(d(267,e));var a=n({},e.props),o=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!w.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=i;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];a.children=u}return{$$typeof:r,type:e.type,key:o,ref:s,props:a,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,i){return A().useImperativeHandle(e,t,i)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,i){return A().useReducer(e,t,i)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},function(e,t,i){"use strict";var n=i(5),r=i(157),a=i(216);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(o(227));var s=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,f={},m={};function y(e,t,i,n,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,i,n){var r=v.hasOwnProperty(t)?v[t]:null;(null!==r?0===r.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,i,n){if(null===t||"undefined"===typeof t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!d.call(m,e)||!d.call(f,e)&&(p.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,_);v[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,_);v[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,_);v[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,k=60106,P=60107,S=60108,T=60114,C=60109,O=60110,I=60112,E=60113,A=60120,M=60115,D=60116,j=60121,F=60128,L=60129,R=60130,z=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;w=V("react.element"),k=V("react.portal"),P=V("react.fragment"),S=V("react.strict_mode"),T=V("react.profiler"),C=V("react.provider"),O=V("react.context"),I=V("react.forward_ref"),E=V("react.suspense"),A=V("react.suspense_list"),M=V("react.memo"),D=V("react.lazy"),j=V("react.block"),V("react.scope"),F=V("react.opaque.id"),L=V("react.debug_trace_mode"),R=V("react.offscreen"),z=V("react.legacy_hidden")}var B,N="function"===typeof Symbol&&Symbol.iterator;function U(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}function W(e){if(void 0===B)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var G=!1;function H(e,t){if(!e||G)return"";G=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}else{try{throw Error()}catch(l){n=l}e()}}catch(l){if(l&&n&&"string"===typeof l.stack){for(var r=l.stack.split("\n"),a=n.stack.split("\n"),o=r.length-1,s=a.length-1;1<=o&&0<=s&&r[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(r[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||r[o]!==a[s])return"\n"+r[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{G=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?W(e):""}function X(e){switch(e.tag){case 5:return W(e.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function Y(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case P:return"Fragment";case k:return"Portal";case T:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case M:return Y(e.type);case j:return Y(e._render);case D:t=e._payload,e=e._init;try{return Y(e(t))}catch(i){}}return null}function q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=Z(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,a=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Z(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var i=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function ee(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=q(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ie(e,t){te(e,t);var i=q(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?re(e,t.type,i):t.hasOwnProperty("defaultValue")&&re(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ne(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function re(e,t,i){"number"===t&&J(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function ae(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+q(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(o(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(o(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:q(i)}}function ue(e,t){var i=q(t.value),n=q(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",pe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ye,ve=(ye=function(e,t){if(e.namespaceURI!==pe||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var _e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function xe(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||_e.hasOwnProperty(e)&&_e[e]?(""+t).trim():t+"px"}function we(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=xe(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(_e).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_e[t]=_e[e]}))}));var ke=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pe(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Oe=null,Ie=null;function Ee(e){if(e=nr(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=ar(t),Ce(e.stateNode,e.type,t))}}function Ae(e){Oe?Ie?Ie.push(e):Ie=[e]:Oe=e}function Me(){if(Oe){var e=Oe,t=Ie;if(Ie=Oe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function De(e,t){return e(t)}function je(e,t,i,n,r){return e(t,i,n,r)}function Fe(){}var Le=De,Re=!1,ze=!1;function Ve(){null===Oe&&null===Ie||(Fe(),Me())}function Be(e,t){var i=e.stateNode;if(null===i)return null;var n=ar(i);if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(o(231,t,typeof i));return i}var Ne=!1;if(h)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch(ye){Ne=!1}function We(e,t,i,n,r,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(i,u)}catch(c){this.onError(c)}}var Ge=!1,He=null,Xe=!1,Ye=null,qe={onError:function(e){Ge=!0,He=e}};function Ze(e,t,i,n,r,a,o,s,l){Ge=!1,He=null,We.apply(qe,arguments)}function Ke(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ke(e)!==e)throw Error(o(188))}function Qe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(o(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(n=r.return)){i=n;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===i)return Je(r),e;if(a===n)return Je(r),t;a=a.sibling}throw Error(o(188))}if(i.return!==n.return)i=r,n=a;else{for(var s=!1,l=r.child;l;){if(l===i){s=!0,i=r,n=a;break}if(l===n){s=!0,n=r,i=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===i){s=!0,i=a,n=r;break}if(l===n){s=!0,n=a,i=r;break}l=l.sibling}if(!s)throw Error(o(189))}}if(i.alternate!==n)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var i=e.alternate;null!==t;){if(t===e||t===i)return!0;t=t.return}return!1}var tt,it,nt,rt,at=!1,ot=[],st=null,lt=null,ut=null,ct=new Map,ht=new Map,pt=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,i,n,r){return{blockedOn:e,domEventName:t,eventSystemFlags:16|i,nativeEvent:r,targetContainers:[n]}}function mt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function yt(e,t,i,n,r,a){return null===e||e.nativeEvent!==a?(e=ft(t,i,n,r,a),null!==t&&(null!==(t=nr(t))&&it(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function vt(e){var t=ir(e.target);if(null!==t){var i=Ke(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=$e(i)))return e.blockedOn=t,void rt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){nt(i)}))}))}else if(3===t&&i.stateNode.hydrate)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=nr(i))&&it(t),e.blockedOn=i,!1;t.shift()}return!0}function _t(e,t,i){gt(e)&&i.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=nr(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var i=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i){e.blockedOn=i;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==lt&&gt(lt)&&(lt=null),null!==ut&&gt(ut)&&(ut=null),ct.forEach(_t),ht.forEach(_t)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function wt(e){function t(t){return xt(t,e)}if(0<ot.length){xt(ot[0],e);for(var i=1;i<ot.length;i++){var n=ot[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==st&&xt(st,e),null!==lt&&xt(lt,e),null!==ut&&xt(ut,e),ct.forEach(t),ht.forEach(t),i=0;i<pt.length;i++)(n=pt[i]).blockedOn===e&&(n.blockedOn=null);for(;0<pt.length&&null===(i=pt[0]).blockedOn;)vt(i),null===i.blockedOn&&pt.shift()}function kt(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Pt={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},St={},Tt={};function Ct(e){if(St[e])return St[e];if(!Pt[e])return e;var t,i=Pt[e];for(t in i)if(i.hasOwnProperty(t)&&t in Tt)return St[e]=i[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Pt.animationend.animation,delete Pt.animationiteration.animation,delete Pt.animationstart.animation),"TransitionEvent"in window||delete Pt.transitionend.transition);var Ot=Ct("animationend"),It=Ct("animationiteration"),Et=Ct("animationstart"),At=Ct("transitionend"),Mt=new Map,Dt=new Map,jt=["abort","abort",Ot,"animationEnd",It,"animationIteration",Et,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Ft(e,t){for(var i=0;i<e.length;i+=2){var n=e[i],r=e[i+1];r="on"+(r[0].toUpperCase()+r.slice(1)),Dt.set(n,t),Mt.set(n,r),u(r,[n])}}(0,a.unstable_now)();var Lt=8;function Rt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function zt(e,t){var i=e.pendingLanes;if(0===i)return Lt=0;var n=0,r=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)n=a,r=Lt=15;else if(0!==(a=134217727&i)){var l=a&~o;0!==l?(n=Rt(l),r=Lt):0!==(s&=a)&&(n=Rt(s),r=Lt)}else 0!==(a=i&~o)?(n=Rt(a),r=Lt):0!==s&&(n=Rt(s),r=Lt);if(0===n)return 0;if(n=i&((0>(n=31-Gt(n))?0:1<<n)<<1)-1,0!==t&&t!==n&&0===(t&o)){if(Rt(t),r<=Lt)return t;Lt=r}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=1<<(i=31-Gt(t)),n|=e[i],t&=~r;return n}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Nt(24&~t))?Bt(10,t):e;case 10:return 0===(e=Nt(192&~t))?Bt(8,t):e;case 8:return 0===(e=Nt(3584&~t))&&(0===(e=Nt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Nt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Nt(e){return e&-e}function Ut(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Wt(e,t,i){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,(e=e.eventTimes)[t=31-Gt(t)]=i}var Gt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Xt|0)|0},Ht=Math.log,Xt=Math.LN2;var Yt=a.unstable_UserBlockingPriority,qt=a.unstable_runWithPriority,Zt=!0;function Kt(e,t,i,n){Re||Fe();var r=Jt,a=Re;Re=!0;try{je(r,e,t,i,n)}finally{(Re=a)||Ve()}}function $t(e,t,i,n){qt(Yt,Jt.bind(null,e,t,i,n))}function Jt(e,t,i,n){var r;if(Zt)if((r=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=ft(null,e,t,i,n),ot.push(e);else{var a=Qt(e,t,i,n);if(null===a)r&&mt(e,n);else{if(r){if(-1<dt.indexOf(e))return e=ft(a,e,t,i,n),void ot.push(e);if(function(e,t,i,n,r){switch(t){case"focusin":return st=yt(st,e,t,i,n,r),!0;case"dragenter":return lt=yt(lt,e,t,i,n,r),!0;case"mouseover":return ut=yt(ut,e,t,i,n,r),!0;case"pointerover":var a=r.pointerId;return ct.set(a,yt(ct.get(a)||null,e,t,i,n,r)),!0;case"gotpointercapture":return a=r.pointerId,ht.set(a,yt(ht.get(a)||null,e,t,i,n,r)),!0}return!1}(a,e,t,i,n))return;mt(e,n)}Fn(e,t,n,null,i)}}}function Qt(e,t,i,n){var r=Te(n);if(null!==(r=ir(r))){var a=Ke(r);if(null===a)r=null;else{var o=a.tag;if(13===o){if(null!==(r=$e(a)))return r;r=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Fn(e,t,n,r,i),null}var ei=null,ti=null,ii=null;function ni(){if(ii)return ii;var e,t,i=ti,n=i.length,r="value"in ei?ei.value:ei.textContent,a=r.length;for(e=0;e<n&&i[e]===r[e];e++);var o=n-e;for(t=1;t<=o&&i[n-t]===r[a-t];t++);return ii=r.slice(e,1<t?1-t:void 0)}function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ai(){return!0}function oi(){return!1}function si(e){function t(t,i,n,r,a){for(var o in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?ai:oi,this.isPropagationStopped=oi,this}return r(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),t}var li,ui,ci,hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=si(hi),di=r({},hi,{view:0,detail:0}),fi=si(di),mi=r({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ci&&(ci&&"mousemove"===e.type?(li=e.screenX-ci.screenX,ui=e.screenY-ci.screenY):ui=li=0,ci=e),li)},movementY:function(e){return"movementY"in e?e.movementY:ui}}),yi=si(mi),vi=si(r({},mi,{dataTransfer:0})),gi=si(r({},di,{relatedTarget:0})),_i=si(r({},hi,{animationName:0,elapsedTime:0,pseudoElement:0})),bi=r({},hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xi=si(bi),wi=si(r({},hi,{data:0})),ki={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Si={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ti(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Si[e])&&!!t[e]}function Ci(){return Ti}var Oi=r({},di,{key:function(e){if(e.key){var t=ki[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Pi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ii=si(Oi),Ei=si(r({},mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ai=si(r({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci})),Mi=si(r({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0})),Di=r({},mi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ji=si(Di),Fi=[9,13,27,32],Li=h&&"CompositionEvent"in window,Ri=null;h&&"documentMode"in document&&(Ri=document.documentMode);var zi=h&&"TextEvent"in window&&!Ri,Vi=h&&(!Li||Ri&&8<Ri&&11>=Ri),Bi=String.fromCharCode(32),Ni=!1;function Ui(e,t){switch(e){case"keyup":return-1!==Fi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wi(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gi=!1;var Hi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hi[e.type]:"textarea"===t}function Yi(e,t,i,n){Ae(n),0<(t=Rn(t,"onChange")).length&&(i=new pi("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var qi=null,Zi=null;function Ki(e){In(e,0)}function $i(e){if($(rr(e)))return e}function Ji(e,t){if("change"===e)return t}var Qi=!1;if(h){var en;if(h){var tn="oninput"in document;if(!tn){var nn=document.createElement("div");nn.setAttribute("oninput","return;"),tn="function"===typeof nn.oninput}en=tn}else en=!1;Qi=en&&(!document.documentMode||9<document.documentMode)}function rn(){qi&&(qi.detachEvent("onpropertychange",an),Zi=qi=null)}function an(e){if("value"===e.propertyName&&$i(Zi)){var t=[];if(Yi(t,Zi,e,Te(e)),e=Ki,Re)e(t);else{Re=!0;try{De(e,t)}finally{Re=!1,Ve()}}}}function on(e,t,i){"focusin"===e?(rn(),Zi=i,(qi=t).attachEvent("onpropertychange",an)):"focusout"===e&&rn()}function sn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $i(Zi)}function ln(e,t){if("click"===e)return $i(t)}function un(e,t){if("input"===e||"change"===e)return $i(t)}var cn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},hn=Object.prototype.hasOwnProperty;function pn(e,t){if(cn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!hn.call(t,i[n])||!cn(e[i[n]],t[i[n]]))return!1;return!0}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var i,n=dn(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dn(n)}}function mn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yn(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=J((e=t.contentWindow).document)}return t}function vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gn=h&&"documentMode"in document&&11>=document.documentMode,_n=null,bn=null,xn=null,wn=!1;function kn(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;wn||null==_n||_n!==J(n)||("selectionStart"in(n=_n)&&vn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},xn&&pn(xn,n)||(xn=n,0<(n=Rn(bn,"onSelect")).length&&(t=new pi("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=_n)))}Ft("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ft("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ft(jt,2);for(var Pn="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sn=0;Sn<Pn.length;Sn++)Dt.set(Pn[Sn],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tn));function On(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,n,r,a,s,l,u){if(Ze.apply(this,arguments),Ge){if(!Ge)throw Error(o(198));var c=He;Ge=!1,He=null,Xe||(Xe=!0,Ye=c)}}(n,t,void 0,e),e.currentTarget=null}function In(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],r=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break e;On(r,s,u),a=l}else for(o=0;o<n.length;o++){if(l=(s=n[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;On(r,s,u),a=l}}}if(Xe)throw e=Ye,Xe=!1,Ye=null,e}function En(e,t){var i=or(t),n=e+"__bubble";i.has(n)||(jn(t,e,2,!1),i.add(n))}var An="_reactListening"+Math.random().toString(36).slice(2);function Mn(e){e[An]||(e[An]=!0,s.forEach((function(t){Cn.has(t)||Dn(t,!1,e,null),Dn(t,!0,e,null)})))}function Dn(e,t,i,n){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=i;if("selectionchange"===e&&9!==i.nodeType&&(a=i.ownerDocument),null!==n&&!t&&Cn.has(e)){if("scroll"!==e)return;r|=2,a=n}var o=or(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(r|=4),jn(a,e,r,t),o.add(s))}function jn(e,t,i,n){var r=Dt.get(t);switch(void 0===r?2:r){case 0:r=Kt;break;case 1:r=$t;break;default:r=Jt}i=r.bind(null,t,i,e),r=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),n?void 0!==r?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):void 0!==r?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function Fn(e,t,i,n,r){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==s;){if(null===(o=ir(s)))return;if(5===(l=o.tag)||6===l){n=a=o;continue e}s=s.parentNode}}n=n.return}!function(e,t,i){if(ze)return e(t,i);ze=!0;try{Le(e,t,i)}finally{ze=!1,Ve()}}((function(){var n=a,r=Te(i),o=[];e:{var s=Mt.get(e);if(void 0!==s){var l=pi,u=e;switch(e){case"keypress":if(0===ri(i))break e;case"keydown":case"keyup":l=Ii;break;case"focusin":u="focus",l=gi;break;case"focusout":u="blur",l=gi;break;case"beforeblur":case"afterblur":l=gi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=yi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ai;break;case Ot:case It:case Et:l=_i;break;case At:l=Mi;break;case"scroll":l=fi;break;case"wheel":l=ji;break;case"copy":case"cut":case"paste":l=xi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ei}var c=0!==(4&t),h=!c&&"scroll"===e,p=c?null!==s?s+"Capture":null:s;c=[];for(var d,f=n;null!==f;){var m=(d=f).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==p&&(null!=(m=Be(f,p))&&c.push(Ln(f,m,d)))),h)break;f=f.return}0<c.length&&(s=new l(s,u,null,i,r),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=i.relatedTarget||i.fromElement)||!ir(u)&&!u[er])&&(l||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(u=(u=i.relatedTarget||i.toElement)?ir(u):null)&&(u!==(h=Ke(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=n),l!==u)){if(c=yi,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ei,m="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==l?s:rr(l),d=null==u?s:rr(u),(s=new c(m,f+"leave",l,i,r)).target=h,s.relatedTarget=d,m=null,ir(r)===n&&((c=new c(p,f+"enter",u,i,r)).target=d,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(p=u,f=0,d=c=l;d;d=zn(d))f++;for(d=0,m=p;m;m=zn(m))d++;for(;0<f-d;)c=zn(c),f--;for(;0<d-f;)p=zn(p),d--;for(;f--;){if(c===p||null!==p&&c===p.alternate)break e;c=zn(c),p=zn(p)}c=null}else c=null;null!==l&&Vn(o,s,l,c,!1),null!==u&&null!==h&&Vn(o,h,u,c,!0)}if("select"===(l=(s=n?rr(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var y=Ji;else if(Xi(s))if(Qi)y=un;else{y=sn;var v=on}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ln);switch(y&&(y=y(e,n))?Yi(o,y,i,r):(v&&v(e,s,n),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&re(s,"number",s.value)),v=n?rr(n):window,e){case"focusin":(Xi(v)||"true"===v.contentEditable)&&(_n=v,bn=n,xn=null);break;case"focusout":xn=bn=_n=null;break;case"mousedown":wn=!0;break;case"contextmenu":case"mouseup":case"dragend":wn=!1,kn(o,i,r);break;case"selectionchange":if(gn)break;case"keydown":case"keyup":kn(o,i,r)}var g;if(Li)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Gi?Ui(e,i)&&(_="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(_="onCompositionStart");_&&(Vi&&"ko"!==i.locale&&(Gi||"onCompositionStart"!==_?"onCompositionEnd"===_&&Gi&&(g=ni()):(ti="value"in(ei=r)?ei.value:ei.textContent,Gi=!0)),0<(v=Rn(n,_)).length&&(_=new wi(_,e,null,i,r),o.push({event:_,listeners:v}),g?_.data=g:null!==(g=Wi(i))&&(_.data=g))),(g=zi?function(e,t){switch(e){case"compositionend":return Wi(t);case"keypress":return 32!==t.which?null:(Ni=!0,Bi);case"textInput":return(e=t.data)===Bi&&Ni?null:e;default:return null}}(e,i):function(e,t){if(Gi)return"compositionend"===e||!Li&&Ui(e,t)?(e=ni(),ii=ti=ei=null,Gi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vi&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(n=Rn(n,"onBeforeInput")).length&&(r=new wi("onBeforeInput","beforeinput",null,i,r),o.push({event:r,listeners:n}),r.data=g))}In(o,t)}))}function Ln(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Rn(e,t){for(var i=t+"Capture",n=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Be(e,i))&&n.unshift(Ln(e,a,r)),null!=(a=Be(e,t))&&n.push(Ln(e,a,r))),e=e.return}return n}function zn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vn(e,t,i,n,r){for(var a=t._reactName,o=[];null!==i&&i!==n;){var s=i,l=s.alternate,u=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==u&&(s=u,r?null!=(l=Be(i,a))&&o.unshift(Ln(i,l,s)):r||null!=(l=Be(i,a))&&o.push(Ln(i,l,s))),i=i.return}0!==o.length&&e.push({event:t,listeners:o})}function Bn(){}var Nn=null,Un=null;function Wn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Gn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hn="function"===typeof setTimeout?setTimeout:void 0,Xn="function"===typeof clearTimeout?clearTimeout:void 0;function Yn(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function qn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Zn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var Kn=0;var $n=Math.random().toString(36).slice(2),Jn="__reactFiber$"+$n,Qn="__reactProps$"+$n,er="__reactContainer$"+$n,tr="__reactEvents$"+$n;function ir(e){var t=e[Jn];if(t)return t;for(var i=e.parentNode;i;){if(t=i[er]||i[Jn]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=Zn(e);null!==e;){if(i=e[Jn])return i;e=Zn(e)}return t}i=(e=i).parentNode}return null}function nr(e){return!(e=e[Jn]||e[er])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function rr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ar(e){return e[Qn]||null}function or(e){var t=e[tr];return void 0===t&&(t=e[tr]=new Set),t}var sr=[],lr=-1;function ur(e){return{current:e}}function cr(e){0>lr||(e.current=sr[lr],sr[lr]=null,lr--)}function hr(e,t){lr++,sr[lr]=e.current,e.current=t}var pr={},dr=ur(pr),fr=ur(!1),mr=pr;function yr(e,t){var i=e.type.contextTypes;if(!i)return pr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in i)a[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function vr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gr(){cr(fr),cr(dr)}function _r(e,t,i){if(dr.current!==pr)throw Error(o(168));hr(dr,t),hr(fr,i)}function br(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,"function"!==typeof n.getChildContext)return i;for(var a in n=n.getChildContext())if(!(a in e))throw Error(o(108,Y(t)||"Unknown",a));return r({},i,n)}function xr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pr,mr=dr.current,hr(dr,e),hr(fr,fr.current),!0}function wr(e,t,i){var n=e.stateNode;if(!n)throw Error(o(169));i?(e=br(e,t,mr),n.__reactInternalMemoizedMergedChildContext=e,cr(fr),cr(dr),hr(dr,e)):cr(fr),hr(fr,i)}var kr=null,Pr=null,Sr=a.unstable_runWithPriority,Tr=a.unstable_scheduleCallback,Cr=a.unstable_cancelCallback,Or=a.unstable_shouldYield,Ir=a.unstable_requestPaint,Er=a.unstable_now,Ar=a.unstable_getCurrentPriorityLevel,Mr=a.unstable_ImmediatePriority,Dr=a.unstable_UserBlockingPriority,jr=a.unstable_NormalPriority,Fr=a.unstable_LowPriority,Lr=a.unstable_IdlePriority,Rr={},zr=void 0!==Ir?Ir:function(){},Vr=null,Br=null,Nr=!1,Ur=Er(),Wr=1e4>Ur?Er:function(){return Er()-Ur};function Gr(){switch(Ar()){case Mr:return 99;case Dr:return 98;case jr:return 97;case Fr:return 96;case Lr:return 95;default:throw Error(o(332))}}function Hr(e){switch(e){case 99:return Mr;case 98:return Dr;case 97:return jr;case 96:return Fr;case 95:return Lr;default:throw Error(o(332))}}function Xr(e,t){return e=Hr(e),Sr(e,t)}function Yr(e,t,i){return e=Hr(e),Tr(e,t,i)}function qr(){if(null!==Br){var e=Br;Br=null,Cr(e)}Zr()}function Zr(){if(!Nr&&null!==Vr){Nr=!0;var e=0;try{var t=Vr;Xr(99,(function(){for(;e<t.length;e++){var i=t[e];do{i=i(!0)}while(null!==i)}})),Vr=null}catch(i){throw null!==Vr&&(Vr=Vr.slice(e+1)),Tr(Mr,qr),i}finally{Nr=!1}}}var Kr=x.ReactCurrentBatchConfig;function $r(e,t){if(e&&e.defaultProps){for(var i in t=r({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}var Jr=ur(null),Qr=null,ea=null,ta=null;function ia(){ta=ea=Qr=null}function na(e){var t=Jr.current;cr(Jr),e.type._context._currentValue=t}function ra(e,t){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)===t){if(null===i||(i.childLanes&t)===t)break;i.childLanes|=t}else e.childLanes|=t,null!==i&&(i.childLanes|=t);e=e.return}}function aa(e,t){Qr=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ro=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Qr)throw Error(o(308));ea=t,Qr.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function la(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ua(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ha(e,t){if(null!==(e=e.updateQueue)){var i=(e=e.shared).pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function pa(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var r=null,a=null;if(null!==(i=i.firstBaseUpdate)){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===a?r=a=o:a=a.next=o,i=i.next}while(null!==i);null===a?r=a=t:a=a.next=t}else r=a=t;return i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function da(e,t,i,n){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?o=c:s.next=c,s=u;var h=e.alternate;if(null!==h){var p=(h=h.updateQueue).lastBaseUpdate;p!==s&&(null===p?h.firstBaseUpdate=c:p.next=c,h.lastBaseUpdate=u)}}if(null!==o){for(p=a.baseState,s=0,h=c=u=null;;){l=o.lane;var d=o.eventTime;if((n&l)===l){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(l=t,d=i,m.tag){case 1:if("function"===typeof(f=m.payload)){p=f.call(d,p,l);break e}p=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null===(l="function"===typeof(f=m.payload)?f.call(d,p,l):f)||void 0===l)break e;p=r({},p,l);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(l=a.effects)?a.effects=[o]:l.push(o))}else d={eventTime:d,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=d,u=p):h=h.next=d,s|=l;if(null===(o=o.next)){if(null===(l=a.shared.pending))break;o=l.next,l.next=null,a.lastBaseUpdate=l,a.shared.pending=null}}null===h&&(u=p),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=h,Ns|=s,e.lanes=s,e.memoizedState=p}}function fa(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=i,"function"!==typeof r)throw Error(o(191,r));r.call(n)}}}var ma=(new n.Component).refs;function ya(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:r({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var va={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=pl(),r=dl(e),a=ca(n,r);a.payload=t,void 0!==i&&null!==i&&(a.callback=i),ha(e,a),fl(e,r,n)},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=pl(),r=dl(e),a=ca(n,r);a.tag=1,a.payload=t,void 0!==i&&null!==i&&(a.callback=i),ha(e,a),fl(e,r,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=pl(),n=dl(e),r=ca(i,n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),ha(e,r),fl(e,n,i)}};function ga(e,t,i,n,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!pn(i,n)||!pn(r,a))}function _a(e,t,i){var n=!1,r=pr,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(r=vr(t)?mr:dr.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?yr(e,r):pr),t=new t(i,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=va,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&va.enqueueReplaceState(t,t.state,null)}function xa(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=ma,la(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=oa(a):(a=vr(t)?mr:dr.current,r.context=yr(e,a)),da(e,i,r,n),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,i),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&va.enqueueReplaceState(r,r.state,null),da(e,i,r,n),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4)}var wa=Array.isArray;function ka(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(o(309));var n=i.stateNode}if(!n)throw Error(o(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=n.refs;t===ma&&(t=n.refs={}),null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(o(284));if(!i._owner)throw Error(o(290,e))}return e}function Pa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Sa(e){function t(t,i){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i,i.nextEffect=null,i.flags=8}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Xl(e,t)).index=0,e.sibling=null,e}function a(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags=2,i):n:(t.flags=2,i):i}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Kl(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function u(e,t,i,n){return null!==t&&t.elementType===i.type?((n=r(t,i.props)).ref=ka(e,t,i),n.return=e,n):((n=Yl(i.type,i.key,i.props,null,e.mode,n)).ref=ka(e,t,i),n.return=e,n)}function c(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=$l(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function h(e,t,i,n,a){return null===t||7!==t.tag?((t=ql(i,e.mode,n,a)).return=e,t):((t=r(t,i)).return=e,t)}function p(e,t,i){if("string"===typeof t||"number"===typeof t)return(t=Kl(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(i=Yl(t.type,t.key,t.props,null,e.mode,i)).ref=ka(e,null,t),i.return=e,i;case k:return(t=$l(t,e.mode,i)).return=e,t}if(wa(t)||U(t))return(t=ql(t,e.mode,i,null)).return=e,t;Pa(e,t)}return null}function d(e,t,i,n){var r=null!==t?t.key:null;if("string"===typeof i||"number"===typeof i)return null!==r?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return i.key===r?i.type===P?h(e,t,i.props.children,n,r):u(e,t,i,n):null;case k:return i.key===r?c(e,t,i,n):null}if(wa(i)||U(i))return null!==r?null:h(e,t,i,n,null);Pa(e,i)}return null}function f(e,t,i,n,r){if("string"===typeof n||"number"===typeof n)return l(t,e=e.get(i)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return e=e.get(null===n.key?i:n.key)||null,n.type===P?h(t,e,n.props.children,r,n.key):u(t,e,n,r);case k:return c(t,e=e.get(null===n.key?i:n.key)||null,n,r)}if(wa(n)||U(n))return h(t,e=e.get(i)||null,n,r,null);Pa(t,n)}return null}function m(r,o,s,l){for(var u=null,c=null,h=o,m=o=0,y=null;null!==h&&m<s.length;m++){h.index>m?(y=h,h=null):y=h.sibling;var v=d(r,h,s[m],l);if(null===v){null===h&&(h=y);break}e&&h&&null===v.alternate&&t(r,h),o=a(v,o,m),null===c?u=v:c.sibling=v,c=v,h=y}if(m===s.length)return i(r,h),u;if(null===h){for(;m<s.length;m++)null!==(h=p(r,s[m],l))&&(o=a(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=n(r,h);m<s.length;m++)null!==(y=f(h,r,m,s[m],l))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),o=a(y,o,m),null===c?u=y:c.sibling=y,c=y);return e&&h.forEach((function(e){return t(r,e)})),u}function y(r,s,l,u){var c=U(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=s,y=s=0,v=null,g=l.next();null!==m&&!g.done;y++,g=l.next()){m.index>y?(v=m,m=null):v=m.sibling;var _=d(r,m,g.value,u);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(r,m),s=a(_,s,y),null===h?c=_:h.sibling=_,h=_,m=v}if(g.done)return i(r,m),c;if(null===m){for(;!g.done;y++,g=l.next())null!==(g=p(r,g.value,u))&&(s=a(g,s,y),null===h?c=g:h.sibling=g,h=g);return c}for(m=n(r,m);!g.done;y++,g=l.next())null!==(g=f(m,r,y,g.value,u))&&(e&&null!==g.alternate&&m.delete(null===g.key?y:g.key),s=a(g,s,y),null===h?c=g:h.sibling=g,h=g);return e&&m.forEach((function(e){return t(r,e)})),c}return function(e,n,a,l){var u="object"===typeof a&&null!==a&&a.type===P&&null===a.key;u&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case w:e:{for(c=a.key,u=n;null!==u;){if(u.key===c){if(7===u.tag){if(a.type===P){i(e,u.sibling),(n=r(u,a.props.children)).return=e,e=n;break e}}else if(u.elementType===a.type){i(e,u.sibling),(n=r(u,a.props)).ref=ka(e,u,a),n.return=e,e=n;break e}i(e,u);break}t(e,u),u=u.sibling}a.type===P?((n=ql(a.props.children,e.mode,l,a.key)).return=e,e=n):((l=Yl(a.type,a.key,a.props,null,e.mode,l)).ref=ka(e,n,a),l.return=e,e=l)}return s(e);case k:e:{for(u=a.key;null!==n;){if(n.key===u){if(4===n.tag&&n.stateNode.containerInfo===a.containerInfo&&n.stateNode.implementation===a.implementation){i(e,n.sibling),(n=r(n,a.children||[])).return=e,e=n;break e}i(e,n);break}t(e,n),n=n.sibling}(n=$l(a,e.mode,l)).return=e,e=n}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==n&&6===n.tag?(i(e,n.sibling),(n=r(n,a)).return=e,e=n):(i(e,n),(n=Kl(a,e.mode,l)).return=e,e=n),s(e);if(wa(a))return m(e,n,a,l);if(U(a))return y(e,n,a,l);if(c&&Pa(e,a),"undefined"===typeof a&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,Y(e.type)||"Component"))}return i(e,n)}}var Ta=Sa(!0),Ca=Sa(!1),Oa={},Ia=ur(Oa),Ea=ur(Oa),Aa=ur(Oa);function Ma(e){if(e===Oa)throw Error(o(174));return e}function Da(e,t){switch(hr(Aa,t),hr(Ea,e),hr(Ia,Oa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}cr(Ia),hr(Ia,t)}function ja(){cr(Ia),cr(Ea),cr(Aa)}function Fa(e){Ma(Aa.current);var t=Ma(Ia.current),i=fe(t,e.type);t!==i&&(hr(Ea,e),hr(Ia,i))}function La(e){Ea.current===e&&(cr(Ia),cr(Ea))}var Ra=ur(0);function za(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=null,Ba=null,Na=!1;function Ua(e,t){var i=Gl(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function Wa(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ga(e){if(Na){var t=Ba;if(t){var i=t;if(!Wa(e,t)){if(!(t=qn(i.nextSibling))||!Wa(e,t))return e.flags=-1025&e.flags|2,Na=!1,void(Va=e);Ua(Va,i)}Va=e,Ba=qn(t.firstChild)}else e.flags=-1025&e.flags|2,Na=!1,Va=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function Xa(e){if(e!==Va)return!1;if(!Na)return Ha(e),Na=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Gn(t,e.memoizedProps))for(t=Ba;t;)Ua(e,t),t=qn(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){Ba=qn(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}Ba=null}}else Ba=Va?qn(e.stateNode.nextSibling):null;return!0}function Ya(){Ba=Va=null,Na=!1}var qa=[];function Za(){for(var e=0;e<qa.length;e++)qa[e]._workInProgressVersionPrimary=null;qa.length=0}var Ka=x.ReactCurrentDispatcher,$a=x.ReactCurrentBatchConfig,Ja=0,Qa=null,eo=null,to=null,io=!1,no=!1;function ro(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!cn(e[i],t[i]))return!1;return!0}function oo(e,t,i,n,r,a){if(Ja=a,Qa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ka.current=null===e||null===e.memoizedState?Do:jo,e=i(n,r),no){a=0;do{if(no=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ka.current=Fo,e=i(n,r)}while(no)}if(Ka.current=Mo,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Qa=null,io=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Qa.memoizedState=to=e:to=to.next=e,to}function lo(){if(null===eo){var e=Qa.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Qa.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Qa.memoizedState=to=e:to=to.next=e}return to}function uo(e,t){return"function"===typeof t?t(e):t}function co(e){var t=lo(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var n=eo,r=n.baseQueue,a=i.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}n.baseQueue=r=a,i.pending=null}if(null!==r){r=r.next,n=n.baseState;var l=s=a=null,u=r;do{var c=u.lane;if((Ja&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),n=u.eagerReducer===e?u.eagerState:e(n,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=h,a=n):l=l.next=h,Qa.lanes|=c,Ns|=c}u=u.next}while(null!==u&&u!==r);null===l?a=n:l.next=s,cn(n,t.memoizedState)||(Ro=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,i.lastRenderedState=n}return[t.memoizedState,i.dispatch]}function ho(e){var t=lo(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,a=t.memoizedState;if(null!==r){i.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);cn(a,t.memoizedState)||(Ro=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),i.lastRenderedState=a}return[a,n]}function po(e,t,i){var n=t._getVersion;n=n(t._source);var r=t._workInProgressVersionPrimary;if(null!==r?e=r===n:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=n,qa.push(t))),e)return i(t._source);throw qa.push(t),Error(o(350))}function fo(e,t,i,n){var r=Ds;if(null===r)throw Error(o(349));var a=t._getVersion,s=a(t._source),l=Ka.current,u=l.useState((function(){return po(r,t,i)})),c=u[1],h=u[0];u=to;var p=e.memoizedState,d=p.refs,f=d.getSnapshot,m=p.source;p=p.subscribe;var y=Qa;return e.memoizedState={refs:d,source:t,subscribe:n},l.useEffect((function(){d.getSnapshot=i,d.setSnapshot=c;var e=a(t._source);if(!cn(s,e)){e=i(t._source),cn(h,e)||(c(e),e=dl(y),r.mutableReadLanes|=e&r.pendingLanes),e=r.mutableReadLanes,r.entangledLanes|=e;for(var n=r.entanglements,o=e;0<o;){var l=31-Gt(o),u=1<<l;n[l]|=e,o&=~u}}}),[i,t,n]),l.useEffect((function(){return n(t._source,(function(){var e=d.getSnapshot,i=d.setSnapshot;try{i(e(t._source));var n=dl(y);r.mutableReadLanes|=n&r.pendingLanes}catch(a){i((function(){throw a}))}}))}),[t,n]),cn(f,i)&&cn(m,t)&&cn(p,n)||((e={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:h}).dispatch=c=Ao.bind(null,Qa,e),u.queue=e,u.baseQueue=null,h=po(r,t,i),u.memoizedState=u.baseState=h),h}function mo(e,t,i){return fo(lo(),e,t,i)}function yo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:uo,lastRenderedState:e}).dispatch=Ao.bind(null,Qa,e),[t.memoizedState,e]}function vo(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=Qa.updateQueue)?(t={lastEffect:null},Qa.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function _o(){return lo().memoizedState}function bo(e,t,i,n){var r=so();Qa.flags|=e,r.memoizedState=vo(1|t,i,void 0,void 0===n?null:n)}function xo(e,t,i,n){var r=lo();n=void 0===n?null:n;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==n&&ao(n,o.deps))return void vo(t,i,a,n)}Qa.flags|=e,r.memoizedState=vo(1|t,i,a,n)}function wo(e,t){return bo(516,4,e,t)}function ko(e,t){return xo(516,4,e,t)}function Po(e,t){return xo(4,2,e,t)}function So(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,xo(4,2,So.bind(null,t,e),i)}function Co(){}function Oo(e,t){var i=lo();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&ao(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Io(e,t){var i=lo();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&ao(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function Eo(e,t){var i=Gr();Xr(98>i?98:i,(function(){e(!0)})),Xr(97<i?97:i,(function(){var i=$a.transition;$a.transition=1;try{e(!1),t()}finally{$a.transition=i}}))}function Ao(e,t,i){var n=pl(),r=dl(e),a={lane:r,action:i,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Qa||null!==o&&o===Qa)no=io=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=o(s,i);if(a.eagerReducer=o,a.eagerState=l,cn(l,s))return}catch(u){}fl(e,r,n)}}var Mo={readContext:oa,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:wo,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,bo(4,2,So.bind(null,t,e),i)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var i=so();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=so();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ao.bind(null,Qa,e),[n.memoizedState,e]},useRef:go,useState:yo,useDebugValue:Co,useDeferredValue:function(e){var t=yo(e),i=t[0],n=t[1];return wo((function(){var t=$a.transition;$a.transition=1;try{n(e)}finally{$a.transition=t}}),[e]),i},useTransition:function(){var e=yo(!1),t=e[0];return go(e=Eo.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,i){var n=so();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:i},fo(n,e,t,i)},useOpaqueIdentifier:function(){if(Na){var e=!1,t=function(e){return{$$typeof:F,toString:e,valueOf:e}}((function(){throw e||(e=!0,i("r:"+(Kn++).toString(36))),Error(o(355))})),i=yo(t)[1];return 0===(2&Qa.mode)&&(Qa.flags|=516,vo(5,(function(){i("r:"+(Kn++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Kn++).toString(36)),t},unstable_isNewReconciler:!1},jo={readContext:oa,useCallback:Oo,useContext:oa,useEffect:ko,useImperativeHandle:To,useLayoutEffect:Po,useMemo:Io,useReducer:co,useRef:_o,useState:function(){return co(uo)},useDebugValue:Co,useDeferredValue:function(e){var t=co(uo),i=t[0],n=t[1];return ko((function(){var t=$a.transition;$a.transition=1;try{n(e)}finally{$a.transition=t}}),[e]),i},useTransition:function(){var e=co(uo)[0];return[_o().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return co(uo)[0]},unstable_isNewReconciler:!1},Fo={readContext:oa,useCallback:Oo,useContext:oa,useEffect:ko,useImperativeHandle:To,useLayoutEffect:Po,useMemo:Io,useReducer:ho,useRef:_o,useState:function(){return ho(uo)},useDebugValue:Co,useDeferredValue:function(e){var t=ho(uo),i=t[0],n=t[1];return ko((function(){var t=$a.transition;$a.transition=1;try{n(e)}finally{$a.transition=t}}),[e]),i},useTransition:function(){var e=ho(uo)[0];return[_o().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return ho(uo)[0]},unstable_isNewReconciler:!1},Lo=x.ReactCurrentOwner,Ro=!1;function zo(e,t,i,n){t.child=null===e?Ca(t,null,i,n):Ta(t,e.child,i,n)}function Vo(e,t,i,n,r){i=i.render;var a=t.ref;return aa(t,r),n=oo(e,t,i,n,a,r),null===e||Ro?(t.flags|=1,zo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,as(e,t,r))}function Bo(e,t,i,n,r,a){if(null===e){var o=i.type;return"function"!==typeof o||Hl(o)||void 0!==o.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Yl(i.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,No(e,t,o,n,r,a))}return o=e.child,0===(r&a)&&(r=o.memoizedProps,(i=null!==(i=i.compare)?i:pn)(r,n)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Xl(o,n)).ref=t.ref,e.return=t,t.child=e)}function No(e,t,i,n,r,a){if(null!==e&&pn(e.memoizedProps,n)&&e.ref===t.ref){if(Ro=!1,0===(a&r))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Ro=!0)}return Go(e,t,i,n,a)}function Uo(e,t,i){var n=t.pendingProps,r=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wl(t,i);else{if(0===(1073741824&i))return e=null!==a?a.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wl(t,e),null;t.memoizedState={baseLanes:0},wl(t,null!==a?a.baseLanes:i)}else null!==a?(n=a.baseLanes|i,t.memoizedState=null):n=i,wl(t,n);return zo(e,t,r,i),t.child}function Wo(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=128)}function Go(e,t,i,n,r){var a=vr(i)?mr:dr.current;return a=yr(t,a),aa(t,r),i=oo(e,t,i,n,a,r),null===e||Ro?(t.flags|=1,zo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~r,as(e,t,r))}function Ho(e,t,i,n,r){if(vr(i)){var a=!0;xr(t)}else a=!1;if(aa(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),_a(t,i,n),xa(t,i,n,r),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=i.contextType;"object"===typeof u&&null!==u?u=oa(u):u=yr(t,u=vr(i)?mr:dr.current);var c=i.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==n||l!==u)&&ba(t,o,n,u),sa=!1;var p=t.memoizedState;o.state=p,da(t,n,o,r),l=t.memoizedState,s!==n||p!==l||fr.current||sa?("function"===typeof c&&(ya(t,i,c,n),l=t.memoizedState),(s=sa||ga(t,i,s,n,p,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):("function"===typeof o.componentDidMount&&(t.flags|=4),n=!1)}else{o=t.stateNode,ua(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:$r(t.type,s),o.props=u,h=t.pendingProps,p=o.context,"object"===typeof(l=i.contextType)&&null!==l?l=oa(l):l=yr(t,l=vr(i)?mr:dr.current);var d=i.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||p!==l)&&ba(t,o,n,l),sa=!1,p=t.memoizedState,o.state=p,da(t,n,o,r);var f=t.memoizedState;s!==h||p!==f||fr.current||sa?("function"===typeof d&&(ya(t,i,d,n),f=t.memoizedState),(u=sa||ga(t,i,u,n,p,f,l))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=f),o.props=n,o.state=f,o.context=l,n=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=256),n=!1)}return Xo(e,t,i,n,a,r)}function Xo(e,t,i,n,r,a){Wo(e,t);var o=0!==(64&t.flags);if(!n&&!o)return r&&wr(t,i,!1),as(e,t,a);n=t.stateNode,Lo.current=t;var s=o&&"function"!==typeof i.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):zo(e,t,s,a),t.memoizedState=n.state,r&&wr(t,i,!0),t.child}function Yo(e){var t=e.stateNode;t.pendingContext?_r(0,t.pendingContext,t.pendingContext!==t.context):t.context&&_r(0,t.context,!1),Da(e,t.containerInfo)}var qo,Zo,Ko,$o={dehydrated:null,retryLane:0};function Jo(e,t,i){var n,r=t.pendingProps,a=Ra.current,o=!1;return(n=0!==(64&t.flags))||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(a|=1),hr(Ra,1&a),null===e?(void 0!==r.fallback&&Ga(t),e=r.children,a=r.fallback,o?(e=Qo(t,e,a,i),t.child.memoizedState={baseLanes:i},t.memoizedState=$o,e):"number"===typeof r.unstable_expectedLoadTime?(e=Qo(t,e,a,i),t.child.memoizedState={baseLanes:i},t.memoizedState=$o,t.lanes=33554432,e):((i=Zl({mode:"visible",children:e},t.mode,i,null)).return=t,t.child=i)):(e.memoizedState,o?(r=ts(e,t,r.children,r.fallback,i),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:i}:{baseLanes:a.baseLanes|i},o.childLanes=e.childLanes&~i,t.memoizedState=$o,r):(i=es(e,t,r.children,i),t.memoizedState=null,i))}function Qo(e,t,i,n){var r=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&r)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Zl(t,r,0,null),i=ql(i,r,n,null),a.return=e,i.return=e,a.sibling=i,e.child=a,i}function es(e,t,i,n){var r=e.child;return e=r.sibling,i=Xl(r,{mode:"visible",children:i}),0===(2&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=i}function ts(e,t,i,n,r){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:i};return 0===(2&a)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=s,null!==(o=i.lastEffect)?(t.firstEffect=i.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):i=Xl(o,s),null!==e?n=Xl(e,n):(n=ql(n,a,r,null)).flags|=2,n.return=t,i.return=t,i.sibling=n,t.child=i,n}function is(e,t){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),ra(e.return,t)}function ns(e,t,i,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=i,o.tailMode=r,o.lastEffect=a)}function rs(e,t,i){var n=t.pendingProps,r=n.revealOrder,a=n.tail;if(zo(e,t,n.children,i),0!==(2&(n=Ra.current)))n=1&n|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&is(e,i);else if(19===e.tag)is(e,i);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(hr(Ra,n),0===(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===za(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),ns(t,!1,r,i,a,t.lastEffect);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===za(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}ns(t,!0,i,null,a,t.lastEffect);break;case"together":ns(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Ns|=t.lanes,0!==(i&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(i=Xl(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Xl(e,e.pendingProps)).return=t;i.sibling=null}return t.child}return null}function os(e,t){if(!Na)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ss(e,t,i){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return vr(t.type)&&gr(),null;case 3:return ja(),cr(fr),cr(dr),Za(),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Xa(t)?t.flags|=4:n.hydrate||(t.flags|=256)),null;case 5:La(t);var a=Ma(Aa.current);if(i=t.type,null!==e&&null!=t.stateNode)Zo(e,t,i,n),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ma(Ia.current),Xa(t)){n=t.stateNode,i=t.type;var s=t.memoizedProps;switch(n[Jn]=t,n[Qn]=s,i){case"dialog":En("cancel",n),En("close",n);break;case"iframe":case"object":case"embed":En("load",n);break;case"video":case"audio":for(e=0;e<Tn.length;e++)En(Tn[e],n);break;case"source":En("error",n);break;case"img":case"image":case"link":En("error",n),En("load",n);break;case"details":En("toggle",n);break;case"input":ee(n,s),En("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},En("invalid",n);break;case"textarea":le(n,s),En("invalid",n)}for(var u in Pe(i,s),e=null,s)s.hasOwnProperty(u)&&(a=s[u],"children"===u?"string"===typeof a?n.textContent!==a&&(e=["children",a]):"number"===typeof a&&n.textContent!==""+a&&(e=["children",""+a]):l.hasOwnProperty(u)&&null!=a&&"onScroll"===u&&En("scroll",n));switch(i){case"input":K(n),ne(n,s,!0);break;case"textarea":K(n),ce(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=Bn)}n=e,t.updateQueue=n,null!==n&&(t.flags|=4)}else{switch(u=9===a.nodeType?a:a.ownerDocument,e===he&&(e=de(i)),e===he?"script"===i?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=u.createElement(i,{is:n.is}):(e=u.createElement(i),"select"===i&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,i),e[Jn]=t,e[Qn]=n,qo(e,t),t.stateNode=e,u=Se(i,n),i){case"dialog":En("cancel",e),En("close",e),a=n;break;case"iframe":case"object":case"embed":En("load",e),a=n;break;case"video":case"audio":for(a=0;a<Tn.length;a++)En(Tn[a],e);a=n;break;case"source":En("error",e),a=n;break;case"img":case"image":case"link":En("error",e),En("load",e),a=n;break;case"details":En("toggle",e),a=n;break;case"input":ee(e,n),a=Q(e,n),En("invalid",e);break;case"option":a=ae(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=r({},n,{value:void 0}),En("invalid",e);break;case"textarea":le(e,n),a=se(e,n),En("invalid",e);break;default:a=n}Pe(i,a);var c=a;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ve(e,h):"children"===s?"string"===typeof h?("textarea"!==i||""!==h)&&ge(e,h):"number"===typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=h&&"onScroll"===s&&En("scroll",e):null!=h&&b(e,s,h,u))}switch(i){case"input":K(e),ne(e,n,!1);break;case"textarea":K(e),ce(e);break;case"option":null!=n.value&&e.setAttribute("value",""+q(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?oe(e,!!n.multiple,s,!1):null!=n.defaultValue&&oe(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Bn)}Wn(i,n)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ko(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));i=Ma(Aa.current),Ma(Ia.current),Xa(t)?(n=t.stateNode,i=t.memoizedProps,n[Jn]=t,n.nodeValue!==i&&(t.flags|=4)):((n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[Jn]=t,t.stateNode=n)}return null;case 13:return cr(Ra),n=t.memoizedState,0!==(64&t.flags)?(t.lanes=i,t):(n=null!==n,i=!1,null===e?void 0!==t.memoizedProps.fallback&&Xa(t):i=null!==e.memoizedState,n&&!i&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ra.current)?0===zs&&(zs=3):(0!==zs&&3!==zs||(zs=4),null===Ds||0===(134217727&Ns)&&0===(134217727&Us)||gl(Ds,Fs))),(n||i)&&(t.flags|=4),null);case 4:return ja(),null===e&&Mn(t.stateNode.containerInfo),null;case 10:return na(t),null;case 19:if(cr(Ra),null===(n=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(u=n.rendering))if(s)os(n,!1);else{if(0!==zs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=za(e))){for(t.flags|=64,os(n,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=i,i=t.child;null!==i;)e=n,(s=i).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return hr(Ra,1&Ra.current|2),t.child}e=e.sibling}null!==n.tail&&Wr()>Xs&&(t.flags|=64,s=!0,os(n,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=za(u))){if(t.flags|=64,s=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),os(n,!0),null===n.tail&&"hidden"===n.tailMode&&!u.alternate&&!Na)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Wr()-n.renderingStartTime>Xs&&1073741824!==i&&(t.flags|=64,s=!0,os(n,!1),t.lanes=33554432);n.isBackwards?(u.sibling=t.child,t.child=u):(null!==(i=n.last)?i.sibling=u:t.child=u,n.last=u)}return null!==n.tail?(i=n.tail,n.rendering=i,n.tail=i.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Wr(),i.sibling=null,t=Ra.current,hr(Ra,s?1&t|2:1&t),i):null;case 23:case 24:return kl(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==n.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function ls(e){switch(e.tag){case 1:vr(e.type)&&gr();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(ja(),cr(fr),cr(dr),Za(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return La(e),null;case 13:return cr(Ra),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return cr(Ra),null;case 4:return ja(),null;case 10:return na(e),null;case 23:case 24:return kl(),null;default:return null}}function us(e,t){try{var i="",n=t;do{i+=X(n),n=n.return}while(n);var r=i}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r}}function cs(e,t){try{console.error(t.value)}catch(i){setTimeout((function(){throw i}))}}qo=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Zo=function(e,t,i,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Ma(Ia.current);var o,s=null;switch(i){case"input":a=Q(e,a),n=Q(e,n),s=[];break;case"option":a=ae(e,a),n=ae(e,n),s=[];break;case"select":a=r({},a,{value:void 0}),n=r({},n,{value:void 0}),s=[];break;case"textarea":a=se(e,a),n=se(e,n),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Bn)}for(h in Pe(i,n),i=null,a)if(!n.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var u=a[h];for(o in u)u.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var c=n[h];if(u=null!=a?a[h]:void 0,n.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(i||(i={}),i[o]=c[o])}else i||(s||(s=[]),s.push(h,i)),i=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&En("scroll",e),s||u===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===F?c.toString():(s=s||[]).push(h,c))}i&&(s=s||[]).push("style",i);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Ko=function(e,t,i,n){i!==n&&(t.flags|=4)};var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,i){(i=ca(-1,i)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Ks||(Ks=!0,$s=n),cs(0,t)},i}function ds(e,t,i){(i=ca(-1,i)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var r=t.value;i.payload=function(){return cs(0,t),n(r)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(i.callback=function(){"function"!==typeof n&&(null===Js?Js=new Set([this]):Js.add(this),cs(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}var fs="function"===typeof WeakSet?WeakSet:Set;function ms(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(i){Bl(e,i)}else t.current=null}function ys(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var i=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?i:$r(t.type,i),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Yn(t.stateNode.containerInfo))}throw Error(o(163))}function vs(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=i.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=i.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var r=e;n=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(Rl(i,e),Ll(i,e)),e=n}while(e!==t)}return;case 1:return e=i.stateNode,4&i.flags&&(null===t?e.componentDidMount():(n=i.elementType===i.type?t.memoizedProps:$r(i.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=i.updateQueue)&&fa(i,t,e));case 3:if(null!==(t=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 5:case 1:e=i.child.stateNode}fa(i,t,e)}return;case 5:return e=i.stateNode,void(null===t&&4&i.flags&&Wn(i.type,i.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&wt(i)))))}throw Error(o(163))}function gs(e,t){for(var i=e;;){if(5===i.tag){var n=i.stateNode;if(t)"function"===typeof(n=n.style).setProperty?n.setProperty("display","none","important"):n.display="none";else{n=i.stateNode;var r=i.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,n.style.display=xe("display",r)}}else if(6===i.tag)i.stateNode.nodeValue=t?"":i.memoizedProps;else if((23!==i.tag&&24!==i.tag||null===i.memoizedState||i===e)&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function _s(e,t){if(Pr&&"function"===typeof Pr.onCommitFiberUnmount)try{Pr.onCommitFiberUnmount(kr,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var n=i,r=n.destroy;if(n=n.tag,void 0!==r)if(0!==(4&n))Rl(t,i);else{n=t;try{r()}catch(a){Bl(n,a)}}i=i.next}while(i!==e)}break;case 1:if(ms(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Bl(t,a)}break;case 5:ms(t);break;case 4:Ss(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function xs(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(xs(t))break e;t=t.return}throw Error(o(160))}var i=t;switch(t=i.stateNode,i.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(o(161))}16&i.flags&&(ge(t,""),i.flags&=-17);e:t:for(i=e;;){for(;null===i.sibling;){if(null===i.return||xs(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.flags)continue t;if(null===i.child||4===i.tag)continue t;i.child.return=i,i=i.child}if(!(2&i.flags)){i=i.stateNode;break e}}n?ks(e,i,t):Ps(e,i,t)}function ks(e,t,i){var n=e.tag,r=5===n||6===n;if(r)e=r?e.stateNode:e.stateNode.instance,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Bn));else if(4!==n&&null!==(e=e.child))for(ks(e,t,i),e=e.sibling;null!==e;)ks(e,t,i),e=e.sibling}function Ps(e,t,i){var n=e.tag,r=5===n||6===n;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(Ps(e,t,i),e=e.sibling;null!==e;)Ps(e,t,i),e=e.sibling}function Ss(e,t){for(var i,n,r=t,a=!1;;){if(!a){a=r.return;e:for(;;){if(null===a)throw Error(o(160));switch(i=a.stateNode,a.tag){case 5:n=!1;break e;case 3:case 4:i=i.containerInfo,n=!0;break e}a=a.return}a=!0}if(5===r.tag||6===r.tag){e:for(var s=e,l=r,u=l;;)if(_s(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}n?(s=i,l=r.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):i.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){i=r.stateNode.containerInfo,n=!0,r.child.return=r,r=r.child;continue}}else if(_s(e,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(a=!1)}r.sibling.return=r.return,r=r.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var n=i=i.next;do{3===(3&n.tag)&&(e=n.destroy,n.destroy=void 0,void 0!==e&&e()),n=n.next}while(n!==i)}return;case 1:case 12:case 17:return;case 5:if(null!=(i=t.stateNode)){n=t.memoizedProps;var r=null!==e?e.memoizedProps:n;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(i[Qn]=n,"input"===e&&"radio"===n.type&&null!=n.name&&te(i,n),Se(e,r),t=Se(e,n),r=0;r<a.length;r+=2){var s=a[r],l=a[r+1];"style"===s?we(i,l):"dangerouslySetInnerHTML"===s?ve(i,l):"children"===s?ge(i,l):b(i,s,l,t)}switch(e){case"input":ie(i,n);break;case"textarea":ue(i,n);break;case"select":e=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!n.multiple,null!=(a=n.value)?oe(i,!!n.multiple,a,!1):e!==!!n.multiple&&(null!=n.defaultValue?oe(i,!!n.multiple,n.defaultValue,!0):oe(i,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((i=t.stateNode).hydrate&&(i.hydrate=!1,wt(i.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=Wr(),gs(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new fs),t.forEach((function(t){var n=Ul.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}function Os(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Is=Math.ceil,Es=x.ReactCurrentDispatcher,As=x.ReactCurrentOwner,Ms=0,Ds=null,js=null,Fs=0,Ls=0,Rs=ur(0),zs=0,Vs=null,Bs=0,Ns=0,Us=0,Ws=0,Gs=null,Hs=0,Xs=1/0;function Ys(){Xs=Wr()+500}var qs,Zs=null,Ks=!1,$s=null,Js=null,Qs=!1,el=null,tl=90,il=[],nl=[],rl=null,al=0,ol=null,sl=-1,ll=0,ul=0,cl=null,hl=!1;function pl(){return 0!==(48&Ms)?Wr():-1!==sl?sl:sl=Wr()}function dl(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Gr()?1:2;if(0===ll&&(ll=Bs),0!==Kr.transition){0!==ul&&(ul=null!==Gs?Gs.pendingLanes:0),e=ll;var t=4186112&~ul;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Gr(),0!==(4&Ms)&&98===e?e=Bt(12,ll):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function fl(e,t,i){if(50<al)throw al=0,ol=null,Error(o(185));if(null===(e=ml(e,t)))return null;Wt(e,t,i),e===Ds&&(Us|=t,4===zs&&gl(e,Fs));var n=Gr();1===t?0!==(8&Ms)&&0===(48&Ms)?_l(e):(yl(e,i),0===Ms&&(Ys(),qr())):(0===(4&Ms)||98!==n&&99!==n||(null===rl?rl=new Set([e]):rl.add(e)),yl(e,i)),Gs=e}function ml(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}function yl(e,t){for(var i=e.callbackNode,n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Gt(s),u=1<<l,c=a[l];if(-1===c){if(0===(u&n)||0!==(u&r)){c=t,Rt(u);var h=Lt;a[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);s&=~u}if(n=zt(e,e===Ds?Fs:0),t=Lt,0===n)null!==i&&(i!==Rr&&Cr(i),e.callbackNode=null,e.callbackPriority=0);else{if(null!==i){if(e.callbackPriority===t)return;i!==Rr&&Cr(i)}15===t?(i=_l.bind(null,e),null===Vr?(Vr=[i],Br=Tr(Mr,Zr)):Vr.push(i),i=Rr):14===t?i=Yr(99,_l.bind(null,e)):(i=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),i=Yr(i,vl.bind(null,e))),e.callbackPriority=t,e.callbackNode=i}}function vl(e){if(sl=-1,ul=ll=0,0!==(48&Ms))throw Error(o(327));var t=e.callbackNode;if(Fl()&&e.callbackNode!==t)return null;var i=zt(e,e===Ds?Fs:0);if(0===i)return null;var n=i,r=Ms;Ms|=16;var a=Tl();for(Ds===e&&Fs===n||(Ys(),Pl(e,n));;)try{Il();break}catch(l){Sl(e,l)}if(ia(),Es.current=a,Ms=r,null!==js?n=0:(Ds=null,Fs=0,n=zs),0!==(Bs&Us))Pl(e,0);else if(0!==n){if(2===n&&(Ms|=64,e.hydrate&&(e.hydrate=!1,Yn(e.containerInfo)),0!==(i=Vt(e))&&(n=Cl(e,i))),1===n)throw t=Vs,Pl(e,0),gl(e,i),yl(e,Wr()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=i,n){case 0:case 1:throw Error(o(345));case 2:case 5:Ml(e);break;case 3:if(gl(e,i),(62914560&i)===i&&10<(n=Hs+500-Wr())){if(0!==zt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){pl(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Hn(Ml.bind(null,e),n);break}Ml(e);break;case 4:if(gl(e,i),(4186112&i)===i)break;for(n=e.eventTimes,r=-1;0<i;){var s=31-Gt(i);a=1<<s,(s=n[s])>r&&(r=s),i&=~a}if(i=r,10<(i=(120>(i=Wr()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Is(i/1960))-i)){e.timeoutHandle=Hn(Ml.bind(null,e),i);break}Ml(e);break;default:throw Error(o(329))}}return yl(e,Wr()),e.callbackNode===t?vl.bind(null,e):null}function gl(e,t){for(t&=~Ws,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Gt(t),n=1<<i;e[i]=-1,t&=~n}}function _l(e){if(0!==(48&Ms))throw Error(o(327));if(Fl(),e===Ds&&0!==(e.expiredLanes&Fs)){var t=Fs,i=Cl(e,t);0!==(Bs&Us)&&(i=Cl(e,t=zt(e,t)))}else i=Cl(e,t=zt(e,0));if(0!==e.tag&&2===i&&(Ms|=64,e.hydrate&&(e.hydrate=!1,Yn(e.containerInfo)),0!==(t=Vt(e))&&(i=Cl(e,t))),1===i)throw i=Vs,Pl(e,0),gl(e,t),yl(e,Wr()),i;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ml(e),yl(e,Wr()),null}function bl(e,t){var i=Ms;Ms|=1;try{return e(t)}finally{0===(Ms=i)&&(Ys(),qr())}}function xl(e,t){var i=Ms;Ms&=-2,Ms|=8;try{return e(t)}finally{0===(Ms=i)&&(Ys(),qr())}}function wl(e,t){hr(Rs,Ls),Ls|=t,Bs|=t}function kl(){Ls=Rs.current,cr(Rs)}function Pl(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,Xn(i)),null!==js)for(i=js.return;null!==i;){var n=i;switch(n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&gr();break;case 3:ja(),cr(fr),cr(dr),Za();break;case 5:La(n);break;case 4:ja();break;case 13:case 19:cr(Ra);break;case 10:na(n);break;case 23:case 24:kl()}i=i.return}Ds=e,js=Xl(e.current,null),Fs=Ls=Bs=t,zs=0,Vs=null,Ws=Us=Ns=0}function Sl(e,t){for(;;){var i=js;try{if(ia(),Ka.current=Mo,io){for(var n=Qa.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}io=!1}if(Ja=0,to=eo=Qa=null,no=!1,As.current=null,null===i||null===i.return){zs=1,Vs=t,js=null;break}e:{var a=e,o=i.return,s=i,l=t;if(t=Fs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Ra.current),p=o;do{var d;if(d=13===p.tag){var f=p.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var m=p.memoizedProps;d=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(d){var y=p.updateQueue;if(null===y){var v=new Set;v.add(u),p.updateQueue=v}else y.add(u);if(0===(2&p.mode)){if(p.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=ca(-1,1);g.tag=2,ha(s,g)}s.lanes|=1;break e}l=void 0,s=t;var _=a.pingCache;if(null===_?(_=a.pingCache=new hs,l=new Set,_.set(u,l)):void 0===(l=_.get(u))&&(l=new Set,_.set(u,l)),!l.has(s)){l.add(s);var b=Nl.bind(null,a,u,s);u.then(b,b)}p.flags|=4096,p.lanes=t;break e}p=p.return}while(null!==p);l=Error((Y(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==zs&&(zs=2),l=us(l,s),p=o;do{switch(p.tag){case 3:a=l,p.flags|=4096,t&=-t,p.lanes|=t,pa(p,ps(0,a,t));break e;case 1:a=l;var x=p.type,w=p.stateNode;if(0===(64&p.flags)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Js||!Js.has(w)))){p.flags|=4096,t&=-t,p.lanes|=t,pa(p,ds(p,a,t));break e}}p=p.return}while(null!==p)}Al(i)}catch(k){t=k,js===i&&null!==i&&(js=i=i.return);continue}break}}function Tl(){var e=Es.current;return Es.current=Mo,null===e?Mo:e}function Cl(e,t){var i=Ms;Ms|=16;var n=Tl();for(Ds===e&&Fs===t||Pl(e,t);;)try{Ol();break}catch(r){Sl(e,r)}if(ia(),Ms=i,Es.current=n,null!==js)throw Error(o(261));return Ds=null,Fs=0,zs}function Ol(){for(;null!==js;)El(js)}function Il(){for(;null!==js&&!Or();)El(js)}function El(e){var t=qs(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?Al(e):js=t,As.current=null}function Al(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(i=ss(i,t,Ls)))return void(js=i);if(24!==(i=t).tag&&23!==i.tag||null===i.memoizedState||0!==(1073741824&Ls)||0===(4&i.mode)){for(var n=0,r=i.child;null!==r;)n|=r.lanes|r.childLanes,r=r.sibling;i.childLanes=n}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(i=ls(t)))return i.flags&=2047,void(js=i);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(js=t);js=t=e}while(null!==t);0===zs&&(zs=5)}function Ml(e){var t=Gr();return Xr(99,Dl.bind(null,e,t)),null}function Dl(e,t){do{Fl()}while(null!==el);if(0!==(48&Ms))throw Error(o(327));var i=e.finishedWork;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null;var n=i.lanes|i.childLanes,r=n,a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<a;){var u=31-Gt(a),c=1<<u;r[u]=0,s[u]=-1,l[u]=-1,a&=~c}if(null!==rl&&0===(24&n)&&rl.has(e)&&rl.delete(e),e===Ds&&(js=Ds=null,Fs=0),1<i.flags?null!==i.lastEffect?(i.lastEffect.nextEffect=i,n=i.firstEffect):n=i:n=i.firstEffect,null!==n){if(r=Ms,Ms|=32,As.current=null,Nn=Zt,vn(s=yn())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,a=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(T){l=null;break e}var h=0,p=-1,d=-1,f=0,m=0,y=s,v=null;t:for(;;){for(var g;y!==l||0!==a&&3!==y.nodeType||(p=h+a),y!==u||0!==c&&3!==y.nodeType||(d=h+c),3===y.nodeType&&(h+=y.nodeValue.length),null!==(g=y.firstChild);)v=y,y=g;for(;;){if(y===s)break t;if(v===l&&++f===a&&(p=h),v===u&&++m===c&&(d=h),null!==(g=y.nextSibling))break;v=(y=v).parentNode}y=g}l=-1===p||-1===d?null:{start:p,end:d}}else l=null;l=l||{start:0,end:0}}else l=null;Un={focusedElem:s,selectionRange:l},Zt=!1,cl=null,hl=!1,Zs=n;do{try{jl()}catch(T){if(null===Zs)throw Error(o(330));Bl(Zs,T),Zs=Zs.nextEffect}}while(null!==Zs);cl=null,Zs=n;do{try{for(s=e;null!==Zs;){var _=Zs.flags;if(16&_&&ge(Zs.stateNode,""),128&_){var b=Zs.alternate;if(null!==b){var x=b.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&_){case 2:ws(Zs),Zs.flags&=-3;break;case 6:ws(Zs),Zs.flags&=-3,Ts(Zs.alternate,Zs);break;case 1024:Zs.flags&=-1025;break;case 1028:Zs.flags&=-1025,Ts(Zs.alternate,Zs);break;case 4:Ts(Zs.alternate,Zs);break;case 8:Ss(s,l=Zs);var w=l.alternate;bs(l),null!==w&&bs(w)}Zs=Zs.nextEffect}}catch(T){if(null===Zs)throw Error(o(330));Bl(Zs,T),Zs=Zs.nextEffect}}while(null!==Zs);if(x=Un,b=yn(),_=x.focusedElem,s=x.selectionRange,b!==_&&_&&_.ownerDocument&&mn(_.ownerDocument.documentElement,_)){null!==s&&vn(_)&&(b=s.start,void 0===(x=s.end)&&(x=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(x,_.value.length)):(x=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),l=_.textContent.length,w=Math.min(s.start,l),s=void 0===s.end?w:Math.min(s.end,l),!x.extend&&w>s&&(l=s,s=w,w=l),l=fn(_,w),a=fn(_,s),l&&a&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==a.node||x.focusOffset!==a.offset)&&((b=b.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),w>s?(x.addRange(b),x.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),x.addRange(b))))),b=[];for(x=_;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(x=b[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Zt=!!Nn,Un=Nn=null,e.current=i,Zs=n;do{try{for(_=e;null!==Zs;){var k=Zs.flags;if(36&k&&vs(_,Zs.alternate,Zs),128&k){b=void 0;var P=Zs.ref;if(null!==P){var S=Zs.stateNode;Zs.tag,b=S,"function"===typeof P?P(b):P.current=b}}Zs=Zs.nextEffect}}catch(T){if(null===Zs)throw Error(o(330));Bl(Zs,T),Zs=Zs.nextEffect}}while(null!==Zs);Zs=null,zr(),Ms=r}else e.current=i;if(Qs)Qs=!1,el=e,tl=t;else for(Zs=n;null!==Zs;)t=Zs.nextEffect,Zs.nextEffect=null,8&Zs.flags&&((k=Zs).sibling=null,k.stateNode=null),Zs=t;if(0===(n=e.pendingLanes)&&(Js=null),1===n?e===ol?al++:(al=0,ol=e):al=0,i=i.stateNode,Pr&&"function"===typeof Pr.onCommitFiberRoot)try{Pr.onCommitFiberRoot(kr,i,void 0,64===(64&i.current.flags))}catch(T){}if(yl(e,Wr()),Ks)throw Ks=!1,e=$s,$s=null,e;return 0!==(8&Ms)||qr(),null}function jl(){for(;null!==Zs;){var e=Zs.alternate;hl||null===cl||(0!==(8&Zs.flags)?et(Zs,cl)&&(hl=!0):13===Zs.tag&&Os(e,Zs)&&et(Zs,cl)&&(hl=!0));var t=Zs.flags;0!==(256&t)&&ys(e,Zs),0===(512&t)||Qs||(Qs=!0,Yr(97,(function(){return Fl(),null}))),Zs=Zs.nextEffect}}function Fl(){if(90!==tl){var e=97<tl?97:tl;return tl=90,Xr(e,zl)}return!1}function Ll(e,t){il.push(t,e),Qs||(Qs=!0,Yr(97,(function(){return Fl(),null})))}function Rl(e,t){nl.push(t,e),Qs||(Qs=!0,Yr(97,(function(){return Fl(),null})))}function zl(){if(null===el)return!1;var e=el;if(el=null,0!==(48&Ms))throw Error(o(331));var t=Ms;Ms|=32;var i=nl;nl=[];for(var n=0;n<i.length;n+=2){var r=i[n],a=i[n+1],s=r.destroy;if(r.destroy=void 0,"function"===typeof s)try{s()}catch(u){if(null===a)throw Error(o(330));Bl(a,u)}}for(i=il,il=[],n=0;n<i.length;n+=2){r=i[n],a=i[n+1];try{var l=r.create;r.destroy=l()}catch(u){if(null===a)throw Error(o(330));Bl(a,u)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Ms=t,qr(),!0}function Vl(e,t,i){ha(e,t=ps(0,t=us(i,t),1)),t=pl(),null!==(e=ml(e,1))&&(Wt(e,1,t),yl(e,t))}function Bl(e,t){if(3===e.tag)Vl(e,e,t);else for(var i=e.return;null!==i;){if(3===i.tag){Vl(i,e,t);break}if(1===i.tag){var n=i.stateNode;if("function"===typeof i.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Js||!Js.has(n))){var r=ds(i,e=us(t,e),1);if(ha(i,r),r=pl(),null!==(i=ml(i,1)))Wt(i,1,r),yl(i,r);else if("function"===typeof n.componentDidCatch&&(null===Js||!Js.has(n)))try{n.componentDidCatch(t,e)}catch(a){}break}}i=i.return}}function Nl(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),t=pl(),e.pingedLanes|=e.suspendedLanes&i,Ds===e&&(Fs&i)===i&&(4===zs||3===zs&&(62914560&Fs)===Fs&&500>Wr()-Hs?Pl(e,0):Ws|=i),yl(e,t)}function Ul(e,t){var i=e.stateNode;null!==i&&i.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Gr()?1:2:(0===ll&&(ll=Bs),0===(t=Nt(62914560&~ll))&&(t=4194304))),i=pl(),null!==(e=ml(e,t))&&(Wt(e,t,i),yl(e,i))}function Wl(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Gl(e,t,i,n){return new Wl(e,t,i,n)}function Hl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Xl(e,t){var i=e.alternate;return null===i?((i=Gl(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Yl(e,t,i,n,r,a){var s=2;if(n=e,"function"===typeof e)Hl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case P:return ql(i.children,r,a,t);case L:s=8,r|=16;break;case S:s=8,r|=1;break;case T:return(e=Gl(12,i,t,8|r)).elementType=T,e.type=T,e.lanes=a,e;case E:return(e=Gl(13,i,t,r)).type=E,e.elementType=E,e.lanes=a,e;case A:return(e=Gl(19,i,t,r)).elementType=A,e.lanes=a,e;case R:return Zl(i,r,a,t);case z:return(e=Gl(24,i,t,r)).elementType=z,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case O:s=9;break e;case I:s=11;break e;case M:s=14;break e;case D:s=16,n=null;break e;case j:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Gl(s,i,t,r)).elementType=e,t.type=n,t.lanes=a,t}function ql(e,t,i,n){return(e=Gl(7,e,n,t)).lanes=i,e}function Zl(e,t,i,n){return(e=Gl(23,e,n,t)).elementType=R,e.lanes=i,e}function Kl(e,t,i){return(e=Gl(6,e,null,t)).lanes=i,e}function $l(e,t,i){return(t=Gl(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jl(e,t,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ut(0),this.expirationTimes=Ut(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.mutableSourceEagerHydrationData=null}function Ql(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}function eu(e,t,i,n){var r=t.current,a=pl(),s=dl(r);e:if(i){t:{if(Ke(i=i._reactInternals)!==i||1!==i.tag)throw Error(o(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(vr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===i.tag){var u=i.type;if(vr(u)){i=br(i,u,l);break e}}i=l}else i=pr;return null===t.context?t.context=i:t.pendingContext=i,(t=ca(a,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),ha(r,t),fl(r,s,a),s}function tu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function iu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function nu(e,t){iu(e,t),(e=e.alternate)&&iu(e,t)}function ru(e,t,i){var n=null!=i&&null!=i.hydrationOptions&&i.hydrationOptions.mutableSources||null;if(i=new Jl(e,t,null!=i&&!0===i.hydrate),t=Gl(3,null,null,2===t?7:1===t?3:0),i.current=t,t.stateNode=i,la(t),e[er]=i.current,Mn(8===e.nodeType?e.parentNode:e),n)for(e=0;e<n.length;e++){var r=(t=n[e])._getVersion;r=r(t._source),null==i.mutableSourceEagerHydrationData?i.mutableSourceEagerHydrationData=[t,r]:i.mutableSourceEagerHydrationData.push(t,r)}this._internalRoot=i}function au(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ou(e,t,i,n,r){var a=i._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof r){var s=r;r=function(){var e=tu(o);s.call(e)}}eu(t,o,e,r)}else{if(a=i._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new ru(e,0,t?{hydrate:!0}:void 0)}(i,n),o=a._internalRoot,"function"===typeof r){var l=r;r=function(){var e=tu(o);l.call(e)}}xl((function(){eu(t,o,e,r)}))}return tu(o)}function su(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!au(t))throw Error(o(200));return Ql(e,t,null,i)}qs=function(e,t,i){var n=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fr.current)Ro=!0;else{if(0===(i&n)){switch(Ro=!1,t.tag){case 3:Yo(t),Ya();break;case 5:Fa(t);break;case 1:vr(t.type)&&xr(t);break;case 4:Da(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var r=t.type._context;hr(Jr,r._currentValue),r._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!==(i&t.child.childLanes)?Jo(e,t,i):(hr(Ra,1&Ra.current),null!==(t=as(e,t,i))?t.sibling:null);hr(Ra,1&Ra.current);break;case 19:if(n=0!==(i&t.childLanes),0!==(64&e.flags)){if(n)return rs(e,t,i);t.flags|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),hr(Ra,Ra.current),n)break;return null;case 23:case 24:return t.lanes=0,Uo(e,t,i)}return as(e,t,i)}Ro=0!==(16384&e.flags)}else Ro=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=yr(t,dr.current),aa(t,i),r=oo(null,t,n,e,r,i),t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(n)){var a=!0;xr(t)}else a=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,la(t);var s=n.getDerivedStateFromProps;"function"===typeof s&&ya(t,n,s,e),r.updater=va,t.stateNode=r,r._reactInternals=t,xa(t,n,e,i),t=Xo(null,t,n,!0,a,i)}else t.tag=0,zo(null,t,r,i),t=t.child;return t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Hl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===M)return 14}return 2}(r),e=$r(r,e),a){case 0:t=Go(null,t,r,e,i);break e;case 1:t=Ho(null,t,r,e,i);break e;case 11:t=Vo(null,t,r,e,i);break e;case 14:t=Bo(null,t,r,$r(r.type,e),n,i);break e}throw Error(o(306,r,""))}return t;case 0:return n=t.type,r=t.pendingProps,Go(e,t,n,r=t.elementType===n?r:$r(n,r),i);case 1:return n=t.type,r=t.pendingProps,Ho(e,t,n,r=t.elementType===n?r:$r(n,r),i);case 3:if(Yo(t),n=t.updateQueue,null===e||null===n)throw Error(o(282));if(n=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,ua(e,t),da(t,n,null,i),(n=t.memoizedState.element)===r)Ya(),t=as(e,t,i);else{if((a=(r=t.stateNode).hydrate)&&(Ba=qn(t.stateNode.containerInfo.firstChild),Va=t,a=Na=!0),a){if(null!=(e=r.mutableSourceEagerHydrationData))for(r=0;r<e.length;r+=2)(a=e[r])._workInProgressVersionPrimary=e[r+1],qa.push(a);for(i=Ca(t,null,n,i),t.child=i;i;)i.flags=-3&i.flags|1024,i=i.sibling}else zo(e,t,n,i),Ya();t=t.child}return t;case 5:return Fa(t),null===e&&Ga(t),n=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,Gn(n,r)?s=null:null!==a&&Gn(n,a)&&(t.flags|=16),Wo(e,t),zo(e,t,s,i),t.child;case 6:return null===e&&Ga(t),null;case 13:return Jo(e,t,i);case 4:return Da(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ta(t,null,n,i):zo(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,Vo(e,t,n,r=t.elementType===n?r:$r(n,r),i);case 7:return zo(e,t,t.pendingProps,i),t.child;case 8:case 12:return zo(e,t,t.pendingProps.children,i),t.child;case 10:e:{n=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value;var l=t.type._context;if(hr(Jr,l._currentValue),l._currentValue=a,null!==s)if(l=s.value,0===(a=cn(l,a)?0:0|("function"===typeof n._calculateChangedBits?n._calculateChangedBits(l,a):1073741823))){if(s.children===r.children&&!fr.current){t=as(e,t,i);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===n&&0!==(c.observedBits&a)){1===l.tag&&((c=ca(-1,i&-i)).tag=2,ha(l,c)),l.lanes|=i,null!==(c=l.alternate)&&(c.lanes|=i),ra(l.return,i),u.lanes|=i;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}zo(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=(a=t.pendingProps).children,aa(t,i),n=n(r=oa(r,a.unstable_observedBits)),t.flags|=1,zo(e,t,n,i),t.child;case 14:return a=$r(r=t.type,t.pendingProps),Bo(e,t,r,a=$r(r.type,a),n,i);case 15:return No(e,t,t.type,t.pendingProps,n,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:$r(n,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,vr(n)?(e=!0,xr(t)):e=!1,aa(t,i),_a(t,n,r),xa(t,n,r,i),Xo(null,t,n,!0,e,i);case 19:return rs(e,t,i);case 23:case 24:return Uo(e,t,i)}throw Error(o(156,t.tag))},ru.prototype.render=function(e){eu(e,this._internalRoot,null,null)},ru.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;eu(null,e,null,(function(){t[er]=null}))},tt=function(e){13===e.tag&&(fl(e,4,pl()),nu(e,4))},it=function(e){13===e.tag&&(fl(e,67108864,pl()),nu(e,67108864))},nt=function(e){if(13===e.tag){var t=pl(),i=dl(e);fl(e,i,t),nu(e,i)}},rt=function(e,t){return t()},Ce=function(e,t,i){switch(t){case"input":if(ie(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=ar(n);if(!r)throw Error(o(90));$(n),ie(n,r)}}}break;case"textarea":ue(e,i);break;case"select":null!=(t=i.value)&&oe(e,!!i.multiple,t,!1)}},De=bl,je=function(e,t,i,n,r){var a=Ms;Ms|=4;try{return Xr(98,e.bind(null,t,i,n,r))}finally{0===(Ms=a)&&(Ys(),qr())}},Fe=function(){0===(49&Ms)&&(function(){if(null!==rl){var e=rl;rl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,yl(e,Wr())}))}qr()}(),Fl())},Le=function(e,t){var i=Ms;Ms|=2;try{return e(t)}finally{0===(Ms=i)&&(Ys(),qr())}};var lu={Events:[nr,rr,ar,Ae,Me,Fl,{current:!1}]},uu={findFiberByHostInstance:ir,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cu={bundleType:uu.bundleType,version:uu.version,rendererPackageName:uu.rendererPackageName,rendererConfig:uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:uu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{kr=hu.inject(cu),Pr=hu}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lu,t.createPortal=su,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var i=Ms;if(0!==(48&i))return e(t);Ms|=1;try{if(e)return Xr(99,e.bind(null,t))}finally{Ms=i,qr()}},t.hydrate=function(e,t,i){if(!au(t))throw Error(o(200));return ou(null,e,t,!0,i)},t.render=function(e,t,i){if(!au(t))throw Error(o(200));return ou(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!au(e))throw Error(o(40));return!!e._reactRootContainer&&(xl((function(){ou(null,null,e,!1,(function(){e._reactRootContainer=null,e[er]=null}))})),!0)},t.unstable_batchedUpdates=bl,t.unstable_createPortal=function(e,t){return su(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!au(i))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ou(e,t,i,!1,n)},t.version="17.0.2"},function(e,t,i){"use strict";e.exports=i(217)},function(e,t,i){"use strict";var n,r,a,o;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,h=null,p=function e(){if(null!==c)try{var i=t.unstable_now();c(!0,i),c=null}catch(n){throw setTimeout(e,0),n}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(p,0))},r=function(e,t){h=setTimeout(e,t)},a=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var y=!1,v=null,g=-1,_=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();b=e+_;try{v(!0,e)?w.postMessage(null):(y=!1,v=null)}catch(i){throw w.postMessage(null),i}}else y=!1},n=function(e){v=e,y||(y=!0,w.postMessage(null))},r=function(e,i){g=d((function(){e(t.unstable_now())}),i)},a=function(){f(g),g=-1}}function k(e,t){var i=e.length;e.push(t);e:for(;;){var n=i-1>>>1,r=e[n];if(!(void 0!==r&&0<T(r,t)))break e;e[n]=t,e[i]=r,i=n}}function P(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,r=e.length;n<r;){var a=2*(n+1)-1,o=e[a],s=a+1,l=e[s];if(void 0!==o&&0>T(o,i))void 0!==l&&0>T(l,o)?(e[n]=l,e[s]=i,n=s):(e[n]=o,e[a]=i,n=a);else{if(!(void 0!==l&&0>T(l,i)))break e;e[n]=l,e[s]=i,n=s}}}return t}return null}function T(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}var C=[],O=[],I=1,E=null,A=3,M=!1,D=!1,j=!1;function F(e){for(var t=P(O);null!==t;){if(null===t.callback)S(O);else{if(!(t.startTime<=e))break;S(O),t.sortIndex=t.expirationTime,k(C,t)}t=P(O)}}function L(e){if(j=!1,F(e),!D)if(null!==P(C))D=!0,n(R);else{var t=P(O);null!==t&&r(L,t.startTime-e)}}function R(e,i){D=!1,j&&(j=!1,a()),M=!0;var n=A;try{for(F(i),E=P(C);null!==E&&(!(E.expirationTime>i)||e&&!t.unstable_shouldYield());){var o=E.callback;if("function"===typeof o){E.callback=null,A=E.priorityLevel;var s=o(E.expirationTime<=i);i=t.unstable_now(),"function"===typeof s?E.callback=s:E===P(C)&&S(C),F(i)}else S(C);E=P(C)}if(null!==E)var l=!0;else{var u=P(O);null!==u&&r(L,u.startTime-i),l=!1}return l}finally{E=null,A=n,M=!1}}var z=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||M||(D=!0,n(R))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return P(C)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var i=A;A=t;try{return e()}finally{A=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=z,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=A;A=e;try{return t()}finally{A=i}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:I++,callback:i,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>s?(e.sortIndex=o,k(O,e),null===P(C)&&e===P(O)&&(j?a():j=!0,r(L,o-s))):(e.sortIndex=l,k(C,e),D||M||(D=!0,n(R))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var i=A;A=t;try{return e.apply(this,arguments)}finally{A=i}}}},,,function(e,t,i){"use strict";i(157);var n=i(5),r=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;r=a("react.element"),t.Fragment=a("react.fragment")}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,i){var n,a={},u=null,c=null;for(n in void 0!==i&&(u=""+i),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:r,type:e,key:u,ref:c,props:a,_owner:o.current}}t.jsx=u,t.jsxs=u},function(e,t){function i(){return e.exports=i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){"use strict";e.exports=i(223)},function(e,t,i){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,y=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case h:case p:case o:case l:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case v:case y:case u:return e;default:return t}}case a:return t}}}function k(e){return w(e)===p}t.AsyncMode=h,t.ConcurrentMode=p,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=v,t.Memo=y,t.Portal=a,t.Profiler=l,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return k(e)||w(e)===h},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===v},t.isMemo=function(e){return w(e)===y},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===l},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===p||e===l||e===s||e===f||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===y||e.$$typeof===u||e.$$typeof===c||e.$$typeof===d||e.$$typeof===_||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},function(e,t,i){"use strict";e.exports=i(225)},function(e,t,i){"use strict";var n=60103,r=60106,a=60107,o=60108,s=60114,l=60109,u=60110,c=60112,h=60113,p=60120,d=60115,f=60116,m=60121,y=60122,v=60117,g=60129,_=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),a=b("react.fragment"),o=b("react.strict_mode"),s=b("react.profiler"),l=b("react.provider"),u=b("react.context"),c=b("react.forward_ref"),h=b("react.suspense"),p=b("react.suspense_list"),d=b("react.memo"),f=b("react.lazy"),m=b("react.block"),y=b("react.server.block"),v=b("react.fundamental"),g=b("react.debug_trace_mode"),_=b("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case a:case s:case o:case h:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case f:case d:case l:return e;default:return t}}case r:return t}}}var w=l,k=n,P=c,S=a,T=f,C=d,O=r,I=s,E=o,A=h;t.ContextConsumer=u,t.ContextProvider=w,t.Element=k,t.ForwardRef=P,t.Fragment=S,t.Lazy=T,t.Memo=C,t.Portal=O,t.Profiler=I,t.StrictMode=E,t.Suspense=A,t.isAsyncMode=function(){return!1},t.isConcurrentMode=function(){return!1},t.isContextConsumer=function(e){return x(e)===u},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return x(e)===c},t.isFragment=function(e){return x(e)===a},t.isLazy=function(e){return x(e)===f},t.isMemo=function(e){return x(e)===d},t.isPortal=function(e){return x(e)===r},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===s||e===g||e===o||e===h||e===p||e===_||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===d||e.$$typeof===l||e.$$typeof===u||e.$$typeof===c||e.$$typeof===v||e.$$typeof===m||e[0]===y)},t.typeOf=x},function(e,t,i){"use strict";var n=i(227);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,a,o){if(o!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return i.PropTypes=i,i}},function(e,t,i){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,i){"use strict";e.exports=i(230)},function(e,t,i){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,y=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case h:case p:case o:case l:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case v:case y:case u:return e;default:return t}}case a:return t}}}function k(e){return w(e)===p}t.AsyncMode=h,t.ConcurrentMode=p,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=v,t.Memo=y,t.Portal=a,t.Profiler=l,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return k(e)||w(e)===h},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===v},t.isMemo=function(e){return w(e)===y},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===l},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===p||e===l||e===s||e===f||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===y||e.$$typeof===u||e.$$typeof===c||e.$$typeof===d||e.$$typeof===_||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},function(e,t,i){var n=i(123);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function i(t){return e.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,i(t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var n=i(170),r=i(171),a=i(127),o=i(173);e.exports=function(e){return n(e)||r(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var n=i(172);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){var i=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var n=i(127);e.exports=function(e,t){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=n(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var n=i(123),r=i(159),a=i(239),o=i(168);function s(t){var i="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof i){if(i.has(e))return i.get(e);i.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){var n=i(123),r=i(169),a=i(165);e.exports=function(e){var t=r();return function(){var i,r=n(e);if(t){var o=n(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return a(this,i)}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,i){},,function(e,t,i){"use strict";var n=i(128),r=i(245),a=i(249),o=i(250)||0;function s(){return r(o)}e.exports=s,e.exports.generate=s,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return o=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.isValid=a},function(e,t,i){"use strict";var n=1;e.exports={nextValue:function(){return(n=(9301*n+49297)%233280)/233280},seed:function(e){n=e}}},function(e,t,i){"use strict";var n,r,a=i(246);i(128);e.exports=function(e){var t="",i=Math.floor(.001*(Date.now()-1567752802062));return i===r?n++:(n=0,r=i),t+=a(7),t+=a(e),n>0&&(t+=a(n)),t+=a(i)}},function(e,t,i){"use strict";var n=i(128),r=i(247),a=i(248);e.exports=function(e){for(var t,i=0,o="";!t;)o+=a(r,n.get(),1),t=e<Math.pow(16,i+1),i++;return o}},function(e,t,i){"use strict";var n,r="object"===typeof window&&(window.crypto||window.msCrypto);n=r&&r.getRandomValues?function(e){return r.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],i=0;i<e;i++)t.push(Math.floor(256*Math.random()));return t},e.exports=n},function(e,t){e.exports=function(e,t,i){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*n*i/t.length),a="";;)for(var o=e(r),s=r;s--;)if((a+=t[o[s]&n]||"").length===+i)return a}},function(e,t,i){"use strict";var n=i(128);e.exports=function(e){return!(!e||"string"!==typeof e||e.length<6)&&!new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},function(e,t,i){"use strict";e.exports=0},function(e,t,i){"use strict";i.r(t),i.d(t,"capitalize",(function(){return n})),i.d(t,"createChainedFunction",(function(){return r})),i.d(t,"createSvgIcon",(function(){return fe})),i.d(t,"debounce",(function(){return me})),i.d(t,"deprecatedPropType",(function(){return ye})),i.d(t,"isMuiElement",(function(){return ve})),i.d(t,"ownerDocument",(function(){return _e})),i.d(t,"ownerWindow",(function(){return be})),i.d(t,"requirePropFactory",(function(){return xe})),i.d(t,"setRef",(function(){return we})),i.d(t,"unstable_useEnhancedEffect",(function(){return Pe})),i.d(t,"unstable_useId",(function(){return Se})),i.d(t,"unsupportedProp",(function(){return Te})),i.d(t,"useControlled",(function(){return Ce})),i.d(t,"useEventCallback",(function(){return Oe})),i.d(t,"useForkRef",(function(){return Ie})),i.d(t,"useIsFocusVisible",(function(){return Ee})),i.d(t,"unstable_ClassNameGenerator",(function(){return Ae.a}));var n=i(253).a;var r=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce((function(e,t){return null==t?e:function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];e.apply(this,n),t.apply(this,n)}}),(function(){}))},a=i(10),o=i(5),s=i(29),l=i(31),u=i(283);function c(e){var t=e.theme,i=e.name,n=e.props;return t&&t.components&&t.components[i]&&t.components[i].defaultProps?function(e,t){var i=Object(a.a)({},t);return Object.keys(e).forEach((function(t){void 0===i[t]&&(i[t]=e[t])})),i}(t.components[i].defaultProps,n):n}var h=i(296);var p=o.createContext(null);function d(){return o.useContext(p)}function f(e){return 0===Object.keys(e).length}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=d();return!t||f(t)?e:t},y=Object(h.a)();var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;return m(e)};var g=i(33),_=i(193);function b(e,t,i){var n;return Object(a.a)({toolbar:(n={minHeight:56},Object(g.a)(n,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),Object(g.a)(n,e.up("sm"),{minHeight:64}),n)},i)}var x=i(179);function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),i)}function k(e){if(e.type)return e;if("#"===e.charAt(0))return k(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),i=e.match(t);return i&&1===i[0].length&&(i=i.map((function(e){return e+e}))),i?"rgb".concat(4===i.length?"a":"","(").concat(i.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),i=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(i))throw new Error(Object(x.a)(9,e));var n,r=e.substring(t+1,e.length-1);if("color"===i){if(n=(r=r.split(" ")).shift(),4===r.length&&"/"===r[3].charAt(0)&&(r[3]=r[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n))throw new Error(Object(x.a)(10,n))}else r=r.split(",");return{type:i,values:r=r.map((function(e){return parseFloat(e)})),colorSpace:n}}function P(e){var t=e.type,i=e.colorSpace,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),n=-1!==t.indexOf("color")?"".concat(i," ").concat(n.join(" ")):"".concat(n.join(", ")),"".concat(t,"(").concat(n,")")}function S(e){var t="hsl"===(e=k(e)).type?k(function(e){var t=(e=k(e)).values,i=t[0],n=t[1]/100,r=t[2]/100,a=n*Math.min(r,1-r),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+i/30)%12;return r-a*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),P({type:s,values:l})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function T(e,t){if(e=k(e),t=w(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var i=0;i<3;i+=1)e.values[i]*=1-t;return P(e)}function C(e,t){if(e=k(e),t=w(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*t;else if(-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return P(e)}var O={black:"#000",white:"#fff"},I={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},E={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},A={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},M={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},D={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},j={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},F={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},L=["mode","contrastThreshold","tonalOffset"],R={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:O.white,default:O.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},z={text:{primary:O.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:O.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function V(e,t,i,n){var r=n.light||n,a=n.dark||1.5*n;e[t]||(e.hasOwnProperty(i)?e[t]=e[i]:"light"===t?e.light=C(e.main,r):"dark"===t&&(e.dark=T(e.main,a)))}function B(e){var t=e.mode,i=void 0===t?"light":t,n=e.contrastThreshold,r=void 0===n?3:n,o=e.tonalOffset,l=void 0===o?.2:o,u=Object(s.a)(e,L),c=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:D[200],light:D[50],dark:D[400]}:{main:D[700],light:D[400],dark:D[800]}}(i),h=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:E[200],light:E[50],dark:E[400]}:{main:E[500],light:E[300],dark:E[700]}}(i),p=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:A[500],light:A[300],dark:A[700]}:{main:A[700],light:A[400],dark:A[800]}}(i),d=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:j[400],light:j[300],dark:j[700]}:{main:j[700],light:j[500],dark:j[900]}}(i),f=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:F[400],light:F[300],dark:F[700]}:{main:F[800],light:F[500],dark:F[900]}}(i),m=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:M[400],light:M[300],dark:M[700]}:{main:"#ed6c02",light:M[500],dark:M[900]}}(i);function y(e){var t=function(e,t){var i=S(e),n=S(t);return(Math.max(i,n)+.05)/(Math.min(i,n)+.05)}(e,z.text.primary)>=r?z.text.primary:R.text.primary;return t}var v=function(e){var t=e.color,i=e.name,n=e.mainShade,r=void 0===n?500:n,o=e.lightShade,s=void 0===o?300:o,u=e.darkShade,c=void 0===u?700:u;if(!(t=Object(a.a)({},t)).main&&t[r]&&(t.main=t[r]),!t.hasOwnProperty("main"))throw new Error(Object(x.a)(11,i?" (".concat(i,")"):"",r));if("string"!==typeof t.main)throw new Error(Object(x.a)(12,i?" (".concat(i,")"):"",JSON.stringify(t.main)));return V(t,"light",s,l),V(t,"dark",c,l),t.contrastText||(t.contrastText=y(t.main)),t},g={dark:z,light:R};return Object(_.a)(Object(a.a)({common:O,mode:i,primary:v({color:c,name:"primary"}),secondary:v({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:p,name:"error"}),warning:v({color:m,name:"warning"}),info:v({color:d,name:"info"}),success:v({color:f,name:"success"}),grey:I,contrastThreshold:r,getContrastText:y,augmentColor:v,tonalOffset:l},g[i]),u)}var N=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var U={textTransform:"uppercase"},W='"Roboto", "Helvetica", "Arial", sans-serif';function G(e,t){var i="function"===typeof t?t(e):t,n=i.fontFamily,r=void 0===n?W:n,o=i.fontSize,l=void 0===o?14:o,u=i.fontWeightLight,c=void 0===u?300:u,h=i.fontWeightRegular,p=void 0===h?400:h,d=i.fontWeightMedium,f=void 0===d?500:d,m=i.fontWeightBold,y=void 0===m?700:m,v=i.htmlFontSize,g=void 0===v?16:v,b=i.allVariants,x=i.pxToRem,w=Object(s.a)(i,N);var k=l/14,P=x||function(e){return"".concat(e/g*k,"rem")},S=function(e,t,i,n,o){return Object(a.a)({fontFamily:r,fontWeight:e,fontSize:P(t),lineHeight:i},r===W?{letterSpacing:"".concat((s=n/t,Math.round(1e5*s)/1e5),"em")}:{},o,b);var s},T={h1:S(c,96,1.167,-1.5),h2:S(c,60,1.2,-.5),h3:S(p,48,1.167,0),h4:S(p,34,1.235,.25),h5:S(p,24,1.334,0),h6:S(f,20,1.6,.15),subtitle1:S(p,16,1.75,.15),subtitle2:S(f,14,1.57,.1),body1:S(p,16,1.5,.15),body2:S(p,14,1.43,.15),button:S(f,14,1.75,.4,U),caption:S(p,12,1.66,.4),overline:S(p,12,2.66,1,U)};return Object(_.a)(Object(a.a)({htmlFontSize:g,pxToRem:P,fontFamily:r,fontSize:l,fontWeightLight:c,fontWeightRegular:p,fontWeightMedium:f,fontWeightBold:y},T),w,{clone:!1})}function H(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var X=["none",H(0,2,1,-1,0,1,1,0,0,1,3,0),H(0,3,1,-2,0,2,2,0,0,1,5,0),H(0,3,3,-2,0,3,4,0,0,1,8,0),H(0,2,4,-1,0,4,5,0,0,1,10,0),H(0,3,5,-1,0,5,8,0,0,1,14,0),H(0,3,5,-1,0,6,10,0,0,1,18,0),H(0,4,5,-2,0,7,10,1,0,2,16,1),H(0,5,5,-3,0,8,10,1,0,3,14,2),H(0,5,6,-3,0,9,12,1,0,3,16,2),H(0,6,6,-3,0,10,14,1,0,4,18,3),H(0,6,7,-4,0,11,15,1,0,4,20,3),H(0,7,8,-4,0,12,17,2,0,5,22,4),H(0,7,8,-4,0,13,19,2,0,5,24,4),H(0,7,9,-4,0,14,21,2,0,5,26,4),H(0,8,9,-5,0,15,22,2,0,6,28,5),H(0,8,10,-5,0,16,24,2,0,6,30,5),H(0,8,11,-5,0,17,26,2,0,6,32,5),H(0,9,11,-5,0,18,28,2,0,7,34,6),H(0,9,12,-6,0,19,29,2,0,7,36,6),H(0,10,13,-6,0,20,31,3,0,8,38,7),H(0,10,13,-6,0,21,33,3,0,8,40,7),H(0,10,14,-6,0,22,35,3,0,8,42,7),H(0,11,14,-7,0,23,36,3,0,9,44,8),H(0,11,15,-7,0,24,38,3,0,9,46,8)],Y=["duration","easing","delay"],q={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Z={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function K(e){return"".concat(Math.round(e),"ms")}function $(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function J(e){var t=Object(a.a)({},q,e.easing),i=Object(a.a)({},Z,e.duration);return Object(a.a)({getAutoHeightDuration:$,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.duration,a=void 0===r?i.standard:r,o=n.easing,l=void 0===o?t.easeInOut:o,u=n.delay,c=void 0===u?0:u;Object(s.a)(n,Y);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:K(a)," ").concat(l," ").concat("string"===typeof c?c:K(c))})).join(",")}},e,{easing:t,duration:i})}var Q={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},ee=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,i=void 0===t?{}:t,n=e.palette,r=void 0===n?{}:n,o=e.transitions,l=void 0===o?{}:o,u=e.typography,c=void 0===u?{}:u,p=Object(s.a)(e,ee),d=B(r),f=Object(h.a)(e),m=Object(_.a)(f,{mixins:b(f.breakpoints,f.spacing,i),palette:d,shadows:X.slice(),typography:G(d,c),transitions:J(l),zIndex:Object(a.a)({},Q)});m=Object(_.a)(m,p);for(var y=arguments.length,v=new Array(y>1?y-1:0),g=1;g<y;g++)v[g-1]=arguments[g];return m=v.reduce((function(e,t){return Object(_.a)(e,t)}),m)}var ie=te();function ne(e){return function(e){var t=e.props,i=e.name,n=e.defaultTheme;return c({theme:v(n),name:i,props:t})}({props:e.props,name:e.name,defaultTheme:ie})}var re=i(191),ae=(re.b,Object(re.a)({defaultTheme:ie,rootShouldForwardProp:function(e){return Object(re.b)(e)&&"classes"!==e}})),oe=i(163),se=i(194);function le(e){return Object(oe.a)("MuiSvgIcon",e)}Object(se.a)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var ue=i(17),ce=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],he=ae("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var i=e.ownerState;return[t.root,"inherit"!==i.color&&t["color".concat(n(i.color))],t["fontSize".concat(n(i.fontSize))]]}})((function(e){var t,i,n,r,a,o,s,l,u,c,h,p,d,f,m,y,v,g=e.theme,_=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=g.transitions)||null==(i=t.create)?void 0:i.call(t,"fill",{duration:null==(n=g.transitions)||null==(r=n.duration)?void 0:r.shorter}),fontSize:{inherit:"inherit",small:(null==(a=g.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(s=g.typography)||null==(l=s.pxToRem)?void 0:l.call(s,24))||"1.5rem",large:(null==(u=g.typography)||null==(c=u.pxToRem)?void 0:c.call(u,35))||"2.1875"}[_.fontSize],color:null!=(h=null==(p=g.palette)||null==(d=p[_.color])?void 0:d.main)?h:{action:null==(f=g.palette)||null==(m=f.action)?void 0:m.active,disabled:null==(y=g.palette)||null==(v=y.action)?void 0:v.disabled,inherit:void 0}[_.color]}})),pe=o.forwardRef((function(e,t){var i=ne({props:e,name:"MuiSvgIcon"}),r=i.children,o=i.className,c=i.color,h=void 0===c?"inherit":c,p=i.component,d=void 0===p?"svg":p,f=i.fontSize,m=void 0===f?"medium":f,y=i.htmlColor,v=i.inheritViewBox,g=void 0!==v&&v,_=i.titleAccess,b=i.viewBox,x=void 0===b?"0 0 24 24":b,w=Object(s.a)(i,ce),k=Object(a.a)({},i,{color:h,component:d,fontSize:m,inheritViewBox:g,viewBox:x}),P={};g||(P.viewBox=x);var S=function(e){var t=e.color,i=e.fontSize,r=e.classes,a={root:["root","inherit"!==t&&"color".concat(n(t)),"fontSize".concat(n(i))]};return Object(u.a)(a,le,r)}(k);return Object(ue.jsxs)(he,Object(a.a)({as:d,className:Object(l.a)(S.root,o),ownerState:k,focusable:"false",color:y,"aria-hidden":!_||void 0,role:_?"img":void 0,ref:t},P,w,{children:[r,_?Object(ue.jsx)("title",{children:_}):null]}))}));pe.muiName="SvgIcon";var de=pe;function fe(e,t){var i=function(i,n){return Object(ue.jsx)(de,Object(a.a)({"data-testid":"".concat(t,"Icon"),ref:n},i,{children:e}))};return i.muiName=de.muiName,o.memo(o.forwardRef(i))}var me=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function n(){for(var n=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var s=function(){e.apply(n,a)};clearTimeout(t),t=setTimeout(s,i)}return n.clear=function(){clearTimeout(t)},n};var ye=function(e,t){return function(){return null}};var ve=function(e,t){return o.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)},ge=i(183),_e=ge.a;var be=function(e){return Object(ge.a)(e).defaultView||window};var xe=function(e,t){return function(){return null}},we=i(161).a,ke="undefined"!==typeof window?o.useLayoutEffect:o.useEffect,Pe=ke,Se=i(289).a;var Te=function(e,t,i,n,r){return null},Ce=i(288).a;var Oe=function(e){var t=o.useRef(e);return ke((function(){t.current=e})),o.useCallback((function(){return t.current.apply(void 0,arguments)}),[])},Ie=i(284).a,Ee=i(285).a,Ae=i(181)},,function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(179);function r(e){if("string"!==typeof e)throw new Error(Object(n.a)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(10),r=i(116);function a(e){return e&&"object"===Object(r.a)(e)&&e.constructor===Object}function o(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=i.clone?Object(n.a)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((function(n){"__proto__"!==n&&(a(t[n])&&n in e?r[n]=o(e[n],t[n],i):r[n]=t[n])})),r}},function(e,t,i){"use strict";i.d(t,"a",(function(){return gi}));var n=i(30),r=i(10),a=i(5),o=i.n(a),s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="object"===("undefined"===typeof window?"undefined":s(window))&&"object"===("undefined"===typeof document?"undefined":s(document))&&9===document.nodeType;i(81);function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var h=i(52),p=i(121),d=i(29),f={}.constructor;function m(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(m);if(e.constructor!==f)return e;var t={};for(var i in e)t[i]=m(e[i]);return t}function y(e,t,i){void 0===e&&(e="unnamed");var n=i.jss,r=m(t),a=n.plugins.onCreateRule(e,r,i);return a||(e[0],null)}var v=function(e,t){for(var i="",n=0;n<e.length&&"!important"!==e[n];n++)i&&(i+=t),i+=e[n];return i},g=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var i="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)i&&(i+=", "),i+=v(e[n]," ");else i=v(e,", ");return t||"!important"!==e[e.length-1]||(i+=" !important"),i};function _(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function b(e,t){for(var i="",n=0;n<t;n++)i+="  ";return i+e}function x(e,t,i){void 0===i&&(i={});var n="";if(!t)return n;var r=i.indent,a=void 0===r?0:r,o=t.fallbacks;!1===i.format&&(a=-1/0);var s=_(i),l=s.linebreak,u=s.space;if(e&&a++,o)if(Array.isArray(o))for(var c=0;c<o.length;c++){var h=o[c];for(var p in h){var d=h[p];null!=d&&(n&&(n+=l),n+=b(p+":"+u+g(d)+";",a))}}else for(var f in o){var m=o[f];null!=m&&(n&&(n+=l),n+=b(f+":"+u+g(m)+";",a))}for(var y in t){var v=t[y];null!=v&&"fallbacks"!==y&&(n&&(n+=l),n+=b(y+":"+u+g(v)+";",a))}return(n||i.allowEmpty)&&e?(n&&(n=""+l+n+l),b(""+e+u+"{"+n,--a)+b("}",a)):n}var w=/([[\].#*$><+~=|^:(),"'`\s])/g,k="undefined"!==typeof CSS&&CSS.escape,P=function(e){return k?k(e):e.replace(w,"\\$1")},S=function(){function e(e,t,i){this.type="style",this.isProcessed=!1;var n=i.sheet,r=i.Renderer;this.key=e,this.options=i,this.style=t,n?this.renderer=n.renderer:r&&(this.renderer=new r)}return e.prototype.prop=function(e,t,i){if(void 0===t)return this.style[e];var n=!!i&&i.force;if(!n&&this.style[e]===t)return this;var r=t;i&&!1===i.process||(r=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==r||!1===r,o=e in this.style;if(a&&!o&&!n)return this;var s=a&&o;if(s?delete this.style[e]:this.style[e]=r,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,r),this;var l=this.options.sheet;return l&&l.attached,this},e}(),T=function(e){function t(t,i,n){var r;r=e.call(this,t,i,n)||this;var a=n.selector,o=n.scoped,s=n.sheet,l=n.generateId;return a?r.selectorText=a:!1!==o&&(r.id=l(Object(p.a)(Object(p.a)(r)),s),r.selectorText="."+P(r.id)),r}Object(h.a)(t,e);var i=t.prototype;return i.applyTo=function(e){var t=this.renderer;if(t){var i=this.toJSON();for(var n in i)t.setProperty(e,n,i[n])}return this},i.toJSON=function(){var e={};for(var t in this.style){var i=this.style[t];"object"!==typeof i?e[t]=i:Array.isArray(i)&&(e[t]=g(i))}return e},i.toString=function(e){var t=this.options.sheet,i=!!t&&t.options.link?Object(r.a)({},e,{allowEmpty:!0}):e;return x(this.selectorText,this.style,i)},c(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,i=this.renderable;if(i&&t)t.setSelector(i,e)||t.replaceRule(i,this)}},get:function(){return this.selectorText}}]),t}(S),C={onCreateRule:function(e,t,i){return"@"===e[0]||i.parent&&"keyframes"===i.parent.type?null:new T(e,t,i)}},O={indent:1,children:!0},I=/@([\w-]+)/,E=function(){function e(e,t,i){this.type="conditional",this.isProcessed=!1,this.key=e;var n=e.match(I);for(var a in this.at=n?n[1]:"unknown",this.query=i.name||"@"+this.at,this.options=i,this.rules=new Q(Object(r.a)({},i,{parent:this})),t)this.rules.add(a,t[a]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,i){var n=this.rules.add(e,t,i);return n?(this.options.jss.plugins.onProcessRule(n),n):null},t.replaceRule=function(e,t,i){var n=this.rules.replace(e,t,i);return n&&this.options.jss.plugins.onProcessRule(n),n},t.toString=function(e){void 0===e&&(e=O);var t=_(e).linebreak;if(null==e.indent&&(e.indent=O.indent),null==e.children&&(e.children=O.children),!1===e.children)return this.query+" {}";var i=this.rules.toString(e);return i?this.query+" {"+t+i+t+"}":""},e}(),A=/@media|@supports\s+/,M={onCreateRule:function(e,t,i){return A.test(e)?new E(e,t,i):null}},D={indent:1,children:!0},j=/@keyframes\s+([\w-]+)/,F=function(){function e(e,t,i){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var n=e.match(j);n&&n[1]?this.name=n[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=i;var a=i.scoped,o=i.sheet,s=i.generateId;for(var l in this.id=!1===a?this.name:P(s(this,o)),this.rules=new Q(Object(r.a)({},i,{parent:this})),t)this.rules.add(l,t[l],Object(r.a)({},i,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=D);var t=_(e).linebreak;if(null==e.indent&&(e.indent=D.indent),null==e.children&&(e.children=D.children),!1===e.children)return this.at+" "+this.id+" {}";var i=this.rules.toString(e);return i&&(i=""+t+i+t),this.at+" "+this.id+" {"+i+"}"},e}(),L=/@keyframes\s+/,R=/\$([\w-]+)/g,z=function(e,t){return"string"===typeof e?e.replace(R,(function(e,i){return i in t?t[i]:e})):e},V=function(e,t,i){var n=e[t],r=z(n,i);r!==n&&(e[t]=r)},B={onCreateRule:function(e,t,i){return"string"===typeof e&&L.test(e)?new F(e,t,i):null},onProcessStyle:function(e,t,i){return"style"===t.type&&i?("animation-name"in e&&V(e,"animation-name",i.keyframes),"animation"in e&&V(e,"animation",i.keyframes),e):e},onChangeValue:function(e,t,i){var n=i.options.sheet;if(!n)return e;switch(t){case"animation":case"animation-name":return z(e,n.keyframes);default:return e}}},N=function(e){function t(){return e.apply(this,arguments)||this}return Object(h.a)(t,e),t.prototype.toString=function(e){var t=this.options.sheet,i=!!t&&t.options.link?Object(r.a)({},e,{allowEmpty:!0}):e;return x(this.key,this.style,i)},t}(S),U={onCreateRule:function(e,t,i){return i.parent&&"keyframes"===i.parent.type?new N(e,t,i):null}},W=function(){function e(e,t,i){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=i}return e.prototype.toString=function(e){var t=_(e).linebreak;if(Array.isArray(this.style)){for(var i="",n=0;n<this.style.length;n++)i+=x(this.at,this.style[n]),this.style[n+1]&&(i+=t);return i}return x(this.at,this.style,e)},e}(),G=/@font-face/,H={onCreateRule:function(e,t,i){return G.test(e)?new W(e,t,i):null}},X=function(){function e(e,t,i){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=i}return e.prototype.toString=function(e){return x(this.key,this.style,e)},e}(),Y={onCreateRule:function(e,t,i){return"@viewport"===e||"@-ms-viewport"===e?new X(e,t,i):null}},q=function(){function e(e,t,i){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=i}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",i=0;i<this.value.length;i++)t+=this.key+" "+this.value[i]+";",this.value[i+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Z={"@charset":!0,"@import":!0,"@namespace":!0},K=[C,M,B,U,H,Y,{onCreateRule:function(e,t,i){return e in Z?new q(e,t,i):null}}],$={process:!0},J={force:!0,process:!0},Q=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,i){var n=this.options,a=n.parent,o=n.sheet,s=n.jss,l=n.Renderer,u=n.generateId,c=n.scoped,h=Object(r.a)({classes:this.classes,parent:a,sheet:o,jss:s,Renderer:l,generateId:u,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},i),p=e;e in this.raw&&(p=e+"-d"+this.counter++),this.raw[p]=t,p in this.classes&&(h.selector="."+P(this.classes[p]));var d=y(p,t,h);if(!d)return null;this.register(d);var f=void 0===h.index?this.index.length:h.index;return this.index.splice(f,0,d),d},t.replace=function(e,t,i){var n=this.get(e),a=this.index.indexOf(n);n&&this.remove(n);var o=i;return-1!==a&&(o=Object(r.a)({},i,{index:a})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof T?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof F&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof T?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof F&&delete this.keyframes[e.name]},t.update=function(){var e,t,i;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,i);else for(var n=0;n<this.index.length;n++)this.updateOne(this.index[n],t,i)},t.updateOne=function(t,i,n){void 0===n&&(n=$);var r=this.options,a=r.jss.plugins,o=r.sheet;if(t.rules instanceof e)t.rules.update(i,n);else{var s=t.style;if(a.onUpdate(i,t,o,n),n.process&&s&&s!==t.style){for(var l in a.onProcessStyle(t.style,t,o),t.style){var u=t.style[l];u!==s[l]&&t.prop(l,u,J)}for(var c in s){var h=t.style[c],p=s[c];null==h&&h!==p&&t.prop(c,null,J)}}}},t.toString=function(e){for(var t="",i=this.options.sheet,n=!!i&&i.options.link,r=_(e).linebreak,a=0;a<this.index.length;a++){var o=this.index[a].toString(e);(o||n)&&(t&&(t+=r),t+=o)}return t},e}(),ee=function(){function e(e,t){for(var i in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Object(r.a)({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Q(this.options),e)this.rules.add(i,e[i]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,i){var n=this.queue;this.attached&&!n&&(this.queue=[]);var r=this.rules.add(e,t,i);return r?(this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(n?n.push(r):(this.insertRule(r),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),r):r:(this.deployed=!1,r)):null},t.replaceRule=function(e,t,i){var n=this.rules.get(e);if(!n)return this.addRule(e,t,i);var r=this.rules.replace(e,t,i);return r&&this.options.jss.plugins.onProcessRule(r),this.attached?this.deployed?(this.renderer&&(r?n.renderable&&this.renderer.replaceRule(n.renderable,r):this.renderer.deleteRule(n)),r):r:(this.deployed=!1,r)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var i=[];for(var n in e){var r=this.addRule(n,e[n],t);r&&i.push(r)}return i},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,i){return this.rules.updateOne(e,t,i),this},t.toString=function(e){return this.rules.toString(e)},e}(),te=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,i){for(var n=0;n<this.registry.onCreateRule.length;n++){var r=this.registry.onCreateRule[n](e,t,i);if(r)return r}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,i){for(var n=0;n<this.registry.onProcessStyle.length;n++)t.style=this.registry.onProcessStyle[n](t.style,t,i)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,i,n){for(var r=0;r<this.registry.onUpdate.length;r++)this.registry.onUpdate[r](e,t,i,n)},t.onChangeValue=function(e,t,i){for(var n=e,r=0;r<this.registry.onChangeValue.length;r++)n=this.registry.onChangeValue[r](n,t,i);return n},t.use=function(e,t){void 0===t&&(t={queue:"external"});var i=this.plugins[t.queue];-1===i.indexOf(e)&&(i.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var i in t)i in e&&e[i].push(t[i]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),ie=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,i=e.options.index;if(-1===t.indexOf(e))if(0===t.length||i>=this.index)t.push(e);else for(var n=0;n<t.length;n++)if(t[n].options.index>i)return void t.splice(n,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,i=t.attached,n=Object(d.a)(t,["attached"]),r=_(n).linebreak,a="",o=0;o<this.registry.length;o++){var s=this.registry[o];null!=i&&s.attached!==i||(a&&(a+=r),a+=s.toString(n))}return a},c(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),ne="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),re="2f1acc6c3a606b082e5eef5e54414ffb";null==ne[re]&&(ne[re]=0);var ae=ne[re]++,oe=function(e){void 0===e&&(e={});var t=0;return function(i,n){t+=1;var r="",a="";return n&&(n.options.classNamePrefix&&(a=n.options.classNamePrefix),null!=n.options.jss.id&&(r=String(n.options.jss.id))),e.minify?""+(a||"c")+ae+r+t:a+i.key+"-"+ae+(r?"-"+r:"")+"-"+t}},se=function(e){var t;return function(){return t||(t=e()),t}},le=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(i){return""}},ue=function(e,t,i){try{var n=i;if(Array.isArray(i)&&(n=g(i,!0),"!important"===i[i.length-1]))return e.style.setProperty(t,n,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,n):e.style.setProperty(t,n)}catch(r){return!1}return!0},ce=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(i){}},he=function(e,t){return e.selectorText=t,e.selectorText===t},pe=se((function(){return document.querySelector("head")}));function de(e){var t=ie.registry;if(t.length>0){var i=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.attached&&n.options.index>t.index&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e);if(i&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element};if(i=function(e,t){for(var i=e.length-1;i>=0;i--){var n=e[i];if(n.attached&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e),i&&i.renderer)return{parent:i.renderer.element.parentNode,node:i.renderer.element.nextSibling}}var n=e.insertionPoint;if(n&&"string"===typeof n){var r=function(e){for(var t=pe(),i=0;i<t.childNodes.length;i++){var n=t.childNodes[i];if(8===n.nodeType&&n.nodeValue.trim()===e)return n}return null}(n);if(r)return{parent:r.parentNode,node:r.nextSibling}}return!1}var fe=se((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),me=function(e,t,i){try{"insertRule"in e?e.insertRule(t,i):"appendRule"in e&&e.appendRule(t)}catch(n){return!1}return e.cssRules[i]},ye=function(e,t){var i=e.cssRules.length;return void 0===t||t>i?i:t},ve=function(){function e(e){this.getPropertyValue=le,this.setProperty=ue,this.removeProperty=ce,this.setSelector=he,this.hasInsertedRules=!1,this.cssRules=[],e&&ie.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},i=t.media,n=t.meta,r=t.element;this.element=r||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),i&&this.element.setAttribute("media",i),n&&this.element.setAttribute("data-meta",n);var a=fe();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var i=t.insertionPoint,n=de(t);if(!1!==n&&n.parent)n.parent.insertBefore(e,n.node);else if(i&&"number"===typeof i.nodeType){var r=i,a=r.parentNode;a&&a.insertBefore(e,r.nextSibling)}else pe().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var i=0;i<e.index.length;i++)this.insertRule(e.index[i],i,t)},t.insertRule=function(e,t,i){if(void 0===i&&(i=this.element.sheet),e.rules){var n=e,r=i;if("conditional"===e.type||"keyframes"===e.type){var a=ye(i,t);if(!1===(r=me(i,n.toString({children:!1}),a)))return!1;this.refCssRule(e,a,r)}return this.insertRules(n.rules,r),r}var o=e.toString();if(!o)return!1;var s=ye(i,t),l=me(i,o,s);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,s,l),l)},t.refCssRule=function(e,t,i){e.renderable=i,e.options.parent instanceof ee&&this.cssRules.splice(t,0,i)},t.deleteRule=function(e){var t=this.element.sheet,i=this.indexOf(e);return-1!==i&&(t.deleteRule(i),this.cssRules.splice(i,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var i=this.indexOf(e);return-1!==i&&(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(t,i))},t.getRules=function(){return this.element.sheet.cssRules},e}(),ge=0,_e=function(){function e(e){this.id=ge++,this.version="10.9.0",this.plugins=new te,this.options={id:{minify:!1},createGenerateId:oe,Renderer:l?ve:null,plugins:[]},this.generateId=oe({minify:!1});for(var t=0;t<K.length;t++)this.plugins.use(K[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Object(r.a)({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var i=t.index;"number"!==typeof i&&(i=0===ie.index?0:ie.index+1);var n=new ee(e,Object(r.a)({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:i}));return this.plugins.onProcessSheet(n),n},t.removeStyleSheet=function(e){return e.detach(),ie.remove(e),this},t.createRule=function(e,t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),"object"===typeof e)return this.createRule(void 0,e,t);var n=Object(r.a)({},i,{name:e,jss:this,Renderer:this.options.Renderer});n.generateId||(n.generateId=this.generateId),n.classes||(n.classes={}),n.keyframes||(n.keyframes={});var a=y(e,t,n);return a&&this.plugins.onProcessRule(a),a},t.use=function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach((function(t){e.plugins.use(t)})),this},e}(),be=function(e){return new _e(e)},xe="object"===typeof CSS&&null!=CSS&&"number"in CSS;function we(e){var t=null;for(var i in e){var n=e[i],r=typeof n;if("function"===r)t||(t={}),t[i]=n;else if("object"===r&&null!==n&&!Array.isArray(n)){var a=we(n);a&&(t||(t={}),t[i]=a)}}return t}be();function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,i=e.newClasses;e.Component;if(!i)return t;var n=Object(r.a)({},t);return Object.keys(i).forEach((function(e){i[e]&&(n[e]="".concat(t[e]," ").concat(i[e]))})),n}var Pe={set:function(e,t,i,n){var r=e.get(t);r||(r=new Map,e.set(t,r)),r.set(i,n)},get:function(e,t,i){var n=e.get(t);return n?n.get(i):void 0},delete:function(e,t,i){e.get(t).delete(i)}},Se=Pe,Te=i(302),Ce="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",Oe=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var Ie=Date.now(),Ee="fnValues"+Ie,Ae="fnStyle"+ ++Ie,Me=function(){return{onCreateRule:function(e,t,i){if("function"!==typeof t)return null;var n=y(e,{},i);return n[Ae]=t,n},onProcessStyle:function(e,t){if(Ee in t||Ae in t)return e;var i={};for(var n in e){var r=e[n];"function"===typeof r&&(delete e[n],i[n]=r)}return t[Ee]=i,e},onUpdate:function(e,t,i,n){var r=t,a=r[Ae];a&&(r.style=a(e)||{});var o=r[Ee];if(o)for(var s in o)r.prop(s,o[s](e),n)}}},De="@global",je="@global ",Fe=function(){function e(e,t,i){for(var n in this.type="global",this.at=De,this.isProcessed=!1,this.key=e,this.options=i,this.rules=new Q(Object(r.a)({},i,{parent:this})),t)this.rules.add(n,t[n]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,i){var n=this.rules.add(e,t,i);return n&&this.options.jss.plugins.onProcessRule(n),n},t.replaceRule=function(e,t,i){var n=this.rules.replace(e,t,i);return n&&this.options.jss.plugins.onProcessRule(n),n},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Le=function(){function e(e,t,i){this.type="global",this.at=De,this.isProcessed=!1,this.key=e,this.options=i;var n=e.substr(je.length);this.rule=i.jss.createRule(n,t,Object(r.a)({},i,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Re=/\s*,\s*/g;function ze(e,t){for(var i=e.split(Re),n="",r=0;r<i.length;r++)n+=t+" "+i[r].trim(),i[r+1]&&(n+=", ");return n}var Ve=function(){return{onCreateRule:function(e,t,i){if(!e)return null;if(e===De)return new Fe(e,t,i);if("@"===e[0]&&e.substr(0,je.length)===je)return new Le(e,t,i);var n=i.parent;return n&&("global"===n.type||n.options.parent&&"global"===n.options.parent.type)&&(i.scoped=!1),i.selector||!1!==i.scoped||(i.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var i=e.options,n=e.style,a=n?n[De]:null;if(a){for(var o in a)t.addRule(o,a[o],Object(r.a)({},i,{selector:ze(o,e.selector)}));delete n[De]}}(e,t),function(e,t){var i=e.options,n=e.style;for(var a in n)if("@"===a[0]&&a.substr(0,De.length)===De){var o=ze(a.substr(De.length),e.selector);t.addRule(o,n[a],Object(r.a)({},i,{selector:o})),delete n[a]}}(e,t))}}},Be=/\s*,\s*/g,Ne=/&/g,Ue=/\$([\w-]+)/g;var We=function(){function e(e,t){return function(i,n){var r=e.getRule(n)||t&&t.getRule(n);return r?r.selector:n}}function t(e,t){for(var i=t.split(Be),n=e.split(Be),r="",a=0;a<i.length;a++)for(var o=i[a],s=0;s<n.length;s++){var l=n[s];r&&(r+=", "),r+=-1!==l.indexOf("&")?l.replace(Ne,o):o+" "+l}return r}function i(e,t,i){if(i)return Object(r.a)({},i,{index:i.index+1});var n=e.options.nestingLevel;n=void 0===n?1:n+1;var a=Object(r.a)({},e.options,{nestingLevel:n,index:t.indexOf(e)+1});return delete a.name,a}return{onProcessStyle:function(n,a,o){if("style"!==a.type)return n;var s,l,u=a,c=u.options.parent;for(var h in n){var p=-1!==h.indexOf("&"),d="@"===h[0];if(p||d){if(s=i(u,c,s),p){var f=t(h,u.selector);l||(l=e(c,o)),f=f.replace(Ue,l);var m=u.key+"-"+h;"replaceRule"in c?c.replaceRule(m,n[h],Object(r.a)({},s,{selector:f})):c.addRule(m,n[h],Object(r.a)({},s,{selector:f}))}else d&&c.addRule(h,{},s).addRule(u.key,n[h],{selector:u.selector});delete n[h]}}return n}}},Ge=/[A-Z]/g,He=/^ms-/,Xe={};function Ye(e){return"-"+e.toLowerCase()}var qe=function(e){if(Xe.hasOwnProperty(e))return Xe[e];var t=e.replace(Ge,Ye);return Xe[e]=He.test(t)?"-"+t:t};function Ze(e){var t={};for(var i in e){t[0===i.indexOf("--")?i:qe(i)]=e[i]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Ze):t.fallbacks=Ze(e.fallbacks)),t}var Ke=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Ze(e[t]);return e}return Ze(e)},onChangeValue:function(e,t,i){if(0===t.indexOf("--"))return e;var n=qe(t);return t===n?e:(i.prop(n,e),null)}}},$e=xe&&CSS?CSS.px:"px",Je=xe&&CSS?CSS.ms:"ms",Qe=xe&&CSS?CSS.percent:"%";function et(e){var t=/(-[a-z])/g,i=function(e){return e[1].toUpperCase()},n={};for(var r in e)n[r]=e[r],n[r.replace(t,i)]=e[r];return n}var tt=et({"animation-delay":Je,"animation-duration":Je,"background-position":$e,"background-position-x":$e,"background-position-y":$e,"background-size":$e,border:$e,"border-bottom":$e,"border-bottom-left-radius":$e,"border-bottom-right-radius":$e,"border-bottom-width":$e,"border-left":$e,"border-left-width":$e,"border-radius":$e,"border-right":$e,"border-right-width":$e,"border-top":$e,"border-top-left-radius":$e,"border-top-right-radius":$e,"border-top-width":$e,"border-width":$e,"border-block":$e,"border-block-end":$e,"border-block-end-width":$e,"border-block-start":$e,"border-block-start-width":$e,"border-block-width":$e,"border-inline":$e,"border-inline-end":$e,"border-inline-end-width":$e,"border-inline-start":$e,"border-inline-start-width":$e,"border-inline-width":$e,"border-start-start-radius":$e,"border-start-end-radius":$e,"border-end-start-radius":$e,"border-end-end-radius":$e,margin:$e,"margin-bottom":$e,"margin-left":$e,"margin-right":$e,"margin-top":$e,"margin-block":$e,"margin-block-end":$e,"margin-block-start":$e,"margin-inline":$e,"margin-inline-end":$e,"margin-inline-start":$e,padding:$e,"padding-bottom":$e,"padding-left":$e,"padding-right":$e,"padding-top":$e,"padding-block":$e,"padding-block-end":$e,"padding-block-start":$e,"padding-inline":$e,"padding-inline-end":$e,"padding-inline-start":$e,"mask-position-x":$e,"mask-position-y":$e,"mask-size":$e,height:$e,width:$e,"min-height":$e,"max-height":$e,"min-width":$e,"max-width":$e,bottom:$e,left:$e,top:$e,right:$e,inset:$e,"inset-block":$e,"inset-block-end":$e,"inset-block-start":$e,"inset-inline":$e,"inset-inline-end":$e,"inset-inline-start":$e,"box-shadow":$e,"text-shadow":$e,"column-gap":$e,"column-rule":$e,"column-rule-width":$e,"column-width":$e,"font-size":$e,"font-size-delta":$e,"letter-spacing":$e,"text-decoration-thickness":$e,"text-indent":$e,"text-stroke":$e,"text-stroke-width":$e,"word-spacing":$e,motion:$e,"motion-offset":$e,outline:$e,"outline-offset":$e,"outline-width":$e,perspective:$e,"perspective-origin-x":Qe,"perspective-origin-y":Qe,"transform-origin":Qe,"transform-origin-x":Qe,"transform-origin-y":Qe,"transform-origin-z":Qe,"transition-delay":Je,"transition-duration":Je,"vertical-align":$e,"flex-basis":$e,"shape-margin":$e,size:$e,gap:$e,grid:$e,"grid-gap":$e,"row-gap":$e,"grid-row-gap":$e,"grid-column-gap":$e,"grid-template-rows":$e,"grid-template-columns":$e,"grid-auto-rows":$e,"grid-auto-columns":$e,"box-shadow-x":$e,"box-shadow-y":$e,"box-shadow-blur":$e,"box-shadow-spread":$e,"font-line-height":$e,"text-shadow-x":$e,"text-shadow-y":$e,"text-shadow-blur":$e});function it(e,t,i){if(null==t)return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=it(e,t[n],i);else if("object"===typeof t)if("fallbacks"===e)for(var r in t)t[r]=it(r,t[r],i);else for(var a in t)t[a]=it(e+"-"+a,t[a],i);else if("number"===typeof t&&!1===isNaN(t)){var o=i[e]||tt[e];return!o||0===t&&o===$e?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var nt=function(e){void 0===e&&(e={});var t=et(e);return{onProcessStyle:function(e,i){if("style"!==i.type)return e;for(var n in e)e[n]=it(n,e[n],t);return e},onChangeValue:function(e,i){return it(i,e,t)}}},rt=i(60),at="",ot="",st="",lt="",ut=l&&"ontouchstart"in document.documentElement;if(l){var ct={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},ht=document.createElement("p").style;for(var pt in ct)if(pt+"Transform"in ht){at=pt,ot=ct[pt];break}"Webkit"===at&&"msHyphens"in ht&&(at="ms",ot=ct.ms,lt="edge"),"Webkit"===at&&"-apple-trailing-word"in ht&&(st="apple")}var dt=at,ft=ot,mt=st,yt=lt,vt=ut;var gt={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===dt?"-webkit-"+e:ft+e)}},_t={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===dt?ft+"print-"+e:e)}},bt=/[-\s]+(.)?/g;function xt(e,t){return t?t.toUpperCase():""}function wt(e){return e.replace(bt,xt)}function kt(e){return wt("-"+e)}var Pt,St={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===dt){var i="mask-image";if(wt(i)in t)return e;if(dt+kt(i)in t)return ft+e}return e}},Tt={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==mt||vt?e:ft+e)}},Ct={noPrefill:["transform"],supportedProperty:function(e,t,i){return"transform"===e&&(i.transform?e:ft+e)}},Ot={noPrefill:["transition"],supportedProperty:function(e,t,i){return"transition"===e&&(i.transition?e:ft+e)}},It={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===dt||"ms"===dt&&"edge"!==yt?ft+e:e)}},Et={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===dt||"ms"===dt||"apple"===mt?ft+e:e)}},At={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===dt?"WebkitColumn"+kt(e)in t&&ft+"column-"+e:"Moz"===dt&&("page"+kt(e)in t&&"page-"+e))}},Mt={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===dt)return e;var i=e.replace("-inline","");return dt+kt(i)in t&&ft+i}},Dt={supportedProperty:function(e,t){return wt(e)in t&&e}},jt={supportedProperty:function(e,t){var i=kt(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:dt+i in t?ft+e:"Webkit"!==dt&&"Webkit"+i in t&&"-webkit-"+e}},Ft={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===dt?""+ft+e:e)}},Lt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===dt?ft+"scroll-chaining":e)}},Rt={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},zt={supportedProperty:function(e,t){var i=Rt[e];return!!i&&(dt+kt(i)in t&&ft+i)}},Vt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Bt=Object.keys(Vt),Nt=function(e){return ft+e},Ut=[gt,_t,St,Tt,Ct,Ot,It,Et,At,Mt,Dt,jt,Ft,Lt,zt,{supportedProperty:function(e,t,i){var n=i.multiple;if(Bt.indexOf(e)>-1){var r=Vt[e];if(!Array.isArray(r))return dt+kt(r)in t&&ft+r;if(!n)return!1;for(var a=0;a<r.length;a++)if(!(dt+kt(r[0])in t))return!1;return r.map(Nt)}return!1}}],Wt=Ut.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Gt=Ut.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Object(rt.a)(t.noPrefill)),e}),[]),Ht={};if(l){Pt=document.createElement("p");var Xt=window.getComputedStyle(document.documentElement,"");for(var Yt in Xt)isNaN(Yt)||(Ht[Xt[Yt]]=Xt[Yt]);Gt.forEach((function(e){return delete Ht[e]}))}function qt(e,t){if(void 0===t&&(t={}),!Pt)return e;if(null!=Ht[e])return Ht[e];"transition"!==e&&"transform"!==e||(t[e]=e in Pt.style);for(var i=0;i<Wt.length&&(Ht[e]=Wt[i](e,Pt.style,t),!Ht[e]);i++);try{Pt.style[e]=""}catch(n){return!1}return Ht[e]}var Zt,Kt={},$t={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Jt=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Qt(e,t,i){if("var"===t)return"var";if("all"===t)return"all";if("all"===i)return", all";var n=t?qt(t):", "+qt(i);return n||(t||i)}function ei(e,t){var i=t;if(!Zt||"content"===e)return t;if("string"!==typeof i||!isNaN(parseInt(i,10)))return i;var n=e+i;if(null!=Kt[n])return Kt[n];try{Zt.style[e]=i}catch(r){return Kt[n]=!1,!1}if($t[e])i=i.replace(Jt,Qt);else if(""===Zt.style[e]&&("-ms-flex"===(i=ft+i)&&(Zt.style[e]="-ms-flexbox"),Zt.style[e]=i,""===Zt.style[e]))return Kt[n]=!1,!1;return Zt.style[e]="",Kt[n]=i,Kt[n]}l&&(Zt=document.createElement("p"));var ti=function(){function e(t){for(var i in t){var n=t[i];if("fallbacks"===i&&Array.isArray(n))t[i]=n.map(e);else{var r=!1,a=qt(i);a&&a!==i&&(r=!0);var o=!1,s=ei(a,g(n));s&&s!==n&&(o=!0),(r||o)&&(r&&delete t[i],t[a||i]=s||n)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at="-"===(i=t.at)[1]||"ms"===dt?i:"@"+ft+"keyframes"+i.substr(10)}var i},onProcessStyle:function(t,i){return"style"!==i.type?t:e(t)},onChangeValue:function(e,t){return ei(t,g(e))||e}}};var ii=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,i){if("style"!==i.type)return t;for(var n={},r=Object.keys(t).sort(e),a=0;a<r.length;a++)n[r[a]]=t[r[a]];return n}}};function ni(){return{plugins:[Me(),Ve(),We(),Ke(),nt(),"undefined"===typeof window?null:ti(),ii()]}}var ri=be(ni()),ai=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,i=void 0!==t&&t,n=e.productionPrefix,r=void 0===n?"jss":n,a=e.seed,o=void 0===a?"":a,s=""===o?"":"".concat(o,"-"),l=0,u=function(){return l+=1};return function(e,t){var n=t.options.name;if(n&&0===n.indexOf("Mui")&&!t.options.link&&!i){if(-1!==Oe.indexOf(e.key))return"Mui-".concat(e.key);var a="".concat(s).concat(n,"-").concat(e.key);return t.options.theme[Ce]&&""===o?"".concat(a,"-").concat(u()):a}return"".concat(s).concat(r).concat(u())}}(),oi={disableGeneration:!1,generateClassName:ai,jss:ri,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},si=o.a.createContext(oi);var li=-1e9;function ui(){return li+=1}i(116);var ci=i(254);function hi(e){var t="function"===typeof e;return{create:function(i,n){var a;try{a=t?e(i):e}catch(l){throw l}if(!n||!i.overrides||!i.overrides[n])return a;var o=i.overrides[n],s=Object(r.a)({},a);return Object.keys(o).forEach((function(e){s[e]=Object(ci.a)(s[e],o[e])})),s},options:{}}}var pi={};function di(e,t,i){var n=e.state;if(e.stylesOptions.disableGeneration)return t||{};n.cacheClasses||(n.cacheClasses={value:null,lastProp:null,lastJSS:{}});var r=!1;return n.classes!==n.cacheClasses.lastJSS&&(n.cacheClasses.lastJSS=n.classes,r=!0),t!==n.cacheClasses.lastProp&&(n.cacheClasses.lastProp=t,r=!0),r&&(n.cacheClasses.value=ke({baseClasses:n.cacheClasses.lastJSS,newClasses:t,Component:i})),n.cacheClasses.value}function fi(e,t){var i=e.state,n=e.theme,a=e.stylesOptions,o=e.stylesCreator,s=e.name;if(!a.disableGeneration){var l=Se.get(a.sheetsManager,o,n);l||(l={refs:0,staticSheet:null,dynamicStyles:null},Se.set(a.sheetsManager,o,n,l));var u=Object(r.a)({},o.options,a,{theme:n,flip:"boolean"===typeof a.flip?a.flip:"rtl"===n.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var c=a.sheetsRegistry;if(0===l.refs){var h;a.sheetsCache&&(h=Se.get(a.sheetsCache,o,n));var p=o.create(n,s);h||((h=a.jss.createStyleSheet(p,Object(r.a)({link:!1},u))).attach(),a.sheetsCache&&Se.set(a.sheetsCache,o,n,h)),c&&c.add(h),l.staticSheet=h,l.dynamicStyles=we(p)}if(l.dynamicStyles){var d=a.jss.createStyleSheet(l.dynamicStyles,Object(r.a)({link:!0},u));d.update(t),d.attach(),i.dynamicSheet=d,i.classes=ke({baseClasses:l.staticSheet.classes,newClasses:d.classes}),c&&c.add(d)}else i.classes=l.staticSheet.classes;l.refs+=1}}function mi(e,t){var i=e.state;i.dynamicSheet&&i.dynamicSheet.update(t)}function yi(e){var t=e.state,i=e.theme,n=e.stylesOptions,r=e.stylesCreator;if(!n.disableGeneration){var a=Se.get(n.sheetsManager,r,i);a.refs-=1;var o=n.sheetsRegistry;0===a.refs&&(Se.delete(n.sheetsManager,r,i),n.jss.removeStyleSheet(a.staticSheet),o&&o.remove(a.staticSheet)),t.dynamicSheet&&(n.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}function vi(e,t){var i,n=o.a.useRef([]),r=o.a.useMemo((function(){return{}}),t);n.current!==r&&(n.current=r,i=e()),o.a.useEffect((function(){return function(){i&&i()}}),[r])}function gi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.name,a=t.classNamePrefix,s=t.Component,l=t.defaultTheme,u=void 0===l?pi:l,c=Object(n.a)(t,["name","classNamePrefix","Component","defaultTheme"]),h=hi(e),p=i||a||"makeStyles";h.options={index:ui(),name:i,meta:p,classNamePrefix:p};var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Te.a)()||u,n=Object(r.a)({},o.a.useContext(si),c),a=o.a.useRef(),l=o.a.useRef();vi((function(){var r={name:i,state:{},stylesCreator:h,stylesOptions:n,theme:t};return fi(r,e),l.current=!1,a.current=r,function(){yi(r)}}),[t,h]),o.a.useEffect((function(){l.current&&mi(a.current,e),l.current=!0}));var p=di(a.current,e.classes,s);return p};return d}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(191),r=Object(n.a)();t.a=r},function(e,t,i){"use strict";function n(e,t,i){var n={};return Object.keys(e).forEach((function(r){n[r]=e[r].reduce((function(e,n){return n&&(i&&i[n]&&e.push(i[n]),e.push(t(n))),e}),[]).join(" ")})),n}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(5),r=i(161);function a(e,t){return n.useMemo((function(){return null==e&&null==t?null:function(i){Object(r.a)(e,i),Object(r.a)(t,i)}}),[e,t])}},function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n,r=i(5),a=!0,o=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function u(){a=!1}function c(){"hidden"===this.visibilityState&&o&&(a=!0)}function h(e){var t=e.target;try{return t.matches(":focus-visible")}catch(i){}return a||function(e){var t=e.type,i=e.tagName;return!("INPUT"!==i||!s[t]||e.readOnly)||"TEXTAREA"===i&&!e.readOnly||!!e.isContentEditable}(t)}function p(){var e=r.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",c,!0))}),[]),t=r.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,window.clearTimeout(n),n=window.setTimeout((function(){o=!1}),100),t.current=!1,!0)},ref:e}}},function(e,t,i){"use strict";i(163);var n=i(194);var r=Object(n.a)("ButtonUnstyled",["root","active","disabled","focusVisible"]);t.a=r},function(e,t,i){"use strict";var n=i(10),r=i(255),a=i(112);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(e,Object(n.a)({defaultTheme:a.a},t))}},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(35),r=i(5);function a(e){var t=e.controlled,i=e.default,a=(e.name,e.state,r.useRef(void 0!==t).current),o=r.useState(i),s=Object(n.a)(o,2),l=s[0],u=s[1];return[a?t:l,r.useCallback((function(e){a||u(e)}),[])]}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(35),r=i(5),a=0;var o=r.useId;function s(e){if(void 0!==o){var t=o();return null!=e?e:t}return function(e){var t=r.useState(e),i=Object(n.a)(t,2),o=i[0],s=i[1],l=e||o;return r.useEffect((function(){null==o&&s("mui-".concat(a+=1))}),[o]),l}(e)}},function(e,t,i){"use strict";var n=i(10),r=i(30),a=i(5),o=i(31),s=i(46),l=i(79),u={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},c=a.forwardRef((function(e,t){var i=e.align,s=void 0===i?"inherit":i,c=e.classes,h=e.className,p=e.color,d=void 0===p?"initial":p,f=e.component,m=e.display,y=void 0===m?"initial":m,v=e.gutterBottom,g=void 0!==v&&v,_=e.noWrap,b=void 0!==_&&_,x=e.paragraph,w=void 0!==x&&x,k=e.variant,P=void 0===k?"body1":k,S=e.variantMapping,T=void 0===S?u:S,C=Object(r.a)(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),O=f||(w?"p":T[P]||u[P])||"span";return a.createElement(O,Object(n.a)({className:Object(o.a)(c.root,h,"inherit"!==P&&c[P],"initial"!==d&&c["color".concat(Object(l.a)(d))],b&&c.noWrap,g&&c.gutterBottom,w&&c.paragraph,"inherit"!==s&&c["align".concat(Object(l.a)(s))],"initial"!==y&&c["display".concat(Object(l.a)(y))]),ref:t},C))}));t.a=Object(s.a)((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(c)},function(e,t,i){"use strict";var n=i(30),r=i(10),a=i(5),o=i(31),s=i(46),l=[0,1,2,3,4,5,6,7,8,9,10],u=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=parseFloat(e);return"".concat(i/t).concat(String(e).replace(String(i),"")||"px")}var h=a.forwardRef((function(e,t){var i=e.alignContent,s=void 0===i?"stretch":i,l=e.alignItems,u=void 0===l?"stretch":l,c=e.classes,h=e.className,p=e.component,d=void 0===p?"div":p,f=e.container,m=void 0!==f&&f,y=e.direction,v=void 0===y?"row":y,g=e.item,_=void 0!==g&&g,b=e.justify,x=e.justifyContent,w=void 0===x?"flex-start":x,k=e.lg,P=void 0!==k&&k,S=e.md,T=void 0!==S&&S,C=e.sm,O=void 0!==C&&C,I=e.spacing,E=void 0===I?0:I,A=e.wrap,M=void 0===A?"wrap":A,D=e.xl,j=void 0!==D&&D,F=e.xs,L=void 0!==F&&F,R=e.zeroMinWidth,z=void 0!==R&&R,V=Object(n.a)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),B=Object(o.a)(c.root,h,m&&[c.container,0!==E&&c["spacing-xs-".concat(String(E))]],_&&c.item,z&&c.zeroMinWidth,"row"!==v&&c["direction-xs-".concat(String(v))],"wrap"!==M&&c["wrap-xs-".concat(String(M))],"stretch"!==u&&c["align-items-xs-".concat(String(u))],"stretch"!==s&&c["align-content-xs-".concat(String(s))],"flex-start"!==(b||w)&&c["justify-content-xs-".concat(String(b||w))],!1!==L&&c["grid-xs-".concat(String(L))],!1!==O&&c["grid-sm-".concat(String(O))],!1!==T&&c["grid-md-".concat(String(T))],!1!==P&&c["grid-lg-".concat(String(P))],!1!==j&&c["grid-xl-".concat(String(j))]);return a.createElement(d,Object(r.a)({className:B,ref:t},V))})),p=Object(s.a)((function(e){return Object(r.a)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var i={};return l.forEach((function(n){var r=e.spacing(n);0!==r&&(i["spacing-".concat(t,"-").concat(n)]={margin:"-".concat(c(r,2)),width:"calc(100% + ".concat(c(r),")"),"& > $item":{padding:c(r,2)}})})),i}(e,"xs"),e.breakpoints.keys.reduce((function(t,i){return function(e,t,i){var n={};u.forEach((function(e){var t="grid-".concat(i,"-").concat(e);if(!0!==e)if("auto"!==e){var r="".concat(Math.round(e/12*1e8)/1e6,"%");n[t]={flexBasis:r,flexGrow:0,maxWidth:r}}else n[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else n[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===i?Object(r.a)(e,n):e[t.breakpoints.up(i)]=n}(t,e,i),t}),{}))}),{name:"MuiGrid"})(h);t.a=p},function(e,t,i){"use strict";var n=i(10),r=i(30),a=i(5),o=i(31),s=i(46),l=a.forwardRef((function(e,t){var i=e.classes,s=e.className,l=e.component,u=void 0===l?"div":l,c=Object(r.a)(e,["classes","className","component"]);return a.createElement(u,Object(n.a)({className:Object(o.a)(i.root,s),ref:t},c))}));t.a=Object(s.a)({root:{padding:16,"&:last-child":{paddingBottom:24}}},{name:"MuiCardContent"})(l)},function(e,t,i){"use strict";var n=i(10),r=i(30),a=i(5),o=i(31),s=i(46),l=i(78),u=a.forwardRef((function(e,t){var i=e.absolute,s=void 0!==i&&i,l=e.classes,u=e.className,c=e.component,h=void 0===c?"hr":c,p=e.flexItem,d=void 0!==p&&p,f=e.light,m=void 0!==f&&f,y=e.orientation,v=void 0===y?"horizontal":y,g=e.role,_=void 0===g?"hr"!==h?"separator":void 0:g,b=e.variant,x=void 0===b?"fullWidth":b,w=Object(r.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return a.createElement(h,Object(n.a)({className:Object(o.a)(l.root,u,"fullWidth"!==x&&l[x],s&&l.absolute,d&&l.flexItem,m&&l.light,"vertical"===v&&l.vertical),role:_,ref:t},w))}));t.a=Object(s.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(l.a)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(u)},function(e,t,i){"use strict";var n=i(60),r=i(10),a=i(84);function o(e,t){var i={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(i[n]=e[n])})),i}function s(e){var t=function(t){var i=e(t);return t.css?Object(r.a)({},Object(a.a)(i,e(Object(r.a)({theme:t.theme},t.css))),o(t.css,[e.filterProps])):t.sx?Object(r.a)({},Object(a.a)(i,e(Object(r.a)({theme:t.theme},t.sx))),o(t.sx,[e.filterProps])):i};return t.propTypes={},t.filterProps=["css","sx"].concat(Object(n.a)(e.filterProps)),t}var l=s;var u=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=function(e){return t.reduce((function(t,i){var n=i(e);return n?Object(a.a)(t,n):t}),{})};return n.propTypes={},n.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),n},c=i(33),h=i(148);function p(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}var d=function(e){var t=e.prop,i=e.cssProperty,n=void 0===i?e.prop:i,r=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var i=e[t],o=p(e.theme,r)||{};return Object(h.a)(e,i,(function(e){var t;return"function"===typeof o?t=o(e):Array.isArray(o)?t=o[e]||e:(t=p(o,e)||e,a&&(t=a(t))),!1===n?t:Object(c.a)({},n,t)}))};return o.propTypes={},o.filterProps=[t],o};function f(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var m=u(d({prop:"border",themeKey:"borders",transform:f}),d({prop:"borderTop",themeKey:"borders",transform:f}),d({prop:"borderRight",themeKey:"borders",transform:f}),d({prop:"borderBottom",themeKey:"borders",transform:f}),d({prop:"borderLeft",themeKey:"borders",transform:f}),d({prop:"borderColor",themeKey:"palette"}),d({prop:"borderRadius",themeKey:"shape"})),y=u(d({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),d({prop:"display"}),d({prop:"overflow"}),d({prop:"textOverflow"}),d({prop:"visibility"}),d({prop:"whiteSpace"})),v=u(d({prop:"flexBasis"}),d({prop:"flexDirection"}),d({prop:"flexWrap"}),d({prop:"justifyContent"}),d({prop:"alignItems"}),d({prop:"alignContent"}),d({prop:"order"}),d({prop:"flex"}),d({prop:"flexGrow"}),d({prop:"flexShrink"}),d({prop:"alignSelf"}),d({prop:"justifyItems"}),d({prop:"justifySelf"})),g=u(d({prop:"gridGap"}),d({prop:"gridColumnGap"}),d({prop:"gridRowGap"}),d({prop:"gridColumn"}),d({prop:"gridRow"}),d({prop:"gridAutoFlow"}),d({prop:"gridAutoColumns"}),d({prop:"gridAutoRows"}),d({prop:"gridTemplateColumns"}),d({prop:"gridTemplateRows"}),d({prop:"gridTemplateAreas"}),d({prop:"gridArea"})),_=u(d({prop:"position"}),d({prop:"zIndex",themeKey:"zIndex"}),d({prop:"top"}),d({prop:"right"}),d({prop:"bottom"}),d({prop:"left"})),b=u(d({prop:"color",themeKey:"palette"}),d({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"})),x=d({prop:"boxShadow",themeKey:"shadows"});function w(e){return e<=1?"".concat(100*e,"%"):e}var k=d({prop:"width",transform:w}),P=d({prop:"maxWidth",transform:w}),S=d({prop:"minWidth",transform:w}),T=d({prop:"height",transform:w}),C=d({prop:"maxHeight",transform:w}),O=d({prop:"minHeight",transform:w}),I=(d({prop:"size",cssProperty:"width",transform:w}),d({prop:"size",cssProperty:"height",transform:w}),u(k,P,S,T,C,O,d({prop:"boxSizing"}))),E=i(303),A=u(d({prop:"fontFamily",themeKey:"typography"}),d({prop:"fontSize",themeKey:"typography"}),d({prop:"fontStyle",themeKey:"typography"}),d({prop:"fontWeight",themeKey:"typography"}),d({prop:"letterSpacing"}),d({prop:"lineHeight"}),d({prop:"textAlign"})),M=i(30),D=i(5),j=i.n(D),F=i(31),L=i(90),R=i.n(L),z=i(255);function V(e,t){var i={};return Object.keys(e).forEach((function(n){-1===t.indexOf(n)&&(i[n]=e[n])})),i}var B=i(112),N=function(e){var t=function(e){return function(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.name,o=Object(M.a)(n,["name"]),s=a,l="function"===typeof t?function(e){return{root:function(i){return t(Object(r.a)({theme:e},i))}}}:{root:t},u=Object(z.a)(l,Object(r.a)({Component:e,name:a||e.displayName,classNamePrefix:s},o));t.filterProps&&(i=t.filterProps,delete t.filterProps),t.propTypes&&(t.propTypes,delete t.propTypes);var c=j.a.forwardRef((function(t,n){var a=t.children,o=t.className,s=t.clone,l=t.component,c=Object(M.a)(t,["children","className","clone","component"]),h=u(t),p=Object(F.a)(h.root,o),d=c;if(i&&(d=V(d,i)),s)return j.a.cloneElement(a,Object(r.a)({className:Object(F.a)(a.props.className,p)},d));if("function"===typeof a)return a(Object(r.a)({className:p},d));var f=l||e;return j.a.createElement(f,Object(r.a)({ref:n,className:p},d),a)}));return R()(c,e),c}}(e);return function(e,i){return t(e,Object(r.a)({defaultTheme:B.a},i))}},U=l(u(m,y,v,g,_,b,x,I,E.b,A)),W=N("div")(U,{name:"MuiBox"});t.a=W},function(e,t,i){"use strict";var n=i(10),r=i(30),a=i(5),o=i.n(a),s=i(31),l=i(46),u=i(78),c=i(89);function h(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function p(e,t){return a.useMemo((function(){return null==e&&null==t?null:function(i){h(e,i),h(t,i)}}),[e,t])}var d="undefined"!==typeof window?a.useLayoutEffect:a.useEffect;function f(e){var t=a.useRef(e);return d((function(){t.current=e})),a.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}var m=!0,y=!1,v=null,g={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function _(e){e.metaKey||e.altKey||e.ctrlKey||(m=!0)}function b(){m=!1}function x(){"hidden"===this.visibilityState&&y&&(m=!0)}function w(e){var t=e.target;try{return t.matches(":focus-visible")}catch(i){}return m||function(e){var t=e.type,i=e.tagName;return!("INPUT"!==i||!g[t]||e.readOnly)||"TEXTAREA"===i&&!e.readOnly||!!e.isContentEditable}(t)}function k(){y=!0,window.clearTimeout(v),v=window.setTimeout((function(){y=!1}),100)}function P(){return{isFocusVisible:w,onBlurVisible:k,ref:a.useCallback((function(e){var t,i=c.findDOMNode(e);null!=i&&((t=i.ownerDocument).addEventListener("keydown",_,!0),t.addEventListener("mousedown",b,!0),t.addEventListener("pointerdown",b,!0),t.addEventListener("touchstart",b,!0),t.addEventListener("visibilitychange",x,!0))}),[])}}var S=i(60),T=i(29),C=i(121),O=i(52),I=o.a.createContext(null);function E(e,t){var i=Object.create(null);return e&&a.Children.map(e,(function(e){return e})).forEach((function(e){i[e.key]=function(e){return t&&Object(a.isValidElement)(e)?t(e):e}(e)})),i}function A(e,t,i){return null!=i[t]?i[t]:e.props[t]}function M(e,t,i){var n=E(e.children),r=function(e,t){function i(i){return i in t?t[i]:e[i]}e=e||{},t=t||{};var n,r=Object.create(null),a=[];for(var o in e)o in t?a.length&&(r[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(r[l])for(n=0;n<r[l].length;n++){var u=r[l][n];s[r[l][n]]=i(u)}s[l]=i(l)}for(n=0;n<a.length;n++)s[a[n]]=i(a[n]);return s}(t,n);return Object.keys(r).forEach((function(o){var s=r[o];if(Object(a.isValidElement)(s)){var l=o in t,u=o in n,c=t[o],h=Object(a.isValidElement)(c)&&!c.props.in;!u||l&&!h?u||!l||h?u&&l&&Object(a.isValidElement)(c)&&(r[o]=Object(a.cloneElement)(s,{onExited:i.bind(null,s),in:c.props.in,exit:A(s,"exit",e),enter:A(s,"enter",e)})):r[o]=Object(a.cloneElement)(s,{in:!1}):r[o]=Object(a.cloneElement)(s,{onExited:i.bind(null,s),in:!0,exit:A(s,"exit",e),enter:A(s,"enter",e)})}})),r}var D=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},j=function(e){function t(t,i){var n,r=(n=e.call(this,t,i)||this).handleExited.bind(Object(C.a)(n));return n.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},n}Object(O.a)(t,e);var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var i,n,r=t.children,o=t.handleExited;return{children:t.firstRender?(i=e,n=o,E(i.children,(function(e){return Object(a.cloneElement)(e,{onExited:n.bind(null,e),in:!0,appear:A(e,"appear",i),enter:A(e,"enter",i),exit:A(e,"exit",i)})}))):M(e,r,o),firstRender:!1}},i.handleExited=function(e,t){var i=E(this.props.children);e.key in i||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var i=Object(n.a)({},t.children);return delete i[e.key],{children:i}})))},i.render=function(){var e=this.props,t=e.component,i=e.childFactory,n=Object(T.a)(e,["component","childFactory"]),r=this.state.contextValue,a=D(this.state.children).map(i);return delete n.appear,delete n.enter,delete n.exit,null===t?o.a.createElement(I.Provider,{value:r},a):o.a.createElement(I.Provider,{value:r},o.a.createElement(t,n,a))},t}(o.a.Component);j.propTypes={},j.defaultProps={component:"div",childFactory:function(e){return e}};var F=j,L="undefined"===typeof window?a.useEffect:a.useLayoutEffect;var R=function(e){var t=e.classes,i=e.pulsate,n=void 0!==i&&i,r=e.rippleX,o=e.rippleY,l=e.rippleSize,u=e.in,c=e.onExited,h=void 0===c?function(){}:c,p=e.timeout,d=a.useState(!1),m=d[0],y=d[1],v=Object(s.a)(t.ripple,t.rippleVisible,n&&t.ripplePulsate),g={width:l,height:l,top:-l/2+o,left:-l/2+r},_=Object(s.a)(t.child,m&&t.childLeaving,n&&t.childPulsate),b=f(h);return L((function(){if(!u){y(!0);var e=setTimeout(b,p);return function(){clearTimeout(e)}}}),[b,u,p]),a.createElement("span",{className:v,style:g},a.createElement("span",{className:_}))},z=a.forwardRef((function(e,t){var i=e.center,o=void 0!==i&&i,l=e.classes,u=e.className,c=Object(r.a)(e,["center","classes","className"]),h=a.useState([]),p=h[0],d=h[1],f=a.useRef(0),m=a.useRef(null);a.useEffect((function(){m.current&&(m.current(),m.current=null)}),[p]);var y=a.useRef(!1),v=a.useRef(null),g=a.useRef(null),_=a.useRef(null);a.useEffect((function(){return function(){clearTimeout(v.current)}}),[]);var b=a.useCallback((function(e){var t=e.pulsate,i=e.rippleX,n=e.rippleY,r=e.rippleSize,o=e.cb;d((function(e){return[].concat(Object(S.a)(e),[a.createElement(R,{key:f.current,classes:l,timeout:550,pulsate:t,rippleX:i,rippleY:n,rippleSize:r})])})),f.current+=1,m.current=o}),[l]),x=a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,n=t.pulsate,r=void 0!==n&&n,a=t.center,s=void 0===a?o||t.pulsate:a,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===e.type&&y.current)y.current=!1;else{"touchstart"===e.type&&(y.current=!0);var c,h,p,d=u?null:_.current,f=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(f.width/2),h=Math.round(f.height/2);else{var m=e.touches?e.touches[0]:e,x=m.clientX,w=m.clientY;c=Math.round(x-f.left),h=Math.round(w-f.top)}if(s)(p=Math.sqrt((2*Math.pow(f.width,2)+Math.pow(f.height,2))/3))%2===0&&(p+=1);else{var k=2*Math.max(Math.abs((d?d.clientWidth:0)-c),c)+2,P=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;p=Math.sqrt(Math.pow(k,2)+Math.pow(P,2))}e.touches?null===g.current&&(g.current=function(){b({pulsate:r,rippleX:c,rippleY:h,rippleSize:p,cb:i})},v.current=setTimeout((function(){g.current&&(g.current(),g.current=null)}),80)):b({pulsate:r,rippleX:c,rippleY:h,rippleSize:p,cb:i})}}),[o,b]),w=a.useCallback((function(){x({},{pulsate:!0})}),[x]),k=a.useCallback((function(e,t){if(clearTimeout(v.current),"touchend"===e.type&&g.current)return e.persist(),g.current(),g.current=null,void(v.current=setTimeout((function(){k(e,t)})));g.current=null,d((function(e){return e.length>0?e.slice(1):e})),m.current=t}),[]);return a.useImperativeHandle(t,(function(){return{pulsate:w,start:x,stop:k}}),[w,x,k]),a.createElement("span",Object(n.a)({className:Object(s.a)(l.root,u),ref:_},c),a.createElement(F,{component:null,exit:!0},p))})),V=Object(l.a)((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(a.memo(z)),B=a.forwardRef((function(e,t){var i=e.action,o=e.buttonRef,l=e.centerRipple,u=void 0!==l&&l,h=e.children,d=e.classes,m=e.className,y=e.component,v=void 0===y?"button":y,g=e.disabled,_=void 0!==g&&g,b=e.disableRipple,x=void 0!==b&&b,w=e.disableTouchRipple,k=void 0!==w&&w,S=e.focusRipple,T=void 0!==S&&S,C=e.focusVisibleClassName,O=e.onBlur,I=e.onClick,E=e.onFocus,A=e.onFocusVisible,M=e.onKeyDown,D=e.onKeyUp,j=e.onMouseDown,F=e.onMouseLeave,L=e.onMouseUp,R=e.onTouchEnd,z=e.onTouchMove,B=e.onTouchStart,N=e.onDragLeave,U=e.tabIndex,W=void 0===U?0:U,G=e.TouchRippleProps,H=e.type,X=void 0===H?"button":H,Y=Object(r.a)(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),q=a.useRef(null);var Z=a.useRef(null),K=a.useState(!1),$=K[0],J=K[1];_&&$&&J(!1);var Q=P(),ee=Q.isFocusVisible,te=Q.onBlurVisible,ie=Q.ref;function ne(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return f((function(n){return t&&t(n),!i&&Z.current&&Z.current[e](n),!0}))}a.useImperativeHandle(i,(function(){return{focusVisible:function(){J(!0),q.current.focus()}}}),[]),a.useEffect((function(){$&&T&&!x&&Z.current.pulsate()}),[x,T,$]);var re=ne("start",j),ae=ne("stop",N),oe=ne("stop",L),se=ne("stop",(function(e){$&&e.preventDefault(),F&&F(e)})),le=ne("start",B),ue=ne("stop",R),ce=ne("stop",z),he=ne("stop",(function(e){$&&(te(e),J(!1)),O&&O(e)}),!1),pe=f((function(e){q.current||(q.current=e.currentTarget),ee(e)&&(J(!0),A&&A(e)),E&&E(e)})),de=function(){var e=c.findDOMNode(q.current);return v&&"button"!==v&&!("A"===e.tagName&&e.href)},fe=a.useRef(!1),me=f((function(e){T&&!fe.current&&$&&Z.current&&" "===e.key&&(fe.current=!0,e.persist(),Z.current.stop(e,(function(){Z.current.start(e)}))),e.target===e.currentTarget&&de()&&" "===e.key&&e.preventDefault(),M&&M(e),e.target===e.currentTarget&&de()&&"Enter"===e.key&&!_&&(e.preventDefault(),I&&I(e))})),ye=f((function(e){T&&" "===e.key&&Z.current&&$&&!e.defaultPrevented&&(fe.current=!1,e.persist(),Z.current.stop(e,(function(){Z.current.pulsate(e)}))),D&&D(e),I&&e.target===e.currentTarget&&de()&&" "===e.key&&!e.defaultPrevented&&I(e)})),ve=v;"button"===ve&&Y.href&&(ve="a");var ge={};"button"===ve?(ge.type=X,ge.disabled=_):("a"===ve&&Y.href||(ge.role="button"),ge["aria-disabled"]=_);var _e=p(o,t),be=p(ie,q),xe=p(_e,be),we=a.useState(!1),ke=we[0],Pe=we[1];a.useEffect((function(){Pe(!0)}),[]);var Se=ke&&!x&&!_;return a.createElement(ve,Object(n.a)({className:Object(s.a)(d.root,m,$&&[d.focusVisible,C],_&&d.disabled),onBlur:he,onClick:I,onFocus:pe,onKeyDown:me,onKeyUp:ye,onMouseDown:re,onMouseLeave:se,onMouseUp:oe,onDragLeave:ae,onTouchEnd:ue,onTouchMove:ce,onTouchStart:le,ref:xe,tabIndex:_?-1:W},ge,Y),h,Se?a.createElement(V,Object(n.a)({ref:Z,center:u},G)):null)})),N=Object(l.a)({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(B),U=i(79),W=a.forwardRef((function(e,t){var i=e.edge,o=void 0!==i&&i,l=e.children,u=e.classes,c=e.className,h=e.color,p=void 0===h?"default":h,d=e.disabled,f=void 0!==d&&d,m=e.disableFocusRipple,y=void 0!==m&&m,v=e.size,g=void 0===v?"medium":v,_=Object(r.a)(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return a.createElement(N,Object(n.a)({className:Object(s.a)(u.root,c,"default"!==p&&u["color".concat(Object(U.a)(p))],f&&u.disabled,"small"===g&&u["size".concat(Object(U.a)(g))],{start:u.edgeStart,end:u.edgeEnd}[o]),centerRipple:!0,focusRipple:!y,disabled:f,ref:t},_),a.createElement("span",{className:u.label},l))}));t.a=Object(l.a)((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:Object(u.a)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:Object(u.a)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:Object(u.a)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(W)},function(e,t,i){"use strict";var n=i(10),r=i(29),a=i(193),o=["values","unit","step"];function s(e){var t=e.values,i=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,a=e.unit,s=void 0===a?"px":a,l=e.step,u=void 0===l?5:l,c=Object(r.a)(e,o),h=Object.keys(i);function p(e){var t="number"===typeof i[e]?i[e]:e;return"@media (min-width:".concat(t).concat(s,")")}function d(e){var t="number"===typeof i[e]?i[e]:e;return"@media (max-width:".concat(t-u/100).concat(s,")")}function f(e,t){var n=h.indexOf(t);return"@media (min-width:".concat("number"===typeof i[e]?i[e]:e).concat(s,") and ")+"(max-width:".concat((-1!==n&&"number"===typeof i[h[n]]?i[h[n]]:t)-u/100).concat(s,")")}return Object(n.a)({keys:h,values:i,up:p,down:d,between:f,only:function(e){return h.indexOf(e)+1<h.length?f(e,h[h.indexOf(e)+1]):p(e)},not:function(e){var t=h.indexOf(e);return 0===t?p(h[1]):t===h.length-1?d(h[t]):f(e,h[h.indexOf(e)+1]).replace("@media","@media not all and")},unit:s},c)}var l={borderRadius:4},u=i(62);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Object(u.a)({spacing:e}),i=function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var r=0===i.length?[1]:i;return r.map((function(e){var i=t(e);return"number"===typeof i?"".concat(i,"px"):i})).join(" ")};return i.mui=!0,i}var h=["breakpoints","palette","spacing","shape"];t.a=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,i=void 0===t?{}:t,o=e.palette,u=void 0===o?{}:o,p=e.spacing,d=e.shape,f=void 0===d?{}:d,m=Object(r.a)(e,h),y=s(i),v=c(p),g=Object(a.a)({breakpoints:y,direction:"ltr",components:{},palette:Object(n.a)({mode:"light"},u),spacing:v,shape:Object(n.a)({},l,f)},m),_=arguments.length,b=new Array(_>1?_-1:0),x=1;x<_;x++)b[x-1]=arguments[x];return g=b.reduce((function(e,t){return Object(a.a)(e,t)}),g)}},function(e,t,i){"use strict";var n=i(10),r=i(29),a=i(5),o=i(31),s=i(284),l=i(283),u=i(192),c=i(180),h=i(182),p=i(35),d=i(285),f=i(161),m=i(147);var y=["getRootProps"],v=function(e){var t=e.value,i=e.onChange,o=e.onClick,l=e.onFocus,u=function(e){var t,i=e.component,r=e.components,o=void 0===r?{}:r,l=e.disabled,u=void 0!==l&&l,c=e.href,h=e.ref,y=e.tabIndex,v=void 0===y?0:y,g=e.to,_=e.type,b=a.useRef(),x=a.useState(!1),w=Object(p.a)(x,2),k=w[0],P=w[1],S=Object(d.a)(),T=S.isFocusVisibleRef,C=S.onFocus,O=S.onBlur,I=S.ref,E=a.useState(!1),A=Object(p.a)(E,2),M=A[0],D=A[1];u&&M&&D(!1),a.useEffect((function(){T.current=M}),[M,T]);var j=function(e){return function(t){var i;M&&t.preventDefault(),null==(i=e.onMouseLeave)||i.call(e,t)}},F=function(e){return function(t){var i;O(t),!1===T.current&&D(!1),null==(i=e.onBlur)||i.call(e,t)}},L=function(e){return function(t){var i,n;b.current||(b.current=t.currentTarget),C(t),!0===T.current&&(D(!0),null==(n=e.onFocusVisible)||n.call(e,t)),null==(i=e.onFocus)||i.call(e,t)}},R=null!=(t=null!=i?i:o.Root)?t:"button",z=function(){var e=b.current;return"button"!==R&&!("A"===(null==e?void 0:e.tagName)&&null!=e&&e.href)},V=function(e){return function(t){var i;t.target!==t.currentTarget||u||P(!0),null==(i=e.onMouseDown)||i.call(e,t)}},B=function(e){return function(t){var i;t.target===t.currentTarget&&P(!1),null==(i=e.onMouseUp)||i.call(e,t)}},N=function(e){return function(t){var i,n;null==(i=e.onKeyDown)||i.call(e,t),t.defaultPrevented||(t.target===t.currentTarget&&z()&&" "===t.key&&t.preventDefault(),t.target!==t.currentTarget||" "!==t.key||u||P(!0),t.target===t.currentTarget&&z()&&"Enter"===t.key&&!u&&(null==(n=e.onClick)||n.call(e,t),t.preventDefault()))}},U=function(e){return function(t){var i,n;t.target===t.currentTarget&&P(!1),null==(i=e.onKeyUp)||i.call(e,t),t.target===t.currentTarget&&z()&&" "===t.key&&!t.defaultPrevented&&(null==(n=e.onClick)||n.call(e,t))}},W=Object(s.a)(I,b),G=Object(s.a)(h,W),H=a.useState(""),X=Object(p.a)(H,2),Y=X[0],q=X[1],Z=function(e){var t;q(null!=(t=null==e?void 0:e.tagName)?t:""),Object(f.a)(G,e)},K={};return"BUTTON"===Y?(K.type=null!=_?_:"button",K.disabled=u):""!==Y&&(c||g||(K.role="button"),u&&(K["aria-disabled"]=u)),{getRootProps:function(t){var i=Object(m.a)(e),r=Object(n.a)({},i,t),a={onBlur:F(r),onFocus:L(r),onKeyDown:N(r),onKeyUp:U(r),onMouseDown:V(r),onMouseLeave:j(r),onMouseUp:B(r)},o=Object(n.a)({},r,a);return delete o.onFocusVisible,Object(n.a)({tabIndex:u?-1:v,type:_},K,o,{ref:Z})},focusVisible:M,setFocusVisible:D,disabled:u,active:k}}(e),c=u.getRootProps,v=Object(r.a)(u,y),g=Object(h.d)();if(null===g)throw new Error("No TabContext provided");var _=null!=t?t:0,b=g.value===_,x=g.selectionFollowsFocus,w={role:"tab","aria-controls":Object(h.b)(g,_),id:Object(h.c)(g,_),"aria-selected":b,disabled:v.disabled},k=function(e){x&&!b&&(i&&i(e,_),g.onSelected(e,_)),l&&l(e)},P=function(e){b||(i&&i(e,_),g.onSelected(e,_)),o&&o(e)};return Object(n.a)({getRootProps:function(e){var t=c(Object(n.a)({onClick:P,onFocus:k},e));return Object(n.a)({},t,w)}},v,{selected:b})},g=i(17),_=["action","children","value","className","disabled","onChange","onClick","onFocus","component","components","componentsProps"],b=a.forwardRef((function(e,t){var i,h,p=e.action,d=e.children,f=e.className,m=e.disabled,y=void 0!==m&&m,b=e.component,x=e.components,w=void 0===x?{}:x,k=e.componentsProps,P=void 0===k?{}:k,S=Object(r.a)(e,_),T=a.useRef(),C=Object(s.a)(T,t),O=v(Object(n.a)({},e,{ref:C})),I=O.active,E=O.focusVisible,A=O.setFocusVisible,M=O.selected,D=O.getRootProps;a.useImperativeHandle(p,(function(){return{focusVisible:function(){A(!0),T.current.focus()}}}),[A]);var j=Object(n.a)({},e,{active:I,focusVisible:E,disabled:y,selected:M}),F=function(e){var t={root:["root",e.selected&&"selected",e.disabled&&"disabled"]};return Object(l.a)(t,c.b,{})}(j),L=null!=(i=null!=b?b:w.Root)?i:"button",R=Object(u.a)(L,Object(n.a)({},S,P.root),j);return Object(g.jsx)(L,Object(n.a)({},D(),R,{className:Object(o.a)(F.root,null==(h=P.root)?void 0:h.className,f),ref:t,children:d}))}));t.a=b},function(e,t,i){"use strict";var n=i(10),r=i(29),a=i(5),o=i(31),s=i(283),l=i(192),u=i(163),c=i(194);function h(e){return Object(u.a)("TabsListUnstyled",e)}Object(c.a)("TabsListUnstyled",["root","horizontal","vertical"]);var p=i(284),d=i(183),f=(i(224),i(182)),m=i(147),y=function(e,t){return e?e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild:null},v=function(e,t){return e?e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild:null},g=function(e,t,i){for(var n=!1,r=i(e,t);e&&r;){if(r===e.firstChild){if(n)return;n=!0}var a=r.disabled||"true"===r.getAttribute("aria-disabled");if(r.hasAttribute("tabindex")&&!a)return void r.focus();r=i(e,r)}},_=function(e){var t=e["aria-label"],i=e["aria-labelledby"],r=e.children,o=e.ref,s=a.createRef(),l=Object(p.a)(s,o),u=Object(f.d)();if(null===u)throw new Error("No TabContext provided");var c=u.value,h=u.orientation,_=void 0===h?"horizontal":h,b=u.direction,x="rtl"===(void 0===b?"ltr":b),w=function(e){return function(t){var i;!function(e){var t=s.current,i=Object(d.a)(t).activeElement;if("tab"===(null==i?void 0:i.getAttribute("role"))){var n="horizontal"===_?"ArrowLeft":"ArrowUp",r="horizontal"===_?"ArrowRight":"ArrowDown";switch("horizontal"===_&&x&&(n="ArrowRight",r="ArrowLeft"),e.key){case n:e.preventDefault(),g(t,i,v);break;case r:e.preventDefault(),g(t,i,y);break;case"Home":e.preventDefault(),g(t,null,y);break;case"End":e.preventDefault(),g(t,null,v)}}}(t),null==(i=e.onKeyDown)||i.call(e,t)}},k=a.useCallback((function(){var e=new Map,t=0;return a.Children.map(r,(function(i){if(!a.isValidElement(i))return null;var r=void 0===i.props.value?t:i.props.value;return e.set(r,t),t+=1,a.cloneElement(i,Object(n.a)({value:r},1===t&&!1===c&&!i.props.tabIndex||c===r?{tabIndex:0}:{tabIndex:-1}))}))}),[r,c]);return{isRtl:x,orientation:_,value:c,processChildren:k,getRootProps:function(r){var a=Object(m.a)(e),o=Object(n.a)({},a,r),s={onKeyDown:w(o)},u=Object(n.a)({},o,s);return Object(n.a)({"aria-label":t,"aria-labelledby":i,"aria-orientation":"vertical"===_?"vertical":null,role:"tablist",ref:l},u)}}},b=i(17),x=["className","children","component","components","componentsProps"],w=a.forwardRef((function(e,t){var i,a,u=e.className,c=e.component,p=e.components,d=void 0===p?{}:p,f=e.componentsProps,m=void 0===f?{}:f,y=Object(r.a)(e,x),v=_(Object(n.a)({},e,{ref:t})),g=v.isRtl,w=v.orientation,k=v.getRootProps,P=v.processChildren,S=Object(n.a)({},e,{isRtl:g,orientation:w}),T=function(e){var t={root:["root",e.orientation]};return Object(s.a)(t,h,{})}(S),C=null!=(i=null!=c?c:d.Root)?i:"div",O=Object(l.a)(C,Object(n.a)({},y,m.root),S),I=P();return Object(b.jsx)(C,Object(n.a)({},k(),O,{className:Object(o.a)(u,null==(a=m.root)?void 0:a.className,T.root),children:I}))}));t.a=w},function(e,t,i){"use strict";var n=i(10),r=i(29),a=i(5),o=i(31),s=i(192),l=i(283),u=i(163),c=i(194);function h(e){return Object(u.a)("TabsUnstyled",e)}Object(c.a)("TabsUnstyled",["root","horizontal","vertical"]);var p=i(35),d=i(288),f=i(289),m=function(e){var t=e.value,i=e.defaultValue,n=e.onChange,r=e.orientation,o=e.direction,s=e.selectionFollowsFocus,l=Object(d.a)({controlled:t,default:i,name:"Tabs",state:"value"}),u=Object(p.a)(l,2),c=u[0],h=u[1],m=Object(f.a)(),y=a.useCallback((function(e,t){h(t),n&&n(e,t)}),[n,h]);return{getRootProps:function(){return{}},tabsContextValue:a.useMemo((function(){return{idPrefix:m,value:c,onSelected:y,orientation:r,direction:o,selectionFollowsFocus:s}}),[m,c,y,r,o,s])}},y=i(182),v=i(17),g=["children","className","value","defaultValue","orientation","direction","component","components","componentsProps","onChange","selectionFollowsFocus"],_=a.forwardRef((function(e,t){var i,a,u=e.children,c=e.className,p=e.orientation,d=void 0===p?"horizontal":p,f=e.direction,_=void 0===f?"ltr":f,b=e.component,x=e.components,w=void 0===x?{}:x,k=e.componentsProps,P=void 0===k?{}:k,S=Object(r.a)(e,g),T=m(e),C=T.tabsContextValue,O=T.getRootProps,I=Object(n.a)({},e,{orientation:d,direction:_}),E=function(e){var t={root:["root",e.orientation]};return Object(l.a)(t,h,{})}(I),A=null!=(i=null!=b?b:w.Root)?i:"div",M=Object(s.a)(A,Object(n.a)({},S,P.root),I);return Object(v.jsx)(A,Object(n.a)({},O(),M,{ref:t,className:Object(o.a)(E.root,null==(a=P.root)?void 0:a.className,c),children:Object(v.jsx)(y.a.Provider,{value:C,children:u})}))}));t.a=_},function(e,t,i){"use strict";var n=i(5),r=i.n(n),a=i(10),o=i(30),s=i(31),l=i(46),u=i(79),c=n.forwardRef((function(e,t){var i=e.children,r=e.classes,l=e.className,c=e.color,h=void 0===c?"inherit":c,p=e.component,d=void 0===p?"svg":p,f=e.fontSize,m=void 0===f?"medium":f,y=e.htmlColor,v=e.titleAccess,g=e.viewBox,_=void 0===g?"0 0 24 24":g,b=Object(o.a)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return n.createElement(d,Object(a.a)({className:Object(s.a)(r.root,l,"inherit"!==h&&r["color".concat(Object(u.a)(h))],"default"!==m&&"medium"!==m&&r["fontSize".concat(Object(u.a)(m))]),focusable:"false",viewBox:_,color:y,"aria-hidden":!v||void 0,role:v?"img":void 0,ref:t},b),i,v?n.createElement("title",null,v):null)}));c.muiName="SvgIcon";var h=Object(l.a)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(c);t.a=function(e,t){var i=function(t,i){return r.a.createElement(h,Object(a.a)({ref:i},t),e)};return i.muiName=h.muiName,r.a.memo(r.a.forwardRef(i))}(n.createElement("path",{d:"M12 12c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm6-1.8C18 6.57 15.35 4 12 4s-6 2.57-6 6.2c0 2.34 1.95 5.44 6 9.14 4.05-3.7 6-6.8 6-9.14zM12 2c4.2 0 8 3.22 8 8.2 0 3.32-2.67 7.25-8 11.8-5.33-4.55-8-8.48-8-11.8C4 5.22 7.8 2 12 2z"}))},function(e,t,i){"use strict";var n=i(10),r=i(30),a=i(5),o=i(31),s=i(46),l=a.forwardRef((function(e,t){var i=e.classes,s=e.className,l=e.component,u=void 0===l?"div":l,c=e.square,h=void 0!==c&&c,p=e.elevation,d=void 0===p?1:p,f=e.variant,m=void 0===f?"elevation":f,y=Object(r.a)(e,["classes","className","component","square","elevation","variant"]);return a.createElement(u,Object(n.a)({className:Object(o.a)(i.root,s,"outlined"===m?i.outlined:i["elevation".concat(d)],!h&&i.rounded),ref:t},y))})),u=Object(s.a)((function(e){var t={};return e.shadows.forEach((function(e,i){t["elevation".concat(i)]={boxShadow:e}})),Object(n.a)({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(l),c=a.forwardRef((function(e,t){var i=e.classes,s=e.className,l=e.raised,c=void 0!==l&&l,h=Object(r.a)(e,["classes","className","raised"]);return a.createElement(u,Object(n.a)({className:Object(o.a)(i.root,s),elevation:c?8:1,ref:t},h))}));t.a=Object(s.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(c)},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(5),r=i.n(n);var a=r.a.createContext(null);function o(){return r.a.useContext(a)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i(35),r=i(148),a=i(84);var o={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},l={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},u=function(e){var t={};return function(i){return void 0===t[i]&&(t[i]=e(i)),t[i]}}((function(e){if(e.length>2){if(!l[e])return[e];e=l[e]}var t=e.split(""),i=Object(n.a)(t,2),r=i[0],a=i[1],u=o[r],c=s[a]||"";return Array.isArray(c)?c.map((function(e){return u+e})):[u+c]})),c=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function h(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function p(e,t){return function(i){return e.reduce((function(e,n){return e[n]=function(e,t){if("string"===typeof t||null==t)return t;var i=e(Math.abs(t));return t>=0?i:"number"===typeof i?-i:"-".concat(i)}(t,i),e}),{})}}function d(e){var t=h(e.theme);return Object.keys(e).map((function(i){if(-1===c.indexOf(i))return null;var n=p(u(i),t),a=e[i];return Object(r.a)(e,a,n)})).reduce(a.a,{})}d.propTypes={},d.filterProps=c;t.b=d}]]);
//# sourceMappingURL=3.f090ac5a.chunk.js.map